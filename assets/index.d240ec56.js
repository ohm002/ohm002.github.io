(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Dw(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Y={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),RC=Symbol.for("react.portal"),MC=Symbol.for("react.fragment"),NC=Symbol.for("react.strict_mode"),BC=Symbol.for("react.profiler"),DC=Symbol.for("react.provider"),LC=Symbol.for("react.context"),OC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),UC=Symbol.for("react.memo"),HC=Symbol.for("react.lazy"),py=Symbol.iterator;function zC(e){return e===null||typeof e!="object"?null:(e=py&&e[py]||e["@@iterator"],typeof e=="function"?e:null)}var Lw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ow=Object.assign,Fw={};function Xa(e,t,r){this.props=e,this.context=t,this.refs=Fw,this.updater=r||Lw}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Uw(){}Uw.prototype=Xa.prototype;function Sv(e,t,r){this.props=e,this.context=t,this.refs=Fw,this.updater=r||Lw}var Ev=Sv.prototype=new Uw;Ev.constructor=Sv;Ow(Ev,Xa.prototype);Ev.isPureReactComponent=!0;var my=Array.isArray,Hw=Object.prototype.hasOwnProperty,Tv={current:null},zw={key:!0,ref:!0,__self:!0,__source:!0};function Gw(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Hw.call(t,n)&&!zw.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var d=Array(a),h=0;h<a;h++)d[h]=arguments[h+2];i.children=d}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Du,type:e,key:s,ref:o,props:i,_owner:Tv.current}}function GC(e,t){return{$$typeof:Du,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Du}function WC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var gy=/\/+/g;function q0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WC(""+e.key):t.toString(36)}function $h(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Du:case RC:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+q0(o,0):n,my(i)?(r="",e!=null&&(r=e.replace(gy,"$&/")+"/"),$h(i,t,r,"",function(h){return h})):i!=null&&(Cv(i)&&(i=GC(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gy,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",my(e))for(var a=0;a<e.length;a++){s=e[a];var d=n+q0(s,a);o+=$h(s,t,r,d,i)}else if(d=zC(e),typeof d=="function")for(e=d.call(e),a=0;!(s=e.next()).done;)s=s.value,d=n+q0(s,a++),o+=$h(s,t,r,d,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(e,t,r){if(e==null)return e;var n=[],i=0;return $h(e,n,"","",function(s){return t.call(r,s,i++)}),n}function jC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _r={current:null},Vh={transition:null},$C={ReactCurrentDispatcher:_r,ReactCurrentBatchConfig:Vh,ReactCurrentOwner:Tv};ze.Children={map:Qc,forEach:function(e,t,r){Qc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qc(e,function(){t++}),t},toArray:function(e){return Qc(e,function(t){return t})||[]},only:function(e){if(!Cv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Xa;ze.Fragment=MC;ze.Profiler=BC;ze.PureComponent=Sv;ze.StrictMode=NC;ze.Suspense=FC;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$C;ze.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ow({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Tv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(d in t)Hw.call(t,d)&&!zw.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&a!==void 0?a[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){a=Array(d);for(var h=0;h<d;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:Du,type:e.type,key:i,ref:s,props:n,_owner:o}};ze.createContext=function(e){return e={$$typeof:LC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DC,_context:e},e.Consumer=e};ze.createElement=Gw;ze.createFactory=function(e){var t=Gw.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:OC,render:e}};ze.isValidElement=Cv;ze.lazy=function(e){return{$$typeof:HC,_payload:{_status:-1,_result:e},_init:jC}};ze.memo=function(e,t){return{$$typeof:UC,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=Vh.transition;Vh.transition={};try{e()}finally{Vh.transition=t}};ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.useCallback=function(e,t){return _r.current.useCallback(e,t)};ze.useContext=function(e){return _r.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return _r.current.useDeferredValue(e)};ze.useEffect=function(e,t){return _r.current.useEffect(e,t)};ze.useId=function(){return _r.current.useId()};ze.useImperativeHandle=function(e,t,r){return _r.current.useImperativeHandle(e,t,r)};ze.useInsertionEffect=function(e,t){return _r.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return _r.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return _r.current.useMemo(e,t)};ze.useReducer=function(e,t,r){return _r.current.useReducer(e,t,r)};ze.useRef=function(e){return _r.current.useRef(e)};ze.useState=function(e){return _r.current.useState(e)};ze.useSyncExternalStore=function(e,t,r){return _r.current.useSyncExternalStore(e,t,r)};ze.useTransition=function(){return _r.current.useTransition()};ze.version="18.2.0";(function(e){e.exports=ze})(Y);const $r=IC(Y.exports);var Ww={exports:{}},Qr={},jw={exports:{}},$w={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,D){var H=F.length;F.push(D);e:for(;0<H;){var U=H-1>>>1,j=F[U];if(0<i(j,D))F[U]=D,F[H]=j,H=U;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var D=F[0],H=F.pop();if(H!==D){F[0]=H;e:for(var U=0,j=F.length,J=j>>>1;U<J;){var q=2*(U+1)-1,_e=F[q],pe=q+1,Ae=F[pe];if(0>i(_e,H))pe<j&&0>i(Ae,_e)?(F[U]=Ae,F[pe]=H,U=pe):(F[U]=_e,F[q]=H,U=q);else if(pe<j&&0>i(Ae,H))F[U]=Ae,F[pe]=H,U=pe;else break e}}return D}function i(F,D){var H=F.sortIndex-D.sortIndex;return H!==0?H:F.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var d=[],h=[],p=1,c=null,f=3,m=!1,v=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var D=r(h);D!==null;){if(D.callback===null)n(h);else if(D.startTime<=F)n(h),D.sortIndex=D.expirationTime,t(d,D);else break;D=r(h)}}function T(F){if(_=!1,w(F),!v)if(r(d)!==null)v=!0,X(P);else{var D=r(h);D!==null&&Z(T,D.startTime-F)}}function P(F,D){v=!1,_&&(_=!1,x(I),I=-1),m=!0;var H=f;try{for(w(D),c=r(d);c!==null&&(!(c.expirationTime>D)||F&&!L());){var U=c.callback;if(typeof U=="function"){c.callback=null,f=c.priorityLevel;var j=U(c.expirationTime<=D);D=e.unstable_now(),typeof j=="function"?c.callback=j:c===r(d)&&n(d),w(D)}else n(d);c=r(d)}if(c!==null)var J=!0;else{var q=r(h);q!==null&&Z(T,q.startTime-D),J=!1}return J}finally{c=null,f=H,m=!1}}var R=!1,M=null,I=-1,N=5,k=-1;function L(){return!(e.unstable_now()-k<N)}function W(){if(M!==null){var F=e.unstable_now();k=F;var D=!0;try{D=M(!0,F)}finally{D?O():(R=!1,M=null)}}else R=!1}var O;if(typeof y=="function")O=function(){y(W)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=W,O=function(){Q.postMessage(null)}}else O=function(){E(W,0)};function X(F){M=F,R||(R=!0,O())}function Z(F,D){I=E(function(){F(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,X(P))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var H=f;f=D;try{return F()}finally{f=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,D){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=f;f=F;try{return D()}finally{f=H}},e.unstable_scheduleCallback=function(F,D,H){var U=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=H+j,F={id:p++,callback:D,priorityLevel:F,startTime:H,expirationTime:j,sortIndex:-1},H>U?(F.sortIndex=H,t(h,F),r(d)===null&&F===r(h)&&(_?(x(I),I=-1):_=!0,Z(T,H-U))):(F.sortIndex=j,t(d,F),v||m||(v=!0,X(P))),F},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(F){var D=f;return function(){var H=f;f=D;try{return F.apply(this,arguments)}finally{f=H}}}})($w);(function(e){e.exports=$w})(jw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw=Y.exports,Kr=jw.exports;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xw=new Set,ou={};function Ro(e,t){Oa(e,t),Oa(e+"Capture",t)}function Oa(e,t){for(ou[e]=t,e=0;e<t.length;e++)Xw.add(t[e])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=Object.prototype.hasOwnProperty,VC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vy={},xy={};function XC(e){return Wm.call(xy,e)?!0:Wm.call(vy,e)?!1:VC.test(e)?xy[e]=!0:(vy[e]=!0,!1)}function YC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KC(e,t,r,n){if(t===null||typeof t>"u"||YC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function br(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ir[e]=new br(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ir[t]=new br(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ir[e]=new br(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ir[e]=new br(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ir[e]=new br(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ir[e]=new br(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ir[e]=new br(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ir[e]=new br(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ir[e]=new br(e,5,!1,e.toLowerCase(),null,!1,!1)});var Av=/[\-:]([a-z])/g;function kv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Av,kv);ir[t]=new br(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Av,kv);ir[t]=new br(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Av,kv);ir[t]=new br(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ir[e]=new br(e,1,!1,e.toLowerCase(),null,!1,!1)});ir.xlinkHref=new br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ir[e]=new br(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pv(e,t,r,n){var i=ir.hasOwnProperty(t)?ir[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KC(t,r,i,n)&&(r=null),n||i===null?XC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ki=Vw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),ua=Symbol.for("react.portal"),ca=Symbol.for("react.fragment"),Iv=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),Yw=Symbol.for("react.provider"),Kw=Symbol.for("react.context"),Rv=Symbol.for("react.forward_ref"),$m=Symbol.for("react.suspense"),Vm=Symbol.for("react.suspense_list"),Mv=Symbol.for("react.memo"),ms=Symbol.for("react.lazy"),Qw=Symbol.for("react.offscreen"),yy=Symbol.iterator;function wl(e){return e===null||typeof e!="object"?null:(e=yy&&e[yy]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Object.assign,Z0;function Fl(e){if(Z0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Z0=t&&t[1]||""}return`
`+Z0+e}var J0=!1;function ep(e,t){if(!e||J0)return"";J0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var d=`
`+i[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=a);break}}}finally{J0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fl(e):""}function QC(e){switch(e.tag){case 5:return Fl(e.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return e=ep(e.type,!1),e;case 11:return e=ep(e.type.render,!1),e;case 1:return e=ep(e.type,!0),e;default:return""}}function Xm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ca:return"Fragment";case ua:return"Portal";case jm:return"Profiler";case Iv:return"StrictMode";case $m:return"Suspense";case Vm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kw:return(e.displayName||"Context")+".Consumer";case Yw:return(e._context.displayName||"Context")+".Provider";case Rv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mv:return t=e.displayName||null,t!==null?t:Xm(e.type)||"Memo";case ms:t=e._payload,e=e._init;try{return Xm(e(t))}catch{}}return null}function qC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xm(t);case 8:return t===Iv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZC(e){var t=qw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zc(e){e._valueTracker||(e._valueTracker=ZC(e))}function Zw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=qw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function cd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ym(e,t){var r=t.checked;return bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _y(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jw(e,t){t=t.checked,t!=null&&Pv(e,"checked",t,!1)}function Km(e,t){Jw(e,t);var r=Bs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qm(e,t.type,r):t.hasOwnProperty("defaultValue")&&Qm(e,t.type,Bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function by(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Qm(e,t,r){(t!=="number"||cd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ul=Array.isArray;function Ta(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function qm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wy(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ae(92));if(Ul(r)){if(1<r.length)throw Error(ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bs(r)}}function e2(e,t){var r=Bs(t.value),n=Bs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Sy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function t2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?t2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jc,r2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function au(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Kl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JC=["Webkit","ms","Moz","O"];Object.keys(Kl).forEach(function(e){JC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kl[t]=Kl[e]})});function n2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Kl.hasOwnProperty(e)&&Kl[e]?(""+t).trim():t+"px"}function i2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=n2(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var eA=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jm(e,t){if(t){if(eA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function eg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tg=null;function Nv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rg=null,Ca=null,Aa=null;function Ey(e){if(e=Fu(e)){if(typeof rg!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Jd(t),rg(e.stateNode,e.type,t))}}function s2(e){Ca?Aa?Aa.push(e):Aa=[e]:Ca=e}function o2(){if(Ca){var e=Ca,t=Aa;if(Aa=Ca=null,Ey(e),t)for(e=0;e<t.length;e++)Ey(t[e])}}function a2(e,t){return e(t)}function l2(){}var tp=!1;function u2(e,t,r){if(tp)return e(t,r);tp=!0;try{return a2(e,t,r)}finally{tp=!1,(Ca!==null||Aa!==null)&&(l2(),o2())}}function lu(e,t){var r=e.stateNode;if(r===null)return null;var n=Jd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ae(231,t,typeof r));return r}var ng=!1;if(ji)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){ng=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{ng=!1}function tA(e,t,r,n,i,s,o,a,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(p){this.onError(p)}}var Ql=!1,hd=null,dd=!1,ig=null,rA={onError:function(e){Ql=!0,hd=e}};function nA(e,t,r,n,i,s,o,a,d){Ql=!1,hd=null,tA.apply(rA,arguments)}function iA(e,t,r,n,i,s,o,a,d){if(nA.apply(this,arguments),Ql){if(Ql){var h=hd;Ql=!1,hd=null}else throw Error(ae(198));dd||(dd=!0,ig=h)}}function Mo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function c2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ty(e){if(Mo(e)!==e)throw Error(ae(188))}function sA(e){var t=e.alternate;if(!t){if(t=Mo(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Ty(i),e;if(s===n)return Ty(i),t;s=s.sibling}throw Error(ae(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?e:t}function h2(e){return e=sA(e),e!==null?d2(e):null}function d2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=d2(e);if(t!==null)return t;e=e.sibling}return null}var f2=Kr.unstable_scheduleCallback,Cy=Kr.unstable_cancelCallback,oA=Kr.unstable_shouldYield,aA=Kr.unstable_requestPaint,Pt=Kr.unstable_now,lA=Kr.unstable_getCurrentPriorityLevel,Bv=Kr.unstable_ImmediatePriority,p2=Kr.unstable_UserBlockingPriority,fd=Kr.unstable_NormalPriority,uA=Kr.unstable_LowPriority,m2=Kr.unstable_IdlePriority,Kd=null,mi=null;function cA(e){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Kd,e,void 0,(e.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:fA,hA=Math.log,dA=Math.LN2;function fA(e){return e>>>=0,e===0?32:31-(hA(e)/dA|0)|0}var eh=64,th=4194304;function Hl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Hl(a):(s&=o,s!==0&&(n=Hl(s)))}else o=r&~i,o!==0?n=Hl(o):s!==0&&(n=Hl(s));if(n===0)return 0;if(t!==0&&t!==n&&(t&i)===0&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zn(t),i=1<<r,n|=e[r],t&=~i;return n}function pA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mA(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-zn(s),a=1<<o,d=i[o];d===-1?((a&r)===0||(a&n)!==0)&&(i[o]=pA(a,t)):d<=t&&(e.expiredLanes|=a),s&=~a}}function sg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function g2(){var e=eh;return eh<<=1,(eh&4194240)===0&&(eh=64),e}function rp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Lu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zn(t),e[t]=r}function gA(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-zn(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Dv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zn(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var tt=0;function v2(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var x2,Lv,y2,_2,b2,og=!1,rh=[],Es=null,Ts=null,Cs=null,uu=new Map,cu=new Map,vs=[],vA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(t.pointerId)}}function El(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Fu(t),t!==null&&Lv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xA(e,t,r,n,i){switch(t){case"focusin":return Es=El(Es,e,t,r,n,i),!0;case"dragenter":return Ts=El(Ts,e,t,r,n,i),!0;case"mouseover":return Cs=El(Cs,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return uu.set(s,El(uu.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,cu.set(s,El(cu.get(s)||null,e,t,r,n,i)),!0}return!1}function w2(e){var t=go(e.target);if(t!==null){var r=Mo(t);if(r!==null){if(t=r.tag,t===13){if(t=c2(r),t!==null){e.blockedOn=t,b2(e.priority,function(){y2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ag(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);tg=n,r.target.dispatchEvent(n),tg=null}else return t=Fu(r),t!==null&&Lv(t),e.blockedOn=r,!1;t.shift()}return!0}function ky(e,t,r){Xh(e)&&r.delete(t)}function yA(){og=!1,Es!==null&&Xh(Es)&&(Es=null),Ts!==null&&Xh(Ts)&&(Ts=null),Cs!==null&&Xh(Cs)&&(Cs=null),uu.forEach(ky),cu.forEach(ky)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,og||(og=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,yA)))}function hu(e){function t(i){return Tl(i,e)}if(0<rh.length){Tl(rh[0],e);for(var r=1;r<rh.length;r++){var n=rh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Es!==null&&Tl(Es,e),Ts!==null&&Tl(Ts,e),Cs!==null&&Tl(Cs,e),uu.forEach(t),cu.forEach(t),r=0;r<vs.length;r++)n=vs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<vs.length&&(r=vs[0],r.blockedOn===null);)w2(r),r.blockedOn===null&&vs.shift()}var ka=Ki.ReactCurrentBatchConfig,md=!0;function _A(e,t,r,n){var i=tt,s=ka.transition;ka.transition=null;try{tt=1,Ov(e,t,r,n)}finally{tt=i,ka.transition=s}}function bA(e,t,r,n){var i=tt,s=ka.transition;ka.transition=null;try{tt=4,Ov(e,t,r,n)}finally{tt=i,ka.transition=s}}function Ov(e,t,r,n){if(md){var i=ag(e,t,r,n);if(i===null)dp(e,t,n,gd,r),Ay(e,n);else if(xA(i,e,t,r,n))n.stopPropagation();else if(Ay(e,n),t&4&&-1<vA.indexOf(e)){for(;i!==null;){var s=Fu(i);if(s!==null&&x2(s),s=ag(e,t,r,n),s===null&&dp(e,t,n,gd,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else dp(e,t,n,null,r)}}var gd=null;function ag(e,t,r,n){if(gd=null,e=Nv(n),e=go(e),e!==null)if(t=Mo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=c2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gd=e,null}function S2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lA()){case Bv:return 1;case p2:return 4;case fd:case uA:return 16;case m2:return 536870912;default:return 16}default:return 16}}var bs=null,Fv=null,Yh=null;function E2(){if(Yh)return Yh;var e,t=Fv,r=t.length,n,i="value"in bs?bs.value:bs.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return Yh=i.slice(e,1<n?1-n:void 0)}function Kh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nh(){return!0}function Py(){return!1}function qr(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nh:Py,this.isPropagationStopped=Py,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),t}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uv=qr(Ya),Ou=bt({},Ya,{view:0,detail:0}),wA=qr(Ou),np,ip,Cl,Qd=bt({},Ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cl&&(Cl&&e.type==="mousemove"?(np=e.screenX-Cl.screenX,ip=e.screenY-Cl.screenY):ip=np=0,Cl=e),np)},movementY:function(e){return"movementY"in e?e.movementY:ip}}),Iy=qr(Qd),SA=bt({},Qd,{dataTransfer:0}),EA=qr(SA),TA=bt({},Ou,{relatedTarget:0}),sp=qr(TA),CA=bt({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),AA=qr(CA),kA=bt({},Ya,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PA=qr(kA),IA=bt({},Ya,{data:0}),Ry=qr(IA),RA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=NA[e])?!!t[e]:!1}function Hv(){return BA}var DA=bt({},Ou,{key:function(e){if(e.key){var t=RA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hv,charCode:function(e){return e.type==="keypress"?Kh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),LA=qr(DA),OA=bt({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),My=qr(OA),FA=bt({},Ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hv}),UA=qr(FA),HA=bt({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),zA=qr(HA),GA=bt({},Qd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WA=qr(GA),jA=[9,13,27,32],zv=ji&&"CompositionEvent"in window,ql=null;ji&&"documentMode"in document&&(ql=document.documentMode);var $A=ji&&"TextEvent"in window&&!ql,T2=ji&&(!zv||ql&&8<ql&&11>=ql),Ny=String.fromCharCode(32),By=!1;function C2(e,t){switch(e){case"keyup":return jA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ha=!1;function VA(e,t){switch(e){case"compositionend":return A2(t);case"keypress":return t.which!==32?null:(By=!0,Ny);case"textInput":return e=t.data,e===Ny&&By?null:e;default:return null}}function XA(e,t){if(ha)return e==="compositionend"||!zv&&C2(e,t)?(e=E2(),Yh=Fv=bs=null,ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return T2&&t.locale!=="ko"?null:t.data;default:return null}}var YA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YA[e.type]:t==="textarea"}function k2(e,t,r,n){s2(n),t=vd(t,"onChange"),0<t.length&&(r=new Uv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Zl=null,du=null;function KA(e){U2(e,0)}function qd(e){var t=pa(e);if(Zw(t))return e}function QA(e,t){if(e==="change")return t}var P2=!1;if(ji){var op;if(ji){var ap="oninput"in document;if(!ap){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),ap=typeof Ly.oninput=="function"}op=ap}else op=!1;P2=op&&(!document.documentMode||9<document.documentMode)}function Oy(){Zl&&(Zl.detachEvent("onpropertychange",I2),du=Zl=null)}function I2(e){if(e.propertyName==="value"&&qd(du)){var t=[];k2(t,du,e,Nv(e)),u2(KA,t)}}function qA(e,t,r){e==="focusin"?(Oy(),Zl=t,du=r,Zl.attachEvent("onpropertychange",I2)):e==="focusout"&&Oy()}function ZA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qd(du)}function JA(e,t){if(e==="click")return qd(t)}function ek(e,t){if(e==="input"||e==="change")return qd(t)}function tk(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vn=typeof Object.is=="function"?Object.is:tk;function fu(e,t){if(Vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Wm.call(t,i)||!Vn(e[i],t[i]))return!1}return!0}function Fy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Uy(e,t){var r=Fy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fy(r)}}function R2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?R2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function M2(){for(var e=window,t=cd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=cd(e.document)}return t}function Gv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function rk(e){var t=M2(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&R2(r.ownerDocument.documentElement,r)){if(n!==null&&Gv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=Uy(r,s);var o=Uy(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var nk=ji&&"documentMode"in document&&11>=document.documentMode,da=null,lg=null,Jl=null,ug=!1;function Hy(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ug||da==null||da!==cd(n)||(n=da,"selectionStart"in n&&Gv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jl&&fu(Jl,n)||(Jl=n,n=vd(lg,"onSelect"),0<n.length&&(t=new Uv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=da)))}function ih(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fa={animationend:ih("Animation","AnimationEnd"),animationiteration:ih("Animation","AnimationIteration"),animationstart:ih("Animation","AnimationStart"),transitionend:ih("Transition","TransitionEnd")},lp={},N2={};ji&&(N2=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function Zd(e){if(lp[e])return lp[e];if(!fa[e])return e;var t=fa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in N2)return lp[e]=t[r];return e}var B2=Zd("animationend"),D2=Zd("animationiteration"),L2=Zd("animationstart"),O2=Zd("transitionend"),F2=new Map,zy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(e,t){F2.set(e,t),Ro(t,[e])}for(var up=0;up<zy.length;up++){var cp=zy[up],ik=cp.toLowerCase(),sk=cp[0].toUpperCase()+cp.slice(1);zs(ik,"on"+sk)}zs(B2,"onAnimationEnd");zs(D2,"onAnimationIteration");zs(L2,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(O2,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ok=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function Gy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,iA(n,t,void 0,e),e.currentTarget=null}function U2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],d=a.instance,h=a.currentTarget;if(a=a.listener,d!==s&&i.isPropagationStopped())break e;Gy(i,a,h),s=d}else for(o=0;o<n.length;o++){if(a=n[o],d=a.instance,h=a.currentTarget,a=a.listener,d!==s&&i.isPropagationStopped())break e;Gy(i,a,h),s=d}}}if(dd)throw e=ig,dd=!1,ig=null,e}function lt(e,t){var r=t[pg];r===void 0&&(r=t[pg]=new Set);var n=e+"__bubble";r.has(n)||(H2(t,e,2,!1),r.add(n))}function hp(e,t,r){var n=0;t&&(n|=4),H2(r,e,n,t)}var sh="_reactListening"+Math.random().toString(36).slice(2);function pu(e){if(!e[sh]){e[sh]=!0,Xw.forEach(function(r){r!=="selectionchange"&&(ok.has(r)||hp(r,!1,e),hp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sh]||(t[sh]=!0,hp("selectionchange",!1,t))}}function H2(e,t,r,n){switch(S2(t)){case 1:var i=_A;break;case 4:i=bA;break;default:i=Ov}r=i.bind(null,t,r,e),i=void 0,!ng||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function dp(e,t,r,n,i){var s=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;o=o.return}for(;a!==null;){if(o=go(a),o===null)return;if(d=o.tag,d===5||d===6){n=s=o;continue e}a=a.parentNode}}n=n.return}u2(function(){var h=s,p=Nv(r),c=[];e:{var f=F2.get(e);if(f!==void 0){var m=Uv,v=e;switch(e){case"keypress":if(Kh(r)===0)break e;case"keydown":case"keyup":m=LA;break;case"focusin":v="focus",m=sp;break;case"focusout":v="blur",m=sp;break;case"beforeblur":case"afterblur":m=sp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=EA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=UA;break;case B2:case D2:case L2:m=AA;break;case O2:m=zA;break;case"scroll":m=wA;break;case"wheel":m=WA;break;case"copy":case"cut":case"paste":m=PA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=My}var _=(t&4)!==0,E=!_&&e==="scroll",x=_?f!==null?f+"Capture":null:f;_=[];for(var y=h,w;y!==null;){w=y;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,x!==null&&(T=lu(y,x),T!=null&&_.push(mu(y,T,w)))),E)break;y=y.return}0<_.length&&(f=new m(f,v,null,r,p),c.push({event:f,listeners:_}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==tg&&(v=r.relatedTarget||r.fromElement)&&(go(v)||v[$i]))break e;if((m||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=h,v=v?go(v):null,v!==null&&(E=Mo(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=h),m!==v)){if(_=Iy,T="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(_=My,T="onPointerLeave",x="onPointerEnter",y="pointer"),E=m==null?f:pa(m),w=v==null?f:pa(v),f=new _(T,y+"leave",m,r,p),f.target=E,f.relatedTarget=w,T=null,go(p)===h&&(_=new _(x,y+"enter",v,r,p),_.target=w,_.relatedTarget=E,T=_),E=T,m&&v)t:{for(_=m,x=v,y=0,w=_;w;w=Jo(w))y++;for(w=0,T=x;T;T=Jo(T))w++;for(;0<y-w;)_=Jo(_),y--;for(;0<w-y;)x=Jo(x),w--;for(;y--;){if(_===x||x!==null&&_===x.alternate)break t;_=Jo(_),x=Jo(x)}_=null}else _=null;m!==null&&Wy(c,f,m,_,!1),v!==null&&E!==null&&Wy(c,E,v,_,!0)}}e:{if(f=h?pa(h):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=QA;else if(Dy(f))if(P2)P=ek;else{P=ZA;var R=qA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=JA);if(P&&(P=P(e,h))){k2(c,P,r,p);break e}R&&R(e,f,h),e==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&Qm(f,"number",f.value)}switch(R=h?pa(h):window,e){case"focusin":(Dy(R)||R.contentEditable==="true")&&(da=R,lg=h,Jl=null);break;case"focusout":Jl=lg=da=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,Hy(c,r,p);break;case"selectionchange":if(nk)break;case"keydown":case"keyup":Hy(c,r,p)}var M;if(zv)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else ha?C2(e,r)&&(I="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(T2&&r.locale!=="ko"&&(ha||I!=="onCompositionStart"?I==="onCompositionEnd"&&ha&&(M=E2()):(bs=p,Fv="value"in bs?bs.value:bs.textContent,ha=!0)),R=vd(h,I),0<R.length&&(I=new Ry(I,e,null,r,p),c.push({event:I,listeners:R}),M?I.data=M:(M=A2(r),M!==null&&(I.data=M)))),(M=$A?VA(e,r):XA(e,r))&&(h=vd(h,"onBeforeInput"),0<h.length&&(p=new Ry("onBeforeInput","beforeinput",null,r,p),c.push({event:p,listeners:h}),p.data=M))}U2(c,t)})}function mu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vd(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=lu(e,r),s!=null&&n.unshift(mu(e,s,i)),s=lu(e,t),s!=null&&n.push(mu(e,s,i))),e=e.return}return n}function Jo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wy(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,d=a.alternate,h=a.stateNode;if(d!==null&&d===n)break;a.tag===5&&h!==null&&(a=h,i?(d=lu(r,s),d!=null&&o.unshift(mu(r,d,a))):i||(d=lu(r,s),d!=null&&o.push(mu(r,d,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var ak=/\r\n?/g,lk=/\u0000|\uFFFD/g;function jy(e){return(typeof e=="string"?e:""+e).replace(ak,`
`).replace(lk,"")}function oh(e,t,r){if(t=jy(t),jy(e)!==t&&r)throw Error(ae(425))}function xd(){}var cg=null,hg=null;function dg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fg=typeof setTimeout=="function"?setTimeout:void 0,uk=typeof clearTimeout=="function"?clearTimeout:void 0,$y=typeof Promise=="function"?Promise:void 0,ck=typeof queueMicrotask=="function"?queueMicrotask:typeof $y<"u"?function(e){return $y.resolve(null).then(e).catch(hk)}:fg;function hk(e){setTimeout(function(){throw e})}function fp(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),hu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);hu(t)}function As(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),pi="__reactFiber$"+Ka,gu="__reactProps$"+Ka,$i="__reactContainer$"+Ka,pg="__reactEvents$"+Ka,dk="__reactListeners$"+Ka,fk="__reactHandles$"+Ka;function go(e){var t=e[pi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$i]||r[pi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Vy(e);e!==null;){if(r=e[pi])return r;e=Vy(e)}return t}e=r,r=e.parentNode}return null}function Fu(e){return e=e[pi]||e[$i],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Jd(e){return e[gu]||null}var mg=[],ma=-1;function Gs(e){return{current:e}}function ut(e){0>ma||(e.current=mg[ma],mg[ma]=null,ma--)}function at(e,t){ma++,mg[ma]=e.current,e.current=t}var Ds={},pr=Gs(Ds),Ir=Gs(!1),Eo=Ds;function Fa(e,t){var r=e.type.contextTypes;if(!r)return Ds;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rr(e){return e=e.childContextTypes,e!=null}function yd(){ut(Ir),ut(pr)}function Xy(e,t,r){if(pr.current!==Ds)throw Error(ae(168));at(pr,t),at(Ir,r)}function z2(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ae(108,qC(e)||"Unknown",i));return bt({},r,n)}function _d(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ds,Eo=pr.current,at(pr,e),at(Ir,Ir.current),!0}function Yy(e,t,r){var n=e.stateNode;if(!n)throw Error(ae(169));r?(e=z2(e,t,Eo),n.__reactInternalMemoizedMergedChildContext=e,ut(Ir),ut(pr),at(pr,e)):ut(Ir),at(Ir,r)}var Di=null,ef=!1,pp=!1;function G2(e){Di===null?Di=[e]:Di.push(e)}function pk(e){ef=!0,G2(e)}function Ws(){if(!pp&&Di!==null){pp=!0;var e=0,t=tt;try{var r=Di;for(tt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Di=null,ef=!1}catch(i){throw Di!==null&&(Di=Di.slice(e+1)),f2(Bv,Ws),i}finally{tt=t,pp=!1}}return null}var ga=[],va=0,bd=null,wd=0,cn=[],hn=0,To=null,Li=1,Oi="";function oo(e,t){ga[va++]=wd,ga[va++]=bd,bd=e,wd=t}function W2(e,t,r){cn[hn++]=Li,cn[hn++]=Oi,cn[hn++]=To,To=e;var n=Li;e=Oi;var i=32-zn(n)-1;n&=~(1<<i),r+=1;var s=32-zn(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Li=1<<32-zn(t)+i|r<<i|n,Oi=s+e}else Li=1<<s|r<<i|n,Oi=e}function Wv(e){e.return!==null&&(oo(e,1),W2(e,1,0))}function jv(e){for(;e===bd;)bd=ga[--va],ga[va]=null,wd=ga[--va],ga[va]=null;for(;e===To;)To=cn[--hn],cn[hn]=null,Oi=cn[--hn],cn[hn]=null,Li=cn[--hn],cn[hn]=null}var Vr=null,jr=null,ft=!1,Dn=null;function j2(e,t){var r=dn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ky(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vr=e,jr=As(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vr=e,jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=To!==null?{id:Li,overflow:Oi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=dn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Vr=e,jr=null,!0):!1;default:return!1}}function gg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vg(e){if(ft){var t=jr;if(t){var r=t;if(!Ky(e,t)){if(gg(e))throw Error(ae(418));t=As(r.nextSibling);var n=Vr;t&&Ky(e,t)?j2(n,r):(e.flags=e.flags&-4097|2,ft=!1,Vr=e)}}else{if(gg(e))throw Error(ae(418));e.flags=e.flags&-4097|2,ft=!1,Vr=e}}}function Qy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vr=e}function ah(e){if(e!==Vr)return!1;if(!ft)return Qy(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dg(e.type,e.memoizedProps)),t&&(t=jr)){if(gg(e))throw $2(),Error(ae(418));for(;t;)j2(e,t),t=As(t.nextSibling)}if(Qy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jr=As(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jr=null}}else jr=Vr?As(e.stateNode.nextSibling):null;return!0}function $2(){for(var e=jr;e;)e=As(e.nextSibling)}function Ua(){jr=Vr=null,ft=!1}function $v(e){Dn===null?Dn=[e]:Dn.push(e)}var mk=Ki.ReactCurrentBatchConfig;function Mn(e,t){if(e&&e.defaultProps){t=bt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Sd=Gs(null),Ed=null,xa=null,Vv=null;function Xv(){Vv=xa=Ed=null}function Yv(e){var t=Sd.current;ut(Sd),e._currentValue=t}function xg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pa(e,t){Ed=e,Vv=xa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Pr=!0),e.firstContext=null)}function gn(e){var t=e._currentValue;if(Vv!==e)if(e={context:e,memoizedValue:t,next:null},xa===null){if(Ed===null)throw Error(ae(308));xa=e,Ed.dependencies={lanes:0,firstContext:e}}else xa=xa.next=e;return t}var vo=null;function Kv(e){vo===null?vo=[e]:vo.push(e)}function V2(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Kv(t)):(r.next=i.next,i.next=r),t.interleaved=r,Vi(e,n)}function Vi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var gs=!1;function Qv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ks(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,($e&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Vi(e,r)}return i=n.interleaved,i===null?(t.next=t,Kv(n)):(t.next=i.next,i.next=t),n.interleaved=t,Vi(e,r)}function Qh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Dv(e,r)}}function qy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Td(e,t,r,n){var i=e.updateQueue;gs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var d=a,h=d.next;d.next=null,o===null?s=h:o.next=h,o=d;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=h:a.next=h,p.lastBaseUpdate=d))}if(s!==null){var c=i.baseState;o=0,p=h=d=null,a=s;do{var f=a.lane,m=a.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,_=a;switch(f=t,m=r,_.tag){case 1:if(v=_.payload,typeof v=="function"){c=v.call(m,c,f);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,f=typeof v=="function"?v.call(m,c,f):v,f==null)break e;c=bt({},c,f);break e;case 2:gs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(h=p=m,d=c):p=p.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(p===null&&(d=c),i.baseState=d,i.firstBaseUpdate=h,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Ao|=o,e.lanes=o,e.memoizedState=c}}function Zy(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ae(191,i));i.call(n)}}}var Y2=new Vw.Component().refs;function yg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:bt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var tf={isMounted:function(e){return(e=e._reactInternals)?Mo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=yr(),i=Is(e),s=zi(n,i);s.payload=t,r!=null&&(s.callback=r),t=ks(e,s,i),t!==null&&(Gn(t,e,i,n),Qh(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=yr(),i=Is(e),s=zi(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=ks(e,s,i),t!==null&&(Gn(t,e,i,n),Qh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=yr(),n=Is(e),i=zi(r,n);i.tag=2,t!=null&&(i.callback=t),t=ks(e,i,n),t!==null&&(Gn(t,e,n,r),Qh(t,e,n))}};function Jy(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!fu(r,n)||!fu(i,s):!0}function K2(e,t,r){var n=!1,i=Ds,s=t.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Rr(t)?Eo:pr.current,n=t.contextTypes,s=(n=n!=null)?Fa(e,i):Ds),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function e_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&tf.enqueueReplaceState(t,t.state,null)}function _g(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Y2,Qv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Rr(t)?Eo:pr.current,i.context=Fa(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(yg(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&tf.enqueueReplaceState(i,i.state,null),Td(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Al(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===Y2&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,e))}return e}function lh(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function t_(e){var t=e._init;return t(e._payload)}function Q2(e){function t(x,y){if(e){var w=x.deletions;w===null?(x.deletions=[y],x.flags|=16):w.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function i(x,y){return x=Rs(x,y),x.index=0,x.sibling=null,x}function s(x,y,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<y?(x.flags|=2,y):w):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,y,w,T){return y===null||y.tag!==6?(y=bp(w,x.mode,T),y.return=x,y):(y=i(y,w),y.return=x,y)}function d(x,y,w,T){var P=w.type;return P===ca?p(x,y,w.props.children,T,w.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ms&&t_(P)===y.type)?(T=i(y,w.props),T.ref=Al(x,y,w),T.return=x,T):(T=rd(w.type,w.key,w.props,null,x.mode,T),T.ref=Al(x,y,w),T.return=x,T)}function h(x,y,w,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=wp(w,x.mode,T),y.return=x,y):(y=i(y,w.children||[]),y.return=x,y)}function p(x,y,w,T,P){return y===null||y.tag!==7?(y=bo(w,x.mode,T,P),y.return=x,y):(y=i(y,w),y.return=x,y)}function c(x,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=bp(""+y,x.mode,w),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qc:return w=rd(y.type,y.key,y.props,null,x.mode,w),w.ref=Al(x,null,y),w.return=x,w;case ua:return y=wp(y,x.mode,w),y.return=x,y;case ms:var T=y._init;return c(x,T(y._payload),w)}if(Ul(y)||wl(y))return y=bo(y,x.mode,w,null),y.return=x,y;lh(x,y)}return null}function f(x,y,w,T){var P=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(x,y,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qc:return w.key===P?d(x,y,w,T):null;case ua:return w.key===P?h(x,y,w,T):null;case ms:return P=w._init,f(x,y,P(w._payload),T)}if(Ul(w)||wl(w))return P!==null?null:p(x,y,w,T,null);lh(x,w)}return null}function m(x,y,w,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(w)||null,a(y,x,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case qc:return x=x.get(T.key===null?w:T.key)||null,d(y,x,T,P);case ua:return x=x.get(T.key===null?w:T.key)||null,h(y,x,T,P);case ms:var R=T._init;return m(x,y,w,R(T._payload),P)}if(Ul(T)||wl(T))return x=x.get(w)||null,p(y,x,T,P,null);lh(y,T)}return null}function v(x,y,w,T){for(var P=null,R=null,M=y,I=y=0,N=null;M!==null&&I<w.length;I++){M.index>I?(N=M,M=null):N=M.sibling;var k=f(x,M,w[I],T);if(k===null){M===null&&(M=N);break}e&&M&&k.alternate===null&&t(x,M),y=s(k,y,I),R===null?P=k:R.sibling=k,R=k,M=N}if(I===w.length)return r(x,M),ft&&oo(x,I),P;if(M===null){for(;I<w.length;I++)M=c(x,w[I],T),M!==null&&(y=s(M,y,I),R===null?P=M:R.sibling=M,R=M);return ft&&oo(x,I),P}for(M=n(x,M);I<w.length;I++)N=m(M,x,I,w[I],T),N!==null&&(e&&N.alternate!==null&&M.delete(N.key===null?I:N.key),y=s(N,y,I),R===null?P=N:R.sibling=N,R=N);return e&&M.forEach(function(L){return t(x,L)}),ft&&oo(x,I),P}function _(x,y,w,T){var P=wl(w);if(typeof P!="function")throw Error(ae(150));if(w=P.call(w),w==null)throw Error(ae(151));for(var R=P=null,M=y,I=y=0,N=null,k=w.next();M!==null&&!k.done;I++,k=w.next()){M.index>I?(N=M,M=null):N=M.sibling;var L=f(x,M,k.value,T);if(L===null){M===null&&(M=N);break}e&&M&&L.alternate===null&&t(x,M),y=s(L,y,I),R===null?P=L:R.sibling=L,R=L,M=N}if(k.done)return r(x,M),ft&&oo(x,I),P;if(M===null){for(;!k.done;I++,k=w.next())k=c(x,k.value,T),k!==null&&(y=s(k,y,I),R===null?P=k:R.sibling=k,R=k);return ft&&oo(x,I),P}for(M=n(x,M);!k.done;I++,k=w.next())k=m(M,x,I,k.value,T),k!==null&&(e&&k.alternate!==null&&M.delete(k.key===null?I:k.key),y=s(k,y,I),R===null?P=k:R.sibling=k,R=k);return e&&M.forEach(function(W){return t(x,W)}),ft&&oo(x,I),P}function E(x,y,w,T){if(typeof w=="object"&&w!==null&&w.type===ca&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case qc:e:{for(var P=w.key,R=y;R!==null;){if(R.key===P){if(P=w.type,P===ca){if(R.tag===7){r(x,R.sibling),y=i(R,w.props.children),y.return=x,x=y;break e}}else if(R.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ms&&t_(P)===R.type){r(x,R.sibling),y=i(R,w.props),y.ref=Al(x,R,w),y.return=x,x=y;break e}r(x,R);break}else t(x,R);R=R.sibling}w.type===ca?(y=bo(w.props.children,x.mode,T,w.key),y.return=x,x=y):(T=rd(w.type,w.key,w.props,null,x.mode,T),T.ref=Al(x,y,w),T.return=x,x=T)}return o(x);case ua:e:{for(R=w.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(x,y.sibling),y=i(y,w.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=wp(w,x.mode,T),y.return=x,x=y}return o(x);case ms:return R=w._init,E(x,y,R(w._payload),T)}if(Ul(w))return v(x,y,w,T);if(wl(w))return _(x,y,w,T);lh(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(x,y.sibling),y=i(y,w),y.return=x,x=y):(r(x,y),y=bp(w,x.mode,T),y.return=x,x=y),o(x)):r(x,y)}return E}var Ha=Q2(!0),q2=Q2(!1),Uu={},gi=Gs(Uu),vu=Gs(Uu),xu=Gs(Uu);function xo(e){if(e===Uu)throw Error(ae(174));return e}function qv(e,t){switch(at(xu,t),at(vu,e),at(gi,Uu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zm(t,e)}ut(gi),at(gi,t)}function za(){ut(gi),ut(vu),ut(xu)}function Z2(e){xo(xu.current);var t=xo(gi.current),r=Zm(t,e.type);t!==r&&(at(vu,e),at(gi,r))}function Zv(e){vu.current===e&&(ut(gi),ut(vu))}var xt=Gs(0);function Cd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mp=[];function Jv(){for(var e=0;e<mp.length;e++)mp[e]._workInProgressVersionPrimary=null;mp.length=0}var qh=Ki.ReactCurrentDispatcher,gp=Ki.ReactCurrentBatchConfig,Co=0,_t=null,Ut=null,$t=null,Ad=!1,eu=!1,yu=0,gk=0;function cr(){throw Error(ae(321))}function e1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vn(e[r],t[r]))return!1;return!0}function t1(e,t,r,n,i,s){if(Co=s,_t=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qh.current=e===null||e.memoizedState===null?_k:bk,e=r(n,i),eu){s=0;do{if(eu=!1,yu=0,25<=s)throw Error(ae(301));s+=1,$t=Ut=null,t.updateQueue=null,qh.current=wk,e=r(n,i)}while(eu)}if(qh.current=kd,t=Ut!==null&&Ut.next!==null,Co=0,$t=Ut=_t=null,Ad=!1,t)throw Error(ae(300));return e}function r1(){var e=yu!==0;return yu=0,e}function hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?_t.memoizedState=$t=e:$t=$t.next=e,$t}function vn(){if(Ut===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Ut.next;var t=$t===null?_t.memoizedState:$t.next;if(t!==null)$t=t,Ut=e;else{if(e===null)throw Error(ae(310));Ut=e,e={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},$t===null?_t.memoizedState=$t=e:$t=$t.next=e}return $t}function _u(e,t){return typeof t=="function"?t(e):t}function vp(e){var t=vn(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=Ut,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,d=null,h=s;do{var p=h.lane;if((Co&p)===p)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var c={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(a=d=c,o=n):d=d.next=c,_t.lanes|=p,Ao|=p}h=h.next}while(h!==null&&h!==s);d===null?o=n:d.next=a,Vn(n,t.memoizedState)||(Pr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,_t.lanes|=s,Ao|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xp(e){var t=vn(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Vn(s,t.memoizedState)||(Pr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function J2(){}function eS(e,t){var r=_t,n=vn(),i=t(),s=!Vn(n.memoizedState,i);if(s&&(n.memoizedState=i,Pr=!0),n=n.queue,n1(nS.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||$t!==null&&$t.memoizedState.tag&1){if(r.flags|=2048,bu(9,rS.bind(null,r,n,i,t),void 0,null),Yt===null)throw Error(ae(349));(Co&30)!==0||tS(r,t,i)}return i}function tS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rS(e,t,r,n){t.value=r,t.getSnapshot=n,iS(t)&&sS(e)}function nS(e,t,r){return r(function(){iS(t)&&sS(e)})}function iS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vn(e,r)}catch{return!0}}function sS(e){var t=Vi(e,1);t!==null&&Gn(t,e,1,-1)}function r_(e){var t=hi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:e},t.queue=e,e=e.dispatch=yk.bind(null,_t,e),[t.memoizedState,e]}function bu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function oS(){return vn().memoizedState}function Zh(e,t,r,n){var i=hi();_t.flags|=e,i.memoizedState=bu(1|t,r,void 0,n===void 0?null:n)}function rf(e,t,r,n){var i=vn();n=n===void 0?null:n;var s=void 0;if(Ut!==null){var o=Ut.memoizedState;if(s=o.destroy,n!==null&&e1(n,o.deps)){i.memoizedState=bu(t,r,s,n);return}}_t.flags|=e,i.memoizedState=bu(1|t,r,s,n)}function n_(e,t){return Zh(8390656,8,e,t)}function n1(e,t){return rf(2048,8,e,t)}function aS(e,t){return rf(4,2,e,t)}function lS(e,t){return rf(4,4,e,t)}function uS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cS(e,t,r){return r=r!=null?r.concat([e]):null,rf(4,4,uS.bind(null,t,e),r)}function i1(){}function hS(e,t){var r=vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&e1(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function dS(e,t){var r=vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&e1(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function fS(e,t,r){return(Co&21)===0?(e.baseState&&(e.baseState=!1,Pr=!0),e.memoizedState=r):(Vn(r,t)||(r=g2(),_t.lanes|=r,Ao|=r,e.baseState=!0),t)}function vk(e,t){var r=tt;tt=r!==0&&4>r?r:4,e(!0);var n=gp.transition;gp.transition={};try{e(!1),t()}finally{tt=r,gp.transition=n}}function pS(){return vn().memoizedState}function xk(e,t,r){var n=Is(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mS(e))gS(t,r);else if(r=V2(e,t,r,n),r!==null){var i=yr();Gn(r,e,n,i),vS(r,t,n)}}function yk(e,t,r){var n=Is(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mS(e))gS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Vn(a,o)){var d=t.interleaved;d===null?(i.next=i,Kv(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}r=V2(e,t,i,n),r!==null&&(i=yr(),Gn(r,e,n,i),vS(r,t,n))}}function mS(e){var t=e.alternate;return e===_t||t!==null&&t===_t}function gS(e,t){eu=Ad=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vS(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Dv(e,r)}}var kd={readContext:gn,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useInsertionEffect:cr,useLayoutEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useMutableSource:cr,useSyncExternalStore:cr,useId:cr,unstable_isNewReconciler:!1},_k={readContext:gn,useCallback:function(e,t){return hi().memoizedState=[e,t===void 0?null:t],e},useContext:gn,useEffect:n_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Zh(4194308,4,uS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Zh(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zh(4,2,e,t)},useMemo:function(e,t){var r=hi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=hi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=xk.bind(null,_t,e),[n.memoizedState,e]},useRef:function(e){var t=hi();return e={current:e},t.memoizedState=e},useState:r_,useDebugValue:i1,useDeferredValue:function(e){return hi().memoizedState=e},useTransition:function(){var e=r_(!1),t=e[0];return e=vk.bind(null,e[1]),hi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_t,i=hi();if(ft){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=t(),Yt===null)throw Error(ae(349));(Co&30)!==0||tS(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,n_(nS.bind(null,n,s,e),[e]),n.flags|=2048,bu(9,rS.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=hi(),t=Yt.identifierPrefix;if(ft){var r=Oi,n=Li;r=(n&~(1<<32-zn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=yu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=gk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bk={readContext:gn,useCallback:hS,useContext:gn,useEffect:n1,useImperativeHandle:cS,useInsertionEffect:aS,useLayoutEffect:lS,useMemo:dS,useReducer:vp,useRef:oS,useState:function(){return vp(_u)},useDebugValue:i1,useDeferredValue:function(e){var t=vn();return fS(t,Ut.memoizedState,e)},useTransition:function(){var e=vp(_u)[0],t=vn().memoizedState;return[e,t]},useMutableSource:J2,useSyncExternalStore:eS,useId:pS,unstable_isNewReconciler:!1},wk={readContext:gn,useCallback:hS,useContext:gn,useEffect:n1,useImperativeHandle:cS,useInsertionEffect:aS,useLayoutEffect:lS,useMemo:dS,useReducer:xp,useRef:oS,useState:function(){return xp(_u)},useDebugValue:i1,useDeferredValue:function(e){var t=vn();return Ut===null?t.memoizedState=e:fS(t,Ut.memoizedState,e)},useTransition:function(){var e=xp(_u)[0],t=vn().memoizedState;return[e,t]},useMutableSource:J2,useSyncExternalStore:eS,useId:pS,unstable_isNewReconciler:!1};function Ga(e,t){try{var r="",n=t;do r+=QC(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function yp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function bg(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Sk=typeof WeakMap=="function"?WeakMap:Map;function xS(e,t,r){r=zi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Id||(Id=!0,Rg=n),bg(e,t)},r}function yS(e,t,r){r=zi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){bg(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){bg(e,t),typeof n!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function i_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Sk;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Ok.bind(null,e,t,r),t.then(e,e))}function s_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function o_(e,t,r,n,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=zi(-1,1),t.tag=2,ks(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ek=Ki.ReactCurrentOwner,Pr=!1;function xr(e,t,r,n){t.child=e===null?q2(t,null,r,n):Ha(t,e.child,r,n)}function a_(e,t,r,n,i){r=r.render;var s=t.ref;return Pa(t,i),n=t1(e,t,r,n,s,i),r=r1(),e!==null&&!Pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(ft&&r&&Wv(t),t.flags|=1,xr(e,t,n,i),t.child)}function l_(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!d1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,_S(e,t,s,n,i)):(e=rd(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&i)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:fu,r(o,n)&&e.ref===t.ref)return Xi(e,t,i)}return t.flags|=1,e=Rs(s,n),e.ref=t.ref,e.return=t,t.child=e}function _S(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(fu(s,n)&&e.ref===t.ref)if(Pr=!1,t.pendingProps=n=s,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Pr=!0);else return t.lanes=e.lanes,Xi(e,t,i)}return wg(e,t,r,n,i)}function bS(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(_a,Wr),Wr|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,at(_a,Wr),Wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,at(_a,Wr),Wr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,at(_a,Wr),Wr|=n;return xr(e,t,i,r),t.child}function wS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wg(e,t,r,n,i){var s=Rr(r)?Eo:pr.current;return s=Fa(t,s),Pa(t,i),r=t1(e,t,r,n,s,i),n=r1(),e!==null&&!Pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xi(e,t,i)):(ft&&n&&Wv(t),t.flags|=1,xr(e,t,r,i),t.child)}function u_(e,t,r,n,i){if(Rr(r)){var s=!0;_d(t)}else s=!1;if(Pa(t,i),t.stateNode===null)Jh(e,t),K2(t,r,n),_g(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var d=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=gn(h):(h=Rr(r)?Eo:pr.current,h=Fa(t,h));var p=r.getDerivedStateFromProps,c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||d!==h)&&e_(t,o,n,h),gs=!1;var f=t.memoizedState;o.state=f,Td(t,n,o,i),d=t.memoizedState,a!==n||f!==d||Ir.current||gs?(typeof p=="function"&&(yg(t,r,p,n),d=t.memoizedState),(a=gs||Jy(t,r,a,n,f,d,h))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=h,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,X2(e,t),a=t.memoizedProps,h=t.type===t.elementType?a:Mn(t.type,a),o.props=h,c=t.pendingProps,f=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=gn(d):(d=Rr(r)?Eo:pr.current,d=Fa(t,d));var m=r.getDerivedStateFromProps;(p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==d)&&e_(t,o,n,d),gs=!1,f=t.memoizedState,o.state=f,Td(t,n,o,i);var v=t.memoizedState;a!==c||f!==v||Ir.current||gs?(typeof m=="function"&&(yg(t,r,m,n),v=t.memoizedState),(h=gs||Jy(t,r,h,n,f,v,d)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=d,n=h):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Sg(e,t,r,n,s,i)}function Sg(e,t,r,n,i,s){wS(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&Yy(t,r,!1),Xi(e,t,s);n=t.stateNode,Ek.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ha(t,e.child,null,s),t.child=Ha(t,null,a,s)):xr(e,t,a,s),t.memoizedState=n.state,i&&Yy(t,r,!0),t.child}function SS(e){var t=e.stateNode;t.pendingContext?Xy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xy(e,t.context,!1),qv(e,t.containerInfo)}function c_(e,t,r,n,i){return Ua(),$v(i),t.flags|=256,xr(e,t,r,n),t.child}var Eg={dehydrated:null,treeContext:null,retryLane:0};function Tg(e){return{baseLanes:e,cachePool:null,transitions:null}}function ES(e,t,r){var n=t.pendingProps,i=xt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),at(xt,i&1),e===null)return vg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=of(o,n,0,null),e=bo(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Tg(r),t.memoizedState=Eg,e):s1(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Tk(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var d={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Rs(i,d),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rs(a,s):(s=bo(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Tg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Eg,n}return s=e.child,e=s.sibling,n=Rs(s,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function s1(e,t){return t=of({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function uh(e,t,r,n){return n!==null&&$v(n),Ha(t,e.child,null,r),e=s1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tk(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=yp(Error(ae(422))),uh(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=of({mode:"visible",children:n.children},i,0,null),s=bo(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,(t.mode&1)!==0&&Ha(t,e.child,null,o),t.child.memoizedState=Tg(o),t.memoizedState=Eg,s);if((t.mode&1)===0)return uh(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(ae(419)),n=yp(s,n,void 0),uh(e,t,o,n)}if(a=(o&e.childLanes)!==0,Pr||a){if(n=Yt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vi(e,i),Gn(n,e,i,-1))}return h1(),n=yp(Error(ae(421))),uh(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Fk.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,jr=As(i.nextSibling),Vr=t,ft=!0,Dn=null,e!==null&&(cn[hn++]=Li,cn[hn++]=Oi,cn[hn++]=To,Li=e.id,Oi=e.overflow,To=t),t=s1(t,n.children),t.flags|=4096,t)}function h_(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),xg(e.return,t,r)}function _p(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function TS(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(xr(e,t,n.children,r),n=xt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h_(e,r,t);else if(e.tag===19)h_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(at(xt,n),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Cd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),_p(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Cd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}_p(t,!0,r,null,s);break;case"together":_p(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jh(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ao|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,r=Rs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Rs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ck(e,t,r){switch(t.tag){case 3:SS(t),Ua();break;case 5:Z2(t);break;case 1:Rr(t.type)&&_d(t);break;case 4:qv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;at(Sd,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(at(xt,xt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?ES(e,t,r):(at(xt,xt.current&1),e=Xi(e,t,r),e!==null?e.sibling:null);at(xt,xt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return TS(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),at(xt,xt.current),n)break;return null;case 22:case 23:return t.lanes=0,bS(e,t,r)}return Xi(e,t,r)}var CS,Cg,AS,kS;CS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Cg=function(){};AS=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,xo(gi.current);var s=null;switch(r){case"input":i=Ym(e,i),n=Ym(e,n),s=[];break;case"select":i=bt({},i,{value:void 0}),n=bt({},n,{value:void 0}),s=[];break;case"textarea":i=qm(e,i),n=qm(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=xd)}Jm(r,n);var o;r=null;for(h in i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ou.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var d=n[h];if(a=i?.[h],n.hasOwnProperty(h)&&d!==a&&(d!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&a[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(s||(s=[]),s.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,a=a?a.__html:void 0,d!=null&&a!==d&&(s=s||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ou.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&lt("scroll",e),s||a===d||(s=[])):(s=s||[]).push(h,d))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};kS=function(e,t,r,n){r!==n&&(t.flags|=4)};function kl(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function hr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ak(e,t,r){var n=t.pendingProps;switch(jv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(t),null;case 1:return Rr(t.type)&&yd(),hr(t),null;case 3:return n=t.stateNode,za(),ut(Ir),ut(pr),Jv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ah(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dn!==null&&(Bg(Dn),Dn=null))),Cg(e,t),hr(t),null;case 5:Zv(t);var i=xo(xu.current);if(r=t.type,e!==null&&t.stateNode!=null)AS(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ae(166));return hr(t),null}if(e=xo(gi.current),ah(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[pi]=t,n[gu]=s,e=(t.mode&1)!==0,r){case"dialog":lt("cancel",n),lt("close",n);break;case"iframe":case"object":case"embed":lt("load",n);break;case"video":case"audio":for(i=0;i<zl.length;i++)lt(zl[i],n);break;case"source":lt("error",n);break;case"img":case"image":case"link":lt("error",n),lt("load",n);break;case"details":lt("toggle",n);break;case"input":_y(n,s),lt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},lt("invalid",n);break;case"textarea":wy(n,s),lt("invalid",n)}Jm(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&oh(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&oh(n.textContent,a,e),i=["children",""+a]):ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&lt("scroll",n)}switch(r){case"input":Zc(n),by(n,s,!0);break;case"textarea":Zc(n),Sy(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=xd)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=t2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[pi]=t,e[gu]=n,CS(e,t,!1,!1),t.stateNode=e;e:{switch(o=eg(r,n),r){case"dialog":lt("cancel",e),lt("close",e),i=n;break;case"iframe":case"object":case"embed":lt("load",e),i=n;break;case"video":case"audio":for(i=0;i<zl.length;i++)lt(zl[i],e);i=n;break;case"source":lt("error",e),i=n;break;case"img":case"image":case"link":lt("error",e),lt("load",e),i=n;break;case"details":lt("toggle",e),i=n;break;case"input":_y(e,n),i=Ym(e,n),lt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=bt({},n,{value:void 0}),lt("invalid",e);break;case"textarea":wy(e,n),i=qm(e,n),lt("invalid",e);break;default:i=n}Jm(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var d=a[s];s==="style"?i2(e,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&r2(e,d)):s==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&au(e,d):typeof d=="number"&&au(e,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ou.hasOwnProperty(s)?d!=null&&s==="onScroll"&&lt("scroll",e):d!=null&&Pv(e,s,d,o))}switch(r){case"input":Zc(e),by(e,n,!1);break;case"textarea":Zc(e),Sy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Ta(e,!!n.multiple,s,!1):n.defaultValue!=null&&Ta(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=xd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return hr(t),null;case 6:if(e&&t.stateNode!=null)kS(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ae(166));if(r=xo(xu.current),xo(gi.current),ah(t)){if(n=t.stateNode,r=t.memoizedProps,n[pi]=t,(s=n.nodeValue!==r)&&(e=Vr,e!==null))switch(e.tag){case 3:oh(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oh(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[pi]=t,t.stateNode=n}return hr(t),null;case 13:if(ut(xt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&jr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)$2(),Ua(),t.flags|=98560,s=!1;else if(s=ah(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(ae(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[pi]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;hr(t),s=!1}else Dn!==null&&(Bg(Dn),Dn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(xt.current&1)!==0?Ht===0&&(Ht=3):h1())),t.updateQueue!==null&&(t.flags|=4),hr(t),null);case 4:return za(),Cg(e,t),e===null&&pu(t.stateNode.containerInfo),hr(t),null;case 10:return Yv(t.type._context),hr(t),null;case 17:return Rr(t.type)&&yd(),hr(t),null;case 19:if(ut(xt),s=t.memoizedState,s===null)return hr(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)kl(s,!1);else{if(Ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Cd(e),o!==null){for(t.flags|=128,kl(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return at(xt,xt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Pt()>Wa&&(t.flags|=128,n=!0,kl(s,!1),t.lanes=4194304)}else{if(!n)if(e=Cd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),kl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ft)return hr(t),null}else 2*Pt()-s.renderingStartTime>Wa&&r!==1073741824&&(t.flags|=128,n=!0,kl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Pt(),t.sibling=null,r=xt.current,at(xt,n?r&1|2:r&1),t):(hr(t),null);case 22:case 23:return c1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Wr&1073741824)!==0&&(hr(t),t.subtreeFlags&6&&(t.flags|=8192)):hr(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function kk(e,t){switch(jv(t),t.tag){case 1:return Rr(t.type)&&yd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return za(),ut(Ir),ut(pr),Jv(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Zv(t),null;case 13:if(ut(xt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ut(xt),null;case 4:return za(),null;case 10:return Yv(t.type._context),null;case 22:case 23:return c1(),null;case 24:return null;default:return null}}var ch=!1,dr=!1,Pk=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ya(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){St(e,t,n)}else r.current=null}function Ag(e,t,r){try{r()}catch(n){St(e,t,n)}}var d_=!1;function Ik(e,t){if(cg=md,e=M2(),Gv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,d=-1,h=0,p=0,c=e,f=null;t:for(;;){for(var m;c!==r||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(d=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(m=c.firstChild)!==null;)f=c,c=m;for(;;){if(c===e)break t;if(f===r&&++h===i&&(a=o),f===s&&++p===n&&(d=o),(m=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=m}r=a===-1||d===-1?null:{start:a,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(hg={focusedElem:e,selectionRange:r},md=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var v=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,E=v.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?_:Mn(t.type,_),E);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(T){St(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return v=d_,d_=!1,v}function tu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ag(t,r,s)}i=i.next}while(i!==n)}}function nf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function PS(e){var t=e.alternate;t!==null&&(e.alternate=null,PS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pi],delete t[gu],delete t[pg],delete t[dk],delete t[fk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IS(e){return e.tag===5||e.tag===3||e.tag===4}function f_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xd));else if(n!==4&&(e=e.child,e!==null))for(Pg(e,t,r),e=e.sibling;e!==null;)Pg(e,t,r),e=e.sibling}function Ig(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ig(e,t,r),e=e.sibling;e!==null;)Ig(e,t,r),e=e.sibling}var Jt=null,Bn=!1;function hs(e,t,r){for(r=r.child;r!==null;)RS(e,t,r),r=r.sibling}function RS(e,t,r){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Kd,r)}catch{}switch(r.tag){case 5:dr||ya(r,t);case 6:var n=Jt,i=Bn;Jt=null,hs(e,t,r),Jt=n,Bn=i,Jt!==null&&(Bn?(e=Jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Jt.removeChild(r.stateNode));break;case 18:Jt!==null&&(Bn?(e=Jt,r=r.stateNode,e.nodeType===8?fp(e.parentNode,r):e.nodeType===1&&fp(e,r),hu(e)):fp(Jt,r.stateNode));break;case 4:n=Jt,i=Bn,Jt=r.stateNode.containerInfo,Bn=!0,hs(e,t,r),Jt=n,Bn=i;break;case 0:case 11:case 14:case 15:if(!dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Ag(r,t,o),i=i.next}while(i!==n)}hs(e,t,r);break;case 1:if(!dr&&(ya(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){St(r,t,a)}hs(e,t,r);break;case 21:hs(e,t,r);break;case 22:r.mode&1?(dr=(n=dr)||r.memoizedState!==null,hs(e,t,r),dr=n):hs(e,t,r);break;default:hs(e,t,r)}}function p_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Pk),t.forEach(function(n){var i=Uk.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jt=a.stateNode,Bn=!1;break e;case 3:Jt=a.stateNode.containerInfo,Bn=!0;break e;case 4:Jt=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(Jt===null)throw Error(ae(160));RS(s,o,i),Jt=null,Bn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(h){St(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)MS(t,e),t=t.sibling}function MS(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(t,e),li(e),n&4){try{tu(3,e,e.return),nf(3,e)}catch(_){St(e,e.return,_)}try{tu(5,e,e.return)}catch(_){St(e,e.return,_)}}break;case 1:Cn(t,e),li(e),n&512&&r!==null&&ya(r,r.return);break;case 5:if(Cn(t,e),li(e),n&512&&r!==null&&ya(r,r.return),e.flags&32){var i=e.stateNode;try{au(i,"")}catch(_){St(e,e.return,_)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Jw(i,s),eg(a,o);var h=eg(a,s);for(o=0;o<d.length;o+=2){var p=d[o],c=d[o+1];p==="style"?i2(i,c):p==="dangerouslySetInnerHTML"?r2(i,c):p==="children"?au(i,c):Pv(i,p,c,h)}switch(a){case"input":Km(i,s);break;case"textarea":e2(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ta(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ta(i,!!s.multiple,s.defaultValue,!0):Ta(i,!!s.multiple,s.multiple?[]:"",!1))}i[gu]=s}catch(_){St(e,e.return,_)}}break;case 6:if(Cn(t,e),li(e),n&4){if(e.stateNode===null)throw Error(ae(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(_){St(e,e.return,_)}}break;case 3:if(Cn(t,e),li(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hu(t.containerInfo)}catch(_){St(e,e.return,_)}break;case 4:Cn(t,e),li(e);break;case 13:Cn(t,e),li(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(l1=Pt())),n&4&&p_(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(dr=(h=dr)||p,Cn(t,e),dr=h):Cn(t,e),li(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&(e.mode&1)!==0)for(ye=e,p=e.child;p!==null;){for(c=ye=p;ye!==null;){switch(f=ye,m=f.child,f.tag){case 0:case 11:case 14:case 15:tu(4,f,f.return);break;case 1:ya(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(_){St(n,r,_)}}break;case 5:ya(f,f.return);break;case 22:if(f.memoizedState!==null){g_(c);continue}}m!==null?(m.return=f,ye=m):g_(c)}p=p.sibling}e:for(p=null,c=e;;){if(c.tag===5){if(p===null){p=c;try{i=c.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,d=c.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,a.style.display=n2("display",o))}catch(_){St(e,e.return,_)}}}else if(c.tag===6){if(p===null)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(_){St(e,e.return,_)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Cn(t,e),li(e),n&4&&p_(e);break;case 21:break;default:Cn(t,e),li(e)}}function li(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(IS(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(au(i,""),n.flags&=-33);var s=f_(e);Ig(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=f_(e);Pg(e,a,o);break;default:throw Error(ae(161))}}catch(d){St(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rk(e,t,r){ye=e,NS(e)}function NS(e,t,r){for(var n=(e.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||ch;if(!o){var a=i.alternate,d=a!==null&&a.memoizedState!==null||dr;a=ch;var h=dr;if(ch=o,(dr=d)&&!h)for(ye=i;ye!==null;)o=ye,d=o.child,o.tag===22&&o.memoizedState!==null?v_(i):d!==null?(d.return=o,ye=d):v_(i);for(;s!==null;)ye=s,NS(s),s=s.sibling;ye=i,ch=a,dr=h}m_(e)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,ye=s):m_(e)}}function m_(e){for(;ye!==null;){var t=ye;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:dr||nf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Mn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Zy(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Zy(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var c=p.dehydrated;c!==null&&hu(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}dr||t.flags&512&&kg(t)}catch(f){St(t,t.return,f)}}if(t===e){ye=null;break}if(r=t.sibling,r!==null){r.return=t.return,ye=r;break}ye=t.return}}function g_(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ye=r;break}ye=t.return}}function v_(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nf(4,t)}catch(d){St(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(d){St(t,i,d)}}var s=t.return;try{kg(t)}catch(d){St(t,s,d)}break;case 5:var o=t.return;try{kg(t)}catch(d){St(t,o,d)}}}catch(d){St(t,t.return,d)}if(t===e){ye=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ye=a;break}ye=t.return}}var Mk=Math.ceil,Pd=Ki.ReactCurrentDispatcher,o1=Ki.ReactCurrentOwner,mn=Ki.ReactCurrentBatchConfig,$e=0,Yt=null,Bt=null,nr=0,Wr=0,_a=Gs(0),Ht=0,wu=null,Ao=0,sf=0,a1=0,ru=null,kr=null,l1=0,Wa=1/0,Bi=null,Id=!1,Rg=null,Ps=null,hh=!1,ws=null,Rd=0,nu=0,Mg=null,ed=-1,td=0;function yr(){return($e&6)!==0?Pt():ed!==-1?ed:ed=Pt()}function Is(e){return(e.mode&1)===0?1:($e&2)!==0&&nr!==0?nr&-nr:mk.transition!==null?(td===0&&(td=g2()),td):(e=tt,e!==0||(e=window.event,e=e===void 0?16:S2(e.type)),e)}function Gn(e,t,r,n){if(50<nu)throw nu=0,Mg=null,Error(ae(185));Lu(e,r,n),(($e&2)===0||e!==Yt)&&(e===Yt&&(($e&2)===0&&(sf|=r),Ht===4&&xs(e,nr)),Mr(e,n),r===1&&$e===0&&(t.mode&1)===0&&(Wa=Pt()+500,ef&&Ws()))}function Mr(e,t){var r=e.callbackNode;mA(e,t);var n=pd(e,e===Yt?nr:0);if(n===0)r!==null&&Cy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Cy(r),t===1)e.tag===0?pk(x_.bind(null,e)):G2(x_.bind(null,e)),ck(function(){($e&6)===0&&Ws()}),r=null;else{switch(v2(n)){case 1:r=Bv;break;case 4:r=p2;break;case 16:r=fd;break;case 536870912:r=m2;break;default:r=fd}r=zS(r,BS.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function BS(e,t){if(ed=-1,td=0,($e&6)!==0)throw Error(ae(327));var r=e.callbackNode;if(Ia()&&e.callbackNode!==r)return null;var n=pd(e,e===Yt?nr:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Md(e,n);else{t=n;var i=$e;$e|=2;var s=LS();(Yt!==e||nr!==t)&&(Bi=null,Wa=Pt()+500,_o(e,t));do try{Dk();break}catch(a){DS(e,a)}while(1);Xv(),Pd.current=s,$e=i,Bt!==null?t=0:(Yt=null,nr=0,t=Ht)}if(t!==0){if(t===2&&(i=sg(e),i!==0&&(n=i,t=Ng(e,i))),t===1)throw r=wu,_o(e,0),xs(e,n),Mr(e,Pt()),r;if(t===6)xs(e,n);else{if(i=e.current.alternate,(n&30)===0&&!Nk(i)&&(t=Md(e,n),t===2&&(s=sg(e),s!==0&&(n=s,t=Ng(e,s))),t===1))throw r=wu,_o(e,0),xs(e,n),Mr(e,Pt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:ao(e,kr,Bi);break;case 3:if(xs(e,n),(n&130023424)===n&&(t=l1+500-Pt(),10<t)){if(pd(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){yr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=fg(ao.bind(null,e,kr,Bi),t);break}ao(e,kr,Bi);break;case 4:if(xs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-zn(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=Pt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Mk(n/1960))-n,10<n){e.timeoutHandle=fg(ao.bind(null,e,kr,Bi),n);break}ao(e,kr,Bi);break;case 5:ao(e,kr,Bi);break;default:throw Error(ae(329))}}}return Mr(e,Pt()),e.callbackNode===r?BS.bind(null,e):null}function Ng(e,t){var r=ru;return e.current.memoizedState.isDehydrated&&(_o(e,t).flags|=256),e=Md(e,t),e!==2&&(t=kr,kr=r,t!==null&&Bg(t)),e}function Bg(e){kr===null?kr=e:kr.push.apply(kr,e)}function Nk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Vn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xs(e,t){for(t&=~a1,t&=~sf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zn(t),n=1<<r;e[r]=-1,t&=~n}}function x_(e){if(($e&6)!==0)throw Error(ae(327));Ia();var t=pd(e,0);if((t&1)===0)return Mr(e,Pt()),null;var r=Md(e,t);if(e.tag!==0&&r===2){var n=sg(e);n!==0&&(t=n,r=Ng(e,n))}if(r===1)throw r=wu,_o(e,0),xs(e,t),Mr(e,Pt()),r;if(r===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ao(e,kr,Bi),Mr(e,Pt()),null}function u1(e,t){var r=$e;$e|=1;try{return e(t)}finally{$e=r,$e===0&&(Wa=Pt()+500,ef&&Ws())}}function ko(e){ws!==null&&ws.tag===0&&($e&6)===0&&Ia();var t=$e;$e|=1;var r=mn.transition,n=tt;try{if(mn.transition=null,tt=1,e)return e()}finally{tt=n,mn.transition=r,$e=t,($e&6)===0&&Ws()}}function c1(){Wr=_a.current,ut(_a)}function _o(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,uk(r)),Bt!==null)for(r=Bt.return;r!==null;){var n=r;switch(jv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yd();break;case 3:za(),ut(Ir),ut(pr),Jv();break;case 5:Zv(n);break;case 4:za();break;case 13:ut(xt);break;case 19:ut(xt);break;case 10:Yv(n.type._context);break;case 22:case 23:c1()}r=r.return}if(Yt=e,Bt=e=Rs(e.current,null),nr=Wr=t,Ht=0,wu=null,a1=sf=Ao=0,kr=ru=null,vo!==null){for(t=0;t<vo.length;t++)if(r=vo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}vo=null}return e}function DS(e,t){do{var r=Bt;try{if(Xv(),qh.current=kd,Ad){for(var n=_t.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ad=!1}if(Co=0,$t=Ut=_t=null,eu=!1,yu=0,o1.current=null,r===null||r.return===null){Ht=1,wu=t,Bt=null;break}e:{var s=e,o=r.return,a=r,d=t;if(t=nr,a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,p=a,c=p.tag;if((p.mode&1)===0&&(c===0||c===11||c===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var m=s_(o);if(m!==null){m.flags&=-257,o_(m,o,a,s,t),m.mode&1&&i_(s,h,t),t=m,d=h;var v=t.updateQueue;if(v===null){var _=new Set;_.add(d),t.updateQueue=_}else v.add(d);break e}else{if((t&1)===0){i_(s,h,t),h1();break e}d=Error(ae(426))}}else if(ft&&a.mode&1){var E=s_(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),o_(E,o,a,s,t),$v(Ga(d,a));break e}}s=d=Ga(d,a),Ht!==4&&(Ht=2),ru===null?ru=[s]:ru.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=xS(s,d,t);qy(s,x);break e;case 1:a=d;var y=s.type,w=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ps===null||!Ps.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var T=yS(s,a,t);qy(s,T);break e}}s=s.return}while(s!==null)}FS(r)}catch(P){t=P,Bt===r&&r!==null&&(Bt=r=r.return);continue}break}while(1)}function LS(){var e=Pd.current;return Pd.current=kd,e===null?kd:e}function h1(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Yt===null||(Ao&268435455)===0&&(sf&268435455)===0||xs(Yt,nr)}function Md(e,t){var r=$e;$e|=2;var n=LS();(Yt!==e||nr!==t)&&(Bi=null,_o(e,t));do try{Bk();break}catch(i){DS(e,i)}while(1);if(Xv(),$e=r,Pd.current=n,Bt!==null)throw Error(ae(261));return Yt=null,nr=0,Ht}function Bk(){for(;Bt!==null;)OS(Bt)}function Dk(){for(;Bt!==null&&!oA();)OS(Bt)}function OS(e){var t=HS(e.alternate,e,Wr);e.memoizedProps=e.pendingProps,t===null?FS(e):Bt=t,o1.current=null}function FS(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Ak(r,t,Wr),r!==null){Bt=r;return}}else{if(r=kk(r,t),r!==null){r.flags&=32767,Bt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,Bt=null;return}}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Ht===0&&(Ht=5)}function ao(e,t,r){var n=tt,i=mn.transition;try{mn.transition=null,tt=1,Lk(e,t,r,n)}finally{mn.transition=i,tt=n}return null}function Lk(e,t,r,n){do Ia();while(ws!==null);if(($e&6)!==0)throw Error(ae(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(gA(e,s),e===Yt&&(Bt=Yt=null,nr=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||hh||(hh=!0,zS(fd,function(){return Ia(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=mn.transition,mn.transition=null;var o=tt;tt=1;var a=$e;$e|=4,o1.current=null,Ik(e,r),MS(r,e),rk(hg),md=!!cg,hg=cg=null,e.current=r,Rk(r),aA(),$e=a,tt=o,mn.transition=s}else e.current=r;if(hh&&(hh=!1,ws=e,Rd=i),s=e.pendingLanes,s===0&&(Ps=null),cA(r.stateNode),Mr(e,Pt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Id)throw Id=!1,e=Rg,Rg=null,e;return(Rd&1)!==0&&e.tag!==0&&Ia(),s=e.pendingLanes,(s&1)!==0?e===Mg?nu++:(nu=0,Mg=e):nu=0,Ws(),null}function Ia(){if(ws!==null){var e=v2(Rd),t=mn.transition,r=tt;try{if(mn.transition=null,tt=16>e?16:e,ws===null)var n=!1;else{if(e=ws,ws=null,Rd=0,($e&6)!==0)throw Error(ae(331));var i=$e;for($e|=4,ye=e.current;ye!==null;){var s=ye,o=s.child;if((ye.flags&16)!==0){var a=s.deletions;if(a!==null){for(var d=0;d<a.length;d++){var h=a[d];for(ye=h;ye!==null;){var p=ye;switch(p.tag){case 0:case 11:case 15:tu(8,p,s)}var c=p.child;if(c!==null)c.return=p,ye=c;else for(;ye!==null;){p=ye;var f=p.sibling,m=p.return;if(PS(p),p===h){ye=null;break}if(f!==null){f.return=m,ye=f;break}ye=m}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}ye=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:tu(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,ye=x;break e}ye=s.return}}var y=e.current;for(ye=y;ye!==null;){o=ye;var w=o.child;if((o.subtreeFlags&2064)!==0&&w!==null)w.return=o,ye=w;else e:for(o=y;ye!==null;){if(a=ye,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:nf(9,a)}}catch(P){St(a,a.return,P)}if(a===o){ye=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,ye=T;break e}ye=a.return}}if($e=i,Ws(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Kd,e)}catch{}n=!0}return n}finally{tt=r,mn.transition=t}}return!1}function y_(e,t,r){t=Ga(r,t),t=xS(e,t,1),e=ks(e,t,1),t=yr(),e!==null&&(Lu(e,1,t),Mr(e,t))}function St(e,t,r){if(e.tag===3)y_(e,e,r);else for(;t!==null;){if(t.tag===3){y_(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ps===null||!Ps.has(n))){e=Ga(r,e),e=yS(t,e,1),t=ks(t,e,1),e=yr(),t!==null&&(Lu(t,1,e),Mr(t,e));break}}t=t.return}}function Ok(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=yr(),e.pingedLanes|=e.suspendedLanes&r,Yt===e&&(nr&r)===r&&(Ht===4||Ht===3&&(nr&130023424)===nr&&500>Pt()-l1?_o(e,0):a1|=r),Mr(e,t)}function US(e,t){t===0&&((e.mode&1)===0?t=1:(t=th,th<<=1,(th&130023424)===0&&(th=4194304)));var r=yr();e=Vi(e,t),e!==null&&(Lu(e,t,r),Mr(e,r))}function Fk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),US(e,r)}function Uk(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(t),US(e,r)}var HS;HS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ir.current)Pr=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Pr=!1,Ck(e,t,r);Pr=(e.flags&131072)!==0}else Pr=!1,ft&&(t.flags&1048576)!==0&&W2(t,wd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Jh(e,t),e=t.pendingProps;var i=Fa(t,pr.current);Pa(t,r),i=t1(null,t,n,e,i,r);var s=r1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(n)?(s=!0,_d(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qv(t),i.updater=tf,t.stateNode=i,i._reactInternals=t,_g(t,n,e,r),t=Sg(null,t,n,!0,s,r)):(t.tag=0,ft&&s&&Wv(t),xr(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Jh(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=zk(n),e=Mn(n,e),i){case 0:t=wg(null,t,n,e,r);break e;case 1:t=u_(null,t,n,e,r);break e;case 11:t=a_(null,t,n,e,r);break e;case 14:t=l_(null,t,n,Mn(n.type,e),r);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),wg(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),u_(e,t,n,i,r);case 3:e:{if(SS(t),e===null)throw Error(ae(387));n=t.pendingProps,s=t.memoizedState,i=s.element,X2(e,t),Td(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ga(Error(ae(423)),t),t=c_(e,t,n,r,i);break e}else if(n!==i){i=Ga(Error(ae(424)),t),t=c_(e,t,n,r,i);break e}else for(jr=As(t.stateNode.containerInfo.firstChild),Vr=t,ft=!0,Dn=null,r=q2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ua(),n===i){t=Xi(e,t,r);break e}xr(e,t,n,r)}t=t.child}return t;case 5:return Z2(t),e===null&&vg(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,dg(n,i)?o=null:s!==null&&dg(n,s)&&(t.flags|=32),wS(e,t),xr(e,t,o,r),t.child;case 6:return e===null&&vg(t),null;case 13:return ES(e,t,r);case 4:return qv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ha(t,null,n,r):xr(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),a_(e,t,n,i,r);case 7:return xr(e,t,t.pendingProps,r),t.child;case 8:return xr(e,t,t.pendingProps.children,r),t.child;case 12:return xr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,at(Sd,n._currentValue),n._currentValue=o,s!==null)if(Vn(s.value,o)){if(s.children===i.children&&!Ir.current){t=Xi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var d=a.firstContext;d!==null;){if(d.context===n){if(s.tag===1){d=zi(-1,r&-r),d.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?d.next=d:(d.next=p.next,p.next=d),h.pending=d}}s.lanes|=r,d=s.alternate,d!==null&&(d.lanes|=r),xg(s.return,r,t),a.lanes|=r;break}d=d.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),xg(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xr(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Pa(t,r),i=gn(i),n=n(i),t.flags|=1,xr(e,t,n,r),t.child;case 14:return n=t.type,i=Mn(n,t.pendingProps),i=Mn(n.type,i),l_(e,t,n,i,r);case 15:return _S(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Mn(n,i),Jh(e,t),t.tag=1,Rr(n)?(e=!0,_d(t)):e=!1,Pa(t,r),K2(t,n,i),_g(t,n,i,r),Sg(null,t,n,!0,e,r);case 19:return TS(e,t,r);case 22:return bS(e,t,r)}throw Error(ae(156,t.tag))};function zS(e,t){return f2(e,t)}function Hk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,r,n){return new Hk(e,t,r,n)}function d1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zk(e){if(typeof e=="function")return d1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rv)return 11;if(e===Mv)return 14}return 2}function Rs(e,t){var r=e.alternate;return r===null?(r=dn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function rd(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")d1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ca:return bo(r.children,i,s,t);case Iv:o=8,i|=8;break;case jm:return e=dn(12,r,t,i|2),e.elementType=jm,e.lanes=s,e;case $m:return e=dn(13,r,t,i),e.elementType=$m,e.lanes=s,e;case Vm:return e=dn(19,r,t,i),e.elementType=Vm,e.lanes=s,e;case Qw:return of(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yw:o=10;break e;case Kw:o=9;break e;case Rv:o=11;break e;case Mv:o=14;break e;case ms:o=16,n=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=dn(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function bo(e,t,r,n){return e=dn(7,e,n,t),e.lanes=r,e}function of(e,t,r,n){return e=dn(22,e,n,t),e.elementType=Qw,e.lanes=r,e.stateNode={isHidden:!1},e}function bp(e,t,r){return e=dn(6,e,null,t),e.lanes=r,e}function wp(e,t,r){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gk(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rp(0),this.expirationTimes=rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function f1(e,t,r,n,i,s,o,a,d){return e=new Gk(e,t,r,a,d),t===1?(t=1,s===!0&&(t|=8)):t=0,s=dn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qv(s),e}function Wk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function GS(e){if(!e)return Ds;e=e._reactInternals;e:{if(Mo(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var r=e.type;if(Rr(r))return z2(e,r,t)}return t}function WS(e,t,r,n,i,s,o,a,d){return e=f1(r,n,!0,e,i,s,o,a,d),e.context=GS(null),r=e.current,n=yr(),i=Is(r),s=zi(n,i),s.callback=t??null,ks(r,s,i),e.current.lanes=i,Lu(e,i,n),Mr(e,n),e}function af(e,t,r,n){var i=t.current,s=yr(),o=Is(i);return r=GS(r),t.context===null?t.context=r:t.pendingContext=r,t=zi(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ks(i,t,o),e!==null&&(Gn(e,i,o,s),Qh(e,i,o)),o}function Nd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function __(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function p1(e,t){__(e,t),(e=e.alternate)&&__(e,t)}function jk(){return null}var jS=typeof reportError=="function"?reportError:function(e){console.error(e)};function m1(e){this._internalRoot=e}lf.prototype.render=m1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));af(e,t,null,null)};lf.prototype.unmount=m1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ko(function(){af(null,e,null,null)}),t[$i]=null}};function lf(e){this._internalRoot=e}lf.prototype.unstable_scheduleHydration=function(e){if(e){var t=_2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vs.length&&t!==0&&t<vs[r].priority;r++);vs.splice(r,0,e),r===0&&w2(e)}};function g1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function b_(){}function $k(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var h=Nd(o);s.call(h)}}var o=WS(t,n,e,0,null,!1,!1,"",b_);return e._reactRootContainer=o,e[$i]=o.current,pu(e.nodeType===8?e.parentNode:e),ko(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var h=Nd(d);a.call(h)}}var d=f1(e,0,!1,null,null,!1,!1,"",b_);return e._reactRootContainer=d,e[$i]=d.current,pu(e.nodeType===8?e.parentNode:e),ko(function(){af(t,d,r,n)}),d}function cf(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var d=Nd(o);a.call(d)}}af(t,o,e,i)}else o=$k(r,t,e,i,n);return Nd(o)}x2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hl(t.pendingLanes);r!==0&&(Dv(t,r|1),Mr(t,Pt()),($e&6)===0&&(Wa=Pt()+500,Ws()))}break;case 13:ko(function(){var n=Vi(e,1);if(n!==null){var i=yr();Gn(n,e,1,i)}}),p1(e,1)}};Lv=function(e){if(e.tag===13){var t=Vi(e,134217728);if(t!==null){var r=yr();Gn(t,e,134217728,r)}p1(e,134217728)}};y2=function(e){if(e.tag===13){var t=Is(e),r=Vi(e,t);if(r!==null){var n=yr();Gn(r,e,t,n)}p1(e,t)}};_2=function(){return tt};b2=function(e,t){var r=tt;try{return tt=e,t()}finally{tt=r}};rg=function(e,t,r){switch(t){case"input":if(Km(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Jd(n);if(!i)throw Error(ae(90));Zw(n),Km(n,i)}}}break;case"textarea":e2(e,r);break;case"select":t=r.value,t!=null&&Ta(e,!!r.multiple,t,!1)}};a2=u1;l2=ko;var Vk={usingClientEntryPoint:!1,Events:[Fu,pa,Jd,s2,o2,u1]},Pl={findFiberByHostInstance:go,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Xk={bundleType:Pl.bundleType,version:Pl.version,rendererPackageName:Pl.rendererPackageName,rendererConfig:Pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=h2(e),e===null?null:e.stateNode},findFiberByHostInstance:Pl.findFiberByHostInstance||jk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dh.isDisabled&&dh.supportsFiber)try{Kd=dh.inject(Xk),mi=dh}catch{}}Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk;Qr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g1(t))throw Error(ae(200));return Wk(e,t,null,r)};Qr.createRoot=function(e,t){if(!g1(e))throw Error(ae(299));var r=!1,n="",i=jS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=f1(e,1,!1,null,null,r,!1,n,i),e[$i]=t.current,pu(e.nodeType===8?e.parentNode:e),new m1(t)};Qr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=h2(t),e=e===null?null:e.stateNode,e};Qr.flushSync=function(e){return ko(e)};Qr.hydrate=function(e,t,r){if(!uf(t))throw Error(ae(200));return cf(null,e,t,!0,r)};Qr.hydrateRoot=function(e,t,r){if(!g1(e))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=jS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=WS(t,null,e,1,r??null,i,!1,s,o),e[$i]=t.current,pu(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new lf(t)};Qr.render=function(e,t,r){if(!uf(t))throw Error(ae(200));return cf(null,e,t,!1,r)};Qr.unmountComponentAtNode=function(e){if(!uf(e))throw Error(ae(40));return e._reactRootContainer?(ko(function(){cf(null,null,e,!1,function(){e._reactRootContainer=null,e[$i]=null})}),!0):!1};Qr.unstable_batchedUpdates=u1;Qr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!uf(r))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return cf(e,t,r,!1,n)};Qr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Qr})(Ww);var $S,w_=Ww.exports;$S=w_.createRoot,w_.hydrateRoot;var ue={exports:{}},No=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(No||{}),VS=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(VS||{}),Dg=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Dg||{}),we=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(we||{}),Fn=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Fn||{}),ce=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(ce||{}),Ra=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Ra||{}),Pe=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Pe||{}),Lg=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Lg||{}),Fi=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Fi||{}),Gi=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Gi||{}),_i=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(_i||{}),Xn=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Xn||{}),di=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(di||{}),v1=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(v1||{}),fn=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(fn||{}),Ot=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Ot||{}),Nt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Nt||{}),vi=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(vi||{});const Yk={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},ge={ADAPTER:Yk,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Sp=/iPhone/i,S_=/iPod/i,E_=/iPad/i,T_=/\biOS-universal(?:.+)Mac\b/i,Ep=/\bAndroid(?:.+)Mobile\b/i,C_=/Android/i,ea=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,fh=/Silk/i,Ii=/Windows Phone/i,A_=/\bWindows(?:.+)ARM\b/i,k_=/BlackBerry/i,P_=/BB10/i,I_=/Opera Mini/i,R_=/\b(CriOS|Chrome)(?:.+)Mobile/i,M_=/Mobile(?:.+)Firefox\b/i,N_=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function Kk(e){return function(t){return t.test(e)}}function B_(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=Kk(r),s={apple:{phone:i(Sp)&&!i(Ii),ipod:i(S_),tablet:!i(Sp)&&(i(E_)||N_(t))&&!i(Ii),universal:i(T_),device:(i(Sp)||i(S_)||i(E_)||i(T_)||N_(t))&&!i(Ii)},amazon:{phone:i(ea),tablet:!i(ea)&&i(fh),device:i(ea)||i(fh)},android:{phone:!i(Ii)&&i(ea)||!i(Ii)&&i(Ep),tablet:!i(Ii)&&!i(ea)&&!i(Ep)&&(i(fh)||i(C_)),device:!i(Ii)&&(i(ea)||i(fh)||i(Ep)||i(C_))||i(/\bokhttp\b/i)},windows:{phone:i(Ii),tablet:i(A_),device:i(Ii)||i(A_)},other:{blackberry:i(k_),blackberry10:i(P_),opera:i(I_),firefox:i(M_),chrome:i(R_),device:i(k_)||i(P_)||i(I_)||i(M_)||i(R_)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Qk=B_.default??B_,Ui=Qk(globalThis.navigator);ge.RETINA_PREFIX=/@([0-9\.]+)x/;ge.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var XS={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function s(d,h,p,c,f){if(typeof p!="function")throw new TypeError("The listener must be a function");var m=new i(p,c||d,f),v=r?r+h:h;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],m]:d._events[v].push(m):(d._events[v]=m,d._eventsCount++),d}function o(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],p,c;if(this._eventsCount===0)return h;for(c in p=this._events)t.call(p,c)&&h.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},a.prototype.listeners=function(h){var p=r?r+h:h,c=this._events[p];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,m=c.length,v=new Array(m);f<m;f++)v[f]=c[f].fn;return v},a.prototype.listenerCount=function(h){var p=r?r+h:h,c=this._events[p];return c?c.fn?1:c.length:0},a.prototype.emit=function(h,p,c,f,m,v){var _=r?r+h:h;if(!this._events[_])return!1;var E=this._events[_],x=arguments.length,y,w;if(E.fn){switch(E.once&&this.removeListener(h,E.fn,void 0,!0),x){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,c),!0;case 4:return E.fn.call(E.context,p,c,f),!0;case 5:return E.fn.call(E.context,p,c,f,m),!0;case 6:return E.fn.call(E.context,p,c,f,m,v),!0}for(w=1,y=new Array(x-1);w<x;w++)y[w-1]=arguments[w];E.fn.apply(E.context,y)}else{var T=E.length,P;for(w=0;w<T;w++)switch(E[w].once&&this.removeListener(h,E[w].fn,void 0,!0),x){case 1:E[w].fn.call(E[w].context);break;case 2:E[w].fn.call(E[w].context,p);break;case 3:E[w].fn.call(E[w].context,p,c);break;case 4:E[w].fn.call(E[w].context,p,c,f);break;default:if(!y)for(P=1,y=new Array(x-1);P<x;P++)y[P-1]=arguments[P];E[w].fn.apply(E[w].context,y)}}return!0},a.prototype.on=function(h,p,c){return s(this,h,p,c,!1)},a.prototype.once=function(h,p,c){return s(this,h,p,c,!0)},a.prototype.removeListener=function(h,p,c,f){var m=r?r+h:h;if(!this._events[m])return this;if(!p)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===p&&(!f||v.once)&&(!c||v.context===c)&&o(this,m);else{for(var _=0,E=[],x=v.length;_<x;_++)(v[_].fn!==p||f&&!v[_].once||c&&v[_].context!==c)&&E.push(v[_]);E.length?this._events[m]=E.length===1?E[0]:E:o(this,m)}return this},a.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(XS);const Hu=XS.exports;var x1={exports:{}};x1.exports=hf;x1.exports.default=hf;function hf(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,s=YS(e,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,d,h,p,c,f,m;if(n&&(s=t4(e,t,s,r)),e.length>80*r){a=h=e[0],d=p=e[1];for(var v=r;v<i;v+=r)c=e[v],f=e[v+1],c<a&&(a=c),f<d&&(d=f),c>h&&(h=c),f>p&&(p=f);m=Math.max(h-a,p-d),m=m!==0?32767/m:0}return Su(s,o,r,a,d,m,0),o}function YS(e,t,r,n,i){var s,o;if(i===Ug(e,t,r,n)>0)for(s=t;s<r;s+=n)o=D_(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=D_(s,e[s],e[s+1],o);return o&&df(o,o.next)&&(Tu(o),o=o.next),o}function Po(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(df(r,r.next)||yt(r.prev,r,r.next)===0)){if(Tu(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Su(e,t,r,n,i,s,o){if(!!e){!o&&s&&o4(e,n,i,s);for(var a=e,d,h;e.prev!==e.next;){if(d=e.prev,h=e.next,s?Zk(e,n,i,s):qk(e)){t.push(d.i/r|0),t.push(e.i/r|0),t.push(h.i/r|0),Tu(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=Jk(Po(e),t,r),Su(e,t,r,n,i,s,2)):o===2&&e4(e,t,r,n,i,s):Su(Po(e),t,r,n,i,s,1);break}}}}function qk(e){var t=e.prev,r=e,n=e.next;if(yt(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,o=n.x,a=t.y,d=r.y,h=n.y,p=i<s?i<o?i:o:s<o?s:o,c=a<d?a<h?a:h:d<h?d:h,f=i>s?i>o?i:o:s>o?s:o,m=a>d?a>h?a:h:d>h?d:h,v=n.next;v!==t;){if(v.x>=p&&v.x<=f&&v.y>=c&&v.y<=m&&ba(i,a,s,d,o,h,v.x,v.y)&&yt(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Zk(e,t,r,n){var i=e.prev,s=e,o=e.next;if(yt(i,s,o)>=0)return!1;for(var a=i.x,d=s.x,h=o.x,p=i.y,c=s.y,f=o.y,m=a<d?a<h?a:h:d<h?d:h,v=p<c?p<f?p:f:c<f?c:f,_=a>d?a>h?a:h:d>h?d:h,E=p>c?p>f?p:f:c>f?c:f,x=Og(m,v,t,r,n),y=Og(_,E,t,r,n),w=e.prevZ,T=e.nextZ;w&&w.z>=x&&T&&T.z<=y;){if(w.x>=m&&w.x<=_&&w.y>=v&&w.y<=E&&w!==i&&w!==o&&ba(a,p,d,c,h,f,w.x,w.y)&&yt(w.prev,w,w.next)>=0||(w=w.prevZ,T.x>=m&&T.x<=_&&T.y>=v&&T.y<=E&&T!==i&&T!==o&&ba(a,p,d,c,h,f,T.x,T.y)&&yt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=_&&w.y>=v&&w.y<=E&&w!==i&&w!==o&&ba(a,p,d,c,h,f,w.x,w.y)&&yt(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;T&&T.z<=y;){if(T.x>=m&&T.x<=_&&T.y>=v&&T.y<=E&&T!==i&&T!==o&&ba(a,p,d,c,h,f,T.x,T.y)&&yt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Jk(e,t,r){var n=e;do{var i=n.prev,s=n.next.next;!df(i,s)&&KS(i,n,n.next,s)&&Eu(i,s)&&Eu(s,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(s.i/r|0),Tu(n),Tu(n.next),n=e=s),n=n.next}while(n!==e);return Po(n)}function e4(e,t,r,n,i,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&u4(o,a)){var d=QS(o,a);o=Po(o,o.next),d=Po(d,d.next),Su(o,t,r,n,i,s,0),Su(d,t,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==e)}function t4(e,t,r,n){var i=[],s,o,a,d,h;for(s=0,o=t.length;s<o;s++)a=t[s]*n,d=s<o-1?t[s+1]*n:e.length,h=YS(e,a,d,n,!1),h===h.next&&(h.steiner=!0),i.push(l4(h));for(i.sort(r4),s=0;s<i.length;s++)r=n4(i[s],r);return r}function r4(e,t){return e.x-t.x}function n4(e,t){var r=i4(e,t);if(!r)return t;var n=QS(r,e);return Po(n,n.next),Po(r,r.next)}function i4(e,t){var r=t,n=e.x,i=e.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==t);if(!o)return null;var d=o,h=o.x,p=o.y,c=1/0,f;r=o;do n>=r.x&&r.x>=h&&n!==r.x&&ba(i<p?n:s,i,h,p,i<p?s:n,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(n-r.x),Eu(r,e)&&(f<c||f===c&&(r.x>o.x||r.x===o.x&&s4(o,r)))&&(o=r,c=f)),r=r.next;while(r!==d);return o}function s4(e,t){return yt(e.prev,e,t.prev)<0&&yt(t.next,e,e.next)<0}function o4(e,t,r,n){var i=e;do i.z===0&&(i.z=Og(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,a4(i)}function a4(e){var t,r,n,i,s,o,a,d,h=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<h&&(a++,n=n.nextZ,!!n);t++);for(d=h;a>0||d>0&&n;)a!==0&&(d===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,d--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,h*=2}while(o>1);return e}function Og(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function l4(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function ba(e,t,r,n,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(r-o)*(t-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function u4(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!c4(e,t)&&(Eu(e,t)&&Eu(t,e)&&h4(e,t)&&(yt(e.prev,e,t.prev)||yt(e,t.prev,t))||df(e,t)&&yt(e.prev,e,e.next)>0&&yt(t.prev,t,t.next)>0)}function yt(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function df(e,t){return e.x===t.x&&e.y===t.y}function KS(e,t,r,n){var i=mh(yt(e,t,r)),s=mh(yt(e,t,n)),o=mh(yt(r,n,e)),a=mh(yt(r,n,t));return!!(i!==s&&o!==a||i===0&&ph(e,r,t)||s===0&&ph(e,n,t)||o===0&&ph(r,e,n)||a===0&&ph(r,t,n))}function ph(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function mh(e){return e>0?1:e<0?-1:0}function c4(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&KS(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Eu(e,t){return yt(e.prev,e,e.next)<0?yt(e,t,e.next)>=0&&yt(e,e.prev,t)>=0:yt(e,t,e.prev)<0||yt(e,e.next,t)<0}function h4(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function QS(e,t){var r=new Fg(e.i,e.x,e.y),n=new Fg(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function D_(e,t,r,n){var i=new Fg(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Tu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Fg(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}hf.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(Ug(e,0,s,r));if(i)for(var a=0,d=t.length;a<d;a++){var h=t[a]*r,p=a<d-1?t[a+1]*r:e.length;o-=Math.abs(Ug(e,h,p,r))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,m=n[a+1]*r,v=n[a+2]*r;c+=Math.abs((e[f]-e[v])*(e[m+1]-e[f+1])-(e[f]-e[m])*(e[v+1]-e[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Ug(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}hf.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var Hg={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,s=typeof Ie=="object"&&Ie;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,d=36,h=1,p=26,c=38,f=700,m=72,v=128,_="-",E=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=d-h,P=Math.floor,R=String.fromCharCode,M;function I(H){throw RangeError(w[H])}function N(H,U){for(var j=H.length,J=[];j--;)J[j]=U(H[j]);return J}function k(H,U){var j=H.split("@"),J="";j.length>1&&(J=j[0]+"@",H=j[1]),H=H.replace(y,".");var q=H.split("."),_e=N(q,U).join(".");return J+_e}function L(H){for(var U=[],j=0,J=H.length,q,_e;j<J;)q=H.charCodeAt(j++),q>=55296&&q<=56319&&j<J?(_e=H.charCodeAt(j++),(_e&64512)==56320?U.push(((q&1023)<<10)+(_e&1023)+65536):(U.push(q),j--)):U.push(q);return U}function W(H){return N(H,function(U){var j="";return U>65535&&(U-=65536,j+=R(U>>>10&1023|55296),U=56320|U&1023),j+=R(U),j}).join("")}function O(H){return H-48<10?H-22:H-65<26?H-65:H-97<26?H-97:d}function z(H,U){return H+22+75*(H<26)-((U!=0)<<5)}function Q(H,U,j){var J=0;for(H=j?P(H/f):H>>1,H+=P(H/U);H>T*p>>1;J+=d)H=P(H/T);return P(J+(T+1)*H/(H+c))}function X(H){var U=[],j=H.length,J,q=0,_e=v,pe=m,Ae,be,rt,Je,Le,Qe,Me,nt,Qt;for(Ae=H.lastIndexOf(_),Ae<0&&(Ae=0),be=0;be<Ae;++be)H.charCodeAt(be)>=128&&I("not-basic"),U.push(H.charCodeAt(be));for(rt=Ae>0?Ae+1:0;rt<j;){for(Je=q,Le=1,Qe=d;rt>=j&&I("invalid-input"),Me=O(H.charCodeAt(rt++)),(Me>=d||Me>P((a-q)/Le))&&I("overflow"),q+=Me*Le,nt=Qe<=pe?h:Qe>=pe+p?p:Qe-pe,!(Me<nt);Qe+=d)Qt=d-nt,Le>P(a/Qt)&&I("overflow"),Le*=Qt;J=U.length+1,pe=Q(q-Je,J,Je==0),P(q/J)>a-_e&&I("overflow"),_e+=P(q/J),q%=J,U.splice(q++,0,_e)}return W(U)}function Z(H){var U,j,J,q,_e,pe,Ae,be,rt,Je,Le,Qe=[],Me,nt,Qt,Br;for(H=L(H),Me=H.length,U=v,j=0,_e=m,pe=0;pe<Me;++pe)Le=H[pe],Le<128&&Qe.push(R(Le));for(J=q=Qe.length,q&&Qe.push(_);J<Me;){for(Ae=a,pe=0;pe<Me;++pe)Le=H[pe],Le>=U&&Le<Ae&&(Ae=Le);for(nt=J+1,Ae-U>P((a-j)/nt)&&I("overflow"),j+=(Ae-U)*nt,U=Ae,pe=0;pe<Me;++pe)if(Le=H[pe],Le<U&&++j>a&&I("overflow"),Le==U){for(be=j,rt=d;Je=rt<=_e?h:rt>=_e+p?p:rt-_e,!(be<Je);rt+=d)Br=be-Je,Qt=d-Je,Qe.push(R(z(Je+Br%Qt,0))),be=P(Br/Qt);Qe.push(R(z(be,0))),_e=Q(j,nt,J==q),j=0,++J}++j,++U}return Qe.join("")}function F(H){return k(H,function(U){return E.test(U)?X(U.slice(4).toLowerCase()):U})}function D(H){return k(H,function(U){return x.test(U)?"xn--"+Z(U):U})}if(o={version:"1.3.2",ucs2:{decode:L,encode:W},decode:X,encode:Z,toASCII:D,toUnicode:F},n&&i)if(e.exports==n)i.exports=o;else for(M in o)o.hasOwnProperty(M)&&(n[M]=o[M]);else r.punycode=o})(Ie)})(Hg,Hg.exports);var d4={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Cu={};function f4(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var p4=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var d=0;d<a;++d){var h=e[d].replace(s,"%20"),p=h.indexOf(r),c,f,m,v;p>=0?(c=h.substr(0,p),f=h.substr(p+1)):(c=h,f=""),m=decodeURIComponent(c),v=decodeURIComponent(f),f4(i,m)?Array.isArray(i[m])?i[m].push(v):i[m]=[i[m],v]:i[m]=v}return i},Il=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},m4=function(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var s=encodeURIComponent(Il(i))+r;return Array.isArray(e[i])?e[i].map(function(o){return s+encodeURIComponent(Il(o))}).join(t):s+encodeURIComponent(Il(e[i]))}).join(t):n?encodeURIComponent(Il(n))+r+encodeURIComponent(Il(e)):""};Cu.decode=Cu.parse=p4;Cu.encode=Cu.stringify=m4;var g4=Hg.exports,fi=d4,v4=ff,x4=P4,y4=k4;function Wn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _4=/^([a-z0-9.+-]+:)/i,b4=/:[0-9]*$/,w4=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,S4=["<",">",'"',"`"," ","\r",`
`,"	"],E4=["{","}","|","\\","^","`"].concat(S4),zg=["'"].concat(E4),L_=["%","/","?",";","#"].concat(zg),O_=["/","?","#"],T4=255,F_=/^[+a-z0-9A-Z_-]{0,63}$/,C4=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,A4={javascript:!0,"javascript:":!0},Gg={javascript:!0,"javascript:":!0},Ma={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Wg=Cu;function ff(e,t,r){if(e&&fi.isObject(e)&&e instanceof Wn)return e;var n=new Wn;return n.parse(e,t,r),n}Wn.prototype.parse=function(e,t,r){if(!fi.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(i);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var d=w4.exec(a);if(d)return this.path=a,this.href=a,this.pathname=d[1],d[2]?(this.search=d[2],t?this.query=Wg.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=_4.exec(a);if(h){h=h[0];var p=h.toLowerCase();this.protocol=p,a=a.substr(h.length)}if(r||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";c&&!(h&&Gg[h])&&(a=a.substr(2),this.slashes=!0)}if(!Gg[h]&&(c||h&&!Ma[h])){for(var f=-1,m=0;m<O_.length;m++){var v=a.indexOf(O_[m]);v!==-1&&(f===-1||v<f)&&(f=v)}var _,E;f===-1?E=a.lastIndexOf("@"):E=a.lastIndexOf("@",f),E!==-1&&(_=a.slice(0,E),a=a.slice(E+1),this.auth=decodeURIComponent(_)),f=-1;for(var m=0;m<L_.length;m++){var v=a.indexOf(L_[m]);v!==-1&&(f===-1||v<f)&&(f=v)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var y=this.hostname.split(/\./),m=0,w=y.length;m<w;m++){var T=y[m];if(!!T&&!T.match(F_)){for(var P="",R=0,M=T.length;R<M;R++)T.charCodeAt(R)>127?P+="x":P+=T[R];if(!P.match(F_)){var I=y.slice(0,m),N=y.slice(m+1),k=T.match(C4);k&&(I.push(k[1]),N.unshift(k[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=I.join(".");break}}}this.hostname.length>T4?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=g4.toASCII(this.hostname));var L=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+L,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!A4[p])for(var m=0,w=zg.length;m<w;m++){var O=zg[m];if(a.indexOf(O)!==-1){var z=encodeURIComponent(O);z===O&&(z=escape(O)),a=a.split(O).join(z)}}var Q=a.indexOf("#");Q!==-1&&(this.hash=a.substr(Q),a=a.slice(0,Q));var X=a.indexOf("?");if(X!==-1?(this.search=a.substr(X),this.query=a.substr(X+1),t&&(this.query=Wg.parse(this.query)),a=a.slice(0,X)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Ma[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",Z=this.search||"";this.path=L+Z}return this.href=this.format(),this};function k4(e){return fi.isString(e)&&(e=ff(e)),e instanceof Wn?e.format():Wn.prototype.format.call(e)}Wn.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&fi.isObject(this.query)&&Object.keys(this.query).length&&(s=Wg.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ma[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+i+r+o+n};function P4(e,t){return ff(e,!1,!0).resolve(t)}Wn.prototype.resolve=function(e){return this.resolveObject(ff(e,!1,!0)).format()};Wn.prototype.resolveObject=function(e){if(fi.isString(e)){var t=new Wn;t.parse(e,!1,!0),e=t}for(var r=new Wn,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var d=o[a];d!=="protocol"&&(r[d]=e[d])}return Ma[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Ma[e.protocol]){for(var h=Object.keys(e),p=0;p<h.length;p++){var c=h[p];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Gg[e.protocol]){for(var w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),r.pathname=w.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",m=r.search||"";r.path=f+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&r.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",E=_||v||r.host&&e.pathname,x=E,y=r.pathname&&r.pathname.split("/")||[],w=e.pathname&&e.pathname.split("/")||[],T=r.protocol&&!Ma[r.protocol];if(T&&(r.hostname="",r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(w[0]===""?w[0]=e.host:w.unshift(e.host)),e.host=null),E=E&&(w[0]===""||y[0]==="")),_)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,y=w;else if(w.length)y||(y=[]),y.pop(),y=y.concat(w),r.search=e.search,r.query=e.query;else if(!fi.isNullOrUndefined(e.search)){if(T){r.hostname=r.host=y.shift();var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())}return r.search=e.search,r.query=e.query,(!fi.isNull(r.pathname)||!fi.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var R=y.slice(-1)[0],M=(r.host||e.host||y.length>1)&&(R==="."||R==="..")||R==="",I=0,N=y.length;N>=0;N--)R=y[N],R==="."?y.splice(N,1):R===".."?(y.splice(N,1),I++):I&&(y.splice(N,1),I--);if(!E&&!x)for(;I--;I)y.unshift("..");E&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),M&&y.join("/").substr(-1)!=="/"&&y.push("");var k=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(T){r.hostname=r.host=k?"":y.length?y.shift():"";var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())}return E=E||r.host&&y.length,E&&!k&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),(!fi.isNull(r.pathname)||!fi.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Wn.prototype.parseHost=function(){var e=this.host,t=b4.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const I4={parse:v4,format:y4,resolve:x4};function An(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Rl(e){return e.split("?")[0].split("#")[0]}function R4(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function M4(e,t,r){return e.replace(new RegExp(R4(t),"g"),r)}function N4(e,t){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const d=r.lastIndexOf("/");if(d!==r.length-1){d===-1?(r="",n=0):(r=r.slice(0,d),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${e.slice(i+1,a)}`:r=e.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const fr={toPosix(e){return M4(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){An(e),e=this.toPosix(e);let t="";const r=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];t=s,e=e.slice(s.length)}return t},toAbsolute(e,t,r){if(this.isDataUrl(e))return e;const n=Rl(this.toPosix(t??ge.ADAPTER.getBaseUrl())),i=Rl(this.toPosix(r??this.rootname(n)));return An(e),e=this.toPosix(e),e.startsWith("/")?fr.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(e=this.toPosix(e),An(e),e.length===0)return".";let t="";const r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return e=N4(e,!1),e.length>0&&n&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return An(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const n=e[r];if(An(n),n.length>0)if(t===void 0)t=n;else{const i=e[r-1]??"";this.extname(i)?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(An(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const r=t===47;let n=-1,i=!0;const s=this.getProtocol(e),o=e;e=e.slice(s.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+e:s:r&&n===1?"//":s+e.slice(0,n)},rootname(e){An(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);r!==-1?t=e.slice(0,r):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){An(e),t&&An(t),e=Rl(this.toPosix(e));let r=0,n=-1,i=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=0;--s){const d=e.charCodeAt(s);if(d===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(d===t.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=e.length),e.slice(r,n)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":e.slice(r,n)},extname(e){An(e),e=Rl(this.toPosix(e));let t=-1,r=0,n=-1,i=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===r+1?"":e.slice(t,n)},parse(e){An(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Rl(this.toPosix(e));let r=e.charCodeAt(0);const n=this.isAbsolute(e);let i;t.root=this.rootname(e),n||this.hasProtocol(e)?i=1:i=0;let s=-1,o=0,a=-1,d=!0,h=e.length-1,p=0;for(;h>=i;--h){if(r=e.charCodeAt(h),r===47){if(!d){o=h+1;break}continue}a===-1&&(d=!1,a=h+1),r===46?s===-1?s=h:p!==1&&(p=1):s!==-1&&(p=-1)}return s===-1||a===-1||p===0||p===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},U_={};function He(e,t,r=3){if(U_[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(n))),U_[t]=!0}let Tp;function B4(){return typeof Tp>"u"&&(Tp=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:ge.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ge.ADAPTER.getWebGLRenderingContext())return!1;const r=ge.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const i=!!n?.getContextAttributes()?.stencil;if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Tp}var D4={grad:.9,turn:360,rad:360/(2*Math.PI)},Ri=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Vt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},pn=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},qS=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},H_=function(e){return{r:pn(e.r,0,255),g:pn(e.g,0,255),b:pn(e.b,0,255),a:pn(e.a)}},Cp=function(e){return{r:Vt(e.r),g:Vt(e.g),b:Vt(e.b),a:Vt(e.a,3)}},L4=/^#([0-9a-f]{3,8})$/i,gh=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ZS=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=Math.max(t,r,n),o=s-Math.min(t,r,n),a=o?s===t?(r-n)/o:s===r?2+(n-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},JS=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),o=n*(1-r),a=n*(1-(t-s)*r),d=n*(1-(1-t+s)*r),h=s%6;return{r:255*[n,a,o,o,d,n][h],g:255*[d,n,n,a,o,o][h],b:255*[o,o,d,n,n,a][h],a:i}},z_=function(e){return{h:qS(e.h),s:pn(e.s,0,100),l:pn(e.l,0,100),a:pn(e.a)}},G_=function(e){return{h:Vt(e.h),s:Vt(e.s),l:Vt(e.l),a:Vt(e.a,3)}},W_=function(e){return JS((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},iu=function(e){return{h:(t=ZS(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},O4=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,F4=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,U4=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,H4=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jg={string:[[function(e){var t=L4.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Vt(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Vt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=U4.exec(e)||H4.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:H_({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=O4.exec(e)||F4.exec(e);if(!t)return null;var r,n,i=z_({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(D4[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return W_(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=i===void 0?1:i;return Ri(t)&&Ri(r)&&Ri(n)?H_({r:Number(t),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,s=i===void 0?1:i;if(!Ri(t)||!Ri(r)||!Ri(n))return null;var o=z_({h:Number(t),s:Number(r),l:Number(n),a:Number(s)});return W_(o)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,s=i===void 0?1:i;if(!Ri(t)||!Ri(r)||!Ri(n))return null;var o=function(a){return{h:qS(a.h),s:pn(a.s,0,100),v:pn(a.v,0,100),a:pn(a.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(s)});return JS(o)},"hsv"]]},j_=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},z4=function(e){return typeof e=="string"?j_(e.trim(),jg.string):typeof e=="object"&&e!==null?j_(e,jg.object):[null,void 0]},Ap=function(e,t){var r=iu(e);return{h:r.h,s:pn(r.s+100*t,0,100),l:r.l,a:r.a}},kp=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},$_=function(e,t){var r=iu(e);return{h:r.h,s:r.s,l:pn(r.l+100*t,0,100),a:r.a}},$g=function(){function e(t){this.parsed=z4(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Vt(kp(this.rgba),2)},e.prototype.isDark=function(){return kp(this.rgba)<.5},e.prototype.isLight=function(){return kp(this.rgba)>=.5},e.prototype.toHex=function(){return t=Cp(this.rgba),r=t.r,n=t.g,i=t.b,o=(s=t.a)<1?gh(Vt(255*s)):"","#"+gh(r)+gh(n)+gh(i)+o;var t,r,n,i,s,o},e.prototype.toRgb=function(){return Cp(this.rgba)},e.prototype.toRgbString=function(){return t=Cp(this.rgba),r=t.r,n=t.g,i=t.b,(s=t.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var t,r,n,i,s},e.prototype.toHsl=function(){return G_(iu(this.rgba))},e.prototype.toHslString=function(){return t=G_(iu(this.rgba)),r=t.h,n=t.s,i=t.l,(s=t.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var t,r,n,i,s},e.prototype.toHsv=function(){return t=ZS(this.rgba),{h:Vt(t.h),s:Vt(t.s),v:Vt(t.v),a:Vt(t.a,3)};var t},e.prototype.invert=function(){return ui({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ui(Ap(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ui(Ap(this.rgba,-t))},e.prototype.grayscale=function(){return ui(Ap(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ui($_(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ui($_(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ui({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):Vt(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=iu(this.rgba);return typeof t=="number"?ui({h:t,s:r.s,l:r.l,a:r.a}):Vt(r.h)},e.prototype.isEqual=function(t){return this.toHex()===ui(t).toHex()},e}(),ui=function(e){return e instanceof $g?e:new $g(e)},V_=[],G4=function(e){e.forEach(function(t){V_.indexOf(t)<0&&(t($g,jg),V_.push(t))})};function W4(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,d,h=n[this.toHex()];if(h)return h;if(o?.closest){var p=this.toRgb(),c=1/0,f="black";if(!s.length)for(var m in r)s[m]=new e(r[m]).toRgb();for(var v in r){var _=(a=p,d=s[v],Math.pow(a.r-d.r,2)+Math.pow(a.g-d.g,2)+Math.pow(a.b-d.b,2));_<c&&(c=_,f=v)}return f}},t.string.push([function(o){var a=o.toLowerCase(),d=a==="transparent"?"#0000":r[a];return d?new e(d).toRgb():null},"name"])}G4([W4]);const Na=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Na)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,r,n]=this._components;return{r:e,g:t,b:r,a:n}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,n]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[t,r,n]=this._components;return e[0]=t,e[1]=r,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,n,i]=Na.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=n,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=this._int&255;return t&&(r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0),(e*255<<24)+(r<<16)+(n<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,n,i]=this._components;return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}normalize(e){let t,r,n,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const s=e;t=(s>>16&255)/255,r=(s>>8&255)/255,n=(s&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,n,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,n,i=255]=e,t/=255,r/=255,n/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Na.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const s=ui(e);s.isValid()&&({r:t,g:r,b:n,a:i}=s.rgba,t/=255,r/=255,n/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=n,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((n,i)=>{e[i]=Math.min(Math.max(n,t),r)}),e)}};let et=Na;et.shared=new Na;et.temp=new Na;et.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function j4(e){return He("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),et.shared.setValue(e).toHex()}function $4(e){return He("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),et.shared.setValue(e).toNumber()}function V4(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[we.NORMAL_NPM]=we.NORMAL,e[we.ADD_NPM]=we.ADD,e[we.SCREEN_NPM]=we.SCREEN,t[we.NORMAL]=we.NORMAL_NPM,t[we.ADD]=we.ADD_NPM,t[we.SCREEN]=we.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}const eE=V4();function tE(e,t){return eE[t?1:0][e]}function X4(e,t=null){const r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function rE(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function Bd(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function X_(e){return!(e&e-1)&&!!e}function Y_(e){let t=(e>65535?1:0)<<4;e>>>=t;let r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function Ba(e,t,r){const n=e.length;let i;if(t>=n||r===0)return;r=t+r>n?n-t:r;const s=n-r;for(i=t;i<s;++i)e[i]=e[i+r];e.length=s}function Ss(e){return e===0?0:e<0?-1:1}let Y4=0;function Io(){return++Y4}const nE=class{constructor(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Vg=nE;Vg.EMPTY=new nE(0,0,0,0);const K_={},ci=Object.create(null),ds=Object.create(null);class K4{constructor(t,r,n){this._canvas=ge.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||ge.RESOLUTION,this.resize(t,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,r){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Q_(e,t,r){for(let n=0,i=4*r*t;n<t;++n,i+=4)if(e[i+3]!==0)return!1;return!0}function q_(e,t,r,n,i){const s=4*t;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(e[a+3]!==0)return!1;return!0}function Q4(e){const{width:t,height:r}=e,n=e.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,t,r).data;let o=0,a=0,d=t-1,h=r-1;for(;a<r&&Q_(s,t,a);)++a;if(a===r)return Vg.EMPTY;for(;Q_(s,t,h);)--h;for(;q_(s,t,o,a,h);)++o;for(;q_(s,t,d,a,h);)--d;return++d,++h,new Vg(o,a,d,h)}function q4(e){const t=Q4(e),{width:r,height:n}=t;let i=null;if(!t.isEmpty()){const s=e.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(t.left,t.top,r,n)}return{width:r,height:n,data:i}}let vh;function Z4(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,vh||(vh=document.createElement("a")),vh.href=e;const r=I4.parse(vh.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function Ls(e,t=1){const r=ge.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var ve=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(ve||{});const Xg=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},Z_=(e,t)=>Xg(e).priority??t,Ce={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Xg).forEach(t=>{t.type.forEach(r=>this._removeHandlers[r]?.(t))}),this},add(...e){return e.map(Xg).forEach(t=>{t.type.forEach(r=>{const n=this._addHandlers,i=this._queue;n[r]?n[r](t):(i[r]=i[r]||[],i[r].push(t))})}),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const s=this._queue;return s[e]&&(s[e].forEach(o=>t(o)),delete s[e]),this},handleByMap(e,t){return this.handle(e,r=>{t[r.name]=r.ref},r=>{delete t[r.name]})},handleByList(e,t,r=-1){return this.handle(e,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((i,s)=>Z_(s,r)-Z_(i,r)))},n=>{const i=t.indexOf(n.ref);i!==-1&&t.splice(i,1)})}};class Yg{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const J4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function eP(e){let t="";for(let r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function tP(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=J4.replace(/%forloop%/gi,eP(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}const Pp=0,Ip=1,Rp=2,Mp=3,Np=4,Bp=5;class Qi{constructor(){this.data=0,this.blendMode=we.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Pp)}set blend(t){!!(this.data&1<<Pp)!==t&&(this.data^=1<<Pp)}get offsets(){return!!(this.data&1<<Ip)}set offsets(t){!!(this.data&1<<Ip)!==t&&(this.data^=1<<Ip)}get culling(){return!!(this.data&1<<Rp)}set culling(t){!!(this.data&1<<Rp)!==t&&(this.data^=1<<Rp)}get depthTest(){return!!(this.data&1<<Mp)}set depthTest(t){!!(this.data&1<<Mp)!==t&&(this.data^=1<<Mp)}get depthMask(){return!!(this.data&1<<Bp)}set depthMask(t){!!(this.data&1<<Bp)!==t&&(this.data^=1<<Bp)}get clockwiseFrontFace(){return!!(this.data&1<<Np)}set clockwiseFrontFace(t){!!(this.data&1<<Np)!==t&&(this.data^=1<<Np)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==we.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Qi;return t.depthTest=!1,t.blend=!0,t}}const Kg=[];function iE(e,t){if(!e)return null;let r="";if(typeof e=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(let n=Kg.length-1;n>=0;--n){const i=Kg[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class jn{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,r,n,i,s,o,a,d){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:p}=this;this._aliasCount++;for(let c=0,f=p.length;c<f;c++)p[c][h](t,r,n,i,s,o,a,d);return p===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(jn.prototype,{dispatch:{value:jn.prototype.emit},run:{value:jn.prototype.emit}});class Au{constructor(t=0,r=0){this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new jn("setRealSize"),this.onUpdate=new jn("update"),this.onError=new jn("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,r){return!1}}class zu extends Au{constructor(t,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=t}upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Xn.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const rP={scaleMode:Fi.NEAREST,format:ce.RGBA,alphaMode:Xn.NPM},ia=class extends Hu{constructor(e=null,t=null){super(),t=Object.assign({},ia.defaultOptions,t);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:d,format:h,type:p,target:c,resolution:f,resourceOptions:m}=t;e&&!(e instanceof Au)&&(e=iE(e,m),e.internal=!0),this.resolution=f||ge.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=d,this._scaleMode=s,this.format=h,this.type=p,this.target=c,this.alphaMode=r,this.uid=Io(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=X_(this.realWidth)&&X_(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ds[this.cacheId],delete ci[this.cacheId],this.cacheId=null),this.dispose(),ia.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=ge.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let i=null;if(n)i=e;else{if(!e._pixiId){const o=t?.pixiIdPrefix||"pixiid";e._pixiId=`${o}_${Io()}`}i=e._pixiId}let s=ds[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new ia(e,t),s.cacheId=i,ia.addToCache(s,i)),s}static fromBuffer(e,t,r,n){e=e||new Float32Array(t*r*4);const i=new zu(e,{width:t,height:r}),s=e instanceof Float32Array?Pe.FLOAT:Pe.UNSIGNED_BYTE;return new ia(i,Object.assign({},rP,{type:s},n))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),ds[t]&&ds[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),ds[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=ds[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete ds[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete ds[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let Be=ia;Be.defaultOptions={mipmap:_i.POW2,anisotropicLevel:0,scaleMode:Fi.LINEAR,wrapMode:Gi.CLAMP,alphaMode:Xn.UNPACK,target:Ra.TEXTURE_2D,format:ce.RGBA,type:Pe.UNSIGNED_BYTE};Be._globalBatch=0;class Qg{constructor(){this.texArray=null,this.blend=0,this.type=Fn.TRIANGLES,this.start=0,this.size=0,this.data=null}}let nP=0;class kt{constructor(t,r=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=nP++,this.disposeRunner=new jn("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?vi.ELEMENT_ARRAY_BUFFER:vi.ARRAY_BUFFER}get index(){return this.type===vi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new kt(t)}}class Dd{constructor(t,r=0,n=!1,i=Pe.FLOAT,s,o,a,d=1){this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=d}destroy(){this.buffer=null}static from(t,r,n,i,s){return new Dd(t,r,n,i,s)}}const iP={Float32Array,Uint32Array,Int32Array,Uint8Array};function sP(e,t){let r=0,n=0;const i={};for(let d=0;d<e.length;d++)n+=t[d],r+=e[d].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let d=0;d<e.length;d++){const h=t[d],p=e[d],c=rE(p);i[c]||(i[c]=new iP[c](s)),o=i[c];for(let f=0;f<p.length;f++){const m=(f/h|0)*n+a,v=f%h;o[m+v]=p[f]}a+=h}return new Float32Array(s)}const J_={5126:4,5123:2,5121:1};let oP=0;const aP={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Os{constructor(t=[],r={}){this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=oP++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new jn("disposeGeometry"),this.refCount=0}addAttribute(t,r,n=0,i=!1,s,o,a,d=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof kt||(r instanceof Array&&(r=new Float32Array(r)),r=new kt(r));const h=t.split("|");if(h.length>1){for(let c=0;c<h.length;c++)this.addAttribute(h[c],r,n,i,s);return this}let p=this.buffers.indexOf(r);return p===-1&&(this.buffers.push(r),p=this.buffers.length-1),this.attributes[t]=new Dd(p,n,i,s,o,a,d),this.instanced=this.instanced||d,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof kt||(t instanceof Array&&(t=new Uint16Array(t)),t=new kt(t)),t.type=vi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],r=[],n=new kt;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];t.push(o.data),r.push(s.size*J_[s.type]/4),s.buffer=0}for(n.data=sP(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const r=this.attributes[t];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Os;for(let r=0;r<this.buffers.length;r++)t.buffers[r]=new kt(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];t.attributes[r]=new Dd(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=vi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const r=new Os,n=[],i=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let d=0;d<o.buffers.length;d++)i[d]=i[d]||0,i[d]+=o.buffers[d].data.length,s[d]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new aP[rE(o.buffers[a].data)](i[a]),r.buffers[a]=new kt(n[a]);for(let a=0;a<t.length;a++){o=t[a];for(let d=0;d<o.buffers.length;d++)n[d].set(o.buffers[d].data,s[d]),s[d]+=o.buffers[d].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=vi.ELEMENT_ARRAY_BUFFER;let a=0,d=0,h=0,p=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){p=c;break}for(const c in o.attributes){const f=o.attributes[c];(f.buffer|0)===p&&(d+=f.size*J_[f.type]/4)}for(let c=0;c<t.length;c++){const f=t[c].indexBuffer.data;for(let m=0;m<f.length;m++)r.indexBuffer.data[m+h]+=a;a+=t[c].buffers[p].data.length/d,h+=f.length}}return r}}class sE extends Os{constructor(t=!1){super(),this._buffer=new kt(null,t,!1),this._indexBuffer=new kt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Pe.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Pe.FLOAT).addAttribute("aColor",this._buffer,4,!0,Pe.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Pe.FLOAT).addIndex(this._indexBuffer)}}const Ld=Math.PI*2,lP=180/Math.PI,uP=Math.PI/180;var tr=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(tr||{});class We{constructor(t=0,r=0){this.x=0,this.y=0,this.x=t,this.y=r}clone(){return new We(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,r=t){return this.x=t,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const xh=[new We,new We,new We,new We];class Ue{constructor(t=0,r=0,n=0,i=0){this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=tr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ue(0,0,0,0)}clone(){return new Ue(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(t,r){if(!r){const I=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=I)return!1;const k=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>k}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=xh[0].set(t.left,t.top),d=xh[1].set(t.left,t.bottom),h=xh[2].set(t.right,t.top),p=xh[3].set(t.right,t.bottom);if(h.x<=a.x||d.y<=a.y)return!1;const c=Math.sign(r.a*r.d-r.b*r.c);if(c===0||(r.apply(a,a),r.apply(d,d),r.apply(h,h),r.apply(p,p),Math.max(a.x,d.x,h.x,p.x)<=n||Math.min(a.x,d.x,h.x,p.x)>=i||Math.max(a.y,d.y,h.y,p.y)<=s||Math.min(a.y,d.y,h.y,p.y)>=o))return!1;const f=c*(d.y-a.y),m=c*(a.x-d.x),v=f*n+m*s,_=f*i+m*s,E=f*n+m*o,x=f*i+m*o;if(Math.max(v,_,E,x)<=f*a.x+m*a.y||Math.min(v,_,E,x)>=f*p.x+m*p.y)return!1;const y=c*(a.y-h.y),w=c*(h.x-a.x),T=y*n+w*s,P=y*i+w*s,R=y*n+w*o,M=y*i+w*o;return!(Math.max(T,P,R,M)<=y*a.x+w*a.y||Math.min(T,P,R,M)>=y*p.x+w*p.y)}pad(t=0,r=t){return this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this}fit(t){const r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(t=1,r=.001){const n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this}enlarge(t){const r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class y1{constructor(t=0,r=0,n=0){this.x=t,this.y=r,this.radius=n,this.type=tr.CIRC}clone(){return new y1(this.x,this.y,this.radius)}contains(t,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-t,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new Ue(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class _1{constructor(t=0,r=0,n=0,i=0){this.x=t,this.y=r,this.width=n,this.height=i,this.type=tr.ELIP}clone(){return new _1(this.x,this.y,this.width,this.height)}contains(t,r){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new Ue(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Da{constructor(...t){let r=Array.isArray(t[0])?t[0]:t;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=tr.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),r=new Da(t);return r.closeStroke=this.closeStroke,r}contains(t,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],d=this.points[s*2+1],h=this.points[o*2],p=this.points[o*2+1];d>r!=p>r&&t<(h-a)*((r-d)/(p-d))+a&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,r)=>`${t}, ${r}`,"")}]`}}class b1{constructor(t=0,r=0,n=0,i=0,s=20){this.x=t,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=tr.RREC}clone(){return new b1(this.x,this.y,this.width,this.height,this.radius)}contains(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let i=t-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=t-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=t-(this.x+n),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class pt{constructor(t=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,r,n,i,s,o){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(t,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,r){r=r||new We;const n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(t,r){r=r||new We;const n=1/(this.a*this.d+this.c*-this.b),i=t.x,s=t.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(t,r){return this.tx+=t,this.ty+=r,this}scale(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this}rotate(t){const r=Math.cos(t),n=Math.sin(t),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(t){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*s,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*s,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*s+this.ty,this}setTransform(t,r,n,i,s,o,a,d,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-d)*o,this.d=Math.cos(a-d)*o,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(t){const r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this}decompose(t){const r=this.a,n=this.b,i=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-i,s),d=Math.atan2(n,r),h=Math.abs(a+d);return h<1e-5||Math.abs(Ld-h)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=d),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+s*s),t.position.x=this.tx+(o.x*r+o.y*i),t.position.y=this.ty+(o.x*n+o.y*s),t}invert(){const t=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=t*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(t*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new pt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new pt}static get TEMP_MATRIX(){return new pt}}const lo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],co=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ho=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qg=[],oE=[],yh=Math.sign;function cP(){for(let e=0;e<16;e++){const t=[];qg.push(t);for(let r=0;r<16;r++){const n=yh(lo[e]*lo[r]+co[e]*uo[r]),i=yh(uo[e]*lo[r]+ho[e]*uo[r]),s=yh(lo[e]*co[r]+co[e]*ho[r]),o=yh(uo[e]*co[r]+ho[e]*ho[r]);for(let a=0;a<16;a++)if(lo[a]===n&&uo[a]===i&&co[a]===s&&ho[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new pt;t.set(lo[e],uo[e],co[e],ho[e],0,0),oE.push(t)}}cP();const vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>lo[e],uY:e=>uo[e],vX:e=>co[e],vY:e=>ho[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>qg[e][t],sub:(e,t)=>qg[e][vt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?vt.S:vt.N:Math.abs(t)*2<=Math.abs(e)?e>0?vt.E:vt.W:t>0?e>0?vt.SE:vt.SW:e>0?vt.NE:vt.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=oE[vt.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class Hi{constructor(t,r,n=0,i=0){this._x=n,this._y=i,this.cb=t,this.scope=r}clone(t=this.cb,r=this.scope){return new Hi(t,r,this._x,this._y)}set(t=0,r=t){return(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const aE=class{constructor(){this.worldTransform=new pt,this.localTransform=new pt,this.position=new Hi(this.onChange,this,0,0),this.scale=new Hi(this.onChange,this,1,1),this.pivot=new Hi(this.onChange,this,0,0),this.skew=new Hi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let pf=aE;pf.IDENTITY=new aE;var hP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,dP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function eb(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function Dp(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function lE(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Dp(2*t);case"bvec3":return Dp(3*t);case"bvec4":return Dp(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const La=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],fP={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},pP={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function mP(e,t){const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in e.uniforms){const i=t[n];if(!i){e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const s=e.uniforms[n];let o=!1;for(let a=0;a<La.length;a++)if(La[a].test(i,s)){r.push(La[a].code(n,s)),o=!0;break}if(!o){const d=(i.size===1&&!i.isArray?fP:pP)[i.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${d};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const uE={};let _h=uE;function gP(){if(_h===uE||_h?.isContextLost()){const e=ge.ADAPTER.createCanvas();let t;ge.PREFER_ENV>=No.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),_h=t}return _h}let bh;function vP(){if(!bh){bh=fn.MEDIUM;const e=gP();e&&e.getShaderPrecisionFormat&&(bh=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?fn.HIGH:fn.MEDIUM)}return bh}function tb(e,t){const r=e.getShaderSource(t).split(`
`).map((h,p)=>`${p}: ${h}`),n=e.getShaderInfoLog(t),i=n.split(`
`),s={},o=i.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),a=[""];o.forEach(h=>{r[h-1]=`%c${r[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const d=r.join(`
`);a[0]=d,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function xP(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||tb(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||tb(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const yP={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function cE(e){return yP[e]}let wh=null;const rb={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function hE(e,t){if(!wh){const r=Object.keys(rb);wh={};for(let n=0;n<r.length;++n){const i=r[n];wh[e[i]]=rb[i]}}return wh[t]}function nb(e,t,r){if(e.substring(0,9)!=="precision"){let n=t;return t===fn.HIGH&&r!==fn.HIGH&&(n=fn.MEDIUM),`precision ${n} float;
${e}`}else if(r!==fn.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let Ml;function _P(){if(typeof Ml=="boolean")return Ml;try{Ml=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ml=!1}return Ml}let bP=0;const Sh={},sa=class{constructor(e,t,r="pixi-shader",n={}){this.extra={},this.id=bP++,this.vertexSrc=e||sa.defaultVertexSrc,this.fragmentSrc=t||sa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Sh[r]?(Sh[r]++,r+=`-${Sh[r]}`):Sh[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=nb(this.vertexSrc,sa.defaultVertexPrecision,fn.HIGH),this.fragmentSrc=nb(this.fragmentSrc,sa.defaultFragmentPrecision,vP())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return dP}static get defaultFragmentSrc(){return hP}static from(e,t,r){const n=e+t;let i=K_[n];return i||(K_[n]=i=new sa(e,t,r)),i}};let Un=sa;Un.defaultVertexPrecision=fn.HIGH;Un.defaultFragmentPrecision=Ui.apple.device?fn.HIGH:fn.MEDIUM;let wP=0;class $n{constructor(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=wP++,this.static=!!r,this.ubo=!!n,t instanceof kt?(this.buffer=t,this.buffer.type=vi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new kt(new Float32Array(1)),this.buffer.type=vi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,r,n){if(!this.ubo)this.uniforms[t]=new $n(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,r,n){return new $n(t,r,n)}static uboFrom(t,r){return new $n(t,r??!0,!0)}}class xi{constructor(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof $n?this.uniformGroup=r:this.uniformGroup=new $n(r):this.uniformGroup=new $n({}),this.disposeRunner=new jn("disposeShader")}checkUniformExists(t,r){if(r.uniforms[t])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,r,n){const i=Un.from(t,r);return new xi(i,n)}}class SP{constructor(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let s=0;s<t;s++)n[s]=s;this.defaultGroupCache[t]=$n.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${t}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Un(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new pt,default:this.defaultGroupCache[t]};return new xi(this.programCache[t],r)}generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class Zg{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function EP(){return!Ui.apple.device}function TP(e){let t=!0;const r=ge.ADAPTER.getNavigator();if(Ui.tablet||Ui.phone){if(Ui.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(Ui.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?e:4}class mf{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var CP=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,AP=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Pn=class extends mf{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=sE,this.vertexSize=6,this.state=Qi.for2d(),this.size=Pn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??TP(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??EP(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return He("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return AP}static get defaultFragmentTemplate(){return CP}setShaderGenerator({vertex:e=Pn.defaultVertexSrc,fragment:t=Pn.defaultFragmentTemplate}={}){this.shaderGenerator=new SP(e,t)}contextChange(){const e=this.renderer.gl;ge.PREFER_ENV===No.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Pn.defaultMaxTextures),this.maxTextures=tP(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Pn,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new Qg);for(;t.length<n;)t.push(new Zg);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(e){!e._texture.valid||(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=Pn._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Be._globalBatch,a=0,d=r[0],h=0;n.copyBoundTextures(i,t);for(let p=0;p<this._bufferSize;++p){const c=e[p];e[p]=null,c._batchEnabled!==o&&(d.count>=t&&(n.boundArray(d,i,o,t),this.buildDrawCalls(d,h,p),h=p,d=r[++a],++o),c._batchEnabled=o,c.touched=s,d.elements[d.count++]=c)}d.count>0&&(n.boundArray(d,i,o,t),this.buildDrawCalls(d,h,this._bufferSize),++a,++o);for(let p=0;p<i.length;p++)i[p]=null;Be._globalBatch=o}buildDrawCalls(e,t,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=Pn._drawCallPool;let d=this._dcIndex,h=this._aIndex,p=this._iIndex,c=a[d];c.start=this._iIndex,c.texArray=e;for(let f=t;f<r;++f){const m=n[f],v=m._texture.baseTexture,_=eE[v.alphaMode?1:0][m.blendMode];n[f]=null,t<f&&c.blend!==_&&(c.size=p-c.start,t=f,c=a[++d],c.texArray=e,c.start=p),this.packInterleavedGeometry(m,i,s,h,p),h+=m.vertexData.length/2*o,p+=m.indices.length,c.blend=_}t<r&&(c.size=p-c.start,++d),this._dcIndex=d,this._aIndex=h,this._iIndex=p}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Pn.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,n=Pn._drawCallPool;let i=null;for(let s=0;s<e;s++){const{texArray:o,type:a,size:d,start:h,blend:p}=n[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=p,r.set(this.state),t.drawElements(a,d,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Pn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Bd(Math.ceil(e/8)),r=Y_(t),n=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Yg(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=Bd(Math.ceil(e/12)),r=Y_(t),n=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:s,float32View:o}=t,a=n/this.vertexSize,d=e.uvs,h=e.indices,p=e.vertexData,c=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),m=et.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let v=0;v<p.length;v+=2)o[n++]=p[v],o[n++]=p[v+1],o[n++]=d[v],o[n++]=d[v+1],s[n++]=m,o[n++]=c;for(let v=0;v<h.length;v++)r[i++]=a+h[v]}};let Ln=Pn;Ln.defaultBatchSize=4096;Ln.extension={name:"batch",type:ve.RendererPlugin};Ln._drawCallPool=[];Ln._textureArrayPool=[];Ce.add(Ln);var kP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,PP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Gl=class extends xi{constructor(e,t,r){const n=Un.from(e||Gl.defaultVertexSrc,t||Gl.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=Gl.defaultResolution,this.multisample=Gl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Qi}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return PP}static get defaultFragmentSrc(){return kP}};let rr=Gl;rr.defaultResolution=1;rr.defaultMultisample=Nt.NONE;class gf{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new et(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=t,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}gf.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};gf.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"background"};Ce.add(gf);class dE{constructor(t){this.renderer=t,this.emptyRenderer=new mf(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)}boundArray(t,r,n,i){const{elements:s,ids:o,count:a}=t;let d=0;for(let h=0;h<a;h++){const p=s[h],c=p._batchLocation;if(c>=0&&c<i&&r[c]===p){o[h]=c;continue}for(;d<i;){const f=r[d];if(f&&f._batchEnabled===n&&f._batchLocation===d){d++;continue}o[h]=d,p._batchLocation=d,r[d]=p;break}}}destroy(){this.renderer=null}}dE.extension={type:ve.RendererSystem,name:"batch"};Ce.add(dE);let ib=0;class vf{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ib++}init(t){if(t.context)this.initFromContext(t.context);else{const r=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ib++,this.renderer.runners.contextChange.emit(t);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const r=this.createContext(this.renderer.view,t);this.initFromContext(r)}createContext(t,r){let n;if(ge.PREFER_ENV>=No.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}vf.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};vf.extension={type:ve.RendererSystem,name:"context"};Ce.add(vf);class IP extends zu{upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Xn.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}}class Jg{constructor(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new jn("disposeFramebuffer"),this.multisample=Nt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,r){return this.colorTextures[t]=r||new Be(null,{scaleMode:Fi.NEAREST,resolution:1,mipmap:_i.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Be(new IP(null,{width:this.width,height:this.height}),{scaleMode:Fi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:_i.OFF,format:ce.DEPTH_COMPONENT,type:Pe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(t/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class fE extends Be{constructor(t={}){if(typeof t=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];t={width:r,height:n,scaleMode:i,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Nt.NONE),super(null,t),this.mipmap=_i.OFF,this.valid=!0,this._clear=new et([0,0,0,0]),this.framebuffer=new Jg(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fs extends Au{constructor(t){const r=t,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;super(n,i),this.source=t,this.noSubImage=!1}static crossOrigin(t,r,n){n===void 0&&!r.startsWith("data:")?t.crossOrigin=Z4(r):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,r,n,i){const s=t.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Xn.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class pE extends Fs{constructor(t,r){if(r=r||{},typeof t=="string"){const n=new Image;Fs.crossOrigin(n,t,r.crossorigin),n.src=t,t=n}super(t),!t.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??ge.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Xn.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class mE{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,r,n){const i=r.width,s=r.height;if(n){const o=t.width/2/i,a=t.height/2/s,d=t.x/i+o,h=t.y/s+a;n=vt.add(n,vt.NW),this.x0=d+o*vt.uX(n),this.y0=h+a*vt.uY(n),n=vt.add(n,2),this.x1=d+o*vt.uX(n),this.y1=h+a*vt.uY(n),n=vt.add(n,2),this.x2=d+o*vt.uX(n),this.y2=h+a*vt.uY(n),n=vt.add(n,2),this.x3=d+o*vt.uX(n),this.y3=h+a*vt.uY(n)}else this.x0=t.x/i,this.y0=t.y/s,this.x1=(t.x+t.width)/i,this.y1=t.y/s,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/s,this.x3=t.x/i,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const sb=new mE;function Eh(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class se extends Hu{constructor(t,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Ue(0,0,1,1)),t instanceof se&&(t=t.baseTexture),this.baseTexture=t,this._frame=r,this.trim=i,this.valid=!1,this._uvs=sb,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new We(o.x,o.y):new We(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=r:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:r}=this.baseTexture;r?.url&&ci[r.url]&&se.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,se.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new se(this.baseTexture,!this.noFrame&&t,r,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===sb&&(this._uvs=new mE),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,r={},n=ge.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let s=null;if(i)s=t;else if(t instanceof Be){if(!t.cacheId){const a=r?.pixiIdPrefix||"pixiid";t.cacheId=`${a}-${Io()}`,Be.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=r?.pixiIdPrefix||"pixiid";t._pixiId=`${a}_${Io()}`}s=t._pixiId}let o=ci[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof Be)?(r.resolution||(r.resolution=Ls(t)),o=new se(new Be(t,r)),o.baseTexture.cacheId=s,Be.addToCache(o.baseTexture,s),se.addToCache(o,s)):!o&&t instanceof Be&&(o=new se(t),se.addToCache(o,s)),o}static fromURL(t,r){const n=Object.assign({autoLoad:!1},r?.resourceOptions),i=se.from(t,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(t,r,n,i){return new se(Be.fromBuffer(t,r,n,i))}static fromLoader(t,r,n,i){const s=new Be(t,Object.assign({scaleMode:Be.defaultOptions.scaleMode,resolution:Ls(r)},i)),{resource:o}=s;o instanceof pE&&(o.url=r);const a=new se(s);return n||(n=r),Be.addToCache(a.baseTexture,n),se.addToCache(a,n),n!==r&&(Be.addToCache(a.baseTexture,r),se.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(d=>{a.baseTexture.once("loaded",()=>d(a))})}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),ci[r]&&ci[r]!==t&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),ci[r]=t)}static removeFromCache(t){if(typeof t=="string"){const r=ci[t];if(r){const n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete ci[t],r}}else if(t?.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)ci[t.textureCacheIds[r]]===t&&delete ci[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=t,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const d=o&&a?"and":"or",h=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,p=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${d} ${p}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return se._EMPTY||(se._EMPTY=new se(new Be),Eh(se._EMPTY),Eh(se._EMPTY.baseTexture)),se._EMPTY}static get WHITE(){if(!se._WHITE){const t=ge.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),se._WHITE=new se(Be.from(t)),Eh(se._WHITE),Eh(se._WHITE.baseTexture)}return se._WHITE}}class Bo extends se{constructor(t,r){super(t,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(t*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:r}=this;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))}static create(t){return new Bo(new fE(t))}}class gE{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,n=Nt.NONE){const i=new fE(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new Bo(i)}getOptimalTexture(t,r,n=1,i=Nt.NONE){let s;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Bd(t),r=Bd(r),s=((t&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(t,r,n){const i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||Nt.NONE);return i.filterFrame=t.filterFrame,i}returnTexture(t){const r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}gE.SCREEN_KEY=-1;class RP extends Os{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class vE extends Os{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new kt(this.vertices),this.uvBuffer=new kt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/t.width,this.uvs[3]=i,this.uvs[4]=n+r.width/t.width,this.uvs[5]=i+r.height/t.height,this.uvs[6]=n,this.uvs[7]=i+r.height/t.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class MP{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Nt.NONE,this.sourceFrame=new Ue,this.destinationFrame=new Ue,this.bindingSourceFrame=new Ue,this.bindingDestinationFrame=new Ue,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Th=[new We,new We,new We,new We],Lp=new pt;class xE{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new gE,this.statePool=[],this.quad=new RP,this.quadUv=new vE,this.tempRect=new Ue,this.activeState={},this.globalUniforms=new $n({outputFrame:new Ue,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new MP,o=this.renderer.renderTexture;let a=r[0].resolution,d=r[0].multisample,h=r[0].padding,p=r[0].autoFit,c=r[0].legacy??!0;for(let v=1;v<r.length;v++){const _=r[v];a=Math.min(a,_.resolution),d=Math.min(d,_.multisample),h=this.useMaxPadding?Math.max(h,_.padding):h+_.padding,p=p&&_.autoFit,c=c||(_.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=d,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h);const f=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Lp.copyFrom(n.projection.transform).invert(),f),p?(s.sourceFrame.fit(f),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(f)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,d),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const h=i.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const d=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,d.renderTexture,di.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let h=r.renderTexture,p=this.getOptimalFilterTexture(h.width,h.height,r.resolution);p.filterFrame=h.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&r.multisample>1&&(p=this.getOptimalFilterTexture(h.width,h.height,r.resolution),p.filterFrame=h.filterFrame),n[c].apply(this,h,p,di.CLEAR,r);const f=h;h=p,p=f}n[c].apply(this,h,d.renderTexture,di.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(p)}r.clear(),this.statePool.push(r)}bindAndClear(t,r=di.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===di.CLEAR||r===di.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,r,n,i){const s=this.renderer;s.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Fn.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Fn.TRIANGLE_STRIP))}calculateSpriteMatrix(t,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=t.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(pt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,r,n=1,i=Nt.NONE){return this.texturePool.getOptimalTexture(t,r,n,i)}getFilterTexture(t,r,n){if(typeof t=="number"){const s=t;t=r,r=s}t=t||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||Nt.NONE);return i.filterFrame=t.filterFrame,i}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,r){const n=Th[0],i=Th[1],s=Th[2],o=Th[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(s,s),t.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),d=Math.min(n.y,i.y,s.y,o.y),h=Math.max(n.x,i.x,s.x,o.x),p=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=d,r.width=h-a,r.height=p-d}roundFrame(t,r,n,i,s){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:d,d:h}=s;if((Math.abs(a)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}s=s?Lp.copyFrom(s):Lp.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,t),t.ceil(r),this.transformAABB(s.invert(),t)}}}xE.extension={type:ve.RendererSystem,name:"filter"};Ce.add(xE);class NP{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Nt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const BP=new Ue;class yE{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Jg(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ue,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ge.PREFER_ENV===No.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,r,n=0){const{gl:i}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=n),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){const o=r.width>>n,a=r.height>>n,d=o/r.width;this.setViewport(r.x*d,r.y*d,o,a)}else{const o=t.width>>n,a=t.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,r,n,i){const s=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=n,s.height=i,this.gl.viewport(t,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,r,n,i,s=Dg.COLOR|Dg.DEPTH){const{gl:o}=this;o.clearColor(t,r,n,i),o.clear(s)}initFramebuffer(t){const{gl:r}=this,n=new NP(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));const i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],d=a.parentTextureArray||a;this.renderer.texture.bind(d,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,r){const{gl:n}=this,i=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let d=0;d<o;d++){const h=s[d],p=h.parentTextureArray||h;this.renderer.texture.bind(p,0),d===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,p._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+d,h.target,p._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+d))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,r)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:r}=this;let n=Nt.NONE;if(t<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=Nt.NONE),n}blit(t,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const d=i.glFramebuffers[a];if(!d)return;if(!t){if(!d.msaaBuffer)return;const p=i.colorTextures[0];if(!p)return;d.blitFramebuffer||(d.blitFramebuffer=new Jg(i.width,i.height),d.blitFramebuffer.addColorTexture(0,p)),t=d.blitFramebuffer,t.colorTextures[0]!==p&&(t.colorTextures[0]=p,t.dirtyId++,t.dirtyFormat++),(t.width!==i.width||t.height!==i.height)&&(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}r||(r=BP,r.width=i.width,r.height=i.height),n||(n=r);const h=r.width===n.width&&r.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,d.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,r){const n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(t){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)}forceStencil(){const t=this.current;if(!t)return;const r=t.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;t.stencil=!0;const n=t.width,i=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),r.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ue}destroy(){this.renderer=null}}yE.extension={type:ve.RendererSystem,name:"framebuffer"};Ce.add(yE);const Op={5126:4,5123:2,5121:1};class _E{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;ge.PREFER_ENV===No.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=i=>n.bindVertexArrayOES(i),t.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),t.drawElementsInstanced=(i,s,o,a,d)=>n.drawElementsInstancedANGLE(i,s,o,a,d),t.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(t,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(t,r,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const i=t.buffers[n];r.update(i)}}checkCompatibility(t,r){const n=t.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,r){const n=t.attributes,i=r.attributeData,s=["g",t.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(t,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);const d=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let p=h[d];if(p)return h[a.id]=p,p;const c=t.buffers,f=t.attributes,m={},v={};for(const _ in c)m[_]=0,v[_]=0;for(const _ in f)!f[_].size&&a.attributeData[_]?f[_].size=a.attributeData[_].size:f[_].size||console.warn(`PIXI Geometry attribute '${_}' size cannot be determined (likely the bound shader does not have the attribute)`),m[f[_].buffer]+=f[_].size*Op[f[_].type];for(const _ in f){const E=f[_],x=E.size;E.stride===void 0&&(m[E.buffer]===x*Op[E.type]?E.stride=0:E.stride=m[E.buffer]),E.start===void 0&&(E.start=v[E.buffer],v[E.buffer]+=x*Op[E.type])}p=i.createVertexArray(),i.bindVertexArray(p);for(let _=0;_<c.length;_++){const E=c[_];o.bind(E),n&&E._glBuffers[s].refCount++}return this.activateVao(t,a),h[a.id]=p,h[d]=p,i.bindVertexArray(null),o.unbind(vi.ARRAY_BUFFER),p}disposeGeometry(t,r){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=t.buffers,o=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(let a=0;a<s.length;a++){const d=s[a]._glBuffers[this.CONTEXT_UID];d&&(d.refCount--,d.refCount===0&&!r&&o.dispose(s[a],r))}if(!r){for(const a in n)if(a[0]==="g"){const d=n[a];this._activeVao===d&&this.unbind(),i.deleteVertexArray(d)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)}activateVao(t,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let d=null;for(const h in a){const p=a[h],c=o[p.buffer],f=c._glBuffers[i];if(r.attributeData[h]){d!==f&&(s.bind(c),d=f);const m=r.attributeData[h].location;if(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,p.size,p.type||n.FLOAT,p.normalized,p.stride,p.start),p.instance)if(this.hasInstance)n.vertexAttribDivisor(m,p.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,d=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,r||o.indexBuffer.data.length,d,(n||0)*a,i||1):s.drawElements(t,r||o.indexBuffer.data.length,d,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,r||o.getSize(),i||1):s.drawArrays(t,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}_E.extension={type:ve.RendererSystem,name:"geometry"};Ce.add(_E);const ob=new pt;class w1{constructor(t,r){this._texture=t,this.mapCoord=new pt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,r){r===void 0&&(r=t);const n=this.mapCoord;for(let i=0;i<t.length;i+=2){const s=t[i],o=t[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(t){const r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(ob.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(ob));const o=r.baseTexture,a=this.uClampFrame,d=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(r._frame.x+d+h)/o.width,a[1]=(r._frame.y+d+h)/o.height,a[2]=(r._frame.x+r._frame.width-d+h)/o.width,a[3]=(r._frame.y+r._frame.height-d+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var DP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,LP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class OP extends rr{constructor(t,r,n){let i=null;typeof t!="string"&&r===void 0&&n===void 0&&(i=t,t=void 0,r=void 0,n=void 0),super(t||LP,r||DP,n),this.maskSprite=i,this.maskMatrix=new pt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,r,n,i){const s=this._maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new w1(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,r,n,i))}}class FP{constructor(t=null){this.type=Ot.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=rr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ot.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class bE{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new FP;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Ot.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ot.SCISSOR:this.renderer.scissor.push(n);break;case Ot.STENCIL:this.renderer.stencil.push(n);break;case Ot.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Ot.COLOR:this.pushColorMask(n);break}n.type===Ot.SPRITE&&this.maskStack.push(n)}pop(t){const r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Ot.SCISSOR:this.renderer.scissor.pop(r);break;case Ot.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Ot.SPRITE:this.popSpriteMask(r);break;case Ot.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Ot.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const r=t.maskObject;r?r.isSprite?t.type=Ot.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Ot.SCISSOR:t.type=Ot.STENCIL:t.type=Ot.COLOR}pushSpriteMask(t){const{maskObject:r}=t,n=t._target;let i=t._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new OP]));const s=this.renderer,o=s.renderTexture;let a,d;if(o.current){const p=o.current;a=t.resolution||p.resolution,d=t.multisample??p.multisample}else a=t.resolution||s.resolution,d=t.multisample??s.multisample;i[0].resolution=a,i[0].multisample=d,i[0].maskSprite=r;const h=n.filterArea;n.filterArea=r.getBounds(!0),s.filter.push(n,i),n.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const r=t._colorMask,n=t._colorMask=r&t.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const r=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}bE.extension={type:ve.RendererSystem,name:"mask"};Ce.add(bE);class wE{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=t;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const ab=new pt,lb=[],nd=class extends wE{constructor(e){super(e),this.glConst=ge.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,lb.pop()??new Ue);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||nd.isMatrixRotated(t.worldTransform)||nd.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,n,i){nd.isMatrixRotated(i)||(i=i?ab.copyFrom(i):ab.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&lb.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let SE=nd;SE.extension={type:ve.RendererSystem,name:"scissor"};Ce.add(SE);class EE extends wE{constructor(t){super(t),this.glConst=ge.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const r=t.maskObject,{gl:n}=this.renderer,i=t._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(t._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}EE.extension={type:ve.RendererSystem,name:"stencil"};Ce.add(EE);class TE{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const r in t)this.plugins[r]=new t[r](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}TE.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"_plugin"};Ce.add(TE);class CE{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new pt,this.transform=null}update(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(t){}destroy(){this.renderer=null}}CE.extension={type:ve.RendererSystem,name:"projection"};Ce.add(CE);const UP=new pf;class AE{constructor(t){this.renderer=t,this._tempMatrix=new pt}generateTexture(t,r){const{region:n,...i}=r||{},s=n||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Bo.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=UP,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}AE.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"textureGenerator"};Ce.add(AE);const ro=new Ue,Nl=new Ue;class kE{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ue,this.destinationFrame=new Ue,this.viewportFrame=new Ue}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,r,n){const i=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,r||(ro.width=t.frame.width,ro.height=t.frame.height,r=ro),n||(Nl.x=t.frame.x,Nl.y=t.frame.y,Nl.width=r.width,Nl.height=r.height,n=Nl),o=s.framebuffer):(a=i.resolution,r||(ro.width=i._view.screen.width,ro.height=i._view.screen.height,r=ro),n||(n=ro,n.width=r.width,n.height=r.height));const d=this.viewportFrame;d.x=n.x*a,d.y=n.y*a,d.width=n.width*a,d.height=n.height*a,t||(d.y=i.view.height-(d.y+d.height)),d.ceil(),this.renderer.framebuffer.bind(o,d),this.renderer.projection.update(n,r,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(t,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=et.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:d,y:h,width:p,height:c}=this.viewportFrame;d=Math.round(d),h=Math.round(h),p=Math.round(p),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(d,h,p,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}kE.extension={type:ve.RendererSystem,name:"renderTexture"};Ce.add(kE);class HP{constructor(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function zP(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=t.getActiveAttrib(e,i);if(s.name.startsWith("gl_"))continue;const o=hE(t,s.type),a={type:o,name:s.name,size:cE(o),location:t.getAttribLocation(e,s.name)};r[s.name]=a}return r}function GP(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=t.getActiveUniform(e,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),d=hE(t,s.type);r[o]={name:o,index:i,type:d,size:s.size,isArray:a,value:lE(d,s.size)}}return r}function WP(e,t){const r=eb(e,e.VERTEX_SHADER,t.vertexSrc),n=eb(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const s=t.extra?.transformFeedbackVaryings;if(s&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||xP(e,i,r,n),t.attributeData=zP(i,e),t.uniformData=GP(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const d=Object.keys(t.attributeData);d.sort((h,p)=>h>p?1:-1);for(let h=0;h<d.length;h++)t.attributeData[d[h]].location=h,e.bindAttribLocation(i,h,d[h]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const o={};for(const d in t.uniformData){const h=t.uniformData[d];o[d]={location:e.getUniformLocation(i,d),value:lE(h.type,h.size)}}return new HP(i,o)}function jP(e,t,r,n,i){r.buffer.update(i)}const $P={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},PE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function VP(e){const t=e.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<t.length;s++){const o=t[s];if(r=PE[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function XP(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort((n,i)=>n.index-i.index),r}function YP(e,t){if(!e.autoManage)return{size:0,syncFunc:jP};const r=XP(e.uniforms,t),{uboElements:n,size:i}=VP(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],d=e.uniforms[a.data.name],h=a.data.name;let p=!1;for(let c=0;c<La.length;c++){const f=La[c];if(f.codeUbo&&f.test(a.data,d)){s.push(`offset = ${a.offset/4};`,La[c].codeUbo(a.data.name,d)),p=!0;break}}if(!p)if(a.data.size>1){const c=cE(a.data.type),f=Math.max(PE[a.data.type]/16,1),m=c/f,v=(4-m%4)%4;s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${m}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const c=$P[a.data.type];s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let KP=0;const Ch={textureCount:0,uboCount:0};class IE{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=KP++}systemCheck(){if(!_P())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Ch.textureCount=0,Ch.uboCount=0,this.syncUniformGroup(t.uniformGroup,Ch)),i}setUniforms(t){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,r){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))}syncUniforms(t,r,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(r.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=mP(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,r){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,Ch,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(t,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=YP(t,this.shader.program.uniformData)),t.autoManage){const d=new Float32Array(a.size/4);t.buffer.update(d)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]}getSignature(t,r,n){const i=t.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const r=this.gl,n=t.program,i=WP(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}IE.extension={type:ve.RendererSystem,name:"shader"};Ce.add(IE);class xf{constructor(t){this.renderer=t}run(t){const{renderer:r}=this;r.runners.init.emit(r.options),t.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}xf.defaultOptions={hello:!1};xf.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"startup"};Ce.add(xf);function QP(e,t=[]){return t[we.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.ADD]=[e.ONE,e.ONE],t[we.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.NONE]=[0,0],t[we.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[we.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[we.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[we.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[we.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[we.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[we.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[we.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[we.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[we.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[we.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const qP=0,ZP=1,JP=2,e3=3,t3=4,r3=5,ev=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=we.NONE,this._blendEq=!1,this.map=[],this.map[qP]=this.setBlend,this.map[ZP]=this.setOffset,this.map[JP]=this.setCullFace,this.map[e3]=this.setDepthTest,this.map[t3]=this.setFrontFace,this.map[r3]=this.setDepthMask,this.checks=[],this.defaultState=new Qi,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=QP(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(ev.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(ev.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let RE=ev;RE.extension={type:ve.RendererSystem,name:"state"};Ce.add(RE);class n3 extends Hu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const r=(t.priority??[]).filter(i=>t.systems[i]),n=[...r,...Object.keys(t.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(t.systems[i],i)}addRunners(...t){t.forEach(r=>{this.runners[r]=new jn(r)})}addSystem(t,r){const n=new t(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(t,r){const n=Object.keys(this._systemsHash);t.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[t.name](r[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const id=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=id.defaultMaxIdle,this.checkCountMax=id.defaultCheckCountMax,this.mode=id.defaultMode}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==v1.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let n=0;for(let i=0;i<t.length;i++)t[i]!==null&&(t[n++]=t[i]);t.length=n}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};let On=id;On.defaultMode=v1.AUTO;On.defaultMaxIdle=60*60;On.defaultCheckCountMax=60*10;On.extension={type:ve.RendererSystem,name:"textureGC"};Ce.add(On);class Fp{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Pe.UNSIGNED_BYTE,this.internalFormat=ce.RGBA,this.samplerType=0}}function i3(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[Pe.UNSIGNED_BYTE]:{[ce.RGBA]:e.RGBA8,[ce.RGB]:e.RGB8,[ce.RG]:e.RG8,[ce.RED]:e.R8,[ce.RGBA_INTEGER]:e.RGBA8UI,[ce.RGB_INTEGER]:e.RGB8UI,[ce.RG_INTEGER]:e.RG8UI,[ce.RED_INTEGER]:e.R8UI,[ce.ALPHA]:e.ALPHA,[ce.LUMINANCE]:e.LUMINANCE,[ce.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Pe.BYTE]:{[ce.RGBA]:e.RGBA8_SNORM,[ce.RGB]:e.RGB8_SNORM,[ce.RG]:e.RG8_SNORM,[ce.RED]:e.R8_SNORM,[ce.RGBA_INTEGER]:e.RGBA8I,[ce.RGB_INTEGER]:e.RGB8I,[ce.RG_INTEGER]:e.RG8I,[ce.RED_INTEGER]:e.R8I},[Pe.UNSIGNED_SHORT]:{[ce.RGBA_INTEGER]:e.RGBA16UI,[ce.RGB_INTEGER]:e.RGB16UI,[ce.RG_INTEGER]:e.RG16UI,[ce.RED_INTEGER]:e.R16UI,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Pe.SHORT]:{[ce.RGBA_INTEGER]:e.RGBA16I,[ce.RGB_INTEGER]:e.RGB16I,[ce.RG_INTEGER]:e.RG16I,[ce.RED_INTEGER]:e.R16I},[Pe.UNSIGNED_INT]:{[ce.RGBA_INTEGER]:e.RGBA32UI,[ce.RGB_INTEGER]:e.RGB32UI,[ce.RG_INTEGER]:e.RG32UI,[ce.RED_INTEGER]:e.R32UI,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Pe.INT]:{[ce.RGBA_INTEGER]:e.RGBA32I,[ce.RGB_INTEGER]:e.RGB32I,[ce.RG_INTEGER]:e.RG32I,[ce.RED_INTEGER]:e.R32I},[Pe.FLOAT]:{[ce.RGBA]:e.RGBA32F,[ce.RGB]:e.RGB32F,[ce.RG]:e.RG32F,[ce.RED]:e.R32F,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Pe.HALF_FLOAT]:{[ce.RGBA]:e.RGBA16F,[ce.RGB]:e.RGB16F,[ce.RG]:e.RG16F,[ce.RED]:e.R16F},[Pe.UNSIGNED_SHORT_5_6_5]:{[ce.RGB]:e.RGB565},[Pe.UNSIGNED_SHORT_4_4_4_4]:{[ce.RGBA]:e.RGBA4},[Pe.UNSIGNED_SHORT_5_5_5_1]:{[ce.RGBA]:e.RGB5_A1},[Pe.UNSIGNED_INT_2_10_10_10_REV]:{[ce.RGBA]:e.RGB10_A2,[ce.RGBA_INTEGER]:e.RGB10_A2UI},[Pe.UNSIGNED_INT_10F_11F_11F_REV]:{[ce.RGB]:e.R11F_G11F_B10F},[Pe.UNSIGNED_INT_5_9_9_9_REV]:{[ce.RGB]:e.RGB9_E5},[Pe.UNSIGNED_INT_24_8]:{[ce.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Pe.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ce.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[Pe.UNSIGNED_BYTE]:{[ce.RGBA]:e.RGBA,[ce.RGB]:e.RGB,[ce.ALPHA]:e.ALPHA,[ce.LUMINANCE]:e.LUMINANCE,[ce.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Pe.UNSIGNED_SHORT_5_6_5]:{[ce.RGB]:e.RGB},[Pe.UNSIGNED_SHORT_4_4_4_4]:{[ce.RGBA]:e.RGBA},[Pe.UNSIGNED_SHORT_5_5_5_1]:{[ce.RGBA]:e.RGBA}},t}class ME{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Be,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=i3(t);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Fp(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Fp(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(t,r=0){const{gl:n}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===t&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(t.target,this.emptyTextures[t.target].texture),n[i]=null)}ensureSamplerType(t){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(!!n)for(let s=t-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==Lg.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const r=new Fp(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r}initTextureType(t,r){r.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,this.webGLVersion===2&&t.type===Pe.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type}updateTexture(t){const r=t._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(t,r),t.resource?.upload(n,t,r))r.samplerType!==Lg.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,s=t.realHeight,o=n.gl;(r.width!==i||r.height!==s||r.dirtyId<0)&&(r.width=i,r.height=s,o.texImage2D(t.target,0,r.internalFormat,i,s,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}destroyTexture(t,r){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(t);i!==-1&&Ba(this.managedTextures,i,1)}}updateTextureStyle(t){const r=t._glTextures[this.CONTEXT_UID];!r||((t.mipmap===_i.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=Gi.CLAMP:r.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)}setStyle(t,r){const n=this.gl;if(r.mipmap&&t.mipmap!==_i.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Fi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Fi.LINEAR){const s=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Fi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Fi.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}ME.extension={type:ve.RendererSystem,name:"texture"};Ce.add(ME);class NE{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();t._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];!a||(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,r){const n=t._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const d=a._glBuffers[this.CONTEXT_UID];d&&(d.refCount--,d.refCount===0&&!r&&s.dispose(a,r))}!n||(r||i.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}NE.extension={type:ve.RendererSystem,name:"transformFeedback"};Ce.add(NE);class yf{constructor(t){this.renderer=t}init(t){this.screen=new Ue(0,0,t.width,t.height),this.element=t.view||ge.ADAPTER.createCanvas(),this.resolution=t.resolution||ge.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,r){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}yf.defaultOptions={width:800,height:600,resolution:ge.RESOLUTION,autoDensity:!1};yf.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"_view"};Ce.add(yf);ge.PREFER_ENV=No.WEBGL2;ge.STRICT_TEXTURE_CACHE=!1;ge.RENDER_OPTIONS={...vf.defaultOptions,...gf.defaultOptions,...yf.defaultOptions,...xf.defaultOptions};Object.defineProperties(ge,{WRAP_MODE:{get(){return Be.defaultOptions.wrapMode},set(e){He("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Be.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return Be.defaultOptions.scaleMode},set(e){He("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Be.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return Be.defaultOptions.mipmap},set(e){He("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Be.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return Be.defaultOptions.anisotropicLevel},set(e){He("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Be.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return He("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),rr.defaultResolution},set(e){rr.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return He("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),rr.defaultMultisample},set(e){rr.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Ln.defaultMaxTextures},set(e){He("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ln.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Ln.defaultBatchSize},set(e){He("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ln.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ln.canUploadSameBuffer},set(e){He("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ln.canUploadSameBuffer=e}},GC_MODE:{get(){return On.defaultMode},set(e){He("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),On.defaultMode=e}},GC_MAX_IDLE:{get(){return On.defaultMaxIdle},set(e){He("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),On.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return On.defaultCheckCountMax},set(e){He("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),On.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return Un.defaultVertexPrecision},set(e){He("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Un.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return Un.defaultFragmentPrecision},set(e){He("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Un.defaultFragmentPrecision=e}}});var Us=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Us||{});class Up{constructor(t,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}match(t,r=null){return this.fn===t&&this.context===r}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=t?null:r,this.previous=null,r}}const Hr=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Up(null,null,1/0),this.deltaMS=1/Hr.targetFPMS,this.elapsedMS=1/Hr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Us.NORMAL){return this._addListener(new Up(e,t,r))}addOnce(e,t,r=Us.NORMAL){return this._addListener(new Up(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Hr.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Hr.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Hr._shared){const e=Hr._shared=new Hr;e.autoStart=!0,e._protected=!0}return Hr._shared}static get system(){if(!Hr._system){const e=Hr._system=new Hr;e.autoStart=!0,e._protected=!0}return Hr._system}};let It=Hr;It.targetFPMS=.06;Object.defineProperties(ge,{TARGET_FPMS:{get(){return It.targetFPMS},set(e){He("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),It.targetFPMS=e}}});class BE{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Us.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?It.shared:new It,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}BE.extension=ve.Application;Ce.add(BE);const DE=[];Ce.handleByList(ve.Renderer,DE);function s3(e){for(const t of DE)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var o3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,a3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const l3=o3,LE=a3;class OE{constructor(t){this.renderer=t}contextChange(t){let r;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}r>=Nt.HIGH?this.multisample=Nt.HIGH:r>=Nt.MEDIUM?this.multisample=Nt.MEDIUM:r>=Nt.LOW?this.multisample=Nt.LOW:this.multisample=Nt.NONE}destroy(){}}OE.extension={type:ve.RendererSystem,name:"_multisample"};Ce.add(OE);class u3{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class FE{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);r.bindBuffer(t.type,i.buffer)}unbind(t){const{gl:r}=this;r.bindBuffer(t,null)}bindBufferBase(t,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==t){const s=t._glBuffers[i]||this.createGLBuffer(t);this.boundBufferBases[r]=t,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(t,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=t._glBuffers[s]||this.createGLBuffer(t);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==i.updateID)if(i.updateID=t._updateID,r.bindBuffer(t.type,i.buffer),i.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{const s=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,s)}}dispose(t,r){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)}createGLBuffer(t){const{CONTEXT_UID:r,gl:n}=this;return t._glBuffers[r]=new u3(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]}}FE.extension={type:ve.RendererSystem,name:"buffer"};Ce.add(FE);class UE{constructor(t){this.renderer=t}render(t,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=t),!a){const d=t.enableTempParent();t.updateTransform(),t.disableTempParent(d)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}UE.extension={type:ve.RendererSystem,name:"objectRenderer"};Ce.add(UE);const tv=class extends n3{constructor(e){super(),this.type=VS.WEBGL,e=Object.assign({},ge.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new $n({projectionMatrix:new pt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:tv.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(He("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=tv.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:B4()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return He("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return He("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return He("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return He("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){He("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return He("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){He("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return He("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Qa=tv;Qa.extension={type:ve.Renderer,priority:1};Qa.__plugins={};Qa.__systems={};Ce.handleByMap(ve.RendererPlugin,Qa.__plugins);Ce.handleByMap(ve.RendererSystem,Qa.__systems);Ce.add(Qa);class HE extends Au{constructor(t,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new Be;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,r){for(let n=0;n<this.length;n++)!t[n]||(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Au?this.addResourceAt(t[n],n):this.addResourceAt(iE(t[n],r),n))}dispose(){for(let t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)}unbind(t){super.unbind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)}load(){if(this._load)return this._load;const r=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(r).then(()=>{const{realWidth:n,realHeight:i}=this.items[0];return this.resize(n,i),Promise.resolve(this)}),this._load}}class c3 extends HE{constructor(t,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Ra.TEXTURE_2D_ARRAY}upload(t,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=t;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let d=0;d<i;d++){const h=o[d];s[d]<h.dirtyId&&(s[d]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,d,h.resource.width,h.resource.height,1,r.format,n.type,h.resource.source))}return!0}}class h3 extends Fs{constructor(t){super(t)}static test(t){const{OffscreenCanvas:r}=globalThis;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Wl=class extends HE{constructor(e,t){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=t||{};if(e&&e.length!==Wl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:n});for(let o=0;o<Wl.SIDES;o++)this.items[o].target=Ra.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,e&&this.initFromArray(e,t),i!==!1&&this.load()}bind(e){super.bind(e),e.target=Ra.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Ra.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const n=this.itemDirtyIds;for(let i=0;i<Wl.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,r),n[i]=s.dirtyId):n[i]<-1&&(e.gl.texImage2D(s.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),n[i]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Wl.SIDES}};let zE=Wl;zE.SIDES=6;class wa extends Fs{constructor(t,r){r=r||{};let n,i;typeof t=="string"?(n=wa.EMPTY,i=t):(n=t,i=null),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,r)=>{if(this.url===null){t(this);return}try{const n=await ge.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Xn.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(t,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(t,r,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return wa._EMPTY=wa._EMPTY??ge.ADAPTER.createCanvas(0,0),wa._EMPTY}}const sd=class extends Fs{constructor(e,t){t=t||{},super(ge.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},sd.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Fs.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{!this._resolve||(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${Io()}`,s.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(e){const t=sd.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&sd.SVG_XML.test(e)}};let ku=sd;ku.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;ku.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const rv=class extends Fs{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];Fs.crossOrigin(r,n,t.crossorigin);for(let i=0;i<e.length;++i){const s=document.createElement("source");let{src:o,mime:a}=e[i];o=o||e[i];const d=o.split("?").shift().toLowerCase(),h=d.slice(d.lastIndexOf(".")+1);a=a||rv.MIME_TYPES[h]||`video/${h}`,s.src=o,s.type=a,r.appendChild(s)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=It.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(It.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(It.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(It.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(It.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(It.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||rv.TYPES.includes(t)}};let S1=rv;S1.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];S1.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Kg.push(wa,pE,h3,S1,ku,zu,zE,c3);class Od{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ue.EMPTY:(t=t||new Ue(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,r){const{a:n,b:i,c:s,d:o,tx:a,ty:d}=t,h=n*r.x+s*r.y+a,p=i*r.x+o*r.y+d;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,p),this.maxY=Math.max(this.maxY,p)}addQuad(t){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=t[0],a=t[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[2],a=t[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[4],a=t[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[6],a=t[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(t,r,n,i,s){this.addFrameMatrix(t.worldTransform,r,n,i,s)}addFrameMatrix(t,r,n,i,s){const o=t.a,a=t.b,d=t.c,h=t.d,p=t.tx,c=t.ty;let f=this.minX,m=this.minY,v=this.maxX,_=this.maxY,E=o*r+d*n+p,x=a*r+h*n+c;f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,_=x>_?x:_,E=o*i+d*n+p,x=a*i+h*n+c,f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,_=x>_?x:_,E=o*r+d*s+p,x=a*r+h*s+c,f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,_=x>_?x:_,E=o*i+d*s+p,x=a*i+h*s+c,f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,_=x>_?x:_,this.minX=f,this.minY=m,this.maxX=v,this.maxY=_}addVertexData(t,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let d=r;d<n;d+=2){const h=t[d],p=t[d+1];i=h<i?h:i,s=p<s?p:s,o=h>o?h:o,a=p>a?p:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)}addVerticesMatrix(t,r,n,i,s=0,o=s){const a=t.a,d=t.b,h=t.c,p=t.d,c=t.tx,f=t.ty;let m=this.minX,v=this.minY,_=this.maxX,E=this.maxY;for(let x=n;x<i;x+=2){const y=r[x],w=r[x+1],T=a*y+h*w+c,P=p*w+d*y+f;m=Math.min(m,T-s),_=Math.max(_,T+s),v=Math.min(v,P-o),E=Math.max(E,P+o)}this.minX=m,this.minY=v,this.maxX=_,this.maxY=E}addBounds(t){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,r){const n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,s=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,d=this.minY,h=this.maxX,p=this.maxY;this.minX=n<a?n:a,this.minY=i<d?i:d,this.maxX=s>h?s:h,this.maxY=o>p?o:p}}addBoundsMatrix(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,r){const n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,s=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,d=this.minY,h=this.maxX,p=this.maxY;this.minX=n<a?n:a,this.minY=i<d?i:d,this.maxX=s>h?s:h,this.maxY=o>p?o:p}}pad(t=0,r=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)}addFramePad(t,r,n,i,s,o){t-=s,r-=o,n+=s,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class mt extends Hu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new pf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Od,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const r=Object.keys(t);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(mt.prototype,i,Object.getOwnPropertyDescriptor(t,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Ue),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ue),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Od);const r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)}toLocal(t,r,n,i){return r&&(t=r.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,r=0,n=1,i=1,s=0,o=0,a=0,d=0,h=0){return this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=d,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new d3),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*lP}set angle(t){this.transform.rotation=t*uP}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class d3 extends mt{constructor(){super(...arguments),this.sortDirty=null}}mt.prototype.displayObjectUpdateTransform=mt.prototype.updateTransform;const f3=new pt;function p3(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const nv=class extends mt{constructor(){super(),this.children=[],this.sortableChildren=nv.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Ba(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Ba(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ba(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t,i=n-r;let s;if(i>0&&i<=n){s=this.children.splice(r,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(p3),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let n=0,i=this.children.length;n<i;++n){const s=this.children[n];s.visible&&s.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==nv.prototype._render&&(r=this.getBounds(!0));const i=e.projection.transform;if(i&&(n?(n=f3.copyFrom(n),n.prepend(i)):n=i),r&&t.intersects(r,n))this._render(e);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],d=a.cullable;a.cullable=d||!this.cullArea,a.render(e),a.cullable=d}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let i=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Ot.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<r.length;++n)r[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let Kt=nv;Kt.defaultSortableChildren=!1;Kt.prototype.containerUpdateTransform=Kt.prototype.updateTransform;Object.defineProperties(ge,{SORTABLE_CHILDREN:{get(){return Kt.defaultSortableChildren},set(e){He("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Kt.defaultSortableChildren=e}}});var _f=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(_f||{});const Bl=new We,m3=new Uint16Array([0,1,2,0,2,3]);class Yn extends Kt{constructor(t){super(),this._anchor=new Hi(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new et(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=we.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||se.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=m3,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ge.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ss(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ss(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,d=r.ty,h=this.vertexData,p=t.trim,c=t.orig,f=this._anchor;let m=0,v=0,_=0,E=0;if(p?(v=p.x-f._x*c.width,m=v+p.width,E=p.y-f._y*c.height,_=E+p.height):(v=-f._x*c.width,m=v+c.width,E=-f._y*c.height,_=E+c.height),h[0]=n*v+s*E+a,h[1]=o*E+i*v+d,h[2]=n*m+s*E+a,h[3]=o*E+i*m+d,h[4]=n*m+s*_+a,h[5]=o*_+i*m+d,h[6]=n*v+s*_+a,h[7]=o*_+i*v+d,this._roundPixels){const x=ge.RESOLUTION;for(let y=0;y<h.length;++y)h[y]=Math.round(h[y]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,r=this.vertexTrimmedData,n=t.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,d=s.c,h=s.d,p=s.tx,c=s.ty,f=-i._x*n.width,m=f+n.width,v=-i._y*n.height,_=v+n.height;r[0]=o*f+d*v+p,r[1]=h*v+a*f+c,r[2]=o*m+d*v+p,r[3]=h*v+a*m+c,r[4]=o*m+d*_+p,r[5]=h*_+a*m+c,r[6]=o*f+d*_+p,r[7]=h*_+a*f+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Od),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ue),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Bl);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return Bl.x>=i&&Bl.x<i+r&&(s=-n*this.anchor.y,Bl.y>=s&&Bl.y<s+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){const n=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(t,r){const n=t instanceof se?t:se.from(t,r);return new Yn(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const r=Ss(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const r=Ss(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||se.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Ah={willReadFrequently:!0},Te=class{static get experimentalLetterSpacingSupported(){let e=Te._experimentalLetterSpacingSupported;if(e!==void 0){const t=ge.ADAPTER.getCanvasRenderingContext2D().prototype;e=Te._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,n,i,s,o,a,d){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=d}static measureText(e,t,r,n=Te._canvas){r=r??t.wordWrap;const i=t.toFontString(),s=Te.measureFont(i);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=n.getContext("2d",Ah);o.font=i;const d=(r?Te.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),h=new Array(d.length);let p=0;for(let v=0;v<d.length;v++){const _=Te._measureText(d[v],t.letterSpacing,o);h[v]=_,p=Math.max(p,_)}let c=p+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const f=t.lineHeight||s.fontSize+t.strokeThickness;let m=Math.max(f,s.fontSize+t.strokeThickness*2)+(d.length-1)*(f+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new Te(e,t,c,m,d,h,f+t.leading,p,s)}static _measureText(e,t,r){let n=!1;Te.experimentalLetterSpacingSupported&&(Te.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let i=r.measureText(e).width;return i>0&&(n?i-=t:i+=(Te.graphemeSegmenter(e).length-1)*t),i}static wordWrap(e,t,r=Te._canvas){const n=r.getContext("2d",Ah);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:d,whiteSpace:h}=t,p=Te.collapseSpaces(h),c=Te.collapseNewlines(h);let f=!p;const m=t.wordWrapWidth+d,v=Te.tokenize(e);for(let _=0;_<v.length;_++){let E=v[_];if(Te.isNewline(E)){if(!c){o+=Te.addLine(s),f=!p,s="",i=0;continue}E=" "}if(p){const y=Te.isBreakingSpace(E),w=Te.isBreakingSpace(s[s.length-1]);if(y&&w)continue}const x=Te.getFromCache(E,d,a,n);if(x>m)if(s!==""&&(o+=Te.addLine(s),s="",i=0),Te.canBreakWords(E,t.breakWords)){const y=Te.wordWrapSplit(E);for(let w=0;w<y.length;w++){let T=y[w],P=T,R=1;for(;y[w+R];){const I=y[w+R];if(!Te.canBreakChars(P,I,E,w,t.breakWords))T+=I;else break;P=I,R++}w+=R-1;const M=Te.getFromCache(T,d,a,n);M+i>m&&(o+=Te.addLine(s),f=!1,s="",i=0),s+=T,i+=M}}else{s.length>0&&(o+=Te.addLine(s),s="",i=0);const y=_===v.length-1;o+=Te.addLine(E,!y),f=!1,s="",i=0}else x+i>m&&(f=!1,o+=Te.addLine(s),s="",i=0),(s.length>0||!Te.isBreakingSpace(E)||f)&&(s+=E,i+=x)}return o+=Te.addLine(s,!1),o}static addLine(e,t=!0){return e=Te.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,n){let i=r[e];return typeof i!="number"&&(i=Te._measureText(e,t,n)+t,r[e]=i),i}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!Te.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Te._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Te._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const i=e[n],s=e[n+1];if(Te.isBreakingSpace(i,s)||Te.isNewline(i)){r!==""&&(t.push(r),r=""),t.push(i);continue}r+=i}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,n,i){return!0}static wordWrapSplit(e){return Te.graphemeSegmenter(e)}static measureFont(e){if(Te._fonts[e])return Te._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=Te._canvas,n=Te._context;n.font=e;const i=Te.METRICS_STRING+Te.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let o=Math.ceil(n.measureText(Te.BASELINE_SYMBOL).width);const a=Math.ceil(Te.HEIGHT_MULTIPLIER*o);if(o=o*Te.BASELINE_MULTIPLIER|0,s===0||a===0)return Te._fonts[e]=t,t;r.width=s,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,o);const d=n.getImageData(0,0,s,a).data,h=d.length,p=s*4;let c=0,f=0,m=!1;for(c=0;c<o;++c){for(let v=0;v<p;v+=4)if(d[f+v]!==255){m=!0;break}if(!m)f+=p;else break}for(t.ascent=o-c,f=h-p,m=!1,c=a;c>o;--c){for(let v=0;v<p;v+=4)if(d[f+v]!==255){m=!0;break}if(!m)f-=p;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,Te._fonts[e]=t,t}static clearMetrics(e=""){e?delete Te._fonts[e]:Te._fonts={}}static get _canvas(){if(!Te.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",Ah)?.measureText)return Te.__canvas=t,t;e=ge.ADAPTER.createCanvas()}catch{e=ge.ADAPTER.createCanvas()}e.width=e.height=10,Te.__canvas=e}return Te.__canvas}static get _context(){return Te.__context||(Te.__context=Te._canvas.getContext("2d",Ah)),Te.__context}};let er=Te;er.METRICS_STRING="|\xC9q\xC5";er.BASELINE_SYMBOL="M";er.BASELINE_MULTIPLIER=1.4;er.HEIGHT_MULTIPLIER=2;er.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(r=>r.segment)}return e=>[...e]})();er.experimentalLetterSpacing=!1;er._fonts={};er._newlines=[10,13];er._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const g3=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],jl=class{constructor(e){this.styleID=0,this.reset(),zp(this,e,e)}clone(){const e={};return zp(e,this,jl.defaultStyle),new jl(e)}reset(){zp(this,jl.defaultStyle,jl.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Hp(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Hp(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){v3(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Hp(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!g3.includes(n)&&(n=`"${n}"`),t[r]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let Dt=jl;Dt.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:_f.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Hp(e){const t=et.shared;return Array.isArray(e)?e.map(r=>t.setValue(r).toHex()):t.setValue(e).toHex()}function v3(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function zp(e,t,r){for(const n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const x3={texture:!0,children:!1,baseTexture:!0},iv=class extends Yn{constructor(e,t,r){let n=!1;r||(r=ge.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=se.from(r);i.orig=new Ue,i.trim=new Ue,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=iv.defaultResolution??ge.RESOLUTION,this._autoResolution=iv.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return er.experimentalLetterSpacing}static set experimentalLetterSpacing(e){He("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),er.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,n=er.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,o=n.lines,a=n.lineHeight,d=n.lineWidths,h=n.maxLineWidth,p=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let c,f;const m=t.dropShadow?2:1;for(let v=0;v<m;++v){const _=t.dropShadow&&v===0,E=_?Math.ceil(Math.max(1,s)+t.padding*2):0,x=E*this._resolution;if(_){r.fillStyle="black",r.strokeStyle="black";const w=t.dropShadowColor,T=t.dropShadowBlur*this._resolution,P=t.dropShadowDistance*this._resolution;r.shadowColor=et.shared.setValue(w).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=T,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*P,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*P+x}else r.fillStyle=this._generateFillStyle(t,o,n),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let y=(a-p.fontSize)/2;a-p.fontSize<0&&(y=0);for(let w=0;w<o.length;w++)c=t.strokeThickness/2,f=t.strokeThickness/2+w*a+p.ascent+y,t.align==="right"?c+=h-d[w]:t.align==="center"&&(c+=(h-d[w])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[w],c+t.padding,f+t.padding-E,!0),t.fill&&this.drawLetterSpacing(o[w],c+t.padding,f+t.padding-E)}this.updateTexture()}drawLetterSpacing(e,t,r,n=!1){const s=this._style.letterSpacing;let o=!1;if(er.experimentalLetterSpacingSupported&&(er.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let a=t;const d=er.graphemeSegmenter(e);let h=this.context.measureText(e).width,p=0;for(let c=0;c<d.length;++c){const f=d[c];n?this.context.strokeText(f,a,r):this.context.fillText(f,a,r);let m="";for(let v=c+1;v<d.length;++v)m+=d[v];p=this.context.measureText(m).width,a+=h-p+s,h=p}}updateTexture(){const e=this.canvas;if(this._style.trim){const s=q4(e);s.data&&(e.width=s.width,e.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,r=this._style,n=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let i;const s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-s-o*2,d=this.canvas.height/this._resolution-s-o*2,h=n.slice(),p=e.fillGradientStops.slice();if(!p.length){const c=h.length+1;for(let f=1;f<c;++f)p.push(f/c)}if(h.unshift(n[0]),p.unshift(0),h.push(n[n.length-1]),p.push(1),e.fillGradientType===_f.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,d+o);const c=r.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const m=r.lineHeight*(f-1)+c,v=r.lineHeight*f;let _=v;f>0&&m>v&&(_=(v+m)/2);const E=v+c,x=r.lineHeight*(f+1);let y=E;f+1<t.length&&x<E&&(y=(E+x)/2);const w=(y-_)/d;for(let T=0;T<h.length;T++){let P=0;typeof p[T]=="number"?P=p[T]:P=T/h.length;let R=Math.min(1,Math.max(0,_/d+P*w));R=Number(R.toFixed(5)),i.addColorStop(R,h[T])}}}else{i=this.context.createLinearGradient(o,d/2,a+o,d/2);const c=h.length+1;let f=1;for(let m=0;m<h.length;m++){let v;typeof p[m]=="number"?v=p[m]:v=f/c,i.addColorStop(v,h[m]),f++}}return i}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},x3,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Ss(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Ss(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Dt?this._style=e:this._style=new Dt(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Gu=iv;Gu.defaultAutoResolution=!0;class Fd{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class od{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),d={};for(const h in a){const p=a[h].split("="),c=p[0],f=p[1].replace(/"/gm,""),m=parseFloat(f),v=isNaN(m)?f:m;d[c]=v}n[o].push(d)}const i=new Fd;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class sv{static test(t){const r=t;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const r=new Fd,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),d=t.getElementsByTagName("distanceField");for(let h=0;h<n.length;h++)r.info.push({face:n[h].getAttribute("face"),size:parseInt(n[h].getAttribute("size"),10)});for(let h=0;h<i.length;h++)r.common.push({lineHeight:parseInt(i[h].getAttribute("lineHeight"),10)});for(let h=0;h<s.length;h++)r.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(let h=0;h<o.length;h++){const p=o[h];r.char.push({id:parseInt(p.getAttribute("id"),10),page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xoffset:parseInt(p.getAttribute("xoffset"),10),yoffset:parseInt(p.getAttribute("yoffset"),10),xadvance:parseInt(p.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)r.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<d.length;h++)r.distanceField.push({fieldType:d[h].getAttribute("fieldType"),distanceRange:parseInt(d[h].getAttribute("distanceRange"),10)});return r}}class ov{static test(t){return typeof t=="string"&&t.includes("<font>")?sv.test(ge.ADAPTER.parseXML(t)):!1}static parse(t){return sv.parse(ge.ADAPTER.parseXML(t))}}const Gp=[od,sv,ov];function y3(e){for(let t=0;t<Gp.length;t++)if(Gp[t].test(e))return Gp[t];return null}function _3(e,t,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const d=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,p=e.width/n-d-h*2,c=e.height/n-d-h*2,f=o.slice(),m=r.fillGradientStops.slice();if(!m.length){const v=f.length+1;for(let _=1;_<v;++_)m.push(_/v)}if(f.unshift(o[0]),m.unshift(0),f.push(o[o.length-1]),m.push(1),r.fillGradientType===_f.LINEAR_VERTICAL){a=t.createLinearGradient(p/2,h,p/2,c+h);let v=0;const E=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let x=0;x<i.length;x++){const y=s.lineHeight*x;for(let w=0;w<f.length;w++){let T=0;typeof m[w]=="number"?T=m[w]:T=w/f.length;const P=y/c+T*E;let R=Math.max(v,P);R=Math.min(R,1),a.addColorStop(R,f[w]),v=R}}}else{a=t.createLinearGradient(h,c/2,p+h,c/2);const v=f.length+1;let _=1;for(let E=0;E<f.length;E++){let x;typeof m[E]=="number"?x=m[E]:x=_/v,a.addColorStop(x,f[E]),_++}}return a}function b3(e,t,r,n,i,s,o){const a=r.text,d=r.fontProperties;t.translate(n,i),t.scale(s,s);const h=o.strokeThickness/2,p=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=_3(e,t,o,s,[a],r),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,f=o.dropShadowBlur*s,m=o.dropShadowDistance*s;t.shadowColor=et.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*m,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,p+r.lineHeight-d.descent),o.fill&&t.fillText(a,h,p+r.lineHeight-d.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function ad(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function GE(e){return Array.from?Array.from(e):e.split("")}function w3(e){typeof e=="string"&&(e=[e]);const t=[];for(let r=0,n=e.length;r<n;r++){const i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,d=o;a<=d;a++)t.push(String.fromCharCode(a))}else t.push(...GE(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Rn=class{constructor(e,t,r){const[n]=e.info,[i]=e.common,[s]=e.page,[o]=e.distanceField,a=Ls(s.file),d={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=d;for(let h=0;h<e.page.length;h++){const{id:p,file:c}=e.page[h];d[p]=t instanceof Array?t[h]:t[c],o?.fieldType&&o.fieldType!=="none"&&(d[p].baseTexture.alphaMode=Xn.NO_PREMULTIPLIED_ALPHA,d[p].baseTexture.mipmap=_i.OFF)}for(let h=0;h<e.char.length;h++){const{id:p,page:c}=e.char[h];let{x:f,y:m,width:v,height:_,xoffset:E,yoffset:x,xadvance:y}=e.char[h];f/=a,m/=a,v/=a,_/=a,E/=a,x/=a,y/=a;const w=new Ue(f+d[c].frame.x/a,m+d[c].frame.y/a,v,_);this.chars[p]={xOffset:E,yOffset:x,xAdvance:y,kerning:{},texture:new se(d[c].baseTexture,w),page:c}}for(let h=0;h<e.kerning.length;h++){let{first:p,second:c,amount:f}=e.kerning[h];p/=a,c/=a,f/=a,this.chars[c]&&(this.chars[c].kerning[p]=f)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let n;if(e instanceof Fd)n=e;else{const s=y3(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}t instanceof se&&(t=[t]);const i=new Rn(n,t,r);return Rn.available[i.font]=i,i}static uninstall(e){const t=Rn.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Rn.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:o,textureHeight:a,...d}=Object.assign({},Rn.defaultOptions,r),h=w3(n),p=t instanceof Dt?t:new Dt(t),c=o,f=new Fd;f.info[0]={face:p.fontFamily,size:p.fontSize},f.common[0]={lineHeight:p.fontSize};let m=0,v=0,_,E,x,y=0;const w=[];for(let P=0;P<h.length;P++){_||(_=ge.ADAPTER.createCanvas(),_.width=o,_.height=a,E=_.getContext("2d"),x=new Be(_,{resolution:s,...d}),w.push(new se(x)),f.page.push({id:w.length-1,file:""}));const R=h[P],M=er.measureText(R,p,!1,_),I=M.width,N=Math.ceil(M.height),k=Math.ceil((p.fontStyle==="italic"?2:1)*I);if(v>=a-N*s){if(v===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${R}')`);--P,_=null,E=null,x=null,v=0,m=0,y=0;continue}if(y=Math.max(N+M.fontProperties.descent,y),k*s+m>=c){if(m===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${R}')`);--P,v+=y*s,v=Math.ceil(v),m=0,y=0;continue}b3(_,E,M,m,v,s,p);const L=ad(M.text);f.char.push({id:L,page:w.length-1,x:m/s,y:v/s,width:k,height:N,xoffset:0,yoffset:0,xadvance:I-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),m+=(k+2*i)*s,m=Math.ceil(m)}for(let P=0,R=h.length;P<R;P++){const M=h[P];for(let I=0;I<R;I++){const N=h[I],k=E.measureText(M).width,L=E.measureText(N).width,O=E.measureText(M+N).width-(k+L);O&&f.kerning.push({first:ad(M),second:ad(N),amount:O})}}const T=new Rn(f,w,!0);return Rn.available[e]!==void 0&&Rn.uninstall(e),Rn.available[e]=T,T}};let Ar=Rn;Ar.ALPHA=[["a","z"],["A","Z"]," "];Ar.NUMERIC=[["0","9"]];Ar.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];Ar.ASCII=[[" ","~"]];Ar.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Rn.ALPHANUMERIC};Ar.available={};class S3{constructor(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Wp=new We,ub=new Da,WE=class extends Kt{constructor(e,t,r,n=Fn.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||Qi.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ge.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Fn.TRIANGLES&&t.length<WE.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],r=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,d=i.d,h=i.tx,p=i.ty,c=this.vertexData;for(let f=0;f<c.length/2;f++){const m=r[f*2],v=r[f*2+1];c[f*2]=s*m+a*v+h,c[f*2+1]=o*m+d*v+p}if(this._roundPixels){const f=ge.RESOLUTION;for(let m=0;m<c.length;++m)c[m]=Math.round(c[m]*f)/f}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new S3(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Wp);const t=this.geometry.getBuffer("aVertexPosition").data,r=ub.points,n=this.geometry.getIndex().data,i=n.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=n[o]*2,d=n[o+1]*2,h=n[o+2]*2;if(r[0]=t[a],r[1]=t[a+1],r[2]=t[d],r[3]=t[d+1],r[4]=t[h],r[5]=t[h+1],ub.contains(Wp.x,Wp.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ja=WE;ja.BATCHABLE_SIZE=100;class bf extends Os{constructor(t,r,n){super();const i=new kt(t),s=new kt(r,!0),o=new kt(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Pe.FLOAT).addAttribute("aTextureCoord",s,2,!1,Pe.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var E3=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,T3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Pu extends xi{constructor(t,r){const n={uSampler:t,alpha:1,uTextureMatrix:pt.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Un.from(T3,E3),n),this._colorDirty=!1,this.uvMatrix=new w1(t),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new et(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const r=this.texture.baseTexture.alphaMode;et.shared.setValue(this._tintColor).premultiply(this._alpha,r).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var C3=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,A3=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const cb=[],hb=[],db=[],jE=class extends Kt{constructor(e,t={}){super();const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},jE.styleDefaults,t);if(!Ar.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new et(n),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new Hi(()=>{this.dirty=!0},this,0,0),this._roundPixels=ge.ROUND_PIXELS,this.dirty=!0,this._resolution=ge.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=Ar.available[this._fontName],t=this.fontSize,r=t/e.size,n=new We,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",d=GE(a),h=this._maxWidth*e.size/t,p=e.distanceFieldType==="none"?cb:hb;let c=null,f=0,m=0,v=0,_=-1,E=0,x=0,y=0,w=0;for(let k=0;k<d.length;k++){const L=d[k],W=ad(L);if(/(?:\s)/.test(L)&&(_=k,E=f,w++),L==="\r"||L===`
`){s.push(f),o.push(-1),m=Math.max(m,f),++v,++x,n.x=0,n.y+=e.lineHeight,c=null,w=0;continue}const O=e.chars[W];if(!O)continue;c&&O.kerning[c]&&(n.x+=O.kerning[c]);const z=db.pop()||{texture:se.EMPTY,line:0,charCode:0,prevSpaces:0,position:new We};z.texture=O.texture,z.line=v,z.charCode=W,z.position.x=Math.round(n.x+O.xOffset+this._letterSpacing/2),z.position.y=Math.round(n.y+O.yOffset),z.prevSpaces=w,i.push(z),f=z.position.x+Math.max(O.xAdvance-O.xOffset,O.texture.orig.width),n.x+=O.xAdvance+this._letterSpacing,y=Math.max(y,O.yOffset+O.texture.height),c=W,_!==-1&&h>0&&n.x>h&&(++x,Ba(i,1+_-x,1+k-_),k=_,_=-1,s.push(E),o.push(i.length>0?i[i.length-1].prevSpaces:0),m=Math.max(m,E),v++,n.x=0,n.y+=e.lineHeight,c=null,w=0)}const T=d[d.length-1];T!=="\r"&&T!==`
`&&(/(?:\s)/.test(T)&&(f=E),s.push(f),m=Math.max(m,f),o.push(-1));const P=[];for(let k=0;k<=v;k++){let L=0;this._align==="right"?L=m-s[k]:this._align==="center"?L=(m-s[k])/2:this._align==="justify"&&(L=o[k]<0?0:(m-s[k])/o[k]),P.push(L)}const R=i.length,M={},I=[],N=this._activePagesMeshData;p.push(...N);for(let k=0;k<R;k++){const L=i[k].texture,W=L.baseTexture.uid;if(!M[W]){let O=p.pop();if(!O){const Q=new bf;let X,Z;e.distanceFieldType==="none"?(X=new Pu(se.EMPTY),Z=we.NORMAL):(X=new Pu(se.EMPTY,{program:Un.from(A3,C3),uniforms:{uFWidth:0}}),Z=we.NORMAL_NPM);const F=new ja(Q,X);F.blendMode=Z,O={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:F,vertices:null,uvs:null,indices:null}}O.index=0,O.indexCount=0,O.vertexCount=0,O.uvsCount=0,O.total=0;const{_textureCache:z}=this;z[W]=z[W]||new se(L.baseTexture),O.mesh.texture=z[W],O.mesh.tint=this._tintColor.value,I.push(O),M[W]=O}M[W].total++}for(let k=0;k<N.length;k++)I.includes(N[k])||this.removeChild(N[k].mesh);for(let k=0;k<I.length;k++)I[k].mesh.parent!==this&&this.addChild(I[k].mesh);this._activePagesMeshData=I;for(const k in M){const L=M[k],W=L.total;if(!(L.indices?.length>6*W)||L.vertices.length<ja.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*W),L.uvs=new Float32Array(4*2*W),L.indices=new Uint16Array(6*W);else{const O=L.total,z=L.vertices;for(let Q=O*4*2;Q<z.length;Q++)z[Q]=0}L.mesh.size=6*W}for(let k=0;k<R;k++){const L=i[k];let W=L.position.x+P[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(W=Math.round(W));const O=W*r,z=L.position.y*r,Q=L.texture,X=M[Q.baseTexture.uid],Z=Q.frame,F=Q._uvs,D=X.index++;X.indices[D*6+0]=0+D*4,X.indices[D*6+1]=1+D*4,X.indices[D*6+2]=2+D*4,X.indices[D*6+3]=0+D*4,X.indices[D*6+4]=2+D*4,X.indices[D*6+5]=3+D*4,X.vertices[D*8+0]=O,X.vertices[D*8+1]=z,X.vertices[D*8+2]=O+Z.width*r,X.vertices[D*8+3]=z,X.vertices[D*8+4]=O+Z.width*r,X.vertices[D*8+5]=z+Z.height*r,X.vertices[D*8+6]=O,X.vertices[D*8+7]=z+Z.height*r,X.uvs[D*8+0]=F.x0,X.uvs[D*8+1]=F.y0,X.uvs[D*8+2]=F.x1,X.uvs[D*8+3]=F.y1,X.uvs[D*8+4]=F.x2,X.uvs[D*8+5]=F.y2,X.uvs[D*8+6]=F.x3,X.uvs[D*8+7]=F.y3}this._textWidth=m*r,this._textHeight=(n.y+e.lineHeight)*r;for(const k in M){const L=M[k];if(this.anchor.x!==0||this.anchor.y!==0){let Q=0;const X=this._textWidth*this.anchor.x,Z=this._textHeight*this.anchor.y;for(let F=0;F<L.total;F++)L.vertices[Q++]-=X,L.vertices[Q++]-=Z,L.vertices[Q++]-=X,L.vertices[Q++]-=Z,L.vertices[Q++]-=X,L.vertices[Q++]-=Z,L.vertices[Q++]-=X,L.vertices[Q++]-=Z}this._maxLineHeight=y*r;const W=L.mesh.geometry.getBuffer("aVertexPosition"),O=L.mesh.geometry.getBuffer("aTextureCoord"),z=L.mesh.geometry.getIndex();W.data=L.vertices,O.data=L.uvs,z.data=L.indices,W.update(),O.update(),z.update()}for(let k=0;k<i.length;k++)db.push(i[k]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:n}=Ar.available[this._fontName];if(r!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,d=Math.sqrt(i*i+s*s),h=Math.sqrt(o*o+a*a),p=(Math.abs(d)+Math.abs(h))/2,c=this.fontSize/n,f=e._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=p*t*c*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Ar.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Ar.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Ar.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=Ar.available[this._fontName].distanceFieldType==="none"?cb:hb;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=se.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let $E=jE;$E.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const fb={loader:ve.LoadParser,resolver:ve.ResolveParser,cache:ve.CacheParser,detection:ve.DetectionParser};Ce.handle(ve.Asset,e=>{const t=e.ref;Object.entries(fb).filter(([r])=>!!t[r]).forEach(([r,n])=>Ce.add(Object.assign(t[r],{extension:t[r].extension??n})))},e=>{const t=e.ref;Object.keys(fb).filter(r=>!!t[r]).forEach(r=>Ce.remove(t[r]))});class k3{constructor(t,r=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(t){t.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Wu(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Do(e,t){const r=e.split("?")[0],n=fr.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const Wi=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(r=>typeof r=="string"?t(r):r):e),av=(e,t)=>{const r=t.split("?")[1];return r&&(e+=`?${r}`),e};function VE(e,t,r,n,i){const s=t[r];for(let o=0;o<s.length;o++){const a=s[o];r<t.length-1?VE(e.replace(n[r],a),t,r+1,n,i):i.push(e.replace(n[r],a))}}function P3(e){const t=/\{(.*?)\}/g,r=e.match(t),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),VE(e,i,0,r,n)}else n.push(e);return n}const Ud=e=>!Array.isArray(e);class I3{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const r=this._cache.get(t);return r||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),r}set(t,r){const n=Wi(t);let i;for(let a=0;a<this.parsers.length;a++){const d=this.parsers[a];if(d.test(r)){i=d.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof se){const a=r;n.forEach(d=>{a.baseTexture!==se.EMPTY.baseTexture&&Be.addToCache(a.baseTexture,d),se.addToCache(a,d)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const r=this._cacheMap.get(t);r.cacheKeys.forEach(i=>{this._cache.delete(i)}),r.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Dl=new I3;class R3{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,r,n)=>(this._parsersValidated=!1,t[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,r){const n={promise:null,parser:null};return n.promise=(async()=>{let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${t}`)),!s){for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];if(a.load&&a.test?.(t,r,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(t,r,this),n.parser=s;for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];a.parse&&a.parse&&await a.testParse?.(i,r,this)&&(i=await a.parse(i,r,this)||i,n.parser=a)}return i})(),n}async load(t,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Ud(t),o=Wi(t,h=>({src:h})),a=o.length,d=o.map(async h=>{const p=fr.toAbsolute(h.src);if(!i[h.src])try{this.promiseCache[p]||(this.promiseCache[p]=this._getLoadPromiseAndParser(p,h)),i[h.src]=await this.promiseCache[p].promise,r&&r(++n/a)}catch(c){throw delete this.promiseCache[p],delete i[h.src],new Error(`[Loader.load] Failed to load ${p}.
${c}`)}});return await Promise.all(d),s?i[o[0].src]:i}async unload(t){const n=Wi(t,i=>({src:i})).map(async i=>{const s=fr.toAbsolute(i.src),o=this.promiseCache[s];if(o){const a=await o.promise;o.parser?.unload?.(a,i,this),delete this.promiseCache[s]}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,r)=>(t[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...t,[r.name]:r}),{})}}var Ti=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Ti||{});const M3=".json",N3="application/json",B3={extension:{type:ve.LoadParser,priority:Ti.Low},name:"loadJson",test(e){return Wu(e,N3)||Do(e,M3)},async load(e){return await(await ge.ADAPTER.fetch(e)).json()}};Ce.add(B3);const D3=".txt",L3="text/plain",O3={name:"loadTxt",extension:{type:ve.LoadParser,priority:Ti.Low},test(e){return Wu(e,L3)||Do(e,D3)},async load(e){return await(await ge.ADAPTER.fetch(e)).text()}};Ce.add(O3);const F3=["normal","bold","100","200","300","400","500","600","700","800","900"],U3=[".ttf",".otf",".woff",".woff2"],H3=["font/ttf","font/otf","font/woff","font/woff2"],z3=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function G3(e){const t=fr.extname(e),i=fr.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(z3)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const W3={extension:{type:ve.LoadParser,priority:Ti.Low},name:"loadWebFont",test(e){return Wu(e,H3)||Do(e,U3)},async load(e,t){const r=ge.ADAPTER.getFontFaceSet();if(r){const n=[],i=t.data?.family??G3(e),s=t.data?.weights?.filter(a=>F3.includes(a))??["normal"],o=t.data??{};for(let a=0;a<s.length;a++){const d=s[a],h=new FontFace(i,`url(${encodeURI(e)})`,{...o,weight:d});await h.load(),r.add(h),n.push(h)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>ge.ADAPTER.getFontFaceSet().delete(t))}};Ce.add(W3);let pb=0,jp;const j3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",$3={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${j3}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},V3={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let $p;class X3{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const r=URL.createObjectURL(new Blob([$3.code],{type:"application/javascript"})),n=new Worker(r);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(r),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){jp===void 0&&(jp=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<jp&&($p||($p=URL.createObjectURL(new Blob([V3.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker($p),t.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:t,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const r=this.queue.pop(),n=r.id;this.resolveHash[pb]={resolve:r.resolve,reject:r.reject},t.postMessage({data:r.arguments,uuid:pb++,id:n})}}const mb=new X3;function wf(e,t,r){const n=new se(e);return n.baseTexture.on("dispose",()=>{delete t.promiseCache[r]}),n}const Y3=[".jpeg",".jpg",".png",".webp",".avif"],K3=["image/jpeg","image/png","image/webp","image/avif"];async function Q3(e){const t=await ge.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}const Sf={name:"loadTextures",extension:{type:ve.LoadParser,priority:Ti.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Wu(e,K3)||Do(e,Y3)},async load(e,t,r){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await mb.isImageBitmapSupported()?n=await mb.loadImageBitmap(e):n=await Q3(e):n=await new Promise(s=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=e,n.complete?s(n):n.onload=()=>{s(n)}});const i=new Be(n,{resolution:Ls(e),...t.data});return i.resource.src=e,wf(i,r,e)},unload(e){e.destroy(!0)}};Ce.add(Sf);const q3=".svg",Z3="image/svg+xml",J3={extension:{type:ve.LoadParser,priority:Ti.High},name:"loadSVG",test(e){return Wu(e,Z3)||Do(e,q3)},async testParse(e){return ku.test(e)},async parse(e,t,r){const n=new ku(e,t?.data?.resourceOptions);await n.load();const i=new Be(n,{resolution:Ls(e),...t?.data});return i.resource.src=e,wf(i,r,e)},async load(e,t){return(await ge.ADAPTER.fetch(e)).text()},unload:Sf.unload};Ce.add(J3);class eI{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,r)=>`${t}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(t,r)=>r.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const r=t;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(t,r){const n=[];Array.isArray(r)?r.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(t,i.name);n.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{n.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(r).forEach(i=>{n.push(this._createBundleAssetId(t,i)),this.add([i,this._createBundleAssetId(t,i)],r[i])}),this._bundles[t]=n}add(t,r,n){const i=Wi(t);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(r)||(typeof r=="string"?r=P3(r):r=[r]);const s=r.map(o=>{let a=o;if(typeof o=="string"){let d=!1;for(let h=0;h<this._parsers.length;h++){const p=this._parsers[h];if(p.test(o)){a=p.parse(o),d=!0;break}}d||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=fr.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??n,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const r=Ud(t);t=Wi(t);const n={};return t.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const d in o){const h=o[d];a[this._extractAssetIdFromBundle(i,d)]=h}n[i]=a}}),r?n[t[0]]:n}resolveUrl(t){const r=this.resolve(t);if(typeof t!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(t){const r=Ud(t);t=Wi(t);const n={};return t.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(d=>{o.params[d].forEach(h=>{const p=s.filter(c=>c[d]?c[d]===h:!1);p.length&&(s=p)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=fr.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}n[i]=this._resolverHash[i]}),r?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let r=0;r<t.length;r++){const n=t[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const r=/\?/.test(t)?"&":"?";return`${t}${r}${this._defaultSearchParams}`}}class tI{constructor(){this._detections=[],this._initialized=!1,this.resolver=new eI,this.loader=new R3,this.cache=Dl,this._backgroundLoader=new k3(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let s=t.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const r=t.texturePreference?.resolution??1,n=typeof r=="number"?[r]:r;let i=[];if(t.texturePreference?.format){const s=t.texturePreference?.format;i=typeof s=="string"?[s]:s;for(const o of this._detections)await o.test()||(i=await o.remove(i))}else for(const s of this._detections)await s.test()&&(i=await s.add(i));this.resolver.prefer({params:{format:i,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,r,n){this.resolver.add(t,r,n)}async load(t,r){this._initialized||await this.init();const n=Ud(t),i=Wi(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(t,r){this.resolver.addBundle(t,r)}async loadBundle(t,r){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const i=this.resolver.resolveBundle(t),s={},o=Object.keys(i);let a=0,d=0;const h=()=>{r?.(++a/d)},p=o.map(c=>{const f=i[c];return d+=Object.keys(f).length,this._mapLoadToResolve(f,h).then(m=>{s[c]=m})});return await Promise.all(p),n?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolveBundle(t);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Dl.get(t);const r={};for(let n=0;n<t.length;n++)r[n]=Dl.get(t[n]);return r}async _mapLoadToResolve(t,r){const n=Object.values(t),i=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,d)=>{const h=s[a.src],p=[a.src];a.alias&&p.push(...a.alias),o[i[d]]=h,Dl.set(p,h)}),o}async unload(t){this._initialized||await this.init();const r=Wi(t).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=Wi(t);const r=this.resolver.resolveBundle(t),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(t){const r=Object.values(t);r.forEach(n=>{Dl.remove(n.src)}),await this.loader.unload(r)}get detections(){return this._detections}get preferWorkers(){return Sf.config.preferWorkers}set preferWorkers(t){He("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(r=>{!r.config||Object.keys(r.config).filter(n=>n in t).forEach(n=>{r.config[n]=t[n]})})}}const kh=new tI;Ce.handleByList(ve.LoadParser,kh.loader.parsers).handleByList(ve.ResolveParser,kh.resolver.parsers).handleByList(ve.CacheParser,kh.cache.parsers).handleByList(ve.DetectionParser,kh.detections);const rI={extension:ve.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof se),getCacheableAssets:(e,t)=>{const r={};return e.forEach(n=>{t.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};Ce.add(rI);const nI={extension:{type:ve.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await ge.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};Ce.add(nI);const iI={extension:{type:ve.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await ge.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};Ce.add(iI);const gb=["png","jpg","jpeg"],sI={extension:{type:ve.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...gb],remove:async e=>e.filter(t=>!gb.includes(t))};Ce.add(sI);const oI={extension:ve.ResolveParser,test:Sf.test,parse:e=>({resolution:parseFloat(ge.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};Ce.add(oI);const aI=[".xml",".fnt"],lI={extension:{type:ve.LoadParser,priority:Ti.Normal},name:"loadBitmapFont",test(e){return aI.includes(fr.extname(e).toLowerCase())},async testParse(e){return od.test(e)||ov.test(e)},async parse(e,t,r){const n=od.test(e)?od.parse(e):ov.parse(e),{src:i}=t,{page:s}=n,o=[];for(let h=0;h<s.length;++h){const p=s[h].file;let c=fr.join(fr.dirname(i),p);c=av(c,i),o.push(c)}const a=await r.load(o),d=o.map(h=>a[h]);return Ar.install(n,d,!0)},async load(e,t){return(await ge.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};Ce.add(lI);const Hd={build(e){const t=e.points;let r,n,i,s,o,a;if(e.type===tr.CIRC){const v=e.shape;r=v.x,n=v.y,o=a=v.radius,i=s=0}else if(e.type===tr.ELIP){const v=e.shape;r=v.x,n=v.y,o=v.width,a=v.height,i=s=0}else{const v=e.shape,_=v.width/2,E=v.height/2;r=v.x+_,n=v.y+E,o=a=Math.max(0,Math.min(v.radius,Math.min(_,E))),i=_-o,s=E-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){t.length=0;return}const d=Math.ceil(2.3*Math.sqrt(o+a)),h=d*8+(i?4:0)+(s?4:0);if(t.length=h,h===0)return;if(d===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+s,t[2]=t[4]=r-i,t[5]=t[7]=n-s;return}let p=0,c=d*4+(i?2:0)+2,f=c,m=h;{const v=i+o,_=s,E=r+v,x=r-v,y=n+_;if(t[p++]=E,t[p++]=y,t[--c]=y,t[--c]=x,s){const w=n-_;t[f++]=x,t[f++]=w,t[--m]=w,t[--m]=E}}for(let v=1;v<d;v++){const _=Math.PI/2*(v/d),E=i+Math.cos(_)*o,x=s+Math.sin(_)*a,y=r+E,w=r-E,T=n+x,P=n-x;t[p++]=y,t[p++]=T,t[--c]=T,t[--c]=w,t[f++]=w,t[f++]=P,t[--m]=P,t[--m]=y}{const v=i,_=s+a,E=r+v,x=r-v,y=n+_,w=n-_;t[p++]=E,t[p++]=y,t[--m]=w,t[--m]=E,i&&(t[p++]=x,t[p++]=y,t[--m]=w,t[--m]=x)}},triangulate(e,t){const r=e.points,n=t.points,i=t.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,d;if(e.type!==tr.RREC){const p=e.shape;a=p.x,d=p.y}else{const p=e.shape;a=p.x+p.width/2,d=p.y+p.height/2}const h=e.matrix;n.push(e.matrix?h.a*a+h.c*d+h.tx:a,e.matrix?h.b*a+h.d*d+h.ty:d),s++,n.push(r[0],r[1]);for(let p=2;p<r.length;p+=2)n.push(r[p],r[p+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function vb(e,t=!1){const r=e.length;if(r<6)return;let n=0;for(let i=0,s=e[r-2],o=e[r-1];i<r;i+=2){const a=e[i],d=e[i+1];n+=(a-s)*(d+o),s=a,o=d}if(!t&&n>0||t&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,d=s,h=s+1;[e[o],e[d]]=[e[d],e[o]],[e[a],e[h]]=[e[h],e[a]]}}}const XE={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const n=e.holes,i=t.points,s=t.indices;if(r.length>=6){vb(r,!1);const o=[];for(let h=0;h<n.length;h++){const p=n[h];vb(p.points,!0),o.push(r.length/2),r=r.concat(p.points)}const a=x1.exports(r,o,2);if(!a)return;const d=i.length/2;for(let h=0;h<a.length;h+=3)s.push(a[h]+d),s.push(a[h+1]+d),s.push(a[h+2]+d);for(let h=0;h<r.length;h++)i.push(r[h])}}},uI={build(e){const t=e.shape,r=t.x,n=t.y,i=t.width,s=t.height,o=e.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(e,t){const r=e.points,n=t.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},cI={build(e){Hd.build(e)},triangulate(e,t){Hd.triangulate(e,t)}};var Nn=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Nn||{}),yo=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(yo||{});const $a={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class xb{static curveTo(t,r,n,i,s,o){const a=o[o.length-2],h=o[o.length-1]-r,p=a-t,c=i-r,f=n-t,m=Math.abs(h*f-p*c);if(m<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==r)&&o.push(t,r),null;const v=h*h+p*p,_=c*c+f*f,E=h*c+p*f,x=s*Math.sqrt(v)/m,y=s*Math.sqrt(_)/m,w=x*E/v,T=y*E/_,P=x*f+y*p,R=x*c+y*h,M=p*(y+w),I=h*(y+w),N=f*(x+T),k=c*(x+T),L=Math.atan2(I-R,M-P),W=Math.atan2(k-R,N-P);return{cx:P+t,cy:R+r,radius:s,startAngle:L,endAngle:W,anticlockwise:p*c>f*h}}static arc(t,r,n,i,s,o,a,d,h){const p=a-o,c=$a._segmentsCount(Math.abs(p)*s,Math.ceil(Math.abs(p)/Ld)*40),f=p/(c*2),m=f*2,v=Math.cos(f),_=Math.sin(f),E=c-1,x=E%1/E;for(let y=0;y<=E;++y){const w=y+x*y,T=f+o+m*w,P=Math.cos(T),R=-Math.sin(T);h.push((v*P+_*R)*s+n,(v*-R+_*P)*s+i)}}}class hI{constructor(){this.reset()}begin(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class E1{static curveLength(t,r,n,i,s,o,a,d){let p=0,c=0,f=0,m=0,v=0,_=0,E=0,x=0,y=0,w=0,T=0,P=t,R=r;for(let M=1;M<=10;++M)c=M/10,f=c*c,m=f*c,v=1-c,_=v*v,E=_*v,x=E*t+3*_*c*n+3*v*f*s+m*a,y=E*r+3*_*c*i+3*v*f*o+m*d,w=P-x,T=R-y,P=x,R=y,p+=Math.sqrt(w*w+T*T);return p}static curveTo(t,r,n,i,s,o,a){const d=a[a.length-2],h=a[a.length-1];a.length-=2;const p=$a._segmentsCount(E1.curveLength(d,h,t,r,n,i,s,o));let c=0,f=0,m=0,v=0,_=0;a.push(d,h);for(let E=1,x=0;E<=p;++E)x=E/p,c=1-x,f=c*c,m=f*c,v=x*x,_=v*x,a.push(m*d+3*f*x*t+3*c*v*n+_*s,m*h+3*f*x*r+3*c*v*i+_*o)}}function yb(e,t,r,n,i,s,o,a){const d=e-r*i,h=t-n*i,p=e+r*s,c=t+n*s;let f,m;o?(f=n,m=-r):(f=-n,m=r);const v=d+f,_=h+m,E=p+f,x=c+m;return a.push(v,_,E,x),2}function no(e,t,r,n,i,s,o,a){const d=r-e,h=n-t;let p=Math.atan2(d,h),c=Math.atan2(i-e,s-t);a&&p<c?p+=Math.PI*2:!a&&p>c&&(c+=Math.PI*2);let f=p;const m=c-p,v=Math.abs(m),_=Math.sqrt(d*d+h*h),E=(15*v*Math.sqrt(_)/Math.PI>>0)+1,x=m/E;if(f+=x,a){o.push(e,t,r,n);for(let y=1,w=f;y<E;y++,w+=x)o.push(e,t,e+Math.sin(w)*_,t+Math.cos(w)*_);o.push(e,t,i,s)}else{o.push(r,n,e,t);for(let y=1,w=f;y<E;y++,w+=x)o.push(e+Math.sin(w)*_,t+Math.cos(w)*_,e,t);o.push(i,s,e,t)}return E*2}function dI(e,t){const r=e.shape;let n=e.points||r.points.slice();const i=t.closePointEps;if(n.length===0)return;const s=e.lineStyle,o=new We(n[0],n[1]),a=new We(n[n.length-2],n[n.length-1]),d=r.type!==tr.POLY||r.closeStroke,h=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(d){n=n.slice(),h&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const Z=(o.x+a.x)*.5,F=(a.y+o.y)*.5;n.unshift(Z,F),n.push(Z,F)}const p=t.points,c=n.length/2;let f=n.length;const m=p.length/2,v=s.width/2,_=v*v,E=s.miterLimit*s.miterLimit;let x=n[0],y=n[1],w=n[2],T=n[3],P=0,R=0,M=-(y-T),I=x-w,N=0,k=0,L=Math.sqrt(M*M+I*I);M/=L,I/=L,M*=v,I*=v;const W=s.alignment,O=(1-W)*2,z=W*2;d||(s.cap===yo.ROUND?f+=no(x-M*(O-z)*.5,y-I*(O-z)*.5,x-M*O,y-I*O,x+M*z,y+I*z,p,!0)+2:s.cap===yo.SQUARE&&(f+=yb(x,y,M,I,O,z,!0,p))),p.push(x-M*O,y-I*O,x+M*z,y+I*z);for(let Z=1;Z<c-1;++Z){x=n[(Z-1)*2],y=n[(Z-1)*2+1],w=n[Z*2],T=n[Z*2+1],P=n[(Z+1)*2],R=n[(Z+1)*2+1],M=-(y-T),I=x-w,L=Math.sqrt(M*M+I*I),M/=L,I/=L,M*=v,I*=v,N=-(T-R),k=w-P,L=Math.sqrt(N*N+k*k),N/=L,k/=L,N*=v,k*=v;const F=w-x,D=y-T,H=w-P,U=R-T,j=F*H+D*U,J=D*H-U*F,q=J<0;if(Math.abs(J)<.001*Math.abs(j)){p.push(w-M*O,T-I*O,w+M*z,T+I*z),j>=0&&(s.join===Nn.ROUND?f+=no(w,T,w-M*O,T-I*O,w-N*O,T-k*O,p,!1)+4:f+=2,p.push(w-N*z,T-k*z,w+N*O,T+k*O));continue}const _e=(-M+x)*(-I+T)-(-M+w)*(-I+y),pe=(-N+P)*(-k+T)-(-N+w)*(-k+R),Ae=(F*pe-H*_e)/J,be=(U*_e-D*pe)/J,rt=(Ae-w)*(Ae-w)+(be-T)*(be-T),Je=w+(Ae-w)*O,Le=T+(be-T)*O,Qe=w-(Ae-w)*z,Me=T-(be-T)*z,nt=Math.min(F*F+D*D,H*H+U*U),Qt=q?O:z,Br=nt+Qt*Qt*_,qi=rt<=Br;let Zr=s.join;if(Zr===Nn.MITER&&rt/_>E&&(Zr=Nn.BEVEL),qi)switch(Zr){case Nn.MITER:{p.push(Je,Le,Qe,Me);break}case Nn.BEVEL:{q?p.push(Je,Le,w+M*z,T+I*z,Je,Le,w+N*z,T+k*z):p.push(w-M*O,T-I*O,Qe,Me,w-N*O,T-k*O,Qe,Me),f+=2;break}case Nn.ROUND:{q?(p.push(Je,Le,w+M*z,T+I*z),f+=no(w,T,w+M*z,T+I*z,w+N*z,T+k*z,p,!0)+4,p.push(Je,Le,w+N*z,T+k*z)):(p.push(w-M*O,T-I*O,Qe,Me),f+=no(w,T,w-M*O,T-I*O,w-N*O,T-k*O,p,!1)+4,p.push(w-N*O,T-k*O,Qe,Me));break}}else{switch(p.push(w-M*O,T-I*O,w+M*z,T+I*z),Zr){case Nn.MITER:{q?p.push(Qe,Me,Qe,Me):p.push(Je,Le,Je,Le),f+=2;break}case Nn.ROUND:{q?f+=no(w,T,w+M*z,T+I*z,w+N*z,T+k*z,p,!0)+2:f+=no(w,T,w-M*O,T-I*O,w-N*O,T-k*O,p,!1)+2;break}}p.push(w-N*O,T-k*O,w+N*z,T+k*z),f+=2}}x=n[(c-2)*2],y=n[(c-2)*2+1],w=n[(c-1)*2],T=n[(c-1)*2+1],M=-(y-T),I=x-w,L=Math.sqrt(M*M+I*I),M/=L,I/=L,M*=v,I*=v,p.push(w-M*O,T-I*O,w+M*z,T+I*z),d||(s.cap===yo.ROUND?f+=no(w-M*(O-z)*.5,T-I*(O-z)*.5,w-M*O,T-I*O,w+M*z,T+I*z,p,!1)+2:s.cap===yo.SQUARE&&(f+=yb(w,T,M,I,O,z,!1,p)));const Q=t.indices,X=$a.epsilon*$a.epsilon;for(let Z=m;Z<f+m-2;++Z)x=p[Z*2],y=p[Z*2+1],w=p[(Z+1)*2],T=p[(Z+1)*2+1],P=p[(Z+2)*2],R=p[(Z+2)*2+1],!(Math.abs(x*(T-R)+w*(R-y)+P*(y-T))<X)&&Q.push(Z,Z+1,Z+2)}function fI(e,t){let r=0;const n=e.shape,i=e.points||n.points,s=n.type!==tr.POLY||n.closeStroke;if(i.length===0)return;const o=t.points,a=t.indices,d=i.length/2,h=o.length/2;let p=h;for(o.push(i[0],i[1]),r=1;r<d;r++)o.push(i[r*2],i[r*2+1]),a.push(p,p+1),p++;s&&a.push(p,h)}function _b(e,t){e.lineStyle.native?fI(e,t):dI(e,t)}class T1{static curveLength(t,r,n,i,s,o){const a=t-2*n+s,d=r-2*i+o,h=2*n-2*t,p=2*i-2*r,c=4*(a*a+d*d),f=4*(a*h+d*p),m=h*h+p*p,v=2*Math.sqrt(c+f+m),_=Math.sqrt(c),E=2*c*_,x=2*Math.sqrt(m),y=f/_;return(E*v+_*f*(v-x)+(4*m*c-f*f)*Math.log((2*_+y+v)/(y+x)))/(4*E)}static curveTo(t,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],d=$a._segmentsCount(T1.curveLength(o,a,t,r,n,i));let h=0,p=0;for(let c=1;c<=d;++c){const f=c/d;h=o+(t-o)*f,p=a+(r-a)*f,s.push(h+(t+(n-t)*f-h)*f,p+(r+(i-r)*f-p)*f)}}}const Vp={[tr.POLY]:XE,[tr.CIRC]:Hd,[tr.ELIP]:Hd,[tr.RECT]:uI,[tr.RREC]:cI},bb=[],Ph=[];class zd{constructor(t,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}clone(){return new zd(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ta=new We,YE=class extends sE{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Od,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Ph.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),bb.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,n=null){const i=new zd(e,t,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new zd(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const n=t[r];if(!!n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,ta):ta.copyFrom(e),n.shape.contains(ta.x,ta.y))){let i=!1;if(n.holes){for(let s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(ta.x,ta.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const d=t[a],h=d.fillStyle,p=d.lineStyle;Vp[d.type].build(d),d.matrix&&this.transformPoints(d.points,d.matrix),(h.visible||p.visible)&&this.processHoles(d.holes);for(let f=0;f<2;f++){const m=f===0?h:p;if(!m.visible)continue;const v=m.texture.baseTexture,_=this.indices.length,E=this.points.length/2;v.wrapMode=Gi.REPEAT,f===0?this.processFill(d):this.processLine(d);const x=this.points.length/2-E;x!==0&&(r&&!this._compareStyles(n,m)&&(r.end(_,E),r=null),r||(r=bb.pop()||new hI,r.begin(m,_,E),this.batches.push(r),n=m),this.addUvs(this.points,e,m.texture,E,x,m.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const n=e[t];for(let i=0;i<n.size;i++){const s=n.start+i;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<YE.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Be._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),Ph.push(this.drawCalls[p]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let n=Ph.pop();n||(n=new Qg,n.texArray=new Zg),n.texArray.count=0,n.start=0,n.size=0,n.type=Fn.TRIANGLES;let i=0,s=null,o=0,a=!1,d=Fn.TRIANGLES,h=0;this.drawCalls.push(n);for(let p=0;p<this.batches.length;p++){const c=this.batches[p],f=8,m=c.style,v=m.texture.baseTexture;a!==!!m.native&&(a=!!m.native,d=a?Fn.LINES:Fn.TRIANGLES,s=null,i=f,e++),s!==v&&(s=v,v._batchEnabled!==e&&(i===f&&(e++,i=0,n.size>0&&(n=Ph.pop(),n||(n=new Qg,n.texArray=new Zg),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=d),v.touched=1,v._batchEnabled=e,v._batchLocation=i,v.wrapMode=Gi.REPEAT,n.texArray.elements[n.texArray.count++]=v,i++)),n.size+=c.size,h+=c.size,o=v._batchLocation,this.addColors(t,m.color,m.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,o,c.attribSize,c.attribStart)}Be._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(e.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let d=0;d<e.length/2;d++)s[a++]=e[d*2],s[a++]=e[d*2+1],s[a++]=t[d*2],s[a++]=t[d*2+1],o[a++]=r[d],s[a++]=n[d];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?XE.triangulate(e,this):Vp[e.type].triangulate(e,this)}processLine(e){_b(e,this);for(let t=0;t<e.holes.length;t++)_b(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];Vp[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const n=e[r*2],i=e[r*2+1];e[r*2]=t.a*n+t.c*i+t.tx,e[r*2+1]=t.b*n+t.d*i+t.ty}}addColors(e,t,r,n,i=0){const s=et.shared.setValue(t).toLittleEndianNumber(),o=et.shared.setValue(s).toPremultiplied(r);e.length=Math.max(e.length,i+n);for(let a=0;a<n;a++)e[i+a]=o}addTextureIds(e,t,r,n=0){e.length=Math.max(e.length,n+r);for(let i=0;i<r;i++)e[n+i]=t}addUvs(e,t,r,n,i,s=null){let o=0;const a=t.length,d=r.frame;for(;o<i;){let p=e[(n+o)*2],c=e[(n+o)*2+1];if(s){const f=s.a*p+s.c*c+s.tx;c=s.b*p+s.d*c+s.ty,p=f}o++,t.push(p/d.width,c/d.height)}const h=r.baseTexture;(d.width<h.width||d.height<h.height)&&this.adjustUvs(t,r,a,i)}adjustUvs(e,t,r,n){const i=t.baseTexture,s=1e-6,o=r+n*2,a=t.frame,d=a.width/i.width,h=a.height/i.height;let p=a.x/a.width,c=a.y/a.height,f=Math.floor(e[r]+s),m=Math.floor(e[r+1]+s);for(let v=r+2;v<o;v+=2)f=Math.min(f,Math.floor(e[v]+s)),m=Math.min(m,Math.floor(e[v+1]+s));p-=f,c-=m;for(let v=r;v<o;v+=2)e[v]=(e[v]+p)*d,e[v+1]=(e[v+1]+c)*h}};let KE=YE;KE.BATCHABLE_SIZE=100;class Ef{constructor(){this.color=16777215,this.alpha=1,this.texture=se.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Ef;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=se.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class C1 extends Ef{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=yo.BUTT,this.join=Nn.MITER,this.miterLimit=10}clone(){const t=new C1;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Xp={},ld=class extends Kt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ef,this._lineStyle=new C1,this._matrix=null,this._holeMode=!1,this.state=Qi.for2d(),this._geometry=e||new KE,this._geometry.refCount++,this._transformID=-1,this._tintColor=new et(16777215),this.blendMode=we.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ld(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,n=.5,i=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:n,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:se.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:yo.BUTT,join:Nn.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Da,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Da,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==e||i!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,n){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),T1.curveTo(e,t,r,n,i),this}bezierCurveTo(e,t,r,n,i,s){return this._initCurve(),E1.curveTo(e,t,r,n,i,s,this.currentPath.points),this}arcTo(e,t,r,n,i){this._initCurve(e,t);const s=this.currentPath.points,o=xb.curveTo(e,t,r,n,i,s);if(o){const{cx:a,cy:d,radius:h,startAngle:p,endAngle:c,anticlockwise:f}=o;this.arc(a,d,h,p,c,f)}return this}arc(e,t,r,n,i,s=!1){if(n===i)return this;if(!s&&i<=n?i+=Ld:s&&n<=i&&(n+=Ld),i-n===0)return this;const a=e+Math.cos(n)*r,d=t+Math.sin(n)*r,h=this._geometry.closePointEps;let p=this.currentPath?this.currentPath.points:null;if(p){const c=Math.abs(p[p.length-2]-a),f=Math.abs(p[p.length-1]-d);c<h&&f<h||p.push(a,d)}else this.moveTo(a,d),p=this.currentPath.points;return xb.arc(a,d,e,t,r,n,i,s,p),this}beginFill(e=0,t){return this.beginTextureFill({texture:se.WHITE,color:e,alpha:t})}normalizeColor(e){const t=et.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:se.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,n){return this.drawShape(new Ue(e,t,r,n))}drawRoundedRect(e,t,r,n,i){return this.drawShape(new b1(e,t,r,n,i))}drawCircle(e,t,r){return this.drawShape(new y1(e,t,r))}drawEllipse(e,t,r,n){return this.drawShape(new _1(e,t,r,n))}drawPolygon(...e){let t,r=!0;const n=e[0];n.points?(r=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const i=new Da(t);return i.closeStroke=r,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===tr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let n=0;n<r;n++){const i=e.batches[n],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),d=new Uint16Array(e.indicesUint16.buffer,i.start*2,i.size),h={vertexData:o,blendMode:t,indices:d,uvs:a,_batchRGB:et.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=h}}_renderBatched(e){if(!!this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,n=this.worldAlpha,i=t.uniforms,s=r.drawCalls;i.translationMatrix=this.transform.worldTransform,et.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(e,r.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:r,type:n,size:i,start:s}=t,o=r.count;for(let a=0;a<o;a++)e.texture.bind(r.elements[a],a);e.geometry.draw(n,i,s)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!Xp[r]){const{maxTextures:n}=e.plugins[r],i=new Int32Array(n);for(let a=0;a<n;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new pt,default:$n.from({uSamplers:i},!0)},o=e.plugins[r]._shader.program;Xp[r]=new xi(o,s)}t=Xp[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:n,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,t,r,n,i)}containsPoint(e){return this.worldTransform.applyInverse(e,ld._TEMP_POINT),this._geometry.containsPoint(ld._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=et.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,o=t.tx,a=t.ty,d=this._geometry.points,h=this.vertexData;let p=0;for(let c=0;c<d.length;c+=2){const f=d[c],m=d[c+1];h[p++]=r*f+i*m+o,h[p++]=s*m+n*f+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let Xr=ld;Xr.curves=$a;Xr._TEMP_POINT=new We;class pI extends bf{constructor(t=100,r=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=t,this.height=r,this.build()}build(){const t=this.segWidth*this.segHeight,r=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,d=this.height/o;for(let p=0;p<t;p++){const c=p%this.segWidth,f=p/this.segWidth|0;r.push(c*a,f*d),n.push(c/s,f/o)}const h=s*o;for(let p=0;p<h;p++){const c=p%s,f=p/s|0,m=f*this.segWidth+c,v=f*this.segWidth+c+1,_=(f+1)*this.segWidth+c,E=(f+1)*this.segWidth+c+1;i.push(m,v,_,v,E,_)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class mI extends bf{constructor(t=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=t,this.textureScale=n,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(t.length<1)return;r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),i.data=new Uint16Array((t.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,d=t[0];const h=this._width*this.textureScale,p=t.length;for(let f=0;f<p;f++){const m=f*4;if(this.textureScale>0){const v=d.x-t[f].x,_=d.y-t[f].y,E=Math.sqrt(v*v+_*_);d=t[f],a+=E/h}else a=f/(p-1);s[m]=a,s[m+1]=0,s[m+2]=a,s[m+3]=1}let c=0;for(let f=0;f<p-1;f++){const m=f*2;o[c++]=m,o[c++]=m+1,o[c++]=m+2,o[c++]=m+2,o[c++]=m+1,o[c++]=m+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let r=t[0],n,i=0,s=0;const o=this.buffers[0].data,a=t.length,d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<a;h++){const p=t[h],c=h*4;h<t.length-1?n=t[h+1]:n=p,s=-(n.x-r.x),i=n.y-r.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=d,s*=d),o[c]=p.x+i,o[c+1]=p.y+s,o[c+2]=p.x-i,o[c+3]=p.y-s,r=p}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class gI extends ja{constructor(t,r,n){const i=new pI(t.width,t.height,r,n),s=new Pu(se.WHITE);super(i,s),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(t.width!==r||t.height!==n)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const Ih=10;class vI extends gI{constructor(t,r,n,i,s){super(se.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??t.defaultBorders?.left??Ih,this._rightWidth=i??t.defaultBorders?.right??Ih,this._topHeight=n??t.defaultBorders?.top??Ih,this._bottomHeight=s??t.defaultBorders?.bottom??Ih,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(r,i)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const n=1/this._origWidth,i=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=i*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class xI extends ja{constructor(t=se.EMPTY,r,n,i,s){const o=new bf(r,n,i);o.getBuffer("aVertexPosition").static=!1;const a=new Pu(t);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class yI extends ja{constructor(t,r,n=0){const i=new mI(t.height,r,n),s=new Pu(t);n>0&&(t.baseTexture.wrapMode=Gi.REPEAT),super(i,s),this.autoUpdate=!0}_render(t){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(t)}}class _I extends Kt{constructor(t=1500,r,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=we.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new et(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const r=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class wb{constructor(t,r,n){this.geometry=new Os,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<t.length;++i){let s=t[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Pe.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let r=0;this.indexBuffer=new kt(X4(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new kt(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new kt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Pe.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Pe.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(t,r,n,s.type===Pe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(t,r,n,s.type===Pe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var bI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,wI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class QE extends mf{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new pt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Pe.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=xi.from(wI,bI,{}),this.state=Qi.for2d()}render(t){const r=t.children,n=t._maxSize,i=t._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!t.autoResize&&(o=n);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const d=r[0]._texture.baseTexture,h=d.alphaMode>0;this.state.blendMode=tE(t.blendMode,h),s.state.set(this.state);const p=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=et.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=d,this.renderer.shader.bind(this.shader);let f=!1;for(let m=0,v=0;m<o;m+=i,v+=1){let _=o-m;_>i&&(_=i),v>=a.length&&a.push(this._generateOneMoreBuffer(t));const E=a[v];E.uploadDynamic(r,m,_);const x=t._bufferUpdateIDs[v]||0;f=f||E._updateID<x,f&&(E._updateID=t._updateID,E.uploadStatic(r,m,_)),s.geometry.bind(E.geometry),p.drawElements(p.TRIANGLES,_*6,p.UNSIGNED_SHORT,0)}}generateBuffers(t){const r=[],n=t._maxSize,i=t._batchSize,s=t._properties;for(let o=0;o<n;o+=i)r.push(new wb(this.properties,s,i));return r}_generateOneMoreBuffer(t){const r=t._batchSize,n=t._properties;return new wb(this.properties,n,r)}uploadVertices(t,r,n,i,s,o){let a=0,d=0,h=0,p=0;for(let c=0;c<n;++c){const f=t[r+c],m=f._texture,v=f.scale.x,_=f.scale.y,E=m.trim,x=m.orig;E?(d=E.x-f.anchor.x*x.width,a=d+E.width,p=E.y-f.anchor.y*x.height,h=p+E.height):(a=x.width*(1-f.anchor.x),d=x.width*-f.anchor.x,h=x.height*(1-f.anchor.y),p=x.height*-f.anchor.y),i[o]=d*v,i[o+1]=p*_,i[o+s]=a*v,i[o+s+1]=p*_,i[o+s*2]=a*v,i[o+s*2+1]=h*_,i[o+s*3]=d*v,i[o+s*3+1]=h*_,o+=s*4}}uploadPosition(t,r,n,i,s,o){for(let a=0;a<n;a++){const d=t[r+a].position;i[o]=d.x,i[o+1]=d.y,i[o+s]=d.x,i[o+s+1]=d.y,i[o+s*2]=d.x,i[o+s*2+1]=d.y,i[o+s*3]=d.x,i[o+s*3+1]=d.y,o+=s*4}}uploadRotation(t,r,n,i,s,o){for(let a=0;a<n;a++){const d=t[r+a].rotation;i[o]=d,i[o+s]=d,i[o+s*2]=d,i[o+s*3]=d,o+=s*4}}uploadUvs(t,r,n,i,s,o){for(let a=0;a<n;++a){const d=t[r+a]._texture._uvs;d?(i[o]=d.x0,i[o+1]=d.y0,i[o+s]=d.x1,i[o+s+1]=d.y1,i[o+s*2]=d.x2,i[o+s*2+1]=d.y2,i[o+s*3]=d.x3,i[o+s*3+1]=d.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(t,r,n,i,s,o){for(let a=0;a<n;++a){const d=t[r+a],h=et.shared.setValue(d._tintRGB).toPremultiplied(d.alpha,d.texture.baseTexture.alphaMode>0);i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}QE.extension={name:"particle",type:ve.RendererPlugin};Ce.add(QE);class Iu extends Yn{constructor(t,r=!0){super(t[0]instanceof se?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(It.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(It.shared.add(this.update,this,Us.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const r=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=r/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const r=[];for(let n=0;n<t.length;++n)r.push(se.from(t[n]));return new Iu(r)}static fromImages(t){const r=[];for(let n=0;n<t.length;++n)r.push(se.from(t[n]));return new Iu(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof se)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(It.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(It.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Ll=new We;class A1 extends Yn{constructor(t,r=100,n=100){super(t),this.tileTransform=new pf,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new w1(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,n,i)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ue),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ll);const r=this._width,n=this._height,i=-r*this.anchor._x;if(Ll.x>=i&&Ll.x<i+r){const s=-n*this.anchor._y;if(Ll.y>=s&&Ll.y<s+n)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,r){const n=t instanceof se?t:se.from(t,r);return new A1(n,r.width,r.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var SI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,EI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,TI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Sb=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,CI=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Rh=new pt;class qE extends mf{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new vE,this.state=Qi.for2d()}contextChange(){const t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=xi.from(Sb,CI,r),this.shader=t.context.webGLVersion>1?xi.from(EI,SI,r):xi.from(Sb,TI,r)}render(t){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=t._texture,d=a.baseTexture,h=d.alphaMode>0,p=t.tileTransform.localTransform,c=t.uvMatrix;let f=d.isPowerOfTwo&&a.frame.width===d.width&&a.frame.height===d.height;f&&(d._glTextures[r.CONTEXT_UID]?f=d.wrapMode!==Gi.CLAMP:d.wrapMode===Gi.CLAMP&&(d.wrapMode=Gi.REPEAT));const m=f?this.simpleShader:this.shader,v=a.width,_=a.height,E=t._width,x=t._height;Rh.set(p.a*v/E,p.b*v/x,p.c*_/E,p.d*_/x,p.tx/E,p.ty/x),Rh.invert(),f?Rh.prepend(c.mapCoord):(m.uniforms.uMapCoord=c.mapCoord.toArray(!0),m.uniforms.uClampFrame=c.uClampFrame,m.uniforms.uClampOffset=c.uClampOffset),m.uniforms.uTransform=Rh.toArray(!0),m.uniforms.uColor=et.shared.setValue(t.tint).premultiply(t.worldAlpha,h).toArray(m.uniforms.uColor),m.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),m.uniforms.uSampler=a,r.shader.bind(m),r.geometry.bind(n),this.state.blendMode=tE(t.blendMode,h),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}qE.extension={name:"tilingSprite",type:ve.RendererPlugin};Ce.add(qE);const lv=class{constructor(e){this.stage=new Kt,e=Object.assign({forceCanvas:!1},e),this.renderer=s3(e),lv._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const r=lv._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let ju=lv;ju._plugins=[];Ce.handleByList(ve.Application,ju._plugins);class ZE{static init(t){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ZE.extension=ve.Application;Ce.add(ZE);var st={exports:{}},AI="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kI=AI,PI=kI;function JE(){}function eT(){}eT.resetWarningCache=JE;var II=function(){function e(n,i,s,o,a,d){if(d!==PI){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:eT,resetWarningCache:JE};return r.PropTypes=r,r};st.exports=II();function Yr(e){return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(e)}function tT(e){var t=function(r,n){if(Yr(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Yr(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Yr(t)==="symbol"?t:String(t)}function At(e,t,r){return(t=tT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yi(e){return function(t){if(Array.isArray(t))return Yp(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return Yp(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yp(t,r):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Et(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var RI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function MI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NI=function(e){return e==null};function $l(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=Yi(e);else{if(e===null||Yr(e)!=="object")return t;t=[e&&e?.x||0,e&&e?.y||0]}return t.filter(function(r){return!NI(r)&&!isNaN(r)}).map(Number)}function Eb(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Kp(e){return e instanceof We||e instanceof Hi}var Gd=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Qp(e,t,r){if(Kp(e[t])&&Kp(r))e[t].copyFrom(r);else if(Kp(e[t])){var n=$l(r);Et(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(r),Yr(r)),e[t].set(n.shift(),n.shift())}else e[t]=r}var ra,rT=function(e){var t,r=e;if(!Array.isArray(r)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(e)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},nT=function(e){return function(){return!e.apply(void 0,arguments)}},uv="children",BI=(At(ra={},uv,!0),At(ra,"parent",!0),At(ra,"worldAlpha",!0),At(ra,"worldTransform",!0),At(ra,"worldVisible",!0),ra),cv={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},bi=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var d,h;a==null||(d=a.__reactpixi)===null||d===void 0||(h=d.root)===null||h===void 0||h.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,d){if(r.hasOwnProperty(a))return Et(d.typeofs.some(function(h){return Yr(r[a])===h})||d.instanceofs.some(function(h){return r[a]instanceof h}),"".concat(e," ").concat(a," prop is invalid")),r[a]};if(r.texture)return Et(r.texture instanceof se,"".concat(e," texture needs to be typeof `Texture`")),r.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,se]});Et(!!s,"".concat(e," could not get texture from props"));var o=se.from(s);return o.__reactpixi={root:t},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},DI=nT(rT([].concat(Yi(Object.keys(BI)),Yi(Gd))));function wi(e,t,r){var n=!1;if(Et(mt.prototype.isPrototypeOf(e),"instance needs to be typeof `DisplayObject`, got `%s`",Yr(e)),!r.ignoreEvents)for(var i=typeof e.removeListener=="function",s=typeof e.on=="function",o=0;o<Gd.length;o++){var a=Gd[o];t[a]!==r[a]&&(n=!0,typeof t[a]=="function"&&i&&e.removeListener(a,t[a]),typeof r[a]=="function"&&s&&e.on(a,r[a]))}var d=Object.keys(r||{});if(r.overwriteProps){for(var h=0;h<d.length;h++){var p=d[h];t[p]!==r[p]&&(n=!0,Qp(e,p,r[p]))}return n}for(var c=d.filter(DI),f=0;f<c.length;f++){var m=c[f],v=r[m];r[m]!==t[m]&&(n=!0),v!==void 0?Qp(e,m,v):m in cv?(console.warn("setting default value: ".concat(m,", from: ").concat(e[m]," to: ").concat(v," for"),e),n=!0,Qp(e,m,cv[m])):console.warn("ignoring prop: ".concat(m,", from ").concat(e[m]," to ").concat(v," for"),e)}return n}var LI=function(e,t){var r=t.text,n=t.style;return new $E(r,n)},OI=function(){return new Kt};function js(e,t){if(e==null)return{};var r,n,i=function(o,a){if(o==null)return{};var d,h,p={},c=Object.keys(o);for(h=0;h<c.length;h++)d=c[h],a.indexOf(d)>=0||(p[d]=o[d]);return p}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var FI=["draw","geometry"],UI=function(e,t){var r=t.geometry;Et(!r||r instanceof Xr,"Graphics geometry needs to be a `PIXI.Graphics`");var n=r?new Xr(r.geometry):new Xr;return n.applyProps=function(i,s,o){var a=o.draw;o.geometry;var d=wi(i,s,js(o,FI));return s.draw!==a&&typeof a=="function"&&(d=!0,a.call(n,n)),d},n},HI=["image","texture"],zI=function(e,t){var r=t.leftWidth,n=r===void 0?10:r,i=t.topHeight,s=i===void 0?10:i,o=t.rightWidth,a=o===void 0?10:o,d=t.bottomHeight,h=d===void 0?10:d,p=bi("NineSlicePlane",e,t),c=new vI(p,n,s,a,h);return c.applyProps=function(f,m,v){var _=v.image,E=v.texture,x=wi(f,m,js(v,HI));return(_||E)&&(E!==m.texture&&(x=!0),f.texture=bi("NineSlicePlane",e,v)),x},c};function Tb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tb(Object(r),!0).forEach(function(n){At(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var GI=function(e,t){var r=t.maxSize,n=r===void 0?1500:r,i=t.batchSize,s=i===void 0?16384:i,o=t.autoResize,a=o!==void 0&&o,d=Mh(Mh({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),h=Mh(Mh({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),p=new _I(n,d,s,a);return p.willUnmount=function(c,f,m){c.destroy(h)},p},WI=["image","texture"],jI=function(e,t){var r=new Yn(bi("Sprite",e,t));return r.applyProps=function(n,i,s){var o=s.image,a=s.texture,d=wi(n,i,js(s,WI));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(d=!0),n.texture=bi("Sprite",e,s)),d},r},$I=["textures","isPlaying","initialFrame"],VI=function(e,t){var r=t.textures,n=t.images,i=t.isPlaying,s=i===void 0||i,o=t.initialFrame,a=function(h){return h.map(function(p){return Et(p instanceof se||p?.texture,"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),p})},d=n?Iu.fromImages(n):new Iu(a(r));return d[s?"gotoAndPlay":"gotoAndStop"](o||0),d.applyProps=function(h,p,c){var f=c.textures,m=c.isPlaying,v=c.initialFrame,_=wi(h,p,js(c,$I));if(f&&p.textures!==f&&(h.textures=a(f),_=!0),m!==p.isPlaying||v!==p.initialFrame){var E=typeof v=="number"?v:d.currentFrame||0;d[m?"gotoAndPlay":"gotoAndStop"](E),_=!0}return _},d},XI=function(e,t){var r=t.text,n=r===void 0?"":r,i=t.style,s=i===void 0?{}:i,o=t.isSprite,a=new Gu(n,s);return o?(a.updateText(),new Yn(a.texture)):a},YI=["tileScale","tilePosition","image","texture"],KI=function(e,t){var r=t.width,n=r===void 0?100:r,i=t.height,s=i===void 0?100:i,o=bi("TilingSprite",e,t),a=new A1(o,n,s);return a.applyProps=function(d,h,p){var c=p.tileScale,f=p.tilePosition,m=p.image,v=p.texture,_=wi(d,h,js(p,YI));if(f){var E,x=$l(f);(E=d.tilePosition).set.apply(E,Yi(x)),_=!Eb($l(h.tilePosition),x)||_}if(c){var y,w=$l(c);(y=d.tileScale).set.apply(y,Yi(w)),_=!Eb($l(h.tileScale),w)||_}return(m||v)&&(v!==h.texture&&(_=!0),d.texture=bi("Sprite",e,p)),_},a},QI=["image","texture"],qI=function(e,t){var r=bi("Mesh",e,t),n=t.vertices,i=t.uvs,s=t.indices,o=t.drawMode,a=o===void 0?Fn.TRIANGLES:o,d=new xI(r,n,i,s,a);return d.applyProps=function(h,p,c){var f=c.image,m=c.texture,v=wi(h,p,js(c,QI));return(f||m)&&(m!==p.texture&&(v=!0),h.texture=bi("Mesh",e,c)),v},d},ZI=["image","texture"],JI=function(e,t){var r=bi("SimpleRope",e,t),n=t.points,i=new yI(r,n);return i.applyProps=function(s,o,a){var d=a.image,h=a.texture,p=js(a,ZI);Et(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var c=wi(s,o,p);return(d||h)&&(h!==o.texture&&(c=!0),s.texture=bi("SimpleRope",e,a)),c},i},eR=Object.freeze({__proto__:null,BitmapText:LI,Container:OI,Graphics:UI,NineSlicePlane:zI,ParticleContainer:GI,Sprite:jI,Text:XI,TilingSprite:KI,SimpleMesh:qI,SimpleRope:JI,AnimatedSprite:VI});function Cb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ab(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cb(Object(r),!0).forEach(function(n){At(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Nr={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},tR=Object.keys(Nr).reduce(function(e,t){return Ab(Ab({},e),{},At({},t,eR[t]))},{}),iT={};function rR(e,t){return Et(!!e,"Expect type to be defined, got `%s`",e),Et(!Nr[e],"Component `%s` could not be created, already exists in default components.",e),iT[e]=t,e}var kb,Pb,Ib,Rb,hv={},dv={},nR={get exports(){return dv},set exports(e){dv=e}},Mb={};function iR(){return Pb||(Pb=1,nR.exports=(kb||(kb=1,function(e){function t(F,D){var H=F.length;F.push(D);e:for(;0<H;){var U=H-1>>>1,j=F[U];if(!(0<i(j,D)))break e;F[U]=D,F[H]=j,H=U}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var D=F[0],H=F.pop();if(H!==D){F[0]=H;e:for(var U=0,j=F.length,J=j>>>1;U<J;){var q=2*(U+1)-1,_e=F[q],pe=q+1,Ae=F[pe];if(0>i(_e,H))pe<j&&0>i(Ae,_e)?(F[U]=Ae,F[pe]=H,U=pe):(F[U]=_e,F[q]=H,U=q);else{if(!(pe<j&&0>i(Ae,H)))break e;F[U]=Ae,F[pe]=H,U=pe}}}return D}function i(F,D){var H=F.sortIndex-D.sortIndex;return H!==0?H:F.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var d=[],h=[],p=1,c=null,f=3,m=!1,v=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(F){for(var D=r(h);D!==null;){if(D.callback===null)n(h);else{if(!(D.startTime<=F))break;n(h),D.sortIndex=D.expirationTime,t(d,D)}D=r(h)}}function T(F){if(_=!1,w(F),!v)if(r(d)!==null)v=!0,X(P);else{var D=r(h);D!==null&&Z(T,D.startTime-F)}}function P(F,D){v=!1,_&&(_=!1,x(N),N=-1),m=!0;var H=f;try{for(w(D),c=r(d);c!==null&&(!(c.expirationTime>D)||F&&!W());){var U=c.callback;if(typeof U=="function"){c.callback=null,f=c.priorityLevel;var j=U(c.expirationTime<=D);D=e.unstable_now(),typeof j=="function"?c.callback=j:c===r(d)&&n(d),w(D)}else n(d);c=r(d)}if(c!==null)var J=!0;else{var q=r(h);q!==null&&Z(T,q.startTime-D),J=!1}return J}finally{c=null,f=H,m=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var R,M=!1,I=null,N=-1,k=5,L=-1;function W(){return!(e.unstable_now()-L<k)}function O(){if(I!==null){var F=e.unstable_now();L=F;var D=!0;try{D=I(!0,F)}finally{D?R():(M=!1,I=null)}}else M=!1}if(typeof y=="function")R=function(){y(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=O,R=function(){Q.postMessage(null)}}else R=function(){E(O,0)};function X(F){I=F,M||(M=!0,R())}function Z(F,D){N=E(function(){F(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,X(P))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var H=f;f=D;try{return F()}finally{f=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,D){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=f;f=F;try{return D()}finally{f=H}},e.unstable_scheduleCallback=function(F,D,H){var U=e.unstable_now();switch(H=typeof H=="object"&&H!==null&&typeof(H=H.delay)=="number"&&0<H?U+H:U,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return F={id:p++,callback:D,priorityLevel:F,startTime:H,expirationTime:j=H+j,sortIndex:-1},H>U?(F.sortIndex=H,t(h,F),r(d)===null&&F===r(h)&&(_?(x(N),N=-1):_=!0,Z(T,H-U))):(F.sortIndex=j,t(d,F),v||m||(v=!0,X(P))),F},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(F){var D=f;return function(){var H=f;f=D;try{return F.apply(this,arguments)}finally{f=H}}}}(Mb)),Mb)),dv}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function sR(){return Rb||(Rb=1,Ib=function(e){var t={},r=$r,n=iR(),i=Object.assign;function s(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),d=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),T=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:typeof(l=T&&l[T]||l["@@iterator"])=="function"?l:null}function R(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case h:return"Fragment";case d:return"Portal";case c:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case E:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case m:return(l.displayName||"Context")+".Consumer";case f:return(l._context.displayName||"Context")+".Provider";case v:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x:return(u=l.displayName||null)!==null?u:R(l.type)||"Memo";case y:u=l._payload,l=l._init;try{return R(l(u))}catch{}}return null}function M(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(u);case 8:return u===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function I(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do(4098&(u=l).flags)!=0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function N(l){if(I(l)!==l)throw Error(s(188))}function k(l){var u=l.alternate;if(!u){if((u=I(l))===null)throw Error(s(188));return u!==l?null:l}for(var g=l,b=u;;){var S=g.return;if(S===null)break;var C=S.alternate;if(C===null){if((b=S.return)!==null){g=b;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===g)return N(S),l;if(C===b)return N(S),u;C=C.sibling}throw Error(s(188))}if(g.return!==b.return)g=S,b=C;else{for(var B=!1,G=S.child;G;){if(G===g){B=!0,g=S,b=C;break}if(G===b){B=!0,b=S,g=C;break}G=G.sibling}if(!B){for(G=C.child;G;){if(G===g){B=!0,g=C,b=S;break}if(G===b){B=!0,b=C,g=S;break}G=G.sibling}if(!B)throw Error(s(189))}}if(g.alternate!==b)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?l:u}function L(l){return(l=k(l))!==null?W(l):null}function W(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=W(l);if(u!==null)return u;l=l.sibling}return null}function O(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=O(l);if(u!==null)return u}l=l.sibling}return null}var z,Q=Array.isArray,X=e.getPublicInstance,Z=e.getRootHostContext,F=e.getChildHostContext,D=e.prepareForCommit,H=e.resetAfterCommit,U=e.createInstance,j=e.appendInitialChild,J=e.finalizeInitialChildren,q=e.prepareUpdate,_e=e.shouldSetTextContent,pe=e.createTextInstance,Ae=e.scheduleTimeout,be=e.cancelTimeout,rt=e.noTimeout,Je=e.isPrimaryRenderer,Le=e.supportsMutation,Qe=e.supportsPersistence,Me=e.supportsHydration,nt=e.getInstanceFromNode,Qt=e.preparePortalMount,Br=e.getCurrentEventPriority,qi=e.detachDeletedInstance,Zr=e.supportsMicrotasks,el=e.scheduleMicrotask,yn=e.supportsTestSelectors,Dr=e.findFiberRoot,wr=e.getBoundingRect,Qn=e.getTextContent,qn=e.isHiddenSubtree,Xu=e.matchAccessibilityRole,Zi=e.setFocusIfFocusable,$s=e.setupIntersectionObserver,Rf=e.appendChild,Yu=e.appendChildToContainer,Ku=e.commitTextUpdate,Ji=e.commitMount,Vs=e.commitUpdate,Mf=e.insertBefore,Qu=e.insertInContainerBefore,qu=e.removeChild,Nf=e.removeChildFromContainer,Zu=e.resetTextContent,Ju=e.hideInstance,Bf=e.hideTextInstance,ec=e.unhideInstance,Df=e.unhideTextInstance,tc=e.clearContainer,Lf=e.cloneInstance,rc=e.createContainerChildSet,nc=e.appendChildToContainerChildSet,ic=e.finalizeContainerChildren,tl=e.replaceContainerChildren,sc=e.cloneHiddenInstance,rl=e.cloneHiddenTextInstance,Of=e.canHydrateInstance,oc=e.canHydrateTextInstance,mr=e.canHydrateSuspenseInstance,_n=e.isSuspenseInstancePending,Oo=e.isSuspenseInstanceFallback,Ff=e.getSuspenseInstanceFallbackErrorDetails,DT=e.registerSuspenseInstanceRetry,ac=e.getNextHydratableSibling,LT=e.getFirstHydratableChild,OT=e.getFirstHydratableChildWithinContainer,FT=e.getFirstHydratableChildWithinSuspenseInstance,UT=e.hydrateInstance,HT=e.hydrateTextInstance,zT=e.hydrateSuspenseInstance,GT=e.getNextHydratableInstanceAfterSuspenseInstance,WT=e.commitHydratedContainer,jT=e.commitHydratedSuspenseInstance,$T=e.clearSuspenseBoundary,VT=e.clearSuspenseBoundaryFromContainer,XT=e.shouldDeleteUnhydratedTailInstances,YT=e.didNotMatchHydratedContainerTextInstance,KT=e.didNotMatchHydratedTextInstance;function nl(l){if(z===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);z=u&&u[1]||""}return`
`+z+l}var Uf=!1;function Hf(l,u){if(!l||Uf)return"";Uf=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(te){var b=te}Reflect.construct(l,[],u)}else{try{u.call()}catch(te){b=te}l.call(u.prototype)}else{try{throw Error()}catch(te){b=te}l()}}catch(te){if(te&&b&&typeof te.stack=="string"){for(var S=te.stack.split(`
`),C=b.stack.split(`
`),B=S.length-1,G=C.length-1;1<=B&&0<=G&&S[B]!==C[G];)G--;for(;1<=B&&0<=G;B--,G--)if(S[B]!==C[G]){if(B!==1||G!==1)do if(B--,0>--G||S[B]!==C[G]){var K=`
`+S[B].replace(" at new "," at ");return l.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",l.displayName)),K}while(1<=B&&0<=G);break}}}finally{Uf=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?nl(l):""}var QT=Object.prototype.hasOwnProperty,zf=[],Fo=-1;function es(l){return{current:l}}function ct(l){0>Fo||(l.current=zf[Fo],zf[Fo]=null,Fo--)}function it(l,u){Fo++,zf[Fo]=l.current,l.current=u}var ts={},or=es(ts),Sr=es(!1),Xs=ts;function Uo(l,u){var g=l.type.contextTypes;if(!g)return ts;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===u)return b.__reactInternalMemoizedMaskedChildContext;var S,C={};for(S in g)C[S]=u[S];return b&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=C),C}function Lr(l){return(l=l.childContextTypes)!=null}function Gf(){ct(Sr),ct(or)}function I1(l,u,g){if(or.current!==ts)throw Error(s(168));it(or,u),it(Sr,g)}function R1(l,u,g){var b=l.stateNode;if(u=u.childContextTypes,typeof b.getChildContext!="function")return g;for(var S in b=b.getChildContext())if(!(S in u))throw Error(s(108,M(l)||"Unknown",S));return i({},g,b)}function lc(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ts,Xs=or.current,it(or,l),it(Sr,Sr.current),!0}function M1(l,u,g){var b=l.stateNode;if(!b)throw Error(s(169));g?(l=R1(l,u,Xs),b.__reactInternalMemoizedMergedChildContext=l,ct(Sr),ct(or),it(or,l)):ct(Sr),it(Sr,g)}var bn=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(qT(l)/ZT|0)|0},qT=Math.log,ZT=Math.LN2,Wf=64,jf=4194304;function il(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function uc(l,u){var g=l.pendingLanes;if(g===0)return 0;var b=0,S=l.suspendedLanes,C=l.pingedLanes,B=268435455&g;if(B!==0){var G=B&~S;G!==0?b=il(G):(C&=B)!==0&&(b=il(C))}else(B=g&~S)!==0?b=il(B):C!==0&&(b=il(C));if(b===0)return 0;if(u!==0&&u!==b&&(u&S)==0&&((S=b&-b)>=(C=u&-u)||S===16&&(4194240&C)!=0))return u;if((4&b)!=0&&(b|=16&g),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=b;0<u;)S=1<<(g=31-bn(u)),b|=l[g],u&=~S;return b}function JT(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function $f(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function N1(){var l=Wf;return(4194240&(Wf<<=1))==0&&(Wf=64),l}function Vf(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function sl(l,u,g){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-bn(u)]=g}function Xf(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var b=31-bn(g),S=1<<b;S&u|l[b]&u&&(l[b]|=u),g&=~S}}var Ve=0;function B1(l){return 1<(l&=-l)?4<l?(268435455&l)!=0?16:536870912:4:1}var Yf=n.unstable_scheduleCallback,D1=n.unstable_cancelCallback,eC=n.unstable_shouldYield,tC=n.unstable_requestPaint,zt=n.unstable_now,Kf=n.unstable_ImmediatePriority,rC=n.unstable_UserBlockingPriority,L1=n.unstable_NormalPriority,nC=n.unstable_IdlePriority,cc=null,Zn=null,wn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},Ci=null,hc=!1,Qf=!1;function O1(l){Ci===null?Ci=[l]:Ci.push(l)}function Jn(){if(!Qf&&Ci!==null){Qf=!0;var l=0,u=Ve;try{var g=Ci;for(Ve=1;l<g.length;l++){var b=g[l];do b=b(!0);while(b!==null)}Ci=null,hc=!1}catch(S){throw Ci!==null&&(Ci=Ci.slice(l+1)),Yf(Kf,Jn),S}finally{Ve=u,Qf=!1}}return null}var Ho=[],zo=0,dc=null,fc=0,Jr=[],en=0,Ys=null,ei=1,Ai="";function Ks(l,u){Ho[zo++]=fc,Ho[zo++]=dc,dc=l,fc=u}function F1(l,u,g){Jr[en++]=ei,Jr[en++]=Ai,Jr[en++]=Ys,Ys=l;var b=ei;l=Ai;var S=32-bn(b)-1;b&=~(1<<S),g+=1;var C=32-bn(u)+S;if(30<C){var B=S-S%5;C=(b&(1<<B)-1).toString(32),b>>=B,S-=B,ei=1<<32-bn(u)+S|g<<S|b,Ai=C+l}else ei=1<<C|g<<S|b,Ai=l}function qf(l){l.return!==null&&(Ks(l,1),F1(l,1,0))}function Zf(l){for(;l===dc;)dc=Ho[--zo],Ho[zo]=null,fc=Ho[--zo],Ho[zo]=null;for(;l===Ys;)Ys=Jr[--en],Jr[en]=null,Ai=Jr[--en],Jr[en]=null,ei=Jr[--en],Jr[en]=null}var Or=null,tn=null,ht=!1,ol=!1,Sn=null;function U1(l,u){var g=an(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=l,(u=l.deletions)===null?(l.deletions=[g],l.flags|=16):u.push(g)}function H1(l,u){switch(l.tag){case 5:return(u=Of(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,Or=l,tn=LT(u),!0);case 6:return(u=oc(u,l.pendingProps))!==null&&(l.stateNode=u,Or=l,tn=null,!0);case 13:if((u=mr(u))!==null){var g=Ys!==null?{id:ei,overflow:Ai}:null;return l.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},(g=an(18,null,null,0)).stateNode=u,g.return=l,l.child=g,Or=l,tn=null,!0}return!1;default:return!1}}function Jf(l){return(1&l.mode)!=0&&(128&l.flags)==0}function e0(l){if(ht){var u=tn;if(u){var g=u;if(!H1(l,u)){if(Jf(l))throw Error(s(418));u=ac(g);var b=Or;u&&H1(l,u)?U1(b,g):(l.flags=-4097&l.flags|2,ht=!1,Or=l)}}else{if(Jf(l))throw Error(s(418));l.flags=-4097&l.flags|2,ht=!1,Or=l}}}function z1(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Or=l}function pc(l){if(!Me||l!==Or)return!1;if(!ht)return z1(l),ht=!0,!1;if(l.tag!==3&&(l.tag!==5||XT(l.type)&&!_e(l.type,l.memoizedProps))){var u=tn;if(u){if(Jf(l))throw G1(),Error(s(418));for(;u;)U1(l,u),u=ac(u)}}if(z1(l),l.tag===13){if(!Me)throw Error(s(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(s(317));tn=GT(l)}else tn=Or?ac(l.stateNode):null;return!0}function G1(){for(var l=tn;l;)l=ac(l)}function Go(){Me&&(tn=Or=null,ol=ht=!1)}function t0(l){Sn===null?Sn=[l]:Sn.push(l)}var iC=o.ReactCurrentBatchConfig;function mc(l,u){if(wn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var S=g[b];if(!QT.call(u,S)||!wn(l[S],u[S]))return!1}return!0}function sC(l){switch(l.tag){case 5:return nl(l.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return l=Hf(l.type,!1);case 11:return l=Hf(l.type.render,!1);case 1:return l=Hf(l.type,!0);default:return""}}function En(l,u){if(l&&l.defaultProps){for(var g in u=i({},u),l=l.defaultProps)u[g]===void 0&&(u[g]=l[g]);return u}return u}var gc=es(null),vc=null,Wo=null,r0=null;function n0(){r0=Wo=vc=null}function W1(l,u,g){Je?(it(gc,u._currentValue),u._currentValue=g):(it(gc,u._currentValue2),u._currentValue2=g)}function i0(l){var u=gc.current;ct(gc),Je?l._currentValue=u:l._currentValue2=u}function s0(l,u,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===g)break;l=l.return}}function jo(l,u){vc=l,r0=Wo=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&u)!=0&&(Er=!0),l.firstContext=null)}function rn(l){var u=Je?l._currentValue:l._currentValue2;if(r0!==l)if(l={context:l,memoizedValue:u,next:null},Wo===null){if(vc===null)throw Error(s(308));Wo=l,vc.dependencies={lanes:0,firstContext:l}}else Wo=Wo.next=l;return u}var Qs=null;function o0(l){Qs===null?Qs=[l]:Qs.push(l)}function j1(l,u,g,b){var S=u.interleaved;return S===null?(g.next=g,o0(u)):(g.next=S.next,S.next=g),u.interleaved=g,ti(l,b)}function ti(l,u){l.lanes|=u;var g=l.alternate;for(g!==null&&(g.lanes|=u),g=l,l=l.return;l!==null;)l.childLanes|=u,(g=l.alternate)!==null&&(g.childLanes|=u),g=l,l=l.return;return g.tag===3?g.stateNode:null}var rs=!1;function a0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $1(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ki(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function ns(l,u,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(2&Ge)!=0){var S=b.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),b.pending=u,ti(l,g)}return(S=b.interleaved)===null?(u.next=u,o0(b)):(u.next=S.next,S.next=u),b.interleaved=u,ti(l,g)}function xc(l,u,g){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&g)!=0)){var b=u.lanes;g|=b&=l.pendingLanes,u.lanes=g,Xf(l,g)}}function V1(l,u){var g=l.updateQueue,b=l.alternate;if(b!==null&&g===(b=b.updateQueue)){var S=null,C=null;if((g=g.firstBaseUpdate)!==null){do{var B={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};C===null?S=C=B:C=C.next=B,g=g.next}while(g!==null);C===null?S=C=u:C=C.next=u}else S=C=u;return g={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:b.shared,effects:b.effects},void(l.updateQueue=g)}(l=g.lastBaseUpdate)===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}function yc(l,u,g,b){var S=l.updateQueue;rs=!1;var C=S.firstBaseUpdate,B=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var K=G,te=K.next;K.next=null,B===null?C=te:B.next=te,B=K;var ne=l.alternate;ne!==null&&(G=(ne=ne.updateQueue).lastBaseUpdate)!==B&&(G===null?ne.firstBaseUpdate=te:G.next=te,ne.lastBaseUpdate=K)}if(C!==null){var he=S.baseState;for(B=0,ne=te=K=null,G=C;;){var re=G.lane,le=G.eventTime;if((b&re)===re){ne!==null&&(ne=ne.next={eventTime:le,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Se=l,Fe=G;switch(re=u,le=g,Fe.tag){case 1:if(typeof(Se=Fe.payload)=="function"){he=Se.call(le,he,re);break e}he=Se;break e;case 3:Se.flags=-65537&Se.flags|128;case 0:if((re=typeof(Se=Fe.payload)=="function"?Se.call(le,he,re):Se)==null)break e;he=i({},he,re);break e;case 2:rs=!0}}G.callback!==null&&G.lane!==0&&(l.flags|=64,(re=S.effects)===null?S.effects=[G]:re.push(G))}else le={eventTime:le,lane:re,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ne===null?(te=ne=le,K=he):ne=ne.next=le,B|=re;if((G=G.next)===null){if((G=S.shared.pending)===null)break;G=(re=G).next,re.next=null,S.lastBaseUpdate=re,S.shared.pending=null}}if(ne===null&&(K=he),S.baseState=K,S.firstBaseUpdate=te,S.lastBaseUpdate=ne,(u=S.shared.interleaved)!==null){S=u;do B|=S.lane,S=S.next;while(S!==u)}else C===null&&(S.shared.lanes=0);Zs|=B,l.lanes=B,l.memoizedState=he}}function X1(l,u,g){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var b=l[u],S=b.callback;if(S!==null){if(b.callback=null,b=g,typeof S!="function")throw Error(s(191,S));S.call(b)}}}var Y1=new r.Component().refs;function l0(l,u,g,b){g=(g=g(b,u=l.memoizedState))==null?u:i({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var _c={isMounted:function(l){return!!(l=l._reactInternals)&&I(l)===l},enqueueSetState:function(l,u,g){l=l._reactInternals;var b=ur(),S=as(l),C=ki(b,S);C.payload=u,g!=null&&(C.callback=g),(u=ns(l,C,S))!==null&&(on(u,l,S,b),xc(u,l,S))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var b=ur(),S=as(l),C=ki(b,S);C.tag=1,C.payload=u,g!=null&&(C.callback=g),(u=ns(l,C,S))!==null&&(on(u,l,S,b),xc(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=ur(),b=as(l),S=ki(g,b);S.tag=2,u!=null&&(S.callback=u),(u=ns(l,S,b))!==null&&(on(u,l,b,g),xc(u,l,b))}};function K1(l,u,g,b,S,C,B){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,C,B):!u.prototype||!u.prototype.isPureReactComponent||!mc(g,b)||!mc(S,C)}function Q1(l,u,g){var b=!1,S=ts,C=u.contextType;return typeof C=="object"&&C!==null?C=rn(C):(S=Lr(u)?Xs:or.current,C=(b=(b=u.contextTypes)!=null)?Uo(l,S):ts),u=new u(g,C),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=_c,l.stateNode=u,u._reactInternals=l,b&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=C),u}function q1(l,u,g,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==l&&_c.enqueueReplaceState(u,u.state,null)}function u0(l,u,g,b){var S=l.stateNode;S.props=g,S.state=l.memoizedState,S.refs=Y1,a0(l);var C=u.contextType;typeof C=="object"&&C!==null?S.context=rn(C):(C=Lr(u)?Xs:or.current,S.context=Uo(l,C)),S.state=l.memoizedState,typeof(C=u.getDerivedStateFromProps)=="function"&&(l0(l,u,C,g),S.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&_c.enqueueReplaceState(S,S.state,null),yc(l,g,S,b),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}function al(l,u,g){if((l=g.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner){if(g.tag!==1)throw Error(s(309));var b=g.stateNode}if(!b)throw Error(s(147,l));var S=b,C=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(B){var G=S.refs;G===Y1&&(G=S.refs={}),B===null?delete G[C]:G[C]=B},u._stringRef=C,u)}if(typeof l!="string")throw Error(s(284));if(!g._owner)throw Error(s(290,l))}return l}function bc(l,u){throw l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function Z1(l){return(0,l._init)(l._payload)}function J1(l){function u(ie,$){if(l){var ee=ie.deletions;ee===null?(ie.deletions=[$],ie.flags|=16):ee.push($)}}function g(ie,$){if(!l)return null;for(;$!==null;)u(ie,$),$=$.sibling;return null}function b(ie,$){for(ie=new Map;$!==null;)$.key!==null?ie.set($.key,$):ie.set($.index,$),$=$.sibling;return ie}function S(ie,$){return(ie=us(ie,$)).index=0,ie.sibling=null,ie}function C(ie,$,ee){return ie.index=ee,l?(ee=ie.alternate)!==null?(ee=ee.index)<$?(ie.flags|=2,$):ee:(ie.flags|=2,$):(ie.flags|=1048576,$)}function B(ie){return l&&ie.alternate===null&&(ie.flags|=2),ie}function G(ie,$,ee,oe){return $===null||$.tag!==6?(($=K0(ee,ie.mode,oe)).return=ie,$):(($=S($,ee)).return=ie,$)}function K(ie,$,ee,oe){var ke=ee.type;return ke===h?ne(ie,$,ee.props.children,oe,ee.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===y&&Z1(ke)===$.type)?((oe=S($,ee.props)).ref=al(ie,$,ee),oe.return=ie,oe):((oe=Xc(ee.type,ee.key,ee.props,null,ie.mode,oe)).ref=al(ie,$,ee),oe.return=ie,oe)}function te(ie,$,ee,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?(($=Q0(ee,ie.mode,oe)).return=ie,$):(($=S($,ee.children||[])).return=ie,$)}function ne(ie,$,ee,oe,ke){return $===null||$.tag!==7?(($=to(ee,ie.mode,oe,ke)).return=ie,$):(($=S($,ee)).return=ie,$)}function he(ie,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number")return($=K0(""+$,ie.mode,ee)).return=ie,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case a:return(ee=Xc($.type,$.key,$.props,null,ie.mode,ee)).ref=al(ie,null,$),ee.return=ie,ee;case d:return($=Q0($,ie.mode,ee)).return=ie,$;case y:return he(ie,(0,$._init)($._payload),ee)}if(Q($)||P($))return($=to($,ie.mode,ee,null)).return=ie,$;bc(ie,$)}return null}function re(ie,$,ee,oe){var ke=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ke!==null?null:G(ie,$,""+ee,oe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:return ee.key===ke?K(ie,$,ee,oe):null;case d:return ee.key===ke?te(ie,$,ee,oe):null;case y:return re(ie,$,(ke=ee._init)(ee._payload),oe)}if(Q(ee)||P(ee))return ke!==null?null:ne(ie,$,ee,oe,null);bc(ie,ee)}return null}function le(ie,$,ee,oe,ke){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G($,ie=ie.get(ee)||null,""+oe,ke);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case a:return K($,ie=ie.get(oe.key===null?ee:oe.key)||null,oe,ke);case d:return te($,ie=ie.get(oe.key===null?ee:oe.key)||null,oe,ke);case y:return le(ie,$,ee,(0,oe._init)(oe._payload),ke)}if(Q(oe)||P(oe))return ne($,ie=ie.get(ee)||null,oe,ke,null);bc($,oe)}return null}function Se(ie,$,ee,oe){for(var ke=null,qe=null,Ee=$,Xe=$=0,Zt=null;Ee!==null&&Xe<ee.length;Xe++){Ee.index>Xe?(Zt=Ee,Ee=null):Zt=Ee.sibling;var Ze=re(ie,Ee,ee[Xe],oe);if(Ze===null){Ee===null&&(Ee=Zt);break}l&&Ee&&Ze.alternate===null&&u(ie,Ee),$=C(Ze,$,Xe),qe===null?ke=Ze:qe.sibling=Ze,qe=Ze,Ee=Zt}if(Xe===ee.length)return g(ie,Ee),ht&&Ks(ie,Xe),ke;if(Ee===null){for(;Xe<ee.length;Xe++)(Ee=he(ie,ee[Xe],oe))!==null&&($=C(Ee,$,Xe),qe===null?ke=Ee:qe.sibling=Ee,qe=Ee);return ht&&Ks(ie,Xe),ke}for(Ee=b(ie,Ee);Xe<ee.length;Xe++)(Zt=le(Ee,ie,Xe,ee[Xe],oe))!==null&&(l&&Zt.alternate!==null&&Ee.delete(Zt.key===null?Xe:Zt.key),$=C(Zt,$,Xe),qe===null?ke=Zt:qe.sibling=Zt,qe=Zt);return l&&Ee.forEach(function(cs){return u(ie,cs)}),ht&&Ks(ie,Xe),ke}function Fe(ie,$,ee,oe){var ke=P(ee);if(typeof ke!="function")throw Error(s(150));if((ee=ke.call(ee))==null)throw Error(s(151));for(var qe=ke=null,Ee=$,Xe=$=0,Zt=null,Ze=ee.next();Ee!==null&&!Ze.done;Xe++,Ze=ee.next()){Ee.index>Xe?(Zt=Ee,Ee=null):Zt=Ee.sibling;var cs=re(ie,Ee,Ze.value,oe);if(cs===null){Ee===null&&(Ee=Zt);break}l&&Ee&&cs.alternate===null&&u(ie,Ee),$=C(cs,$,Xe),qe===null?ke=cs:qe.sibling=cs,qe=cs,Ee=Zt}if(Ze.done)return g(ie,Ee),ht&&Ks(ie,Xe),ke;if(Ee===null){for(;!Ze.done;Xe++,Ze=ee.next())(Ze=he(ie,Ze.value,oe))!==null&&($=C(Ze,$,Xe),qe===null?ke=Ze:qe.sibling=Ze,qe=Ze);return ht&&Ks(ie,Xe),ke}for(Ee=b(ie,Ee);!Ze.done;Xe++,Ze=ee.next())(Ze=le(Ee,ie,Xe,Ze.value,oe))!==null&&(l&&Ze.alternate!==null&&Ee.delete(Ze.key===null?Xe:Ze.key),$=C(Ze,$,Xe),qe===null?ke=Ze:qe.sibling=Ze,qe=Ze);return l&&Ee.forEach(function(PC){return u(ie,PC)}),ht&&Ks(ie,Xe),ke}return function ie($,ee,oe,ke){if(typeof oe=="object"&&oe!==null&&oe.type===h&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case a:e:{for(var qe=oe.key,Ee=ee;Ee!==null;){if(Ee.key===qe){if((qe=oe.type)===h){if(Ee.tag===7){g($,Ee.sibling),(ee=S(Ee,oe.props.children)).return=$,$=ee;break e}}else if(Ee.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===y&&Z1(qe)===Ee.type){g($,Ee.sibling),(ee=S(Ee,oe.props)).ref=al($,Ee,oe),ee.return=$,$=ee;break e}g($,Ee);break}u($,Ee),Ee=Ee.sibling}oe.type===h?((ee=to(oe.props.children,$.mode,ke,oe.key)).return=$,$=ee):((ke=Xc(oe.type,oe.key,oe.props,null,$.mode,ke)).ref=al($,ee,oe),ke.return=$,$=ke)}return B($);case d:e:{for(Ee=oe.key;ee!==null;){if(ee.key===Ee){if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){g($,ee.sibling),(ee=S(ee,oe.children||[])).return=$,$=ee;break e}g($,ee);break}u($,ee),ee=ee.sibling}(ee=Q0(oe,$.mode,ke)).return=$,$=ee}return B($);case y:return ie($,ee,(Ee=oe._init)(oe._payload),ke)}if(Q(oe))return Se($,ee,oe,ke);if(P(oe))return Fe($,ee,oe,ke);bc($,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(g($,ee.sibling),(ee=S(ee,oe)).return=$,$=ee):(g($,ee),(ee=K0(oe,$.mode,ke)).return=$,$=ee),B($)):g($,ee)}}var $o=J1(!0),ex=J1(!1),ll={},nn=es(ll),ul=es(ll),Vo=es(ll);function ri(l){if(l===ll)throw Error(s(174));return l}function c0(l,u){it(Vo,u),it(ul,l),it(nn,ll),l=Z(u),ct(nn),it(nn,l)}function Xo(){ct(nn),ct(ul),ct(Vo)}function tx(l){var u=ri(Vo.current),g=ri(nn.current);g!==(u=F(g,l.type,u))&&(it(ul,l),it(nn,u))}function h0(l){ul.current===l&&(ct(nn),ct(ul))}var wt=es(0);function wc(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&((g=g.dehydrated)===null||_n(g)||Oo(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((128&u.flags)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var d0=[];function f0(){for(var l=0;l<d0.length;l++){var u=d0[l];Je?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}d0.length=0}var Sc=o.ReactCurrentDispatcher,p0=o.ReactCurrentBatchConfig,qs=0,gt=null,Gt=null,Wt=null,Ec=!1,cl=!1,hl=0,oC=0;function ar(){throw Error(s(321))}function m0(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!wn(l[g],u[g]))return!1;return!0}function g0(l,u,g,b,S,C){if(qs=C,gt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Sc.current=l===null||l.memoizedState===null?cC:hC,l=g(b,S),cl){C=0;do{if(cl=!1,hl=0,25<=C)throw Error(s(301));C+=1,Wt=Gt=null,u.updateQueue=null,Sc.current=dC,l=g(b,S)}while(cl)}if(Sc.current=Ac,u=Gt!==null&&Gt.next!==null,qs=0,Wt=Gt=gt=null,Ec=!1,u)throw Error(s(300));return l}function v0(){var l=hl!==0;return hl=0,l}function ni(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?gt.memoizedState=Wt=l:Wt=Wt.next=l,Wt}function sn(){if(Gt===null){var l=gt.alternate;l=l!==null?l.memoizedState:null}else l=Gt.next;var u=Wt===null?gt.memoizedState:Wt.next;if(u!==null)Wt=u,Gt=l;else{if(l===null)throw Error(s(310));l={memoizedState:(Gt=l).memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Wt===null?gt.memoizedState=Wt=l:Wt=Wt.next=l}return Wt}function dl(l,u){return typeof u=="function"?u(l):u}function x0(l){var u=sn(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var b=Gt,S=b.baseQueue,C=g.pending;if(C!==null){if(S!==null){var B=S.next;S.next=C.next,C.next=B}b.baseQueue=S=C,g.pending=null}if(S!==null){C=S.next,b=b.baseState;var G=B=null,K=null,te=C;do{var ne=te.lane;if((qs&ne)===ne)K!==null&&(K=K.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),b=te.hasEagerState?te.eagerState:l(b,te.action);else{var he={lane:ne,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};K===null?(G=K=he,B=b):K=K.next=he,gt.lanes|=ne,Zs|=ne}te=te.next}while(te!==null&&te!==C);K===null?B=b:K.next=G,wn(b,u.memoizedState)||(Er=!0),u.memoizedState=b,u.baseState=B,u.baseQueue=K,g.lastRenderedState=b}if((l=g.interleaved)!==null){S=l;do C=S.lane,gt.lanes|=C,Zs|=C,S=S.next;while(S!==l)}else S===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function y0(l){var u=sn(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var b=g.dispatch,S=g.pending,C=u.memoizedState;if(S!==null){g.pending=null;var B=S=S.next;do C=l(C,B.action),B=B.next;while(B!==S);wn(C,u.memoizedState)||(Er=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),g.lastRenderedState=C}return[C,b]}function rx(){}function nx(l,u){var g=gt,b=sn(),S=u(),C=!wn(b.memoizedState,S);if(C&&(b.memoizedState=S,Er=!0),b=b.queue,_0(ox.bind(null,g,b,l),[l]),b.getSnapshot!==u||C||Wt!==null&&1&Wt.memoizedState.tag){if(g.flags|=2048,fl(9,sx.bind(null,g,b,S,u),void 0,null),jt===null)throw Error(s(349));(30&qs)!=0||ix(g,u,S)}return S}function ix(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},(u=gt.updateQueue)===null?(u={lastEffect:null,stores:null},gt.updateQueue=u,u.stores=[l]):(g=u.stores)===null?u.stores=[l]:g.push(l)}function sx(l,u,g,b){u.value=g,u.getSnapshot=b,ax(u)&&lx(l)}function ox(l,u,g){return g(function(){ax(u)&&lx(l)})}function ax(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!wn(l,g)}catch{return!0}}function lx(l){var u=ti(l,1);u!==null&&on(u,l,1,-1)}function ux(l){var u=ni();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dl,lastRenderedState:l},u.queue=l,l=l.dispatch=uC.bind(null,gt,l),[u.memoizedState,l]}function fl(l,u,g,b){return l={tag:l,create:u,destroy:g,deps:b,next:null},(u=gt.updateQueue)===null?(u={lastEffect:null,stores:null},gt.updateQueue=u,u.lastEffect=l.next=l):(g=u.lastEffect)===null?u.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,u.lastEffect=l),l}function cx(){return sn().memoizedState}function Tc(l,u,g,b){var S=ni();gt.flags|=l,S.memoizedState=fl(1|u,g,void 0,b===void 0?null:b)}function Cc(l,u,g,b){var S=sn();b=b===void 0?null:b;var C=void 0;if(Gt!==null){var B=Gt.memoizedState;if(C=B.destroy,b!==null&&m0(b,B.deps))return void(S.memoizedState=fl(u,g,C,b))}gt.flags|=l,S.memoizedState=fl(1|u,g,C,b)}function hx(l,u){return Tc(8390656,8,l,u)}function _0(l,u){return Cc(2048,8,l,u)}function dx(l,u){return Cc(4,2,l,u)}function fx(l,u){return Cc(4,4,l,u)}function px(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function mx(l,u,g){return g=g!=null?g.concat([l]):null,Cc(4,4,px.bind(null,u,l),g)}function b0(){}function gx(l,u){var g=sn();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&m0(u,b[1])?b[0]:(g.memoizedState=[l,u],l)}function vx(l,u){var g=sn();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&m0(u,b[1])?b[0]:(l=l(),g.memoizedState=[l,u],l)}function xx(l,u,g){return(21&qs)==0?(l.baseState&&(l.baseState=!1,Er=!0),l.memoizedState=g):(wn(g,u)||(g=N1(),gt.lanes|=g,Zs|=g,l.baseState=!0),u)}function aC(l,u){var g=Ve;Ve=g!==0&&4>g?g:4,l(!0);var b=p0.transition;p0.transition={};try{l(!1),u()}finally{Ve=g,p0.transition=b}}function yx(){return sn().memoizedState}function lC(l,u,g){var b=as(l);g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},_x(l)?bx(u,g):(g=j1(l,u,g,b))!==null&&(on(g,l,b,ur()),wx(g,u,b))}function uC(l,u,g){var b=as(l),S={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(_x(l))bx(u,S);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer)!==null)try{var B=u.lastRenderedState,G=C(B,g);if(S.hasEagerState=!0,S.eagerState=G,wn(G,B)){var K=u.interleaved;return K===null?(S.next=S,o0(u)):(S.next=K.next,K.next=S),void(u.interleaved=S)}}catch{}(g=j1(l,u,S,b))!==null&&(on(g,l,b,S=ur()),wx(g,u,b))}}function _x(l){var u=l.alternate;return l===gt||u!==null&&u===gt}function bx(l,u){cl=Ec=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function wx(l,u,g){if((4194240&g)!=0){var b=u.lanes;g|=b&=l.pendingLanes,u.lanes=g,Xf(l,g)}}var Ac={readContext:rn,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},cC={readContext:rn,useCallback:function(l,u){return ni().memoizedState=[l,u===void 0?null:u],l},useContext:rn,useEffect:hx,useImperativeHandle:function(l,u,g){return g=g!=null?g.concat([l]):null,Tc(4194308,4,px.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Tc(4194308,4,l,u)},useInsertionEffect:function(l,u){return Tc(4,2,l,u)},useMemo:function(l,u){var g=ni();return u=u===void 0?null:u,l=l(),g.memoizedState=[l,u],l},useReducer:function(l,u,g){var b=ni();return u=g!==void 0?g(u):u,b.memoizedState=b.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},b.queue=l,l=l.dispatch=lC.bind(null,gt,l),[b.memoizedState,l]},useRef:function(l){return l={current:l},ni().memoizedState=l},useState:ux,useDebugValue:b0,useDeferredValue:function(l){return ni().memoizedState=l},useTransition:function(){var l=ux(!1),u=l[0];return l=aC.bind(null,l[1]),ni().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,g){var b=gt,S=ni();if(ht){if(g===void 0)throw Error(s(407));g=g()}else{if(g=u(),jt===null)throw Error(s(349));(30&qs)!=0||ix(b,u,g)}S.memoizedState=g;var C={value:g,getSnapshot:u};return S.queue=C,hx(ox.bind(null,b,C,l),[l]),b.flags|=2048,fl(9,sx.bind(null,b,C,g,u),void 0,null),g},useId:function(){var l=ni(),u=jt.identifierPrefix;if(ht){var g=Ai;u=":"+u+"R"+(g=(ei&~(1<<32-bn(ei)-1)).toString(32)+g),0<(g=hl++)&&(u+="H"+g.toString(32)),u+=":"}else u=":"+u+"r"+(g=oC++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},hC={readContext:rn,useCallback:gx,useContext:rn,useEffect:_0,useImperativeHandle:mx,useInsertionEffect:dx,useLayoutEffect:fx,useMemo:vx,useReducer:x0,useRef:cx,useState:function(){return x0(dl)},useDebugValue:b0,useDeferredValue:function(l){return xx(sn(),Gt.memoizedState,l)},useTransition:function(){return[x0(dl)[0],sn().memoizedState]},useMutableSource:rx,useSyncExternalStore:nx,useId:yx,unstable_isNewReconciler:!1},dC={readContext:rn,useCallback:gx,useContext:rn,useEffect:_0,useImperativeHandle:mx,useInsertionEffect:dx,useLayoutEffect:fx,useMemo:vx,useReducer:y0,useRef:cx,useState:function(){return y0(dl)},useDebugValue:b0,useDeferredValue:function(l){var u=sn();return Gt===null?u.memoizedState=l:xx(u,Gt.memoizedState,l)},useTransition:function(){return[y0(dl)[0],sn().memoizedState]},useMutableSource:rx,useSyncExternalStore:nx,useId:yx,unstable_isNewReconciler:!1};function Yo(l,u){try{var g="",b=u;do g+=sC(b),b=b.return;while(b);var S=g}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:u,stack:S,digest:null}}function w0(l,u,g){return{value:l,source:null,stack:g??null,digest:u??null}}function S0(l,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var fC=typeof WeakMap=="function"?WeakMap:Map;function Sx(l,u,g){(g=ki(-1,g)).tag=3,g.payload={element:null};var b=u.value;return g.callback=function(){zc||(zc=!0,G0=b),S0(0,u)},g}function Ex(l,u,g){(g=ki(-1,g)).tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var S=u.value;g.payload=function(){return b(S)},g.callback=function(){S0(0,u)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(g.callback=function(){S0(0,u),typeof b!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),g}function Tx(l,u,g){var b=l.pingCache;if(b===null){b=l.pingCache=new fC;var S=new Set;b.set(u,S)}else(S=b.get(u))===void 0&&(S=new Set,b.set(u,S));S.has(g)||(S.add(g),l=wC.bind(null,l,u,g),u.then(l,l))}function Cx(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function Ax(l,u,g,b,S){return(1&l.mode)==0?(l===u?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:((u=ki(-1,1)).tag=2,ns(g,u,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=S,l)}var pC=o.ReactCurrentOwner,Er=!1;function Tr(l,u,g,b){u.child=l===null?ex(u,null,g,b):$o(u,l.child,g,b)}function kx(l,u,g,b,S){g=g.render;var C=u.ref;return jo(u,S),b=g0(l,u,g,b,C,S),g=v0(),l===null||Er?(ht&&g&&qf(u),u.flags|=1,Tr(l,u,b,S),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,Pi(l,u,S))}function Px(l,u,g,b,S){if(l===null){var C=g.type;return typeof C!="function"||Y0(C)||C.defaultProps!==void 0||g.compare!==null||g.defaultProps!==void 0?((l=Xc(g.type,null,b,u,u.mode,S)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=C,Ix(l,u,C,b,S))}if(C=l.child,(l.lanes&S)==0){var B=C.memoizedProps;if((g=(g=g.compare)!==null?g:mc)(B,b)&&l.ref===u.ref)return Pi(l,u,S)}return u.flags|=1,(l=us(C,b)).ref=u.ref,l.return=u,u.child=l}function Ix(l,u,g,b,S){if(l!==null){var C=l.memoizedProps;if(mc(C,b)&&l.ref===u.ref){if(Er=!1,u.pendingProps=b=C,(l.lanes&S)==0)return u.lanes=l.lanes,Pi(l,u,S);(131072&l.flags)!=0&&(Er=!0)}}return E0(l,u,g,b,S)}function Rx(l,u,g){var b=u.pendingProps,S=b.children,C=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((1&u.mode)==0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Qo,Fr),Fr|=g;else{if((1073741824&g)==0)return l=C!==null?C.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,it(Qo,Fr),Fr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=C!==null?C.baseLanes:g,it(Qo,Fr),Fr|=b}else C!==null?(b=C.baseLanes|g,u.memoizedState=null):b=g,it(Qo,Fr),Fr|=b;return Tr(l,u,S,g),u.child}function Mx(l,u){var g=u.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function E0(l,u,g,b,S){var C=Lr(g)?Xs:or.current;return C=Uo(u,C),jo(u,S),g=g0(l,u,g,b,C,S),b=v0(),l===null||Er?(ht&&b&&qf(u),u.flags|=1,Tr(l,u,g,S),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,Pi(l,u,S))}function Nx(l,u,g,b,S){if(Lr(g)){var C=!0;lc(u)}else C=!1;if(jo(u,S),u.stateNode===null)Rc(l,u),Q1(u,g,b),u0(u,g,b,S),b=!0;else if(l===null){var B=u.stateNode,G=u.memoizedProps;B.props=G;var K=B.context,te=g.contextType;typeof te=="object"&&te!==null?te=rn(te):te=Uo(u,te=Lr(g)?Xs:or.current);var ne=g.getDerivedStateFromProps,he=typeof ne=="function"||typeof B.getSnapshotBeforeUpdate=="function";he||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(G!==b||K!==te)&&q1(u,B,b,te),rs=!1;var re=u.memoizedState;B.state=re,yc(u,b,B,S),K=u.memoizedState,G!==b||re!==K||Sr.current||rs?(typeof ne=="function"&&(l0(u,g,ne,b),K=u.memoizedState),(G=rs||K1(u,g,G,b,re,K,te))?(he||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=K),B.props=b,B.state=K,B.context=te,b=G):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{B=u.stateNode,$1(l,u),G=u.memoizedProps,te=u.type===u.elementType?G:En(u.type,G),B.props=te,he=u.pendingProps,re=B.context,typeof(K=g.contextType)=="object"&&K!==null?K=rn(K):K=Uo(u,K=Lr(g)?Xs:or.current);var le=g.getDerivedStateFromProps;(ne=typeof le=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(G!==he||re!==K)&&q1(u,B,b,K),rs=!1,re=u.memoizedState,B.state=re,yc(u,b,B,S);var Se=u.memoizedState;G!==he||re!==Se||Sr.current||rs?(typeof le=="function"&&(l0(u,g,le,b),Se=u.memoizedState),(te=rs||K1(u,g,te,b,re,Se,K)||!1)?(ne||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(b,Se,K),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(b,Se,K)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=Se),B.props=b,B.state=Se,B.context=K,b=te):(typeof B.componentDidUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),b=!1)}return T0(l,u,g,b,C,S)}function T0(l,u,g,b,S,C){Mx(l,u);var B=(128&u.flags)!=0;if(!b&&!B)return S&&M1(u,g,!1),Pi(l,u,C);b=u.stateNode,pC.current=u;var G=B&&typeof g.getDerivedStateFromError!="function"?null:b.render();return u.flags|=1,l!==null&&B?(u.child=$o(u,l.child,null,C),u.child=$o(u,null,G,C)):Tr(l,u,G,C),u.memoizedState=b.state,S&&M1(u,g,!0),u.child}function Bx(l){var u=l.stateNode;u.pendingContext?I1(0,u.pendingContext,u.pendingContext!==u.context):u.context&&I1(0,u.context,!1),c0(l,u.containerInfo)}function Dx(l,u,g,b,S){return Go(),t0(S),u.flags|=256,Tr(l,u,g,b),u.child}var pl,ml,kc,Pc,C0={dehydrated:null,treeContext:null,retryLane:0};function A0(l){return{baseLanes:l,cachePool:null,transitions:null}}function Lx(l,u,g){var b,S=u.pendingProps,C=wt.current,B=!1,G=(128&u.flags)!=0;if((b=G)||(b=(l===null||l.memoizedState!==null)&&(2&C)!=0),b?(B=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(C|=1),it(wt,1&C),l===null)return e0(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?((1&u.mode)==0?u.lanes=1:Oo(l)?u.lanes=8:u.lanes=1073741824,null):(G=S.children,l=S.fallback,B?(S=u.mode,B=u.child,G={mode:"hidden",children:G},(1&S)==0&&B!==null?(B.childLanes=0,B.pendingProps=G):B=Yc(G,S,0,null),l=to(l,S,g,null),B.return=u,l.return=u,B.sibling=l,u.child=B,u.child.memoizedState=A0(g),u.memoizedState=C0,l):k0(u,G));if((C=l.memoizedState)!==null&&(b=C.dehydrated)!==null)return function(te,ne,he,re,le,Se,Fe){if(he)return 256&ne.flags?(ne.flags&=-257,Ic(te,ne,Fe,re=w0(Error(s(422))))):ne.memoizedState!==null?(ne.child=te.child,ne.flags|=128,null):(Se=re.fallback,le=ne.mode,re=Yc({mode:"visible",children:re.children},le,0,null),(Se=to(Se,le,Fe,null)).flags|=2,re.return=ne,Se.return=ne,re.sibling=Se,ne.child=re,(1&ne.mode)!=0&&$o(ne,te.child,null,Fe),ne.child.memoizedState=A0(Fe),ne.memoizedState=C0,Se);if((1&ne.mode)==0)return Ic(te,ne,Fe,null);if(Oo(le))return re=Ff(le).digest,Se=Error(s(419)),re=w0(Se,re,void 0),Ic(te,ne,Fe,re);if(he=(Fe&te.childLanes)!=0,Er||he){if((re=jt)!==null){switch(Fe&-Fe){case 4:le=2;break;case 16:le=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:le=32;break;case 536870912:le=268435456;break;default:le=0}(le=(le&(re.suspendedLanes|Fe))!=0?0:le)!==0&&le!==Se.retryLane&&(Se.retryLane=le,ti(te,le),on(re,te,le,-1))}return X0(),Ic(te,ne,Fe,re=w0(Error(s(421))))}return _n(le)?(ne.flags|=128,ne.child=te.child,ne=SC.bind(null,te),DT(le,ne),null):(te=Se.treeContext,Me&&(tn=FT(le),Or=ne,ht=!0,Sn=null,ol=!1,te!==null&&(Jr[en++]=ei,Jr[en++]=Ai,Jr[en++]=Ys,ei=te.id,Ai=te.overflow,Ys=ne)),ne=k0(ne,re.children),ne.flags|=4096,ne)}(l,u,G,S,b,C,g);if(B){B=S.fallback,G=u.mode,b=(C=l.child).sibling;var K={mode:"hidden",children:S.children};return(1&G)==0&&u.child!==C?((S=u.child).childLanes=0,S.pendingProps=K,u.deletions=null):(S=us(C,K)).subtreeFlags=14680064&C.subtreeFlags,b!==null?B=us(b,B):(B=to(B,G,g,null)).flags|=2,B.return=u,S.return=u,S.sibling=B,u.child=S,S=B,B=u.child,G=(G=l.child.memoizedState)===null?A0(g):{baseLanes:G.baseLanes|g,cachePool:null,transitions:G.transitions},B.memoizedState=G,B.childLanes=l.childLanes&~g,u.memoizedState=C0,S}return l=(B=l.child).sibling,S=us(B,{mode:"visible",children:S.children}),(1&u.mode)==0&&(S.lanes=g),S.return=u,S.sibling=null,l!==null&&((g=u.deletions)===null?(u.deletions=[l],u.flags|=16):g.push(l)),u.child=S,u.memoizedState=null,S}function k0(l,u){return(u=Yc({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function Ic(l,u,g,b){return b!==null&&t0(b),$o(u,l.child,null,g),(l=k0(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function Ox(l,u,g){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),s0(l.return,u,g)}function P0(l,u,g,b,S){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:S}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=b,C.tail=g,C.tailMode=S)}function Fx(l,u,g){var b=u.pendingProps,S=b.revealOrder,C=b.tail;if(Tr(l,u,b.children,g),(2&(b=wt.current))!=0)b=1&b|2,u.flags|=128;else{if(l!==null&&(128&l.flags)!=0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Ox(l,g,u);else if(l.tag===19)Ox(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(it(wt,b),(1&u.mode)==0)u.memoizedState=null;else switch(S){case"forwards":for(g=u.child,S=null;g!==null;)(l=g.alternate)!==null&&wc(l)===null&&(S=g),g=g.sibling;(g=S)===null?(S=u.child,u.child=null):(S=g.sibling,g.sibling=null),P0(u,!1,S,g,C);break;case"backwards":for(g=null,S=u.child,u.child=null;S!==null;){if((l=S.alternate)!==null&&wc(l)===null){u.child=S;break}l=S.sibling,S.sibling=g,g=S,S=l}P0(u,!0,g,null,C);break;case"together":P0(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Rc(l,u){(1&u.mode)==0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function Pi(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),Zs|=u.lanes,(g&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(g=us(l=u.child,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,(g=g.sibling=us(l,l.pendingProps)).return=u;g.sibling=null}return u.child}function ii(l){l.flags|=4}function Ux(l,u){if(l!==null&&l.child===u.child)return!0;if((16&u.flags)!=0)return!1;for(l=u.child;l!==null;){if((12854&l.flags)!=0||(12854&l.subtreeFlags)!=0)return!1;l=l.sibling}return!0}if(Le)pl=function(l,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)j(l,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},ml=function(){},kc=function(l,u,g,b,S){if((l=l.memoizedProps)!==b){var C=u.stateNode,B=ri(nn.current);g=q(C,g,l,b,S,B),(u.updateQueue=g)&&ii(u)}},Pc=function(l,u,g,b){g!==b&&ii(u)};else if(Qe){pl=function(l,u,g,b){for(var S=u.child;S!==null;){if(S.tag===5){var C=S.stateNode;g&&b&&(C=sc(C,S.type,S.memoizedProps,S)),j(l,C)}else if(S.tag===6)C=S.stateNode,g&&b&&(C=rl(C,S.memoizedProps,S)),j(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),pl(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var Hx=function(l,u,g,b){for(var S=u.child;S!==null;){if(S.tag===5){var C=S.stateNode;g&&b&&(C=sc(C,S.type,S.memoizedProps,S)),nc(l,C)}else if(S.tag===6)C=S.stateNode,g&&b&&(C=rl(C,S.memoizedProps,S)),nc(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),Hx(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};ml=function(l,u){var g=u.stateNode;if(!Ux(l,u)){l=g.containerInfo;var b=rc(l);Hx(b,u,!1,!1),g.pendingChildren=b,ii(u),ic(l,b)}},kc=function(l,u,g,b,S){var C=l.stateNode,B=l.memoizedProps;if((l=Ux(l,u))&&B===b)u.stateNode=C;else{var G=u.stateNode,K=ri(nn.current),te=null;B!==b&&(te=q(G,g,B,b,S,K)),l&&te===null?u.stateNode=C:(C=Lf(C,te,g,B,b,u,l,G),J(C,g,b,S,K)&&ii(u),u.stateNode=C,l?ii(u):pl(C,u,!1,!1))}},Pc=function(l,u,g,b){g!==b?(l=ri(Vo.current),g=ri(nn.current),u.stateNode=pe(b,l,g,u),ii(u)):u.stateNode=l.stateNode}}else ml=function(){},kc=function(){},Pc=function(){};function gl(l,u){if(!ht)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function gr(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(u)for(var S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=14680064&S.subtreeFlags,b|=14680064&S.flags,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=b,l.childLanes=g,u}function mC(l,u,g){var b=u.pendingProps;switch(Zf(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gr(u),null;case 1:case 17:return Lr(u.type)&&Gf(),gr(u),null;case 3:return g=u.stateNode,Xo(),ct(Sr),ct(or),f0(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),l!==null&&l.child!==null||(pc(u)?ii(u):l===null||l.memoizedState.isDehydrated&&(256&u.flags)==0||(u.flags|=1024,Sn!==null&&($0(Sn),Sn=null))),ml(l,u),gr(u),null;case 5:h0(u),g=ri(Vo.current);var S=u.type;if(l!==null&&u.stateNode!=null)kc(l,u,S,b,g),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!b){if(u.stateNode===null)throw Error(s(166));return gr(u),null}if(l=ri(nn.current),pc(u)){if(!Me)throw Error(s(175));l=UT(u.stateNode,u.type,u.memoizedProps,g,l,u,!ol),u.updateQueue=l,l!==null&&ii(u)}else{var C=U(S,b,g,l,u);pl(C,u,!1,!1),u.stateNode=C,J(C,S,b,g,l)&&ii(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return gr(u),null;case 6:if(l&&u.stateNode!=null)Pc(l,u,l.memoizedProps,b);else{if(typeof b!="string"&&u.stateNode===null)throw Error(s(166));if(l=ri(Vo.current),g=ri(nn.current),pc(u)){if(!Me)throw Error(s(176));if(l=u.stateNode,g=u.memoizedProps,(b=HT(l,g,u,!ol))&&(S=Or)!==null)switch(S.tag){case 3:YT(S.stateNode.containerInfo,l,g,(1&S.mode)!=0);break;case 5:KT(S.type,S.memoizedProps,S.stateNode,l,g,(1&S.mode)!=0)}b&&ii(u)}else u.stateNode=pe(b,l,g,u)}return gr(u),null;case 13:if(ct(wt),b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(ht&&tn!==null&&(1&u.mode)!=0&&(128&u.flags)==0)G1(),Go(),u.flags|=98560,S=!1;else if(S=pc(u),b!==null&&b.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!Me)throw Error(s(344));if(!(S=(S=u.memoizedState)!==null?S.dehydrated:null))throw Error(s(317));zT(S,u)}else Go(),(128&u.flags)==0&&(u.memoizedState=null),u.flags|=4;gr(u),S=!1}else Sn!==null&&($0(Sn),Sn=null),S=!0;if(!S)return 65536&u.flags?u:null}return(128&u.flags)!=0?(u.lanes=g,u):((g=b!==null)!=(l!==null&&l.memoizedState!==null)&&g&&(u.child.flags|=8192,(1&u.mode)!=0&&(l===null||(1&wt.current)!=0?Lt===0&&(Lt=3):X0())),u.updateQueue!==null&&(u.flags|=4),gr(u),null);case 4:return Xo(),ml(l,u),l===null&&Qt(u.stateNode.containerInfo),gr(u),null;case 10:return i0(u.type._context),gr(u),null;case 19:if(ct(wt),(S=u.memoizedState)===null)return gr(u),null;if(b=(128&u.flags)!=0,(C=S.rendering)===null)if(b)gl(S,!1);else{if(Lt!==0||l!==null&&(128&l.flags)!=0)for(l=u.child;l!==null;){if((C=wc(l))!==null){for(u.flags|=128,gl(S,!1),(l=C.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=g,g=u.child;g!==null;)S=l,(b=g).flags&=14680066,(C=b.alternate)===null?(b.childLanes=0,b.lanes=S,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=C.childLanes,b.lanes=C.lanes,b.child=C.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=C.memoizedProps,b.memoizedState=C.memoizedState,b.updateQueue=C.updateQueue,b.type=C.type,S=C.dependencies,b.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),g=g.sibling;return it(wt,1&wt.current|2),u.child}l=l.sibling}S.tail!==null&&zt()>z0&&(u.flags|=128,b=!0,gl(S,!1),u.lanes=4194304)}else{if(!b)if((l=wc(C))!==null){if(u.flags|=128,b=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),gl(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!ht)return gr(u),null}else 2*zt()-S.renderingStartTime>z0&&g!==1073741824&&(u.flags|=128,b=!0,gl(S,!1),u.lanes=4194304);S.isBackwards?(C.sibling=u.child,u.child=C):((l=S.last)!==null?l.sibling=C:u.child=C,S.last=C)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=zt(),u.sibling=null,l=wt.current,it(wt,b?1&l|2:1&l),u):(gr(u),null);case 22:case 23:return V0(),g=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==g&&(u.flags|=8192),g&&(1&u.mode)!=0?(1073741824&Fr)!=0&&(gr(u),Le&&6&u.subtreeFlags&&(u.flags|=8192)):gr(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function gC(l,u){switch(Zf(u),u.tag){case 1:return Lr(u.type)&&Gf(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return Xo(),ct(Sr),ct(or),f0(),(65536&(l=u.flags))!=0&&(128&l)==0?(u.flags=-65537&l|128,u):null;case 5:return h0(u),null;case 13:if(ct(wt),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));Go()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return ct(wt),null;case 4:return Xo(),null;case 10:return i0(u.type._context),null;case 22:case 23:return V0(),null;default:return null}}var Mc=!1,lr=!1,vC=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Ko(l,u){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){dt(l,u,b)}else g.current=null}function zx(l,u,g){try{g()}catch(b){dt(l,u,b)}}var Gx=!1;function vl(l,u,g){var b=u.updateQueue;if((b=b!==null?b.lastEffect:null)!==null){var S=b=b.next;do{if((S.tag&l)===l){var C=S.destroy;S.destroy=void 0,C!==void 0&&zx(u,g,C)}S=S.next}while(S!==b)}}function Nc(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var g=u=u.next;do{if((g.tag&l)===l){var b=g.create;g.destroy=b()}g=g.next}while(g!==u)}}function I0(l){var u=l.ref;if(u!==null){var g=l.stateNode;l.tag===5?l=X(g):l=g,typeof u=="function"?u(l):u.current=l}}function Wx(l){var u=l.alternate;u!==null&&(l.alternate=null,Wx(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&qi(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function jx(l){return l.tag===5||l.tag===3||l.tag===4}function $x(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||jx(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function R0(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?Qu(g,l,u):Yu(g,l);else if(b!==4&&(l=l.child)!==null)for(R0(l,u,g),l=l.sibling;l!==null;)R0(l,u,g),l=l.sibling}function M0(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?Mf(g,l,u):Rf(g,l);else if(b!==4&&(l=l.child)!==null)for(M0(l,u,g),l=l.sibling;l!==null;)M0(l,u,g),l=l.sibling}var vr=null,si=!1;function oi(l,u,g){for(g=g.child;g!==null;)N0(l,u,g),g=g.sibling}function N0(l,u,g){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(cc,g)}catch{}switch(g.tag){case 5:lr||Ko(g,u);case 6:if(Le){var b=vr,S=si;vr=null,oi(l,u,g),si=S,(vr=b)!==null&&(si?Nf(vr,g.stateNode):qu(vr,g.stateNode))}else oi(l,u,g);break;case 18:Le&&vr!==null&&(si?VT(vr,g.stateNode):$T(vr,g.stateNode));break;case 4:Le?(b=vr,S=si,vr=g.stateNode.containerInfo,si=!0,oi(l,u,g),vr=b,si=S):(Qe&&(b=g.stateNode.containerInfo,S=rc(b),tl(b,S)),oi(l,u,g));break;case 0:case 11:case 14:case 15:if(!lr&&(b=g.updateQueue)!==null&&(b=b.lastEffect)!==null){S=b=b.next;do{var C=S,B=C.destroy;C=C.tag,B!==void 0&&((2&C)!=0||(4&C)!=0)&&zx(g,u,B),S=S.next}while(S!==b)}oi(l,u,g);break;case 1:if(!lr&&(Ko(g,u),typeof(b=g.stateNode).componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(G){dt(g,u,G)}oi(l,u,g);break;case 21:oi(l,u,g);break;case 22:1&g.mode?(lr=(b=lr)||g.memoizedState!==null,oi(l,u,g),lr=b):oi(l,u,g);break;default:oi(l,u,g)}}function Vx(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new vC),u.forEach(function(b){var S=EC.bind(null,l,b);g.has(b)||(g.add(b),b.then(S,S))})}}function Tn(l,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var S=g[b];try{var C=l,B=u;if(Le){var G=B;e:for(;G!==null;){switch(G.tag){case 5:vr=G.stateNode,si=!1;break e;case 3:case 4:vr=G.stateNode.containerInfo,si=!0;break e}G=G.return}if(vr===null)throw Error(s(160));N0(C,B,S),vr=null,si=!1}else N0(C,B,S);var K=S.alternate;K!==null&&(K.return=null),S.return=null}catch(te){dt(S,u,te)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)Xx(u,l),u=u.sibling}function Xx(l,u){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Tn(u,l),ai(l),4&b){try{vl(3,l,l.return),Nc(3,l)}catch(re){dt(l,l.return,re)}try{vl(5,l,l.return)}catch(re){dt(l,l.return,re)}}break;case 1:Tn(u,l),ai(l),512&b&&g!==null&&Ko(g,g.return);break;case 5:if(Tn(u,l),ai(l),512&b&&g!==null&&Ko(g,g.return),Le){if(32&l.flags){var S=l.stateNode;try{Zu(S)}catch(re){dt(l,l.return,re)}}if(4&b&&(S=l.stateNode)!=null){var C=l.memoizedProps;if(g=g!==null?g.memoizedProps:C,b=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{Vs(S,u,b,g,C,l)}catch(re){dt(l,l.return,re)}}}break;case 6:if(Tn(u,l),ai(l),4&b&&Le){if(l.stateNode===null)throw Error(s(162));S=l.stateNode,C=l.memoizedProps,g=g!==null?g.memoizedProps:C;try{Ku(S,g,C)}catch(re){dt(l,l.return,re)}}break;case 3:if(Tn(u,l),ai(l),4&b){if(Le&&Me&&g!==null&&g.memoizedState.isDehydrated)try{WT(u.containerInfo)}catch(re){dt(l,l.return,re)}if(Qe){S=u.containerInfo,C=u.pendingChildren;try{tl(S,C)}catch(re){dt(l,l.return,re)}}}break;case 4:if(Tn(u,l),ai(l),4&b&&Qe){S=(C=l.stateNode).containerInfo,C=C.pendingChildren;try{tl(S,C)}catch(re){dt(l,l.return,re)}}break;case 13:Tn(u,l),ai(l),8192&(S=l.child).flags&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(H0=zt())),4&b&&Vx(l);break;case 22:var B=g!==null&&g.memoizedState!==null;if(1&l.mode?(lr=(g=lr)||B,Tn(u,l),lr=g):Tn(u,l),ai(l),8192&b){if(g=l.memoizedState!==null,(l.stateNode.isHidden=g)&&!B&&(1&l.mode)!=0)for(xe=l,b=l.child;b!==null;){for(u=xe=b;xe!==null;){var G=(B=xe).child;switch(B.tag){case 0:case 11:case 14:case 15:vl(4,B,B.return);break;case 1:Ko(B,B.return);var K=B.stateNode;if(typeof K.componentWillUnmount=="function"){var te=B,ne=B.return;try{var he=te;K.props=he.memoizedProps,K.state=he.memoizedState,K.componentWillUnmount()}catch(re){dt(te,ne,re)}}break;case 5:Ko(B,B.return);break;case 22:if(B.memoizedState!==null){Qx(u);continue}}G!==null?(G.return=B,xe=G):Qx(u)}b=b.sibling}if(Le){e:if(b=null,Le)for(u=l;;){if(u.tag===5){if(b===null){b=u;try{S=u.stateNode,g?Ju(S):ec(u.stateNode,u.memoizedProps)}catch(re){dt(l,l.return,re)}}}else if(u.tag===6){if(b===null)try{C=u.stateNode,g?Bf(C):Df(C,u.memoizedProps)}catch(re){dt(l,l.return,re)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;b===u&&(b=null),u=u.return}b===u&&(b=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:Tn(u,l),ai(l),4&b&&Vx(l);break;case 21:break;default:Tn(u,l),ai(l)}}function ai(l){var u=l.flags;if(2&u){try{if(Le){e:{for(var g=l.return;g!==null;){if(jx(g)){var b=g;break e}g=g.return}throw Error(s(160))}switch(b.tag){case 5:var S=b.stateNode;32&b.flags&&(Zu(S),b.flags&=-33),M0(l,$x(l),S);break;case 3:case 4:var C=b.stateNode.containerInfo;R0(l,$x(l),C);break;default:throw Error(s(161))}}}catch(B){dt(l,l.return,B)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function xC(l,u,g){xe=l,Yx(l)}function Yx(l,u,g){for(var b=(1&l.mode)!=0;xe!==null;){var S=xe,C=S.child;if(S.tag===22&&b){var B=S.memoizedState!==null||Mc;if(!B){var G=S.alternate,K=G!==null&&G.memoizedState!==null||lr;G=Mc;var te=lr;if(Mc=B,(lr=K)&&!te)for(xe=S;xe!==null;)K=(B=xe).child,B.tag===22&&B.memoizedState!==null?qx(S):K!==null?(K.return=B,xe=K):qx(S);for(;C!==null;)xe=C,Yx(C),C=C.sibling;xe=S,Mc=G,lr=te}Kx(l)}else(8772&S.subtreeFlags)!=0&&C!==null?(C.return=S,xe=C):Kx(l)}}function Kx(l){for(;xe!==null;){var u=xe;if((8772&u.flags)!=0){var g=u.alternate;try{if((8772&u.flags)!=0)switch(u.tag){case 0:case 11:case 15:lr||Nc(5,u);break;case 1:var b=u.stateNode;if(4&u.flags&&!lr)if(g===null)b.componentDidMount();else{var S=u.elementType===u.type?g.memoizedProps:En(u.type,g.memoizedProps);b.componentDidUpdate(S,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&X1(u,C,b);break;case 3:var B=u.updateQueue;if(B!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=X(u.child.stateNode);break;case 1:g=u.child.stateNode}X1(u,B,g)}break;case 5:var G=u.stateNode;g===null&&4&u.flags&&Ji(G,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Me&&u.memoizedState===null){var K=u.alternate;if(K!==null){var te=K.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&jT(ne)}}}break;default:throw Error(s(163))}lr||512&u.flags&&I0(u)}catch(he){dt(u,u.return,he)}}if(u===l){xe=null;break}if((g=u.sibling)!==null){g.return=u.return,xe=g;break}xe=u.return}}function Qx(l){for(;xe!==null;){var u=xe;if(u===l){xe=null;break}var g=u.sibling;if(g!==null){g.return=u.return,xe=g;break}xe=u.return}}function qx(l){for(;xe!==null;){var u=xe;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{Nc(4,u)}catch(K){dt(u,g,K)}break;case 1:var b=u.stateNode;if(typeof b.componentDidMount=="function"){var S=u.return;try{b.componentDidMount()}catch(K){dt(u,S,K)}}var C=u.return;try{I0(u)}catch(K){dt(u,C,K)}break;case 5:var B=u.return;try{I0(u)}catch(K){dt(u,B,K)}}}catch(K){dt(u,u.return,K)}if(u===l){xe=null;break}var G=u.sibling;if(G!==null){G.return=u.return,xe=G;break}xe=u.return}}var Bc=0,Dc=1,Lc=2,Oc=3,Fc=4;if(typeof Symbol=="function"&&Symbol.for){var xl=Symbol.for;Bc=xl("selector.component"),Dc=xl("selector.has_pseudo_class"),Lc=xl("selector.role"),Oc=xl("selector.test_id"),Fc=xl("selector.text")}function B0(l){var u=nt(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((l=Dr(l))===null)throw Error(s(362));return l.stateNode.current}function D0(l,u){switch(u.$$typeof){case Bc:if(l.type===u.value)return!0;break;case Dc:e:{u=u.value,l=[l,0];for(var g=0;g<l.length;){var b=l[g++],S=l[g++],C=u[S];if(b.tag!==5||!qn(b)){for(;C!=null&&D0(b,C);)C=u[++S];if(S===u.length){u=!0;break e}for(b=b.child;b!==null;)l.push(b,S),b=b.sibling}}u=!1}return u;case Lc:if(l.tag===5&&Xu(l.stateNode,u.value))return!0;break;case Fc:if((l.tag===5||l.tag===6)&&(l=Qn(l))!==null&&0<=l.indexOf(u.value))return!0;break;case Oc:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function L0(l){switch(l.$$typeof){case Bc:return"<"+(R(l.value)||"Unknown")+">";case Dc:return":has("+(L0(l)||"")+")";case Lc:return'[role="'+l.value+'"]';case Fc:return'"'+l.value+'"';case Oc:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function Zx(l,u){var g=[];l=[l,0];for(var b=0;b<l.length;){var S=l[b++],C=l[b++],B=u[C];if(S.tag!==5||!qn(S)){for(;B!=null&&D0(S,B);)B=u[++C];if(C===u.length)g.push(S);else for(S=S.child;S!==null;)l.push(S,C),S=S.sibling}}return g}function O0(l,u){if(!yn)throw Error(s(363));l=Zx(l=B0(l),u),u=[],l=Array.from(l);for(var g=0;g<l.length;){var b=l[g++];if(b.tag===5)qn(b)||u.push(b.stateNode);else for(b=b.child;b!==null;)l.push(b),b=b.sibling}return u}var yC=Math.ceil,Uc=o.ReactCurrentDispatcher,F0=o.ReactCurrentOwner,Tt=o.ReactCurrentBatchConfig,Ge=0,jt=null,Rt=null,qt=0,Fr=0,Qo=es(0),Lt=0,yl=null,Zs=0,Hc=0,U0=0,_l=null,Ur=null,H0=0,z0=1/0,is=null;function qo(){z0=zt()+500}var Jx,zc=!1,G0=null,ss=null,Gc=!1,os=null,Wc=0,bl=0,W0=null,jc=-1,$c=0;function ur(){return(6&Ge)!=0?zt():jc!==-1?jc:jc=zt()}function as(l){return(1&l.mode)==0?1:(2&Ge)!=0&&qt!==0?qt&-qt:iC.transition!==null?($c===0&&($c=N1()),$c):(l=Ve)!==0?l:Br()}function on(l,u,g,b){if(50<bl)throw bl=0,W0=null,Error(s(185));sl(l,g,b),(2&Ge)!=0&&l===jt||(l===jt&&((2&Ge)==0&&(Hc|=g),Lt===4&&ls(l,qt)),Cr(l,b),g===1&&Ge===0&&(1&u.mode)==0&&(qo(),hc&&Jn()))}function Cr(l,u){var g=l.callbackNode;(function(S,C){for(var B=S.suspendedLanes,G=S.pingedLanes,K=S.expirationTimes,te=S.pendingLanes;0<te;){var ne=31-bn(te),he=1<<ne,re=K[ne];re===-1?(he&B)!=0&&(he&G)==0||(K[ne]=JT(he,C)):re<=C&&(S.expiredLanes|=he),te&=~he}})(l,u);var b=uc(l,l===jt?qt:0);if(b===0)g!==null&&D1(g),l.callbackNode=null,l.callbackPriority=0;else if(u=b&-b,l.callbackPriority!==u){if(g!=null&&D1(g),u===1)l.tag===0?function(S){hc=!0,O1(S)}(ty.bind(null,l)):O1(ty.bind(null,l)),Zr?el(function(){(6&Ge)==0&&Jn()}):Yf(Kf,Jn),g=null;else{switch(B1(b)){case 1:g=Kf;break;case 4:g=rC;break;case 16:default:g=L1;break;case 536870912:g=nC}g=uy(g,ey.bind(null,l))}l.callbackPriority=u,l.callbackNode=g}}function ey(l,u){if(jc=-1,$c=0,(6&Ge)!=0)throw Error(s(327));var g=l.callbackNode;if(eo()&&l.callbackNode!==g)return null;var b=uc(l,l===jt?qt:0);if(b===0)return null;if((30&b)!=0||(b&l.expiredLanes)!=0||u)u=Vc(l,b);else{u=b;var S=Ge;Ge|=2;var C=iy();for(jt===l&&qt===u||(is=null,qo(),Js(l,u));;)try{bC();break}catch(G){ny(l,G)}n0(),Uc.current=C,Ge=S,Rt!==null?u=0:(jt=null,qt=0,u=Lt)}if(u!==0){if(u===2&&(S=$f(l))!==0&&(b=S,u=j0(l,S)),u===1)throw g=yl,Js(l,0),ls(l,b),Cr(l,zt()),g;if(u===6)ls(l,b);else{if(S=l.current.alternate,(30&b)==0&&!function(G){for(var K=G;;){if(16384&K.flags){var te=K.updateQueue;if(te!==null&&(te=te.stores)!==null)for(var ne=0;ne<te.length;ne++){var he=te[ne],re=he.getSnapshot;he=he.value;try{if(!wn(re(),he))return!1}catch{return!1}}}if(te=K.child,16384&K.subtreeFlags&&te!==null)te.return=K,K=te;else{if(K===G)break;for(;K.sibling===null;){if(K.return===null||K.return===G)return!0;K=K.return}K.sibling.return=K.return,K=K.sibling}}return!0}(S)&&((u=Vc(l,b))===2&&(C=$f(l))!==0&&(b=C,u=j0(l,C)),u===1))throw g=yl,Js(l,0),ls(l,b),Cr(l,zt()),g;switch(l.finishedWork=S,l.finishedLanes=b,u){case 0:case 1:throw Error(s(345));case 2:case 5:Zo(l,Ur,is);break;case 3:if(ls(l,b),(130023424&b)===b&&10<(u=H0+500-zt())){if(uc(l,0)!==0)break;if(((S=l.suspendedLanes)&b)!==b){ur(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=Ae(Zo.bind(null,l,Ur,is),u);break}Zo(l,Ur,is);break;case 4:if(ls(l,b),(4194240&b)===b)break;for(u=l.eventTimes,S=-1;0<b;){var B=31-bn(b);C=1<<B,(B=u[B])>S&&(S=B),b&=~C}if(b=S,10<(b=(120>(b=zt()-b)?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*yC(b/1960))-b)){l.timeoutHandle=Ae(Zo.bind(null,l,Ur,is),b);break}Zo(l,Ur,is);break;default:throw Error(s(329))}}}return Cr(l,zt()),l.callbackNode===g?ey.bind(null,l):null}function j0(l,u){var g=_l;return l.current.memoizedState.isDehydrated&&(Js(l,u).flags|=256),(l=Vc(l,u))!==2&&(u=Ur,Ur=g,u!==null&&$0(u)),l}function $0(l){Ur===null?Ur=l:Ur.push.apply(Ur,l)}function ls(l,u){for(u&=~U0,u&=~Hc,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var g=31-bn(u),b=1<<g;l[g]=-1,u&=~b}}function ty(l){if((6&Ge)!=0)throw Error(s(327));eo();var u=uc(l,0);if((1&u)==0)return Cr(l,zt()),null;var g=Vc(l,u);if(l.tag!==0&&g===2){var b=$f(l);b!==0&&(u=b,g=j0(l,b))}if(g===1)throw g=yl,Js(l,0),ls(l,u),Cr(l,zt()),g;if(g===6)throw Error(s(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Zo(l,Ur,is),Cr(l,zt()),null}function ry(l){os!==null&&os.tag===0&&(6&Ge)==0&&eo();var u=Ge;Ge|=1;var g=Tt.transition,b=Ve;try{if(Tt.transition=null,Ve=1,l)return l()}finally{Ve=b,Tt.transition=g,(6&(Ge=u))==0&&Jn()}}function V0(){Fr=Qo.current,ct(Qo)}function Js(l,u){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==rt&&(l.timeoutHandle=rt,be(g)),Rt!==null)for(g=Rt.return;g!==null;){var b=g;switch(Zf(b),b.tag){case 1:(b=b.type.childContextTypes)!=null&&Gf();break;case 3:Xo(),ct(Sr),ct(or),f0();break;case 5:h0(b);break;case 4:Xo();break;case 13:case 19:ct(wt);break;case 10:i0(b.type._context);break;case 22:case 23:V0()}g=g.return}if(jt=l,Rt=l=us(l.current,null),qt=Fr=u,Lt=0,yl=null,U0=Hc=Zs=0,Ur=_l=null,Qs!==null){for(u=0;u<Qs.length;u++)if((b=(g=Qs[u]).interleaved)!==null){g.interleaved=null;var S=b.next,C=g.pending;if(C!==null){var B=C.next;C.next=S,b.next=B}g.pending=b}Qs=null}return l}function ny(l,u){for(;;){var g=Rt;try{if(n0(),Sc.current=Ac,Ec){for(var b=gt.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}Ec=!1}if(qs=0,Wt=Gt=gt=null,cl=!1,hl=0,F0.current=null,g===null||g.return===null){Lt=1,yl=u,Rt=null;break}e:{var C=l,B=g.return,G=g,K=u;if(u=qt,G.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var te=K,ne=G,he=ne.tag;if((1&ne.mode)==0&&(he===0||he===11||he===15)){var re=ne.alternate;re?(ne.updateQueue=re.updateQueue,ne.memoizedState=re.memoizedState,ne.lanes=re.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var le=Cx(B);if(le!==null){le.flags&=-257,Ax(le,B,G,0,u),1&le.mode&&Tx(C,te,u),K=te;var Se=(u=le).updateQueue;if(Se===null){var Fe=new Set;Fe.add(K),u.updateQueue=Fe}else Se.add(K);break e}if((1&u)==0){Tx(C,te,u),X0();break e}K=Error(s(426))}else if(ht&&1&G.mode){var ie=Cx(B);if(ie!==null){(65536&ie.flags)==0&&(ie.flags|=256),Ax(ie,B,G,0,u),t0(Yo(K,G));break e}}C=K=Yo(K,G),Lt!==4&&(Lt=2),_l===null?_l=[C]:_l.push(C),C=B;do{switch(C.tag){case 3:C.flags|=65536,u&=-u,C.lanes|=u,V1(C,Sx(0,K,u));break e;case 1:G=K;var $=C.type,ee=C.stateNode;if((128&C.flags)==0&&(typeof $.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(ss===null||!ss.has(ee)))){C.flags|=65536,u&=-u,C.lanes|=u,V1(C,Ex(C,G,u));break e}}C=C.return}while(C!==null)}oy(g)}catch(oe){u=oe,Rt===g&&g!==null&&(Rt=g=g.return);continue}break}}function iy(){var l=Uc.current;return Uc.current=Ac,l===null?Ac:l}function X0(){Lt!==0&&Lt!==3&&Lt!==2||(Lt=4),jt===null||(268435455&Zs)==0&&(268435455&Hc)==0||ls(jt,qt)}function Vc(l,u){var g=Ge;Ge|=2;var b=iy();for(jt===l&&qt===u||(is=null,Js(l,u));;)try{_C();break}catch(S){ny(l,S)}if(n0(),Ge=g,Uc.current=b,Rt!==null)throw Error(s(261));return jt=null,qt=0,Lt}function _C(){for(;Rt!==null;)sy(Rt)}function bC(){for(;Rt!==null&&!eC();)sy(Rt)}function sy(l){var u=Jx(l.alternate,l,Fr);l.memoizedProps=l.pendingProps,u===null?oy(l):Rt=u,F0.current=null}function oy(l){var u=l;do{var g=u.alternate;if(l=u.return,(32768&u.flags)==0){if((g=mC(g,u,Fr))!==null)return void(Rt=g)}else{if((g=gC(g,u))!==null)return g.flags&=32767,void(Rt=g);if(l===null)return Lt=6,void(Rt=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(Rt=u);Rt=u=l}while(u!==null);Lt===0&&(Lt=5)}function Zo(l,u,g){var b=Ve,S=Tt.transition;try{Tt.transition=null,Ve=1,function(C,B,G,K){do eo();while(os!==null);if((6&Ge)!=0)throw Error(s(327));G=C.finishedWork;var te=C.finishedLanes;if(G===null)return null;if(C.finishedWork=null,C.finishedLanes=0,G===C.current)throw Error(s(177));C.callbackNode=null,C.callbackPriority=0;var ne=G.lanes|G.childLanes;if(function(le,Se){var Fe=le.pendingLanes&~Se;le.pendingLanes=Se,le.suspendedLanes=0,le.pingedLanes=0,le.expiredLanes&=Se,le.mutableReadLanes&=Se,le.entangledLanes&=Se,Se=le.entanglements;var ie=le.eventTimes;for(le=le.expirationTimes;0<Fe;){var $=31-bn(Fe),ee=1<<$;Se[$]=0,ie[$]=-1,le[$]=-1,Fe&=~ee}}(C,ne),C===jt&&(Rt=jt=null,qt=0),(2064&G.subtreeFlags)==0&&(2064&G.flags)==0||Gc||(Gc=!0,uy(L1,function(){return eo(),null})),ne=(15990&G.flags)!=0,(15990&G.subtreeFlags)!=0||ne){ne=Tt.transition,Tt.transition=null;var he=Ve;Ve=1;var re=Ge;Ge|=4,F0.current=null,function(le,Se){for(D(le.containerInfo),xe=Se;xe!==null;)if(Se=(le=xe).child,(1028&le.subtreeFlags)!=0&&Se!==null)Se.return=le,xe=Se;else for(;xe!==null;){le=xe;try{var Fe=le.alternate;if((1024&le.flags)!=0)switch(le.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Fe!==null){var ie=Fe.memoizedProps,$=Fe.memoizedState,ee=le.stateNode,oe=ee.getSnapshotBeforeUpdate(le.elementType===le.type?ie:En(le.type,ie),$);ee.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Le&&tc(le.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(ke){dt(le,le.return,ke)}if((Se=le.sibling)!==null){Se.return=le.return,xe=Se;break}xe=le.return}Fe=Gx,Gx=!1}(C,G),Xx(G,C),H(C.containerInfo),C.current=G,xC(G),tC(),Ge=re,Ve=he,Tt.transition=ne}else C.current=G;if(Gc&&(Gc=!1,os=C,Wc=te),ne=C.pendingLanes,ne===0&&(ss=null),function(le){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(cc,le,void 0,(128&le.current.flags)==128)}catch{}}(G.stateNode),Cr(C,zt()),B!==null)for(K=C.onRecoverableError,G=0;G<B.length;G++)te=B[G],K(te.value,{componentStack:te.stack,digest:te.digest});if(zc)throw zc=!1,C=G0,G0=null,C;(1&Wc)!=0&&C.tag!==0&&eo(),ne=C.pendingLanes,(1&ne)!=0?C===W0?bl++:(bl=0,W0=C):bl=0,Jn()}(l,u,g,b)}finally{Tt.transition=S,Ve=b}return null}function eo(){if(os!==null){var l=B1(Wc),u=Tt.transition,g=Ve;try{if(Tt.transition=null,Ve=16>l?16:l,os===null)var b=!1;else{if(l=os,os=null,Wc=0,(6&Ge)!=0)throw Error(s(331));var S=Ge;for(Ge|=4,xe=l.current;xe!==null;){var C=xe,B=C.child;if((16&xe.flags)!=0){var G=C.deletions;if(G!==null){for(var K=0;K<G.length;K++){var te=G[K];for(xe=te;xe!==null;){var ne=xe;switch(ne.tag){case 0:case 11:case 15:vl(8,ne,C)}var he=ne.child;if(he!==null)he.return=ne,xe=he;else for(;xe!==null;){var re=(ne=xe).sibling,le=ne.return;if(Wx(ne),ne===te){xe=null;break}if(re!==null){re.return=le,xe=re;break}xe=le}}}var Se=C.alternate;if(Se!==null){var Fe=Se.child;if(Fe!==null){Se.child=null;do{var ie=Fe.sibling;Fe.sibling=null,Fe=ie}while(Fe!==null)}}xe=C}}if((2064&C.subtreeFlags)!=0&&B!==null)B.return=C,xe=B;else e:for(;xe!==null;){if((2048&(C=xe).flags)!=0)switch(C.tag){case 0:case 11:case 15:vl(9,C,C.return)}var $=C.sibling;if($!==null){$.return=C.return,xe=$;break e}xe=C.return}}var ee=l.current;for(xe=ee;xe!==null;){var oe=(B=xe).child;if((2064&B.subtreeFlags)!=0&&oe!==null)oe.return=B,xe=oe;else e:for(B=ee;xe!==null;){if((2048&(G=xe).flags)!=0)try{switch(G.tag){case 0:case 11:case 15:Nc(9,G)}}catch(qe){dt(G,G.return,qe)}if(G===B){xe=null;break e}var ke=G.sibling;if(ke!==null){ke.return=G.return,xe=ke;break e}xe=G.return}}if(Ge=S,Jn(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(cc,l)}catch{}b=!0}return b}finally{Ve=g,Tt.transition=u}}return!1}function ay(l,u,g){l=ns(l,u=Sx(0,u=Yo(g,u),1),1),u=ur(),l!==null&&(sl(l,1,u),Cr(l,u))}function dt(l,u,g){if(l.tag===3)ay(l,l,g);else for(;u!==null;){if(u.tag===3){ay(u,l,g);break}if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(ss===null||!ss.has(b))){u=ns(u,l=Ex(u,l=Yo(g,l),1),1),l=ur(),u!==null&&(sl(u,1,l),Cr(u,l));break}}u=u.return}}function wC(l,u,g){var b=l.pingCache;b!==null&&b.delete(u),u=ur(),l.pingedLanes|=l.suspendedLanes&g,jt===l&&(qt&g)===g&&(Lt===4||Lt===3&&(130023424&qt)===qt&&500>zt()-H0?Js(l,0):U0|=g),Cr(l,u)}function ly(l,u){u===0&&((1&l.mode)==0?u=1:(u=jf,(130023424&(jf<<=1))==0&&(jf=4194304)));var g=ur();(l=ti(l,u))!==null&&(sl(l,u,g),Cr(l,g))}function SC(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),ly(l,g)}function EC(l,u){var g=0;switch(l.tag){case 13:var b=l.stateNode,S=l.memoizedState;S!==null&&(g=S.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(s(314))}b!==null&&b.delete(u),ly(l,g)}function uy(l,u){return Yf(l,u)}function TC(l,u,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(l,u,g,b){return new TC(l,u,g,b)}function Y0(l){return!(!(l=l.prototype)||!l.isReactComponent)}function us(l,u){var g=l.alternate;return g===null?((g=an(l.tag,u,l.key,l.mode)).elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=14680064&l.flags,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function Xc(l,u,g,b,S,C){var B=2;if(b=l,typeof l=="function")Y0(l)&&(B=1);else if(typeof l=="string")B=5;else e:switch(l){case h:return to(g.children,S,C,u);case p:B=8,S|=8;break;case c:return(l=an(12,g,u,2|S)).elementType=c,l.lanes=C,l;case _:return(l=an(13,g,u,S)).elementType=_,l.lanes=C,l;case E:return(l=an(19,g,u,S)).elementType=E,l.lanes=C,l;case w:return Yc(g,S,C,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case f:B=10;break e;case m:B=9;break e;case v:B=11;break e;case x:B=14;break e;case y:B=16,b=null;break e}throw Error(s(130,l==null?l:typeof l,""))}return(u=an(B,g,u,S)).elementType=l,u.type=b,u.lanes=C,u}function to(l,u,g,b){return(l=an(7,l,b,u)).lanes=g,l}function Yc(l,u,g,b){return(l=an(22,l,b,u)).elementType=w,l.lanes=g,l.stateNode={isHidden:!1},l}function K0(l,u,g){return(l=an(6,l,null,u)).lanes=g,l}function Q0(l,u,g){return(u=an(4,l.children!==null?l.children:[],l.key,u)).lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function CC(l,u,g,b,S){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vf(0),this.expirationTimes=Vf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vf(0),this.identifierPrefix=b,this.onRecoverableError=S,Me&&(this.mutableSourceEagerHydrationData=null)}function cy(l,u,g,b,S,C,B,G,K){return l=new CC(l,u,g,G,K),u===1?(u=1,C===!0&&(u|=8)):u=0,C=an(3,null,null,u),l.current=C,C.stateNode=l,C.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},a0(C),l}function hy(l){if(!l)return ts;e:{if(I(l=l._reactInternals)!==l||l.tag!==1)throw Error(s(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Lr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(l.tag===1){var g=l.type;if(Lr(g))return R1(l,g,u)}return u}function dy(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return(l=L(u))===null?null:l.stateNode}function fy(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function Kc(l,u){fy(l,u),(l=l.alternate)&&fy(l,u)}function AC(l){return(l=L(l))===null?null:l.stateNode}function kC(){return null}return Jx=function(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps||Sr.current)Er=!0;else{if((l.lanes&g)==0&&(128&u.flags)==0)return Er=!1,function(he,re,le){switch(re.tag){case 3:Bx(re),Go();break;case 5:tx(re);break;case 1:Lr(re.type)&&lc(re);break;case 4:c0(re,re.stateNode.containerInfo);break;case 10:W1(0,re.type._context,re.memoizedProps.value);break;case 13:var Se=re.memoizedState;if(Se!==null)return Se.dehydrated!==null?(it(wt,1&wt.current),re.flags|=128,null):(le&re.child.childLanes)!=0?Lx(he,re,le):(it(wt,1&wt.current),(he=Pi(he,re,le))!==null?he.sibling:null);it(wt,1&wt.current);break;case 19:if(Se=(le&re.childLanes)!=0,(128&he.flags)!=0){if(Se)return Fx(he,re,le);re.flags|=128}var Fe=re.memoizedState;if(Fe!==null&&(Fe.rendering=null,Fe.tail=null,Fe.lastEffect=null),it(wt,wt.current),Se)break;return null;case 22:case 23:return re.lanes=0,Rx(he,re,le)}return Pi(he,re,le)}(l,u,g);Er=(131072&l.flags)!=0}else Er=!1,ht&&(1048576&u.flags)!=0&&F1(u,fc,u.index);switch(u.lanes=0,u.tag){case 2:var b=u.type;Rc(l,u),l=u.pendingProps;var S=Uo(u,or.current);jo(u,g),S=g0(null,u,b,l,S,g);var C=v0();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Lr(b)?(C=!0,lc(u)):C=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,a0(u),S.updater=_c,u.stateNode=S,S._reactInternals=u,u0(u,b,l,g),u=T0(null,u,b,!0,C,g)):(u.tag=0,ht&&C&&qf(u),Tr(null,u,S,g),u=u.child),u;case 16:b=u.elementType;e:{switch(Rc(l,u),l=u.pendingProps,b=(S=b._init)(b._payload),u.type=b,S=u.tag=function(he){if(typeof he=="function")return Y0(he)?1:0;if(he!=null){if((he=he.$$typeof)===v)return 11;if(he===x)return 14}return 2}(b),l=En(b,l),S){case 0:u=E0(null,u,b,l,g);break e;case 1:u=Nx(null,u,b,l,g);break e;case 11:u=kx(null,u,b,l,g);break e;case 14:u=Px(null,u,b,En(b.type,l),g);break e}throw Error(s(306,b,""))}return u;case 0:return b=u.type,S=u.pendingProps,E0(l,u,b,S=u.elementType===b?S:En(b,S),g);case 1:return b=u.type,S=u.pendingProps,Nx(l,u,b,S=u.elementType===b?S:En(b,S),g);case 3:e:{if(Bx(u),l===null)throw Error(s(387));b=u.pendingProps,S=(C=u.memoizedState).element,$1(l,u),yc(u,b,null,g);var B=u.memoizedState;if(b=B.element,Me&&C.isDehydrated){if(C={element:b,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},u.updateQueue.baseState=C,u.memoizedState=C,256&u.flags){u=Dx(l,u,b,g,S=Yo(Error(s(423)),u));break e}if(b!==S){u=Dx(l,u,b,g,S=Yo(Error(s(424)),u));break e}for(Me&&(tn=OT(u.stateNode.containerInfo),Or=u,ht=!0,Sn=null,ol=!1),g=ex(u,null,b,g),u.child=g;g;)g.flags=-3&g.flags|4096,g=g.sibling}else{if(Go(),b===S){u=Pi(l,u,g);break e}Tr(l,u,b,g)}u=u.child}return u;case 5:return tx(u),l===null&&e0(u),b=u.type,S=u.pendingProps,C=l!==null?l.memoizedProps:null,B=S.children,_e(b,S)?B=null:C!==null&&_e(b,C)&&(u.flags|=32),Mx(l,u),Tr(l,u,B,g),u.child;case 6:return l===null&&e0(u),null;case 13:return Lx(l,u,g);case 4:return c0(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=$o(u,null,b,g):Tr(l,u,b,g),u.child;case 11:return b=u.type,S=u.pendingProps,kx(l,u,b,S=u.elementType===b?S:En(b,S),g);case 7:return Tr(l,u,u.pendingProps,g),u.child;case 8:case 12:return Tr(l,u,u.pendingProps.children,g),u.child;case 10:e:{if(b=u.type._context,S=u.pendingProps,C=u.memoizedProps,W1(0,b,B=S.value),C!==null)if(wn(C.value,B)){if(C.children===S.children&&!Sr.current){u=Pi(l,u,g);break e}}else for((C=u.child)!==null&&(C.return=u);C!==null;){var G=C.dependencies;if(G!==null){B=C.child;for(var K=G.firstContext;K!==null;){if(K.context===b){if(C.tag===1){(K=ki(-1,g&-g)).tag=2;var te=C.updateQueue;if(te!==null){var ne=(te=te.shared).pending;ne===null?K.next=K:(K.next=ne.next,ne.next=K),te.pending=K}}C.lanes|=g,(K=C.alternate)!==null&&(K.lanes|=g),s0(C.return,g,u),G.lanes|=g;break}K=K.next}}else if(C.tag===10)B=C.type===u.type?null:C.child;else if(C.tag===18){if((B=C.return)===null)throw Error(s(341));B.lanes|=g,(G=B.alternate)!==null&&(G.lanes|=g),s0(B,g,u),B=C.sibling}else B=C.child;if(B!==null)B.return=C;else for(B=C;B!==null;){if(B===u){B=null;break}if((C=B.sibling)!==null){C.return=B.return,B=C;break}B=B.return}C=B}Tr(l,u,S.children,g),u=u.child}return u;case 9:return S=u.type,b=u.pendingProps.children,jo(u,g),b=b(S=rn(S)),u.flags|=1,Tr(l,u,b,g),u.child;case 14:return S=En(b=u.type,u.pendingProps),Px(l,u,b,S=En(b.type,S),g);case 15:return Ix(l,u,u.type,u.pendingProps,g);case 17:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:En(b,S),Rc(l,u),u.tag=1,Lr(b)?(l=!0,lc(u)):l=!1,jo(u,g),Q1(u,b,S),u0(u,b,S,g),T0(null,u,b,!0,l,g);case 19:return Fx(l,u,g);case 22:return Rx(l,u,g)}throw Error(s(156,u.tag))},t.attemptContinuousHydration=function(l){if(l.tag===13){var u=ti(l,134217728);u!==null&&on(u,l,134217728,ur()),Kc(l,134217728)}},t.attemptDiscreteHydration=function(l){if(l.tag===13){var u=ti(l,1);u!==null&&on(u,l,1,ur()),Kc(l,1)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=as(l),g=ti(l,u);g!==null&&on(g,l,u,ur()),Kc(l,u)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var g=il(u.pendingLanes);g!==0&&(Xf(u,1|g),Cr(u,zt()),(6&Ge)==0&&(qo(),Jn()))}break;case 13:ry(function(){var b=ti(l,1);if(b!==null){var S=ur();on(b,l,1,S)}}),Kc(l,1)}},t.batchedUpdates=function(l,u){var g=Ge;Ge|=1;try{return l(u)}finally{(Ge=g)===0&&(qo(),hc&&Jn())}},t.createComponentSelector=function(l){return{$$typeof:Bc,value:l}},t.createContainer=function(l,u,g,b,S,C,B){return cy(l,u,!1,null,0,b,0,C,B)},t.createHasPseudoClassSelector=function(l){return{$$typeof:Dc,value:l}},t.createHydrationContainer=function(l,u,g,b,S,C,B,G,K){return(l=cy(g,b,!0,l,0,C,0,G,K)).context=hy(null),g=l.current,(C=ki(b=ur(),S=as(g))).callback=u??null,ns(g,C,S),l.current.lanes=S,sl(l,S,b),Cr(l,b),l},t.createPortal=function(l,u,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:b==null?null:""+b,children:l,containerInfo:u,implementation:g}},t.createRoleSelector=function(l){return{$$typeof:Lc,value:l}},t.createTestNameSelector=function(l){return{$$typeof:Oc,value:l}},t.createTextSelector=function(l){return{$$typeof:Fc,value:l}},t.deferredUpdates=function(l){var u=Ve,g=Tt.transition;try{return Tt.transition=null,Ve=16,l()}finally{Ve=u,Tt.transition=g}},t.discreteUpdates=function(l,u,g,b,S){var C=Ve,B=Tt.transition;try{return Tt.transition=null,Ve=1,l(u,g,b,S)}finally{Ve=C,Tt.transition=B,Ge===0&&qo()}},t.findAllNodes=O0,t.findBoundingRects=function(l,u){if(!yn)throw Error(s(363));u=O0(l,u),l=[];for(var g=0;g<u.length;g++)l.push(wr(u[g]));for(u=l.length-1;0<u;u--)for(var b=(g=l[u]).x,S=b+g.width,C=g.y,B=C+g.height,G=u-1;0<=G;G--)if(u!==G){var K=l[G],te=K.x,ne=te+K.width,he=K.y,re=he+K.height;if(b>=te&&C>=he&&S<=ne&&B<=re){l.splice(u,1);break}if(!(b!==te||g.width!==K.width||re<C||he>B)){he>C&&(K.height+=he-C,K.y=C),re<B&&(K.height=B-he),l.splice(u,1);break}if(!(C!==he||g.height!==K.height||ne<b||te>S)){te>b&&(K.width+=te-b,K.x=b),ne<S&&(K.width=S-te),l.splice(u,1);break}}return l},t.findHostInstance=dy,t.findHostInstanceWithNoPortals=function(l){return(l=(l=k(l))!==null?O(l):null)===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return dy(l)},t.flushControlled=function(l){var u=Ge;Ge|=1;var g=Tt.transition,b=Ve;try{Tt.transition=null,Ve=1,l()}finally{Ve=b,Tt.transition=g,(Ge=u)===0&&(qo(),Jn())}},t.flushPassiveEffects=eo,t.flushSync=ry,t.focusWithin=function(l,u){if(!yn)throw Error(s(363));for(u=Zx(l=B0(l),u),u=Array.from(u),l=0;l<u.length;){var g=u[l++];if(!qn(g)){if(g.tag===5&&Zi(g.stateNode))return!0;for(g=g.child;g!==null;)u.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ve},t.getFindAllNodesFailureDescription=function(l,u){if(!yn)throw Error(s(363));var g=0,b=[];l=[B0(l),0];for(var S=0;S<l.length;){var C=l[S++],B=l[S++],G=u[B];if((C.tag!==5||!qn(C))&&(D0(C,G)&&(b.push(L0(G)),++B>g&&(g=B)),B<u.length))for(C=C.child;C!==null;)l.push(C,B),C=C.sibling}if(g<u.length){for(l=[];g<u.length;g++)l.push(L0(u[g]));return`findAllNodes was able to match part of the selector:
  `+b.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},t.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?X(l.child.stateNode):l.child.stateNode:null},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:AC,findFiberByHostInstance:l.findFiberByHostInstance||kC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{cc=u.inject(l),Zn=u}catch{}l=!!u.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,u,g,b){if(!yn)throw Error(s(363));l=O0(l,u);var S=$s(l,g,b).disconnect;return{disconnect:function(){S()}}},t.registerMutableSourceForHydration=function(l,u){var g=u._getVersion;g=g(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,g]:l.mutableSourceEagerHydrationData.push(u,g)},t.runWithPriority=function(l,u){var g=Ve;try{return Ve=l,u()}finally{Ve=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,u,g,b){var S=u.current,C=ur(),B=as(S);return g=hy(g),u.context===null?u.context=g:u.pendingContext=g,(u=ki(C,B)).payload={element:l},(b=b===void 0?null:b)!==null&&(u.callback=b),(l=ns(S,u,B))!==null&&(on(l,S,B,C),xc(l,S,B)),B},t}),Ib}({get exports(){return hv},set exports(e){hv=e}}).exports=sR();var oR=MI(hv),sT={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},fv={},Nh={get exports(){return fv},set exports(e){fv=e}};(function(){var e,t,r,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?Nh.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Nh.exports=function(){return(e()-i)/1e6},t=process.hrtime,n=(e=function(){var o;return 1e9*(o=t())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(Nh.exports=function(){return Date.now()-r},r=Date.now()):(Nh.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(RI);var Nb,Sa={},io={};({get exports(){return Sa},set exports(e){Sa=e}}).exports=(Nb||(Nb=1,io.ConcurrentRoot=1,io.ContinuousEventPriority=4,io.DefaultEventPriority=16,io.DiscreteEventPriority=1,io.IdleEventPriority=536870912,io.LegacyRoot=0),io);var aR={};function qp(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount(t,e))}function oT(e,t){var r,n,i;(r=e.willUnmount)===null||r===void 0||r.call(e,e,t),((n=e.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=e.children)!==null&&i!==void 0&&i.length&&Yi(e.children).forEach(function(s){oT(s,e)})}function Bb(e,t){var r;oT(t,e),e.removeChild(t);var n=(r=t.config)!==null&&r!==void 0?r:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,a=o===void 0||o,d=n.destroyTexture,h=d!==void 0&&d,p=n.destroyBaseTexture,c=p!==void 0&&p;s&&t.destroy({children:a,texture:h,baseTexture:c})}function Db(e,t,r){Et(t!==r,"pixi-react: PixiFiber cannot insert node before itself"),e.children.indexOf(t)!==-1&&e.removeChild(t);var n=e.getChildIndex(r);e.addChildAt(t,n)}var Lb=null,Hn=oR({getRootHostContext:function(){return aR},getChildHostContext:function(e){return e},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},getCurrentEventPriority:function(){return function(){var e,t;if(typeof window>"u")return Sa.DefaultEventPriority;switch((e=window)===null||e===void 0||(t=e.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Sa.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Sa.ContinuousEventPriority;default:return Sa.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=tR[e];if(typeof s=="function"&&(t=s(i,n)),!t){var o=iT[e];o&&((t=o.create(n)).didMount=o.didMount?o.didMount.bind(t):void 0,t.willUnmount=o.willUnmount?o.willUnmount.bind(t):void 0,t.applyProps=o.applyProps?o.applyProps.bind(t):void 0,t.config=o.config)}return t&&((typeof((r=t)===null||r===void 0?void 0:r.applyProps)=="function"?t.applyProps:wi)(t,{},n),t.__reactpixi={root:i}),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var r=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=r},finalizeInitialChildren:function(e,t,r){return!1},prepareUpdate:function(e,t,r,n,i,s){return Lb=function(o,a,d,h){var p=null;for(var c in d)!h.hasOwnProperty(c)&&d.hasOwnProperty(c)&&d[c]!==null&&(c===uv||(p||(p=[]),p.push(c,null)));for(var f in h){var m=h[f],v=d!==null?d[f]:void 0;!h.hasOwnProperty(f)||m===v||m===null&&v===null||f===uv||(p||(p=[]),p.push(f,m))}return p}(0,0,r,n)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var r=t.alpha===void 0||t.alpha>0,n=t.renderable===void 0||t.renderable===!0,i=t.visible===void 0||t.visible===!0;return!(r&&n&&i)},createTextInstance:function(e,t,r){Et(!1,'pixi-react: Error trying to add text node "'.concat(e,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:fv,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=qp.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=qp.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=qp.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Bb.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Bb.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:Db,insertInContainerBefore:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Db.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(e,t,r,n,i){var s,o,a=e&&e.applyProps;typeof a!="function"&&(a=wi),(a(e,n,i)||Lb)&&((s=e.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,r,n,i){},commitTextUpdate:function(e,t,r){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(e){}}),lR=sT.dependencies["react-dom"].replace(/[^0-9.]/g,""),uR=sT.name;Hn.injectIntoDevTools({bundleType:0,version:lR,rendererPackageName:uR,findHostInstanceByFiber:Hn.findHostInstance});var Ms=new Map;function aT(e){if(Et(Kt.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`."),Ms.has(e)){var t=Ms.get(e).pixiFiberContainer;Hn.updateContainer(null,t,void 0,function(){Ms.delete(e)})}}function lT(e){Et(Kt.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`.");var t=Ms.get(e);if(Et(!t,"Pixi React: createRoot should only be called once"),!t){var r=Hn.createContainer(e);t={pixiFiberContainer:r,reactRoot:{render:function(n){return Hn.updateContainer(n,r,void 0),Hn.getPublicRootInstance(r)},unmount:function(){aT(e),Ms.delete(e)}}},Ms.set(e,t)}return t.reactRoot}function cR(e,t,r){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Ms.has(t)?n=Ms.get(t).reactRoot:n=lT(t),n.render(e)}function hR(e){aT(e)}function Ru(){return Ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ru.apply(this,arguments)}function dR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tT(n.key),n)}}function Mi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wd(e,t){return Wd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Wd(e,t)}function pR(e,t){if(t&&(Yr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mi(e)}function jd(e){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jd(e)}var Tf=$r.createContext(null),uT=Tf.Provider,cT=Tf.Consumer,mR=function(e){var t=$r.forwardRef(function(r,n){return $r.createElement(cT,null,function(i){return $r.createElement(e,Ru({},r,{ref:n,app:i}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t};function gR(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=jd(e);if(t){var i=jd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return pR(this,r)}}function Ob(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ob(Object(r),!0).forEach(function(n){At(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ob(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Fb=function(){},hT={width:st.exports.number,height:st.exports.number,onMount:st.exports.func,onUnmount:st.exports.func,raf:st.exports.bool,renderOnComponentChange:st.exports.bool,children:st.exports.node,options:st.exports.shape({autoStart:st.exports.bool,width:st.exports.number,height:st.exports.number,useContextAlpha:st.exports.bool,backgroundAlpha:st.exports.number,autoDensity:st.exports.bool,antialias:st.exports.bool,preserveDrawingBuffer:st.exports.bool,resolution:st.exports.number,forceCanvas:st.exports.bool,backgroundColor:st.exports.number,clearBeforeRender:st.exports.bool,powerPreference:st.exports.string,sharedTicker:st.exports.bool,sharedLoader:st.exports.bool,resizeTo:function(e,t){var r=e[t];r&&Et(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Yr(r),", expect `window` or an `HTMLElement`."))},view:function(e,t,r){var n=e[t];n&&Et(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Yr(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},vR={width:800,height:600,onMount:Fb,onUnmount:Fb,raf:!0,renderOnComponentChange:!0},pv=function(e){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Wd(s,o)})(i,$r.Component);var t,r,n=gR(i);function i(){var s;dR(this,i);for(var o=arguments.length,a=new Array(o),d=0;d<o;d++)a[d]=arguments[d];return At(Mi(s=n.call.apply(n,[this].concat(a))),"_canvas",null),At(Mi(s),"_mediaQuery",null),At(Mi(s),"_ticker",null),At(Mi(s),"_needsUpdate",!0),At(Mi(s),"app",null),At(Mi(s),"updateSize",function(){var h=s.props,p=h.width,c=h.height,f=h.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(p,c)}),At(Mi(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),At(Mi(s),"renderStage",function(){var h=s.props,p=h.renderOnComponentChange;!h.raf&&p&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return t=i,(r=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,d=s.height,h=s.options,p=s.raf,c=s.renderOnComponentChange;this.app=new ju(Bh(Bh({width:a,height:d,view:this._canvas},h),{},{autoDensity:h?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[p?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Hn.createContainer(this.app.stage),Hn.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),h!=null&&h.autoDensity&&window.matchMedia&&h?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),c&&!p&&(this._ticker=new It,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var d,h=this.props,p=h.width,c=h.height,f=h.raf,m=h.renderOnComponentChange,v=h.options;v?.resolution!==void 0&&s?.options.resolution!==v?.resolution&&(this.app.renderer.resolution=v.resolution,this.resetInteractionManager()),s.height===c&&s.width===p&&((d=s.options)===null||d===void 0?void 0:d.resolution)===v?.resolution||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),Hn.updateContainer(this.getChildren(),this.mountNode,this),s.width===p&&s.height===c&&s.raf===f&&s.renderOnComponentChange===m&&s.options===v||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return $r.createElement(uT,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Hn.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,d=this.props.options;return d&&d.view?(Et(d.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):$r.createElement("canvas",Ru({},(s=this.props,o=[].concat(Yi(Object.keys(hT)),Yi(Object.keys(cv))),Object.keys(s).filter(function(h){return!o.includes(h)}).reduce(function(h,p){return Bh(Bh({},h),{},At({},p,s[p]))},{})),{ref:function(h){return a._canvas=h}}))}}])&&fR(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();pv.propTypes=hT,pv.defaultProps=vR;var xR=pv;function dT(){var e=Y.exports.useContext(Tf);return Et(e instanceof ju,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function yR(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=dT();Et(typeof e=="function","`useTick` needs a callback function."),Et(r instanceof ju,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var n=Y.exports.useRef(null);Y.exports.useEffect(function(){n.current=e},[e]),Y.exports.useEffect(function(){if(t){var i=function(s){return n.current.apply(r.ticker,[s,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[t])}function _R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mv(e,t,r){return mv=_R()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(n,o));return s&&Wd(a,s.prototype),a},mv.apply(null,arguments)}var bR=["children","apply"];function Ub(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ub(Object(r),!0).forEach(function(n){At(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ub(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var wR=function(e,t){Et(Yr(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(t),n=function(i){var s=i.children,o=i.apply,a=js(i,bR),d=Y.exports.useRef(Y.exports.useMemo(function(){return r.map(function(c){var f,m=(a==null||(f=a[c])===null||f===void 0?void 0:f.construct)||[];return mv(t[c],Yi(m))})},[r])),h=Y.exports.useMemo(function(){return r.reduce(function(c,f,m){return Dh(Dh({},c),{},At({},f,d.current[m]))},{})},[r]),p=Y.exports.useMemo(function(){return Object.keys(a).filter(nT(rT(r))).reduce(function(c,f){return Dh(Dh({},c),{},At({},f,a[f]))},{})},[a,r]);return r.forEach(function(c,f){return Object.assign(d.current[f],a[c])}),o&&function(){for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return f.every(function(v){return typeof v=="function"})}(o)&&o.call(e,h),$r.createElement(e,Ru({},p,{filters:d.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:st.exports.node,apply:st.exports.func},n},SR=Nr.BitmapText,ER=Nr.Container,TR=Nr.Graphics,CR=Nr.NineSlicePlane,AR=Nr.ParticleContainer,kR=Nr.Sprite,PR=Nr.AnimatedSprite,IR=Nr.Text,RR=Nr.TilingSprite,MR=Nr.SimpleMesh,NR=Nr.SimpleRope;const BR=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:PR,AppConsumer:cT,AppContext:Tf,AppProvider:uT,BitmapText:SR,Container:ER,Graphics:TR,NineSlicePlane:CR,ParticleContainer:AR,PixiComponent:rR,PixiFiber:Hn,SimpleMesh:MR,SimpleRope:NR,Sprite:kR,Stage:xR,TYPES:Nr,Text:IR,TilingSprite:RR,applyDefaultProps:wi,createRoot:lT,eventHandlers:Gd,render:cR,unmountComponentAtNode:hR,useApp:dT,useTick:yR,withFilters:wR,withPixiApp:mR},Symbol.toStringTag,{value:"Module"})),DR=Dw(BR);(function(e){e.exports=DR})(ue);const fT=new pt;mt.prototype._cacheAsBitmap=!1;mt.prototype._cacheData=null;mt.prototype._cacheAsBitmapResolution=null;mt.prototype._cacheAsBitmapMultisample=null;class LR{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(mt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new LR),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});mt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};mt.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const r=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const f=this.filters[0].padding;n.pad(f)}n.ceil(ge.RESOLUTION);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,d=Bo.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${Io()}`;this._cacheData.textureCacheId=h,Be.addToCache(d.baseTexture,h),se.addToCache(d,h);const p=this.transform.localTransform.copyTo(fT).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:d,clear:!0,transform:p,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new Yn(d);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};mt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};mt.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const i=t.canvasContext.activeContext,s=t._projTransform;r.ceil(ge.RESOLUTION);const o=Bo.create({width:r.width,height:r.height}),a=`cacheAsBitmap_${Io()}`;this._cacheData.textureCacheId=a,Be.addToCache(o.baseTexture,a),se.addToCache(o,a);const d=fT;this.transform.localTransform.copyTo(d),d.invert(),d.tx-=r.x,d.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:d,skipUpdateTransform:!1}),t.canvasContext.activeContext=i,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const h=new Yn(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(r.x/r.width),h.anchor.y=-(r.y/r.height),h.alpha=n,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};mt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};mt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};mt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Be.removeFromCache(this._cacheData.textureCacheId),se.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};mt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};mt.prototype.name=null;Kt.prototype.getChildByName=function(t,r){for(let n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};mt.prototype.getGlobalPosition=function(t=new We,r=!1){return this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};var OR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class FR extends rr{constructor(t=1){super(l3,OR,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const UR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},HR=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function zR(e){const t=UR[e],r=t.length;let n=HR,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let d=s.replace("%index%",a.toString());o=a,a>=r&&(o=e-a-1),d=d.replace("%value%",t[o].toString()),i+=d,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}const GR=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function WR(e,t){const r=Math.ceil(e/2);let n=GR,i="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}class gv extends rr{constructor(t,r=8,n=4,i=rr.defaultResolution,s=5){const o=WR(s,t),a=zR(s);super(o,a),this.horizontal=t,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(t,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,n,i);else{const s=t.getFilterTexture(),o=t.renderer;let a=r,d=s;this.state.blend=!1,t.applyFilter(this,a,d,di.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,di.BLIT),this.uniforms.uSampler=d;const p=d;d=a,a=p,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,d,n,i),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class jR extends rr{constructor(t=8,r=4,n=rr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new gv(!0,t,r,n,i),this.blurYFilter=new gv(!1,t,r,n,i),this.resolution=n,this.quality=r,this.blur=t,this.repeatEdgePixels=!1}apply(t,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,r,a,di.CLEAR),this.blurYFilter.apply(t,a,n,i),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,r,n,i):this.blurXFilter.apply(t,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var $R=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class vv extends rr{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(LE,$R,t),this.alpha=1}_loadMatrix(t,r=!1){let n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t}_colorMatrix(t){const r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(t,r){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(t,r){const[n,i,s]=et.shared.setValue(t).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(t,r){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(t){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)}hue(t,r){t=(t||0)/180*Math.PI;const n=Math.cos(t),i=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),d=n+(1-n)*o,h=o*(1-n)-a*i,p=o*(1-n)+a*i,c=o*(1-n)+a*i,f=n+o*(1-n),m=o*(1-n)-a*i,v=o*(1-n)-a*i,_=o*(1-n)+a*i,E=n+o*(1-n),x=[d,h,p,0,0,c,f,m,0,0,v,_,E,0,0,0,0,0,1,0];this._loadMatrix(x,r)}contrast(t,r){const n=(t||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(t=0,r){const n=t*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(t){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)}sepia(t){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)}technicolor(t){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)}polaroid(t){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)}toBGR(t){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)}kodachrome(t){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)}browni(t){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)}vintage(t){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)}colorTone(t,r,n,i,s){t=t||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=et.shared,[a,d,h]=o.setValue(n).toArray(),[p,c,f]=o.setValue(i).toArray(),m=[.3,.59,.11,0,0,a,d,h,t,0,p,c,f,r,0,a-p,d-c,h-f,0,0];this._loadMatrix(m,s)}night(t,r){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(t,r){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,r)}lsd(t){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}vv.prototype.grayscale=vv.prototype.greyscale;var VR=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,XR=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class YR extends rr{constructor(t,r){const n=new pt;t.renderable=!1,super(XR,VR,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,r==null&&(r=20),this.scale=new We(r,r)}apply(t,r,n,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var KR=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,QR=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class qR extends rr{constructor(){super(QR,KR)}}var ZR=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class JR extends rr{constructor(t=.5,r=Math.random()){super(LE,ZR,{uNoise:0,uSeed:0}),this.noise=t,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Hb={AlphaFilter:FR,BlurFilter:jR,BlurFilterPass:gv,ColorMatrixFilter:vv,DisplacementFilter:YR,FXAAFilter:qR,NoiseFilter:JR};Object.entries(Hb).forEach(([e,t])=>{Object.defineProperty(Hb,e,{get(){return He("7.1.0",`filters.${e} has moved to ${e}`),t}})});class e8{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(It.system.add(this.tickerUpdate,this,Us.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){!this.tickerAdded||(It.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const ys=new e8;class $u{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=$u.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new We,this.page=new We,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class $d extends $u{constructor(){super(...arguments),this.client=new We,this.movement=new We,this.offset=new We,this.global=new We,this.screen=new We}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,r,n,i,s,o,a,d,h,p,c,f,m,v,_){throw new Error("Method not implemented.")}}class In extends $d{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Va extends $d{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Va.DOM_DELTA_PIXEL=0;Va.DOM_DELTA_LINE=1;Va.DOM_DELTA_PAGE=2;const t8=2048,r8=new We,Zp=new We;class n8{constructor(t){this.dispatch=new Hu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort((n,i)=>n.priority-i.priority)}dispatchEvent(t,r){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r),this.dispatch.emit(r||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const r=this.mappingTable[t.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,r){ys.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,r8.set(t,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,r){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,r,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{t.currentTarget=n[s],this.notifyTarget(t,o)})}propagationPath(t){const r=[t];for(let n=0;n<t8&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(t.parent),t=t.parent}return r.reverse(),r}hitTestMoveRecursive(t,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(ys.pauseUpdate=!1),t.interactiveChildren&&t.children){const p=t.children;for(let c=p.length-1;c>=0;c--){const f=p[c],m=this.hitTestMoveRecursive(f,this._isInteractive(r)?r:f.eventMode,n,i,s,o||s(t,n));if(m){if(m.length>0&&!m[m.length-1].parent)continue;const v=t.isInteractive();(m.length>0||v)&&(v&&this._allInteractiveElements.push(t),m.push(t)),this._hitElements.length===0&&(this._hitElements=m),a=!0}}}const d=this._isInteractive(r),h=t.isInteractive();return h&&h&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:d&&!s(t,n)&&i(t,n)?h?[t]:[]:null}hitTestRecursive(t,r,n,i,s){if(this._interactivePrune(t)||s(t,n))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(ys.pauseUpdate=!1),t.interactiveChildren&&t.children){const d=t.children;for(let h=d.length-1;h>=0;h--){const p=d[h],c=this.hitTestRecursive(p,this._isInteractive(r)?r:p.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const f=t.isInteractive();return(c.length>0||f)&&c.push(t),c}}}const o=this._isInteractive(r),a=t.isInteractive();return o&&i(t,n)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,r){if(t.hitArea&&(t.worldTransform.applyInverse(r,Zp),!t.hitArea.contains(Zp.x,Zp.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!n.containsPoint?.(r))return!0}return!1}hitTestFn(t,r){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(r):!1}notifyTarget(t,r){r=r??t.type;const n=`on${r}`;t.currentTarget[n]?.(t);const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${r}capture`:r;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}mapPointerDown(t){if(!(t instanceof In)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(t){if(!(t instanceof In)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==r.target){const d=t.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(t,d,s);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!r.composedPath().includes(s)){const p=this.createPointerEvent(t,"pointerleave",s);for(p.eventPhase=p.AT_TARGET;p.target&&!r.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(h)}if(s!==r.target){const d=t.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(r,d);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let p=s?.parent;for(;p&&p!==this.rootTarget.parent&&p!==r.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=r.target?.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(t){if(!(t instanceof In)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.createPointerEvent(t),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof In)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId);if(r.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(t,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof In)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const d=n.button===2;this.notifyTarget(n,d?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[t.button]||(i.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:r});const d=i.clicksByButton[t.button];if(d.target===a.target&&r-d.timeStamp<200?++d.clickCount:d.clickCount=1,d.target=a.target,d.timeStamp=r,a.detail=d.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof In)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]),i=this.createPointerEvent(t);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[t.button]}this.freeEvent(i)}mapWheel(t){if(!(t instanceof Va)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(t);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(t){if(!t)return null;let r=t[0];for(let n=1;n<t.length&&t[n].parent===r;n++)r=t[n];return r}createPointerEvent(t,r,n){const i=this.allocateEvent(In);return this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(t){const r=this.allocateEvent(Va);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(t,r){const n=this.allocateEvent(In);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=r??n.type,n}copyWheelData(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}copyPointerData(t,r){t instanceof In&&r instanceof In&&(r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist)}copyMouseData(t,r){t instanceof $d&&r instanceof $d&&(r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.client.copyFrom(t.client),r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.movement.copyFrom(t.movement),r.screen.copyFrom(t.screen),r.shiftKey=t.shiftKey,r.global.copyFrom(t.global))}copyData(t,r){r.isTrusted=t.isTrusted,r.srcElement=t.srcElement,r.timeStamp=performance.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.which=t.which,r.layer.copyFrom(t.layer),r.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}notifyListeners(t,r){const n=t.currentTarget._events[r];if(!!n&&!!t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let i=0,s=n.length;i<s&&!t.propagationImmediatelyStopped;i++)n[i].once&&t.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,t)}}const i8=1,s8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},xv=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new n8(null),ys.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new In(null),this.rootWheelEvent=new Va(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...xv.defaultEventFeatures},{set:(t,r,n)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),t[r]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,xv._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,n=t.length;r<n;r++){const i=t[r],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;ys.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let i=0,s=n.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,n[i]);o.type+=r,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,ys.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ys.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ys.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*i,e.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,n=e.changedTouches.length;r<n;r++){const i=e.changedTouches[r];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,t.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=i8),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=s8[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let Mu=xv;Mu.extension={name:"events",type:[ve.RendererSystem,ve.CanvasRendererSystem]};Mu.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Ce.add(Mu);function zb(e){return e==="dynamic"||e==="static"}const o8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??zb(Mu.defaultEventMode)},set interactive(e){He("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Mu.defaultEventMode},set eventMode(e){this._internalInteractive=zb(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,i)},removeEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,i)},dispatchEvent(e){if(!(e instanceof $u))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};mt.mixin(o8);const a8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};mt.mixin(a8);const l8=9,Lh=100,u8=0,c8=0,Gb=2,Wb=1,h8=-1e3,d8=-1e3,f8=2;class pT{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ui.tablet||Ui.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${Lh}px`,r.style.height=`${Lh}px`,r.style.position="absolute",r.style.top=`${u8}px`,r.style.left=`${c8}px`,r.style.zIndex=Gb.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Wb}px`,t.style.height=`${Wb}px`,t.style.position="absolute",t.style.top=`${h8}px`,t.style.left=`${d8}px`,t.style.zIndex=f8.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const r=t.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const t=performance.now();if(Ui.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:d}=this.renderer,h=i/o*d,p=s/a*d;let c=this.div;c.style.left=`${r}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const m=this.children[f];if(m.renderId!==this.renderId)m._accessibleActive=!1,Ba(this.children,f,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,f--;else{c=m._accessibleDiv;let v=m.hitArea;const _=m.worldTransform;m.hitArea?(c.style.left=`${(_.tx+v.x*_.a)*h}px`,c.style.top=`${(_.ty+v.y*_.d)*p}px`,c.style.width=`${v.width*_.a*h}px`,c.style.height=`${v.height*_.d*p}px`):(v=m.getBounds(),this.capHitArea(v),c.style.left=`${v.x*h}px`,c.style.top=`${v.y*p}px`,c.style.width=`${v.width*h}px`,c.style.height=`${v.height*p}px`,c.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(c.title=m.accessibleTitle),c.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&c.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==c.title||m.tabIndex!==c.tabIndex)&&(c.title=m.accessibleTitle,c.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:r,height:n}=this.renderer;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${Lh}px`,r.style.height=`${Lh}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=Gb.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,r){const{displayObject:n}=t.target,i=this.renderer.events.rootBoundary,s=Object.assign(new $u(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===l8&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}pT.extension={name:"accessibility",type:[ve.RendererPlugin,ve.CanvasRendererPlugin]};Ce.add(pT);var Gr=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(Gr||{});const Vd={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let Ni,oa;function jb(){oa={s3tc:Ni.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ni.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Ni.getExtension("WEBGL_compressed_texture_etc"),etc1:Ni.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Ni.getExtension("WEBGL_compressed_texture_pvrtc")||Ni.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Ni.getExtension("WEBGL_compressed_texture_atc"),astc:Ni.getExtension("WEBGL_compressed_texture_astc")}}const p8={extension:{type:ve.DetectionParser,priority:2},test:async()=>{const t=ge.ADAPTER.createCanvas().getContext("webgl");return t?(Ni=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{oa||jb();const t=[];for(const r in oa)!oa[r]||t.push(r);return[...t,...e]},remove:async e=>(oa||jb(),e.filter(t=>!(t in oa)))};Ce.add(p8);class m8 extends zu{constructor(t,r={width:1,height:1,autoLoad:!0}){let n,i;typeof t=="string"?(n=t,i=new Uint8Array):(n=null,i=t),super(i,r),this.origin=n,this.buffer=i?new Yg(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Yg(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class wo extends m8{constructor(t,r){super(t,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=wo._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||wo._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,r,n){const i=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:d,levelWidth:h,levelHeight:p,levelBuffer:c}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,d,this.format,h,p,0,c)}return!0}onBlobLoaded(){this._levelBuffers=wo._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,r,n,i,s,o,a){const d=new Array(n);let h=t.byteOffset,p=o,c=a,f=p+i-1&~(i-1),m=c+s-1&~(s-1),v=f*m*Vd[r];for(let _=0;_<n;_++)d[_]={levelID:_,levelWidth:n>1?p:f,levelHeight:n>1?c:m,levelBuffer:new Uint8Array(t.buffer,h,v)},h+=v,p=p>>1||1,c=c>>1||1,f=p+i-1&~(i-1),m=c+s-1&~(s-1),v=f*m*Vd[r];return d}}const Jp=4,Oh=124,g8=32,$b=20,v8=542327876,Fh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},x8={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Uh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},y8=1,_8=2,b8=4,w8=64,S8=512,E8=131072,T8=827611204,C8=861165636,A8=894720068,k8=808540228,P8=4,I8={[T8]:Gr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[C8]:Gr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[A8]:Gr.COMPRESSED_RGBA_S3TC_DXT5_EXT},R8={[70]:Gr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Gr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Gr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Gr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Gr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Gr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Gr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Gr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Gr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function M8(e){const t=new Uint32Array(e);if(t[0]!==v8)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,Oh/Uint32Array.BYTES_PER_ELEMENT),i=n[Fh.HEIGHT],s=n[Fh.WIDTH],o=n[Fh.MIPMAP_COUNT],a=new Uint32Array(e,Fh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,g8/Uint32Array.BYTES_PER_ELEMENT),d=a[y8];if(d&b8){const h=a[x8.FOURCC];if(h!==k8){const w=I8[h],T=Jp+Oh,P=new Uint8Array(e,T);return[new wo(P,{format:w,width:s,height:i,levels:o})]}const p=Jp+Oh,c=new Uint32Array(t.buffer,p,$b/Uint32Array.BYTES_PER_ELEMENT),f=c[Uh.DXGI_FORMAT],m=c[Uh.RESOURCE_DIMENSION],v=c[Uh.MISC_FLAG],_=c[Uh.ARRAY_SIZE],E=R8[f];if(E===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===P8)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,y=Jp+Oh+$b;if(_===1)x.push(new Uint8Array(e,y));else{const w=Vd[E];let T=0,P=s,R=i;for(let I=0;I<o;I++){const N=Math.max(1,P+3&-4),k=Math.max(1,R+3&-4),L=N*k*w;T+=L,P=P>>>1,R=R>>>1}let M=y;for(let I=0;I<_;I++)x.push(new Uint8Array(e,M,T)),M+=T}return x.map(w=>new wo(w,{format:E,width:s,height:i,levels:o}))}throw d&w8?new Error("DDSParser does not support uncompressed texture data."):d&S8?new Error("DDSParser does not supported YUV uncompressed texture data."):d&E8?new Error("DDSParser does not support single-channel (lumninance) texture data!"):d&_8?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Vb=[171,75,84,88,32,49,49,187,13,10,26,10],N8=67305985,kn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},yv=64,Xb={[Pe.UNSIGNED_BYTE]:1,[Pe.UNSIGNED_SHORT]:2,[Pe.INT]:4,[Pe.UNSIGNED_INT]:4,[Pe.FLOAT]:4,[Pe.HALF_FLOAT]:8},B8={[ce.RGBA]:4,[ce.RGB]:3,[ce.RG]:2,[ce.RED]:1,[ce.LUMINANCE]:1,[ce.LUMINANCE_ALPHA]:2,[ce.ALPHA]:1},D8={[Pe.UNSIGNED_SHORT_4_4_4_4]:2,[Pe.UNSIGNED_SHORT_5_5_5_1]:2,[Pe.UNSIGNED_SHORT_5_6_5]:2};function L8(e,t,r=!1){const n=new DataView(t);if(!O8(e,n))return null;const i=n.getUint32(kn.ENDIANNESS,!0)===N8,s=n.getUint32(kn.GL_TYPE,i),o=n.getUint32(kn.GL_FORMAT,i),a=n.getUint32(kn.GL_INTERNAL_FORMAT,i),d=n.getUint32(kn.PIXEL_WIDTH,i),h=n.getUint32(kn.PIXEL_HEIGHT,i)||1,p=n.getUint32(kn.PIXEL_DEPTH,i)||1,c=n.getUint32(kn.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=n.getUint32(kn.NUMBER_OF_FACES,i),m=n.getUint32(kn.NUMBER_OF_MIPMAP_LEVELS,i),v=n.getUint32(kn.BYTES_OF_KEY_VALUE_DATA,i);if(h===0||p!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const _=4,E=4,x=d+3&-4,y=h+3&-4,w=new Array(c);let T=d*h;s===0&&(T=x*y);let P;if(s!==0?Xb[s]?P=Xb[s]*B8[o]:P=D8[s]:P=Vd[a],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const R=r?U8(n,v,i):null;let I=T*P,N=d,k=h,L=x,W=y,O=yv+v;for(let z=0;z<m;z++){const Q=n.getUint32(O,i);let X=O+4;for(let Z=0;Z<c;Z++){let F=w[Z];F||(F=w[Z]=new Array(m)),F[z]={levelID:z,levelWidth:m>1||s!==0?N:L,levelHeight:m>1||s!==0?k:W,levelBuffer:new Uint8Array(t,X,I)},X+=I}O+=Q+4,O=O%4!==0?O+4-O%4:O,N=N>>1||1,k=k>>1||1,L=N+_-1&~(_-1),W=k+E-1&~(E-1),I=L*W*P}return s!==0?{uncompressed:w.map(z=>{let Q=z[0].levelBuffer,X=!1;return s===Pe.FLOAT?Q=new Float32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4):s===Pe.UNSIGNED_INT?(X=!0,Q=new Uint32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4)):s===Pe.INT&&(X=!0,Q=new Int32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4)),{resource:new zu(Q,{width:z[0].levelWidth,height:z[0].levelHeight}),type:s,format:X?F8(o):o}}),kvData:R}:{compressed:w.map(z=>new wo(null,{format:a,width:d,height:h,levels:m,levelBuffers:z})),kvData:R}}function O8(e,t){for(let r=0;r<Vb.length;r++)if(t.getUint8(r)!==Vb[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function F8(e){switch(e){case ce.RGBA:return ce.RGBA_INTEGER;case ce.RGB:return ce.RGB_INTEGER;case ce.RG:return ce.RG_INTEGER;case ce.RED:return ce.RED_INTEGER;default:return e}}function U8(e,t,r){const n=new Map;let i=0;for(;i<t;){const s=e.getUint32(yv+i,r),o=yv+i+4,a=3-(s+3)%4;if(s===0||s>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let d=0;for(;d<s&&e.getUint8(o+d)!==0;d++);if(d===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(e.buffer,o,d)),p=new DataView(e.buffer,o+d+1,s-d-1);n.set(h,p),i+=4+s+a}return n}const H8={extension:{type:ve.LoadParser,priority:Ti.High},name:"loadDDS",test(e){return Do(e,".dds")},async load(e,t,r){const i=await(await ge.ADAPTER.fetch(e)).arrayBuffer(),o=M8(i).map(a=>{const d=new Be(a,{mipmap:_i.OFF,alphaMode:Xn.NO_PREMULTIPLIED_ALPHA,resolution:Ls(e),...t.data});return wf(d,r,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Ce.add(H8);const z8={extension:{type:ve.LoadParser,priority:Ti.High},name:"loadKTX",test(e){return Do(e,".ktx")},async load(e,t,r){const i=await(await ge.ADAPTER.fetch(e)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=L8(e,i),d=s??o,h={mipmap:_i.OFF,alphaMode:Xn.NO_PREMULTIPLIED_ALPHA,resolution:Ls(e),...t.data},p=d.map(c=>{d===o&&Object.assign(h,{type:c.type,format:c.format});const f=new Be(c,h);return f.ktxKeyValueData=a,wf(f,r,e)});return p.length===1?p[0]:p},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Ce.add(z8);const G8={extension:ve.ResolveParser,test:e=>{const r=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:e=>{if(e.split("?")[0].split(".").pop()==="ktx"){const n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(n.some(i=>e.endsWith(i)))return{resolution:parseFloat(ge.RETINA_PREFIX.exec(e)?.[1]??"1"),format:n.find(i=>e.endsWith(i)),src:e}}return{resolution:parseFloat(ge.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};Ce.add(G8);const W8=new Ue,j8=4,Vl=class{constructor(e){this.renderer=e}async image(e,t,r){const n=new Image;return n.src=await this.base64(e,t,r),n}async base64(e,t,r){const n=this.canvas(e);if(n.toBlob!==void 0)return new Promise((i,s)=>{n.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},t,r)});if(n.toDataURL!==void 0)return n.toDataURL(t,r);if(n.convertToBlob!==void 0){const i=await n.convertToBlob({type:t,quality:r});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(e,t);s&&Vl._flipY(r,n,i),Vl._unpremultiplyAlpha(r);const o=new K4(n,i,1),a=new ImageData(new Uint8ClampedArray(r.buffer),n,i);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(e,t);return s&&Vl._flipY(r,n,i),Vl._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,i=!1,s,o=!1;if(e&&(e instanceof Bo?s=e:(s=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),o=!0)),s){if(n=s.baseTexture.resolution,t=t??s.frame,i=!1,!o){r.renderTexture.bind(s);const c=s.framebuffer.glFramebuffers[r.CONTEXT_UID];c.blitFramebuffer&&r.framebuffer.bind(c.blitFramebuffer)}}else n=r.resolution,t||(t=W8,t.width=r.width/n,t.height=r.height/n),i=!0,r.renderTexture.bind();const a=Math.round(t.width*n),d=Math.round(t.height*n),h=new Uint8Array(j8*a*d),p=r.gl;return p.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,d,p.RGBA,p.UNSIGNED_BYTE,h),o&&s?.destroy(!0),{pixels:h,width:a,height:d,flipY:i}}destroy(){this.renderer=null}static _flipY(e,t,r){const n=t<<2,i=r>>1,s=new Uint8Array(n);for(let o=0;o<i;o++){const a=o*n,d=(r-o-1)*n;s.set(e.subarray(a,a+n)),e.copyWithin(a,d,d+n),e.set(s,d)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const n=e[r+3];if(n!==0){const i=255.001/n;e[r]=e[r]*i+.5,e[r+1]=e[r+1]*i+.5,e[r+2]=e[r+2]*i+.5}}}};let mT=Vl;mT.extension={name:"extract",type:ve.RendererSystem};Ce.add(mT);class $8{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function V8(e,t){let r=!1;if(e?._textures?.length){for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof se){const i=e._textures[n].baseTexture;t.includes(i)||(t.push(i),r=!0)}}return r}function X8(e,t){if(e.baseTexture instanceof Be){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Y8(e,t){if(e._texture&&e._texture instanceof se){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function K8(e,t){return t instanceof Gu?(t.updateText(!0),!0):!1}function Q8(e,t){if(t instanceof Dt){const r=t.toFontString();return er.measureFont(r),!0}return!1}function q8(e,t){if(e instanceof Gu){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Z8(e,t){return e instanceof Dt?(t.includes(e)||t.push(e),!0):!1}const gT=class{constructor(e){this.limiter=new $8(gT.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(q8),this.registerFindHook(Z8),this.registerFindHook(V8),this.registerFindHook(X8),this.registerFindHook(Y8),this.registerUploadHook(K8),this.registerUploadHook(Q8)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,It.system.addOnce(this.tick,this,Us.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)It.system.addOnce(this.tick,this,Us.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Kt)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&It.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Xd=gT;Xd.uploadsPerFrame=4;Object.defineProperties(ge,{UPLOADS_PER_FRAME:{get(){return Xd.uploadsPerFrame},set(e){He("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Xd.uploadsPerFrame=e}}});function vT(e,t){return t instanceof Be?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function J8(e,t){if(!(t instanceof Xr))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&vT(e,s.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function eM(e,t){return e instanceof Xr?(t.push(e),!0):!1}class xT extends Xd{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(eM),this.registerUploadHook(vT),this.registerUploadHook(J8)}}xT.extension={name:"prepare",type:ve.RendererSystem};Ce.add(xT);const Xl=class{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof se?e:null,this.baseTexture=e instanceof Be?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=Ls(e,null);return r===null&&(r=parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Xl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Xl.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const n=this._frameKeys[t],i=this._frames[n],s=i.frame;if(s){let o=null,a=null;const d=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,h=new Ue(0,0,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution);i.rotated?o=new Ue(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new Ue(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new Ue(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new se(this.baseTexture,o,h,a,i.rotated?2:0,i.anchor,i.borders),se.addToCache(this.textures[n],n)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const n=e[t][r];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Xl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Xl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let _v=Xl;_v.BATCH_SIZE=1e3;const tM=["jpg","png","jpeg","avif","webp"];function yT(e,t,r){const n={};if(e.forEach(i=>{n[i]=t}),Object.keys(t.textures).forEach(i=>{n[i]=t.textures[i]}),!r){const i=fr.dirname(e[0]);t.linkedSheets.forEach((s,o)=>{const a=yT([`${i}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const rM={extension:ve.Asset,cache:{test:e=>e instanceof _v,getCacheableAssets:(e,t)=>yT(e,t,!1)},resolver:{test:e=>{const r=e.split("?")[0].split("."),n=r.pop(),i=r.pop();return n==="json"&&tM.includes(i)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(ge.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:ve.LoadParser,priority:Ti.Normal},async testParse(e,t){return fr.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,r){let n=fr.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+e.meta.image;i=av(i,t.src);const o=(await r.load([i]))[i],a=new _v(o.baseTexture,e,t.src);await a.parse();const d=e?.meta?.related_multi_packs;if(Array.isArray(d)){const h=[];for(const c of d){if(typeof c!="string")continue;let f=n+c;t.data?.ignoreMultiPack||(f=av(f,t.src),h.push(r.load({src:f,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(h);a.linkedSheets=p,p.forEach(c=>{c.linkedSheets=[a].concat(a.linkedSheets.filter(f=>f!==c))})}return a},unload(e){e.destroy(!0)}}};Ce.add(rM);const aa=class extends Dt{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new aa(Object.keys(aa.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete aa.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=aa;if(r[e]){const n=r[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ge.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((i,s)=>{const o=URL.createObjectURL(n),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(n)})).then(async([n,i])=>{const s=Object.assign({family:fr.basename(e,fr.extname(e)),weight:"normal",style:"normal",src:n,dataSrc:i,refs:1,originalUrl:e,fontFace:null},t);r[e]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=$4(e)),typeof e=="number"?j4(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const i=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${i} ${e}`}reset(){Object.assign(this,aa.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ge.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let su=aa;su.availableFonts={};su.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const la=class extends Yn{constructor(e="",t={}){super(se.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const r=new Image,n=se.from(r,{scaleMode:ge.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new Ue,n.trim=new Ue,this.texture=n;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),d=document.createElementNS(s,"div"),h=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=la.defaultMaxWidth,this.maxHeight=la.defaultMaxHeight,this._domElement=d,this._styleElement=h,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(d),this._image=r,this._loadImage=new Image,this._autoResolution=la.defaultAutoResolution,this._resolution=la.defaultResolution??ge.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(n)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:s+r.padding*2,height:o+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:i,height:s}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,i)),r.height=n.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{n.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,r.src=n.src,n.onload=null,n.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:n}=this,{padding:i}=e,{baseTexture:s}=t;t.trim.width=t._frame.width=r.width/n,t.trim.height=t._frame.height=r.height/n,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},la.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Ss(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Ss(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof su?(this.ownsStyle=!1,this._style=e):e instanceof Dt?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=su.from(e)):(this.ownsStyle=!0,this._style=new su(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Cf=la;Cf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Cf.defaultMaxWidth=2024;Cf.defaultMaxHeight=2024;Cf.defaultAutoResolution=!0;function nM(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function iM(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}let _T=[12303291,7130603,15759548,12303291],Yd=[2883570,16722807],fe=nM(),me=iM(),Ke=fe*.13,De=Ke/4,_s=20,un=Ke*3,sM=6,oM=me*(sM/3)/1980,Oe=me*.064;function Xt(e,t,r,n){const[i,s]=t,[o,a]=r;return e<i&&!n?o:e>s&&!n?a:o===a&&!n?o:(e-i)/(s-i)*(a-o)+o}function em(e){let t=0,r=0;for(;t<=e;)t++,r+=1e3+t*200;return r}function Hh(e){let t=0,r=0;for(;r<e;)t++,r+=1e3+t*200;return t}function mo(e,t,r,n){const[i,s]=t,[o,a]=r;let d=(e-i)/(s-i);return n=="eout"&&(d=Math.sin(d*Math.PI/2)),n=="ein"&&(d=1-Math.cos(d*Math.PI/2)),n=="normal"&&(d=0),e<i?o:e>s?a:o===a?o:d*(a-o)+o}function So(e,t,r){const[n,i]=t,[s,o]=r;let a=(e-n)/(i-n);return a=1-Math.pow(1-a,5),e<n?s:e>i?o:s===o?s:a*(o-s)+s}const bT="/assets/hit.3c6c1a6d.png",wT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABWCAYAAACJg9eFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFEsAABRLARTJybQAAAOMaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPg0KICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOklwdGM0eG1wRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIj4NCiAgICAgIDxkYzp0aXRsZT4NCiAgICAgICAgPHJkZjpBbHQ+DQogICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5VbnRpdGxlZCBBcnR3b3JrPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOkFsdD4NCiAgICAgIDwvZGM6dGl0bGU+DQogICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xMzI8L3RpZmY6WVJlc29sdXRpb24+DQogICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xMzI8L3RpZmY6WFJlc29sdXRpb24+DQogICAgICA8dGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPjI8L3RpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4NCiAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+DQogICAgICA8SXB0YzR4bXBFeHQ6QXJ0d29ya1RpdGxlPlVudGl0bGVkIEFydHdvcms8L0lwdGM0eG1wRXh0OkFydHdvcmtUaXRsZT4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgPC9yZGY6UkRGPg0KPC94OnhtcG1ldGE+DQo8P3hwYWNrZXQgZW5kPSJyIj8+LDm18gAABCNJREFUeF7t3T1uFEEQhmEvv5YsBw4ISAiJSbkAF+ACnIALEBMTkpGRcAJuwAk4DLbB1Neab6jtnV0hBN6u4X2kUveK9FVp7MW7JwAAAAAAAAAAAAAA/D8209nc3NxsvQaq2Gw2N9P1ZEPIWJs70wmsRr+p2dqoauvx4+50z4gbVcwxm6K+5/t0ClGjihx1uyvqB+0lUaOmxahP28tfIRM3KtiJ2aeiPtOpFwunEDZGszdonYr6PC4K1yP9CYxmJ2aPor6IS47aY/kOjMAhyxyzR1E/iksftEP2CYzGYS9G/TguemdR04fdR92/Bm6LI7admGN+aBT1k7joDZilsOVQyESOf0WR7uN/2wk65ruifhoXxfynYQO36WDQOhX1s7goZL2zmKP2KUSNUeSoFXKO+lqnon4eFwWtTd1va51C1BiFo+6D1pbWXCvqF3HJUS89hgAjUcxLQc9Rv4yLou7D9qYmaozGQevcClqjqF/FRUHfj8lR501N2BiFt7TDzlFfxbSoX8dFQTtqBe7Hj35TEzeORRGbg/ZoQzvqK0X9Ji4KOm/rPmpixijylvbMW1qnon4bF29qR53DFsLGCBy05KDnLa1R1O/ioj8U8Kb2D4x5SztowsaxOGaHrXHUbUNP56Wifh8XRe1NnaPm8QOjyUH3UWta1B/ioqgdtqPWOGhHTdw4FoXs0+NHD0d9qVHUH+OSo9YsbWqCxrHloPOmnre0RlF/isvDGIetTa1x1BrJURM4bosCNt8dtEZbuj1LT/NNUX+Oi4N21N7UOuXQpiZw/G055MxbWrShvalz1G1Tf4mLY973g6IQL47NQev0ps7P1C1uRf01Lg5aMXsctAcYgbe1w1bUnha2onb9wCr4h0BgNYgaq0PUWB2ixuoQNVaHX+mhmt/6lR5vvqAK//rZQe9984W3yTEax9vzhhbFnKPeepuc/9CEkeXAffeW1ijoHHX7D03811NU4U2tcdR+ltbMm5o/EkAF3tI5bAWdn6nnqPlzLlTioPOmdtQtbEXNH96iAoXsM4edo27P1oqaj0hAFY5Z8qbWeFPzYTYoJ2/pHLY3dYuajx1DBd7Q0ketmOdtraj5gEhU4k3tsP34MW9rRc1H+aIaB60zR62N3aLmQ9dRTd7U/bZuUfP1GKhEMYs3dR92i5ovMkIljtpB57D1+NG+yIivnEMlOWpP3tZ8OSiG5XiXHAxbUfM1zqigjzwH7WlhK2q+cB8VKWKfW6OoL+LSB51jzndgBA5aFqM+j0sfc38Co3HY+ZyjPovLoZgJG6NxyLITt6I+nV4QNCrZG7ai1h8ItPt0CjGjip24FbXeSWz36RSiRhWLUeuNlx5Ro4ocdaOo2dBYgznuPmqgPL01DqzK1pZma6OqzWaz82wNAAAAAAAAoICTk59aGlmKfpTNKQAAAABJRU5ErkJggg==",ST="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFEsAABRLARTJybQAAAOMaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPg0KICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOklwdGM0eG1wRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIj4NCiAgICAgIDxkYzp0aXRsZT4NCiAgICAgICAgPHJkZjpBbHQ+DQogICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5VbnRpdGxlZCBBcnR3b3JrPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOkFsdD4NCiAgICAgIDwvZGM6dGl0bGU+DQogICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xMzI8L3RpZmY6WVJlc29sdXRpb24+DQogICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xMzI8L3RpZmY6WFJlc29sdXRpb24+DQogICAgICA8dGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPjI8L3RpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4NCiAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+DQogICAgICA8SXB0YzR4bXBFeHQ6QXJ0d29ya1RpdGxlPlVudGl0bGVkIEFydHdvcms8L0lwdGM0eG1wRXh0OkFydHdvcmtUaXRsZT4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgPC9yZGY6UkRGPg0KPC94OnhtcG1ldGE+DQo8P3hwYWNrZXQgZW5kPSJyIj8+LDm18gAABydJREFUeF7tncvLFlUcx99HS8XQoloGoasQum3MlZiVLUK0fZd9KrgU3UQiSYuwRfQPVLvATYSQKG40yvBC0CZJcBVlWhSZl+n7mfn94Ol9Ls4z88w8c/l94OvgmZdz+Z5nzpw5c86ZpSAIgiAIgiDoPgM7Np4kSdbp8Lz0tPSU9KT0hPSo9Ii0Rlot/WO6KV2XrklXpR+lS9KFwWDwp46NpLEVogrA4K3Sq9I26VlppVSWu9JF6bR0QjqjCqICG0GjKkSVsEKHl6Q3pF3Sw5JzW7osYeYP0hWJX/6v0m/SHRl7S3FwlTwoceU8LnElbZQ2SVTqMxLnnT+k49Jn0teK4x6BvUYmrpX2Sz9Jw1yS3pe2Sw/Zn5dC8ZDWixYv8Q9D+uRjrf15v1DB10sHpV8k55r0gcS9onJIx9IjXYf8HJK4N3UfFXSltEe6LjnnpJ3SPO4TM0O6lv5Zyfld2istJE+1oMJtlr6TnFPSy3a6ESg/NJEnyZxxXtpsp7uBCrRK+lC6K8FV6XU73UiUv13Sz2RWkG/yv8pOtxcVYoP0jQT/Skeludykq0b5pBNAfsk3UI4Ndrp9KPP8ymiL4YrUykuffFv+gfLstlPtQZl+R/Im6gup1b0W8m/lAMq1x041H2X23TTbSXJPOiC1ZphmGpTDykO54D071VyUyY+yvCa3pbctuFNQLisffCw18wenjPmV8bf0mgV3Espn5YTDFtwclCnuGcAvp9OV4VBOKy80556izNCb4kZH29rJZmoSlNfKTfkX3/tSJnjO8K7tAQvuFZQ7K37qA6PLi0GJ8wTuD310CTvRm5oVym3lh28lXgPUjxJmOAF4aOrH6OgEKL/5AMcsuD6UKE+vtJsMK3Rr8K0g5gl+4MsWC64eJcZwtY/aHrXgQOBHZks6SlzP0L0S4n0GMGrbioHCusAP8wX2WnB1KBHe9PnLpUYPoS8KfMnsSX1ab8HVoAR47QqnLCgYg/w5ndmUHLSg+aPIeT/g78Ab9aavaeBPZlPqVzUTJxQxszLgnAUFU8CnzK5kvwXND0W6QvKpOjstOJgCPmV2pb4x72x+KMJX0qizKTPdnYkxR/DJ/IL7NvGz1hgzCuHzwWDAlMzgPphPn2b/W3rTjuVR7a6RbqT1XNMktq4gvzZltqX+MWe5PIpoRxplkjCDPJgR+fZ9Zl+yw4LGMkuTxSx0+NKOwWx8ZUf3sRyqWcZlYLsFBTOAb5l9yXkLKo4iWSfdkRjFjHGrAuCb+YePLD4aS94mi5VLdHMvq9fwVxoSzIT5xvoWfHyOsHHkrRDvVbFYJiiO+8eiobHkrRDW9AErl4LiuH/u5wh5K4RlYcAysqA47p/7OULeCmG1K7CmLyiO++d+jpC3QlhACSywDIrj/rmfI+StEJ9NwmrXoDism4fh1cX/I2+F+PjLHTsGxWBpN5Qbz9KDTIr9NyiBWTnRy7xXyC3+UTyLmY3XEYb8m7hzRN4K8QgesGNQDN9BonSF3LDjY3YMiuG9KzbGGUveCvHeAXuHBMVx/9zPEfJWCFscwcQnzCAX7p/7OULeCvEnzMWte+gG7t/EEY+8FcLmX8AWR0Fx3D/3c4S8FcI4PrDfVFAc96/cvAT1n4ffGPZzL6mS4Jv5V/6N4SDbo5CXK/SjXyAsmBl8w7+L5udY8jZZwB6FMHUaSzARn7XoPpZDl1nMyyqBfMs1Lys3ioiZizfTKGPm4kzIL5+5iH9TR3pzN1lq9xh/YfdOmN8c1X7wlh2Pm4/zQbXrzVbMfs8JPplfMN/7ryKM9SEzgk+ZXRWsDwFF6iuozlpQMAV8yuyqYAUVKOLhNYYxz3cK+JPZVOEaQ1DkbDIMJy0oGAP+ZDYlhyyoGpQAe3r47j/s0R4sA18ye1Kfqt8DRomw4zOwr22Mbw2BH+YL7LPgalFCdOd8zUjsdTIEfmS2pE/n9T0eKLHYDWgZ5gl+1LsbkKNEY78sg/KbD1D/flmghGNHOUG5rfywuB3lQInHnotN2XPRUSZ2S7SbsStpU1BmfFOzvu7bW/1mZbOiTB3O8ta7na2PWHDzUObYCx345fRh7/dPpOZ2Zsic5FcKbWuXv45wRGpH2ZRR7inc6IAuYde+H9K8e8b9UKbpfXmXmIem+MLOolHmN0o8LAHDCm3+BhXlaP8cZxVitXRM8iasjV9pI//dWkWmAm2RfJQY2vAdQ0Zt6x8orAsVjqF73qe04Uuf+6R+zLBRQSd9C5c2u5alD6Rj6flUHSA//fkW7nJUcG6c474WTVNBP7+Kr0UTr0/vdEh/oV+LbtQDjYxg3lKvv6fe2CdMGcsc2K0SexRukzBzHm0527ZSqcxCPyGdmev0zpK0ZjhDFcQiF3a2Y6I3+03xy2dXHa4E2noqkKsDcxFLj1ntygJLriSWkTFz/4IqYOL6jCAIgiAIgiAIgn6xtPQfZzA7iPwOWWMAAAAASUVORK5CYII=",Af="/assets/hit4.ca8e2549.png",ET="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AQMDzUv/OtSngAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAF1ElEQVR42u2d3Y7kNBCF62SzIEB7hRASl0j7MPvKXPMcSNxxx4+A3WGnU9w4kmX5p6pcttPT01LU6XR6Jv5yfFyuOA7RHbyYGbn1K79wRXhdBQL4ocHOUt4q0HiJMK8AGY8AdAVgPBLQmYBxQaDW3/KVAOMCQEepmlcCxiKosy2CZ8PFZKirPXcaYDwIUBPgHrgYDBWDaxWPBmyFi0FQVzZi7P0bC1wshoorVPkRcLEI6lWjAje4mAx1JHiesY8U7j4pHsYEBUMABwJ4cGgUZQVqqLUHGpxgs+E7tv5NiWqxCComRwXsfFKacDEIai9QD49lJ/Wa4G4DLEQKFck2ZLZpjwmVz9oT3lWTYFCr9iBqhett1DQ+ySMso6Rar6iAFCr1tAA0Ch+38Glrj8b+/lGBk1pLn9FhHz2eyULluqh2n6xMKK1DYhW56p6LV899kdmXvVULB7XW4EAJH52KZYW3smcEkap2hMdqVQiDqilRX257Sb0o7MPDIDioFQrVwqjuli+yUJkadatVOyoq0ECVwpb0+TmTMygpM6dct7zBbqzaFj+sQa1tqym2BCdtpKTVXgqyuR8G2ACE1b60TaraFGS8pFVdYg/saQd7Z1W3dARQgNkCLIlLkQFZC70k4ZbJDnajDVhzCDWoiPIXWrCpWlu+6+Gn1f09Gi8o/ZQacEvAc8Bi1R3CeNfSaKlVuzf81eK5EtWWoG5CuJxZtgxczhwTV0B2x7PMDAA8MgmDSjqwBnUrgM6BPZL1FC4agN07BhIrGDEgoxQVbJn3LbM9hYoILiVwayGXp3impA1hVHKq3DfJewr2CMstbL8VbEYD1TU62J3AQWEDLeVuEdQ9LCdgioCeMJ+TAh/R3+UCoJoduCh7dKK71YEoeewJ9YuwvI2O9UZE/4WFMjFrurBn43RFsK30IBK1vg1Qvyaib4joq7DvJyL6J4J0RFHB0BZfBXbxfQI5FZ9wdyL6kojeEdH3RPRD+P63sMSWcKt49nSozIz9IjBzcN8Exb4jovdE9CHA/omI/g3Lp0pItk4tAO8A+EJ3t6Sx7hYs4Vsi+jGsfxeAb8JOyfQXM2O/2C1Daet+C6r8lYh+Dor9Jaj1Oekg0KMrlpMsFGcC/xPqExH9FWD+EX73e9j2lIErub41p/G6kFLj5UZEn0N1/zsA/DOAfSKijxHYW3QyWpmuFwuWGyk/TnpUp7I/h+p/xrHPYdtzBSqvVO3uXL1rnkmCLNWR2ecIABHlBm7JcmT8lgUnkgTHPAUsU/suFgj3o4zXcpKd4gQsZZSdU+yhADVE0XsHROk+JTWg0HBRQcVIVMzJe8kOrH7LPUreJ/pqLgESg6Io5YdM/79kIUdhPQU6omGrX5pxCrm4kPSQHkyszjhhXQJLFaBaP3Wzg56rtKVBEVrVcqaRgqDLyw24VOg4aJTaZQMSsBYPReNzzmOpAFkDthZuScIv9rKBkeEWF6qvNKnMpB9XoIHqqs5W0qN0tdZjQFzp3gDNMKMWXBYAl3ireSSMdlCc1A6YZEMua8nokrprow1LcCxV3uXW0F4rkIDMXSkt2ULLGiSF5EJDxcIT4tYL6x3RLR1krB0jC8NJloRPGgvQbHMf0V1rpHqU25vcka6rAZoVO1C1tXXJZ2vMORz2qLtmpKotNWKtYZbWxkSa9HZXa1UVznfPWBTr1X/3ujtRdWfiRn4vdigkd/7/UVD9FGtUrbVDMUux1vBKpdYej5V2Blrd3prHetcWV6hdim2o1qpcTXQxypK6v+uaCGIw3N7feqhtCFTVwQ+E66lWTfU1d2UlYEdfpaVKIqVUkNHzx/aoWDw91IoJzVYOaZoC1VTIO50tbtpEZl2Fu5P5DZfNa9hVqEHTnGIiTNH+U6c5VcJd7avmE7BkYt47BTwcqHtBXyc/H1jA1+n6Bxfq9QETr49Eua9Holwd8N0/xOdqgF/cY6dWQn6IB6XNAn2Vx/td+nUCZ2acyz0c9/9qbmPj7j+UBQAAAABJRU5ErkJggg==";function Nu(e,t){let r=e.length;if(t<=e[0].time)return e[0];if(t>=e[r-1].time)return e[r-1];let n=0,i=r,s=0;for(;n<i;){if(s=Math.floor((n+i)/2),e[s].time==t)return e[s];if(t<e[s].time){if(s>0&&t>e[s-1].time)return e[s-1];i=s}else{if(s<r-1&&t<e[s+1].time)return e[s];n=s+1}}return e[s]}function Mt(e,t,r){const n=Nu(r.sort((a,d)=>a.time-d.time),e),i=n.floorPosition+n.speed*(e-n.time),s=Nu(r.sort((a,d)=>a.time-d.time),t);return s.floorPosition+s.speed*(t-s.time)-i}function tm(e,t,r){let n=0,i=t.filter(s=>s.time<=e).sort((s,o)=>s.time-o.time).reverse();if(t=t.filter(s=>s.time<=e).sort((s,o)=>s.time-o.time),i[0]!=null&&(n+=e-i[0].time),i.length==0){const s=t[0],o=t.length!=1?t[1]:s;r-=o.speed*(e-s.time)}return i.forEach((s,o)=>{const a=s,d=o+1!=i.length?i[o+1]:s;d.speed*(a.time-d.time)<=r?(n+=a.time-d.time,r-=d.speed*(a.time-d.time)):n+=r/d.speed}),n}var kf={exports:{}},Pf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aM=Y.exports,lM=Symbol.for("react.element"),uM=Symbol.for("react.fragment"),cM=Object.prototype.hasOwnProperty,hM=aM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dM={key:!0,ref:!0,__self:!0,__source:!0};function TT(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)cM.call(t,n)&&!dM.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:lM,type:e,key:s,ref:o,props:i,_owner:hM.current}}Pf.Fragment=uM;Pf.jsx=TT;Pf.jsxs=TT;(function(e){e.exports=Pf})(kf);const Re=kf.exports.Fragment,A=kf.exports.jsx,V=kf.exports.jsxs;function fM(e){const t=Y.exports.useRef(Mt(e.startTime,e.endTime,e.game.beatmap.timingPoints)),[r,n]=Y.exports.useState(-t),[i,s]=Y.exports.useState(!0),[o,a]=Y.exports.useState(1),[d,h]=Y.exports.useState(-1),[p,c]=Y.exports.useState(""),[f,m]=Y.exports.useState(!1),[v,_]=Y.exports.useState(0),[E,x]=Y.exports.useState(0),[y,w]=Y.exports.useState(0),[T,P]=Y.exports.useState(0);let R=e.game.beatmap.cursor.filter(Z=>Z.startTime<=e.startTime)[e.game.beatmap.cursor.filter(Z=>Z.startTime<=e.startTime).length-1],M=e.game.beatmap.cursor.filter(Z=>Z.startTime>e.startTime)[0],I=R!=null?R.x:.5,N=M!=null?M.x:R.x,k=R!=null?R.startTime:0,L=M!=null?M.startTime:R.startTime;const W=mo(e.startTime,[k,L],[I,N],R.type);let O=fe/2-un/2+W*un;const[z,Q]=Y.exports.useState(16777215);Y.exports.useRef(new Xr);let X=_T[e.keys-1];return e.game.beatmap.cursor.filter(Z=>Z.startTime<=e.startTime).sort((Z,F)=>Z.startTime-F.startTime).reverse()[0],ue.exports.useTick(()=>{const Z=e.game.currenttime;if(m(Z>=e.visiblestart&&Z<=e.visibleend+1e3),s(Z<=e.visibleend+2e3),f&&i){e.game.hitlist.length>0&&e.game.hitlist.forEach(H=>{H.startsWith(e.startTime.toString()+","+e.keys.toString())&&(!H.endsWith("misslost")&&d==-1&&p==""?(c("true"),h(Z),Q(H.split(",")[2]=="perfect"?16735978:H.split(",")[2]=="great"?16775774:H.split(",")[2]=="miss"?16711680:16777215)):H.endsWith("misslost")&&c("false")),H.startsWith(e.startTime.toString()+","+(e.keys+10).toString())&&H.endsWith("misslost")&&c("false")});let F=e.hitobject.scrollPosList[T],D=e.hitobject.scrollPosList[T+1]!=null?e.hitobject.scrollPosList[T+1]:F;D!=null&&Z>D[0]&&(P(T+1),F=e.hitobject.scrollPosList[T],D=e.hitobject.scrollPosList[T+1]!=null?e.hitobject.scrollPosList[T+1]:F),p=="true"?(a(1),_(So(Z,[d,d+1e3],[1,0])),x(So(Z,[d,d+1e3],[2,2.5])),w(Xt(Z,[d+100,d+1e3],[.3,0],!0))):p=="false"&&(a(.1),a(1),_(0),x(2.5),w(0)),D!=null&&n(me-Oe-Xt(Z,[F[0],D[0]],[F[1],D[1]])),Z>=e.endTime&&a(0)}}),A(Re,{children:f&&V(Re,{children:[A(ue.exports.Sprite,{texture:se.WHITE,x:O-Ke/2+De*(e.keys-1),y:p=="true"?me-Oe:r,anchor:[0,1],width:De,height:p=="true"?Math.round(t.current-(r-me)-Oe):t.current,alpha:Math.round(t.current-(r-me)-Oe)!=0?o:0,tint:X}),A(ue.exports.Sprite,{texture:se.WHITE,tint:"white",x:O-Ke/2+De*(e.keys-1),y:p=="true"?me-Oe:r,anchor:[0,1],width:1,height:p=="true"?Math.round(t.current-(r-me)-Oe):t.current,alpha:Math.round(t.current-(r-me)-Oe)!=0?o:0}),A(ue.exports.Sprite,{texture:se.WHITE,tint:"white",x:O-Ke/2+De*e.keys,y:p=="true"?me-Oe:r,anchor:[1,1],width:1,height:p=="true"?Math.round(t.current-(r-me)-Oe):t.current,alpha:Math.round(t.current-(r-me)-Oe)!=0?o:0}),A(ue.exports.Sprite,{texture:se.WHITE,tint:"white",x:O-Ke/2+(De*(e.keys-1)+De/2),y:p=="true"?me-Oe:r,blendMode:we.ADD,anchor:[.5,1],width:2,height:p=="true"?Math.round(t.current-(r-me)-Oe):t.current,alpha:Math.round(t.current-(r-me)-Oe)!=0?o:0}),e.game.currenttime<e.visibleend+1e3&&V(ue.exports.Container,{alpha:1,children:[A(ue.exports.Sprite,{image:bT,x:O-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,blendMode:we.ADD,tint:z,anchor:[.5,1],width:De*v,height:De*8,alpha:v}),A(ue.exports.Sprite,{image:wT,x:O-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:z,width:De,height:_s*1.5,alpha:v}),A(ue.exports.Sprite,{image:ST,x:O-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:z,width:De*E,height:De*E,alpha:y}),A(ue.exports.Sprite,{image:Af,x:O-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:z,width:De*4,alpha:v}),A(ue.exports.Sprite,{image:ET,x:O-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:z,width:De*v*10,height:De*v*10,alpha:v})]})]})})}let fo=-1,CT=-1,AT="miss",Yl="miss",po=0;function rm(e,t,r){switch(fo=e,CT=e,AT=t,t){case"perfect":Yl="X-PHASED";break;case"great":Yl="PHASED";break;case"bad":Yl="MIS-PHASED";break;case"miss":Yl="ERROR";break}po=r}function pM(e){return new Gu(e,new Dt({fill:16721594,dropShadow:!0,dropShadowBlur:0,dropShadowDistance:0,dropShadowColor:16777215,fontFamily:"Courier New",fontSize:25,fontVariant:"small-caps",trim:!1}))}function mM(e){ue.exports.useApp(),Y.exports.useState(0);const[t,r]=Y.exports.useState(0),n=[16735838,16775774,6225761,6225914,8806143,16735978],[i,s]=Y.exports.useState(0),[o,a]=Y.exports.useState(0),[d,h]=Y.exports.useState(0);return ue.exports.useTick(()=>{if(e.game.mode=="play"){const p=e.game.currenttime;if(fo!=-1){switch(p>fo+1e3&&(fo=-1),AT){case"perfect":r(Math.round(Math.random()*(n.length-1)));break;case"great":r(1);break;case"miss":r(0);break;case"bad":r(4)}h(So(p,[fo,fo+300],[1.2,1])),s(p<fo+1e3?1:0),a(p<CT+1e3?1:0)}}}),V(Re,{children:[A(ue.exports.Text,{text:`${Math.round(e.game.score/e.game.maxscore*100)} %`,x:fe-10,y:20,anchor:[1,0],style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${fe*.02}px`,align:"left"}),alpha:1}),A(ue.exports.Text,{text:`${Yl.toUpperCase()} ${e.game.combo}`,anchor:[.5,.5],x:fe/2,y:me*.3,alpha:i,tint:n[t],style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${fe*.018}px`,align:"left",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:0,dropShadowColor:"black"})}),A(ue.exports.Text,{text:`${e.game.combo}`,anchor:[.5,.5],x:fe/2,y:me*.05,alpha:1,style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${fe*.015}px`,align:"left"})}),A(ue.exports.Sprite,{image:Af,anchor:[.5,.5],x:fe/2,width:fe*.1,y:me*.3,alpha:i*.5,blendMode:we.ADD,tint:n[t],scale:[3/d,3/d]}),A(ue.exports.Text,{text:`${po>20?"Late":po<-20?"Early":""} ${Math.abs(po)>20?`(${Math.round(po*10)/10}ms)`:""}`,anchor:[.5,.5],x:fe/2,y:me*.35,alpha:o,tint:po>20?14907970:(po<-20,5111771),style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${fe*.008}px`,align:"left",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:0,dropShadowColor:"black"})})]})}Yn.from(se.WHITE);pM("");function gM(e){let[t,r]=Y.exports.useState(!1),[n,i]=Y.exports.useState(!0);const[s,o]=Y.exports.useState(-_s),[a,d]=Y.exports.useState(1),[h,p]=Y.exports.useState(0),[c,f]=Y.exports.useState(0),[m,v]=Y.exports.useState(0),[_,E]=Y.exports.useState(-1),[x,y]=Y.exports.useState(!1),[w,T]=Y.exports.useState(16777215),[P,R]=Y.exports.useState(0);let M=_T[e.keys-1],I=e.game.beatmap.cursor.filter(X=>X.startTime<=e.startTime)[e.game.beatmap.cursor.filter(X=>X.startTime<=e.startTime).length-1],N=e.game.beatmap.cursor.filter(X=>X.startTime>e.startTime)[0],k=I!=null?I.x:.5,L=N!=null?N.x:I.x,W=I!=null?I.startTime:0,O=N!=null?N.startTime:I.startTime;const z=mo(e.startTime,[W,O],[k,L],I.type);let Q=fe/2-un/2+z*un;return ue.exports.useTick(()=>{const X=e.game.currenttime;y(X>=e.visiblestart&&X<=e.visibleend),i(X<=e.visibleend+2e3)}),ue.exports.useTick(()=>{let X=e.game.isPlaying;const Z=e.game.currenttime;if(x&&n&&(e.game.hitlist.length>0?e.game.hitlist.forEach(F=>{F.startsWith(e.startTime.toString()+","+e.keys.toString())&&_==-1&&(r(!0),T(F.split(",")[2]=="perfect"?16735978:F.split(",")[2]=="great"?16775774:F.split(",")[2]=="miss"?16711680:16777215),E(Z))}):(r(!1),E(-1))),X&&n&&Z>=e.visiblestart&&Z<=e.visibleend+1e3)if(t)w!=16711680?d(0):d(So(Z,[_,_+500],[1,0])),p(So(Z,[_,_+500],[1,0])),f(So(Z,[_,_+500],[2,2.5])),v(Xt(Z,[_+100,_+500],[.3,0],!0));else{let F=e.hitobject.scrollPosList[P],D=e.hitobject.scrollPosList[P+1]!=null?e.hitobject.scrollPosList[P+1]:F;D==null&&(D=F),Z>D[0]&&e.hitobject.scrollPosList[P+1]!=null&&(R(P+1),F=e.hitobject.scrollPosList[P],D=e.hitobject.scrollPosList[P+1]!=null?e.hitobject.scrollPosList[P+1]:F),o(me-Oe-Xt(Z,[F[0],D[0]],[F[1],D[1]]))}}),V(Re,{children:[x?V(Re,{children:[A(ue.exports.Sprite,{texture:se.WHITE,tint:M,x:Q-Ke/2+De*(e.keys-1),y:s,anchor:[0,1],width:De,height:_s,alpha:a}),A(ue.exports.Sprite,{texture:se.WHITE,tint:"white",x:Q-Ke/2+De*(e.keys-1)-2,y:s,anchor:[0,1],width:2,height:_s,alpha:a}),A(ue.exports.Sprite,{texture:se.WHITE,tint:"white",x:Q-Ke/2+De*e.keys+2,y:s,anchor:[1,1],width:2,height:_s,alpha:a})]}):null,e.game.currenttime<e.visibleend+1e3&&V(Re,{children:[A(ue.exports.Sprite,{image:bT,x:Q-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,tint:w,anchor:[.5,1],width:De*h,height:De*8,alpha:h}),A(ue.exports.Sprite,{texture:se.WHITE,tint:w,x:Q-Ke/2+De*(e.keys-1),y:Xt(h,[0,1],[me-Oe-me*.3,me-Oe]),anchor:[0,1],width:De,height:_s,alpha:h*.4}),A(ue.exports.Sprite,{image:Af,x:Q-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,anchor:[.5,.5],tint:w,width:De*4,alpha:h}),A(ue.exports.Sprite,{image:ET,x:Q-Ke/2+De*(e.keys-1)+De/2,y:me-Oe,anchor:[.5,.5],tint:w,width:De*h*10,height:De*h*10,alpha:h})]})]})}const bv=200,vM=40,Yb=80,nm=bv;function xM(e){const r=Y.exports.useRef(0),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0);e.hitObjects,new Audio;let a=e.hitObjects.filter(d=>d.type=="hold"&&d.column==e.i&&d.ticks?.length!=0).sort((d,h)=>d.startTime-h.startTime);return ue.exports.useApp().stage,ue.exports.useTick(()=>{if(e.game.audio.playing()){const h=e.game.audio.seek()*1e3;if(e.game.mode=="play"){const p=e.hitObjects[r.current],c=h+0;if(p){const{startTime:m}=p,v=Math.abs(m-c);if(e.game.key[e.i-1][0]=="1"&&v<=bv){let _="";v<=vM&&v<=nm?_="perfect":v<=Yb&&v<=nm?_="great":v>=Yb&&v<=nm&&(_="miss"),p.type=="hold"?e.game.hit("perfect",m,e.i,m-c):e.game.hit(_,m,e.i,v),e.game.key[e.i-1]="01",r.current++}p&&h>p.startTime+bv&&(e.game.miss(h,e.i),r.current++)}(async()=>{const m=a[s];if(m){const _=m.ticks[n];h>=_-20&&(e.game.key[e.i-1][1]=="1"?(e.game.hit("perfect",_,e.i+10,0),i(n+1)):h>=_+20&&(e.game.miss(_,e.i+10),i(n+1)),n+1==m.ticks?.length&&(o(s+1),i(0)))}})()}}}),null}function yM(e){if(e.hitObjects.length==0)return null;var t=e.game.mode=="edit"?fe/4:fe/2;let r=e.i==1?t-Ke/2:e.i==2||e.i==3?t:t+Ke/2;return A(Re,{children:V(ue.exports.Container,{position:[0,0],children:[A(xM,{hitObjects:e.hitObjects,timingPoints:e.timingPoints,game:e.game,i:e.i}),e.hitObjects.map((n,i)=>{if(n.type=="note")return A(gM,{x:r,startTime:n.startTime,keys:e.i,i,hitobject:n,visibleend:n.screenEndTime,visiblestart:n.screenStartTime,game:e.game,cursorx:e.game.beatmap.cursor.filter(s=>s.startTime<=n.startTime)[0]!=null?e.game.beatmap.cursor.filter(s=>s.startTime<=n.startTime).sort((s,o)=>s.startTime-o.startTime).reverse()[0].x:.5},i)}),e.hitObjects.map((n,i)=>{if(n.type=="hold")return A(fM,{x:r,hitobject:n,visibleend:n.screenEndTime,visiblestart:n.screenStartTime,startTime:n.startTime,endTime:n.endTime,timingPoint:e.timingPoints.filter(s=>s.time<=n.startTime).sort((s,o)=>o.time-s.time)[0],keys:e.i,i,game:e.game},i)})]})})}const na=200;function _M(e){const[t,r]=Y.exports.useState(0),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0);ue.exports.useApp(),Y.exports.useState(0),e.game.playStartTime;const a=e.cursors.filter(p=>p.type!="normal"&&p.ticks?.length!=0).sort((p,c)=>p.startTime-c.startTime),d=e.cursors.sort((p,c)=>p.startTime-c.startTime).filter((p,c)=>(e.game.beatmap.cursor[c-1]!=null?e.game.beatmap.cursor[c-1].x:.5)!=p.x),h=Y.exports.useMemo(()=>d[n],[n]);return ue.exports.useTick(()=>{if(e.game.playStartTime,e.game.isPlaying){const f=e.game.currenttime;if(e.game.mode=="play"){const m=n!=0?d[n-1].x:.5;if(h!=null){if(m==h.x)i(n+1);else if(f>h.startTime+na){var c=async()=>{i(n+1),m!=h.x&&e.game.miss(h.startTime,5)};c()}if(m>h.x&&e.game.key[4]=="10"||m<h.x&&e.game.key[4]=="01"){const _=f>=h.startTime-na||f>=h.startTime+na?h:void 0;_&&Math.abs(_.startTime-f)<=na&&(e.game.hit("perfect",h.startTime,5,0),i(n+1))}}(async()=>{const _=a[s];if(_){e.game.beatmap.timingPoints.find(y=>_.startTime>=y.time);const x=_.ticks[t];x==null?(o(s+1),r(0)):f>=x-na&&(m>h.x&&e.game.key[4]=="10"||m<h.x&&e.game.key[4]=="01"?(e.game.hit("perfect",x,7,0),r(t+1)):f>=x+na&&(e.game.miss(x,7),r(t+1)),t+1==_.ticks?.length&&(o(s+1),r(0)))}})()}}}),null}function bM(e){e.beatmap.cursor=Y.exports.useRef(e.beatmap.cursor.sort((F,D)=>F.startTime-D.startTime)).current;let t=e.beatmap.cursor[e.i]?e.beatmap.cursor[e.i].startTime:0,r=e.beatmap.cursor[e.i]!=null?e.beatmap.cursor[e.i].x:.5,n=e.beatmap.cursor[e.i-1]!=null?e.beatmap.cursor[e.i-1].x:.5,i=e.beatmap.cursor[e.i-1]!=null?e.beatmap.cursor[e.i-1].type:"normal",s=e.beatmap.cursor[e.i+1]!=null?e.beatmap.cursor[e.i+1].x:.5;const o=e.x;let a=e.beatmap.cursor[e.i+1]?e.beatmap.cursor[e.i+1].startTime:e.game.duration;const d=Y.exports.useRef(Math.round(Mt(t,a,e.game.beatmap.timingPoints))),[h,p]=Y.exports.useState(-d);let c=0;Y.exports.useEffect(()=>{for(let F=1;F<e.i+1;F++)if(e.beatmap.cursor[e.i-F]!=null){n=e.beatmap.cursor[e.i-F].x;break}});const f=n>r?Yd[0]:Yd[1],[m,v]=Y.exports.useState(!0),[_,E]=Y.exports.useState(!1),[x,y]=Y.exports.useState(-1),[w,T]=Y.exports.useState(0),[P,R]=Y.exports.useState(!1);Y.exports.useState(!1);const[M,I]=Y.exports.useState(0),[N,k]=Y.exports.useState(0),[L,W]=Y.exports.useState(0),O=Y.exports.useRef(0),z=e.i==-1?0:e.beatmap.cursor[e.i].screenStartTime,Q=e.i==-1?a:e.beatmap.cursor[e.i].screenEndTime,X=e.i==-1?[[t,0],[a,-Mt(100,a,e.game.beatmap.timingPoints)]]:e.beatmap.cursor[e.i].scrollPosList;Xt(e.x,[0,1],[fe/2-un/2,fe/2+un/2]),ue.exports.useTick(()=>{if(c=e.game.currenttime,R(c>=z&&c<=Q),v(c<=Q+500),P&&m){e.game.hitlist.length>0&&e.game.hitlist.forEach(H=>{H.startsWith(t.toString()+",5")&&!H.endsWith("miss")&&x==-1&&(E(!0),y(c))}),_&&(T(Xt(c,[x,x+500],[1,0])),I(So(c,[x,x+1e3],[2,2.5])),k(Xt(c,[x+100,x+1e3],[.3,0],!0)));let F=X[L],D=X[L+1]!=null?X[L+1]:F;c>D[0]&&(W(L+1),F=X[L],D=X[L+1]!=null?X[L+1]:F),p(me-Oe-Xt(c,[F[0],D[0]],[F[1],D[1]])),O.current=Xt(c,[a,a+e.game.NOTE_TRAVEL_FROM_LINE_TO_BOTTOM_DURATION()],[1,0])}});const Z=Xt(o,[0,1],[fe/2-un/2,fe/2+un/2]);return A(Re,{children:P&&V(Re,{children:[e.beatmap.cursor[e.i].type=="ein"||e.beatmap.cursor[e.i].type=="eout"||e.beatmap.cursor[e.i].type=="linear"?V(ue.exports.Container,{children:[A(ue.exports.Sprite,{texture:e.curve1,x:s>e.x?Z-Ke*1.1/2:Z+Ke*1.1/2,y:h,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]}),A(ue.exports.Sprite,{texture:e.curve2,x:s>e.x?Z-25:Z+25,y:h,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]}),A(ue.exports.Sprite,{texture:e.curve3,x:(s>e.x,Z-Ke*1.1/2),y:h,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]}),A(ue.exports.Sprite,{texture:e.curve3,x:(s>e.x,Z+Ke*1.1/2),y:h,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]})]}):null,e.beatmap.cursor[e.i].type=="normal"&&V(Re,{children:[A(ue.exports.Sprite,{texture:se.WHITE,x:Z,width:Ke*1.1+2,height:d.current+2,y:h+1,alpha:1,anchor:[.5,1]}),A(ue.exports.Sprite,{texture:se.WHITE,tint:3151144,x:Z,width:Ke*1.1,height:d.current,y:h,alpha:1,anchor:[.5,1]}),A(ue.exports.Sprite,{texture:se.WHITE,x:Z,width:1,height:d.current,alpha:.5,y:h,anchor:n>r?[.5,1]:[.5,1]})]}),i=="normal"&&V(Re,{children:[A(ue.exports.Sprite,{texture:se.WHITE,x:Z,width:Math.abs(n-r)*un,tint:f,height:20,alpha:.7,y:h,anchor:n>r?[0,1]:[1,1]}),A(ue.exports.Sprite,{texture:se.WHITE,x:Z,width:Math.abs(n-r)*un,height:2,alpha:1,y:h,anchor:n>r?[0,1]:[1,1]}),A(ue.exports.Sprite,{texture:se.WHITE,x:Z,width:Math.abs(n-r)*un,height:2,alpha:1,y:h-20,anchor:n>r?[0,1]:[1,1]})]}),A(ue.exports.Sprite,{image:wT,x:Z,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:16735978,width:Ke*1.1,height:_s*1.5,alpha:w}),A(ue.exports.Sprite,{image:ST,x:Z,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:16735978,width:De*M,height:De*M,alpha:N}),A(ue.exports.Sprite,{image:Af,x:Z,y:me-Oe,anchor:[.5,.5],blendMode:we.ADD,tint:16735978,width:Ke*1.1,alpha:w})]})})}function kT(e){const[t,r]=Y.exports.useState(0);return ue.exports.useTick(()=>{r(Xt(e.game.currenttime,[0,e.game.duration],[0,fe]))}),A(ue.exports.Sprite,{texture:se.WHITE,height:1,width:t,x:0,tint:"white",alpha:1,anchor:[0,0],y:0})}function wM(e){const[t,r]=Y.exports.useState(!1);return ue.exports.useTick(()=>{var n=e.game.audio.seek()*1e3;if(e.game.currenttime=n,e.game.isPlaying){const i=e.game.beatmap.hitObjects.sort((o,a)=>{const d=o.endTime!=null?o.endTime:o.startTime,h=a.endTime!=null?a.endTime:a.startTime;return d-h});i.reverse();const s=i[0].type=="note"?i[0].startTime:i[0].endTime;n>=s&&!t&&setTimeout(()=>{r(!0),zN(e.user,e.game.beatmap,e.game.score/e.game.maxscore,e.game.hitlist.filter(o=>o.endsWith("perfect")).length,e.game.hitlist.filter(o=>o.endsWith("great")).length,e.game.hitlist.filter(o=>o.endsWith("miss")).length,e.game.hitlist.filter(o=>o.endsWith("misslost")).length,e.game.combo)},2e3)}}),V(ue.exports.Container,{children:[A(kT,{game:e.game}),e.beatmap.cursor.map((n,i)=>{const s=i==e.beatmap.cursor.length-1?e.beatmap.cursor[i].x:e.beatmap.cursor[i+1].x;let o=e.beatmap.cursor[i+1]?e.beatmap.cursor[i+1].startTime:e.game.duration;const a=n.x>s?Yd[0]:Yd[1],d=Y.exports.useRef(Math.round(Mt(n.startTime,o,e.game.beatmap.timingPoints))),h=new Xr;h.lineStyle(0,"white",1),h.beginFill(3151144);const p=0;let c=0;const f=Math.abs(n.x-s)*un,m=0,v=n.type=="ein"?"eout":n.type=="eout"?"ein":n.type;let _=0;const E=d.current,x=8;for(let I=0;I<x;I++)h.lineTo(mo(c+(f-p)/x,[p,f],[p,f],v),_+(E-m)/x),c+=(f-p)/x,_+=(E-m)/x;c+=(f-p)/x,_+=(E-m)/x,h.lineTo(f,E);for(let I=0;I<x;I++)h.lineTo(mo(c-(f-p)/x,[p,f],[p,f],v)+Ke*1.1,_-(E-m)/x),c-=(f-p)/x,_-=(E-m)/x;h.lineTo(p+Ke*1.1,m);const y=new Xr,w=50;y.lineStyle(1,a,1),y.beginFill(a,.5),c=0,_=0;for(let I=0;I<x;I++)y.lineTo(mo(c+(f-p)/x,[p,f],[p,f],v),_+(E-m)/x),c+=(f-p)/x,_+=(E-m)/x;c+=(f-p)/x,_+=(E-m)/x,y.lineTo(f,E);for(let I=0;I<x;I++)y.lineTo(mo(c-(f-p)/x,[p,f],[p,f],v)+w,_-(E-m)/x),c-=(f-p)/x,_-=(E-m)/x;y.lineTo(p+w,m);const T=new Xr;T.lineStyle(2,"white",1),c=0,_=0;for(let I=0;I<x;I++)T.lineTo(mo(c+(f-p)/x,[p,f],[p,f],v),_+(E-m)/x),c+=(f-p)/x,_+=(E-m)/x;c+=(f-p)/x,_+=(E-m)/x,T.lineTo(f,E);const P=ue.exports.useApp().renderer.generateTexture(h),R=ue.exports.useApp().renderer.generateTexture(y),M=ue.exports.useApp().renderer.generateTexture(T);return A(bM,{x:n.x,beatmap:e.beatmap,i,curve1:P,curve2:R,curve3:M,type:n.type,game:e.game},i)}),[...Array(4)].map((n,i)=>A(yM,{i:i+1,hitObjects:e.beatmap.hitObjects.filter(s=>s.column==i+1),timingPoints:e.beatmap.timingPoints,game:e.game},i)),A(_M,{game:e.game,cursors:e.beatmap.cursor})]})}function SM(e){const[t,r]=Y.exports.useState(0),n=5e3;let i=!1;return t>n&&!i&&(e.game.setVolume(10/100),e.game.isPlaying=!0,e.game.play("play"),e.game.currenttime=0,i=!i),ue.exports.useTick(()=>{t<=n&&r(Date.now()-e.time)}),t<=n&&A(ue.exports.Container,{})}function EM(e){return V(Re,{children:[A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,0],alpha:1,tint:16721594,width:e.game.beatmap.metadata.title.length*(fe*.015)+fe*.1,height:me*.08,x:5,y:15}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[1,1],tint:e.game.beatmap.metadata.difficulttype=="LITE"?4697343:e.game.beatmap.metadata.difficulttype=="NEON"?13322239:e.game.beatmap.metadata.difficulttype=="ENIGMA"?16730050:6553600,alpha:1,width:`${e.game.beatmap.metadata.difficulttype}${e.game.beatmap.metadata.difficult}`.length*(fe*.012),height:Oe,x:fe-10,y:me}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[1,1],tint:"white",alpha:1,width:`${e.game.beatmap.metadata.difficulttype}${e.game.beatmap.metadata.difficult}`.length*(fe*.012),height:Oe,x:fe,y:me}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,.5],tint:16721594,alpha:1,width:4*(fe*.012)+fe*.02,height:Oe,x:fe/2+5,y:me*.05+5}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,.5],tint:"white",alpha:1,width:4*(fe*.012)+fe*.02,height:Oe,x:fe/2,y:me*.05}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,0],alpha:1,tint:"white",width:e.game.beatmap.metadata.title.length*(fe*.015)+fe*.1,height:me*.08,x:0,y:10}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[0,0],height:fe*.15*9/16,width:fe*.15,alpha:1,x:fe*.01+5,tint:16721594,y:me*.13+5}),A(ue.exports.Sprite,{image:e.game.beatmap.jacketPath,anchor:[0,0],height:fe*.15*9/16,width:fe*.15,alpha:1,x:fe*.01,y:me*.13}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[0,0],tint:"white",alpha:1,height:me*.55,width:me*.075,x:0+5,y:me*.35+5}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[0,0],alpha:1,tint:16721594,height:me*.55,width:me*.075,x:0,y:me*.35}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,0],alpha:1,width:fe*.19,tint:16721594,height:me*.09,x:fe-5,y:10+5}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,0],alpha:1,width:fe*.19,tint:"white",height:me*.09,x:fe,y:10}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,0],alpha:1,width:fe*.13,tint:16721594,height:me*.04,x:fe-5,y:80+5}),A(ue.exports.Sprite,{texture:se.WHITE,anchor:[.5,0],alpha:1,width:fe*.13,tint:"white",height:me*.04,x:fe,y:80}),A(ue.exports.Text,{text:"SCORE :",x:fe-7,y:80,anchor:[1,0],style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"500",fontSize:`${fe*.012}px`,align:"left"}),alpha:1}),A(ue.exports.Text,{text:`${e.game.beatmap.metadata.title}`,x:10,y:15,anchor:[0,0],style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${fe*.012}px`,align:"left"}),alpha:1}),A(ue.exports.Text,{text:`${e.game.beatmap.metadata.artist}`,x:10,y:15+fe*.016,anchor:[0,0],style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"600",fontSize:`${fe*.01}px`,align:"left"}),alpha:1}),A(ue.exports.Text,{text:`${e.game.beatmap.metadata.difficulttype} ${e.game.beatmap.metadata.difficult}`,x:fe-10,anchor:[1,.5],y:me-Oe/2,style:new Dt({fill:e.game.beatmap.metadata.difficulttype=="LITE"?4697343:e.game.beatmap.metadata.difficulttype=="NEON"?13322239:e.game.beatmap.metadata.difficulttype=="ENIGMA"?16730050:6553600,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${fe*.012}px`,align:"left"}),alpha:1}),A(ue.exports.Sprite,{texture:se.WHITE,height:10,tint:"white",width:fe,x:fe/2,anchor:[.5,.5],y:me-Oe}),A(ue.exports.Sprite,{texture:se.WHITE,height:5,tint:16721594,width:fe,x:fe/2,anchor:[.5,.5],y:me-Oe})]})}function TM(e){const[t,r]=Y.exports.useState(0);Y.exports.useRef(new Xr);const n=Y.exports.useRef(new Xr),i=fe*.2,s=me*.03;let o=me*.4;return ue.exports.useTick(()=>{Xt(t,[0,i],[0,100])!=e.game.gauge&&r(Xt(t,[0,i],[0,100])<e.game.gauge?t+2:t-2)}),V(Re,{children:[A(ue.exports.Sprite,{texture:se.WHITE,x:fe*.01,y:o+10+10,tint:"white",alpha:1,anchor:[0,0],width:s,height:i,mask:n.current}),A(ue.exports.Graphics,{x:fe*.01,y:o+10+10,height:t,draw:a=>{a.beginFill(0),a.drawRect(0,0,s,i),a.endFill()},blendMode:we.ADD,ref:n}),A(ue.exports.Text,{text:e.game.gauge.toString(),style:new Dt({fill:"white",fontFamily:"Montserrat",fontWeight:"800",fontSize:`${fe*.015}px`,align:"left"}),alpha:1,x:fe*.01+fe*.0075,y:o,anchor:[.5,.5]}),A(ue.exports.Text,{text:`Easy
Gauge`,style:new Dt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${fe*.009}px`,align:"left"}),alpha:1,x:fe*.01+fe*.03,y:o,anchor:[0,.5]})]})}function CM(e){return V(Re,{children:[A(ue.exports.Sprite,{image:`/BG/${e.imgpath}.jpg`,height:fe*9/16,width:fe,x:fe/2,anchor:[.5,.5],y:me/2}),A(ue.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1191269416869052416/IMG_3652.png?ex=65a4d319&is=65925e19&hm=d60b4e7526c37c3b78ab1c91543bb59f30c375257d7ac99529cc250373c91454&",tint:"white",height:me,width:fe,x:fe/2,alpha:1,anchor:[.5,.5],y:me/2}),A(ue.exports.Sprite,{texture:se.WHITE,tint:"black",height:me,width:fe,x:fe/2,alpha:0,anchor:[.5,.5],y:me/2})]})}function Ye(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function AM(e){const[t,r]=Y.exports.useState(e.chart),{audioPath:n}=t;let i=0,s=0;t.hitObjects.forEach(m=>{m.type=="hold"&&(s+=m.ticks.length,i+=100*m.ticks.length),i+=100,s+=1}),t.cursor.sort((m,v)=>m.startTime-v.startTime).forEach((m,v)=>{const _=e.game.beatmap.cursor[v-1]!=null?e.game.beatmap.cursor[v-1].x:.5;m.type!="normal"&&(s+=m.ticks.length,i+=100*m.ticks.length),m.x!=_&&(i+=100,s+=1)});const o=e.game.init(10,10,400,n,i,t,oM,s,e.user);o.setAudioPath(n),o.audiovolume,o.effectvolume;function a(m){return m==Ye("COL_1_KEY")||m==Ye("COL_2_KEY")||m==Ye("COL_3_KEY")||m==Ye("COL_4_KEY")||m==Ye("COL_1_KEY2")||m==Ye("COL_2_KEY2")||m==Ye("COL_3_KEY2")||m==Ye("COL_4_KEY2")}function d(m){switch(m){case Ye("COL_1_KEY"):return 0;case Ye("COL_2_KEY"):return 1;case Ye("COL_3_KEY"):return 2;case Ye("COL_4_KEY"):return 3;case Ye("COL_1_KEY2"):return 0;case Ye("COL_2_KEY2"):return 1;case Ye("COL_3_KEY2"):return 2;case Ye("COL_4_KEY2"):return 3;default:return NaN}}function h(m){switch(m){case Ye("COL_1_KEY"):return 0;case Ye("COL_2_KEY"):return 1;case Ye("COL_3_KEY"):return 2;case Ye("COL_4_KEY"):return 3;case Ye("COL_1_KEY2"):return 4;case Ye("COL_2_KEY2"):return 5;case Ye("COL_3_KEY2"):return 6;case Ye("COL_4_KEY2"):return 7;default:return NaN}}let p=setTimeout(function(){o.key[4]="00"},50);Y.exports.useEffect(()=>{const m=[!1,!1,!1,!1,!1,!1,!1,!1],v=y=>{e.game.audio.playing()&&(y.movementX>0&&(o.key[4]="01"),y.movementX<0&&(o.key[4]="10"),Math.abs(y.movementX)>0&&(clearTimeout(p),p=setTimeout(function(){o.key[4]="00"},50)))},_=y=>{e.game.audio.playing()&&(m[h(y.key)]=!1,a(y.key)&&(h(y.key)>=4&&h(y.key)<=7?m[h(y.key)-4]:m[h(y.key)+4])==!1&&(o.key[d(y.key)]="00"),(y.key==Ye("CURSOR_LEFT_KEY")||y.key==Ye("CURSOR_LEFT_KEY2"))&&(o.key[4]="0"+o.key[4][1]),(y.key==Ye("CURSOR_RIGHT_KEY")||y.key==Ye("CURSOR_RIGHT_KEY2"))&&(o.key[4]=o.key[4][0]+"0"))},E=y=>{e.game.audio.playing()&&(m[h(y.key)]=!0,y.repeat?o.key[d(y.key)]="01":(o.key[d(y.key)]="11",(y.key==Ye("CURSOR_LEFT_KEY")||y.key==Ye("CURSOR_LEFT_KEY2"))&&(o.key[4]="1"+o.key[4][1]),(y.key==Ye("CURSOR_RIGHT_KEY")||y.key==Ye("CURSOR_RIGHT_KEY2"))&&(o.key[4]=o.key[4][0]+"1")))},x=y=>{switch(y.key){case"p":o.retry();break;case"o":o.audio.pause();break}};return document.addEventListener("keyup",_),document.addEventListener("mousemove",v),document.addEventListener("keydown",E),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("keyup",_),document.removeEventListener("keydown",E),document.removeEventListener("keydown",x)}},[]);const c=new Kt,f=new Kt;return V(Re,{children:[A(ue.exports.Stage,{width:fe,height:me,children:V(ue.exports.Container,{filters:[],children:[A(CM,{imgpath:t.bgPath}),A(wM,{beatmap:t,game:o,overlay:f,user:e.user},Date.now()),A(EM,{game:e.game}),A(mM,{game:e.game}),A(TM,{game:e.game}),A(SM,{game:o,time:e.menutime,beatmap:t,container:f,pcontainer:c}),A(kT,{game:e.game})]})}),A("div",{id:"log"})]})}function kM(){return Math.max(document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function PM(){return Math.max(document.documentElement.clientHeight)}var Kn={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var f=this||r;if(c=parseFloat(c),f.ctx||p(),typeof c<"u"&&c>=0&&c<=1){if(f._volume=c,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var v=f._howls[m]._getSoundIds(),_=0;_<v.length;_++){var E=f._howls[m]._soundById(v[_]);E&&E._node&&(E._node.volume=E._volume*c)}return f}return f._volume},mute:function(c){var f=this||r;f.ctx||p(),f._muted=c,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(c?0:f._volume,r.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var v=f._howls[m]._getSoundIds(),_=0;_<v.length;_++){var E=f._howls[m]._soundById(v[_]);E&&E._node&&(E._node.muted=c?!0:E._muted)}return f},stop:function(){for(var c=this||r,f=0;f<c._howls.length;f++)c._howls[f].stop();return c},unload:function(){for(var c=this||r,f=c._howls.length-1;f>=0;f--)c._howls[f].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,p()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var f=new Audio;f.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return c}if(!f||typeof f.canPlayType!="function")return c;var m=f.canPlayType("audio/mpeg;").replace(/^no$/,""),v=c._navigator?c._navigator.userAgent:"",_=v.match(/OPR\/(\d+)/g),E=_&&parseInt(_[0].split("/")[1],10)<33,x=v.indexOf("Safari")!==-1&&v.indexOf("Chrome")===-1,y=v.match(/Version\/(.*?) /),w=x&&y&&parseInt(y[1],10)<15;return c._codecs={mp3:!!(!E&&(m||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!m,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var f=function(m){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var v=new Audio;v._unlocked=!0,c._releaseHtml5Audio(v)}catch{c.noAudio=!0;break}for(var _=0;_<c._howls.length;_++)if(!c._howls[_]._webAudio)for(var E=c._howls[_]._getSoundIds(),x=0;x<E.length;x++){var y=c._howls[_]._soundById(E[x]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}c._autoResume();var w=c.ctx.createBufferSource();w.buffer=c._scratchBuffer,w.connect(c.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),w.onended=function(){w.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var T=0;T<c._howls.length;T++)c._howls[T]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var f=this||r;return c._unlocked&&f._html5AudioPool.push(c),f},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var f=0;f<c._howls.length;f++)if(c._howls[f]._webAudio){for(var m=0;m<c._howls[f]._sounds.length;m++)if(!c._howls[f]._sounds[m]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(!!c.autoSuspend){c._suspendTimer=null,c.state="suspending";var v=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(v,v)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var f=0;f<c._howls.length;f++)c._howls[f]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,n=function(c){var f=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(c)};n.prototype={init:function(c){var f=this;return r.ctx||p(),f._autoplay=c.autoplay||!1,f._format=typeof c.format!="string"?c.format:[c.format],f._html5=c.html5||!1,f._muted=c.mute||!1,f._loop=c.loop||!1,f._pool=c.pool||5,f._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,f._rate=c.rate||1,f._sprite=c.sprite||{},f._src=typeof c.src!="string"?c.src:[c.src],f._volume=c.volume!==void 0?c.volume:1,f._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=c.onend?[{fn:c.onend}]:[],f._onfade=c.onfade?[{fn:c.onfade}]:[],f._onload=c.onload?[{fn:c.onload}]:[],f._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],f._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],f._onpause=c.onpause?[{fn:c.onpause}]:[],f._onplay=c.onplay?[{fn:c.onplay}]:[],f._onstop=c.onstop?[{fn:c.onstop}]:[],f._onmute=c.onmute?[{fn:c.onmute}]:[],f._onvolume=c.onvolume?[{fn:c.onvolume}]:[],f._onrate=c.onrate?[{fn:c.onrate}]:[],f._onseek=c.onseek?[{fn:c.onseek}]:[],f._onunlock=c.onunlock?[{fn:c.onunlock}]:[],f._onresume=[],f._webAudio=r.usingWebAudio&&!f._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var c=this,f=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var m=0;m<c._src.length;m++){var v,_;if(c._format&&c._format[m])v=c._format[m];else{if(_=c._src[m],typeof _!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}v=/^data:audio\/([^;,]+);/i.exec(_),v||(v=/\.([^.]+)$/.exec(_.split("?",1)[0])),v&&(v=v[1].toLowerCase())}if(v||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),v&&r.codecs(v)){f=c._src[m];break}}if(!f){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=f,c._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&o(c),c},play:function(c,f){var m=this,v=null;if(typeof c=="number")v=c,c=null;else{if(typeof c=="string"&&m._state==="loaded"&&!m._sprite[c])return null;if(typeof c>"u"&&(c="__default",!m._playLock)){for(var _=0,E=0;E<m._sounds.length;E++)m._sounds[E]._paused&&!m._sounds[E]._ended&&(_++,v=m._sounds[E]._id);_===1?c=null:v=null}}var x=v?m._soundById(v):m._inactiveSound();if(!x)return null;if(v&&!c&&(c=x._sprite||"__default"),m._state!=="loaded"){x._sprite=c,x._ended=!1;var y=x._id;return m._queue.push({event:"play",action:function(){m.play(y)}}),y}if(v&&!x._paused)return f||m._loadQueue("play"),x._id;m._webAudio&&r._autoResume();var w=Math.max(0,x._seek>0?x._seek:m._sprite[c][0]/1e3),T=Math.max(0,(m._sprite[c][0]+m._sprite[c][1])/1e3-w),P=T*1e3/Math.abs(x._rate),R=m._sprite[c][0]/1e3,M=(m._sprite[c][0]+m._sprite[c][1])/1e3;x._sprite=c,x._ended=!1;var I=function(){x._paused=!1,x._seek=w,x._start=R,x._stop=M,x._loop=!!(x._loop||m._sprite[c][2])};if(w>=M){m._ended(x);return}var N=x._node;if(m._webAudio){var k=function(){m._playLock=!1,I(),m._refreshBuffer(x);var z=x._muted||m._muted?0:x._volume;N.gain.setValueAtTime(z,r.ctx.currentTime),x._playStart=r.ctx.currentTime,typeof N.bufferSource.start>"u"?x._loop?N.bufferSource.noteGrainOn(0,w,86400):N.bufferSource.noteGrainOn(0,w,T):x._loop?N.bufferSource.start(0,w,86400):N.bufferSource.start(0,w,T),P!==1/0&&(m._endTimers[x._id]=setTimeout(m._ended.bind(m,x),P)),f||setTimeout(function(){m._emit("play",x._id),m._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?k():(m._playLock=!0,m.once("resume",k),m._clearTimer(x._id))}else{var L=function(){N.currentTime=w,N.muted=x._muted||m._muted||r._muted||N.muted,N.volume=x._volume*r.volume(),N.playbackRate=x._rate;try{var z=N.play();if(z&&typeof Promise<"u"&&(z instanceof Promise||typeof z.then=="function")?(m._playLock=!0,I(),z.then(function(){m._playLock=!1,N._unlocked=!0,f?m._loadQueue():m._emit("play",x._id)}).catch(function(){m._playLock=!1,m._emit("playerror",x._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),x._ended=!0,x._paused=!0})):f||(m._playLock=!1,I(),m._emit("play",x._id)),N.playbackRate=x._rate,N.paused){m._emit("playerror",x._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||x._loop?m._endTimers[x._id]=setTimeout(m._ended.bind(m,x),P):(m._endTimers[x._id]=function(){m._ended(x),N.removeEventListener("ended",m._endTimers[x._id],!1)},N.addEventListener("ended",m._endTimers[x._id],!1))}catch(Q){m._emit("playerror",x._id,Q)}};N.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(N.src=m._src,N.load());var W=window&&window.ejecta||!N.readyState&&r._navigator.isCocoonJS;if(N.readyState>=3||W)L();else{m._playLock=!0,m._state="loading";var O=function(){m._state="loaded",L(),N.removeEventListener(r._canPlayEvent,O,!1)};N.addEventListener(r._canPlayEvent,O,!1),m._clearTimer(x._id)}}return x._id},pause:function(c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(c)}}),f;for(var m=f._getSoundIds(c),v=0;v<m.length;v++){f._clearTimer(m[v]);var _=f._soundById(m[v]);if(_&&!_._paused&&(_._seek=f.seek(m[v]),_._rateSeek=0,_._paused=!0,f._stopFade(m[v]),_._node))if(f._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),f._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||f._emit("pause",_?_._id:null)}return f},stop:function(c,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"stop",action:function(){m.stop(c)}}),m;for(var v=m._getSoundIds(c),_=0;_<v.length;_++){m._clearTimer(v[_]);var E=m._soundById(v[_]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,m._stopFade(v[_]),E._node&&(m._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop>"u"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),m._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&m._clearSound(E._node))),f||m._emit("stop",E._id))}return m},mute:function(c,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"mute",action:function(){m.mute(c,f)}}),m;if(typeof f>"u")if(typeof c=="boolean")m._muted=c;else return m._muted;for(var v=m._getSoundIds(f),_=0;_<v.length;_++){var E=m._soundById(v[_]);E&&(E._muted=c,E._interval&&m._stopFade(E._id),m._webAudio&&E._node?E._node.gain.setValueAtTime(c?0:E._volume,r.ctx.currentTime):E._node&&(E._node.muted=r._muted?!0:c),m._emit("mute",E._id))}return m},volume:function(){var c=this,f=arguments,m,v;if(f.length===0)return c._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var _=c._getSoundIds(),E=_.indexOf(f[0]);E>=0?v=parseInt(f[0],10):m=parseFloat(f[0])}else f.length>=2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));var x;if(typeof m<"u"&&m>=0&&m<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,f)}}),c;typeof v>"u"&&(c._volume=m),v=c._getSoundIds(v);for(var y=0;y<v.length;y++)x=c._soundById(v[y]),x&&(x._volume=m,f[2]||c._stopFade(v[y]),c._webAudio&&x._node&&!x._muted?x._node.gain.setValueAtTime(m,r.ctx.currentTime):x._node&&!x._muted&&(x._node.volume=m*r.volume()),c._emit("volume",x._id))}else return x=v?c._soundById(v):c._sounds[0],x?x._volume:0;return c},fade:function(c,f,m,v){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(c,f,m,v)}}),_;c=Math.min(Math.max(0,parseFloat(c)),1),f=Math.min(Math.max(0,parseFloat(f)),1),m=parseFloat(m),_.volume(c,v);for(var E=_._getSoundIds(v),x=0;x<E.length;x++){var y=_._soundById(E[x]);if(y){if(v||_._stopFade(E[x]),_._webAudio&&!y._muted){var w=r.ctx.currentTime,T=w+m/1e3;y._volume=c,y._node.gain.setValueAtTime(c,w),y._node.gain.linearRampToValueAtTime(f,T)}_._startFadeInterval(y,c,f,m,E[x],typeof v>"u")}}return _},_startFadeInterval:function(c,f,m,v,_,E){var x=this,y=f,w=m-f,T=Math.abs(w/.01),P=Math.max(4,T>0?v/T:v),R=Date.now();c._fadeTo=m,c._interval=setInterval(function(){var M=(Date.now()-R)/v;R=Date.now(),y+=w*M,y=Math.round(y*100)/100,w<0?y=Math.max(m,y):y=Math.min(m,y),x._webAudio?c._volume=y:x.volume(y,c._id,!0),E&&(x._volume=y),(m<f&&y<=m||m>f&&y>=m)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,x.volume(m,c._id),x._emit("fade",c._id))},P)},_stopFade:function(c){var f=this,m=f._soundById(c);return m&&m._interval&&(f._webAudio&&m._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(m._interval),m._interval=null,f.volume(m._fadeTo,c),m._fadeTo=null,f._emit("fade",c)),f},loop:function(){var c=this,f=arguments,m,v,_;if(f.length===0)return c._loop;if(f.length===1)if(typeof f[0]=="boolean")m=f[0],c._loop=m;else return _=c._soundById(parseInt(f[0],10)),_?_._loop:!1;else f.length===2&&(m=f[0],v=parseInt(f[1],10));for(var E=c._getSoundIds(v),x=0;x<E.length;x++)_=c._soundById(E[x]),_&&(_._loop=m,c._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=m,m&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,c.playing(E[x])&&(c.pause(E[x],!0),c.play(E[x],!0)))));return c},rate:function(){var c=this,f=arguments,m,v;if(f.length===0)v=c._sounds[0]._id;else if(f.length===1){var _=c._getSoundIds(),E=_.indexOf(f[0]);E>=0?v=parseInt(f[0],10):m=parseFloat(f[0])}else f.length===2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));var x;if(typeof m=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,f)}}),c;typeof v>"u"&&(c._rate=m),v=c._getSoundIds(v);for(var y=0;y<v.length;y++)if(x=c._soundById(v[y]),x){c.playing(v[y])&&(x._rateSeek=c.seek(v[y]),x._playStart=c._webAudio?r.ctx.currentTime:x._playStart),x._rate=m,c._webAudio&&x._node&&x._node.bufferSource?x._node.bufferSource.playbackRate.setValueAtTime(m,r.ctx.currentTime):x._node&&(x._node.playbackRate=m);var w=c.seek(v[y]),T=(c._sprite[x._sprite][0]+c._sprite[x._sprite][1])/1e3-w,P=T*1e3/Math.abs(x._rate);(c._endTimers[v[y]]||!x._paused)&&(c._clearTimer(v[y]),c._endTimers[v[y]]=setTimeout(c._ended.bind(c,x),P)),c._emit("rate",x._id)}}else return x=c._soundById(v),x?x._rate:c._rate;return c},seek:function(){var c=this,f=arguments,m,v;if(f.length===0)c._sounds.length&&(v=c._sounds[0]._id);else if(f.length===1){var _=c._getSoundIds(),E=_.indexOf(f[0]);E>=0?v=parseInt(f[0],10):c._sounds.length&&(v=c._sounds[0]._id,m=parseFloat(f[0]))}else f.length===2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));if(typeof v>"u")return 0;if(typeof m=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,f)}}),c;var x=c._soundById(v);if(x)if(typeof m=="number"&&m>=0){var y=c.playing(v);y&&c.pause(v,!0),x._seek=m,x._ended=!1,c._clearTimer(v),!c._webAudio&&x._node&&!isNaN(x._node.duration)&&(x._node.currentTime=m);var w=function(){y&&c.play(v,!0),c._emit("seek",v)};if(y&&!c._webAudio){var T=function(){c._playLock?setTimeout(T,0):w()};setTimeout(T,0)}else w()}else if(c._webAudio){var P=c.playing(v)?r.ctx.currentTime-x._playStart:0,R=x._rateSeek?x._rateSeek-x._seek:0;return x._seek+(R+P*Math.abs(x._rate))}else return x._node.currentTime;return c},playing:function(c){var f=this;if(typeof c=="number"){var m=f._soundById(c);return m?!m._paused:!1}for(var v=0;v<f._sounds.length;v++)if(!f._sounds[v]._paused)return!0;return!1},duration:function(c){var f=this,m=f._duration,v=f._soundById(c);return v&&(m=f._sprite[v._sprite][1]/1e3),m},state:function(){return this._state},unload:function(){for(var c=this,f=c._sounds,m=0;m<f.length;m++)f[m]._paused||c.stop(f[m]._id),c._webAudio||(c._clearSound(f[m]._node),f[m]._node.removeEventListener("error",f[m]._errorFn,!1),f[m]._node.removeEventListener(r._canPlayEvent,f[m]._loadFn,!1),f[m]._node.removeEventListener("ended",f[m]._endFn,!1),r._releaseHtml5Audio(f[m]._node)),delete f[m]._node,c._clearTimer(f[m]._id);var v=r._howls.indexOf(c);v>=0&&r._howls.splice(v,1);var _=!0;for(m=0;m<r._howls.length;m++)if(r._howls[m]._src===c._src||c._src.indexOf(r._howls[m]._src)>=0){_=!1;break}return s&&_&&delete s[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,f,m,v){var _=this,E=_["_on"+c];return typeof f=="function"&&E.push(v?{id:m,fn:f,once:v}:{id:m,fn:f}),_},off:function(c,f,m){var v=this,_=v["_on"+c],E=0;if(typeof f=="number"&&(m=f,f=null),f||m)for(E=0;E<_.length;E++){var x=m===_[E].id;if(f===_[E].fn&&x||!f&&x){_.splice(E,1);break}}else if(c)v["_on"+c]=[];else{var y=Object.keys(v);for(E=0;E<y.length;E++)y[E].indexOf("_on")===0&&Array.isArray(v[y[E]])&&(v[y[E]]=[])}return v},once:function(c,f,m){var v=this;return v.on(c,f,m,1),v},_emit:function(c,f,m){for(var v=this,_=v["_on"+c],E=_.length-1;E>=0;E--)(!_[E].id||_[E].id===f||c==="load")&&(setTimeout(function(x){x.call(this,f,m)}.bind(v,_[E].fn),0),_[E].once&&v.off(c,_[E].fn,_[E].id));return v._loadQueue(c),v},_loadQueue:function(c){var f=this;if(f._queue.length>0){var m=f._queue[0];m.event===c&&(f._queue.shift(),f._loadQueue()),c||m.action()}return f},_ended:function(c){var f=this,m=c._sprite;if(!f._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(f._ended.bind(f,c),100),f;var v=!!(c._loop||f._sprite[m][2]);if(f._emit("end",c._id),!f._webAudio&&v&&f.stop(c._id,!0).play(c._id),f._webAudio&&v){f._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var _=(c._stop-c._start)*1e3/Math.abs(c._rate);f._endTimers[c._id]=setTimeout(f._ended.bind(f,c),_)}return f._webAudio&&!v&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,f._clearTimer(c._id),f._cleanBuffer(c._node),r._autoSuspend()),!f._webAudio&&!v&&f.stop(c._id,!0),f},_clearTimer:function(c){var f=this;if(f._endTimers[c]){if(typeof f._endTimers[c]!="function")clearTimeout(f._endTimers[c]);else{var m=f._soundById(c);m&&m._node&&m._node.removeEventListener("ended",f._endTimers[c],!1)}delete f._endTimers[c]}return f},_soundById:function(c){for(var f=this,m=0;m<f._sounds.length;m++)if(c===f._sounds[m]._id)return f._sounds[m];return null},_inactiveSound:function(){var c=this;c._drain();for(var f=0;f<c._sounds.length;f++)if(c._sounds[f]._ended)return c._sounds[f].reset();return new i(c)},_drain:function(){var c=this,f=c._pool,m=0,v=0;if(!(c._sounds.length<f)){for(v=0;v<c._sounds.length;v++)c._sounds[v]._ended&&m++;for(v=c._sounds.length-1;v>=0;v--){if(m<=f)return;c._sounds[v]._ended&&(c._webAudio&&c._sounds[v]._node&&c._sounds[v]._node.disconnect(0),c._sounds.splice(v,1),m--)}}},_getSoundIds:function(c){var f=this;if(typeof c>"u"){for(var m=[],v=0;v<f._sounds.length;v++)m.push(f._sounds[v]._id);return m}else return[c]},_refreshBuffer:function(c){var f=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=s[f._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),f},_cleanBuffer:function(c){var f=this,m=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return f;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),m))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,f},_clearSound:function(c){var f=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);f||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,f=c._parent;return c._muted=f._muted,c._loop=f._loop,c._volume=f._volume,c._rate=f._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,f._sounds.push(c),c.create(),c},create:function(){var c=this,f=c._parent,m=r._muted||c._muted||c._parent._muted?0:c._volume;return f._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(m,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=f._src,c._node.preload=f._preload===!0?"auto":f._preload,c._node.volume=m*r.volume(),c._node.load()),c},reset:function(){var c=this,f=c._parent;return c._muted=f._muted,c._loop=f._loop,c._volume=f._volume,c._rate=f._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,f=c._parent;f._duration=Math.ceil(c._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,f=c._parent;f._duration===1/0&&(f._duration=Math.ceil(c._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},o=function(c){var f=c._src;if(s[f]){c._duration=s[f].duration,h(c);return}if(/^data:[^;]+;base64,/.test(f)){for(var m=atob(f.split(",")[1]),v=new Uint8Array(m.length),_=0;_<m.length;++_)v[_]=m.charCodeAt(_);d(v.buffer,c)}else{var E=new XMLHttpRequest;E.open(c._xhr.method,f,!0),E.withCredentials=c._xhr.withCredentials,E.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(x){E.setRequestHeader(x,c._xhr.headers[x])}),E.onload=function(){var x=(E.status+"")[0];if(x!=="0"&&x!=="2"&&x!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}d(E.response,c)},E.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[f],c.load())},a(E)}},a=function(c){try{c.send()}catch{c.onerror()}},d=function(c,f){var m=function(){f._emit("loaderror",null,"Decoding audio data failed.")},v=function(_){_&&f._sounds.length>0?(s[f._src]=_,h(f,_)):m()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(v).catch(m):r.ctx.decodeAudioData(c,v,m)},h=function(c,f){f&&!c._duration&&(c._duration=f.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},p=function(){if(!!r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),f=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=f?parseInt(f[1],10):null;if(c&&m&&m<9){var v=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!v&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};e.Howler=r,e.Howl=n,typeof Ie<"u"?(Ie.HowlerGlobal=t,Ie.Howler=r,Ie.Howl=n,Ie.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof r=="number")s._pos=[r,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,n,i,s,o,a){var d=this;if(!d.ctx||!d.ctx.listener)return d;var h=d._orientation;if(n=typeof n!="number"?h[1]:n,i=typeof i!="number"?h[2]:i,s=typeof s!="number"?h[3]:s,o=typeof o!="number"?h[4]:o,a=typeof a!="number"?h[5]:a,typeof r=="number")d._orientation=[r,n,i,s,o,a],typeof d.ctx.listener.forwardX<"u"?(d.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),d.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),d.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),d.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),d.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),d.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):d.ctx.listener.setOrientation(r,n,i,s,o,a);else return h;return d},Howl.prototype.init=function(r){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(r,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")i._stereo=r,i._pos=[r,0,0];else return i._stereo;for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var d=i._soundById(o[a]);if(d)if(typeof r=="number")d._stereo=r,d._pos=[r,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",(!d._panner||!d._panner.pan)&&t(d,s),s==="spatial"?typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):d._panner.setPosition(r,0,0):d._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),i._emit("stereo",d._id);else return d._stereo}return i},Howl.prototype.pos=function(r,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof r=="number")o._pos=[r,n,i];else return o._pos;for(var a=o._getSoundIds(s),d=0;d<a.length;d++){var h=o._soundById(a[d]);if(h)if(typeof r=="number")h._pos=[r,n,i],h._node&&((!h._panner||h._panner.pan)&&t(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setPosition(r,n,i)),o._emit("pos",h._id);else return h._pos}return o},Howl.prototype.orientation=function(r,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof r=="number")o._orientation=[r,n,i];else return o._orientation;for(var a=o._getSoundIds(s),d=0;d<a.length;d++){var h=o._soundById(a[d]);if(h)if(typeof r=="number")h._orientation=[r,n,i],h._node&&(h._panner||(h._pos||(h._pos=o._pos||[0,0,-.5]),t(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):h._panner.setOrientation(r,n,i)),o._emit("orientation",h._id);else return h._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,i,s,o;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),r._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(n[0],10)),o?o._pannerAttr:r._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var a=r._getSoundIds(s),d=0;d<a.length;d++)if(o=r._soundById(a[d]),o){var h=o._pannerAttr;h={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:h.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:h.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:h.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:h.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:h.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:h.panningModel};var p=o._panner;p||(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"),p=o._panner),p.coneInnerAngle=h.coneInnerAngle,p.coneOuterAngle=h.coneOuterAngle,p.coneOuterGain=h.coneOuterGain,p.distanceModel=h.distanceModel,p.maxDistance=h.maxDistance,p.refDistance=h.refDistance,p.rolloffFactor=h.rolloffFactor,p.panningModel=h.panningModel}return r},Sound.prototype.init=function(r){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,r.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var t=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(Kn);var yi={exports:{}};function IM(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var im={exports:{}};const RM={},MM=Object.freeze(Object.defineProperty({__proto__:null,default:RM},Symbol.toStringTag,{value:"Module"})),NM=Dw(MM);var Kb;function je(){return Kb||(Kb=1,function(e,t){(function(r,n){e.exports=n()})(Ie,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Ie<"u"&&Ie.crypto&&(s=Ie.crypto),!s&&typeof IM=="function")try{s=NM}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(w){var T;return y.prototype=w,T=new y,y.prototype=null,T}}(),d={},h=d.lib={},p=h.Base=function(){return{extend:function(y){var w=a(this);return y&&w.mixIn(y),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var w in y)y.hasOwnProperty(w)&&(this[w]=y[w]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=h.WordArray=p.extend({init:function(y,w){y=this.words=y||[],w!=i?this.sigBytes=w:this.sigBytes=y.length*4},toString:function(y){return(y||m).stringify(this)},concat:function(y){var w=this.words,T=y.words,P=this.sigBytes,R=y.sigBytes;if(this.clamp(),P%4)for(var M=0;M<R;M++){var I=T[M>>>2]>>>24-M%4*8&255;w[P+M>>>2]|=I<<24-(P+M)%4*8}else for(var N=0;N<R;N+=4)w[P+N>>>2]=T[N>>>2];return this.sigBytes+=R,this},clamp:function(){var y=this.words,w=this.sigBytes;y[w>>>2]&=4294967295<<32-w%4*8,y.length=n.ceil(w/4)},clone:function(){var y=p.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var w=[],T=0;T<y;T+=4)w.push(o());return new c.init(w,y)}}),f=d.enc={},m=f.Hex={stringify:function(y){for(var w=y.words,T=y.sigBytes,P=[],R=0;R<T;R++){var M=w[R>>>2]>>>24-R%4*8&255;P.push((M>>>4).toString(16)),P.push((M&15).toString(16))}return P.join("")},parse:function(y){for(var w=y.length,T=[],P=0;P<w;P+=2)T[P>>>3]|=parseInt(y.substr(P,2),16)<<24-P%8*4;return new c.init(T,w/2)}},v=f.Latin1={stringify:function(y){for(var w=y.words,T=y.sigBytes,P=[],R=0;R<T;R++){var M=w[R>>>2]>>>24-R%4*8&255;P.push(String.fromCharCode(M))}return P.join("")},parse:function(y){for(var w=y.length,T=[],P=0;P<w;P++)T[P>>>2]|=(y.charCodeAt(P)&255)<<24-P%4*8;return new c.init(T,w)}},_=f.Utf8={stringify:function(y){try{return decodeURIComponent(escape(v.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return v.parse(unescape(encodeURIComponent(y)))}},E=h.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=_.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var w,T=this._data,P=T.words,R=T.sigBytes,M=this.blockSize,I=M*4,N=R/I;y?N=n.ceil(N):N=n.max((N|0)-this._minBufferSize,0);var k=N*M,L=n.min(k*4,R);if(k){for(var W=0;W<k;W+=M)this._doProcessBlock(P,W);w=P.splice(0,k),T.sigBytes-=L}return new c.init(w,L)},clone:function(){var y=p.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});h.Hasher=E.extend({cfg:p.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(y){return function(w,T){return new y.init(T).finalize(w)}},_createHmacHelper:function(y){return function(w,T){return new x.HMAC.init(y,T).finalize(w)}}});var x=d.algo={};return d}(Math);return r})}(im)),im.exports}var sm={exports:{}},Qb;function If(){return Qb||(Qb=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,d=i.x64={};d.Word=o.extend({init:function(h,p){this.high=h,this.low=p}}),d.WordArray=o.extend({init:function(h,p){h=this.words=h||[],p!=n?this.sigBytes=p:this.sigBytes=h.length*8},toX32:function(){for(var h=this.words,p=h.length,c=[],f=0;f<p;f++){var m=h[f];c.push(m.high),c.push(m.low)}return a.create(c,this.sigBytes)},clone:function(){for(var h=o.clone.call(this),p=h.words=this.words.slice(0),c=p.length,f=0;f<c;f++)p[f]=p[f].clone();return h}})}(),r})}(sm)),sm.exports}var om={exports:{}},qb;function BM(){return qb||(qb=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(d){if(d instanceof ArrayBuffer&&(d=new Uint8Array(d)),(d instanceof Int8Array||typeof Uint8ClampedArray<"u"&&d instanceof Uint8ClampedArray||d instanceof Int16Array||d instanceof Uint16Array||d instanceof Int32Array||d instanceof Uint32Array||d instanceof Float32Array||d instanceof Float64Array)&&(d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength)),d instanceof Uint8Array){for(var h=d.byteLength,p=[],c=0;c<h;c++)p[c>>>2]|=d[c]<<24-c%4*8;o.call(this,p,h)}else o.apply(this,arguments)};a.prototype=s}}(),r.lib.WordArray})}(om)),om.exports}var am={exports:{}},Zb;function DM(){return Zb||(Zb=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(d){for(var h=d.words,p=d.sigBytes,c=[],f=0;f<p;f+=2){var m=h[f>>>2]>>>16-f%4*8&65535;c.push(String.fromCharCode(m))}return c.join("")},parse:function(d){for(var h=d.length,p=[],c=0;c<h;c++)p[c>>>1]|=d.charCodeAt(c)<<16-c%2*16;return s.create(p,h*2)}},o.Utf16LE={stringify:function(d){for(var h=d.words,p=d.sigBytes,c=[],f=0;f<p;f+=2){var m=a(h[f>>>2]>>>16-f%4*8&65535);c.push(String.fromCharCode(m))}return c.join("")},parse:function(d){for(var h=d.length,p=[],c=0;c<h;c++)p[c>>>1]|=a(d.charCodeAt(c)<<16-c%2*16);return s.create(p,h*2)}};function a(d){return d<<8&4278255360|d>>>8&16711935}}(),r.enc.Utf16})}(am)),am.exports}var lm={exports:{}},Jb;function qa(){return Jb||(Jb=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(d){var h=d.words,p=d.sigBytes,c=this._map;d.clamp();for(var f=[],m=0;m<p;m+=3)for(var v=h[m>>>2]>>>24-m%4*8&255,_=h[m+1>>>2]>>>24-(m+1)%4*8&255,E=h[m+2>>>2]>>>24-(m+2)%4*8&255,x=v<<16|_<<8|E,y=0;y<4&&m+y*.75<p;y++)f.push(c.charAt(x>>>6*(3-y)&63));var w=c.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(d){var h=d.length,p=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var f=0;f<p.length;f++)c[p.charCodeAt(f)]=f}var m=p.charAt(64);if(m){var v=d.indexOf(m);v!==-1&&(h=v)}return a(d,h,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(d,h,p){for(var c=[],f=0,m=0;m<h;m++)if(m%4){var v=p[d.charCodeAt(m-1)]<<m%4*2,_=p[d.charCodeAt(m)]>>>6-m%4*2,E=v|_;c[f>>>2]|=E<<24-f%4*8,f++}return s.create(c,f)}}(),r.enc.Base64})}(lm)),lm.exports}var um={exports:{}},ew;function LM(){return ew||(ew=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(d,h=!0){var p=d.words,c=d.sigBytes,f=h?this._safe_map:this._map;d.clamp();for(var m=[],v=0;v<c;v+=3)for(var _=p[v>>>2]>>>24-v%4*8&255,E=p[v+1>>>2]>>>24-(v+1)%4*8&255,x=p[v+2>>>2]>>>24-(v+2)%4*8&255,y=_<<16|E<<8|x,w=0;w<4&&v+w*.75<c;w++)m.push(f.charAt(y>>>6*(3-w)&63));var T=f.charAt(64);if(T)for(;m.length%4;)m.push(T);return m.join("")},parse:function(d,h=!0){var p=d.length,c=h?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<c.length;m++)f[c.charCodeAt(m)]=m}var v=c.charAt(64);if(v){var _=d.indexOf(v);_!==-1&&(p=_)}return a(d,p,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(d,h,p){for(var c=[],f=0,m=0;m<h;m++)if(m%4){var v=p[d.charCodeAt(m-1)]<<m%4*2,_=p[d.charCodeAt(m)]>>>6-m%4*2,E=v|_;c[f>>>2]|=E<<24-f%4*8,f++}return s.create(c,f)}}(),r.enc.Base64url})}(um)),um.exports}var cm={exports:{}},tw;function Za(){return tw||(tw=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,d=i.algo,h=[];(function(){for(var _=0;_<64;_++)h[_]=n.abs(n.sin(_+1))*4294967296|0})();var p=d.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,E){for(var x=0;x<16;x++){var y=E+x,w=_[y];_[y]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var T=this._hash.words,P=_[E+0],R=_[E+1],M=_[E+2],I=_[E+3],N=_[E+4],k=_[E+5],L=_[E+6],W=_[E+7],O=_[E+8],z=_[E+9],Q=_[E+10],X=_[E+11],Z=_[E+12],F=_[E+13],D=_[E+14],H=_[E+15],U=T[0],j=T[1],J=T[2],q=T[3];U=c(U,j,J,q,P,7,h[0]),q=c(q,U,j,J,R,12,h[1]),J=c(J,q,U,j,M,17,h[2]),j=c(j,J,q,U,I,22,h[3]),U=c(U,j,J,q,N,7,h[4]),q=c(q,U,j,J,k,12,h[5]),J=c(J,q,U,j,L,17,h[6]),j=c(j,J,q,U,W,22,h[7]),U=c(U,j,J,q,O,7,h[8]),q=c(q,U,j,J,z,12,h[9]),J=c(J,q,U,j,Q,17,h[10]),j=c(j,J,q,U,X,22,h[11]),U=c(U,j,J,q,Z,7,h[12]),q=c(q,U,j,J,F,12,h[13]),J=c(J,q,U,j,D,17,h[14]),j=c(j,J,q,U,H,22,h[15]),U=f(U,j,J,q,R,5,h[16]),q=f(q,U,j,J,L,9,h[17]),J=f(J,q,U,j,X,14,h[18]),j=f(j,J,q,U,P,20,h[19]),U=f(U,j,J,q,k,5,h[20]),q=f(q,U,j,J,Q,9,h[21]),J=f(J,q,U,j,H,14,h[22]),j=f(j,J,q,U,N,20,h[23]),U=f(U,j,J,q,z,5,h[24]),q=f(q,U,j,J,D,9,h[25]),J=f(J,q,U,j,I,14,h[26]),j=f(j,J,q,U,O,20,h[27]),U=f(U,j,J,q,F,5,h[28]),q=f(q,U,j,J,M,9,h[29]),J=f(J,q,U,j,W,14,h[30]),j=f(j,J,q,U,Z,20,h[31]),U=m(U,j,J,q,k,4,h[32]),q=m(q,U,j,J,O,11,h[33]),J=m(J,q,U,j,X,16,h[34]),j=m(j,J,q,U,D,23,h[35]),U=m(U,j,J,q,R,4,h[36]),q=m(q,U,j,J,N,11,h[37]),J=m(J,q,U,j,W,16,h[38]),j=m(j,J,q,U,Q,23,h[39]),U=m(U,j,J,q,F,4,h[40]),q=m(q,U,j,J,P,11,h[41]),J=m(J,q,U,j,I,16,h[42]),j=m(j,J,q,U,L,23,h[43]),U=m(U,j,J,q,z,4,h[44]),q=m(q,U,j,J,Z,11,h[45]),J=m(J,q,U,j,H,16,h[46]),j=m(j,J,q,U,M,23,h[47]),U=v(U,j,J,q,P,6,h[48]),q=v(q,U,j,J,W,10,h[49]),J=v(J,q,U,j,D,15,h[50]),j=v(j,J,q,U,k,21,h[51]),U=v(U,j,J,q,Z,6,h[52]),q=v(q,U,j,J,I,10,h[53]),J=v(J,q,U,j,Q,15,h[54]),j=v(j,J,q,U,R,21,h[55]),U=v(U,j,J,q,O,6,h[56]),q=v(q,U,j,J,H,10,h[57]),J=v(J,q,U,j,L,15,h[58]),j=v(j,J,q,U,F,21,h[59]),U=v(U,j,J,q,N,6,h[60]),q=v(q,U,j,J,X,10,h[61]),J=v(J,q,U,j,M,15,h[62]),j=v(j,J,q,U,z,21,h[63]),T[0]=T[0]+U|0,T[1]=T[1]+j|0,T[2]=T[2]+J|0,T[3]=T[3]+q|0},_doFinalize:function(){var _=this._data,E=_.words,x=this._nDataBytes*8,y=_.sigBytes*8;E[y>>>5]|=128<<24-y%32;var w=n.floor(x/4294967296),T=x;E[(y+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,E[(y+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,_.sigBytes=(E.length+1)*4,this._process();for(var P=this._hash,R=P.words,M=0;M<4;M++){var I=R[M];R[M]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return P},clone:function(){var _=a.clone.call(this);return _._hash=this._hash.clone(),_}});function c(_,E,x,y,w,T,P){var R=_+(E&x|~E&y)+w+P;return(R<<T|R>>>32-T)+E}function f(_,E,x,y,w,T,P){var R=_+(E&y|x&~y)+w+P;return(R<<T|R>>>32-T)+E}function m(_,E,x,y,w,T,P){var R=_+(E^x^y)+w+P;return(R<<T|R>>>32-T)+E}function v(_,E,x,y,w,T,P){var R=_+(x^(E|~y))+w+P;return(R<<T|R>>>32-T)+E}i.MD5=a._createHelper(p),i.HmacMD5=a._createHmacHelper(p)}(Math),r.MD5})}(cm)),cm.exports}var hm={exports:{}},rw;function k1(){return rw||(rw=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,d=[],h=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,c){for(var f=this._hash.words,m=f[0],v=f[1],_=f[2],E=f[3],x=f[4],y=0;y<80;y++){if(y<16)d[y]=p[c+y]|0;else{var w=d[y-3]^d[y-8]^d[y-14]^d[y-16];d[y]=w<<1|w>>>31}var T=(m<<5|m>>>27)+x+d[y];y<20?T+=(v&_|~v&E)+1518500249:y<40?T+=(v^_^E)+1859775393:y<60?T+=(v&_|v&E|_&E)-1894007588:T+=(v^_^E)-899497514,x=E,E=_,_=v<<30|v>>>2,v=m,m=T}f[0]=f[0]+m|0,f[1]=f[1]+v|0,f[2]=f[2]+_|0,f[3]=f[3]+E|0,f[4]=f[4]+x|0},_doFinalize:function(){var p=this._data,c=p.words,f=this._nDataBytes*8,m=p.sigBytes*8;return c[m>>>5]|=128<<24-m%32,c[(m+64>>>9<<4)+14]=Math.floor(f/4294967296),c[(m+64>>>9<<4)+15]=f,p.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});n.SHA1=o._createHelper(h),n.HmacSHA1=o._createHmacHelper(h)}(),r.SHA1})}(hm)),hm.exports}var dm={exports:{}},nw;function PT(){return nw||(nw=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,d=i.algo,h=[],p=[];(function(){function m(x){for(var y=n.sqrt(x),w=2;w<=y;w++)if(!(x%w))return!1;return!0}function v(x){return(x-(x|0))*4294967296|0}for(var _=2,E=0;E<64;)m(_)&&(E<8&&(h[E]=v(n.pow(_,1/2))),p[E]=v(n.pow(_,1/3)),E++),_++})();var c=[],f=d.SHA256=a.extend({_doReset:function(){this._hash=new o.init(h.slice(0))},_doProcessBlock:function(m,v){for(var _=this._hash.words,E=_[0],x=_[1],y=_[2],w=_[3],T=_[4],P=_[5],R=_[6],M=_[7],I=0;I<64;I++){if(I<16)c[I]=m[v+I]|0;else{var N=c[I-15],k=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,L=c[I-2],W=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;c[I]=k+c[I-7]+W+c[I-16]}var O=T&P^~T&R,z=E&x^E&y^x&y,Q=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),X=(T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25),Z=M+X+O+p[I]+c[I],F=Q+z;M=R,R=P,P=T,T=w+Z|0,w=y,y=x,x=E,E=Z+F|0}_[0]=_[0]+E|0,_[1]=_[1]+x|0,_[2]=_[2]+y|0,_[3]=_[3]+w|0,_[4]=_[4]+T|0,_[5]=_[5]+P|0,_[6]=_[6]+R|0,_[7]=_[7]+M|0},_doFinalize:function(){var m=this._data,v=m.words,_=this._nDataBytes*8,E=m.sigBytes*8;return v[E>>>5]|=128<<24-E%32,v[(E+64>>>9<<4)+14]=n.floor(_/4294967296),v[(E+64>>>9<<4)+15]=_,m.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),r.SHA256})}(dm)),dm.exports}var fm={exports:{}},iw;function OM(){return iw||(iw=1,function(e,t){(function(r,n,i){e.exports=n(je(),PT())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,d=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var h=a._doFinalize.call(this);return h.sigBytes-=4,h}});n.SHA224=a._createHelper(d),n.HmacSHA224=a._createHmacHelper(d)}(),r.SHA224})}(fm)),fm.exports}var pm={exports:{}},sw;function IT(){return sw||(sw=1,function(e,t){(function(r,n,i){e.exports=n(je(),If())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,d=o.WordArray,h=n.algo;function p(){return a.create.apply(a,arguments)}var c=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],f=[];(function(){for(var v=0;v<80;v++)f[v]=p()})();var m=h.SHA512=s.extend({_doReset:function(){this._hash=new d.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(v,_){for(var E=this._hash.words,x=E[0],y=E[1],w=E[2],T=E[3],P=E[4],R=E[5],M=E[6],I=E[7],N=x.high,k=x.low,L=y.high,W=y.low,O=w.high,z=w.low,Q=T.high,X=T.low,Z=P.high,F=P.low,D=R.high,H=R.low,U=M.high,j=M.low,J=I.high,q=I.low,_e=N,pe=k,Ae=L,be=W,rt=O,Je=z,Le=Q,Qe=X,Me=Z,nt=F,Qt=D,Br=H,qi=U,Zr=j,el=J,yn=q,Dr=0;Dr<80;Dr++){var wr,Qn,qn=f[Dr];if(Dr<16)Qn=qn.high=v[_+Dr*2]|0,wr=qn.low=v[_+Dr*2+1]|0;else{var Xu=f[Dr-15],Zi=Xu.high,$s=Xu.low,Rf=(Zi>>>1|$s<<31)^(Zi>>>8|$s<<24)^Zi>>>7,Yu=($s>>>1|Zi<<31)^($s>>>8|Zi<<24)^($s>>>7|Zi<<25),Ku=f[Dr-2],Ji=Ku.high,Vs=Ku.low,Mf=(Ji>>>19|Vs<<13)^(Ji<<3|Vs>>>29)^Ji>>>6,Qu=(Vs>>>19|Ji<<13)^(Vs<<3|Ji>>>29)^(Vs>>>6|Ji<<26),qu=f[Dr-7],Nf=qu.high,Zu=qu.low,Ju=f[Dr-16],Bf=Ju.high,ec=Ju.low;wr=Yu+Zu,Qn=Rf+Nf+(wr>>>0<Yu>>>0?1:0),wr=wr+Qu,Qn=Qn+Mf+(wr>>>0<Qu>>>0?1:0),wr=wr+ec,Qn=Qn+Bf+(wr>>>0<ec>>>0?1:0),qn.high=Qn,qn.low=wr}var Df=Me&Qt^~Me&qi,tc=nt&Br^~nt&Zr,Lf=_e&Ae^_e&rt^Ae&rt,rc=pe&be^pe&Je^be&Je,nc=(_e>>>28|pe<<4)^(_e<<30|pe>>>2)^(_e<<25|pe>>>7),ic=(pe>>>28|_e<<4)^(pe<<30|_e>>>2)^(pe<<25|_e>>>7),tl=(Me>>>14|nt<<18)^(Me>>>18|nt<<14)^(Me<<23|nt>>>9),sc=(nt>>>14|Me<<18)^(nt>>>18|Me<<14)^(nt<<23|Me>>>9),rl=c[Dr],Of=rl.high,oc=rl.low,mr=yn+sc,_n=el+tl+(mr>>>0<yn>>>0?1:0),mr=mr+tc,_n=_n+Df+(mr>>>0<tc>>>0?1:0),mr=mr+oc,_n=_n+Of+(mr>>>0<oc>>>0?1:0),mr=mr+wr,_n=_n+Qn+(mr>>>0<wr>>>0?1:0),Oo=ic+rc,Ff=nc+Lf+(Oo>>>0<ic>>>0?1:0);el=qi,yn=Zr,qi=Qt,Zr=Br,Qt=Me,Br=nt,nt=Qe+mr|0,Me=Le+_n+(nt>>>0<Qe>>>0?1:0)|0,Le=rt,Qe=Je,rt=Ae,Je=be,Ae=_e,be=pe,pe=mr+Oo|0,_e=_n+Ff+(pe>>>0<mr>>>0?1:0)|0}k=x.low=k+pe,x.high=N+_e+(k>>>0<pe>>>0?1:0),W=y.low=W+be,y.high=L+Ae+(W>>>0<be>>>0?1:0),z=w.low=z+Je,w.high=O+rt+(z>>>0<Je>>>0?1:0),X=T.low=X+Qe,T.high=Q+Le+(X>>>0<Qe>>>0?1:0),F=P.low=F+nt,P.high=Z+Me+(F>>>0<nt>>>0?1:0),H=R.low=H+Br,R.high=D+Qt+(H>>>0<Br>>>0?1:0),j=M.low=j+Zr,M.high=U+qi+(j>>>0<Zr>>>0?1:0),q=I.low=q+yn,I.high=J+el+(q>>>0<yn>>>0?1:0)},_doFinalize:function(){var v=this._data,_=v.words,E=this._nDataBytes*8,x=v.sigBytes*8;_[x>>>5]|=128<<24-x%32,_[(x+128>>>10<<5)+30]=Math.floor(E/4294967296),_[(x+128>>>10<<5)+31]=E,v.sigBytes=_.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});n.SHA512=s._createHelper(m),n.HmacSHA512=s._createHmacHelper(m)}(),r.SHA512})}(pm)),pm.exports}var mm={exports:{}},ow;function FM(){return ow||(ow=1,function(e,t){(function(r,n,i){e.exports=n(je(),If(),IT())})(Ie,function(r){return function(){var n=r,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,d=a.SHA512,h=a.SHA384=d.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var p=d._doFinalize.call(this);return p.sigBytes-=16,p}});n.SHA384=d._createHelper(h),n.HmacSHA384=d._createHmacHelper(h)}(),r.SHA384})}(mm)),mm.exports}var gm={exports:{}},aw;function UM(){return aw||(aw=1,function(e,t){(function(r,n,i){e.exports=n(je(),If())})(Ie,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,d=i.x64,h=d.Word,p=i.algo,c=[],f=[],m=[];(function(){for(var E=1,x=0,y=0;y<24;y++){c[E+5*x]=(y+1)*(y+2)/2%64;var w=x%5,T=(2*E+3*x)%5;E=w,x=T}for(var E=0;E<5;E++)for(var x=0;x<5;x++)f[E+5*x]=x+(2*E+3*x)%5*5;for(var P=1,R=0;R<24;R++){for(var M=0,I=0,N=0;N<7;N++){if(P&1){var k=(1<<N)-1;k<32?I^=1<<k:M^=1<<k-32}P&128?P=P<<1^113:P<<=1}m[R]=h.create(M,I)}})();var v=[];(function(){for(var E=0;E<25;E++)v[E]=h.create()})();var _=p.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var E=this._state=[],x=0;x<25;x++)E[x]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(E,x){for(var y=this._state,w=this.blockSize/2,T=0;T<w;T++){var P=E[x+2*T],R=E[x+2*T+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360;var M=y[T];M.high^=R,M.low^=P}for(var I=0;I<24;I++){for(var N=0;N<5;N++){for(var k=0,L=0,W=0;W<5;W++){var M=y[N+5*W];k^=M.high,L^=M.low}var O=v[N];O.high=k,O.low=L}for(var N=0;N<5;N++)for(var z=v[(N+4)%5],Q=v[(N+1)%5],X=Q.high,Z=Q.low,k=z.high^(X<<1|Z>>>31),L=z.low^(Z<<1|X>>>31),W=0;W<5;W++){var M=y[N+5*W];M.high^=k,M.low^=L}for(var F=1;F<25;F++){var k,L,M=y[F],D=M.high,H=M.low,U=c[F];U<32?(k=D<<U|H>>>32-U,L=H<<U|D>>>32-U):(k=H<<U-32|D>>>64-U,L=D<<U-32|H>>>64-U);var j=v[f[F]];j.high=k,j.low=L}var J=v[0],q=y[0];J.high=q.high,J.low=q.low;for(var N=0;N<5;N++)for(var W=0;W<5;W++){var F=N+5*W,M=y[F],_e=v[F],pe=v[(N+1)%5+5*W],Ae=v[(N+2)%5+5*W];M.high=_e.high^~pe.high&Ae.high,M.low=_e.low^~pe.low&Ae.low}var M=y[0],be=m[I];M.high^=be.high,M.low^=be.low}},_doFinalize:function(){var E=this._data,x=E.words;this._nDataBytes*8;var y=E.sigBytes*8,w=this.blockSize*32;x[y>>>5]|=1<<24-y%32,x[(n.ceil((y+1)/w)*w>>>5)-1]|=128,E.sigBytes=x.length*4,this._process();for(var T=this._state,P=this.cfg.outputLength/8,R=P/8,M=[],I=0;I<R;I++){var N=T[I],k=N.high,L=N.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,M.push(L),M.push(k)}return new o.init(M,P)},clone:function(){for(var E=a.clone.call(this),x=E._state=this._state.slice(0),y=0;y<25;y++)x[y]=x[y].clone();return E}});i.SHA3=a._createHelper(_),i.HmacSHA3=a._createHmacHelper(_)}(Math),r.SHA3})}(gm)),gm.exports}var vm={exports:{}},lw;function HM(){return lw||(lw=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,d=i.algo,h=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),v=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=d.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(R,M){for(var I=0;I<16;I++){var N=M+I,k=R[N];R[N]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var L=this._hash.words,W=m.words,O=v.words,z=h.words,Q=p.words,X=c.words,Z=f.words,F,D,H,U,j,J,q,_e,pe,Ae;J=F=L[0],q=D=L[1],_e=H=L[2],pe=U=L[3],Ae=j=L[4];for(var be,I=0;I<80;I+=1)be=F+R[M+z[I]]|0,I<16?be+=E(D,H,U)+W[0]:I<32?be+=x(D,H,U)+W[1]:I<48?be+=y(D,H,U)+W[2]:I<64?be+=w(D,H,U)+W[3]:be+=T(D,H,U)+W[4],be=be|0,be=P(be,X[I]),be=be+j|0,F=j,j=U,U=P(H,10),H=D,D=be,be=J+R[M+Q[I]]|0,I<16?be+=T(q,_e,pe)+O[0]:I<32?be+=w(q,_e,pe)+O[1]:I<48?be+=y(q,_e,pe)+O[2]:I<64?be+=x(q,_e,pe)+O[3]:be+=E(q,_e,pe)+O[4],be=be|0,be=P(be,Z[I]),be=be+Ae|0,J=Ae,Ae=pe,pe=P(_e,10),_e=q,q=be;be=L[1]+H+pe|0,L[1]=L[2]+U+Ae|0,L[2]=L[3]+j+J|0,L[3]=L[4]+F+q|0,L[4]=L[0]+D+_e|0,L[0]=be},_doFinalize:function(){var R=this._data,M=R.words,I=this._nDataBytes*8,N=R.sigBytes*8;M[N>>>5]|=128<<24-N%32,M[(N+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,R.sigBytes=(M.length+1)*4,this._process();for(var k=this._hash,L=k.words,W=0;W<5;W++){var O=L[W];L[W]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return k},clone:function(){var R=a.clone.call(this);return R._hash=this._hash.clone(),R}});function E(R,M,I){return R^M^I}function x(R,M,I){return R&M|~R&I}function y(R,M,I){return(R|~M)^I}function w(R,M,I){return R&I|M&~I}function T(R,M,I){return R^(M|~I)}function P(R,M){return R<<M|R>>>32-M}i.RIPEMD160=a._createHelper(_),i.HmacRIPEMD160=a._createHmacHelper(_)}(),r.RIPEMD160})}(vm)),vm.exports}var xm={exports:{}},uw;function P1(){return uw||(uw=1,function(e,t){(function(r,n){e.exports=n(je())})(Ie,function(r){(function(){var n=r,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,d=n.algo;d.HMAC=s.extend({init:function(h,p){h=this._hasher=new h.init,typeof p=="string"&&(p=a.parse(p));var c=h.blockSize,f=c*4;p.sigBytes>f&&(p=h.finalize(p)),p.clamp();for(var m=this._oKey=p.clone(),v=this._iKey=p.clone(),_=m.words,E=v.words,x=0;x<c;x++)_[x]^=1549556828,E[x]^=909522486;m.sigBytes=v.sigBytes=f,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var p=this._hasher,c=p.finalize(h);p.reset();var f=p.finalize(this._oKey.clone().concat(c));return f}})})()})}(xm)),xm.exports}var ym={exports:{}},cw;function zM(){return cw||(cw=1,function(e,t){(function(r,n,i){e.exports=n(je(),k1(),P1())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,d=a.SHA1,h=a.HMAC,p=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:d,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var m=this.cfg,v=h.create(m.hasher,c),_=o.create(),E=o.create([1]),x=_.words,y=E.words,w=m.keySize,T=m.iterations;x.length<w;){var P=v.update(f).finalize(E);v.reset();for(var R=P.words,M=R.length,I=P,N=1;N<T;N++){I=v.finalize(I),v.reset();for(var k=I.words,L=0;L<M;L++)R[L]^=k[L]}_.concat(P),y[0]++}return _.sigBytes=w*4,_}});n.PBKDF2=function(c,f,m){return p.create(m).compute(c,f)}}(),r.PBKDF2})}(ym)),ym.exports}var _m={exports:{}},hw;function Lo(){return hw||(hw=1,function(e,t){(function(r,n,i){e.exports=n(je(),k1(),P1())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,d=a.MD5,h=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:d,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,c){for(var f,m=this.cfg,v=m.hasher.create(),_=o.create(),E=_.words,x=m.keySize,y=m.iterations;E.length<x;){f&&v.update(f),f=v.update(p).finalize(c),v.reset();for(var w=1;w<y;w++)f=v.finalize(f),v.reset();_.concat(f)}return _.sigBytes=x*4,_}});n.EvpKDF=function(p,c,f){return h.create(f).compute(p,c)}}(),r.EvpKDF})}(_m)),_m.exports}var bm={exports:{}},dw;function sr(){return dw||(dw=1,function(e,t){(function(r,n,i){e.exports=n(je(),Lo())})(Ie,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,d=s.BufferedBlockAlgorithm,h=i.enc;h.Utf8;var p=h.Base64,c=i.algo,f=c.EvpKDF,m=s.Cipher=d.extend({cfg:o.extend(),createEncryptor:function(k,L){return this.create(this._ENC_XFORM_MODE,k,L)},createDecryptor:function(k,L){return this.create(this._DEC_XFORM_MODE,k,L)},init:function(k,L,W){this.cfg=this.cfg.extend(W),this._xformMode=k,this._key=L,this.reset()},reset:function(){d.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(L){return typeof L=="string"?N:R}return function(L){return{encrypt:function(W,O,z){return k(O).encrypt(L,W,O,z)},decrypt:function(W,O,z){return k(O).decrypt(L,W,O,z)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var v=i.mode={},_=s.BlockCipherMode=o.extend({createEncryptor:function(k,L){return this.Encryptor.create(k,L)},createDecryptor:function(k,L){return this.Decryptor.create(k,L)},init:function(k,L){this._cipher=k,this._iv=L}}),E=v.CBC=function(){var k=_.extend();k.Encryptor=k.extend({processBlock:function(W,O){var z=this._cipher,Q=z.blockSize;L.call(this,W,O,Q),z.encryptBlock(W,O),this._prevBlock=W.slice(O,O+Q)}}),k.Decryptor=k.extend({processBlock:function(W,O){var z=this._cipher,Q=z.blockSize,X=W.slice(O,O+Q);z.decryptBlock(W,O),L.call(this,W,O,Q),this._prevBlock=X}});function L(W,O,z){var Q,X=this._iv;X?(Q=X,this._iv=n):Q=this._prevBlock;for(var Z=0;Z<z;Z++)W[O+Z]^=Q[Z]}return k}(),x=i.pad={},y=x.Pkcs7={pad:function(k,L){for(var W=L*4,O=W-k.sigBytes%W,z=O<<24|O<<16|O<<8|O,Q=[],X=0;X<O;X+=4)Q.push(z);var Z=a.create(Q,O);k.concat(Z)},unpad:function(k){var L=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=L}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:y}),reset:function(){var k;m.reset.call(this);var L=this.cfg,W=L.iv,O=L.mode;this._xformMode==this._ENC_XFORM_MODE?k=O.createEncryptor:(k=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,W&&W.words):(this._mode=k.call(O,this,W&&W.words),this._mode.__creator=k)},_doProcessBlock:function(k,L){this._mode.processBlock(k,L)},_doFinalize:function(){var k,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),L.unpad(k)),k},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),T=i.format={},P=T.OpenSSL={stringify:function(k){var L,W=k.ciphertext,O=k.salt;return O?L=a.create([1398893684,1701076831]).concat(O).concat(W):L=W,L.toString(p)},parse:function(k){var L,W=p.parse(k),O=W.words;return O[0]==1398893684&&O[1]==1701076831&&(L=a.create(O.slice(2,4)),O.splice(0,4),W.sigBytes-=16),w.create({ciphertext:W,salt:L})}},R=s.SerializableCipher=o.extend({cfg:o.extend({format:P}),encrypt:function(k,L,W,O){O=this.cfg.extend(O);var z=k.createEncryptor(W,O),Q=z.finalize(L),X=z.cfg;return w.create({ciphertext:Q,key:W,iv:X.iv,algorithm:k,mode:X.mode,padding:X.padding,blockSize:k.blockSize,formatter:O.format})},decrypt:function(k,L,W,O){O=this.cfg.extend(O),L=this._parse(L,O.format);var z=k.createDecryptor(W,O).finalize(L.ciphertext);return z},_parse:function(k,L){return typeof k=="string"?L.parse(k,this):k}}),M=i.kdf={},I=M.OpenSSL={execute:function(k,L,W,O){O||(O=a.random(64/8));var z=f.create({keySize:L+W}).compute(k,O),Q=a.create(z.words.slice(L),W*4);return z.sigBytes=L*4,w.create({key:z,iv:Q,salt:O})}},N=s.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:I}),encrypt:function(k,L,W,O){O=this.cfg.extend(O);var z=O.kdf.execute(W,k.keySize,k.ivSize);O.iv=z.iv;var Q=R.encrypt.call(this,k,L,z.key,O);return Q.mixIn(z),Q},decrypt:function(k,L,W,O){O=this.cfg.extend(O),L=this._parse(L,O.format);var z=O.kdf.execute(W,k.keySize,k.ivSize,L.salt);O.iv=z.iv;var Q=R.decrypt.call(this,k,L,z.key,O);return Q}})}()})}(bm)),bm.exports}var wm={exports:{}},fw;function GM(){return fw||(fw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,d=a.blockSize;i.call(this,s,o,d,a),this._prevBlock=s.slice(o,o+d)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,d=a.blockSize,h=s.slice(o,o+d);i.call(this,s,o,d,a),this._prevBlock=h}});function i(s,o,a,d){var h,p=this._iv;p?(h=p.slice(0),this._iv=void 0):h=this._prevBlock,d.encryptBlock(h,0);for(var c=0;c<a;c++)s[o+c]^=h[c]}return n}(),r.mode.CFB})}(wm)),wm.exports}var Sm={exports:{}},pw;function WM(){return pw||(pw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,d=a.blockSize,h=this._iv,p=this._counter;h&&(p=this._counter=h.slice(0),this._iv=void 0);var c=p.slice(0);a.encryptBlock(c,0),p[d-1]=p[d-1]+1|0;for(var f=0;f<d;f++)s[o+f]^=c[f]}});return n.Decryptor=i,n}(),r.mode.CTR})}(Sm)),Sm.exports}var Em={exports:{}},mw;function jM(){return mw||(mw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var d=a>>16&255,h=a>>8&255,p=a&255;d===255?(d=0,h===255?(h=0,p===255?p=0:++p):++h):++d,a=0,a+=d<<16,a+=h<<8,a+=p}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,d){var h=this._cipher,p=h.blockSize,c=this._iv,f=this._counter;c&&(f=this._counter=c.slice(0),this._iv=void 0),s(f);var m=f.slice(0);h.encryptBlock(m,0);for(var v=0;v<p;v++)a[d+v]^=m[v]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(Em)),Em.exports}var Tm={exports:{}},gw;function $M(){return gw||(gw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,d=a.blockSize,h=this._iv,p=this._keystream;h&&(p=this._keystream=h.slice(0),this._iv=void 0),a.encryptBlock(p,0);for(var c=0;c<d;c++)s[o+c]^=p[c]}});return n.Decryptor=i,n}(),r.mode.OFB})}(Tm)),Tm.exports}var Cm={exports:{}},vw;function VM(){return vw||(vw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})}(Cm)),Cm.exports}var Am={exports:{}},xw;function XM(){return xw||(xw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,d=s+a-1;n.clamp(),n.words[d>>>2]|=a<<24-d%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(Am)),Am.exports}var km={exports:{}},yw;function YM(){return yw||(yw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(km)),km.exports}var Pm={exports:{}},_w;function KM(){return _w||(_w=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Pm)),Pm.exports}var Im={exports:{}},bw;function QM(){return bw||(bw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})}(Im)),Im.exports}var Rm={exports:{}},ww;function qM(){return ww||(ww=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Rm)),Rm.exports}var Mm={exports:{}},Sw;function ZM(){return Sw||(Sw=1,function(e,t){(function(r,n,i){e.exports=n(je(),sr())})(Ie,function(r){return function(n){var i=r,s=i.lib,o=s.CipherParams,a=i.enc,d=a.Hex,h=i.format;h.Hex={stringify:function(p){return p.ciphertext.toString(d)},parse:function(p){var c=d.parse(p);return o.create({ciphertext:c})}}}(),r.format.Hex})}(Mm)),Mm.exports}var Nm={exports:{}},Ew;function JM(){return Ew||(Ew=1,function(e,t){(function(r,n,i){e.exports=n(je(),qa(),Za(),Lo(),sr())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],d=[],h=[],p=[],c=[],f=[],m=[],v=[],_=[],E=[];(function(){for(var w=[],T=0;T<256;T++)T<128?w[T]=T<<1:w[T]=T<<1^283;for(var P=0,R=0,T=0;T<256;T++){var M=R^R<<1^R<<2^R<<3^R<<4;M=M>>>8^M&255^99,a[P]=M,d[M]=P;var I=w[P],N=w[I],k=w[N],L=w[M]*257^M*16843008;h[P]=L<<24|L>>>8,p[P]=L<<16|L>>>16,c[P]=L<<8|L>>>24,f[P]=L;var L=k*16843009^N*65537^I*257^P*16843008;m[M]=L<<24|L>>>8,v[M]=L<<16|L>>>16,_[M]=L<<8|L>>>24,E[M]=L,P?(P=I^w[w[w[k^I]]],R^=w[w[R]]):P=R=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,P=T.words,R=T.sigBytes/4,M=this._nRounds=R+6,I=(M+1)*4,N=this._keySchedule=[],k=0;k<I;k++)k<R?N[k]=P[k]:(w=N[k-1],k%R?R>6&&k%R==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=x[k/R|0]<<24),N[k]=N[k-R]^w);for(var L=this._invKeySchedule=[],W=0;W<I;W++){var k=I-W;if(W%4)var w=N[k];else var w=N[k-4];W<4||k<=4?L[W]=w:L[W]=m[a[w>>>24]]^v[a[w>>>16&255]]^_[a[w>>>8&255]]^E[a[w&255]]}}},encryptBlock:function(w,T){this._doCryptBlock(w,T,this._keySchedule,h,p,c,f,a)},decryptBlock:function(w,T){var P=w[T+1];w[T+1]=w[T+3],w[T+3]=P,this._doCryptBlock(w,T,this._invKeySchedule,m,v,_,E,d);var P=w[T+1];w[T+1]=w[T+3],w[T+3]=P},_doCryptBlock:function(w,T,P,R,M,I,N,k){for(var L=this._nRounds,W=w[T]^P[0],O=w[T+1]^P[1],z=w[T+2]^P[2],Q=w[T+3]^P[3],X=4,Z=1;Z<L;Z++){var F=R[W>>>24]^M[O>>>16&255]^I[z>>>8&255]^N[Q&255]^P[X++],D=R[O>>>24]^M[z>>>16&255]^I[Q>>>8&255]^N[W&255]^P[X++],H=R[z>>>24]^M[Q>>>16&255]^I[W>>>8&255]^N[O&255]^P[X++],U=R[Q>>>24]^M[W>>>16&255]^I[O>>>8&255]^N[z&255]^P[X++];W=F,O=D,z=H,Q=U}var F=(k[W>>>24]<<24|k[O>>>16&255]<<16|k[z>>>8&255]<<8|k[Q&255])^P[X++],D=(k[O>>>24]<<24|k[z>>>16&255]<<16|k[Q>>>8&255]<<8|k[W&255])^P[X++],H=(k[z>>>24]<<24|k[Q>>>16&255]<<16|k[W>>>8&255]<<8|k[O&255])^P[X++],U=(k[Q>>>24]<<24|k[W>>>16&255]<<16|k[O>>>8&255]<<8|k[z&255])^P[X++];w[T]=F,w[T+1]=D,w[T+2]=H,w[T+3]=U},keySize:256/32});n.AES=s._createHelper(y)}(),r.AES})}(Nm)),Nm.exports}var Bm={exports:{}},Tw;function eN(){return Tw||(Tw=1,function(e,t){(function(r,n,i){e.exports=n(je(),qa(),Za(),Lo(),sr())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,d=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=o.extend({_doReset:function(){for(var x=this._key,y=x.words,w=[],T=0;T<56;T++){var P=d[T]-1;w[T]=y[P>>>5]>>>31-P%32&1}for(var R=this._subKeys=[],M=0;M<16;M++){for(var I=R[M]=[],N=p[M],T=0;T<24;T++)I[T/6|0]|=w[(h[T]-1+N)%28]<<31-T%6,I[4+(T/6|0)]|=w[28+(h[T+24]-1+N)%28]<<31-T%6;I[0]=I[0]<<1|I[0]>>>31;for(var T=1;T<7;T++)I[T]=I[T]>>>(T-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var k=this._invSubKeys=[],T=0;T<16;T++)k[T]=R[15-T]},encryptBlock:function(x,y){this._doCryptBlock(x,y,this._subKeys)},decryptBlock:function(x,y){this._doCryptBlock(x,y,this._invSubKeys)},_doCryptBlock:function(x,y,w){this._lBlock=x[y],this._rBlock=x[y+1],v.call(this,4,252645135),v.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),v.call(this,1,1431655765);for(var T=0;T<16;T++){for(var P=w[T],R=this._lBlock,M=this._rBlock,I=0,N=0;N<8;N++)I|=c[N][((M^P[N])&f[N])>>>0];this._lBlock=M,this._rBlock=R^I}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,v.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),x[y]=this._lBlock,x[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(x,y){var w=(this._lBlock>>>x^this._rBlock)&y;this._rBlock^=w,this._lBlock^=w<<x}function _(x,y){var w=(this._rBlock>>>x^this._lBlock)&y;this._lBlock^=w,this._rBlock^=w<<x}n.DES=o._createHelper(m);var E=a.TripleDES=o.extend({_doReset:function(){var x=this._key,y=x.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=y.slice(0,2),T=y.length<4?y.slice(0,2):y.slice(2,4),P=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=m.createEncryptor(s.create(w)),this._des2=m.createEncryptor(s.create(T)),this._des3=m.createEncryptor(s.create(P))},encryptBlock:function(x,y){this._des1.encryptBlock(x,y),this._des2.decryptBlock(x,y),this._des3.encryptBlock(x,y)},decryptBlock:function(x,y){this._des3.decryptBlock(x,y),this._des2.encryptBlock(x,y),this._des1.decryptBlock(x,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(E)}(),r.TripleDES})}(Bm)),Bm.exports}var Dm={exports:{}},Cw;function tN(){return Cw||(Cw=1,function(e,t){(function(r,n,i){e.exports=n(je(),qa(),Za(),Lo(),sr())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var p=this._key,c=p.words,f=p.sigBytes,m=this._S=[],v=0;v<256;v++)m[v]=v;for(var v=0,_=0;v<256;v++){var E=v%f,x=c[E>>>2]>>>24-E%4*8&255;_=(_+m[v]+x)%256;var y=m[v];m[v]=m[_],m[_]=y}this._i=this._j=0},_doProcessBlock:function(p,c){p[c]^=d.call(this)},keySize:256/32,ivSize:0});function d(){for(var p=this._S,c=this._i,f=this._j,m=0,v=0;v<4;v++){c=(c+1)%256,f=(f+p[c])%256;var _=p[c];p[c]=p[f],p[f]=_,m|=p[(p[c]+p[f])%256]<<24-v*8}return this._i=c,this._j=f,m}n.RC4=s._createHelper(a);var h=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)d.call(this)}});n.RC4Drop=s._createHelper(h)}(),r.RC4})}(Dm)),Dm.exports}var Lm={exports:{}},Aw;function rN(){return Aw||(Aw=1,function(e,t){(function(r,n,i){e.exports=n(je(),qa(),Za(),Lo(),sr())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],d=[],h=[],p=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,m=this.cfg.iv,v=0;v<4;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;var _=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],E=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)c.call(this);for(var v=0;v<8;v++)E[v]^=_[v+4&7];if(m){var x=m.words,y=x[0],w=x[1],T=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,R=T>>>16|P&4294901760,M=P<<16|T&65535;E[0]^=T,E[1]^=R,E[2]^=P,E[3]^=M,E[4]^=T,E[5]^=R,E[6]^=P,E[7]^=M;for(var v=0;v<4;v++)c.call(this)}},_doProcessBlock:function(f,m){var v=this._X;c.call(this),a[0]=v[0]^v[5]>>>16^v[3]<<16,a[1]=v[2]^v[7]>>>16^v[5]<<16,a[2]=v[4]^v[1]>>>16^v[7]<<16,a[3]=v[6]^v[3]>>>16^v[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,f[m+_]^=a[_]},blockSize:128/32,ivSize:64/32});function c(){for(var f=this._X,m=this._C,v=0;v<8;v++)d[v]=m[v];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<d[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<d[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<d[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<d[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<d[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<d[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<d[6]>>>0?1:0)|0,this._b=m[7]>>>0<d[7]>>>0?1:0;for(var v=0;v<8;v++){var _=f[v]+m[v],E=_&65535,x=_>>>16,y=((E*E>>>17)+E*x>>>15)+x*x,w=((_&4294901760)*_|0)+((_&65535)*_|0);h[v]=y^w}f[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,f[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,f[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,f[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,f[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,f[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,f[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,f[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.Rabbit=s._createHelper(p)}(),r.Rabbit})}(Lm)),Lm.exports}var Om={exports:{}},kw;function nN(){return kw||(kw=1,function(e,t){(function(r,n,i){e.exports=n(je(),qa(),Za(),Lo(),sr())})(Ie,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],d=[],h=[],p=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,m=this.cfg.iv,v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],_=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var E=0;E<4;E++)c.call(this);for(var E=0;E<8;E++)_[E]^=v[E+4&7];if(m){var x=m.words,y=x[0],w=x[1],T=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,R=T>>>16|P&4294901760,M=P<<16|T&65535;_[0]^=T,_[1]^=R,_[2]^=P,_[3]^=M,_[4]^=T,_[5]^=R,_[6]^=P,_[7]^=M;for(var E=0;E<4;E++)c.call(this)}},_doProcessBlock:function(f,m){var v=this._X;c.call(this),a[0]=v[0]^v[5]>>>16^v[3]<<16,a[1]=v[2]^v[7]>>>16^v[5]<<16,a[2]=v[4]^v[1]>>>16^v[7]<<16,a[3]=v[6]^v[3]>>>16^v[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,f[m+_]^=a[_]},blockSize:128/32,ivSize:64/32});function c(){for(var f=this._X,m=this._C,v=0;v<8;v++)d[v]=m[v];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<d[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<d[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<d[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<d[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<d[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<d[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<d[6]>>>0?1:0)|0,this._b=m[7]>>>0<d[7]>>>0?1:0;for(var v=0;v<8;v++){var _=f[v]+m[v],E=_&65535,x=_>>>16,y=((E*E>>>17)+E*x>>>15)+x*x,w=((_&4294901760)*_|0)+((_&65535)*_|0);h[v]=y^w}f[0]=h[0]+(h[7]<<16|h[7]>>>16)+(h[6]<<16|h[6]>>>16)|0,f[1]=h[1]+(h[0]<<8|h[0]>>>24)+h[7]|0,f[2]=h[2]+(h[1]<<16|h[1]>>>16)+(h[0]<<16|h[0]>>>16)|0,f[3]=h[3]+(h[2]<<8|h[2]>>>24)+h[1]|0,f[4]=h[4]+(h[3]<<16|h[3]>>>16)+(h[2]<<16|h[2]>>>16)|0,f[5]=h[5]+(h[4]<<8|h[4]>>>24)+h[3]|0,f[6]=h[6]+(h[5]<<16|h[5]>>>16)+(h[4]<<16|h[4]>>>16)|0,f[7]=h[7]+(h[6]<<8|h[6]>>>24)+h[5]|0}n.RabbitLegacy=s._createHelper(p)}(),r.RabbitLegacy})}(Om)),Om.exports}(function(e,t){(function(r,n,i){e.exports=n(je(),If(),BM(),DM(),qa(),LM(),Za(),k1(),PT(),OM(),IT(),FM(),UM(),HM(),P1(),zM(),Lo(),sr(),GM(),WM(),jM(),$M(),VM(),XM(),YM(),KM(),QM(),qM(),ZM(),JM(),eN(),tN(),rN(),nN())})(Ie,function(r){return r})})(yi);new Audio;function zh(e,t){return yi.exports.SHA256(yi.exports.SHA256(yi.exports.SHA256(e+t**2)))}class Bu{name;pass;pfpurl;boughtpack;unlockedsongs;cpu;ram;progression;readstory;partners;partnersexp;selectedpartner;constructor(){this.name="",this.pass="",this.pfpurl="",this.cpu=10,this.ram=5e4,this.progression=[],this.boughtpack=[],this.unlockedsongs=[],this.readstory=[],this.partners=[],this.partnersexp=["0,5210"],this.selectedpartner=0}save(){this.cpu=this.cpu,this.ram=this.ram,document.cookie="status=saved;",document.cookie=`name=${zh(this.name,parseInt(this.pass))};`;let t="",r="",n="",i="",s="";this.boughtpack.forEach(o=>{t+=o+"/"}),this.unlockedsongs.forEach(o=>{n+=o+"/"}),this.readstory.forEach(o=>{r+=o+"/"}),this.partners.forEach(o=>{i+=o+"/"}),this.partnersexp.forEach(o=>{s+=o+"/"}),document.cookie="data="+yi.exports.AES.encrypt(`pfp:${this.pfpurl},cpu:${zh(this.cpu.toString(),parseInt(this.pass))},ram:${zh(this.ram.toString(),parseInt(this.pass))},prog:${this.progression},bought:${t},unlock:${n},readstory:${r},selectedpartner:${zh(this.selectedpartner.toString(),parseInt(this.pass))},partners:${i},partnersexp:${s}`,this.pass).toString()}}new Kn.Howl({src:["audio/normal-hitnormal.wav"],preload:!0,volume:.1});new Kn.Howl({src:["audio/normal-hitfinish.wav"],preload:!0,volume:.1});const Fm=new Audio;class iN{audiovolume;gauge;audio;audioctx;hitlist;effectvolume;score;hitbonus;maxscore;hitwaitlist;combo;playStartTime;cursor;audiopath;editoractive;mode;isPlaying;key;currenttime;highestcombo;beatmap;maxcombo;notespeed;WIDTH;duration;HEIGHT;chartoffset;inputoffset;mousedown;user;alert;constructor(){this.beatmap=null,this.key=["00","00","00","00","00"],this.audio=Fm,this.audiopath="",this.chartoffset=0,this.inputoffset=0,this.audiovolume=NaN,this.effectvolume=NaN,this.gauge=0,this.highestcombo=0,this.hitwaitlist=[],this.maxcombo=NaN,this.score=0,this.hitbonus=0,this.notespeed=0,this.maxscore=NaN,this.combo=0,this.user=new Bu,this.duration=0,this.playStartTime=-1,this.isPlaying=!1,this.cursor=.5,this.mode="",this.currenttime=0,this.HEIGHT=PM(),this.WIDTH=kM(),this.hitlist=[],this.mousedown="",this.alert=["",0,0],this.editoractive=""}init(t,r,n,i,s,o,a,d,h){return this.audiovolume=t,this.effectvolume=r,this.audiopath=i,this.notespeed=a,this.maxscore=s,this.maxcombo=d,this.beatmap=o,this.user=h,Fm.src=i,this.audio=new Kn.Howl({src:[i],preload:!0,volume:.1}),this}NOTE_TRAVEL_DURATION(){return me/this.notespeed*1e3}NOTE_TRAVEL_FROM_LINE_TO_BOTTOM_DURATION(){return Oe/this.notespeed*1e3}currentTime(){return this.audio.currentTime}async miss(t,r){this.hitlist.find(n=>n.startsWith(t.toString()+r.toString()))==null&&(this.gauge=Math.round(this.gauge*.8),this.combo=0,this.hitlist.push(t.toString()+","+r.toString()+",misslost"),rm(this.currenttime,"miss",0))}async hit(t,r,n,i){this.hitlist.find(s=>s.startsWith(r.toString()+","+n.toString()))==null&&(t!="miss"?(this.gauge+=5,this.gauge>100&&(this.gauge=100),this.score+=this.idtoscore(t),this.combo+=1,this.combo>this.highestcombo&&(this.highestcombo=this.combo),rm(r,t,i)):(this.gauge=Math.round(this.gauge*.9),this.combo=0,rm(r,"bad",i)),n!=5&&(this.key[n-1]="01"),this.hitlist.push(r.toString()+","+n.toString()+","+t))}play(t){this.score=0,this.combo=0,this.hitlist=[],this.mode=t,this.isPlaying=!0,this.mode=="play"?(this.audio.play(),this.playStartTime=Date.now()):this.playStartTime=Date.now()}retry(){this.isPlaying=!0,this.score=0,this.combo=0,this.playStartTime=Date.now(),this.audio.seek(0),this.hitlist=[],this.audio.stop(),this.audio.off(),BT(this.user)}quit(){this.isPlaying=!1,this.score=0,this.combo=0,this.playStartTime=0,this.hitlist=[]}idtoscore(t){switch(t){case"perfect":return 100;case"great":return 80;case"good":return 60;case"ok":return 50;default:return 0}}setAudioPath(t){this.audiopath=t}setVolume(t){Fm.volume=t}setEffectVolume(t){this.effectvolume=t}}const sN="/assets/play.605c0571.wav";function so(e,t){const r=6e4/t;return Math.floor(r/e)}function Pw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function Ft(e,t){return JSON.parse(e)}function oN(e,t){const r=me*(parseFloat(Pw("SCROLL_SPEED_FACTOR"))/3)/1980,n=parseFloat(Pw("OFFSET")),i=JSON.parse(e),{audioPath:s,metadata:o,hitObjects:a,timingPoints:d,cursor:h,speedChanges:p}=i,c=typeof s=="string",f=typeof o.title=="string"&&typeof o.artist=="string"&&typeof o.creator=="string"&&typeof o.difficult=="string",m=Array.isArray(d)&&d.length>0&&d.every(({time:x,bpm:y,meter:w})=>typeof x=="number"&&typeof y=="number"&&typeof w=="number");d.forEach(x=>{x.speed*=r});let v=0;d.forEach((x,y)=>{const w=y==0?v:d[y-1].floorPosition,T=y==0?1:d[y-1].speed,P=y==0?1*0:d[y-1].time;d[y].floorPosition=w+T*(d[y].time-P)});const _=Array.isArray(a)&&a.length>0&&a.every(({type:x,column:y,startTime:w,endTime:T})=>["note","hold"].includes(x)&&typeof y=="number"&&typeof w=="number"&&(T!=null?typeof T=="number":!0));if(!(c&&f&&m&&_))throw new Error("Invalid beatmap");return i.timingPoints.forEach(x=>{x.time=x.time+n}),i.timingPoints=i.timingPoints.sort((x,y)=>x.time-y.time),i.hitObjects.forEach(x=>{if(x.startTime=x.startTime+n,x.endTime&&(x.endTime=x.endTime+n),x.type=="note"){let N=me,k=0,L=d.filter((W,O)=>x.startTime>=W.time).sort((W,O)=>W.time-O.time).reverse();L.forEach((W,O)=>{if(N>0&&L[O+1]!=null){const z=L[O+1].time,Q=W.time;N-Mt(z,Q,i.timingPoints)>=0?(k+=Q-z,N-=Mt(z,Q,i.timingPoints),console.log(N)):(k+=tm(x.startTime-k,L.reverse(),N),N=0)}else N>0&&L[O+1]==null&&(k+=N/W.speed,N=0)}),x.screenStartTime=x.startTime-k,x.screenEndTime=x.startTime}if(x.type=="hold"){const N=i.timingPoints.find(O=>x.startTime>=O.time);x.ticks=[];for(let O=0;O<Math.floor((x.endTime-(x.startTime+so(4,N?.bpm)))/so(4,N?.bpm));O++)x.ticks.push(x.startTime+so(4,N?.bpm)*(O+1));let k=me+Mt(x.startTime,x.endTime,i.timingPoints),L=0,W=d.filter((O,z)=>{if(z+1==d.length)return x.startTime>=O.time||x.endTime>=O.time;const Q=d[z+1].time;return x.startTime>=O.time&&x.startTime<=Q||x.endTime>=O.time&&x.endTime<=Q}).sort((O,z)=>O.time-z.time).reverse();W.forEach((O,z)=>{if(k>0&&W[z+1]!=null){const Q=W[z+1].time,X=O.time;k-Mt(Q,X,i.timingPoints)>=0?(L+=X-Q,k-=Mt(Q,X,i.timingPoints),console.log(k)):(L+=tm(x.startTime-L,W.reverse(),k),k=0)}else k>0&&W[z+1]==null&&(L+=k/O.speed,k=0)}),x.screenStartTime=x.startTime-L,x.screenEndTime=x.endTime}const y=x.screenStartTime,w=x.screenEndTime;x.scrollPosList=[],x.scrollPosList.find(N=>N[0]==y)==null&&x.scrollPosList?.push([y,Mt(y,x.startTime,i.timingPoints)]);let T=d.sort((N,k)=>N.time-k.time).filter((N,k)=>y>=N.time||w>=N.time);if(T.length==0||T[0].time>y){const N=T.length==0?y:T[0].time;x.scrollPosList?.push([N,Mt(N,x.startTime,i.timingPoints)])}T.forEach((N,k)=>{const L=k+1!=T.length&&T[k+1].time<=w?T[k+1].time:w;N.time<y||N.time,x.scrollPosList?.push([L,Mt(L,x.startTime,i.timingPoints)])}),x.scrollPosList.find(N=>N[0]==w)==null&&x.scrollPosList?.push([w,Mt(w,x.startTime,i.timingPoints)]),x.scrollPosList?.forEach((N,k)=>{if(x.scrollPosList[k][1]>me&&x.scrollPosList[k+1]!=null){Nu(i.timingPoints.sort((W,O)=>W.time-O.time),x.scrollPosList[k][0]);const L=Xt(me,[x.scrollPosList[k+1][1],x.scrollPosList[k][1]],[x.scrollPosList[k+1][0],x.scrollPosList[k][0]]);x.scrollPosList[k]=[L,me],x.screenStartTime=L}});let P=0,R=Mt(w,x.startTime,i.timingPoints),M=d.filter((N,k)=>w>=N.time).sort((N,k)=>N.time-k.time).reverse();const I=M[0]!=null?M[0].speed:r;P=Oe/I,x.scrollPosList?.push([w+Oe/I,R-Oe]),x.screenEndTime+=P}),i.cursor=i.cursor.sort((x,y)=>x.startTime-y.startTime),i.cursor.forEach(x=>{x.startTime=x.startTime+=n}),i.timingPoints=i.timingPoints.sort((x,y)=>x.time-y.time),i.cursor.sort((x,y)=>x.startTime-y.startTime).forEach((x,y)=>{const w=i.timingPoints.sort((Q,X)=>Q.time-X.time),T=i.cursor.sort((Q,X)=>Q.startTime-X.startTime)[y+1]!=null?i.cursor.sort((Q,X)=>Q.startTime-X.startTime)[y+1].startTime:i.hitObjects.sort((Q,X)=>{const Z=Q.endTime!=null?Q.endTime:Q.startTime,F=X.endTime!=null?X.endTime:X.startTime;return Z-F}).reverse()[0].screenEndTime+1e3,P=i.timingPoints.find(Q=>x.startTime>=Q.time);x.ticks=[];for(let Q=0;Q<Math.floor((T-(x.startTime+so(4,P?.bpm)))/so(8,P?.bpm));Q++)x.startTime+so(4,P?.bpm)*(Q+1)<=T&&x.ticks.push(x.startTime+so(4,P?.bpm)*(Q+1));x.endTime=T;let R=me+Mt(x.startTime,x.endTime,i.timingPoints)+_s,M=0;M+=tm(x.startTime,i.timingPoints.sort((Q,X)=>Q.time-X.time),R),console.log(x.startTime,M),x.screenStartTime=x.startTime-M,x.screenEndTime=T;const I=x.screenStartTime,N=x.screenEndTime;x.scrollPosList=[],x.scrollPosList.push([I,Mt(I,x.startTime,i.timingPoints)]);let k=w.sort((Q,X)=>Q.time-X.time).filter((Q,X)=>I>=Q.time||N>=Q.time);(k.length==0||k[0].time>I)&&(k.length==0||k[0].time,x.scrollPosList?.push([0,Mt(0,x.startTime,i.timingPoints)])),k.forEach((Q,X)=>{const Z=X+1!=k.length&&k[X+1].time<=N?k[X+1].time:N;Q.time<I||Q.time,x.scrollPosList?.push([Z,Mt(Z,x.startTime,i.timingPoints)])}),x.scrollPosList.find(Q=>Q[0]==N)==null&&x.scrollPosList?.push([N,Mt(N,x.startTime,i.timingPoints)]),x.scrollPosList?.forEach((Q,X)=>{if(x.scrollPosList[X][1]>me&&x.scrollPosList[X+1]!=null){Nu(i.timingPoints.sort((F,D)=>F.time-D.time),x.scrollPosList[X][0]);const Z=Xt(me,[x.scrollPosList[X+1][1],x.scrollPosList[X][1]],[x.scrollPosList[X+1][0],x.scrollPosList[X][0]]);x.scrollPosList[X]=[Z,me],x.screenStartTime=Z}});let L=0,W=Mt(N,x.startTime,i.timingPoints),O=w.filter((Q,X)=>N>=Q.time).sort((Q,X)=>Q.time-X.time).reverse();const z=O[0]!=null?O[0].speed:r;L=Oe/z,x.scrollPosList?.push([N+Oe/z,W-Oe]),x.screenEndTime+=L}),i.hitObjects.sort((x,y)=>{const w=x.endTime!=null?x.endTime:x.startTime,T=y.endTime!=null?y.endTime:y.startTime;return w-T}),i}async function Ct(e,t,r){const i=await(await fetch(`./songs/${r}/${e}/${e}_${t}.json`)).json();return Ft(JSON.stringify(i))}const de={sound:{name:"Sound Collection",chapter:0,description:"Singles",banner:"banners/sound.jpg",price:-1,pack:{euphoria:{customtitle:!1,unlock:"",unlocktype:"none",charts:{Lite:{chart:await Ct("euphoria","EN","sound")},Neon:{chart:await Ct("euphoria","EN","sound")},Enigma:{chart:await Ct("euphoria","EN","sound")}}},euphoriaremix:{customtitle:!1,unlock:"",unlocktype:"none",charts:{Lite:{chart:await Ct("euphoriaremix","EN","sound")},Neon:{chart:await Ct("euphoriaremix","EN","sound")},Enigma:{chart:await Ct("euphoriaremix","EN","sound")}}}}},utopia:{name:"HELLO_World!!",chapter:1,description:"Chapter 1 Song Pack",banner:"banners/utopia.jpg",price:5,pack:{voiceofhope:{customtitle:!1,unlock:"starrydream",unlocktype:"none",charts:{Lite:{chart:await Ct("voiceofhope","LI","utopia")},Neon:{chart:await Ct("voiceofhope","NE","utopia")},Enigma:{chart:await Ct("voiceofhope","EN","utopia")}}},starrydream:{customtitle:!1,unlocktype:"quest",charts:{Lite:{chart:await Ct("starrydream","LI","utopia")},Neon:{chart:await Ct("starrydream","NE","utopia")},Enigma:{chart:await Ct("starrydream","EN","utopia")}}},starrysky:{customtitle:!1,unlocktype:"quest",charts:{Lite:{chart:await Ct("starrysky","LI","utopia")},Neon:{chart:await Ct("starrysky","NE","utopia")},Enigma:{chart:await Ct("starrysky","EN","utopia")}}},sawasdee:{unlocktype:"none",customtitle:!1,unlock:"10 RAM",charts:{Lite:{chart:await Ct("sawasdee","LI","utopia")},Neon:{chart:await Ct("sawasdee","NE","utopia")},Enigma:{chart:await Ct("sawasdee","EN","utopia")}}},preciouspromise:{customtitle:!0,unlocktype:"quest",charts:{Lite:{chart:await Ct("preciouspromise","EN","utopia")},Neon:{chart:await Ct("preciouspromise","NE","utopia")},Enigma:{chart:await Ct("preciouspromise","EN","utopia")}}}}}};var RT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Iw=$r.createContext&&$r.createContext(RT),Ns=globalThis&&globalThis.__assign||function(){return Ns=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ns.apply(this,arguments)},aN=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function MT(e){return e&&e.map(function(t,r){return $r.createElement(t.tag,Ns({key:r},t.attr),MT(t.child))})}function xn(e){return function(t){return A(lN,{...Ns({attr:Ns({},e.attr)},t),children:MT(e.child)})}}function lN(e){var t=function(r){var n=e.attr,i=e.size,s=e.title,o=aN(e,["attr","size","title"]),a=i||r.size||"1em",d;return r.className&&(d=r.className),e.className&&(d=(d?d+" ":"")+e.className),V("svg",{...Ns({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:d,style:Ns(Ns({color:e.color||r.color},r.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[s&&A("title",{children:s}),e.children]})};return Iw!==void 0?A(Iw.Consumer,{children:function(r){return t(r)}}):t(RT)}function uN(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z"}}]})(e)}function cN(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.469 332.802l29.863 29.864L352 256 245.332 149.333l-29.863 29.865 55.469 55.469H64v42.666h205.864l-54.395 55.469zM405.334 64H106.666C83.198 64 64 83.198 64 106.666V192h42.666v-85.333h298.668v298.668H106.666V320H64v85.334C64 428.802 83.198 448 106.666 448h298.668C428.802 448 448 428.802 448 405.334V106.666C448 83.198 428.802 64 405.334 64z"}}]})(e)}class Rw{id;cpurate;ramrate;name;subname;imagesrc;skilltype;skilldescription;constructor(){this.cpurate=0,this.ramrate=0,this.name="",this.imagesrc="",this.subname="",this.id="",this.skilltype=0,this.skilldescription=""}init(t,r,n,i,s,o,a,d){return this.id=t,this.cpurate=r,this.ramrate=n,this.name=i,this.subname=s,this.imagesrc=o,this.skilltype=a,this.skilldescription=d,this}}const ot={data:[new Rw().init("shiro2",1,1,"Shiro","The First","Partners/Shiro.png",1,"NORMAL-PLAY | TYPE:REWARD"),new Rw().init("shiro",1,2,"Shiro","Legacy","Partners/Shiro2.png",1,"NORMAL-PLAY | TYPE:REWARD")]};function hN(e){const[t,r]=Y.exports.useState(e.user.selectedpartner),[n,i]=Y.exports.useState("partner-img partner-img-animation"),[s,o]=Y.exports.useState("partner-display partner-display-animation");e.user;const a=e.user.partnersexp.find((d,h)=>{if(d.startsWith(`${e.user.selectedpartner}`))return!0});return V(Re,{children:[V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Buddy Select!"}),A("div",{className:"optionsmenu-partners-select-list",children:e.user.partners.map((d,h)=>V("div",{className:h==t?"partners-select partners-select-selected":"partners-select",onClick:()=>{i("partner-img"),o("partner-display"),setTimeout(()=>{e.user.selectedpartner=h,document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").src=ot.data[e.user.partners[h]].imagesrc),i("partner-img partner-img-animation"),o("partner-display partner-display-animation"),r(h)},10)},children:[A("img",{src:ot.data[d].imagesrc,className:"partners-select-icon"}),A("span",{className:"partners-select-name",children:ot.data[d].name})]}))})]}),A("img",{className:n,src:ot.data[e.user.partners[t]].imagesrc}),V("div",{className:s,children:[ot.data[e.user.partners[t]].subname!=""?A("span",{className:"partner-display-subname",children:ot.data[e.user.partners[t]].subname}):null,A("span",{className:"partner-display-name",children:ot.data[e.user.partners[t]].name}),A("span",{className:"partner-display-description",children:ot.data[e.user.partners[t]].skilldescription}),A("br",{}),V("span",{className:"partner-display-description2",children:["TEMPORARY DATA : ",V("b",{children:[ot.data[e.user.partners[t]].ramrate,"x"]})]}),V("span",{className:"partner-display-description2",children:["PROCESSING POWER : ",V("b",{children:[ot.data[e.user.partners[t]].cpurate,"x"]})]}),a!=null?V("div",{style:{marginTop:"2svh"},children:[V("span",{className:"partner-display-description",children:["LEVEL : ",A("b",{children:Hh(parseInt(a.split(",")[1]))})]}),A("div",{style:{height:"3svh",width:"15svw",background:"linear-gradient(90deg, var(--utopia) 0%, var(--utopia) "+parseInt(a.split(",")[1])/em(Hh(parseInt(a.split(",")[1]))+1)*100+"%,white "+(parseInt(a.split(",")[1])/em(Hh(parseInt(a.split(",")[1]))+1)*100+10)+"%)",margin:"1svw",marginBottom:"0",filter:"drop-shadow(rgba(240, 60, 207, 0.8) 0 0 0.5svw)"}}),V("span",{className:"partner-display-description2",children:[parseInt(a.split(",")[1])," / ",em(Hh(parseInt(a.split(",")[1]))+1)]})]}):null]})]})}function dN(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm62.63 304L296 374.63 177.37 256 296 137.37 318.63 160l-96 96z"}}]})(e)}new Audio;function ln(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function fN(e){e.user;let[t,r]=Y.exports.useState(ln("COL_1_KEY")),[n,i]=Y.exports.useState(ln("COL_2_KEY")),[s,o]=Y.exports.useState(ln("COL_3_KEY")),[a,d]=Y.exports.useState(ln("COL_4_KEY")),[h,p]=Y.exports.useState(ln("CURSOR_LEFT_KEY")),[c,f]=Y.exports.useState(ln("CURSOR_RIGHT_KEY")),[m,v]=Y.exports.useState(ln("COL_1_KEY2")),[_,E]=Y.exports.useState(ln("COL_2_KEY2")),[x,y]=Y.exports.useState(ln("COL_3_KEY2")),[w,T]=Y.exports.useState(ln("COL_4_KEY2")),[P,R]=Y.exports.useState(ln("CURSOR_LEFT_KEY2")),[M,I]=Y.exports.useState(ln("CURSOR_RIGHT_KEY2"));return A(Re,{children:V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Keybind Control"}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"LC Input"}),A("input",{type:"text",value:h,onChange:N=>{p(N.target.value),document.cookie=`CURSOR_LEFT_KEY=${N.target.value};`}})]}),V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"RC Input"}),A("input",{type:"text",value:c,onChange:N=>{f(N.target.value),document.cookie=`CURSOR_RIGHT_KEY=${N.target.value};`}})]})]}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:t,onChange:N=>{r(N.target.value),document.cookie=`COL_1_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"1st Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:n,onChange:N=>{i(N.target.value),document.cookie=`COL_2_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"2nd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:s,onChange:N=>{o(N.target.value),document.cookie=`COL_3_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"3rd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:a,onChange:N=>{d(N.target.value),document.cookie=`COL_4_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"4th Lane"})]})]}),A("hr",{}),A("h1",{children:"Alternate Keybind Control"}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"LC Input"}),A("input",{type:"text",value:P,onChange:N=>{R(N.target.value),document.cookie=`CURSOR_LEFT_KEY2=${N.target.value};`}})]}),V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"RC Input"}),A("input",{type:"text",value:M,onChange:N=>{I(N.target.value),document.cookie=`CURSOR_RIGHT_KEY2=${N.target.value};`}})]})]}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:m,onChange:N=>{v(N.target.value),document.cookie=`COL_1_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"1st Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:_,onChange:N=>{E(N.target.value),document.cookie=`COL_2_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"2nd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:x,onChange:N=>{y(N.target.value),document.cookie=`COL_3_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"3rd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:w,onChange:N=>{T(N.target.value),document.cookie=`COL_4_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"4th Lane"})]})]}),A("hr",{}),A("div",{className:"optionsmenu-list",children:A("div",{className:"optionsmenu-list-name",children:"Tips"})}),A("div",{className:"optionsmenu-list",children:A("div",{className:"optionsmenu-list-name",children:"It is recommend to use a keybind where all the keys are close together (like the default keybind that I gave you!), every charts is designed to be played with this playstyle!"})})]})})}new Audio;function Um(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function pN(e){e.user;let[t,r]=Y.exports.useState(Um("SCROLL_SPEED_FACTOR")),[n,i]=Y.exports.useState(Um("OFFSET")),[s,o]=Y.exports.useState(Um("INPUTOFFSET"));return A(Re,{children:V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Gameplay Settings"}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Offset"}),A("input",{type:"number",className:"optionsmenu-list-name",value:n,onChange:a=>{i(a.target.value),document.cookie=`OFFSET=${a.target.value};`}})]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Input Offset"}),A("input",{type:"number",className:"optionsmenu-list-name",value:s,onChange:a=>{o(a.target.value),document.cookie=`INPUTOFFSET=${a.target.value};`}})]}),A("div",{className:"optionsmenu-list",children:A("small",{children:" * If you get EARLY judgement, add offset."})}),A("div",{className:"optionsmenu-list",children:A("small",{children:" * If you get LATE judgement, reduce offset."})}),A("hr",{}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Scroll Speed"}),A("input",{type:"number",className:"optionsmenu-list-name",value:t,onChange:a=>{r(a.target.value),document.cookie=`SCROLL_SPEED_FACTOR=${a.target.value};`}})]})]})})}new Audio;function Vu(e){const[t,r]=Y.exports.useState("none"),[n,i]=Y.exports.useState("0"),[s,o]=Y.exports.useState("buddy"),[a,d]=Y.exports.useState(0);Y.exports.useState(e.user.selectedpartner),document.documentElement.style.filter="invert(0)";let h=e.user;const p=()=>{h.save()};s=="buddy"&&n=="1"?document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").style.opacity=0):document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").style.opacity=1);const c=()=>{t=="none"&&(r("auto"),i("1")),t=="auto"&&(r("none"),i("0"))};let f=0;return e.user.progression.sort((m,v)=>parseInt(m.split("-")[1])-parseInt(v.split("-")[1])).map((m,v)=>{v<30&&(f+=de[m.split("-")[0].split(".")[0]].pack[m.split("-")[0].split(".")[1]].charts[m.split("-")[0].split(".")[2]].chart.metadata.difficultcc*(parseFloat(m.split("-")[1])/100))}),f=Math.round(f/30*100)/100,V(Re,{children:[V("div",{className:"navbar",children:[V("div",{className:"usercard",onClick:p,children:[A("img",{src:ot.data[e.user.partners[e.user.selectedpartner]].imagesrc,style:{objectFit:"cover"},className:"usercard-pfp"}),V("div",{className:"usercard-2ndcol",children:[V("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"USER"}),A("div",{className:"usercard-username",children:h.name})]}),V("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"RAM"}),A("div",{className:"usercard-username",children:h.ram})]}),V("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"CPU"}),A("div",{className:"usercard-username",children:h.cpu})]}),A("div",{className:"usercard-gradingcontainer",children:V("div",{className:"usercard-grading",children:[A("div",{className:"usercard-gradingtext",children:"GRADING"}),A("div",{className:"usercard-gradingval",children:f})]})}),A("div",{className:"usercard-usernamecard",children:V("div",{className:"navbar-button",onClick:c,children:[A(uN,{})," Options"]})})]})]}),A("div",{className:"navbarheader",children:e.display})]}),V("div",{className:"optionsmenu",style:{pointerEvents:t,opacity:n,transitionDuration:"0.1s"},children:[s=="buddy"?A(hN,{user:e.user}):s=="gameplay"?A(pN,{user:e.user}):s=="key"?A(fN,{user:e.user}):null,V("div",{className:"navbar-back",onClick:c,children:[A(dN,{})," Back"]}),V("div",{className:"optionsmenu-navbar",children:[A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{o("buddy"),d(Math.round(Math.random()*100))},style:{opacity:s=="buddy"?1:.5,transitionDuration:"0.5s"},children:"Buddy Select!"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{d(Math.round(Math.random()*100)),o("key")},style:{opacity:s=="key"?1:.5,transitionDuration:"0.5s"},children:"Keybind Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{d(Math.round(Math.random()*100)),o("gameplay")},style:{opacity:s=="gameplay"?1:.5,transitionDuration:"0.5s"},children:"Gameplay Setting"})]})]})]})}function Ea(e){return xn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304z"}},{tag:"path",attr:{d:"M232 840h560V536H232v304zm280-226a48.01 48.01 0 0 1 28 87v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 0 1 28-87z"}},{tag:"path",attr:{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 1 0-56 0z"}}]})(e)}const Mw=[{type:"Partner",item:1,probability:100},{type:"CPU",item:5,probability:20},{type:"CPU",item:1,probability:50}];function mN(e){const[t,r]=Y.exports.useState(e.toggle),[n,i]=Y.exports.useState(!1),[s,o]=Y.exports.useState(0),a=Y.exports.useRef(-1),[d,h]=Y.exports.useState(""),p=()=>{let c=0;Mw.forEach(v=>{c+=v.probability});let f=Math.random()*c,m;for(const v of Mw.sort((_,E)=>_.probability-E.probability).reverse())if(f<v.probability){m=v;break}else f-=v.probability;setTimeout(()=>{h(m?.type),o(m?.item),m?.type=="Partner"&&(console.log(e.user.partners.find(v=>v==m?.item)),e.user.partners.find(v=>v==m?.item)!=null?(h("CPU"),o(0)):e.user.partners.push(m?.item),console.log(e.user.partners)),m?.type=="CPU"&&(e.user.cpu+=m?.item),i(!0)},500)};return Y.exports.useEffect(()=>{document.addEventListener("keypress",c=>{c.key=="Enter"&&(i(!1),a.current!=-1&&a.current<=10&&(p(),a.current=a.current+1))})},[]),V(Re,{children:[V("div",{className:"gacha-container",style:{opacity:t?1:0,transitionDuration:"1s",pointerEvents:t?"inherit":"none",animation:t?"fadein 0.2s":"fadeout 0.2s"},children:[A("div",{className:"navbar-button",onClick:()=>{r(!1)},children:" Quit"}),V("div",{children:[A("img",{src:"Gacha/1.jpeg",className:"gacha-event-banner",alt:""}),V("div",{className:"gacha-buys",children:[V("div",{className:"gacha-buybutton",style:{opacity:e.user.ram>=100?1:.5,pointerEvents:e.user.ram>=100&&t?"auto":"none"},onClick:()=>{e.user.ram>=100&&(e.user.ram-=100),p()},children:[V("span",{className:"gacha-buydisplay",children:[A(Ea,{})," Recover Data"]}),A("span",{children:"100 RAM"}),e.user.ram>=100?null:A("small",{children:"Inefficient Balance"})]}),V("div",{className:"gacha-buybutton",onClick:()=>{e.user.ram>=900&&(e.user.ram-=900),a.current=1,p()},style:{opacity:e.user.ram>=900?1:.5,pointerEvents:e.user.ram>=900&&t?"auto":"none"},children:[V("span",{className:"gacha-buydisplay",children:[A(Ea,{})," X-Recover Data"]}),A("span",{children:"900 RAM"}),e.user.ram>=900?null:A("small",{children:"Inefficient Balance"})]})]})]})]}),V("div",{className:`gacha-reward-container ${n?"gacha-reward-animation":""}`,onClick:()=>{i(!1),a.current!=-1&&a.current<=10&&(p(),a.current=a.current+1)},style:{pointerEvents:n?"inherit":"none",backgroundImage:"url(BG/utopia_space.jpg)"},children:[A("div",{className:"gacha-reward-container-eff"}),d=="CPU"?V(Re,{children:[A("h1",{children:"DATA RECOVERED"}),V("div",{className:"gacha-reward-cpu",children:[s," CPU"]})]}):null,d=="Partner"?V(Re,{children:[A("h1",{children:"New Buddy!"}),A("img",{src:ot.data[s].imagesrc,className:"gacha-reward-partner-img"}),V("div",{className:"gacha-reward-partner",children:[ot.data[s].subname!=""?A("span",{className:"partner-display-subname",children:ot.data[s].subname}):null,A("span",{className:"partner-display-name",children:ot.data[s].name}),A("span",{className:"partner-display-description",children:ot.data[s].skilldescription}),A("br",{}),V("span",{className:"partner-display-description2",children:["TEMPORARY DATA : ",V("b",{children:[ot.data[s].ramrate,"x"]})]}),V("span",{className:"partner-display-description2",children:["PROCESSING POWER : ",V("b",{children:[ot.data[s].cpurate,"x"]})]})]})]}):null]})]})}const Ol=new Kn.Howl({src:["/BGM/2.ogg"],preload:!0,volume:.2,loop:!0});function gN(e){const[t,r]=Y.exports.useState(!1),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0);Y.exports.useState("transition-off"),document.getElementById("transition").className="transition-off";const a=e.user,d=()=>{Ol.stop(),BT(a)},h=()=>{Ol.stop(),HN(a)},p=()=>{Ol.stop(),FN(a)};return Y.exports.useEffect(()=>{Ol.seek(0),Ol.play()},[]),V(Re,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/BU/bu.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/gacha.css"}),A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"currentlyplaying currentlyplaying-animation",children:"log() - NEODITRONIX.SYS:VER=UTOPIA"}),A(Vu,{user:a,display:"CHAPTER SELECT"},s),V("div",{className:"display",id:"display",children:[A("img",{src:ot.data[e.user.partners[e.user.selectedpartner]].imagesrc,id:"partner-img-menu",className:"partner-img"}),V("div",{className:"mainmenubuttons",children:[V("div",{className:"mainmenubuttonscol animate__fadeInLeft animate__animated ",children:[A("img",{src:"./mainmenu/PLAY.jpg",onClick:d,className:"mainmenubuttons-play"}),A("img",{src:"./mainmenu/STORE.png",onClick:h,className:"mainmenubuttons-store"}),A("img",{src:"./mainmenu/SETTINGS.png",onClick:()=>{r(!0),i(Math.random())},className:"mainmenubuttons-settings"})]}),A("div",{className:"mainmenubuttonscol animate__fadeIn animate__animated ",children:A("img",{src:"./mainmenu/QUEST.jpg",onClick:p,className:"mainmenubuttons-quest"})})]})]}),A("div",{onClick:()=>{o(Math.random())},children:t?A(mN,{user:e.user,toggle:t},n):null})]})}const vN="/assets/select.3effe8e5.wav",xN="/assets/selectdiff.e898ab90.wav";function yN(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8"}}]})(e)}function _N(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8",transform:"matrix(-1 0 0 1 24 0)"}}]})(e)}function Gh(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3,22.0000002 L21,12 L3,2 L3,22.0000002 Z M5,19 L17.5999998,11.9999999 L5,5 L5,19 Z M7,16 L14.1999999,12 L7,8 L7,16 Z M9,13 L10.8,12 L9,11 L9,13 Z"}}]})(e)}function bN(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15 12 5-4-5-4v2.999H2v2h13zm7 3H9v-3l-5 4 5 4v-3h13z"}}]})(e)}const wN=new Kn.Howl({src:vN,preload:!0,volume:.3});new Kn.Howl({src:xN,preload:!0,volume:.3});wN.volume=.05;let fs=new Kn.Howl({preload:!0,volume:.1,loop:!0});function Wh(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function SN(e){const[t,r]=Y.exports.useState(""),[n,i]=Y.exports.useState(""),[s,o]=Y.exports.useState(""),[a,d]=Y.exports.useState("utopia"),[h,p]=Y.exports.useState(""),[c,f]=Y.exports.useState(""),[m,v]=Y.exports.useState(""),[_,E]=Y.exports.useState("Lite"),[x,y]=Y.exports.useState("hide"),[w,T]=Y.exports.useState(!1),[P,R]=Y.exports.useState("songjacketbgcolor-trigger"),[M,I]=Y.exports.useState("songpreview-songmetadata-trigger"),[N,k]=Y.exports.useState(!0),L=e.user,W=D=>{try{fs.stop()}catch{}d(D.split("/")[0]),y(""),p(D.split("/")[1]);const H=de[D.split("/")[0]].pack[D.split("/")[1]].charts[_].chart;de[D.split("/")[0]].pack[D.split("/")[1]].customtitle&&(H.metadata.title=Wh(`${D.split("/")[0]}.${D.split("/")[1]}`),H.metadata.artist=e.user.name),R(""),I(""),setTimeout(()=>{R("songjacketbgcolor-trigger"),I("songpreview-songmetadata-trigger")},10),setTimeout(()=>{o(JSON.stringify(H)),i(D.split("/")[1])},100),de[D.split("/")[0]].pack[D.split("/")[1]].charts["EX-Enigma"]!=null?T(!0):T(!1);const U=H,j=U.preview,J=6e4/Nu(U.timingPoints,j*1e3).bpm*16*4;fs=new Kn.Howl({src:[U.audioPath],sprite:{preview:[j*1e3,J,!0]},preload:!0,volume:.1}),fs.play("preview"),D!=null&&setTimeout(()=>{f(U.jacketPath)},10)},O=D=>{fs.volume=0;try{fs.stop()}catch{}ON(oN(s,fs.duration),L)},z=D=>{E(D);const H=de[a].pack[h].charts[D].chart;de[a].pack[h].customtitle&&(H.metadata.title=Wh(`${a}.${h}`),H.metadata.artist=e.user.name),console.log(H.metadata.title,H.metadata.artist),o(JSON.stringify(H)),f(de[a].pack[h].charts[D].chart.jacketPath)},Q=()=>{fs.volume=0;try{fs.stop()}catch{}Ja(e.user)},X=D=>{r(D),k(!1)},Z=D=>D<=50?"F":D<=80?"D":D<=90?"C":D<=92?"B":D<=94?"A":D<=96?"S":D<=98?"SS":D<=100?"SSS":"",F=D=>D<=50?"#d65e5e":D<=80?"#e665b0":D<=90?"#dd65e6":D<=92?"#9265e6":D<=94?"#6583e6":D<=96?"#65d7e6":D<=98?"#65e6b7":D<=100?"#dbe665":"";return V(Re,{children:[A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:Q}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A(Vu,{user:L,display:"SONG SELECT"}),V("div",{className:"display animate__animated animate__fadeIn",style:{transitionDuration:"1s"},children:[A("div",{className:"songs "+m,children:A("div",{className:"songpack",children:V("div",{className:"songscontainer",children:[V("div",{className:"changepack",onClick:()=>{k(!0)},children:["Change Chapter",A(bN,{})]}),t!=""?A("div",{className:"current-chapter",children:A("img",{src:de[t].banner,className:"current-chapter-banner"})}):null,t=="sound"?V("div",{className:"songsubmission",children:[A("b",{children:"Sound Collection"}),` will be automatically unlocked for you to play for free. This is a pack where the songs are not related to the main story at all, which means this pack is not "My song only" exclusive. If you'd like to have your songs here, please enter this form!`,A("br",{}),A("br",{}),A("a",{href:"https://forms.gle/Pms7K9VACvteixQ5A",children:"Link to the form"})]}):null,t!=""?Object.keys(de[t].pack).sort((D,H)=>de[t].pack[D].charts[_].chart.metadata.difficultcc-de[t].pack[H].charts[_].chart.metadata.difficultcc).map(D=>{if((de[t].pack[D].unlocktype!="quest"||de[t].pack[D].unlocktype=="quest"&&e.user.unlockedsongs.find(H=>H.startsWith(`${t}.${D}`))!=null)&&de[t].pack[D].charts[_]!=null)return V("div",{className:"song",onClick:()=>W(t+"/"+D),style:{border:n==D&&t==a?"rgb(255, 88, 191) 1px solid":"rgba(255, 88, 191, 0.5) 1px solid",filter:n==D&&t==a?"drop-shadow(rgb(255, 88, 191) 0 0 1svw)":"drop-shadow(0 0 0.5svw rgba(255, 26, 198, 0.5)",opacity:de[t].pack[D].unlocktype=="play"&&de[t].pack[D].unlock!=null&&e.user.progression.find(H=>H.startsWith(a+"."+de[t].pack[D].unlock))==null?.5:1},children:[A("img",{src:de[t].pack[D].charts.Lite.chart.jacketPath,className:"songdiffimg"}),de[t].pack[D].customtitle?Wh(`${t}.${D}`):de[t].pack[D].charts[_].chart.metadata.title,A("br",{}),A("small",{className:"songdiffs",children:de[t].pack[D].customtitle?e.user.name:de[t].pack[D].charts[_].chart.metadata.artist}),A("div",{className:"songdiffdiffdisplay",id:_,children:de[t].pack[D].charts[_].chart.metadata.difficult}),A("div",{className:"songdiff-rank",style:{color:F(parseFloat(e.user.progression.find(H=>H.startsWith(de[t].pack[D].charts[_].chart.id.toString()))?.split("-")[1]))},children:A("span",{children:Z(parseFloat(e.user.progression.find(H=>H.startsWith(de[t].pack[D].charts[_].chart.id.toString()))?.split("-")[1]))})})]},D)}):null]})})}),A("div",{className:"songpreview split right "+M,children:s!=""?V(Re,{children:[" ",V("div",{children:[s!=""?A("img",{src:c,className:"songjacketbg",style:{opacity:e.user.boughtpack.find(D=>D==a)!=null?1:.6}}):null,e.user.boughtpack.find(D=>D==a)==null?A("span",{className:"songjacketbg-locked",children:"Not Purchased"}):null,s!=""?A("div",{className:"songjacketbgcolor "+P}):null]}),V("div",{className:"songpreview-songmetadata",children:[A("h1",{children:de[a].pack[h].customtitle?Wh(`${a}.${h}`):s!=""?Ft(s).metadata.title:null}),A("span",{children:de[a].pack[h].customtitle?e.user.name:s!=""?Ft(s).metadata.artist:null}),V("span",{className:"songpreview-songmetadata-smaller",id:"illustrator",children:[A("p",{children:"Illustrator"}),A("p",{children:Ft(s).metadata.illustrator})]}),e.user.progression.find(D=>D.startsWith(Ft(s).id.toString()))!=null?A(Re,{children:V("span",{className:"songpreview-songmetadata-smaller",id:"highscore",children:[A("p",{children:"Highscore"}),V("p",{children:[e.user.progression.find(D=>D.startsWith(Ft(s).id.toString()))?.split("-")[1],"%"]})]})}):null,A("div",{className:"songpreview-rank",style:{color:F(Ft(s).id)},children:A("span",{children:Z(parseFloat(e.user.progression.find(D=>D.startsWith(Ft(s).id.toString()))?.split("-")[1]))})})]}),A("div",{className:"diffselect",children:A("div",{className:"diffselects",style:{filter:_=="Lite"?"drop-shadow(rgba(170, 204, 255, 1) 0 0 1svw)":_=="Neon"?"drop-shadow(rgba(255, 170, 237, 1) 0 0 1svw)":_=="Enigma"?"drop-shadow(rgba(255, 170, 213, 1) 0 0 1svw)":"drop-shadow(rgba(255, 170, 170, 1) 0 0 1svw)"},children:e.user.boughtpack.find(D=>D==a)!=null?de[a].pack[h].unlocktype=="play"?de[a].pack[h].unlock!=null&&e.user.progression.find(D=>D.startsWith(a+"."+de[a].pack[h].unlock))!=null||de[a].pack[h].unlock==null?V(Re,{children:[A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>z("Lite"),children:s!=""?de[a].pack[h].charts.Lite.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>z("Neon"),children:s!=""?de[a].pack[h].charts.Neon.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>z("Enigma"),children:s!=""?de[a].pack[h].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:O,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):V(Re,{children:[" ",V("div",{className:"songlock",children:[A(Ea,{})," Play ",de[a].pack[de[a].pack[h].unlock].charts.Lite.chart.metadata.title," to unlock."]})," "]}):de[a].pack[h].unlocktype=="quest"?A(Re,{children:e.user.unlockedsongs.find(D=>D.startsWith(`${Ft(s).id.toString().split(".")[0]}.${Ft(s).id.toString().split(".")[1]}`))!=null?V(Re,{children:[A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>z("Lite"),children:s!=""?de[a].pack[h].charts.Lite.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>z("Neon"),children:s!=""?de[a].pack[h].charts.Neon.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>z("Enigma"),children:s!=""?de[a].pack[h].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:O,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):V("div",{className:"songlock",children:[A(Ea,{})," Unlocked in Quest Mode"]})}):de[a].pack[h].unlocktype=="pay"?A(Re,{children:e.user.unlockedsongs.find(D=>D.startsWith(`${Ft(s).id.toString().split(".")[0]}.${Ft(s).id.toString().split(".")[1]}`))!=null?V(Re,{children:[A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>z("Lite"),children:s!=""?de[a].pack[h].charts.Lite.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>z("Neon"),children:s!=""?de[a].pack[h].charts.Neon.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>z("Enigma"),children:s!=""?de[a].pack[h].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:O,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):A("div",{className:"songlock",children:V("div",{className:"buybutton",onClick:()=>{de[a].pack[h].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(de[a].pack[h].unlock?.split(" ")[0])&&(e.user.cpu-=parseInt(de[a].pack[h].unlock?.split(" ")[0]),e.user.unlockedsongs.push(`${Ft(s).id.toString().split(".")[0]}.${Ft(s).id.toString().split(".")[1]}`),W(t+"/"+h)),de[a].pack[h].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(de[a].pack[h].unlock?.split(" ")[0])&&(e.user.ram-=parseInt(de[a].pack[h].unlock?.split(" ")[0]),e.user.unlockedsongs.push(`${Ft(s).id.toString().split(".")[0]}.${Ft(s).id.toString().split(".")[1]}`),W(t+"/"+h))},children:[V("span",{className:"buydisplay",style:{opacity:de[a].pack[h].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(de[a].pack[h].unlock?.split(" ")[0])||de[a].pack[h].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(de[a].pack[h].unlock?.split(" ")[0])?1:.5},children:[A(Ea,{})," Purchase"]}),A("span",{children:de[a].pack[h].unlock}),de[a].pack[h].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(de[a].pack[h].unlock?.split(" ")[0])||de[a].pack[h].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(de[a].pack[h].unlock?.split(" ")[0])?null:A("small",{children:"Inefficient Balance"})]})})}):V(Re,{children:[A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>z("Lite"),children:s!=""?de[a].pack[h].charts.Lite.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>z("Neon"),children:s!=""?de[a].pack[h].charts.Neon.chart.metadata.difficult:null}),A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>z("Enigma"),children:s!=""?de[a].pack[h].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:O,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):V("div",{className:"songlock",children:[A(Ea,{})," Unlocked in Store"]})})})," "]}):null}),V("div",{className:"chapter-select",style:{opacity:N?"1":"0",transitionDuration:"1s",pointerEvents:N?"inherit":"none"},children:[A("div",{className:"chapter-select-header",children:"Chapter Select"}),A("div",{className:"chapter-select-list",children:Object.keys(de).map(D=>V("div",{className:"chapter-select-list-elements",style:{opacity:e.user.boughtpack.find(H=>H==D)!=null?1:.5},onClick:()=>X(D),children:[A("img",{src:de[D].banner,className:"chapter-select-list-elements-banner"}),de[D].name,V("small",{children:["Chapter ",de[D].chapter]})]},D))})]})]})]})}function EN(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"}},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"}}]})(e)}let wv,ud;function TN(){wv.state==="running"&&wv.suspend().then(()=>{ud&&(ud.stop(),ud.disconnect())})}function CN(e){let[t,r]=Y.exports.useState(0);Y.exports.useEffect(()=>{let s=new AudioContext,o="./BGM/store.wav",a,d,h;const p=c=>{a||(a=c),d=s.createBufferSource(),d.buffer=c,d.connect(h),d.loop=!0,d.start(0),h.gain.setValueAtTime(.1,s.currentTime)};wv=s,fetch(o,{mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(c=>{s.decodeAudioData(c,p),ud=d,h=s.createGain(),h.connect(s.destination),p(a)})},[]),document.documentElement.style.filter="invert(0)",new Bu;const n=()=>{TN(),Ja(e.user)},i=s=>{const o=s;e.user.boughtpack.find(a=>a==o)==null&&e.user.cpu>=de[o].price&&(e.user.boughtpack.push(o),console.log(e.user.boughtpack),e.user.cpu-=de[o].price,r(Math.random()),console.log(t))};return V(Re,{children:[A("img",{src:"./mainmenu/store/right.png",className:"rightbanner",onClick:n}),A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:n}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/store.css"}),A(Vu,{user:e.user,display:"MUSIC STORE"}),V("div",{className:"display",children:[V("div",{className:"page-description",children:[A("span",{className:"page-description-header",children:"STORE"}),A("span",{className:"page-description-text",children:"Buy song packs here!"})]}),A("div",{className:"storecontainer animate__animated animate__fadeIn centered",children:A("div",{className:"store",children:A("div",{className:"packlist",children:Object.keys(de).map((s,o)=>de[s].price!=-1?V("div",{className:"storepack",style:{transitionDuration:"2s",transitionTimingFunction:"cubic-bezier(0.08,0.82,0.17,1)"},children:[A("img",{src:de[s].banner,className:"storepackheader",id:s}),V("div",{className:"storedescription",children:[V("div",{className:"storedescription-header",children:[A("b",{children:de[s].name}),A("span",{children:de[s].description})]}),V("div",{className:"buybutton",onClick:()=>i(s),style:{pointerEvents:e.user.boughtpack.find(a=>a==s)!=null?"none":"inherit",opacity:e.user.boughtpack.find(a=>a==s)!=null?"0.5":"1"},children:[V("span",{className:"buydisplay",children:[A(EN,{})," ",e.user.boughtpack.find(a=>a==s)!=null?"Purchased":"Purchase"]}),V("span",{children:[de[s].price," CPU"]})]})]}),A("div",{className:"storedescription-songlist"})]},o):null)})})})]})]})}const Hm=new Kn.Howl({src:["/BGM/mainmenu.wav"],preload:!0,volume:.1,loop:!0});function AN(){const e=()=>{Hm.stop(),UN()};return Y.exports.useEffect(()=>{Hm.seek(0),Hm.play()},[]),V(Re,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),V("div",{className:"game-menu",children:[A("img",{src:"Partners/display.png",alt:"",className:"game-logo2",onClick:e}),A("img",{src:"logo/1.png",alt:"",className:"game-logo",onClick:e})]})]})}new Audio;function kN(e){document.documentElement.style.filter="invert(0)";const t=e.user,r=()=>{Ja(t)};let n=-1;e.user.progression.find((p,c)=>{p.startsWith(`${e.beatmap.id}`)&&(n=c)}),n!=-1?parseInt(e.user.progression[n].split("-")[1])<Math.round(e.score*100*10)/10&&(e.user.progression[n]=`${e.beatmap.id}-${Math.round(e.score*100*10)/10}`):e.user.progression.push(`${e.beatmap.id}-${Math.round(e.score*100*10)/10}`);const i=Math.round(e.score*10/e.beatmap.metadata.difficultcc*(.5+e.beatmap.metadata.difficultcc/40)*10);e.user.cpu=Math.round(e.user.cpu+Math.round(i*ot.data[e.user.partners[e.user.selectedpartner]].cpurate));const s=Math.round(e.score*10/e.beatmap.metadata.difficultcc*(.5+e.beatmap.metadata.difficultcc/40)*50);e.user.ram=Math.round(e.user.ram+Math.round(s*ot.data[e.user.partners[e.user.selectedpartner]].ramrate));let o=-1;const a=e.user.partnersexp.find((p,c)=>{if(p.startsWith(`${e.user.selectedpartner}`))return o=c,!0});a!=null&&o!=-1?e.user.partnersexp[o]=`${a.split(",")[0]},${parseInt(a.split(",")[1])+500}`:e.user.partnersexp.push(`${e.user.selectedpartner},500`);const d=p=>p<=50?"F":p<=80?"D":p<=90?"C":p<=92?"B":p<=94?"A":p<=96?"S":p<=98?"SS":p<=100?"SSS":"",h=p=>p<=50?"#d65e5e":p<=80?"#e665b0":p<=90?"#dd65e6":p<=92?"#9265e6":p<=94?"#6583e6":p<=96?"#65d7e6":p<=98?"#65e6b7":p<=100?"#dbe665":"";return V(Re,{children:[A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./result/left.png",className:"leftoverlay",alt:""}),A("img",{src:"./public/mainmenu/back.png",className:"backbutton",onClick:r}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A(Vu,{user:t,display:"PLAY RESULT"}),V("div",{className:"display animate__animated animate__fadeIn",children:[A("div",{className:"result-mapdisplay",children:A("img",{src:e.beatmap.jacketPath,className:"result-mapdisplay-bg"})}),V("div",{className:"rewardscreen",children:[V("div",{className:"rewardscreen-cpu",children:[A("div",{className:"rewardscreen-cpu-display",children:"CPU"})," ",Math.round(i*ot.data[e.user.partners[e.user.selectedpartner]].cpurate)," (x",ot.data[e.user.partners[e.user.selectedpartner]].cpurate," BONUS)"]}),V("div",{className:"rewardscreen-cpu",children:[A("div",{className:"rewardscreen-cpu-display",children:"RAM"})," ",Math.round(s*ot.data[e.user.partners[e.user.selectedpartner]].ramrate),"  (x",ot.data[e.user.partners[e.user.selectedpartner]].ramrate," BONUS)"]})]}),V("div",{className:"resultscreen",children:[A("div",{className:"result-mapdisplay-header",children:e.bad==0&&e.miss==0&&e.great==0?"ABSOLUTE PERFECT!":e.bad==0&&e.miss==0?"FULL CONNECTION!":Math.round(e.score*100*10)/10>=70?"CLEAR!":"Failed..."}),A("img",{className:"result-mapdisplay-jacket",src:e.beatmap.jacketPath}),V("div",{className:"resultscreen-1strow",children:[A("span",{className:"result-mapdisplay-title",children:e.beatmap.metadata.title}),A("span",{className:"result-mapdisplay-artist",children:e.beatmap.metadata.artist}),V("span",{className:"result-mapdisplay-diffname",id:e.beatmap.metadata.difficulttype,children:[e.beatmap.metadata.difficulttype," ",e.beatmap.metadata.difficult]})]}),V("div",{className:"resultscreen-2ndrow",children:[V("div",{className:"resultscreenscore",children:[V("div",{className:"resultscreendetail-maxcombo",children:[A("div",{className:"resultscreendetail-display",children:"MAX COMBO"})," ",e.combo]}),Math.round(e.score*100*10)/10," %"]}),V("div",{className:"resultscreendetail",children:[V("div",{className:"resultscreendetail-hit",children:[A("div",{className:"resultscreendetail-display",children:"X-PHASED"})," ",e.hit]}),V("div",{className:"resultscreendetail-hit",children:[A("div",{className:"resultscreendetail-display",children:"PHASED"})," ",e.great]}),V("div",{className:"resultscreendetail-miss",children:[A("div",{className:"resultscreendetail-display",children:"MIS-PHASED"})," ",e.bad]}),V("div",{className:"resultscreendetail-bad",children:[A("div",{className:"resultscreendetail-display",children:"ERROR"})," ",e.miss]})]})]})]}),V("div",{className:"rank",style:{color:h(Math.round(e.score*100*10)/10)},children:[" ",d(Math.round(e.score*100*10)/10)]}),A("img",{className:"partner-img",id:"partner-result",src:ot.data[e.user.partners[e.user.selectedpartner]].imagesrc})]})]})}function zm(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function NT(e,t){return yi.exports.SHA256(yi.exports.SHA256(yi.exports.SHA256(e+t**2)))}function Gm(e,t){let r=0;for(;NT(r.toString(),t).toString()!=e;)r++;return r}new Audio;function PN(){new Bu;const[e,t]=Y.exports.useState(""),[r,n]=Y.exports.useState("");return V(Re,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"game-menu2",children:V("div",{className:"centered",children:[A("h1",{className:"",children:"LOGIN"}),V("div",{className:"",children:[A("input",{id:"username",type:"text",value:e,placeholder:"USERNAME",onChange:a=>{t(a.target.value)}}),A("br",{}),A("input",{id:"password",type:"password",value:r,placeholder:"PIN PASSWORD",onChange:a=>{n(a.target.value)}}),A("br",{}),A("input",{type:"submit",onClick:()=>{const a=e,d=r;if(NT(a,parseInt(d)).toString()==zm("name")){const h=new Bu,p=yi.exports.AES.decrypt(zm("data"),d).toString(yi.exports.enc.Utf8).split(",");h.pass=d,h.name=a,h.pfpurl=zm("pfpurl"),h.cpu=Gm(p.find(c=>c.startsWith("cpu"))?.split(":")[1],parseInt(d)),h.progression=[],h.ram=Gm(p.find(c=>c.startsWith("ram"))?.split(":")[1],parseInt(d)),h.selectedpartner=Gm(p.find(c=>c.startsWith("selectedpartner"))?.split(":")[1],parseInt(d)),h.unlockedsongs=[],h.boughtpack=["sound"],h.readstory=[],p.find(c=>c.startsWith("partners"))?.split(":")[1].split("/").forEach(c=>{c!=""&&h.partners.push(parseInt(c))}),p.find(c=>c.startsWith("partnersexp"))?.split(":")[1].split("/").forEach(c=>{c!=""&&h.partnersexp.push(c)}),p.find(c=>c.startsWith("bought"))?.split(":")[1].split("/").forEach(c=>{c!=""&&h.boughtpack.push(c)}),p.find(c=>c.startsWith("unlock"))?.split(":")[1].split("/").forEach(c=>{c!=""&&h.unlockedsongs.push(c)}),p.find(c=>c.startsWith("prog"))?.split(":")[1].split("/").forEach(c=>{c!=""&&h.progression.push(c)}),p.find(c=>c.startsWith("readstory"))?.split(":")[1].split("/").forEach(c=>{c!=""&&h.readstory.push(c)}),console.log(h),Ja(h)}}})]})]})})]})}function IN(){const[e,t]=Y.exports.useState(""),[r,n]=Y.exports.useState("");return V(Re,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"game-menu2",children:V("div",{className:"centered",children:[A("h1",{className:"animate__animated animate__fadeInUp",children:" NEODITRONIX"}),V("div",{className:"animate__animated animate__fadeInUp",children:["First off, Let's start with creating a user profile",A("br",{}),"This world is vast, and very infinite.",A("br",{}),"It is required to have a unique ID in order to distinguish one from another",A("br",{}),A("br",{}),"What's your name?",A("br",{}),A("br",{}),A("input",{id:"username",type:"text",value:e,placeholder:"USERNAME",onChange:a=>{t(a.target.value)}}),A("br",{}),A("input",{id:"password",type:"text",name:"pin",pattern:"[0-9]{4}",maxLength:4,value:r,placeholder:"PIN PASSWORD",onChange:a=>{n(a.target.value)}}),A("br",{}),A("input",{type:"submit",value:"That's my name",onClick:()=>{const a=new Bu;a.name=e,a.partners=[0],a.pass=r,a.boughtpack=["sound"],document.cookie="COL_1_KEY=q;",document.cookie="COL_2_KEY=w;",document.cookie="COL_3_KEY=e;",document.cookie="COL_4_KEY=r;",document.cookie="COL_1_KEY2=7;",document.cookie="COL_2_KEY2=8;",document.cookie="COL_3_KEY2=9;",document.cookie="COL_4_KEY2=+;",document.cookie="CURSOR_LEFT_KEY=1;",document.cookie="CURSOR_RIGHT_KEY=2;",document.cookie="CURSOR_LEFT_KEY2=*;",document.cookie="CURSOR_RIGHT_KEY2=-;",document.cookie="OFFSET=0;",document.cookie="SCROLL_SPEED_FACTOR=5;",Ja(a)}})]})]})})]})}async function jh(e){const r=await(await fetch(`./VN/script/${e}.txt`)).text();let n="",i="",s=!1,o="",a="";const d=r.split(`
`).map(p=>{if(p.startsWith("$IMG"))n=p.split("=")[1];else if(p.startsWith("$CHAR"))o=p.split("=")[1];else if(p.startsWith("$ICON"))a=p.split("=")[1];else return p.startsWith("$FORM")?(s=!0,i=p.split("=")[1].split("|")[0],{icon:a.replace("\r",""),img:n,isForm:s,Formtype:i.replace("\r",""),FormAnswer:p.split("=")[1].split("|")[2].replace("\r",""),char:o.replace("\r",""),story:p.split("=")[1].split("|")[1].replace("\r","")}):{icon:a,img:n,isForm:!1,FormAnswer:"",Formtype:"",char:o,story:p}}),h=[];for(let p in d)d[p]!==void 0&&h.push(d[p]);return h}const Ne={data:{0:{name:"Spaceship",img:"Partners/1.mp4",icon:"1",stories:[{pos:[1,3],title:"Hi, Shiro.",story:"Can you hear my voice...?",unlocktype:"none",unlock:"utopia.voiceofhope",rewardtype:"song",reward:"utopia.starrysky",rewardstory:await jh("S1")},{pos:[2,3],title:"NEO.SYS",story:"Experience the sky.",unlocktype:"none",unlock:"utopia.starrysky",rewardtype:"song",reward:"utopia.starrydream",rewardstory:await jh("S2")},{pos:[3,4],title:"So what are you using it for..?",story:"Experience the dream of the space. ",unlocktype:"none",unlock:"utopia.starrydream",rewardtype:"song",reward:"utopia.sawasdee",rewardstory:await jh("S3")},{pos:[4,5],title:"S4",story:"HELLO_WORLD!",unlocktype:"none",unlock:"utopia.sawasdee",rewardtype:"song",reward:"utopia.preciouspromise",rewardstory:await jh("S3")}]}}};function RN(e){return xn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M212.92,25.71a7.89,7.89,0,0,0-6.86-1.46l-128,32A8,8,0,0,0,72,64V174.1A36,36,0,1,0,88,204V110.25l112-28V142.1A36,36,0,1,0,216,172V32A8,8,0,0,0,212.92,25.71Z"}}]})(e)}function MN(e){return xn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function NN(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z"}}]})(e)}function BN(e){const[t,r]=Y.exports.useState(e.toggle),n=Y.exports.useRef(0),[i,s]=Y.exports.useState(!1),o=Y.exports.useRef(!0),a=Y.exports.useRef("");let d=!1;const[h,p]=Y.exports.useState(0);let c=0;Ne.data[e.content[0]].name=="???"&&(document.documentElement.style.filter="saturate(0)");const[f,m]=Y.exports.useState(!1),v=()=>{t&&n.current+1==Object.keys(Ne.data[e.content[0]].stories[e.content[1]].rewardstory).length?(r(!1),s(!1),o.current=!1,Nw(),console.log("play"),n.current=0,e.user.readstory.push(`${e.content[0]}.${e.content[1]}`),p(Math.random())):t&&(n.current+=1,Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*100+5e3,p(Math.random()))};return Y.exports.useEffect(()=>{const _=setInterval(()=>{if(t&&d){if(Date.now()>=c)if(!Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm&&n.current+1!=Object.keys(Ne.data[e.content[0]].stories[e.content[1]].rewardstory).length){n.current+=1;const x=Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*80+1e3;c=Date.now()+x,p(Math.random())}else r(!1),s(!1),d=!1}else clearInterval(_)},1e3),E=x=>{t&&(x.key=="Enter"&&(o.current?Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?(Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="ANSWER"&&a.current==Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer&&(s(!1),console.log(a.current),a.current="",v()),Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="SONG"&&a.current!=""&&(document.cookie=`${Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer}=${a.current};`,s(!1),console.log(a.current),a.current="",v())):(s(!1),console.log(a.current),a.current="",v()):o.current=!0),p(Math.random()))};return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E),clearInterval(_)}},[d]),V("div",{className:`vn-box-container ${t?"notification-new-song-animation":""}`,style:{opacity:t?1:0,backgroundImage:Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].img!=""?`url(${Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].img}) `:"",transitionDuration:"1s",pointerEvents:t?"inherit":"none",animation:t?"fadein 0.2s":"fadeout 0.2s"},children:[A("div",{className:"vn-box-container-loadingscreen"}),A("div",{className:"vn-box-log",onClick:()=>{m(!1)},style:{transitionDuration:"0.5s",opacity:f?"1":"0",left:f?"0":"-10svw",pointerEvents:f?"inherit":"none"},children:Ne.data[e.content[0]].stories[e.content[1]].rewardstory.map((_,E)=>E<=n.current?A(Re,{children:V("div",{children:[A("div",{className:"vn-text-display-char",children:_.char}),A("div",{className:"vn-text-display-dialogue",children:_.story})]})}):null)}),V(Re,{children:[A("div",{className:"vn-header",children:A("span",{children:Ne.data[e.content[0]].stories[e.content[1]].title})}),o.current?V("div",{className:`vn-box ${t?"notification-new-song-animation":""}`,children:[Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].icon!=""&&A("img",{src:`./VN/icons/${Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].icon}.png`,className:"vn-icon"}),V("div",{className:"vn-text-display",onClick:()=>{Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?(Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="ANSWER"&&a.current==Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer&&(s(!1),console.log(a.current),a.current="",v()),Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="SONG"&&a.current!=""&&(document.cookie=`${Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer}=${a.current};`,s(!1),console.log(a.current),a.current="",v())):(s(!1),console.log(a.current),a.current="",v())},children:[A("div",{className:"vn-text-display-char",children:Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char}),V("div",{className:`vn-text-display-dialogue ${Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char=="$s"?"vn-text-display-dialogue-special":""}`,children:[Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story,Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?A("input",{type:"text",onChange:_=>{a.current=_.target.value,console.log(a.current)}}):null]})]}),V("div",{className:"vn-box-tools",children:[V("div",{className:"vn-box-tools-bt",onClick:()=>{s(!i),d=!i;const _=Ne.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*80+1e3;c=Date.now()+_},style:{opacity:i?"0.5":"1"},children:[A(MN,{})," Autoplay"]}),V("div",{className:"vn-box-tools-bt",onClick:()=>{m(!f)},style:{opacity:f?"0.5":"1"},children:[A(NN,{})," Log"]}),V("div",{className:"vn-box-tools-bt",onClick:()=>{r(!1),s(!1),o.current=!1,Nw()},children:[A(cN,{})," Quit"]})]})]}):null]})]})}function DN(e){return A("img",{src:"VN/RPG/1.png",className:`storymenu-chapter-description-${e.completed?"uncomplete":"complete"}`,style:{left:`${e.story.pos[0]*3}svw`,top:`${e.story.pos[1]*3}svw`}})}const zr=new Kn.Howl({src:["/BGM/1.mp3"],preload:!0,volume:1,loop:!0});let ps=!1;function Nw(){zr.fade(0,1,1e3),setTimeout(()=>{ps=!1},500)}function LN(e){document.getElementById("transition").className="transition-off",Y.exports.useState(0);const[t,r]=Y.exports.useState(""),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0),[a,d]=Y.exports.useState(""),h=Y.exports.useRef(!1),[p,c]=Y.exports.useState("storymenu-animation"),f=Y.exports.useRef(!1);Y.exports.useRef(!1);const[m,v]=Y.exports.useState(""),[_,E]=Y.exports.useState(0),[x,y]=Y.exports.useState([s,0]),w=()=>{zr.stop(),Ja(e.user)};Y.exports.useEffect(()=>{zr.seek(0),zr.volume(1),zr.play()},[]);const T=(F,D)=>{const H=Ne.data[D].stories[F].unlocktype;Ne.data[D].stories[F].rewardtype;const U=Ne.data[D].stories[F].reward,j=Ne.data[D].stories[F].unlock,J=e.user.unlockedsongs.find(pe=>pe.startsWith(U))!=null,q=e.user.progression.find(pe=>pe.startsWith(j))!=null,_e=e.user.readstory.find(pe=>pe.startsWith(`${D}.${F}`))!=null;H=="play"?(q&&!_e&&!J&&(y([D,F]),zr.fade(1,.5,1e3),d(""),d("notification-new-song-animation"),e.user.readstory.push(`${D}.${F}`),e.user.unlockedsongs.push(U),r(JSON.stringify(de[U.split(".")[0]].pack[U.split(".")[1]].charts.Lite.chart)),h.current=!0),_e&&J&&(zr.fade(1,0,2e3),y([D,F]),ps=!0,E(Math.round(Math.random()*1e3))),!J&&!_e&&!q&&(f.current=!0,ps=!1,v(Ne.data[D].stories[F].story),zr.fade(1,.5,1e3),h.current=!0,E(Math.round(Math.random()*1e3)))):H=="none"&&(!_e&&!J?(y([D,F]),zr.fade(1,.5,1e3),d(""),d("notification-new-song-animation"),e.user.readstory.push(`${D}.${F}`),e.user.unlockedsongs.push(U),r(JSON.stringify(de[U.split(".")[0]].pack[U.split(".")[1]].charts.Lite.chart)),h.current=!0):(zr.fade(1,0,2e3),y([D,F]),ps=!0,E(Math.round(Math.random()*1e3))))};Ne.data[s].name=="???"?document.documentElement.style.filter="saturate(0)":document.documentElement.style.filter="saturate(1)";const P=e.user,R=Y.exports.useRef(3),M=Y.exports.useRef(3),I=Y.exports.useRef(3),N=Y.exports.useRef(3),k=Y.exports.useRef(3),L=Y.exports.useRef(3),W=Y.exports.useRef(Date.now()),O=Y.exports.useRef("front"),[z,Q]=Y.exports.useState(!1),X=Y.exports.useRef(!1),Z=Y.exports.useRef("");return Y.exports.useEffect(()=>{const F=[!1,!1,!1,!1];let D=150;const H=3,U=()=>{console.log("move"),i(Math.random()),I.current=k.current,N.current=L.current,!F[2]&&!F[3]?(F[0]&&(k.current=I.current-H),F[1]&&(k.current=I.current+H)):(F[2]&&(L.current=N.current-H),F[3]&&(L.current=N.current+H)),W.current=Date.now();let Ae=!1;Ne.data[s].stories.forEach((be,rt)=>{Math.abs(k.current-be.pos[0]*3)<1&&Math.abs(L.current-be.pos[1]*3)<1&&(Ae=!0)}),Q(Ae)},j=()=>{i(Math.random()),R.current=Xt(Date.now(),[W.current,W.current+D],[I.current*1,k.current*1]),M.current=Xt(Date.now(),[W.current,W.current+D],[N.current*1,L.current*1])};var J=setInterval(U,D),q=setInterval(j,5);U();const _e=Ae=>{if(X.current=!0,Z.current=Ae.key,!Ae.repeat){switch(Ae.key){case"w":O.current="back",F[2]=!0;break;case"a":O.current="left",F[0]=!0;break;case"s":O.current="front",F[3]=!0;break;case"d":O.current="right",F[1]=!0;break;case"Enter":!ps&&!f.current?Ne.data[s].stories.forEach((be,rt)=>{Math.abs(R.current-be.pos[0]*3)<1&&Math.abs(M.current-be.pos[1]*3)<1&&T(rt,s)}):(f.current=!1,h.current=!1,ps||zr.fade(.5,1,1e3));break}Date.now()>W.current+D&&(U(),clearInterval(J),J=setInterval(U,D))}},pe=Ae=>{switch(Ae.key){case"w":F[2]=!1;break;case"a":F[0]=!1;break;case"s":F[3]=!1;break;case"d":F[1]=!1;break}};return document.addEventListener("keydown",_e),document.addEventListener("keyup",pe),()=>{document.removeEventListener("keydown",_e),document.removeEventListener("keyup",pe),clearInterval(q),clearInterval(J)}},[]),V(Re,{children:[A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:w}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bu.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("div",{className:"darkscreen"}),A(Vu,{user:P,display:"CHAPTER SELECT"}),Ne.data[s-1]!=null?V("span",{className:"prevchapter",onClick:()=>{c(""),setTimeout(()=>{c("storymenu-animation")},10),o(s-1)},children:[A("img",{src:Ne.data[s-1].img,className:"prevnextimg"}),A("span",{children:A(_N,{})}),"Previous Chapter : ",Ne.data[s-1].name," "]}):null,Ne.data[s+1]!=null?V("span",{className:"nextchapter",onClick:()=>{c(""),setTimeout(()=>{c("storymenu-animation")},10),o(s+1)},children:[A("img",{src:Ne.data[s+1].img,className:"prevnextimg"}),"Next Chapter : ",Ne.data[s+1].name,A("span",{children:A(yN,{})})]}):null,V("div",{className:"display",id:"display",children:[A("img",{src:`Partners/icons/${Ne.data[s].icon}${O.current}.png`,style:{left:`${R.current}svw`,top:`${M.current}svw`},className:"storymenu-chapter-icon"}),A("img",{src:"VN/RPG/icon.png",style:{display:z?"flex":"none",left:`${R.current}svw`,top:`${M.current-4}svw`},className:"storymenu-chapter-icon-event"}),V("div",{className:`storymenu ${p}`,children:[" ",V(Re,{children:[A("video",{className:"storymenu-chapter-banner-rpg",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:Ne.data[s].img,type:"video/mp4"})}),A("div",{className:"storymenu-chapter",children:Ne.data[s].stories.map((F,D)=>A(DN,{story:F,completed:e.user.readstory.find(H=>H.startsWith(`${s}.${D}`))==null}))})]})]})]}),A("div",{className:`notification-new-song ${h.current?a:""}`,style:{backgroundImage:"url(./mainmenu/grid.jpeg)",opacity:h.current?"1":"0",transitionDuration:"0.5s",pointerEvents:h.current?"inherit":"none"},onClick:()=>{h.current=!1,ps=!0,zr.fade(.5,0,1e3),E(Math.round(Math.random()*1e3))},children:t!=""&&V(Re,{children:[V("div",{className:"notification-new-song-header",children:[A(RN,{})," New Song Unlocked"]}),A("img",{className:"notification-new-song-jacket",src:Ft(t).jacketPath}),A("div",{className:"notification-new-song-artist",children:Ft(t).metadata.artist}),A("div",{className:"notification-new-song-title",children:Ft(t).metadata.title})]})}),A("div",{className:`notification-new-song ${f.current?a:""}`,style:{backgroundImage:"url(./mainmenu/grid.jpeg)",opacity:f.current?"1":"0",transitionDuration:"0.5s",pointerEvents:f.current?"inherit":"none"},onClick:()=>{f.current=!1,zr.fade(.5,1,1e3)},children:A(Re,{children:m.split(`
`).map(F=>V(Re,{children:[F," ",A("br",{})]}))})}),A(BN,{user:e.user,content:x,toggle:ps},_)]})}const Hs=["cpu is used to unlock songs!","log(), DJ PARKAPRAO GAI KAIDAO, ohm002... they're all the same person. after all.. this entire game is made by one person only (if you excludes all the helpers at the start tho!)","occasionaly you might need to use ram once in a while to enter some special event!","the main inspiration for me to develop this game is sta! his tone sphere game really inspires me to do the same too","it is very very unlikely that this game will ever be featured by other artist except myself, until i'm absolutely sure about quality control for my game.","making a rhythm game is fun!","this game is made with reactjs and react-pixi"],Si=$S(document.getElementById("root"));function ON(e,t){Si.render(null);const r=new iN;r.mode="menu";let n=e;r.beatmap=n,r.audio=new Audio(n.audioPath);const i=new Audio(sN);i.volume=.5,i.play(),document.getElementById("transitiontext").innerHTML=`
      <div class="play-songintro">
        <div class="play-songintro-artist">${n.metadata.artist}</div>
        <div class="play-songintro-title">${n.metadata.title} </div>
        <img class="play-songintro-jacket" src="${n.jacketPath}">
        <div class="play-songintro-diff">${n.metadata.difficulttype} ${n.metadata.difficult} </div>
        <div class="play-songintro-charter">Charted by ${n.metadata.creator} </div>
        </div>
      `,document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off"},4e3),setTimeout(()=>{var s=!1;setInterval(()=>{!isNaN(r.audio.duration)&&!s&&(r.duration=r.audio.duration*1e3,Si.render(A($r.StrictMode,{children:A(AM,{game:r,chart:n,menutime:Date.now(),user:t},Math.random())})),s=!0)},10)},1e3)}const Ei=new Audio("https://cdn.discordapp.com/attachments/1143769032605057136/1159757669033332829/eff.wav?ex=65322f7f&is=651fba7f&hm=8240581980bf0b374ed673e37625a6fd222264f738b364adb37d4df082b4404a&");Ei.volume=.2;Ei.preload="auto";function BT(e){Ei.currentTime=0,Ei.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",Si.render(A(SN,{user:e}))},1e3)}function FN(e){Ei.currentTime=0,Ei.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off"},2500),setTimeout(()=>{Si.render(A(LN,{user:e}))},1e3)}function Ja(e){Ei.currentTime=0,Ei.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",Si.render(A(gN,{user:e}))},1e3)}function UN(){Bw("status")==""?Si.render(A(IN,{})):Bw("status")!=""&&Si.render(A(PN,{}))}function HN(e){Ei.currentTime=0,Ei.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",Si.render(A(CN,{user:e}))},1e3)}function zN(e,t,r,n,i,s,o,a){document.getElementById("transitiontext").innerHTML="",document.getElementById("transition").className="transition-on",setTimeout(()=>{Si.render(A(kN,{user:e,beatmap:t,score:r,hit:n,great:i,bad:s,miss:o,combo:a}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2e3)}function Bw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}Si.render(A(AN,{}));

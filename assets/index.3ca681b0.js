(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ow(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Y={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Du=Symbol.for("react.element"),PC=Symbol.for("react.portal"),IC=Symbol.for("react.fragment"),RC=Symbol.for("react.strict_mode"),MC=Symbol.for("react.profiler"),NC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),LC=Symbol.for("react.forward_ref"),DC=Symbol.for("react.suspense"),OC=Symbol.for("react.memo"),FC=Symbol.for("react.lazy"),gy=Symbol.iterator;function UC(e){return e===null||typeof e!="object"?null:(e=gy&&e[gy]||e["@@iterator"],typeof e=="function"?e:null)}var Fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uw=Object.assign,Hw={};function Xa(e,t,r){this.props=e,this.context=t,this.refs=Hw,this.updater=r||Fw}Xa.prototype.isReactComponent={};Xa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zw(){}zw.prototype=Xa.prototype;function wv(e,t,r){this.props=e,this.context=t,this.refs=Hw,this.updater=r||Fw}var Sv=wv.prototype=new zw;Sv.constructor=wv;Uw(Sv,Xa.prototype);Sv.isPureReactComponent=!0;var vy=Array.isArray,Gw=Object.prototype.hasOwnProperty,Ev={current:null},Ww={key:!0,ref:!0,__self:!0,__source:!0};function jw(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Gw.call(t,n)&&!Ww.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var h=Array(a),d=0;d<a;d++)h[d]=arguments[d+2];i.children=h}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Du,type:e,key:s,ref:o,props:i,_owner:Ev.current}}function HC(e,t){return{$$typeof:Du,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Tv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Du}function zC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xy=/\/+/g;function Q0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zC(""+e.key):t.toString(36)}function jh(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Du:case PC:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Q0(o,0):n,vy(i)?(r="",e!=null&&(r=e.replace(xy,"$&/")+"/"),jh(i,t,r,"",function(d){return d})):i!=null&&(Tv(i)&&(i=HC(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xy,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",vy(e))for(var a=0;a<e.length;a++){s=e[a];var h=n+Q0(s,a);o+=jh(s,t,r,h,i)}else if(h=UC(e),typeof h=="function")for(e=h.call(e),a=0;!(s=e.next()).done;)s=s.value,h=n+Q0(s,a++),o+=jh(s,t,r,h,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Zc(e,t,r){if(e==null)return e;var n=[],i=0;return jh(e,n,"","",function(s){return t.call(r,s,i++)}),n}function GC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yr={current:null},$h={transition:null},WC={ReactCurrentDispatcher:yr,ReactCurrentBatchConfig:$h,ReactCurrentOwner:Ev};ze.Children={map:Zc,forEach:function(e,t,r){Zc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Zc(e,function(){t++}),t},toArray:function(e){return Zc(e,function(t){return t})||[]},only:function(e){if(!Tv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=Xa;ze.Fragment=IC;ze.Profiler=MC;ze.PureComponent=wv;ze.StrictMode=RC;ze.Suspense=DC;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WC;ze.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Uw({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Ev.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(h in t)Gw.call(t,h)&&!Ww.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&a!==void 0?a[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){a=Array(h);for(var d=0;d<h;d++)a[d]=arguments[d+2];n.children=a}return{$$typeof:Du,type:e.type,key:i,ref:s,props:n,_owner:o}};ze.createContext=function(e){return e={$$typeof:BC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:NC,_context:e},e.Consumer=e};ze.createElement=jw;ze.createFactory=function(e){var t=jw.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:LC,render:e}};ze.isValidElement=Tv;ze.lazy=function(e){return{$$typeof:FC,_payload:{_status:-1,_result:e},_init:GC}};ze.memo=function(e,t){return{$$typeof:OC,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=$h.transition;$h.transition={};try{e()}finally{$h.transition=t}};ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.useCallback=function(e,t){return yr.current.useCallback(e,t)};ze.useContext=function(e){return yr.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return yr.current.useDeferredValue(e)};ze.useEffect=function(e,t){return yr.current.useEffect(e,t)};ze.useId=function(){return yr.current.useId()};ze.useImperativeHandle=function(e,t,r){return yr.current.useImperativeHandle(e,t,r)};ze.useInsertionEffect=function(e,t){return yr.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return yr.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return yr.current.useMemo(e,t)};ze.useReducer=function(e,t,r){return yr.current.useReducer(e,t,r)};ze.useRef=function(e){return yr.current.useRef(e)};ze.useState=function(e){return yr.current.useState(e)};ze.useSyncExternalStore=function(e,t,r){return yr.current.useSyncExternalStore(e,t,r)};ze.useTransition=function(){return yr.current.useTransition()};ze.version="18.2.0";(function(e){e.exports=ze})(Y);const jr=kC(Y.exports);var $w={exports:{}},Yr={},Vw={exports:{}},Xw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,O){var z=F.length;F.push(O);e:for(;0<z;){var H=z-1>>>1,j=F[H];if(0<i(j,O))F[H]=O,F[z]=j,z=H;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var O=F[0],z=F.pop();if(z!==O){F[0]=z;e:for(var H=0,j=F.length,J=j>>>1;H<J;){var q=2*(H+1)-1,Ce=F[q],ge=q+1,Re=F[ge];if(0>i(Ce,z))ge<j&&0>i(Re,Ce)?(F[H]=Re,F[ge]=z,H=ge):(F[H]=Ce,F[q]=z,H=q);else if(ge<j&&0>i(Re,z))F[H]=Re,F[ge]=z,H=ge;else break e}}return O}function i(F,O){var z=F.sortIndex-O.sortIndex;return z!==0?z:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var h=[],d=[],p=1,c=null,f=3,m=!1,v=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var O=r(d);O!==null;){if(O.callback===null)n(d);else if(O.startTime<=F)n(d),O.sortIndex=O.expirationTime,t(h,O);else break;O=r(d)}}function T(F){if(y=!1,w(F),!v)if(r(h)!==null)v=!0,K(P);else{var O=r(d);O!==null&&Z(T,O.startTime-F)}}function P(F,O){v=!1,y&&(y=!1,x(M),M=-1),m=!0;var z=f;try{for(w(O),c=r(h);c!==null&&(!(c.expirationTime>O)||F&&!L());){var H=c.callback;if(typeof H=="function"){c.callback=null,f=c.priorityLevel;var j=H(c.expirationTime<=O);O=e.unstable_now(),typeof j=="function"?c.callback=j:c===r(h)&&n(h),w(O)}else n(h);c=r(h)}if(c!==null)var J=!0;else{var q=r(d);q!==null&&Z(T,q.startTime-O),J=!1}return J}finally{c=null,f=z,m=!1}}var I=!1,R=null,M=-1,N=5,k=-1;function L(){return!(e.unstable_now()-k<N)}function W(){if(R!==null){var F=e.unstable_now();k=F;var O=!0;try{O=R(!0,F)}finally{O?D():(I=!1,R=null)}}else I=!1}var D;if(typeof _=="function")D=function(){_(W)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=W,D=function(){X.postMessage(null)}}else D=function(){E(W,0)};function K(F){R=F,I||(I=!0,D())}function Z(F,O){M=E(function(){F(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,K(P))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var z=f;f=O;try{return F()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=f;f=F;try{return O()}finally{f=z}},e.unstable_scheduleCallback=function(F,O,z){var H=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=z+j,F={id:p++,callback:O,priorityLevel:F,startTime:z,expirationTime:j,sortIndex:-1},z>H?(F.sortIndex=z,t(d,F),r(h)===null&&F===r(d)&&(y?(x(M),M=-1):y=!0,Z(T,z-H))):(F.sortIndex=j,t(h,F),v||m||(v=!0,K(P))),F},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(F){var O=f;return function(){var z=f;f=O;try{return F.apply(this,arguments)}finally{f=z}}}})(Xw);(function(e){e.exports=Xw})(Vw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw=Y.exports,Xr=Vw.exports;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kw=new Set,au={};function Mo(e,t){Oa(e,t),Oa(e+"Capture",t)}function Oa(e,t){for(au[e]=t,e=0;e<t.length;e++)Kw.add(t[e])}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gm=Object.prototype.hasOwnProperty,jC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},_y={};function $C(e){return Gm.call(_y,e)?!0:Gm.call(yy,e)?!1:jC.test(e)?_y[e]=!0:(yy[e]=!0,!1)}function VC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XC(e,t,r,n){if(t===null||typeof t>"u"||VC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){tr[e]=new _r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];tr[t]=new _r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){tr[e]=new _r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){tr[e]=new _r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){tr[e]=new _r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){tr[e]=new _r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){tr[e]=new _r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){tr[e]=new _r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){tr[e]=new _r(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cv=/[\-:]([a-z])/g;function Av(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cv,Av);tr[t]=new _r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cv,Av);tr[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cv,Av);tr[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){tr[e]=new _r(e,1,!1,e.toLowerCase(),null,!1,!1)});tr.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){tr[e]=new _r(e,1,!1,e.toLowerCase(),null,!0,!0)});function kv(e,t,r,n){var i=tr.hasOwnProperty(t)?tr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XC(t,r,i,n)&&(r=null),n||i===null?$C(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Qi=Yw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),ca=Symbol.for("react.portal"),ha=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Wm=Symbol.for("react.profiler"),Qw=Symbol.for("react.provider"),qw=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),jm=Symbol.for("react.suspense"),$m=Symbol.for("react.suspense_list"),Rv=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),Zw=Symbol.for("react.offscreen"),by=Symbol.iterator;function bl(e){return e===null||typeof e!="object"?null:(e=by&&e[by]||e["@@iterator"],typeof e=="function"?e:null)}var bt=Object.assign,q0;function Fl(e){if(q0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);q0=t&&t[1]||""}return`
`+q0+e}var Z0=!1;function J0(e,t){if(!e||Z0)return"";Z0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var h=`
`+i[o].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=o&&0<=a);break}}}finally{Z0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Fl(e):""}function YC(e){switch(e.tag){case 5:return Fl(e.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return e=J0(e.type,!1),e;case 11:return e=J0(e.type.render,!1),e;case 1:return e=J0(e.type,!0),e;default:return""}}function Vm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ha:return"Fragment";case ca:return"Portal";case Wm:return"Profiler";case Pv:return"StrictMode";case jm:return"Suspense";case $m:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qw:return(e.displayName||"Context")+".Consumer";case Qw:return(e._context.displayName||"Context")+".Provider";case Iv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rv:return t=e.displayName||null,t!==null?t:Vm(e.type)||"Memo";case gs:t=e._payload,e=e._init;try{return Vm(e(t))}catch{}}return null}function KC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vm(t);case 8:return t===Pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QC(e){var t=Jw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function eh(e){e._valueTracker||(e._valueTracker=QC(e))}function e2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Jw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ud(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xm(e,t){var r=t.checked;return bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function wy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function t2(e,t){t=t.checked,t!=null&&kv(e,"checked",t,!1)}function Ym(e,t){t2(e,t);var r=Bs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Km(e,t.type,r):t.hasOwnProperty("defaultValue")&&Km(e,t.type,Bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Km(e,t,r){(t!=="number"||ud(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ul=Array.isArray;function Ta(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Qm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ey(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ae(92));if(Ul(r)){if(1<r.length)throw Error(ae(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bs(r)}}function r2(e,t){var r=Bs(t.value),n=Bs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ty(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function n2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?n2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var th,i2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(th=th||document.createElement("div"),th.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=th.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function lu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qC=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(e){qC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ql[t]=Ql[e]})});function s2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ql.hasOwnProperty(e)&&Ql[e]?(""+t).trim():t+"px"}function o2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=s2(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var ZC=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zm(e,t){if(t){if(ZC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function Jm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eg=null;function Mv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tg=null,Ca=null,Aa=null;function Cy(e){if(e=Uu(e)){if(typeof tg!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=Zd(t),tg(e.stateNode,e.type,t))}}function a2(e){Ca?Aa?Aa.push(e):Aa=[e]:Ca=e}function l2(){if(Ca){var e=Ca,t=Aa;if(Aa=Ca=null,Cy(e),t)for(e=0;e<t.length;e++)Cy(t[e])}}function u2(e,t){return e(t)}function c2(){}var ep=!1;function h2(e,t,r){if(ep)return e(t,r);ep=!0;try{return u2(e,t,r)}finally{ep=!1,(Ca!==null||Aa!==null)&&(c2(),l2())}}function uu(e,t){var r=e.stateNode;if(r===null)return null;var n=Zd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ae(231,t,typeof r));return r}var rg=!1;if($i)try{var wl={};Object.defineProperty(wl,"passive",{get:function(){rg=!0}}),window.addEventListener("test",wl,wl),window.removeEventListener("test",wl,wl)}catch{rg=!1}function JC(e,t,r,n,i,s,o,a,h){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(p){this.onError(p)}}var ql=!1,cd=null,hd=!1,ng=null,eA={onError:function(e){ql=!0,cd=e}};function tA(e,t,r,n,i,s,o,a,h){ql=!1,cd=null,JC.apply(eA,arguments)}function rA(e,t,r,n,i,s,o,a,h){if(tA.apply(this,arguments),ql){if(ql){var d=cd;ql=!1,cd=null}else throw Error(ae(198));hd||(hd=!0,ng=d)}}function No(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function d2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ay(e){if(No(e)!==e)throw Error(ae(188))}function nA(e){var t=e.alternate;if(!t){if(t=No(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Ay(i),e;if(s===n)return Ay(i),t;s=s.sibling}throw Error(ae(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?e:t}function f2(e){return e=nA(e),e!==null?p2(e):null}function p2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=p2(e);if(t!==null)return t;e=e.sibling}return null}var m2=Xr.unstable_scheduleCallback,ky=Xr.unstable_cancelCallback,iA=Xr.unstable_shouldYield,sA=Xr.unstable_requestPaint,kt=Xr.unstable_now,oA=Xr.unstable_getCurrentPriorityLevel,Nv=Xr.unstable_ImmediatePriority,g2=Xr.unstable_UserBlockingPriority,dd=Xr.unstable_NormalPriority,aA=Xr.unstable_LowPriority,v2=Xr.unstable_IdlePriority,Yd=null,pi=null;function lA(e){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(Yd,e,void 0,(e.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:hA,uA=Math.log,cA=Math.LN2;function hA(e){return e>>>=0,e===0?32:31-(uA(e)/cA|0)|0}var rh=64,nh=4194304;function Hl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Hl(a):(s&=o,s!==0&&(n=Hl(s)))}else o=r&~i,o!==0?n=Hl(o):s!==0&&(n=Hl(s));if(n===0)return 0;if(t!==0&&t!==n&&(t&i)===0&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Un(t),i=1<<r,n|=e[r],t&=~i;return n}function dA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fA(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Un(s),a=1<<o,h=i[o];h===-1?((a&r)===0||(a&n)!==0)&&(i[o]=dA(a,t)):h<=t&&(e.expiredLanes|=a),s&=~a}}function ig(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function x2(){var e=rh;return rh<<=1,(rh&4194240)===0&&(rh=64),e}function tp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ou(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Un(t),e[t]=r}function pA(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Un(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Bv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Un(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var tt=0;function y2(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var _2,Lv,b2,w2,S2,sg=!1,ih=[],Es=null,Ts=null,Cs=null,cu=new Map,hu=new Map,xs=[],mA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Py(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":cu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(t.pointerId)}}function Sl(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Uu(t),t!==null&&Lv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gA(e,t,r,n,i){switch(t){case"focusin":return Es=Sl(Es,e,t,r,n,i),!0;case"dragenter":return Ts=Sl(Ts,e,t,r,n,i),!0;case"mouseover":return Cs=Sl(Cs,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return cu.set(s,Sl(cu.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,hu.set(s,Sl(hu.get(s)||null,e,t,r,n,i)),!0}return!1}function E2(e){var t=vo(e.target);if(t!==null){var r=No(t);if(r!==null){if(t=r.tag,t===13){if(t=d2(r),t!==null){e.blockedOn=t,S2(e.priority,function(){b2(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=og(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);eg=n,r.target.dispatchEvent(n),eg=null}else return t=Uu(r),t!==null&&Lv(t),e.blockedOn=r,!1;t.shift()}return!0}function Iy(e,t,r){Vh(e)&&r.delete(t)}function vA(){sg=!1,Es!==null&&Vh(Es)&&(Es=null),Ts!==null&&Vh(Ts)&&(Ts=null),Cs!==null&&Vh(Cs)&&(Cs=null),cu.forEach(Iy),hu.forEach(Iy)}function El(e,t){e.blockedOn===t&&(e.blockedOn=null,sg||(sg=!0,Xr.unstable_scheduleCallback(Xr.unstable_NormalPriority,vA)))}function du(e){function t(i){return El(i,e)}if(0<ih.length){El(ih[0],e);for(var r=1;r<ih.length;r++){var n=ih[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Es!==null&&El(Es,e),Ts!==null&&El(Ts,e),Cs!==null&&El(Cs,e),cu.forEach(t),hu.forEach(t),r=0;r<xs.length;r++)n=xs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<xs.length&&(r=xs[0],r.blockedOn===null);)E2(r),r.blockedOn===null&&xs.shift()}var ka=Qi.ReactCurrentBatchConfig,pd=!0;function xA(e,t,r,n){var i=tt,s=ka.transition;ka.transition=null;try{tt=1,Dv(e,t,r,n)}finally{tt=i,ka.transition=s}}function yA(e,t,r,n){var i=tt,s=ka.transition;ka.transition=null;try{tt=4,Dv(e,t,r,n)}finally{tt=i,ka.transition=s}}function Dv(e,t,r,n){if(pd){var i=og(e,t,r,n);if(i===null)hp(e,t,n,md,r),Py(e,n);else if(gA(i,e,t,r,n))n.stopPropagation();else if(Py(e,n),t&4&&-1<mA.indexOf(e)){for(;i!==null;){var s=Uu(i);if(s!==null&&_2(s),s=og(e,t,r,n),s===null&&hp(e,t,n,md,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else hp(e,t,n,null,r)}}var md=null;function og(e,t,r,n){if(md=null,e=Mv(n),e=vo(e),e!==null)if(t=No(e),t===null)e=null;else if(r=t.tag,r===13){if(e=d2(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return md=e,null}function T2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oA()){case Nv:return 1;case g2:return 4;case dd:case aA:return 16;case v2:return 536870912;default:return 16}default:return 16}}var bs=null,Ov=null,Xh=null;function C2(){if(Xh)return Xh;var e,t=Ov,r=t.length,n,i="value"in bs?bs.value:bs.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return Xh=i.slice(e,1<n?1-n:void 0)}function Yh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sh(){return!0}function Ry(){return!1}function Kr(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sh:Ry,this.isPropagationStopped=Ry,this}return bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=sh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=sh)},persist:function(){},isPersistent:sh}),t}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fv=Kr(Ya),Fu=bt({},Ya,{view:0,detail:0}),_A=Kr(Fu),rp,np,Tl,Kd=bt({},Fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tl&&(Tl&&e.type==="mousemove"?(rp=e.screenX-Tl.screenX,np=e.screenY-Tl.screenY):np=rp=0,Tl=e),rp)},movementY:function(e){return"movementY"in e?e.movementY:np}}),My=Kr(Kd),bA=bt({},Kd,{dataTransfer:0}),wA=Kr(bA),SA=bt({},Fu,{relatedTarget:0}),ip=Kr(SA),EA=bt({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),TA=Kr(EA),CA=bt({},Ya,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AA=Kr(CA),kA=bt({},Ya,{data:0}),Ny=Kr(kA),PA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RA[e])?!!t[e]:!1}function Uv(){return MA}var NA=bt({},Fu,{key:function(e){if(e.key){var t=PA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(e){return e.type==="keypress"?Yh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),BA=Kr(NA),LA=bt({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),By=Kr(LA),DA=bt({},Fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),OA=Kr(DA),FA=bt({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),UA=Kr(FA),HA=bt({},Kd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zA=Kr(HA),GA=[9,13,27,32],Hv=$i&&"CompositionEvent"in window,Zl=null;$i&&"documentMode"in document&&(Zl=document.documentMode);var WA=$i&&"TextEvent"in window&&!Zl,A2=$i&&(!Hv||Zl&&8<Zl&&11>=Zl),Ly=String.fromCharCode(32),Dy=!1;function k2(e,t){switch(e){case"keyup":return GA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var da=!1;function jA(e,t){switch(e){case"compositionend":return P2(t);case"keypress":return t.which!==32?null:(Dy=!0,Ly);case"textInput":return e=t.data,e===Ly&&Dy?null:e;default:return null}}function $A(e,t){if(da)return e==="compositionend"||!Hv&&k2(e,t)?(e=C2(),Xh=Ov=bs=null,da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return A2&&t.locale!=="ko"?null:t.data;default:return null}}var VA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!VA[e.type]:t==="textarea"}function I2(e,t,r,n){a2(n),t=gd(t,"onChange"),0<t.length&&(r=new Fv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Jl=null,fu=null;function XA(e){z2(e,0)}function Qd(e){var t=ma(e);if(e2(t))return e}function YA(e,t){if(e==="change")return t}var R2=!1;if($i){var sp;if($i){var op="oninput"in document;if(!op){var Fy=document.createElement("div");Fy.setAttribute("oninput","return;"),op=typeof Fy.oninput=="function"}sp=op}else sp=!1;R2=sp&&(!document.documentMode||9<document.documentMode)}function Uy(){Jl&&(Jl.detachEvent("onpropertychange",M2),fu=Jl=null)}function M2(e){if(e.propertyName==="value"&&Qd(fu)){var t=[];I2(t,fu,e,Mv(e)),h2(XA,t)}}function KA(e,t,r){e==="focusin"?(Uy(),Jl=t,fu=r,Jl.attachEvent("onpropertychange",M2)):e==="focusout"&&Uy()}function QA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qd(fu)}function qA(e,t){if(e==="click")return Qd(t)}function ZA(e,t){if(e==="input"||e==="change")return Qd(t)}function JA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $n=typeof Object.is=="function"?Object.is:JA;function pu(e,t){if($n(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Gm.call(t,i)||!$n(e[i],t[i]))return!1}return!0}function Hy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zy(e,t){var r=Hy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hy(r)}}function N2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B2(){for(var e=window,t=ud();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ud(e.document)}return t}function zv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function e4(e){var t=B2(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&N2(r.ownerDocument.documentElement,r)){if(n!==null&&zv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=zy(r,s);var o=zy(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var t4=$i&&"documentMode"in document&&11>=document.documentMode,fa=null,ag=null,eu=null,lg=!1;function Gy(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lg||fa==null||fa!==ud(n)||(n=fa,"selectionStart"in n&&zv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),eu&&pu(eu,n)||(eu=n,n=gd(ag,"onSelect"),0<n.length&&(t=new Fv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fa)))}function oh(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var pa={animationend:oh("Animation","AnimationEnd"),animationiteration:oh("Animation","AnimationIteration"),animationstart:oh("Animation","AnimationStart"),transitionend:oh("Transition","TransitionEnd")},ap={},L2={};$i&&(L2=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function qd(e){if(ap[e])return ap[e];if(!pa[e])return e;var t=pa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in L2)return ap[e]=t[r];return e}var D2=qd("animationend"),O2=qd("animationiteration"),F2=qd("animationstart"),U2=qd("transitionend"),H2=new Map,Wy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(e,t){H2.set(e,t),Mo(t,[e])}for(var lp=0;lp<Wy.length;lp++){var up=Wy[lp],r4=up.toLowerCase(),n4=up[0].toUpperCase()+up.slice(1);zs(r4,"on"+n4)}zs(D2,"onAnimationEnd");zs(O2,"onAnimationIteration");zs(F2,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(U2,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i4=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function jy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,rA(n,t,void 0,e),e.currentTarget=null}function z2(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],h=a.instance,d=a.currentTarget;if(a=a.listener,h!==s&&i.isPropagationStopped())break e;jy(i,a,d),s=h}else for(o=0;o<n.length;o++){if(a=n[o],h=a.instance,d=a.currentTarget,a=a.listener,h!==s&&i.isPropagationStopped())break e;jy(i,a,d),s=h}}}if(hd)throw e=ng,hd=!1,ng=null,e}function at(e,t){var r=t[fg];r===void 0&&(r=t[fg]=new Set);var n=e+"__bubble";r.has(n)||(G2(t,e,2,!1),r.add(n))}function cp(e,t,r){var n=0;t&&(n|=4),G2(r,e,n,t)}var ah="_reactListening"+Math.random().toString(36).slice(2);function mu(e){if(!e[ah]){e[ah]=!0,Kw.forEach(function(r){r!=="selectionchange"&&(i4.has(r)||cp(r,!1,e),cp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ah]||(t[ah]=!0,cp("selectionchange",!1,t))}}function G2(e,t,r,n){switch(T2(t)){case 1:var i=xA;break;case 4:i=yA;break;default:i=Dv}r=i.bind(null,t,r,e),i=void 0,!rg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function hp(e,t,r,n,i){var s=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vo(a),o===null)return;if(h=o.tag,h===5||h===6){n=s=o;continue e}a=a.parentNode}}n=n.return}h2(function(){var d=s,p=Mv(r),c=[];e:{var f=H2.get(e);if(f!==void 0){var m=Fv,v=e;switch(e){case"keypress":if(Yh(r)===0)break e;case"keydown":case"keyup":m=BA;break;case"focusin":v="focus",m=ip;break;case"focusout":v="blur",m=ip;break;case"beforeblur":case"afterblur":m=ip;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=My;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=OA;break;case D2:case O2:case F2:m=TA;break;case U2:m=UA;break;case"scroll":m=_A;break;case"wheel":m=zA;break;case"copy":case"cut":case"paste":m=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=By}var y=(t&4)!==0,E=!y&&e==="scroll",x=y?f!==null?f+"Capture":null:f;y=[];for(var _=d,w;_!==null;){w=_;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,x!==null&&(T=uu(_,x),T!=null&&y.push(gu(_,T,w)))),E)break;_=_.return}0<y.length&&(f=new m(f,v,null,r,p),c.push({event:f,listeners:y}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==eg&&(v=r.relatedTarget||r.fromElement)&&(vo(v)||v[Vi]))break e;if((m||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=d,v=v?vo(v):null,v!==null&&(E=No(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(y=My,T="onMouseLeave",x="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(y=By,T="onPointerLeave",x="onPointerEnter",_="pointer"),E=m==null?f:ma(m),w=v==null?f:ma(v),f=new y(T,_+"leave",m,r,p),f.target=E,f.relatedTarget=w,T=null,vo(p)===d&&(y=new y(x,_+"enter",v,r,p),y.target=w,y.relatedTarget=E,T=y),E=T,m&&v)t:{for(y=m,x=v,_=0,w=y;w;w=ea(w))_++;for(w=0,T=x;T;T=ea(T))w++;for(;0<_-w;)y=ea(y),_--;for(;0<w-_;)x=ea(x),w--;for(;_--;){if(y===x||x!==null&&y===x.alternate)break t;y=ea(y),x=ea(x)}y=null}else y=null;m!==null&&$y(c,f,m,y,!1),v!==null&&E!==null&&$y(c,E,v,y,!0)}}e:{if(f=d?ma(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=YA;else if(Oy(f))if(R2)P=ZA;else{P=QA;var I=KA}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=qA);if(P&&(P=P(e,d))){I2(c,P,r,p);break e}I&&I(e,f,d),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Km(f,"number",f.value)}switch(I=d?ma(d):window,e){case"focusin":(Oy(I)||I.contentEditable==="true")&&(fa=I,ag=d,eu=null);break;case"focusout":eu=ag=fa=null;break;case"mousedown":lg=!0;break;case"contextmenu":case"mouseup":case"dragend":lg=!1,Gy(c,r,p);break;case"selectionchange":if(t4)break;case"keydown":case"keyup":Gy(c,r,p)}var R;if(Hv)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else da?k2(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(A2&&r.locale!=="ko"&&(da||M!=="onCompositionStart"?M==="onCompositionEnd"&&da&&(R=C2()):(bs=p,Ov="value"in bs?bs.value:bs.textContent,da=!0)),I=gd(d,M),0<I.length&&(M=new Ny(M,e,null,r,p),c.push({event:M,listeners:I}),R?M.data=R:(R=P2(r),R!==null&&(M.data=R)))),(R=WA?jA(e,r):$A(e,r))&&(d=gd(d,"onBeforeInput"),0<d.length&&(p=new Ny("onBeforeInput","beforeinput",null,r,p),c.push({event:p,listeners:d}),p.data=R))}z2(c,t)})}function gu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gd(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=uu(e,r),s!=null&&n.unshift(gu(e,s,i)),s=uu(e,t),s!=null&&n.push(gu(e,s,i))),e=e.return}return n}function ea(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $y(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,h=a.alternate,d=a.stateNode;if(h!==null&&h===n)break;a.tag===5&&d!==null&&(a=d,i?(h=uu(r,s),h!=null&&o.unshift(gu(r,h,a))):i||(h=uu(r,s),h!=null&&o.push(gu(r,h,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var s4=/\r\n?/g,o4=/\u0000|\uFFFD/g;function Vy(e){return(typeof e=="string"?e:""+e).replace(s4,`
`).replace(o4,"")}function lh(e,t,r){if(t=Vy(t),Vy(e)!==t&&r)throw Error(ae(425))}function vd(){}var ug=null,cg=null;function hg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,a4=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,l4=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(e){return Xy.resolve(null).then(e).catch(u4)}:dg;function u4(e){setTimeout(function(){throw e})}function dp(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),du(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);du(t)}function As(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yy(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ka=Math.random().toString(36).slice(2),fi="__reactFiber$"+Ka,vu="__reactProps$"+Ka,Vi="__reactContainer$"+Ka,fg="__reactEvents$"+Ka,c4="__reactListeners$"+Ka,h4="__reactHandles$"+Ka;function vo(e){var t=e[fi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Vi]||r[fi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Yy(e);e!==null;){if(r=e[fi])return r;e=Yy(e)}return t}e=r,r=e.parentNode}return null}function Uu(e){return e=e[fi]||e[Vi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ma(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function Zd(e){return e[vu]||null}var pg=[],ga=-1;function Gs(e){return{current:e}}function lt(e){0>ga||(e.current=pg[ga],pg[ga]=null,ga--)}function ot(e,t){ga++,pg[ga]=e.current,e.current=t}var Ls={},fr=Gs(Ls),Ir=Gs(!1),To=Ls;function Fa(e,t){var r=e.type.contextTypes;if(!r)return Ls;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rr(e){return e=e.childContextTypes,e!=null}function xd(){lt(Ir),lt(fr)}function Ky(e,t,r){if(fr.current!==Ls)throw Error(ae(168));ot(fr,t),ot(Ir,r)}function W2(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ae(108,KC(e)||"Unknown",i));return bt({},r,n)}function yd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,To=fr.current,ot(fr,e),ot(Ir,Ir.current),!0}function Qy(e,t,r){var n=e.stateNode;if(!n)throw Error(ae(169));r?(e=W2(e,t,To),n.__reactInternalMemoizedMergedChildContext=e,lt(Ir),lt(fr),ot(fr,e)):lt(Ir),ot(Ir,r)}var Li=null,Jd=!1,fp=!1;function j2(e){Li===null?Li=[e]:Li.push(e)}function d4(e){Jd=!0,j2(e)}function Ws(){if(!fp&&Li!==null){fp=!0;var e=0,t=tt;try{var r=Li;for(tt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Li=null,Jd=!1}catch(i){throw Li!==null&&(Li=Li.slice(e+1)),m2(Nv,Ws),i}finally{tt=t,fp=!1}}return null}var va=[],xa=0,_d=null,bd=0,ln=[],un=0,Co=null,Oi=1,Fi="";function ao(e,t){va[xa++]=bd,va[xa++]=_d,_d=e,bd=t}function $2(e,t,r){ln[un++]=Oi,ln[un++]=Fi,ln[un++]=Co,Co=e;var n=Oi;e=Fi;var i=32-Un(n)-1;n&=~(1<<i),r+=1;var s=32-Un(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Oi=1<<32-Un(t)+i|r<<i|n,Fi=s+e}else Oi=1<<s|r<<i|n,Fi=e}function Gv(e){e.return!==null&&(ao(e,1),$2(e,1,0))}function Wv(e){for(;e===_d;)_d=va[--xa],va[xa]=null,bd=va[--xa],va[xa]=null;for(;e===Co;)Co=ln[--un],ln[un]=null,Fi=ln[--un],ln[un]=null,Oi=ln[--un],ln[un]=null}var $r=null,Wr=null,dt=!1,Nn=null;function V2(e,t){var r=cn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function qy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$r=e,Wr=As(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$r=e,Wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Co!==null?{id:Oi,overflow:Fi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=cn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$r=e,Wr=null,!0):!1;default:return!1}}function mg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gg(e){if(dt){var t=Wr;if(t){var r=t;if(!qy(e,t)){if(mg(e))throw Error(ae(418));t=As(r.nextSibling);var n=$r;t&&qy(e,t)?V2(n,r):(e.flags=e.flags&-4097|2,dt=!1,$r=e)}}else{if(mg(e))throw Error(ae(418));e.flags=e.flags&-4097|2,dt=!1,$r=e}}}function Zy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$r=e}function uh(e){if(e!==$r)return!1;if(!dt)return Zy(e),dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hg(e.type,e.memoizedProps)),t&&(t=Wr)){if(mg(e))throw X2(),Error(ae(418));for(;t;)V2(e,t),t=As(t.nextSibling)}if(Zy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Wr=As(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Wr=null}}else Wr=$r?As(e.stateNode.nextSibling):null;return!0}function X2(){for(var e=Wr;e;)e=As(e.nextSibling)}function Ua(){Wr=$r=null,dt=!1}function jv(e){Nn===null?Nn=[e]:Nn.push(e)}var f4=Qi.ReactCurrentBatchConfig;function In(e,t){if(e&&e.defaultProps){t=bt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var wd=Gs(null),Sd=null,ya=null,$v=null;function Vv(){$v=ya=Sd=null}function Xv(e){var t=wd.current;lt(wd),e._currentValue=t}function vg(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Pa(e,t){Sd=e,$v=ya=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Pr=!0),e.firstContext=null)}function pn(e){var t=e._currentValue;if($v!==e)if(e={context:e,memoizedValue:t,next:null},ya===null){if(Sd===null)throw Error(ae(308));ya=e,Sd.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var xo=null;function Yv(e){xo===null?xo=[e]:xo.push(e)}function Y2(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Yv(t)):(r.next=i.next,i.next=r),t.interleaved=r,Xi(e,n)}function Xi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vs=!1;function Kv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ks(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ve&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Xi(e,r)}return i=n.interleaved,i===null?(t.next=t,Yv(n)):(t.next=i.next,i.next=t),n.interleaved=t,Xi(e,r)}function Kh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Bv(e,r)}}function Jy(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ed(e,t,r,n){var i=e.updateQueue;vs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var h=a,d=h.next;h.next=null,o===null?s=d:o.next=d,o=h;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=h))}if(s!==null){var c=i.baseState;o=0,p=d=h=null,a=s;do{var f=a.lane,m=a.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,y=a;switch(f=t,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){c=v.call(m,c,f);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,c,f):v,f==null)break e;c=bt({},c,f);break e;case 2:vs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=m,h=c):p=p.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(p===null&&(h=c),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ko|=o,e.lanes=o,e.memoizedState=c}}function e_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ae(191,i));i.call(n)}}}var Q2=new Yw.Component().refs;function xg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:bt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ef={isMounted:function(e){return(e=e._reactInternals)?No(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xr(),i=Is(e),s=Gi(n,i);s.payload=t,r!=null&&(s.callback=r),t=ks(e,s,i),t!==null&&(Hn(t,e,i,n),Kh(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xr(),i=Is(e),s=Gi(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=ks(e,s,i),t!==null&&(Hn(t,e,i,n),Kh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xr(),n=Is(e),i=Gi(r,n);i.tag=2,t!=null&&(i.callback=t),t=ks(e,i,n),t!==null&&(Hn(t,e,n,r),Kh(t,e,n))}};function t_(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!pu(r,n)||!pu(i,s):!0}function q2(e,t,r){var n=!1,i=Ls,s=t.contextType;return typeof s=="object"&&s!==null?s=pn(s):(i=Rr(t)?To:fr.current,n=t.contextTypes,s=(n=n!=null)?Fa(e,i):Ls),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ef,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function r_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ef.enqueueReplaceState(t,t.state,null)}function yg(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Q2,Kv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=pn(s):(s=Rr(t)?To:fr.current,i.context=Fa(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(xg(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ef.enqueueReplaceState(i,i.state,null),Ed(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Cl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===Q2&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,e))}return e}function ch(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function n_(e){var t=e._init;return t(e._payload)}function Z2(e){function t(x,_){if(e){var w=x.deletions;w===null?(x.deletions=[_],x.flags|=16):w.push(_)}}function r(x,_){if(!e)return null;for(;_!==null;)t(x,_),_=_.sibling;return null}function n(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=Rs(x,_),x.index=0,x.sibling=null,x}function s(x,_,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<_?(x.flags|=2,_):w):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,_,w,T){return _===null||_.tag!==6?(_=_p(w,x.mode,T),_.return=x,_):(_=i(_,w),_.return=x,_)}function h(x,_,w,T){var P=w.type;return P===ha?p(x,_,w.props.children,T,w.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gs&&n_(P)===_.type)?(T=i(_,w.props),T.ref=Cl(x,_,w),T.return=x,T):(T=td(w.type,w.key,w.props,null,x.mode,T),T.ref=Cl(x,_,w),T.return=x,T)}function d(x,_,w,T){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=bp(w,x.mode,T),_.return=x,_):(_=i(_,w.children||[]),_.return=x,_)}function p(x,_,w,T,P){return _===null||_.tag!==7?(_=wo(w,x.mode,T,P),_.return=x,_):(_=i(_,w),_.return=x,_)}function c(x,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=_p(""+_,x.mode,w),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Jc:return w=td(_.type,_.key,_.props,null,x.mode,w),w.ref=Cl(x,null,_),w.return=x,w;case ca:return _=bp(_,x.mode,w),_.return=x,_;case gs:var T=_._init;return c(x,T(_._payload),w)}if(Ul(_)||bl(_))return _=wo(_,x.mode,w,null),_.return=x,_;ch(x,_)}return null}function f(x,_,w,T){var P=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(x,_,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Jc:return w.key===P?h(x,_,w,T):null;case ca:return w.key===P?d(x,_,w,T):null;case gs:return P=w._init,f(x,_,P(w._payload),T)}if(Ul(w)||bl(w))return P!==null?null:p(x,_,w,T,null);ch(x,w)}return null}function m(x,_,w,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(w)||null,a(_,x,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Jc:return x=x.get(T.key===null?w:T.key)||null,h(_,x,T,P);case ca:return x=x.get(T.key===null?w:T.key)||null,d(_,x,T,P);case gs:var I=T._init;return m(x,_,w,I(T._payload),P)}if(Ul(T)||bl(T))return x=x.get(w)||null,p(_,x,T,P,null);ch(_,T)}return null}function v(x,_,w,T){for(var P=null,I=null,R=_,M=_=0,N=null;R!==null&&M<w.length;M++){R.index>M?(N=R,R=null):N=R.sibling;var k=f(x,R,w[M],T);if(k===null){R===null&&(R=N);break}e&&R&&k.alternate===null&&t(x,R),_=s(k,_,M),I===null?P=k:I.sibling=k,I=k,R=N}if(M===w.length)return r(x,R),dt&&ao(x,M),P;if(R===null){for(;M<w.length;M++)R=c(x,w[M],T),R!==null&&(_=s(R,_,M),I===null?P=R:I.sibling=R,I=R);return dt&&ao(x,M),P}for(R=n(x,R);M<w.length;M++)N=m(R,x,M,w[M],T),N!==null&&(e&&N.alternate!==null&&R.delete(N.key===null?M:N.key),_=s(N,_,M),I===null?P=N:I.sibling=N,I=N);return e&&R.forEach(function(L){return t(x,L)}),dt&&ao(x,M),P}function y(x,_,w,T){var P=bl(w);if(typeof P!="function")throw Error(ae(150));if(w=P.call(w),w==null)throw Error(ae(151));for(var I=P=null,R=_,M=_=0,N=null,k=w.next();R!==null&&!k.done;M++,k=w.next()){R.index>M?(N=R,R=null):N=R.sibling;var L=f(x,R,k.value,T);if(L===null){R===null&&(R=N);break}e&&R&&L.alternate===null&&t(x,R),_=s(L,_,M),I===null?P=L:I.sibling=L,I=L,R=N}if(k.done)return r(x,R),dt&&ao(x,M),P;if(R===null){for(;!k.done;M++,k=w.next())k=c(x,k.value,T),k!==null&&(_=s(k,_,M),I===null?P=k:I.sibling=k,I=k);return dt&&ao(x,M),P}for(R=n(x,R);!k.done;M++,k=w.next())k=m(R,x,M,k.value,T),k!==null&&(e&&k.alternate!==null&&R.delete(k.key===null?M:k.key),_=s(k,_,M),I===null?P=k:I.sibling=k,I=k);return e&&R.forEach(function(W){return t(x,W)}),dt&&ao(x,M),P}function E(x,_,w,T){if(typeof w=="object"&&w!==null&&w.type===ha&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Jc:e:{for(var P=w.key,I=_;I!==null;){if(I.key===P){if(P=w.type,P===ha){if(I.tag===7){r(x,I.sibling),_=i(I,w.props.children),_.return=x,x=_;break e}}else if(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===gs&&n_(P)===I.type){r(x,I.sibling),_=i(I,w.props),_.ref=Cl(x,I,w),_.return=x,x=_;break e}r(x,I);break}else t(x,I);I=I.sibling}w.type===ha?(_=wo(w.props.children,x.mode,T,w.key),_.return=x,x=_):(T=td(w.type,w.key,w.props,null,x.mode,T),T.ref=Cl(x,_,w),T.return=x,x=T)}return o(x);case ca:e:{for(I=w.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){r(x,_.sibling),_=i(_,w.children||[]),_.return=x,x=_;break e}else{r(x,_);break}else t(x,_);_=_.sibling}_=bp(w,x.mode,T),_.return=x,x=_}return o(x);case gs:return I=w._init,E(x,_,I(w._payload),T)}if(Ul(w))return v(x,_,w,T);if(bl(w))return y(x,_,w,T);ch(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(r(x,_.sibling),_=i(_,w),_.return=x,x=_):(r(x,_),_=_p(w,x.mode,T),_.return=x,x=_),o(x)):r(x,_)}return E}var Ha=Z2(!0),J2=Z2(!1),Hu={},mi=Gs(Hu),xu=Gs(Hu),yu=Gs(Hu);function yo(e){if(e===Hu)throw Error(ae(174));return e}function Qv(e,t){switch(ot(yu,t),ot(xu,e),ot(mi,Hu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qm(t,e)}lt(mi),ot(mi,t)}function za(){lt(mi),lt(xu),lt(yu)}function eS(e){yo(yu.current);var t=yo(mi.current),r=qm(t,e.type);t!==r&&(ot(xu,e),ot(mi,r))}function qv(e){xu.current===e&&(lt(mi),lt(xu))}var xt=Gs(0);function Td(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pp=[];function Zv(){for(var e=0;e<pp.length;e++)pp[e]._workInProgressVersionPrimary=null;pp.length=0}var Qh=Qi.ReactCurrentDispatcher,mp=Qi.ReactCurrentBatchConfig,Ao=0,_t=null,Dt=null,Gt=null,Cd=!1,tu=!1,_u=0,p4=0;function ar(){throw Error(ae(321))}function Jv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$n(e[r],t[r]))return!1;return!0}function e1(e,t,r,n,i,s){if(Ao=s,_t=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qh.current=e===null||e.memoizedState===null?x4:y4,e=r(n,i),tu){s=0;do{if(tu=!1,_u=0,25<=s)throw Error(ae(301));s+=1,Gt=Dt=null,t.updateQueue=null,Qh.current=_4,e=r(n,i)}while(tu)}if(Qh.current=Ad,t=Dt!==null&&Dt.next!==null,Ao=0,Gt=Dt=_t=null,Cd=!1,t)throw Error(ae(300));return e}function t1(){var e=_u!==0;return _u=0,e}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?_t.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function mn(){if(Dt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=Gt===null?_t.memoizedState:Gt.next;if(t!==null)Gt=t,Dt=e;else{if(e===null)throw Error(ae(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Gt===null?_t.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function bu(e,t){return typeof t=="function"?t(e):t}function gp(e){var t=mn(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=Dt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,h=null,d=s;do{var p=d.lane;if((Ao&p)===p)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var c={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(a=h=c,o=n):h=h.next=c,_t.lanes|=p,ko|=p}d=d.next}while(d!==null&&d!==s);h===null?o=n:h.next=a,$n(n,t.memoizedState)||(Pr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=h,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,_t.lanes|=s,ko|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function vp(e){var t=mn(),r=t.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);$n(s,t.memoizedState)||(Pr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function tS(){}function rS(e,t){var r=_t,n=mn(),i=t(),s=!$n(n.memoizedState,i);if(s&&(n.memoizedState=i,Pr=!0),n=n.queue,r1(sS.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,wu(9,iS.bind(null,r,n,i,t),void 0,null),jt===null)throw Error(ae(349));(Ao&30)!==0||nS(r,t,i)}return i}function nS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function iS(e,t,r,n){t.value=r,t.getSnapshot=n,oS(t)&&aS(e)}function sS(e,t,r){return r(function(){oS(t)&&aS(e)})}function oS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$n(e,r)}catch{return!0}}function aS(e){var t=Xi(e,1);t!==null&&Hn(t,e,1,-1)}function i_(e){var t=ci();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:e},t.queue=e,e=e.dispatch=v4.bind(null,_t,e),[t.memoizedState,e]}function wu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function lS(){return mn().memoizedState}function qh(e,t,r,n){var i=ci();_t.flags|=e,i.memoizedState=wu(1|t,r,void 0,n===void 0?null:n)}function tf(e,t,r,n){var i=mn();n=n===void 0?null:n;var s=void 0;if(Dt!==null){var o=Dt.memoizedState;if(s=o.destroy,n!==null&&Jv(n,o.deps)){i.memoizedState=wu(t,r,s,n);return}}_t.flags|=e,i.memoizedState=wu(1|t,r,s,n)}function s_(e,t){return qh(8390656,8,e,t)}function r1(e,t){return tf(2048,8,e,t)}function uS(e,t){return tf(4,2,e,t)}function cS(e,t){return tf(4,4,e,t)}function hS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dS(e,t,r){return r=r!=null?r.concat([e]):null,tf(4,4,hS.bind(null,t,e),r)}function n1(){}function fS(e,t){var r=mn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function pS(e,t){var r=mn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Jv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function mS(e,t,r){return(Ao&21)===0?(e.baseState&&(e.baseState=!1,Pr=!0),e.memoizedState=r):($n(r,t)||(r=x2(),_t.lanes|=r,ko|=r,e.baseState=!0),t)}function m4(e,t){var r=tt;tt=r!==0&&4>r?r:4,e(!0);var n=mp.transition;mp.transition={};try{e(!1),t()}finally{tt=r,mp.transition=n}}function gS(){return mn().memoizedState}function g4(e,t,r){var n=Is(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},vS(e))xS(t,r);else if(r=Y2(e,t,r,n),r!==null){var i=xr();Hn(r,e,n,i),yS(r,t,n)}}function v4(e,t,r){var n=Is(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(vS(e))xS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,$n(a,o)){var h=t.interleaved;h===null?(i.next=i,Yv(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}r=Y2(e,t,i,n),r!==null&&(i=xr(),Hn(r,e,n,i),yS(r,t,n))}}function vS(e){var t=e.alternate;return e===_t||t!==null&&t===_t}function xS(e,t){tu=Cd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function yS(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Bv(e,r)}}var Ad={readContext:pn,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},x4={readContext:pn,useCallback:function(e,t){return ci().memoizedState=[e,t===void 0?null:t],e},useContext:pn,useEffect:s_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qh(4194308,4,hS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qh(4194308,4,e,t)},useInsertionEffect:function(e,t){return qh(4,2,e,t)},useMemo:function(e,t){var r=ci();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ci();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=g4.bind(null,_t,e),[n.memoizedState,e]},useRef:function(e){var t=ci();return e={current:e},t.memoizedState=e},useState:i_,useDebugValue:n1,useDeferredValue:function(e){return ci().memoizedState=e},useTransition:function(){var e=i_(!1),t=e[0];return e=m4.bind(null,e[1]),ci().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_t,i=ci();if(dt){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=t(),jt===null)throw Error(ae(349));(Ao&30)!==0||nS(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,s_(sS.bind(null,n,s,e),[e]),n.flags|=2048,wu(9,iS.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=ci(),t=jt.identifierPrefix;if(dt){var r=Fi,n=Oi;r=(n&~(1<<32-Un(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=_u++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=p4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},y4={readContext:pn,useCallback:fS,useContext:pn,useEffect:r1,useImperativeHandle:dS,useInsertionEffect:uS,useLayoutEffect:cS,useMemo:pS,useReducer:gp,useRef:lS,useState:function(){return gp(bu)},useDebugValue:n1,useDeferredValue:function(e){var t=mn();return mS(t,Dt.memoizedState,e)},useTransition:function(){var e=gp(bu)[0],t=mn().memoizedState;return[e,t]},useMutableSource:tS,useSyncExternalStore:rS,useId:gS,unstable_isNewReconciler:!1},_4={readContext:pn,useCallback:fS,useContext:pn,useEffect:r1,useImperativeHandle:dS,useInsertionEffect:uS,useLayoutEffect:cS,useMemo:pS,useReducer:vp,useRef:lS,useState:function(){return vp(bu)},useDebugValue:n1,useDeferredValue:function(e){var t=mn();return Dt===null?t.memoizedState=e:mS(t,Dt.memoizedState,e)},useTransition:function(){var e=vp(bu)[0],t=mn().memoizedState;return[e,t]},useMutableSource:tS,useSyncExternalStore:rS,useId:gS,unstable_isNewReconciler:!1};function Ga(e,t){try{var r="",n=t;do r+=YC(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function xp(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _g(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var b4=typeof WeakMap=="function"?WeakMap:Map;function _S(e,t,r){r=Gi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Pd||(Pd=!0,Ig=n),_g(e,t)},r}function bS(e,t,r){r=Gi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){_g(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){_g(e,t),typeof n!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function o_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new b4;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=L4.bind(null,e,t,r),t.then(e,e))}function a_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function l_(e,t,r,n,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gi(-1,1),t.tag=2,ks(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var w4=Qi.ReactCurrentOwner,Pr=!1;function vr(e,t,r,n){t.child=e===null?J2(t,null,r,n):Ha(t,e.child,r,n)}function u_(e,t,r,n,i){r=r.render;var s=t.ref;return Pa(t,i),n=e1(e,t,r,n,s,i),r=t1(),e!==null&&!Pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Yi(e,t,i)):(dt&&r&&Gv(t),t.flags|=1,vr(e,t,n,i),t.child)}function c_(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!h1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,wS(e,t,s,n,i)):(e=td(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&i)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:pu,r(o,n)&&e.ref===t.ref)return Yi(e,t,i)}return t.flags|=1,e=Rs(s,n),e.ref=t.ref,e.return=t,t.child=e}function wS(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(pu(s,n)&&e.ref===t.ref)if(Pr=!1,t.pendingProps=n=s,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Pr=!0);else return t.lanes=e.lanes,Yi(e,t,i)}return bg(e,t,r,n,i)}function SS(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(ba,Gr),Gr|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ot(ba,Gr),Gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ot(ba,Gr),Gr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,ot(ba,Gr),Gr|=n;return vr(e,t,i,r),t.child}function ES(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function bg(e,t,r,n,i){var s=Rr(r)?To:fr.current;return s=Fa(t,s),Pa(t,i),r=e1(e,t,r,n,s,i),n=t1(),e!==null&&!Pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Yi(e,t,i)):(dt&&n&&Gv(t),t.flags|=1,vr(e,t,r,i),t.child)}function h_(e,t,r,n,i){if(Rr(r)){var s=!0;yd(t)}else s=!1;if(Pa(t,i),t.stateNode===null)Zh(e,t),q2(t,r,n),yg(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var h=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=pn(d):(d=Rr(r)?To:fr.current,d=Fa(t,d));var p=r.getDerivedStateFromProps,c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||h!==d)&&r_(t,o,n,d),vs=!1;var f=t.memoizedState;o.state=f,Ed(t,n,o,i),h=t.memoizedState,a!==n||f!==h||Ir.current||vs?(typeof p=="function"&&(xg(t,r,p,n),h=t.memoizedState),(a=vs||t_(t,r,a,n,f,h,d))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=d,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,K2(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:In(t.type,a),o.props=d,c=t.pendingProps,f=o.context,h=r.contextType,typeof h=="object"&&h!==null?h=pn(h):(h=Rr(r)?To:fr.current,h=Fa(t,h));var m=r.getDerivedStateFromProps;(p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==h)&&r_(t,o,n,h),vs=!1,f=t.memoizedState,o.state=f,Ed(t,n,o,i);var v=t.memoizedState;a!==c||f!==v||Ir.current||vs?(typeof m=="function"&&(xg(t,r,m,n),v=t.memoizedState),(d=vs||t_(t,r,d,n,f,v,h)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,h)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=h,n=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return wg(e,t,r,n,s,i)}function wg(e,t,r,n,i,s){ES(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&Qy(t,r,!1),Yi(e,t,s);n=t.stateNode,w4.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ha(t,e.child,null,s),t.child=Ha(t,null,a,s)):vr(e,t,a,s),t.memoizedState=n.state,i&&Qy(t,r,!0),t.child}function TS(e){var t=e.stateNode;t.pendingContext?Ky(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ky(e,t.context,!1),Qv(e,t.containerInfo)}function d_(e,t,r,n,i){return Ua(),jv(i),t.flags|=256,vr(e,t,r,n),t.child}var Sg={dehydrated:null,treeContext:null,retryLane:0};function Eg(e){return{baseLanes:e,cachePool:null,transitions:null}}function CS(e,t,r){var n=t.pendingProps,i=xt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ot(xt,i&1),e===null)return gg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=sf(o,n,0,null),e=wo(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Eg(r),t.memoizedState=Sg,e):i1(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return S4(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var h={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=h,t.deletions=null):(n=Rs(i,h),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rs(a,s):(s=wo(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Eg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Sg,n}return s=e.child,e=s.sibling,n=Rs(s,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function i1(e,t){return t=sf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hh(e,t,r,n){return n!==null&&jv(n),Ha(t,e.child,null,r),e=i1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function S4(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=xp(Error(ae(422))),hh(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=sf({mode:"visible",children:n.children},i,0,null),s=wo(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,(t.mode&1)!==0&&Ha(t,e.child,null,o),t.child.memoizedState=Eg(o),t.memoizedState=Sg,s);if((t.mode&1)===0)return hh(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(ae(419)),n=xp(s,n,void 0),hh(e,t,o,n)}if(a=(o&e.childLanes)!==0,Pr||a){if(n=jt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Xi(e,i),Hn(n,e,i,-1))}return c1(),n=xp(Error(ae(421))),hh(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=D4.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Wr=As(i.nextSibling),$r=t,dt=!0,Nn=null,e!==null&&(ln[un++]=Oi,ln[un++]=Fi,ln[un++]=Co,Oi=e.id,Fi=e.overflow,Co=t),t=i1(t,n.children),t.flags|=4096,t)}function f_(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),vg(e.return,t,r)}function yp(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function AS(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(vr(e,t,n.children,r),n=xt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&f_(e,r,t);else if(e.tag===19)f_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ot(xt,n),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Td(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),yp(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Td(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}yp(t,!0,r,null,s);break;case"together":yp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zh(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ko|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,r=Rs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Rs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function E4(e,t,r){switch(t.tag){case 3:TS(t),Ua();break;case 5:eS(t);break;case 1:Rr(t.type)&&yd(t);break;case 4:Qv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;ot(wd,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ot(xt,xt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?CS(e,t,r):(ot(xt,xt.current&1),e=Yi(e,t,r),e!==null?e.sibling:null);ot(xt,xt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return AS(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ot(xt,xt.current),n)break;return null;case 22:case 23:return t.lanes=0,SS(e,t,r)}return Yi(e,t,r)}var kS,Tg,PS,IS;kS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Tg=function(){};PS=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,yo(mi.current);var s=null;switch(r){case"input":i=Xm(e,i),n=Xm(e,n),s=[];break;case"select":i=bt({},i,{value:void 0}),n=bt({},n,{value:void 0}),s=[];break;case"textarea":i=Qm(e,i),n=Qm(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=vd)}Zm(r,n);var o;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(au.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var h=n[d];if(a=i?.[d],n.hasOwnProperty(d)&&h!==a&&(h!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in h)h.hasOwnProperty(o)&&a[o]!==h[o]&&(r||(r={}),r[o]=h[o])}else r||(s||(s=[]),s.push(d,r)),r=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,a=a?a.__html:void 0,h!=null&&a!==h&&(s=s||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(au.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&at("scroll",e),s||a===h||(s=[])):(s=s||[]).push(d,h))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};IS=function(e,t,r,n){r!==n&&(t.flags|=4)};function Al(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function T4(e,t,r){var n=t.pendingProps;switch(Wv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return Rr(t.type)&&xd(),lr(t),null;case 3:return n=t.stateNode,za(),lt(Ir),lt(fr),Zv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(uh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nn!==null&&(Ng(Nn),Nn=null))),Tg(e,t),lr(t),null;case 5:qv(t);var i=yo(yu.current);if(r=t.type,e!==null&&t.stateNode!=null)PS(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ae(166));return lr(t),null}if(e=yo(mi.current),uh(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[fi]=t,n[vu]=s,e=(t.mode&1)!==0,r){case"dialog":at("cancel",n),at("close",n);break;case"iframe":case"object":case"embed":at("load",n);break;case"video":case"audio":for(i=0;i<zl.length;i++)at(zl[i],n);break;case"source":at("error",n);break;case"img":case"image":case"link":at("error",n),at("load",n);break;case"details":at("toggle",n);break;case"input":wy(n,s),at("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},at("invalid",n);break;case"textarea":Ey(n,s),at("invalid",n)}Zm(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&lh(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lh(n.textContent,a,e),i=["children",""+a]):au.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&at("scroll",n)}switch(r){case"input":eh(n),Sy(n,s,!0);break;case"textarea":eh(n),Ty(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=vd)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=n2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[fi]=t,e[vu]=n,kS(e,t,!1,!1),t.stateNode=e;e:{switch(o=Jm(r,n),r){case"dialog":at("cancel",e),at("close",e),i=n;break;case"iframe":case"object":case"embed":at("load",e),i=n;break;case"video":case"audio":for(i=0;i<zl.length;i++)at(zl[i],e);i=n;break;case"source":at("error",e),i=n;break;case"img":case"image":case"link":at("error",e),at("load",e),i=n;break;case"details":at("toggle",e),i=n;break;case"input":wy(e,n),i=Xm(e,n),at("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=bt({},n,{value:void 0}),at("invalid",e);break;case"textarea":Ey(e,n),i=Qm(e,n),at("invalid",e);break;default:i=n}Zm(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var h=a[s];s==="style"?o2(e,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&i2(e,h)):s==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&lu(e,h):typeof h=="number"&&lu(e,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(au.hasOwnProperty(s)?h!=null&&s==="onScroll"&&at("scroll",e):h!=null&&kv(e,s,h,o))}switch(r){case"input":eh(e),Sy(e,n,!1);break;case"textarea":eh(e),Ty(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Ta(e,!!n.multiple,s,!1):n.defaultValue!=null&&Ta(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=vd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)IS(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ae(166));if(r=yo(yu.current),yo(mi.current),uh(t)){if(n=t.stateNode,r=t.memoizedProps,n[fi]=t,(s=n.nodeValue!==r)&&(e=$r,e!==null))switch(e.tag){case 3:lh(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lh(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[fi]=t,t.stateNode=n}return lr(t),null;case 13:if(lt(xt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&Wr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)X2(),Ua(),t.flags|=98560,s=!1;else if(s=uh(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(ae(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[fi]=t}else Ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;lr(t),s=!1}else Nn!==null&&(Ng(Nn),Nn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(xt.current&1)!==0?Ot===0&&(Ot=3):c1())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return za(),Tg(e,t),e===null&&mu(t.stateNode.containerInfo),lr(t),null;case 10:return Xv(t.type._context),lr(t),null;case 17:return Rr(t.type)&&xd(),lr(t),null;case 19:if(lt(xt),s=t.memoizedState,s===null)return lr(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)Al(s,!1);else{if(Ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Td(e),o!==null){for(t.flags|=128,Al(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ot(xt,xt.current&1|2),t.child}e=e.sibling}s.tail!==null&&kt()>Wa&&(t.flags|=128,n=!0,Al(s,!1),t.lanes=4194304)}else{if(!n)if(e=Td(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Al(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!dt)return lr(t),null}else 2*kt()-s.renderingStartTime>Wa&&r!==1073741824&&(t.flags|=128,n=!0,Al(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=kt(),t.sibling=null,r=xt.current,ot(xt,n?r&1|2:r&1),t):(lr(t),null);case 22:case 23:return u1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Gr&1073741824)!==0&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function C4(e,t){switch(Wv(t),t.tag){case 1:return Rr(t.type)&&xd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return za(),lt(Ir),lt(fr),Zv(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return qv(t),null;case 13:if(lt(xt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));Ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return lt(xt),null;case 4:return za(),null;case 10:return Xv(t.type._context),null;case 22:case 23:return u1(),null;case 24:return null;default:return null}}var dh=!1,cr=!1,A4=typeof WeakSet=="function"?WeakSet:Set,xe=null;function _a(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){St(e,t,n)}else r.current=null}function Cg(e,t,r){try{r()}catch(n){St(e,t,n)}}var p_=!1;function k4(e,t){if(ug=pd,e=B2(),zv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,h=-1,d=0,p=0,c=e,f=null;t:for(;;){for(var m;c!==r||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(h=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(m=c.firstChild)!==null;)f=c,c=m;for(;;){if(c===e)break t;if(f===r&&++d===i&&(a=o),f===s&&++p===n&&(h=o),(m=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=m}r=a===-1||h===-1?null:{start:a,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(cg={focusedElem:e,selectionRange:r},pd=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var v=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,E=v.memoizedState,x=t.stateNode,_=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:In(t.type,y),E);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(T){St(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return v=p_,p_=!1,v}function ru(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cg(t,r,s)}i=i.next}while(i!==n)}}function rf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ag(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function RS(e){var t=e.alternate;t!==null&&(e.alternate=null,RS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fi],delete t[vu],delete t[fg],delete t[c4],delete t[h4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function MS(e){return e.tag===5||e.tag===3||e.tag===4}function m_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||MS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=vd));else if(n!==4&&(e=e.child,e!==null))for(kg(e,t,r),e=e.sibling;e!==null;)kg(e,t,r),e=e.sibling}function Pg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Pg(e,t,r),e=e.sibling;e!==null;)Pg(e,t,r),e=e.sibling}var Kt=null,Mn=!1;function ds(e,t,r){for(r=r.child;r!==null;)NS(e,t,r),r=r.sibling}function NS(e,t,r){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(Yd,r)}catch{}switch(r.tag){case 5:cr||_a(r,t);case 6:var n=Kt,i=Mn;Kt=null,ds(e,t,r),Kt=n,Mn=i,Kt!==null&&(Mn?(e=Kt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Kt.removeChild(r.stateNode));break;case 18:Kt!==null&&(Mn?(e=Kt,r=r.stateNode,e.nodeType===8?dp(e.parentNode,r):e.nodeType===1&&dp(e,r),du(e)):dp(Kt,r.stateNode));break;case 4:n=Kt,i=Mn,Kt=r.stateNode.containerInfo,Mn=!0,ds(e,t,r),Kt=n,Mn=i;break;case 0:case 11:case 14:case 15:if(!cr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Cg(r,t,o),i=i.next}while(i!==n)}ds(e,t,r);break;case 1:if(!cr&&(_a(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){St(r,t,a)}ds(e,t,r);break;case 21:ds(e,t,r);break;case 22:r.mode&1?(cr=(n=cr)||r.memoizedState!==null,ds(e,t,r),cr=n):ds(e,t,r);break;default:ds(e,t,r)}}function g_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new A4),t.forEach(function(n){var i=O4.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Sn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,Mn=!1;break e;case 3:Kt=a.stateNode.containerInfo,Mn=!0;break e;case 4:Kt=a.stateNode.containerInfo,Mn=!0;break e}a=a.return}if(Kt===null)throw Error(ae(160));NS(s,o,i),Kt=null,Mn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(d){St(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BS(t,e),t=t.sibling}function BS(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sn(t,e),ai(e),n&4){try{ru(3,e,e.return),rf(3,e)}catch(y){St(e,e.return,y)}try{ru(5,e,e.return)}catch(y){St(e,e.return,y)}}break;case 1:Sn(t,e),ai(e),n&512&&r!==null&&_a(r,r.return);break;case 5:if(Sn(t,e),ai(e),n&512&&r!==null&&_a(r,r.return),e.flags&32){var i=e.stateNode;try{lu(i,"")}catch(y){St(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&t2(i,s),Jm(a,o);var d=Jm(a,s);for(o=0;o<h.length;o+=2){var p=h[o],c=h[o+1];p==="style"?o2(i,c):p==="dangerouslySetInnerHTML"?i2(i,c):p==="children"?lu(i,c):kv(i,p,c,d)}switch(a){case"input":Ym(i,s);break;case"textarea":r2(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ta(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ta(i,!!s.multiple,s.defaultValue,!0):Ta(i,!!s.multiple,s.multiple?[]:"",!1))}i[vu]=s}catch(y){St(e,e.return,y)}}break;case 6:if(Sn(t,e),ai(e),n&4){if(e.stateNode===null)throw Error(ae(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(y){St(e,e.return,y)}}break;case 3:if(Sn(t,e),ai(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{du(t.containerInfo)}catch(y){St(e,e.return,y)}break;case 4:Sn(t,e),ai(e);break;case 13:Sn(t,e),ai(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(a1=kt())),n&4&&g_(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(cr=(d=cr)||p,Sn(t,e),cr=d):Sn(t,e),ai(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&(e.mode&1)!==0)for(xe=e,p=e.child;p!==null;){for(c=xe=p;xe!==null;){switch(f=xe,m=f.child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:_a(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){St(n,r,y)}}break;case 5:_a(f,f.return);break;case 22:if(f.memoizedState!==null){x_(c);continue}}m!==null?(m.return=f,xe=m):x_(c)}p=p.sibling}e:for(p=null,c=e;;){if(c.tag===5){if(p===null){p=c;try{i=c.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,h=c.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,a.style.display=s2("display",o))}catch(y){St(e,e.return,y)}}}else if(c.tag===6){if(p===null)try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(y){St(e,e.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Sn(t,e),ai(e),n&4&&g_(e);break;case 21:break;default:Sn(t,e),ai(e)}}function ai(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(MS(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(lu(i,""),n.flags&=-33);var s=m_(e);Pg(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=m_(e);kg(e,a,o);break;default:throw Error(ae(161))}}catch(h){St(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function P4(e,t,r){xe=e,LS(e)}function LS(e,t,r){for(var n=(e.mode&1)!==0;xe!==null;){var i=xe,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||dh;if(!o){var a=i.alternate,h=a!==null&&a.memoizedState!==null||cr;a=dh;var d=cr;if(dh=o,(cr=h)&&!d)for(xe=i;xe!==null;)o=xe,h=o.child,o.tag===22&&o.memoizedState!==null?y_(i):h!==null?(h.return=o,xe=h):y_(i);for(;s!==null;)xe=s,LS(s),s=s.sibling;xe=i,dh=a,cr=d}v_(e)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,xe=s):v_(e)}}function v_(e){for(;xe!==null;){var t=xe;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:cr||rf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!cr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:In(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&e_(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}e_(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var c=p.dehydrated;c!==null&&du(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}cr||t.flags&512&&Ag(t)}catch(f){St(t,t.return,f)}}if(t===e){xe=null;break}if(r=t.sibling,r!==null){r.return=t.return,xe=r;break}xe=t.return}}function x_(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,xe=r;break}xe=t.return}}function y_(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{rf(4,t)}catch(h){St(t,r,h)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(h){St(t,i,h)}}var s=t.return;try{Ag(t)}catch(h){St(t,s,h)}break;case 5:var o=t.return;try{Ag(t)}catch(h){St(t,o,h)}}}catch(h){St(t,t.return,h)}if(t===e){xe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xe=a;break}xe=t.return}}var I4=Math.ceil,kd=Qi.ReactCurrentDispatcher,s1=Qi.ReactCurrentOwner,fn=Qi.ReactCurrentBatchConfig,Ve=0,jt=null,Nt=null,er=0,Gr=0,ba=Gs(0),Ot=0,Su=null,ko=0,nf=0,o1=0,nu=null,Ar=null,a1=0,Wa=1/0,Bi=null,Pd=!1,Ig=null,Ps=null,fh=!1,ws=null,Id=0,iu=0,Rg=null,Jh=-1,ed=0;function xr(){return(Ve&6)!==0?kt():Jh!==-1?Jh:Jh=kt()}function Is(e){return(e.mode&1)===0?1:(Ve&2)!==0&&er!==0?er&-er:f4.transition!==null?(ed===0&&(ed=x2()),ed):(e=tt,e!==0||(e=window.event,e=e===void 0?16:T2(e.type)),e)}function Hn(e,t,r,n){if(50<iu)throw iu=0,Rg=null,Error(ae(185));Ou(e,r,n),((Ve&2)===0||e!==jt)&&(e===jt&&((Ve&2)===0&&(nf|=r),Ot===4&&ys(e,er)),Mr(e,n),r===1&&Ve===0&&(t.mode&1)===0&&(Wa=kt()+500,Jd&&Ws()))}function Mr(e,t){var r=e.callbackNode;fA(e,t);var n=fd(e,e===jt?er:0);if(n===0)r!==null&&ky(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ky(r),t===1)e.tag===0?d4(__.bind(null,e)):j2(__.bind(null,e)),l4(function(){(Ve&6)===0&&Ws()}),r=null;else{switch(y2(n)){case 1:r=Nv;break;case 4:r=g2;break;case 16:r=dd;break;case 536870912:r=v2;break;default:r=dd}r=WS(r,DS.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function DS(e,t){if(Jh=-1,ed=0,(Ve&6)!==0)throw Error(ae(327));var r=e.callbackNode;if(Ia()&&e.callbackNode!==r)return null;var n=fd(e,e===jt?er:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Rd(e,n);else{t=n;var i=Ve;Ve|=2;var s=FS();(jt!==e||er!==t)&&(Bi=null,Wa=kt()+500,bo(e,t));do try{N4();break}catch(a){OS(e,a)}while(1);Vv(),kd.current=s,Ve=i,Nt!==null?t=0:(jt=null,er=0,t=Ot)}if(t!==0){if(t===2&&(i=ig(e),i!==0&&(n=i,t=Mg(e,i))),t===1)throw r=Su,bo(e,0),ys(e,n),Mr(e,kt()),r;if(t===6)ys(e,n);else{if(i=e.current.alternate,(n&30)===0&&!R4(i)&&(t=Rd(e,n),t===2&&(s=ig(e),s!==0&&(n=s,t=Mg(e,s))),t===1))throw r=Su,bo(e,0),ys(e,n),Mr(e,kt()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ae(345));case 2:lo(e,Ar,Bi);break;case 3:if(ys(e,n),(n&130023424)===n&&(t=a1+500-kt(),10<t)){if(fd(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){xr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=dg(lo.bind(null,e,Ar,Bi),t);break}lo(e,Ar,Bi);break;case 4:if(ys(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Un(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=kt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*I4(n/1960))-n,10<n){e.timeoutHandle=dg(lo.bind(null,e,Ar,Bi),n);break}lo(e,Ar,Bi);break;case 5:lo(e,Ar,Bi);break;default:throw Error(ae(329))}}}return Mr(e,kt()),e.callbackNode===r?DS.bind(null,e):null}function Mg(e,t){var r=nu;return e.current.memoizedState.isDehydrated&&(bo(e,t).flags|=256),e=Rd(e,t),e!==2&&(t=Ar,Ar=r,t!==null&&Ng(t)),e}function Ng(e){Ar===null?Ar=e:Ar.push.apply(Ar,e)}function R4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!$n(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ys(e,t){for(t&=~o1,t&=~nf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Un(t),n=1<<r;e[r]=-1,t&=~n}}function __(e){if((Ve&6)!==0)throw Error(ae(327));Ia();var t=fd(e,0);if((t&1)===0)return Mr(e,kt()),null;var r=Rd(e,t);if(e.tag!==0&&r===2){var n=ig(e);n!==0&&(t=n,r=Mg(e,n))}if(r===1)throw r=Su,bo(e,0),ys(e,t),Mr(e,kt()),r;if(r===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lo(e,Ar,Bi),Mr(e,kt()),null}function l1(e,t){var r=Ve;Ve|=1;try{return e(t)}finally{Ve=r,Ve===0&&(Wa=kt()+500,Jd&&Ws())}}function Po(e){ws!==null&&ws.tag===0&&(Ve&6)===0&&Ia();var t=Ve;Ve|=1;var r=fn.transition,n=tt;try{if(fn.transition=null,tt=1,e)return e()}finally{tt=n,fn.transition=r,Ve=t,(Ve&6)===0&&Ws()}}function u1(){Gr=ba.current,lt(ba)}function bo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,a4(r)),Nt!==null)for(r=Nt.return;r!==null;){var n=r;switch(Wv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xd();break;case 3:za(),lt(Ir),lt(fr),Zv();break;case 5:qv(n);break;case 4:za();break;case 13:lt(xt);break;case 19:lt(xt);break;case 10:Xv(n.type._context);break;case 22:case 23:u1()}r=r.return}if(jt=e,Nt=e=Rs(e.current,null),er=Gr=t,Ot=0,Su=null,o1=nf=ko=0,Ar=nu=null,xo!==null){for(t=0;t<xo.length;t++)if(r=xo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}xo=null}return e}function OS(e,t){do{var r=Nt;try{if(Vv(),Qh.current=Ad,Cd){for(var n=_t.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Cd=!1}if(Ao=0,Gt=Dt=_t=null,tu=!1,_u=0,s1.current=null,r===null||r.return===null){Ot=1,Su=t,Nt=null;break}e:{var s=e,o=r.return,a=r,h=t;if(t=er,a.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,p=a,c=p.tag;if((p.mode&1)===0&&(c===0||c===11||c===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var m=a_(o);if(m!==null){m.flags&=-257,l_(m,o,a,s,t),m.mode&1&&o_(s,d,t),t=m,h=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(h),t.updateQueue=y}else v.add(h);break e}else{if((t&1)===0){o_(s,d,t),c1();break e}h=Error(ae(426))}}else if(dt&&a.mode&1){var E=a_(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),l_(E,o,a,s,t),jv(Ga(h,a));break e}}s=h=Ga(h,a),Ot!==4&&(Ot=2),nu===null?nu=[s]:nu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=_S(s,h,t);Jy(s,x);break e;case 1:a=h;var _=s.type,w=s.stateNode;if((s.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ps===null||!Ps.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var T=bS(s,a,t);Jy(s,T);break e}}s=s.return}while(s!==null)}HS(r)}catch(P){t=P,Nt===r&&r!==null&&(Nt=r=r.return);continue}break}while(1)}function FS(){var e=kd.current;return kd.current=Ad,e===null?Ad:e}function c1(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),jt===null||(ko&268435455)===0&&(nf&268435455)===0||ys(jt,er)}function Rd(e,t){var r=Ve;Ve|=2;var n=FS();(jt!==e||er!==t)&&(Bi=null,bo(e,t));do try{M4();break}catch(i){OS(e,i)}while(1);if(Vv(),Ve=r,kd.current=n,Nt!==null)throw Error(ae(261));return jt=null,er=0,Ot}function M4(){for(;Nt!==null;)US(Nt)}function N4(){for(;Nt!==null&&!iA();)US(Nt)}function US(e){var t=GS(e.alternate,e,Gr);e.memoizedProps=e.pendingProps,t===null?HS(e):Nt=t,s1.current=null}function HS(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=T4(r,t,Gr),r!==null){Nt=r;return}}else{if(r=C4(r,t),r!==null){r.flags&=32767,Nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,Nt=null;return}}if(t=t.sibling,t!==null){Nt=t;return}Nt=t=e}while(t!==null);Ot===0&&(Ot=5)}function lo(e,t,r){var n=tt,i=fn.transition;try{fn.transition=null,tt=1,B4(e,t,r,n)}finally{fn.transition=i,tt=n}return null}function B4(e,t,r,n){do Ia();while(ws!==null);if((Ve&6)!==0)throw Error(ae(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(pA(e,s),e===jt&&(Nt=jt=null,er=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||fh||(fh=!0,WS(dd,function(){return Ia(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=fn.transition,fn.transition=null;var o=tt;tt=1;var a=Ve;Ve|=4,s1.current=null,k4(e,r),BS(r,e),e4(cg),pd=!!ug,cg=ug=null,e.current=r,P4(r),sA(),Ve=a,tt=o,fn.transition=s}else e.current=r;if(fh&&(fh=!1,ws=e,Id=i),s=e.pendingLanes,s===0&&(Ps=null),lA(r.stateNode),Mr(e,kt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Pd)throw Pd=!1,e=Ig,Ig=null,e;return(Id&1)!==0&&e.tag!==0&&Ia(),s=e.pendingLanes,(s&1)!==0?e===Rg?iu++:(iu=0,Rg=e):iu=0,Ws(),null}function Ia(){if(ws!==null){var e=y2(Id),t=fn.transition,r=tt;try{if(fn.transition=null,tt=16>e?16:e,ws===null)var n=!1;else{if(e=ws,ws=null,Id=0,(Ve&6)!==0)throw Error(ae(331));var i=Ve;for(Ve|=4,xe=e.current;xe!==null;){var s=xe,o=s.child;if((xe.flags&16)!==0){var a=s.deletions;if(a!==null){for(var h=0;h<a.length;h++){var d=a[h];for(xe=d;xe!==null;){var p=xe;switch(p.tag){case 0:case 11:case 15:ru(8,p,s)}var c=p.child;if(c!==null)c.return=p,xe=c;else for(;xe!==null;){p=xe;var f=p.sibling,m=p.return;if(RS(p),p===d){xe=null;break}if(f!==null){f.return=m,xe=f;break}xe=m}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}xe=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,xe=o;else e:for(;xe!==null;){if(s=xe,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,xe=x;break e}xe=s.return}}var _=e.current;for(xe=_;xe!==null;){o=xe;var w=o.child;if((o.subtreeFlags&2064)!==0&&w!==null)w.return=o,xe=w;else e:for(o=_;xe!==null;){if(a=xe,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:rf(9,a)}}catch(P){St(a,a.return,P)}if(a===o){xe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,xe=T;break e}xe=a.return}}if(Ve=i,Ws(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(Yd,e)}catch{}n=!0}return n}finally{tt=r,fn.transition=t}}return!1}function b_(e,t,r){t=Ga(r,t),t=_S(e,t,1),e=ks(e,t,1),t=xr(),e!==null&&(Ou(e,1,t),Mr(e,t))}function St(e,t,r){if(e.tag===3)b_(e,e,r);else for(;t!==null;){if(t.tag===3){b_(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ps===null||!Ps.has(n))){e=Ga(r,e),e=bS(t,e,1),t=ks(t,e,1),e=xr(),t!==null&&(Ou(t,1,e),Mr(t,e));break}}t=t.return}}function L4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xr(),e.pingedLanes|=e.suspendedLanes&r,jt===e&&(er&r)===r&&(Ot===4||Ot===3&&(er&130023424)===er&&500>kt()-a1?bo(e,0):o1|=r),Mr(e,t)}function zS(e,t){t===0&&((e.mode&1)===0?t=1:(t=nh,nh<<=1,(nh&130023424)===0&&(nh=4194304)));var r=xr();e=Xi(e,t),e!==null&&(Ou(e,t,r),Mr(e,r))}function D4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),zS(e,r)}function O4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(t),zS(e,r)}var GS;GS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ir.current)Pr=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Pr=!1,E4(e,t,r);Pr=(e.flags&131072)!==0}else Pr=!1,dt&&(t.flags&1048576)!==0&&$2(t,bd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Zh(e,t),e=t.pendingProps;var i=Fa(t,fr.current);Pa(t,r),i=e1(null,t,n,e,i,r);var s=t1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(n)?(s=!0,yd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kv(t),i.updater=ef,t.stateNode=i,i._reactInternals=t,yg(t,n,e,r),t=wg(null,t,n,!0,s,r)):(t.tag=0,dt&&s&&Gv(t),vr(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Zh(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=U4(n),e=In(n,e),i){case 0:t=bg(null,t,n,e,r);break e;case 1:t=h_(null,t,n,e,r);break e;case 11:t=u_(null,t,n,e,r);break e;case 14:t=c_(null,t,n,In(n.type,e),r);break e}throw Error(ae(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:In(n,i),bg(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:In(n,i),h_(e,t,n,i,r);case 3:e:{if(TS(t),e===null)throw Error(ae(387));n=t.pendingProps,s=t.memoizedState,i=s.element,K2(e,t),Ed(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ga(Error(ae(423)),t),t=d_(e,t,n,r,i);break e}else if(n!==i){i=Ga(Error(ae(424)),t),t=d_(e,t,n,r,i);break e}else for(Wr=As(t.stateNode.containerInfo.firstChild),$r=t,dt=!0,Nn=null,r=J2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ua(),n===i){t=Yi(e,t,r);break e}vr(e,t,n,r)}t=t.child}return t;case 5:return eS(t),e===null&&gg(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,hg(n,i)?o=null:s!==null&&hg(n,s)&&(t.flags|=32),ES(e,t),vr(e,t,o,r),t.child;case 6:return e===null&&gg(t),null;case 13:return CS(e,t,r);case 4:return Qv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ha(t,null,n,r):vr(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:In(n,i),u_(e,t,n,i,r);case 7:return vr(e,t,t.pendingProps,r),t.child;case 8:return vr(e,t,t.pendingProps.children,r),t.child;case 12:return vr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ot(wd,n._currentValue),n._currentValue=o,s!==null)if($n(s.value,o)){if(s.children===i.children&&!Ir.current){t=Yi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var h=a.firstContext;h!==null;){if(h.context===n){if(s.tag===1){h=Gi(-1,r&-r),h.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?h.next=h:(h.next=p.next,p.next=h),d.pending=h}}s.lanes|=r,h=s.alternate,h!==null&&(h.lanes|=r),vg(s.return,r,t),a.lanes|=r;break}h=h.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),vg(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vr(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Pa(t,r),i=pn(i),n=n(i),t.flags|=1,vr(e,t,n,r),t.child;case 14:return n=t.type,i=In(n,t.pendingProps),i=In(n.type,i),c_(e,t,n,i,r);case 15:return wS(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:In(n,i),Zh(e,t),t.tag=1,Rr(n)?(e=!0,yd(t)):e=!1,Pa(t,r),q2(t,n,i),yg(t,n,i,r),wg(null,t,n,!0,e,r);case 19:return AS(e,t,r);case 22:return SS(e,t,r)}throw Error(ae(156,t.tag))};function WS(e,t){return m2(e,t)}function F4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,r,n){return new F4(e,t,r,n)}function h1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U4(e){if(typeof e=="function")return h1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Iv)return 11;if(e===Rv)return 14}return 2}function Rs(e,t){var r=e.alternate;return r===null?(r=cn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function td(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")h1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ha:return wo(r.children,i,s,t);case Pv:o=8,i|=8;break;case Wm:return e=cn(12,r,t,i|2),e.elementType=Wm,e.lanes=s,e;case jm:return e=cn(13,r,t,i),e.elementType=jm,e.lanes=s,e;case $m:return e=cn(19,r,t,i),e.elementType=$m,e.lanes=s,e;case Zw:return sf(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qw:o=10;break e;case qw:o=9;break e;case Iv:o=11;break e;case Rv:o=14;break e;case gs:o=16,n=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=cn(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function wo(e,t,r,n){return e=cn(7,e,n,t),e.lanes=r,e}function sf(e,t,r,n){return e=cn(22,e,n,t),e.elementType=Zw,e.lanes=r,e.stateNode={isHidden:!1},e}function _p(e,t,r){return e=cn(6,e,null,t),e.lanes=r,e}function bp(e,t,r){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H4(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tp(0),this.expirationTimes=tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function d1(e,t,r,n,i,s,o,a,h){return e=new H4(e,t,r,a,h),t===1?(t=1,s===!0&&(t|=8)):t=0,s=cn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kv(s),e}function z4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ca,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function jS(e){if(!e)return Ls;e=e._reactInternals;e:{if(No(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var r=e.type;if(Rr(r))return W2(e,r,t)}return t}function $S(e,t,r,n,i,s,o,a,h){return e=d1(r,n,!0,e,i,s,o,a,h),e.context=jS(null),r=e.current,n=xr(),i=Is(r),s=Gi(n,i),s.callback=t??null,ks(r,s,i),e.current.lanes=i,Ou(e,i,n),Mr(e,n),e}function of(e,t,r,n){var i=t.current,s=xr(),o=Is(i);return r=jS(r),t.context===null?t.context=r:t.pendingContext=r,t=Gi(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ks(i,t,o),e!==null&&(Hn(e,i,o,s),Kh(e,i,o)),o}function Md(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function w_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function f1(e,t){w_(e,t),(e=e.alternate)&&w_(e,t)}function G4(){return null}var VS=typeof reportError=="function"?reportError:function(e){console.error(e)};function p1(e){this._internalRoot=e}af.prototype.render=p1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));of(e,t,null,null)};af.prototype.unmount=p1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Po(function(){of(null,e,null,null)}),t[Vi]=null}};function af(e){this._internalRoot=e}af.prototype.unstable_scheduleHydration=function(e){if(e){var t=w2();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xs.length&&t!==0&&t<xs[r].priority;r++);xs.splice(r,0,e),r===0&&E2(e)}};function m1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function S_(){}function W4(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var d=Md(o);s.call(d)}}var o=$S(t,n,e,0,null,!1,!1,"",S_);return e._reactRootContainer=o,e[Vi]=o.current,mu(e.nodeType===8?e.parentNode:e),Po(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var d=Md(h);a.call(d)}}var h=d1(e,0,!1,null,null,!1,!1,"",S_);return e._reactRootContainer=h,e[Vi]=h.current,mu(e.nodeType===8?e.parentNode:e),Po(function(){of(t,h,r,n)}),h}function uf(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var h=Md(o);a.call(h)}}of(t,o,e,i)}else o=W4(r,t,e,i,n);return Md(o)}_2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hl(t.pendingLanes);r!==0&&(Bv(t,r|1),Mr(t,kt()),(Ve&6)===0&&(Wa=kt()+500,Ws()))}break;case 13:Po(function(){var n=Xi(e,1);if(n!==null){var i=xr();Hn(n,e,1,i)}}),f1(e,1)}};Lv=function(e){if(e.tag===13){var t=Xi(e,134217728);if(t!==null){var r=xr();Hn(t,e,134217728,r)}f1(e,134217728)}};b2=function(e){if(e.tag===13){var t=Is(e),r=Xi(e,t);if(r!==null){var n=xr();Hn(r,e,t,n)}f1(e,t)}};w2=function(){return tt};S2=function(e,t){var r=tt;try{return tt=e,t()}finally{tt=r}};tg=function(e,t,r){switch(t){case"input":if(Ym(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Zd(n);if(!i)throw Error(ae(90));e2(n),Ym(n,i)}}}break;case"textarea":r2(e,r);break;case"select":t=r.value,t!=null&&Ta(e,!!r.multiple,t,!1)}};u2=l1;c2=Po;var j4={usingClientEntryPoint:!1,Events:[Uu,ma,Zd,a2,l2,l1]},kl={findFiberByHostInstance:vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$4={bundleType:kl.bundleType,version:kl.version,rendererPackageName:kl.rendererPackageName,rendererConfig:kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=f2(e),e===null?null:e.stateNode},findFiberByHostInstance:kl.findFiberByHostInstance||G4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{Yd=ph.inject($4),pi=ph}catch{}}Yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j4;Yr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m1(t))throw Error(ae(200));return z4(e,t,null,r)};Yr.createRoot=function(e,t){if(!m1(e))throw Error(ae(299));var r=!1,n="",i=VS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=d1(e,1,!1,null,null,r,!1,n,i),e[Vi]=t.current,mu(e.nodeType===8?e.parentNode:e),new p1(t)};Yr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=f2(t),e=e===null?null:e.stateNode,e};Yr.flushSync=function(e){return Po(e)};Yr.hydrate=function(e,t,r){if(!lf(t))throw Error(ae(200));return uf(null,e,t,!0,r)};Yr.hydrateRoot=function(e,t,r){if(!m1(e))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=VS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=$S(t,null,e,1,r??null,i,!1,s,o),e[Vi]=t.current,mu(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new af(t)};Yr.render=function(e,t,r){if(!lf(t))throw Error(ae(200));return uf(null,e,t,!1,r)};Yr.unmountComponentAtNode=function(e){if(!lf(e))throw Error(ae(40));return e._reactRootContainer?(Po(function(){uf(null,null,e,!1,function(){e._reactRootContainer=null,e[Vi]=null})}),!0):!1};Yr.unstable_batchedUpdates=l1;Yr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!lf(r))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return uf(e,t,r,!1,n)};Yr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Yr})($w);var XS,E_=$w.exports;XS=E_.createRoot,E_.hydrateRoot;var he={exports:{}},Bo=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Bo||{}),YS=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(YS||{}),Bg=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Bg||{}),ye=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(ye||{}),Dn=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Dn||{}),ce=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(ce||{}),Ra=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Ra||{}),Pe=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Pe||{}),Lg=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Lg||{}),Ui=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Ui||{}),Wi=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Wi||{}),yi=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(yi||{}),Vn=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Vn||{}),hi=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(hi||{}),g1=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(g1||{}),hn=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(hn||{}),Lt=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Lt||{}),Mt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Mt||{}),gi=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(gi||{});const V4={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},fe={ADAPTER:V4,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var wp=/iPhone/i,T_=/iPod/i,C_=/iPad/i,A_=/\biOS-universal(?:.+)Mac\b/i,Sp=/\bAndroid(?:.+)Mobile\b/i,k_=/Android/i,ta=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,mh=/Silk/i,Pi=/Windows Phone/i,P_=/\bWindows(?:.+)ARM\b/i,I_=/BlackBerry/i,R_=/BB10/i,M_=/Opera Mini/i,N_=/\b(CriOS|Chrome)(?:.+)Mobile/i,B_=/Mobile(?:.+)Firefox\b/i,L_=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function X4(e){return function(t){return t.test(e)}}function D_(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=X4(r),s={apple:{phone:i(wp)&&!i(Pi),ipod:i(T_),tablet:!i(wp)&&(i(C_)||L_(t))&&!i(Pi),universal:i(A_),device:(i(wp)||i(T_)||i(C_)||i(A_)||L_(t))&&!i(Pi)},amazon:{phone:i(ta),tablet:!i(ta)&&i(mh),device:i(ta)||i(mh)},android:{phone:!i(Pi)&&i(ta)||!i(Pi)&&i(Sp),tablet:!i(Pi)&&!i(ta)&&!i(Sp)&&(i(mh)||i(k_)),device:!i(Pi)&&(i(ta)||i(mh)||i(Sp)||i(k_))||i(/\bokhttp\b/i)},windows:{phone:i(Pi),tablet:i(P_),device:i(Pi)||i(P_)},other:{blackberry:i(I_),blackberry10:i(R_),opera:i(M_),firefox:i(B_),chrome:i(N_),device:i(I_)||i(R_)||i(M_)||i(B_)||i(N_)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Y4=D_.default??D_,Hi=Y4(globalThis.navigator);fe.RETINA_PREFIX=/@([0-9\.]+)x/;fe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var KS={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(h,d,p){this.fn=h,this.context=d,this.once=p||!1}function s(h,d,p,c,f){if(typeof p!="function")throw new TypeError("The listener must be a function");var m=new i(p,c||h,f),v=r?r+d:d;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],m]:h._events[v].push(m):(h._events[v]=m,h._eventsCount++),h}function o(h,d){--h._eventsCount===0?h._events=new n:delete h._events[d]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],p,c;if(this._eventsCount===0)return d;for(c in p=this._events)t.call(p,c)&&d.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},a.prototype.listeners=function(d){var p=r?r+d:d,c=this._events[p];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,m=c.length,v=new Array(m);f<m;f++)v[f]=c[f].fn;return v},a.prototype.listenerCount=function(d){var p=r?r+d:d,c=this._events[p];return c?c.fn?1:c.length:0},a.prototype.emit=function(d,p,c,f,m,v){var y=r?r+d:d;if(!this._events[y])return!1;var E=this._events[y],x=arguments.length,_,w;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),x){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,p),!0;case 3:return E.fn.call(E.context,p,c),!0;case 4:return E.fn.call(E.context,p,c,f),!0;case 5:return E.fn.call(E.context,p,c,f,m),!0;case 6:return E.fn.call(E.context,p,c,f,m,v),!0}for(w=1,_=new Array(x-1);w<x;w++)_[w-1]=arguments[w];E.fn.apply(E.context,_)}else{var T=E.length,P;for(w=0;w<T;w++)switch(E[w].once&&this.removeListener(d,E[w].fn,void 0,!0),x){case 1:E[w].fn.call(E[w].context);break;case 2:E[w].fn.call(E[w].context,p);break;case 3:E[w].fn.call(E[w].context,p,c);break;case 4:E[w].fn.call(E[w].context,p,c,f);break;default:if(!_)for(P=1,_=new Array(x-1);P<x;P++)_[P-1]=arguments[P];E[w].fn.apply(E[w].context,_)}}return!0},a.prototype.on=function(d,p,c){return s(this,d,p,c,!1)},a.prototype.once=function(d,p,c){return s(this,d,p,c,!0)},a.prototype.removeListener=function(d,p,c,f){var m=r?r+d:d;if(!this._events[m])return this;if(!p)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===p&&(!f||v.once)&&(!c||v.context===c)&&o(this,m);else{for(var y=0,E=[],x=v.length;y<x;y++)(v[y].fn!==p||f&&!v[y].once||c&&v[y].context!==c)&&E.push(v[y]);E.length?this._events[m]=E.length===1?E[0]:E:o(this,m)}return this},a.prototype.removeAllListeners=function(d){var p;return d?(p=r?r+d:d,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(KS);const zu=KS.exports;var v1={exports:{}};v1.exports=cf;v1.exports.default=cf;function cf(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,s=QS(e,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,h,d,p,c,f,m;if(n&&(s=J4(e,t,s,r)),e.length>80*r){a=d=e[0],h=p=e[1];for(var v=r;v<i;v+=r)c=e[v],f=e[v+1],c<a&&(a=c),f<h&&(h=f),c>d&&(d=c),f>p&&(p=f);m=Math.max(d-a,p-h),m=m!==0?32767/m:0}return Eu(s,o,r,a,h,m,0),o}function QS(e,t,r,n,i){var s,o;if(i===Fg(e,t,r,n)>0)for(s=t;s<r;s+=n)o=O_(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=O_(s,e[s],e[s+1],o);return o&&hf(o,o.next)&&(Cu(o),o=o.next),o}function Io(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(hf(r,r.next)||yt(r.prev,r,r.next)===0)){if(Cu(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Eu(e,t,r,n,i,s,o){if(!!e){!o&&s&&ik(e,n,i,s);for(var a=e,h,d;e.prev!==e.next;){if(h=e.prev,d=e.next,s?Q4(e,n,i,s):K4(e)){t.push(h.i/r|0),t.push(e.i/r|0),t.push(d.i/r|0),Cu(e),e=d.next,a=d.next;continue}if(e=d,e===a){o?o===1?(e=q4(Io(e),t,r),Eu(e,t,r,n,i,s,2)):o===2&&Z4(e,t,r,n,i,s):Eu(Io(e),t,r,n,i,s,1);break}}}}function K4(e){var t=e.prev,r=e,n=e.next;if(yt(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,o=n.x,a=t.y,h=r.y,d=n.y,p=i<s?i<o?i:o:s<o?s:o,c=a<h?a<d?a:d:h<d?h:d,f=i>s?i>o?i:o:s>o?s:o,m=a>h?a>d?a:d:h>d?h:d,v=n.next;v!==t;){if(v.x>=p&&v.x<=f&&v.y>=c&&v.y<=m&&wa(i,a,s,h,o,d,v.x,v.y)&&yt(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Q4(e,t,r,n){var i=e.prev,s=e,o=e.next;if(yt(i,s,o)>=0)return!1;for(var a=i.x,h=s.x,d=o.x,p=i.y,c=s.y,f=o.y,m=a<h?a<d?a:d:h<d?h:d,v=p<c?p<f?p:f:c<f?c:f,y=a>h?a>d?a:d:h>d?h:d,E=p>c?p>f?p:f:c>f?c:f,x=Dg(m,v,t,r,n),_=Dg(y,E,t,r,n),w=e.prevZ,T=e.nextZ;w&&w.z>=x&&T&&T.z<=_;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=E&&w!==i&&w!==o&&wa(a,p,h,c,d,f,w.x,w.y)&&yt(w.prev,w,w.next)>=0||(w=w.prevZ,T.x>=m&&T.x<=y&&T.y>=v&&T.y<=E&&T!==i&&T!==o&&wa(a,p,h,c,d,f,T.x,T.y)&&yt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=E&&w!==i&&w!==o&&wa(a,p,h,c,d,f,w.x,w.y)&&yt(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;T&&T.z<=_;){if(T.x>=m&&T.x<=y&&T.y>=v&&T.y<=E&&T!==i&&T!==o&&wa(a,p,h,c,d,f,T.x,T.y)&&yt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function q4(e,t,r){var n=e;do{var i=n.prev,s=n.next.next;!hf(i,s)&&qS(i,n,n.next,s)&&Tu(i,s)&&Tu(s,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(s.i/r|0),Cu(n),Cu(n.next),n=e=s),n=n.next}while(n!==e);return Io(n)}function Z4(e,t,r,n,i,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&ak(o,a)){var h=ZS(o,a);o=Io(o,o.next),h=Io(h,h.next),Eu(o,t,r,n,i,s,0),Eu(h,t,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==e)}function J4(e,t,r,n){var i=[],s,o,a,h,d;for(s=0,o=t.length;s<o;s++)a=t[s]*n,h=s<o-1?t[s+1]*n:e.length,d=QS(e,a,h,n,!1),d===d.next&&(d.steiner=!0),i.push(ok(d));for(i.sort(ek),s=0;s<i.length;s++)r=tk(i[s],r);return r}function ek(e,t){return e.x-t.x}function tk(e,t){var r=rk(e,t);if(!r)return t;var n=ZS(r,e);return Io(n,n.next),Io(r,r.next)}function rk(e,t){var r=t,n=e.x,i=e.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==t);if(!o)return null;var h=o,d=o.x,p=o.y,c=1/0,f;r=o;do n>=r.x&&r.x>=d&&n!==r.x&&wa(i<p?n:s,i,d,p,i<p?s:n,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(n-r.x),Tu(r,e)&&(f<c||f===c&&(r.x>o.x||r.x===o.x&&nk(o,r)))&&(o=r,c=f)),r=r.next;while(r!==h);return o}function nk(e,t){return yt(e.prev,e,t.prev)<0&&yt(t.next,e,e.next)<0}function ik(e,t,r,n){var i=e;do i.z===0&&(i.z=Dg(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sk(i)}function sk(e){var t,r,n,i,s,o,a,h,d=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<d&&(a++,n=n.nextZ,!!n);t++);for(h=d;a>0||h>0&&n;)a!==0&&(h===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,d*=2}while(o>1);return e}function Dg(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function ok(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function wa(e,t,r,n,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(r-o)*(t-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function ak(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!lk(e,t)&&(Tu(e,t)&&Tu(t,e)&&uk(e,t)&&(yt(e.prev,e,t.prev)||yt(e,t.prev,t))||hf(e,t)&&yt(e.prev,e,e.next)>0&&yt(t.prev,t,t.next)>0)}function yt(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function hf(e,t){return e.x===t.x&&e.y===t.y}function qS(e,t,r,n){var i=vh(yt(e,t,r)),s=vh(yt(e,t,n)),o=vh(yt(r,n,e)),a=vh(yt(r,n,t));return!!(i!==s&&o!==a||i===0&&gh(e,r,t)||s===0&&gh(e,n,t)||o===0&&gh(r,e,n)||a===0&&gh(r,t,n))}function gh(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function vh(e){return e>0?1:e<0?-1:0}function lk(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&qS(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Tu(e,t){return yt(e.prev,e,e.next)<0?yt(e,t,e.next)>=0&&yt(e,e.prev,t)>=0:yt(e,t,e.prev)<0||yt(e,e.next,t)<0}function uk(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function ZS(e,t){var r=new Og(e.i,e.x,e.y),n=new Og(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function O_(e,t,r,n){var i=new Og(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Cu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Og(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}cf.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(Fg(e,0,s,r));if(i)for(var a=0,h=t.length;a<h;a++){var d=t[a]*r,p=a<h-1?t[a+1]*r:e.length;o-=Math.abs(Fg(e,d,p,r))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,m=n[a+1]*r,v=n[a+2]*r;c+=Math.abs((e[f]-e[v])*(e[m+1]-e[f+1])-(e[f]-e[m])*(e[v+1]-e[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Fg(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}cf.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var Ug={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,s=typeof Ne=="object"&&Ne;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,h=36,d=1,p=26,c=38,f=700,m=72,v=128,y="-",E=/^xn--/,x=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=h-d,P=Math.floor,I=String.fromCharCode,R;function M(z){throw RangeError(w[z])}function N(z,H){for(var j=z.length,J=[];j--;)J[j]=H(z[j]);return J}function k(z,H){var j=z.split("@"),J="";j.length>1&&(J=j[0]+"@",z=j[1]),z=z.replace(_,".");var q=z.split("."),Ce=N(q,H).join(".");return J+Ce}function L(z){for(var H=[],j=0,J=z.length,q,Ce;j<J;)q=z.charCodeAt(j++),q>=55296&&q<=56319&&j<J?(Ce=z.charCodeAt(j++),(Ce&64512)==56320?H.push(((q&1023)<<10)+(Ce&1023)+65536):(H.push(q),j--)):H.push(q);return H}function W(z){return N(z,function(H){var j="";return H>65535&&(H-=65536,j+=I(H>>>10&1023|55296),H=56320|H&1023),j+=I(H),j}).join("")}function D(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:h}function U(z,H){return z+22+75*(z<26)-((H!=0)<<5)}function X(z,H,j){var J=0;for(z=j?P(z/f):z>>1,z+=P(z/H);z>T*p>>1;J+=h)z=P(z/T);return P(J+(T+1)*z/(z+c))}function K(z){var H=[],j=z.length,J,q=0,Ce=v,ge=m,Re,Ee,mt,Je,Oe,Qe,Be,nt,Vt;for(Re=z.lastIndexOf(y),Re<0&&(Re=0),Ee=0;Ee<Re;++Ee)z.charCodeAt(Ee)>=128&&M("not-basic"),H.push(z.charCodeAt(Ee));for(mt=Re>0?Re+1:0;mt<j;){for(Je=q,Oe=1,Qe=h;mt>=j&&M("invalid-input"),Be=D(z.charCodeAt(mt++)),(Be>=h||Be>P((a-q)/Oe))&&M("overflow"),q+=Be*Oe,nt=Qe<=ge?d:Qe>=ge+p?p:Qe-ge,!(Be<nt);Qe+=h)Vt=h-nt,Oe>P(a/Vt)&&M("overflow"),Oe*=Vt;J=H.length+1,ge=X(q-Je,J,Je==0),P(q/J)>a-Ce&&M("overflow"),Ce+=P(q/J),q%=J,H.splice(q++,0,Ce)}return W(H)}function Z(z){var H,j,J,q,Ce,ge,Re,Ee,mt,Je,Oe,Qe=[],Be,nt,Vt,Br;for(z=L(z),Be=z.length,H=v,j=0,Ce=m,ge=0;ge<Be;++ge)Oe=z[ge],Oe<128&&Qe.push(I(Oe));for(J=q=Qe.length,q&&Qe.push(y);J<Be;){for(Re=a,ge=0;ge<Be;++ge)Oe=z[ge],Oe>=H&&Oe<Re&&(Re=Oe);for(nt=J+1,Re-H>P((a-j)/nt)&&M("overflow"),j+=(Re-H)*nt,H=Re,ge=0;ge<Be;++ge)if(Oe=z[ge],Oe<H&&++j>a&&M("overflow"),Oe==H){for(Ee=j,mt=h;Je=mt<=Ce?d:mt>=Ce+p?p:mt-Ce,!(Ee<Je);mt+=h)Br=Ee-Je,Vt=h-Je,Qe.push(I(U(Je+Br%Vt,0))),Ee=P(Br/Vt);Qe.push(I(U(Ee,0))),Ce=X(j,nt,J==q),j=0,++J}++j,++H}return Qe.join("")}function F(z){return k(z,function(H){return E.test(H)?K(H.slice(4).toLowerCase()):H})}function O(z){return k(z,function(H){return x.test(H)?"xn--"+Z(H):H})}if(o={version:"1.3.2",ucs2:{decode:L,encode:W},decode:K,encode:Z,toASCII:O,toUnicode:F},n&&i)if(e.exports==n)i.exports=o;else for(R in o)o.hasOwnProperty(R)&&(n[R]=o[R]);else r.punycode=o})(Ne)})(Ug,Ug.exports);var ck={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Au={};function hk(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var dk=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var d=e[h].replace(s,"%20"),p=d.indexOf(r),c,f,m,v;p>=0?(c=d.substr(0,p),f=d.substr(p+1)):(c=d,f=""),m=decodeURIComponent(c),v=decodeURIComponent(f),hk(i,m)?Array.isArray(i[m])?i[m].push(v):i[m]=[i[m],v]:i[m]=v}return i},Pl=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},fk=function(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var s=encodeURIComponent(Pl(i))+r;return Array.isArray(e[i])?e[i].map(function(o){return s+encodeURIComponent(Pl(o))}).join(t):s+encodeURIComponent(Pl(e[i]))}).join(t):n?encodeURIComponent(Pl(n))+r+encodeURIComponent(Pl(e)):""};Au.decode=Au.parse=dk;Au.encode=Au.stringify=fk;var pk=Ug.exports,di=ck,mk=df,gk=Ak,vk=Ck;function zn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var xk=/^([a-z0-9.+-]+:)/i,yk=/:[0-9]*$/,_k=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,bk=["<",">",'"',"`"," ","\r",`
`,"	"],wk=["{","}","|","\\","^","`"].concat(bk),Hg=["'"].concat(wk),F_=["%","/","?",";","#"].concat(Hg),U_=["/","?","#"],Sk=255,H_=/^[+a-z0-9A-Z_-]{0,63}$/,Ek=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tk={javascript:!0,"javascript:":!0},zg={javascript:!0,"javascript:":!0},Ma={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Gg=Au;function df(e,t,r){if(e&&di.isObject(e)&&e instanceof zn)return e;var n=new zn;return n.parse(e,t,r),n}zn.prototype.parse=function(e,t,r){if(!di.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(i);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var h=_k.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=Gg.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=xk.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(r||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";c&&!(d&&zg[d])&&(a=a.substr(2),this.slashes=!0)}if(!zg[d]&&(c||d&&!Ma[d])){for(var f=-1,m=0;m<U_.length;m++){var v=a.indexOf(U_[m]);v!==-1&&(f===-1||v<f)&&(f=v)}var y,E;f===-1?E=a.lastIndexOf("@"):E=a.lastIndexOf("@",f),E!==-1&&(y=a.slice(0,E),a=a.slice(E+1),this.auth=decodeURIComponent(y)),f=-1;for(var m=0;m<F_.length;m++){var v=a.indexOf(F_[m]);v!==-1&&(f===-1||v<f)&&(f=v)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var _=this.hostname.split(/\./),m=0,w=_.length;m<w;m++){var T=_[m];if(!!T&&!T.match(H_)){for(var P="",I=0,R=T.length;I<R;I++)T.charCodeAt(I)>127?P+="x":P+=T[I];if(!P.match(H_)){var M=_.slice(0,m),N=_.slice(m+1),k=T.match(Ek);k&&(M.push(k[1]),N.unshift(k[2])),N.length&&(a="/"+N.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>Sk?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=pk.toASCII(this.hostname));var L=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+L,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!Tk[p])for(var m=0,w=Hg.length;m<w;m++){var D=Hg[m];if(a.indexOf(D)!==-1){var U=encodeURIComponent(D);U===D&&(U=escape(D)),a=a.split(D).join(U)}}var X=a.indexOf("#");X!==-1&&(this.hash=a.substr(X),a=a.slice(0,X));var K=a.indexOf("?");if(K!==-1?(this.search=a.substr(K),this.query=a.substr(K+1),t&&(this.query=Gg.parse(this.query)),a=a.slice(0,K)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Ma[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",Z=this.search||"";this.path=L+Z}return this.href=this.format(),this};function Ck(e){return di.isString(e)&&(e=df(e)),e instanceof zn?e.format():zn.prototype.format.call(e)}zn.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&di.isObject(this.query)&&Object.keys(this.query).length&&(s=Gg.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ma[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+i+r+o+n};function Ak(e,t){return df(e,!1,!0).resolve(t)}zn.prototype.resolve=function(e){return this.resolveObject(df(e,!1,!0)).format()};zn.prototype.resolveObject=function(e){if(di.isString(e)){var t=new zn;t.parse(e,!1,!0),e=t}for(var r=new zn,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a];h!=="protocol"&&(r[h]=e[h])}return Ma[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Ma[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var c=d[p];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!zg[e.protocol]){for(var w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),r.pathname=w.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",m=r.search||"";r.path=f+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&r.pathname.charAt(0)==="/",y=e.host||e.pathname&&e.pathname.charAt(0)==="/",E=y||v||r.host&&e.pathname,x=E,_=r.pathname&&r.pathname.split("/")||[],w=e.pathname&&e.pathname.split("/")||[],T=r.protocol&&!Ma[r.protocol];if(T&&(r.hostname="",r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(w[0]===""?w[0]=e.host:w.unshift(e.host)),e.host=null),E=E&&(w[0]===""||_[0]==="")),y)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=w;else if(w.length)_||(_=[]),_.pop(),_=_.concat(w),r.search=e.search,r.query=e.query;else if(!di.isNullOrUndefined(e.search)){if(T){r.hostname=r.host=_.shift();var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())}return r.search=e.search,r.query=e.query,(!di.isNull(r.pathname)||!di.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var I=_.slice(-1)[0],R=(r.host||e.host||_.length>1)&&(I==="."||I==="..")||I==="",M=0,N=_.length;N>=0;N--)I=_[N],I==="."?_.splice(N,1):I===".."?(_.splice(N,1),M++):M&&(_.splice(N,1),M--);if(!E&&!x)for(;M--;M)_.unshift("..");E&&_[0]!==""&&(!_[0]||_[0].charAt(0)!=="/")&&_.unshift(""),R&&_.join("/").substr(-1)!=="/"&&_.push("");var k=_[0]===""||_[0]&&_[0].charAt(0)==="/";if(T){r.hostname=r.host=k?"":_.length?_.shift():"";var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())}return E=E||r.host&&_.length,E&&!k&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),(!di.isNull(r.pathname)||!di.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};zn.prototype.parseHost=function(){var e=this.host,t=yk.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const kk={parse:mk,format:vk,resolve:gk};function En(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Il(e){return e.split("?")[0].split("#")[0]}function Pk(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ik(e,t,r){return e.replace(new RegExp(Pk(t),"g"),r)}function Rk(e,t){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const h=r.lastIndexOf("/");if(h!==r.length-1){h===-1?(r="",n=0):(r=r.slice(0,h),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${e.slice(i+1,a)}`:r=e.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const dr={toPosix(e){return Ik(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){En(e),e=this.toPosix(e);let t="";const r=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];t=s,e=e.slice(s.length)}return t},toAbsolute(e,t,r){if(this.isDataUrl(e))return e;const n=Il(this.toPosix(t??fe.ADAPTER.getBaseUrl())),i=Il(this.toPosix(r??this.rootname(n)));return En(e),e=this.toPosix(e),e.startsWith("/")?dr.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(e=this.toPosix(e),En(e),e.length===0)return".";let t="";const r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return e=Rk(e,!1),e.length>0&&n&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return En(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const n=e[r];if(En(n),n.length>0)if(t===void 0)t=n;else{const i=e[r-1]??"";this.extname(i)?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(En(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const r=t===47;let n=-1,i=!0;const s=this.getProtocol(e),o=e;e=e.slice(s.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+e:s:r&&n===1?"//":s+e.slice(0,n)},rootname(e){En(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);r!==-1?t=e.slice(0,r):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){En(e),t&&En(t),e=Il(this.toPosix(e));let r=0,n=-1,i=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=0;--s){const h=e.charCodeAt(s);if(h===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=e.length),e.slice(r,n)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":e.slice(r,n)},extname(e){En(e),e=Il(this.toPosix(e));let t=-1,r=0,n=-1,i=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===r+1?"":e.slice(t,n)},parse(e){En(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Il(this.toPosix(e));let r=e.charCodeAt(0);const n=this.isAbsolute(e);let i;t.root=this.rootname(e),n||this.hasProtocol(e)?i=1:i=0;let s=-1,o=0,a=-1,h=!0,d=e.length-1,p=0;for(;d>=i;--d){if(r=e.charCodeAt(d),r===47){if(!h){o=d+1;break}continue}a===-1&&(h=!1,a=d+1),r===46?s===-1?s=d:p!==1&&(p=1):s!==-1&&(p=-1)}return s===-1||a===-1||p===0||p===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},z_={};function He(e,t,r=3){if(z_[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(n))),z_[t]=!0}let Ep;function Mk(){return typeof Ep>"u"&&(Ep=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:fe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!fe.ADAPTER.getWebGLRenderingContext())return!1;const r=fe.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const i=!!n?.getContextAttributes()?.stencil;if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Ep}var Nk={grad:.9,turn:360,rad:360/(2*Math.PI)},Ii=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Wt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},dn=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},JS=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},G_=function(e){return{r:dn(e.r,0,255),g:dn(e.g,0,255),b:dn(e.b,0,255),a:dn(e.a)}},Tp=function(e){return{r:Wt(e.r),g:Wt(e.g),b:Wt(e.b),a:Wt(e.a,3)}},Bk=/^#([0-9a-f]{3,8})$/i,xh=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},eE=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=Math.max(t,r,n),o=s-Math.min(t,r,n),a=o?s===t?(r-n)/o:s===r?2+(n-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},tE=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),o=n*(1-r),a=n*(1-(t-s)*r),h=n*(1-(1-t+s)*r),d=s%6;return{r:255*[n,a,o,o,h,n][d],g:255*[h,n,n,a,o,o][d],b:255*[o,o,h,n,n,a][d],a:i}},W_=function(e){return{h:JS(e.h),s:dn(e.s,0,100),l:dn(e.l,0,100),a:dn(e.a)}},j_=function(e){return{h:Wt(e.h),s:Wt(e.s),l:Wt(e.l),a:Wt(e.a,3)}},$_=function(e){return tE((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},su=function(e){return{h:(t=eE(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},Lk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ok=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wg={string:[[function(e){var t=Bk.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Wt(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Wt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Ok.exec(e)||Fk.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:G_({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Lk.exec(e)||Dk.exec(e);if(!t)return null;var r,n,i=W_({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(Nk[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return $_(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=i===void 0?1:i;return Ii(t)&&Ii(r)&&Ii(n)?G_({r:Number(t),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,s=i===void 0?1:i;if(!Ii(t)||!Ii(r)||!Ii(n))return null;var o=W_({h:Number(t),s:Number(r),l:Number(n),a:Number(s)});return $_(o)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,s=i===void 0?1:i;if(!Ii(t)||!Ii(r)||!Ii(n))return null;var o=function(a){return{h:JS(a.h),s:dn(a.s,0,100),v:dn(a.v,0,100),a:dn(a.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(s)});return tE(o)},"hsv"]]},V_=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},Uk=function(e){return typeof e=="string"?V_(e.trim(),Wg.string):typeof e=="object"&&e!==null?V_(e,Wg.object):[null,void 0]},Cp=function(e,t){var r=su(e);return{h:r.h,s:dn(r.s+100*t,0,100),l:r.l,a:r.a}},Ap=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},X_=function(e,t){var r=su(e);return{h:r.h,s:r.s,l:dn(r.l+100*t,0,100),a:r.a}},jg=function(){function e(t){this.parsed=Uk(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Wt(Ap(this.rgba),2)},e.prototype.isDark=function(){return Ap(this.rgba)<.5},e.prototype.isLight=function(){return Ap(this.rgba)>=.5},e.prototype.toHex=function(){return t=Tp(this.rgba),r=t.r,n=t.g,i=t.b,o=(s=t.a)<1?xh(Wt(255*s)):"","#"+xh(r)+xh(n)+xh(i)+o;var t,r,n,i,s,o},e.prototype.toRgb=function(){return Tp(this.rgba)},e.prototype.toRgbString=function(){return t=Tp(this.rgba),r=t.r,n=t.g,i=t.b,(s=t.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var t,r,n,i,s},e.prototype.toHsl=function(){return j_(su(this.rgba))},e.prototype.toHslString=function(){return t=j_(su(this.rgba)),r=t.h,n=t.s,i=t.l,(s=t.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var t,r,n,i,s},e.prototype.toHsv=function(){return t=eE(this.rgba),{h:Wt(t.h),s:Wt(t.s),v:Wt(t.v),a:Wt(t.a,3)};var t},e.prototype.invert=function(){return li({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),li(Cp(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),li(Cp(this.rgba,-t))},e.prototype.grayscale=function(){return li(Cp(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),li(X_(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),li(X_(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?li({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):Wt(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=su(this.rgba);return typeof t=="number"?li({h:t,s:r.s,l:r.l,a:r.a}):Wt(r.h)},e.prototype.isEqual=function(t){return this.toHex()===li(t).toHex()},e}(),li=function(e){return e instanceof jg?e:new jg(e)},Y_=[],Hk=function(e){e.forEach(function(t){Y_.indexOf(t)<0&&(t(jg,Wg),Y_.push(t))})};function zk(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,h,d=n[this.toHex()];if(d)return d;if(o?.closest){var p=this.toRgb(),c=1/0,f="black";if(!s.length)for(var m in r)s[m]=new e(r[m]).toRgb();for(var v in r){var y=(a=p,h=s[v],Math.pow(a.r-h.r,2)+Math.pow(a.g-h.g,2)+Math.pow(a.b-h.b,2));y<c&&(c=y,f=v)}return f}},t.string.push([function(o){var a=o.toLowerCase(),h=a==="transparent"?"#0000":r[a];return h?new e(h).toRgb():null},"name"])}Hk([zk]);const Na=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Na)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,r,n]=this._components;return{r:e,g:t,b:r,a:n}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,n]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[t,r,n]=this._components;return e[0]=t,e[1]=r,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,n,i]=Na.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=n,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=this._int&255;return t&&(r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0),(e*255<<24)+(r<<16)+(n<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,n,i]=this._components;return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}normalize(e){let t,r,n,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const s=e;t=(s>>16&255)/255,r=(s>>8&255)/255,n=(s&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,n,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,n,i=255]=e,t/=255,r/=255,n/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Na.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const s=li(e);s.isValid()&&({r:t,g:r,b:n,a:i}=s.rgba,t/=255,r/=255,n/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=n,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((n,i)=>{e[i]=Math.min(Math.max(n,t),r)}),e)}};let et=Na;et.shared=new Na;et.temp=new Na;et.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function Gk(e){return He("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),et.shared.setValue(e).toHex()}function Wk(e){return He("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),et.shared.setValue(e).toNumber()}function jk(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[ye.NORMAL_NPM]=ye.NORMAL,e[ye.ADD_NPM]=ye.ADD,e[ye.SCREEN_NPM]=ye.SCREEN,t[ye.NORMAL]=ye.NORMAL_NPM,t[ye.ADD]=ye.ADD_NPM,t[ye.SCREEN]=ye.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}const rE=jk();function nE(e,t){return rE[t?1:0][e]}function $k(e,t=null){const r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function iE(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function Nd(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function K_(e){return!(e&e-1)&&!!e}function Q_(e){let t=(e>65535?1:0)<<4;e>>>=t;let r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function Ba(e,t,r){const n=e.length;let i;if(t>=n||r===0)return;r=t+r>n?n-t:r;const s=n-r;for(i=t;i<s;++i)e[i]=e[i+r];e.length=s}function Ss(e){return e===0?0:e<0?-1:1}let Vk=0;function Ro(){return++Vk}const sE=class{constructor(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let $g=sE;$g.EMPTY=new sE(0,0,0,0);const q_={},ui=Object.create(null),fs=Object.create(null);class Xk{constructor(t,r,n){this._canvas=fe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||fe.RESOLUTION,this.resize(t,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,r){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Z_(e,t,r){for(let n=0,i=4*r*t;n<t;++n,i+=4)if(e[i+3]!==0)return!1;return!0}function J_(e,t,r,n,i){const s=4*t;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(e[a+3]!==0)return!1;return!0}function Yk(e){const{width:t,height:r}=e,n=e.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,t,r).data;let o=0,a=0,h=t-1,d=r-1;for(;a<r&&Z_(s,t,a);)++a;if(a===r)return $g.EMPTY;for(;Z_(s,t,d);)--d;for(;J_(s,t,o,a,d);)++o;for(;J_(s,t,h,a,d);)--h;return++h,++d,new $g(o,a,h,d)}function Kk(e){const t=Yk(e),{width:r,height:n}=t;let i=null;if(!t.isEmpty()){const s=e.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(t.left,t.top,r,n)}return{width:r,height:n,data:i}}let yh;function Qk(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,yh||(yh=document.createElement("a")),yh.href=e;const r=kk.parse(yh.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function Ds(e,t=1){const r=fe.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var pe=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(pe||{});const Vg=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},eb=(e,t)=>Vg(e).priority??t,Te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Vg).forEach(t=>{t.type.forEach(r=>this._removeHandlers[r]?.(t))}),this},add(...e){return e.map(Vg).forEach(t=>{t.type.forEach(r=>{const n=this._addHandlers,i=this._queue;n[r]?n[r](t):(i[r]=i[r]||[],i[r].push(t))})}),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const s=this._queue;return s[e]&&(s[e].forEach(o=>t(o)),delete s[e]),this},handleByMap(e,t){return this.handle(e,r=>{t[r.name]=r.ref},r=>{delete t[r.name]})},handleByList(e,t,r=-1){return this.handle(e,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((i,s)=>eb(s,r)-eb(i,r)))},n=>{const i=t.indexOf(n.ref);i!==-1&&t.splice(i,1)})}};class Xg{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const qk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Zk(e){let t="";for(let r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function Jk(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=qk.replace(/%forloop%/gi,Zk(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}const kp=0,Pp=1,Ip=2,Rp=3,Mp=4,Np=5;class qi{constructor(){this.data=0,this.blendMode=ye.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<kp)}set blend(t){!!(this.data&1<<kp)!==t&&(this.data^=1<<kp)}get offsets(){return!!(this.data&1<<Pp)}set offsets(t){!!(this.data&1<<Pp)!==t&&(this.data^=1<<Pp)}get culling(){return!!(this.data&1<<Ip)}set culling(t){!!(this.data&1<<Ip)!==t&&(this.data^=1<<Ip)}get depthTest(){return!!(this.data&1<<Rp)}set depthTest(t){!!(this.data&1<<Rp)!==t&&(this.data^=1<<Rp)}get depthMask(){return!!(this.data&1<<Np)}set depthMask(t){!!(this.data&1<<Np)!==t&&(this.data^=1<<Np)}get clockwiseFrontFace(){return!!(this.data&1<<Mp)}set clockwiseFrontFace(t){!!(this.data&1<<Mp)!==t&&(this.data^=1<<Mp)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ye.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new qi;return t.depthTest=!1,t.blend=!0,t}}const Yg=[];function oE(e,t){if(!e)return null;let r="";if(typeof e=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(let n=Yg.length-1;n>=0;--n){const i=Yg[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Gn{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,r,n,i,s,o,a,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:d,items:p}=this;this._aliasCount++;for(let c=0,f=p.length;c<f;c++)p[c][d](t,r,n,i,s,o,a,h);return p===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Gn.prototype,{dispatch:{value:Gn.prototype.emit},run:{value:Gn.prototype.emit}});class ku{constructor(t=0,r=0){this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Gn("setRealSize"),this.onUpdate=new Gn("update"),this.onError=new Gn("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,r){return!1}}class Gu extends ku{constructor(t,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=t}upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Vn.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const e3={scaleMode:Ui.NEAREST,format:ce.RGBA,alphaMode:Vn.NPM},sa=class extends zu{constructor(e=null,t=null){super(),t=Object.assign({},sa.defaultOptions,t);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:h,format:d,type:p,target:c,resolution:f,resourceOptions:m}=t;e&&!(e instanceof ku)&&(e=oE(e,m),e.internal=!0),this.resolution=f||fe.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=h,this._scaleMode=s,this.format=d,this.type=p,this.target=c,this.alphaMode=r,this.uid=Ro(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=K_(this.realWidth)&&K_(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete fs[this.cacheId],delete ui[this.cacheId],this.cacheId=null),this.dispose(),sa.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=fe.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let i=null;if(n)i=e;else{if(!e._pixiId){const o=t?.pixiIdPrefix||"pixiid";e._pixiId=`${o}_${Ro()}`}i=e._pixiId}let s=fs[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new sa(e,t),s.cacheId=i,sa.addToCache(s,i)),s}static fromBuffer(e,t,r,n){e=e||new Float32Array(t*r*4);const i=new Gu(e,{width:t,height:r}),s=e instanceof Float32Array?Pe.FLOAT:Pe.UNSIGNED_BYTE;return new sa(i,Object.assign({},e3,{type:s},n))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),fs[t]&&fs[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),fs[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=fs[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete fs[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete fs[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let De=sa;De.defaultOptions={mipmap:yi.POW2,anisotropicLevel:0,scaleMode:Ui.LINEAR,wrapMode:Wi.CLAMP,alphaMode:Vn.UNPACK,target:Ra.TEXTURE_2D,format:ce.RGBA,type:Pe.UNSIGNED_BYTE};De._globalBatch=0;class Kg{constructor(){this.texArray=null,this.blend=0,this.type=Dn.TRIANGLES,this.start=0,this.size=0,this.data=null}}let t3=0;class At{constructor(t,r=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=t3++,this.disposeRunner=new Gn("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?gi.ELEMENT_ARRAY_BUFFER:gi.ARRAY_BUFFER}get index(){return this.type===gi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new At(t)}}class Bd{constructor(t,r=0,n=!1,i=Pe.FLOAT,s,o,a,h=1){this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=h}destroy(){this.buffer=null}static from(t,r,n,i,s){return new Bd(t,r,n,i,s)}}const r3={Float32Array,Uint32Array,Int32Array,Uint8Array};function n3(e,t){let r=0,n=0;const i={};for(let h=0;h<e.length;h++)n+=t[h],r+=e[h].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let h=0;h<e.length;h++){const d=t[h],p=e[h],c=iE(p);i[c]||(i[c]=new r3[c](s)),o=i[c];for(let f=0;f<p.length;f++){const m=(f/d|0)*n+a,v=f%d;o[m+v]=p[f]}a+=d}return new Float32Array(s)}const tb={5126:4,5123:2,5121:1};let i3=0;const s3={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Os{constructor(t=[],r={}){this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=i3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Gn("disposeGeometry"),this.refCount=0}addAttribute(t,r,n=0,i=!1,s,o,a,h=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof At||(r instanceof Array&&(r=new Float32Array(r)),r=new At(r));const d=t.split("|");if(d.length>1){for(let c=0;c<d.length;c++)this.addAttribute(d[c],r,n,i,s);return this}let p=this.buffers.indexOf(r);return p===-1&&(this.buffers.push(r),p=this.buffers.length-1),this.attributes[t]=new Bd(p,n,i,s,o,a,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof At||(t instanceof Array&&(t=new Uint16Array(t)),t=new At(t)),t.type=gi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],r=[],n=new At;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];t.push(o.data),r.push(s.size*tb[s.type]/4),s.buffer=0}for(n.data=n3(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const r=this.attributes[t];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Os;for(let r=0;r<this.buffers.length;r++)t.buffers[r]=new At(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];t.attributes[r]=new Bd(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=gi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const r=new Os,n=[],i=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)i[h]=i[h]||0,i[h]+=o.buffers[h].data.length,s[h]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new s3[iE(o.buffers[a].data)](i[a]),r.buffers[a]=new At(n[a]);for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)n[h].set(o.buffers[h].data,s[h]),s[h]+=o.buffers[h].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=gi.ELEMENT_ARRAY_BUFFER;let a=0,h=0,d=0,p=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){p=c;break}for(const c in o.attributes){const f=o.attributes[c];(f.buffer|0)===p&&(h+=f.size*tb[f.type]/4)}for(let c=0;c<t.length;c++){const f=t[c].indexBuffer.data;for(let m=0;m<f.length;m++)r.indexBuffer.data[m+d]+=a;a+=t[c].buffers[p].data.length/h,d+=f.length}}return r}}class aE extends Os{constructor(t=!1){super(),this._buffer=new At(null,t,!1),this._indexBuffer=new At(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Pe.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Pe.FLOAT).addAttribute("aColor",this._buffer,4,!0,Pe.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Pe.FLOAT).addIndex(this._indexBuffer)}}const Ld=Math.PI*2,o3=180/Math.PI,a3=Math.PI/180;var qt=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(qt||{});class We{constructor(t=0,r=0){this.x=0,this.y=0,this.x=t,this.y=r}clone(){return new We(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,r=t){return this.x=t,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const _h=[new We,new We,new We,new We];class Ue{constructor(t=0,r=0,n=0,i=0){this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=qt.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ue(0,0,0,0)}clone(){return new Ue(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(t,r){if(!r){const M=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=M)return!1;const k=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>k}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=_h[0].set(t.left,t.top),h=_h[1].set(t.left,t.bottom),d=_h[2].set(t.right,t.top),p=_h[3].set(t.right,t.bottom);if(d.x<=a.x||h.y<=a.y)return!1;const c=Math.sign(r.a*r.d-r.b*r.c);if(c===0||(r.apply(a,a),r.apply(h,h),r.apply(d,d),r.apply(p,p),Math.max(a.x,h.x,d.x,p.x)<=n||Math.min(a.x,h.x,d.x,p.x)>=i||Math.max(a.y,h.y,d.y,p.y)<=s||Math.min(a.y,h.y,d.y,p.y)>=o))return!1;const f=c*(h.y-a.y),m=c*(a.x-h.x),v=f*n+m*s,y=f*i+m*s,E=f*n+m*o,x=f*i+m*o;if(Math.max(v,y,E,x)<=f*a.x+m*a.y||Math.min(v,y,E,x)>=f*p.x+m*p.y)return!1;const _=c*(a.y-d.y),w=c*(d.x-a.x),T=_*n+w*s,P=_*i+w*s,I=_*n+w*o,R=_*i+w*o;return!(Math.max(T,P,I,R)<=_*a.x+w*a.y||Math.min(T,P,I,R)>=_*p.x+w*p.y)}pad(t=0,r=t){return this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this}fit(t){const r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(t=1,r=.001){const n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this}enlarge(t){const r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class x1{constructor(t=0,r=0,n=0){this.x=t,this.y=r,this.radius=n,this.type=qt.CIRC}clone(){return new x1(this.x,this.y,this.radius)}contains(t,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-t,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new Ue(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class y1{constructor(t=0,r=0,n=0,i=0){this.x=t,this.y=r,this.width=n,this.height=i,this.type=qt.ELIP}clone(){return new y1(this.x,this.y,this.width,this.height)}contains(t,r){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new Ue(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class La{constructor(...t){let r=Array.isArray(t[0])?t[0]:t;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=qt.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),r=new La(t);return r.closeStroke=this.closeStroke,r}contains(t,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],h=this.points[s*2+1],d=this.points[o*2],p=this.points[o*2+1];h>r!=p>r&&t<(d-a)*((r-h)/(p-h))+a&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,r)=>`${t}, ${r}`,"")}]`}}class _1{constructor(t=0,r=0,n=0,i=0,s=20){this.x=t,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=qt.RREC}clone(){return new _1(this.x,this.y,this.width,this.height,this.radius)}contains(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let i=t-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=t-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=t-(this.x+n),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class ft{constructor(t=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,r,n,i,s,o){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(t,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,r){r=r||new We;const n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(t,r){r=r||new We;const n=1/(this.a*this.d+this.c*-this.b),i=t.x,s=t.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(t,r){return this.tx+=t,this.ty+=r,this}scale(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this}rotate(t){const r=Math.cos(t),n=Math.sin(t),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(t){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*s,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*s,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*s+this.ty,this}setTransform(t,r,n,i,s,o,a,h,d){return this.a=Math.cos(a+d)*s,this.b=Math.sin(a+d)*s,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(t){const r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this}decompose(t){const r=this.a,n=this.b,i=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-i,s),h=Math.atan2(n,r),d=Math.abs(a+h);return d<1e-5||Math.abs(Ld-d)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+s*s),t.position.x=this.tx+(o.x*r+o.y*i),t.position.y=this.ty+(o.x*n+o.y*s),t}invert(){const t=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=t*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(t*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new ft;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new ft}static get TEMP_MATRIX(){return new ft}}const uo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],co=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ho=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Qg=[],lE=[],bh=Math.sign;function l3(){for(let e=0;e<16;e++){const t=[];Qg.push(t);for(let r=0;r<16;r++){const n=bh(uo[e]*uo[r]+ho[e]*co[r]),i=bh(co[e]*uo[r]+fo[e]*co[r]),s=bh(uo[e]*ho[r]+ho[e]*fo[r]),o=bh(co[e]*ho[r]+fo[e]*fo[r]);for(let a=0;a<16;a++)if(uo[a]===n&&co[a]===i&&ho[a]===s&&fo[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new ft;t.set(uo[e],co[e],ho[e],fo[e],0,0),lE.push(t)}}l3();const vt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>uo[e],uY:e=>co[e],vX:e=>ho[e],vY:e=>fo[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Qg[e][t],sub:(e,t)=>Qg[e][vt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?vt.S:vt.N:Math.abs(t)*2<=Math.abs(e)?e>0?vt.E:vt.W:t>0?e>0?vt.SE:vt.SW:e>0?vt.NE:vt.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=lE[vt.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class zi{constructor(t,r,n=0,i=0){this._x=n,this._y=i,this.cb=t,this.scope=r}clone(t=this.cb,r=this.scope){return new zi(t,r,this._x,this._y)}set(t=0,r=t){return(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const uE=class{constructor(){this.worldTransform=new ft,this.localTransform=new ft,this.position=new zi(this.onChange,this,0,0),this.scale=new zi(this.onChange,this,1,1),this.pivot=new zi(this.onChange,this,0,0),this.skew=new zi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let ff=uE;ff.IDENTITY=new uE;var u3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,c3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function rb(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function Bp(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function cE(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Bp(2*t);case"bvec3":return Bp(3*t);case"bvec4":return Bp(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Da=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],h3={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},d3={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function f3(e,t){const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in e.uniforms){const i=t[n];if(!i){e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const s=e.uniforms[n];let o=!1;for(let a=0;a<Da.length;a++)if(Da[a].test(i,s)){r.push(Da[a].code(n,s)),o=!0;break}if(!o){const h=(i.size===1&&!i.isArray?h3:d3)[i.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const hE={};let wh=hE;function p3(){if(wh===hE||wh?.isContextLost()){const e=fe.ADAPTER.createCanvas();let t;fe.PREFER_ENV>=Bo.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),wh=t}return wh}let Sh;function m3(){if(!Sh){Sh=hn.MEDIUM;const e=p3();e&&e.getShaderPrecisionFormat&&(Sh=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?hn.HIGH:hn.MEDIUM)}return Sh}function nb(e,t){const r=e.getShaderSource(t).split(`
`).map((d,p)=>`${p}: ${d}`),n=e.getShaderInfoLog(t),i=n.split(`
`),s={},o=i.map(d=>parseFloat(d.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(d=>d&&!s[d]?(s[d]=!0,!0):!1),a=[""];o.forEach(d=>{r[d-1]=`%c${r[d-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=r.join(`
`);a[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function g3(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||nb(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||nb(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const v3={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function dE(e){return v3[e]}let Eh=null;const ib={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function fE(e,t){if(!Eh){const r=Object.keys(ib);Eh={};for(let n=0;n<r.length;++n){const i=r[n];Eh[e[i]]=ib[i]}}return Eh[t]}function sb(e,t,r){if(e.substring(0,9)!=="precision"){let n=t;return t===hn.HIGH&&r!==hn.HIGH&&(n=hn.MEDIUM),`precision ${n} float;
${e}`}else if(r!==hn.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let Rl;function x3(){if(typeof Rl=="boolean")return Rl;try{Rl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Rl=!1}return Rl}let y3=0;const Th={},oa=class{constructor(e,t,r="pixi-shader",n={}){this.extra={},this.id=y3++,this.vertexSrc=e||oa.defaultVertexSrc,this.fragmentSrc=t||oa.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Th[r]?(Th[r]++,r+=`-${Th[r]}`):Th[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=sb(this.vertexSrc,oa.defaultVertexPrecision,hn.HIGH),this.fragmentSrc=sb(this.fragmentSrc,oa.defaultFragmentPrecision,m3())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return c3}static get defaultFragmentSrc(){return u3}static from(e,t,r){const n=e+t;let i=q_[n];return i||(q_[n]=i=new oa(e,t,r)),i}};let On=oa;On.defaultVertexPrecision=hn.HIGH;On.defaultFragmentPrecision=Hi.apple.device?hn.HIGH:hn.MEDIUM;let _3=0;class Wn{constructor(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=_3++,this.static=!!r,this.ubo=!!n,t instanceof At?(this.buffer=t,this.buffer.type=gi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new At(new Float32Array(1)),this.buffer.type=gi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,r,n){if(!this.ubo)this.uniforms[t]=new Wn(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,r,n){return new Wn(t,r,n)}static uboFrom(t,r){return new Wn(t,r??!0,!0)}}class vi{constructor(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof Wn?this.uniformGroup=r:this.uniformGroup=new Wn(r):this.uniformGroup=new Wn({}),this.disposeRunner=new Gn("disposeShader")}checkUniformExists(t,r){if(r.uniforms[t])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,r,n){const i=On.from(t,r);return new vi(i,n)}}class b3{constructor(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let s=0;s<t;s++)n[s]=s;this.defaultGroupCache[t]=Wn.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${t}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new On(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:this.defaultGroupCache[t]};return new vi(this.programCache[t],r)}generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class qg{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function w3(){return!Hi.apple.device}function S3(e){let t=!0;const r=fe.ADAPTER.getNavigator();if(Hi.tablet||Hi.phone){if(Hi.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(Hi.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?e:4}class pf{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var E3=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,T3=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Cn=class extends pf{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=aE,this.vertexSize=6,this.state=qi.for2d(),this.size=Cn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??S3(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??w3(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return He("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return T3}static get defaultFragmentTemplate(){return E3}setShaderGenerator({vertex:e=Cn.defaultVertexSrc,fragment:t=Cn.defaultFragmentTemplate}={}){this.shaderGenerator=new b3(e,t)}contextChange(){const e=this.renderer.gl;fe.PREFER_ENV===Bo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Cn.defaultMaxTextures),this.maxTextures=Jk(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Cn,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new Kg);for(;t.length<n;)t.push(new qg);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(e){!e._texture.valid||(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=Cn._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++De._globalBatch,a=0,h=r[0],d=0;n.copyBoundTextures(i,t);for(let p=0;p<this._bufferSize;++p){const c=e[p];e[p]=null,c._batchEnabled!==o&&(h.count>=t&&(n.boundArray(h,i,o,t),this.buildDrawCalls(h,d,p),d=p,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}h.count>0&&(n.boundArray(h,i,o,t),this.buildDrawCalls(h,d,this._bufferSize),++a,++o);for(let p=0;p<i.length;p++)i[p]=null;De._globalBatch=o}buildDrawCalls(e,t,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=Cn._drawCallPool;let h=this._dcIndex,d=this._aIndex,p=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=e;for(let f=t;f<r;++f){const m=n[f],v=m._texture.baseTexture,y=rE[v.alphaMode?1:0][m.blendMode];n[f]=null,t<f&&c.blend!==y&&(c.size=p-c.start,t=f,c=a[++h],c.texArray=e,c.start=p),this.packInterleavedGeometry(m,i,s,d,p),d+=m.vertexData.length/2*o,p+=m.indices.length,c.blend=y}t<r&&(c.size=p-c.start,++h),this._dcIndex=h,this._aIndex=d,this._iIndex=p}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Cn.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,n=Cn._drawCallPool;let i=null;for(let s=0;s<e;s++){const{texArray:o,type:a,size:h,start:d,blend:p}=n[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=p,r.set(this.state),t.drawElements(a,h,t.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Cn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Nd(Math.ceil(e/8)),r=Q_(t),n=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Xg(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=Nd(Math.ceil(e/12)),r=Q_(t),n=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:s,float32View:o}=t,a=n/this.vertexSize,h=e.uvs,d=e.indices,p=e.vertexData,c=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),m=et.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let v=0;v<p.length;v+=2)o[n++]=p[v],o[n++]=p[v+1],o[n++]=h[v],o[n++]=h[v+1],s[n++]=m,o[n++]=c;for(let v=0;v<d.length;v++)r[i++]=a+d[v]}};let Bn=Cn;Bn.defaultBatchSize=4096;Bn.extension={name:"batch",type:pe.RendererPlugin};Bn._drawCallPool=[];Bn._textureArrayPool=[];Te.add(Bn);var C3=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,A3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Gl=class extends vi{constructor(e,t,r){const n=On.from(e||Gl.defaultVertexSrc,t||Gl.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=Gl.defaultResolution,this.multisample=Gl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new qi}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return A3}static get defaultFragmentSrc(){return C3}};let Zt=Gl;Zt.defaultResolution=1;Zt.defaultMultisample=Mt.NONE;class mf{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new et(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=t,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}mf.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};mf.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"background"};Te.add(mf);class pE{constructor(t){this.renderer=t,this.emptyRenderer=new pf(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)}boundArray(t,r,n,i){const{elements:s,ids:o,count:a}=t;let h=0;for(let d=0;d<a;d++){const p=s[d],c=p._batchLocation;if(c>=0&&c<i&&r[c]===p){o[d]=c;continue}for(;h<i;){const f=r[h];if(f&&f._batchEnabled===n&&f._batchLocation===h){h++;continue}o[d]=h,p._batchLocation=h,r[h]=p;break}}}destroy(){this.renderer=null}}pE.extension={type:pe.RendererSystem,name:"batch"};Te.add(pE);let ob=0;class gf{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ob++}init(t){if(t.context)this.initFromContext(t.context);else{const r=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ob++,this.renderer.runners.contextChange.emit(t);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const r=this.createContext(this.renderer.view,t);this.initFromContext(r)}createContext(t,r){let n;if(fe.PREFER_ENV>=Bo.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}gf.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};gf.extension={type:pe.RendererSystem,name:"context"};Te.add(gf);class k3 extends Gu{upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Vn.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}}class Zg{constructor(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Gn("disposeFramebuffer"),this.multisample=Mt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,r){return this.colorTextures[t]=r||new De(null,{scaleMode:Ui.NEAREST,resolution:1,mipmap:yi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new De(new k3(null,{width:this.width,height:this.height}),{scaleMode:Ui.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:yi.OFF,format:ce.DEPTH_COMPONENT,type:Pe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(t/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class mE extends De{constructor(t={}){if(typeof t=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];t={width:r,height:n,scaleMode:i,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Mt.NONE),super(null,t),this.mipmap=yi.OFF,this.valid=!0,this._clear=new et([0,0,0,0]),this.framebuffer=new Zg(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fs extends ku{constructor(t){const r=t,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;super(n,i),this.source=t,this.noSubImage=!1}static crossOrigin(t,r,n){n===void 0&&!r.startsWith("data:")?t.crossOrigin=Qk(r):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,r,n,i){const s=t.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Vn.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class gE extends Fs{constructor(t,r){if(r=r||{},typeof t=="string"){const n=new Image;Fs.crossOrigin(n,t,r.crossorigin),n.src=t,t=n}super(t),!t.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??fe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vn.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class vE{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,r,n){const i=r.width,s=r.height;if(n){const o=t.width/2/i,a=t.height/2/s,h=t.x/i+o,d=t.y/s+a;n=vt.add(n,vt.NW),this.x0=h+o*vt.uX(n),this.y0=d+a*vt.uY(n),n=vt.add(n,2),this.x1=h+o*vt.uX(n),this.y1=d+a*vt.uY(n),n=vt.add(n,2),this.x2=h+o*vt.uX(n),this.y2=d+a*vt.uY(n),n=vt.add(n,2),this.x3=h+o*vt.uX(n),this.y3=d+a*vt.uY(n)}else this.x0=t.x/i,this.y0=t.y/s,this.x1=(t.x+t.width)/i,this.y1=t.y/s,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/s,this.x3=t.x/i,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const ab=new vE;function Ch(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class le extends zu{constructor(t,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Ue(0,0,1,1)),t instanceof le&&(t=t.baseTexture),this.baseTexture=t,this._frame=r,this.trim=i,this.valid=!1,this._uvs=ab,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new We(o.x,o.y):new We(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=r:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:r}=this.baseTexture;r?.url&&ui[r.url]&&le.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,le.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new le(this.baseTexture,!this.noFrame&&t,r,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===ab&&(this._uvs=new vE),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,r={},n=fe.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let s=null;if(i)s=t;else if(t instanceof De){if(!t.cacheId){const a=r?.pixiIdPrefix||"pixiid";t.cacheId=`${a}-${Ro()}`,De.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=r?.pixiIdPrefix||"pixiid";t._pixiId=`${a}_${Ro()}`}s=t._pixiId}let o=ui[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof De)?(r.resolution||(r.resolution=Ds(t)),o=new le(new De(t,r)),o.baseTexture.cacheId=s,De.addToCache(o.baseTexture,s),le.addToCache(o,s)):!o&&t instanceof De&&(o=new le(t),le.addToCache(o,s)),o}static fromURL(t,r){const n=Object.assign({autoLoad:!1},r?.resourceOptions),i=le.from(t,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(t,r,n,i){return new le(De.fromBuffer(t,r,n,i))}static fromLoader(t,r,n,i){const s=new De(t,Object.assign({scaleMode:De.defaultOptions.scaleMode,resolution:Ds(r)},i)),{resource:o}=s;o instanceof gE&&(o.url=r);const a=new le(s);return n||(n=r),De.addToCache(a.baseTexture,n),le.addToCache(a,n),n!==r&&(De.addToCache(a.baseTexture,r),le.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(h=>{a.baseTexture.once("loaded",()=>h(a))})}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),ui[r]&&ui[r]!==t&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),ui[r]=t)}static removeFromCache(t){if(typeof t=="string"){const r=ui[t];if(r){const n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete ui[t],r}}else if(t?.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)ui[t.textureCacheIds[r]]===t&&delete ui[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=t,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const h=o&&a?"and":"or",d=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,p=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${d} ${h} ${p}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return le._EMPTY||(le._EMPTY=new le(new De),Ch(le._EMPTY),Ch(le._EMPTY.baseTexture)),le._EMPTY}static get WHITE(){if(!le._WHITE){const t=fe.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),le._WHITE=new le(De.from(t)),Ch(le._WHITE),Ch(le._WHITE.baseTexture)}return le._WHITE}}class Lo extends le{constructor(t,r){super(t,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(t*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:r}=this;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))}static create(t){return new Lo(new mE(t))}}class xE{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,n=Mt.NONE){const i=new mE(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new Lo(i)}getOptimalTexture(t,r,n=1,i=Mt.NONE){let s;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Nd(t),r=Nd(r),s=((t&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(t,r,n){const i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||Mt.NONE);return i.filterFrame=t.filterFrame,i}returnTexture(t){const r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}xE.SCREEN_KEY=-1;class P3 extends Os{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class yE extends Os{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new At(this.vertices),this.uvBuffer=new At(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/t.width,this.uvs[3]=i,this.uvs[4]=n+r.width/t.width,this.uvs[5]=i+r.height/t.height,this.uvs[6]=n,this.uvs[7]=i+r.height/t.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class I3{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Mt.NONE,this.sourceFrame=new Ue,this.destinationFrame=new Ue,this.bindingSourceFrame=new Ue,this.bindingDestinationFrame=new Ue,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Ah=[new We,new We,new We,new We],Lp=new ft;class _E{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new xE,this.statePool=[],this.quad=new P3,this.quadUv=new yE,this.tempRect=new Ue,this.activeState={},this.globalUniforms=new Wn({outputFrame:new Ue,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new I3,o=this.renderer.renderTexture;let a=r[0].resolution,h=r[0].multisample,d=r[0].padding,p=r[0].autoFit,c=r[0].legacy??!0;for(let v=1;v<r.length;v++){const y=r[v];a=Math.min(a,y.resolution),h=Math.min(h,y.multisample),d=this.useMaxPadding?Math.max(d,y.padding):d+y.padding,p=p&&y.autoFit,c=c||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=h,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(d);const f=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Lp.copyFrom(n.projection.transform).invert(),f),p?(s.sourceFrame.fit(f),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(f)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,h),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const d=i.filterArea;d[0]=r.destinationFrame.width,d[1]=r.destinationFrame.height,d[2]=r.sourceFrame.x,d[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const h=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,h.renderTexture,hi.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let d=r.renderTexture,p=this.getOptimalFilterTexture(d.width,d.height,r.resolution);p.filterFrame=d.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&r.multisample>1&&(p=this.getOptimalFilterTexture(d.width,d.height,r.resolution),p.filterFrame=d.filterFrame),n[c].apply(this,d,p,hi.CLEAR,r);const f=d;d=p,p=f}n[c].apply(this,d,h.renderTexture,hi.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(d),this.returnFilterTexture(p)}r.clear(),this.statePool.push(r)}bindAndClear(t,r=hi.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===hi.CLEAR||r===hi.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,r,n,i){const s=this.renderer;s.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Dn.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Dn.TRIANGLE_STRIP))}calculateSpriteMatrix(t,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=t.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(ft.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,r,n=1,i=Mt.NONE){return this.texturePool.getOptimalTexture(t,r,n,i)}getFilterTexture(t,r,n){if(typeof t=="number"){const s=t;t=r,r=s}t=t||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||Mt.NONE);return i.filterFrame=t.filterFrame,i}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,r){const n=Ah[0],i=Ah[1],s=Ah[2],o=Ah[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(s,s),t.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),h=Math.min(n.y,i.y,s.y,o.y),d=Math.max(n.x,i.x,s.x,o.x),p=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=h,r.width=d-a,r.height=p-h}roundFrame(t,r,n,i,s){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:h,d}=s;if((Math.abs(a)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(d)>1e-4))return}s=s?Lp.copyFrom(s):Lp.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,t),t.ceil(r),this.transformAABB(s.invert(),t)}}}_E.extension={type:pe.RendererSystem,name:"filter"};Te.add(_E);class R3{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Mt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const M3=new Ue;class bE{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Zg(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ue,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;fe.PREFER_ENV===Bo.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,r,n=0){const{gl:i}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=n),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){const o=r.width>>n,a=r.height>>n,h=o/r.width;this.setViewport(r.x*h,r.y*h,o,a)}else{const o=t.width>>n,a=t.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,r,n,i){const s=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=n,s.height=i,this.gl.viewport(t,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,r,n,i,s=Bg.COLOR|Bg.DEPTH){const{gl:o}=this;o.clearColor(t,r,n,i),o.clear(s)}initFramebuffer(t){const{gl:r}=this,n=new R3(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));const i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],h=a.parentTextureArray||a;this.renderer.texture.bind(h,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,r){const{gl:n}=this,i=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let h=0;h<o;h++){const d=s[h],p=d.parentTextureArray||d;this.renderer.texture.bind(p,0),h===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,p._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+h,d.target,p._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+h))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const d=t.depthTexture;this.renderer.texture.bind(d,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,r)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:r}=this;let n=Mt.NONE;if(t<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=Mt.NONE),n}blit(t,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const h=i.glFramebuffers[a];if(!h)return;if(!t){if(!h.msaaBuffer)return;const p=i.colorTextures[0];if(!p)return;h.blitFramebuffer||(h.blitFramebuffer=new Zg(i.width,i.height),h.blitFramebuffer.addColorTexture(0,p)),t=h.blitFramebuffer,t.colorTextures[0]!==p&&(t.colorTextures[0]=p,t.dirtyId++,t.dirtyFormat++),(t.width!==i.width||t.height!==i.height)&&(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}r||(r=M3,r.width=i.width,r.height=i.height),n||(n=r);const d=r.width===n.width&&r.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,d?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,r){const n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(t){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)}forceStencil(){const t=this.current;if(!t)return;const r=t.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;t.stencil=!0;const n=t.width,i=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),r.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ue}destroy(){this.renderer=null}}bE.extension={type:pe.RendererSystem,name:"framebuffer"};Te.add(bE);const Dp={5126:4,5123:2,5121:1};class wE{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;fe.PREFER_ENV===Bo.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=i=>n.bindVertexArrayOES(i),t.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),t.drawElementsInstanced=(i,s,o,a,h)=>n.drawElementsInstancedANGLE(i,s,o,a,h),t.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(t,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(t,r,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const i=t.buffers[n];r.update(i)}}checkCompatibility(t,r){const n=t.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,r){const n=t.attributes,i=r.attributeData,s=["g",t.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(t,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);const h=this.getSignature(t,a),d=t.glVertexArrayObjects[this.CONTEXT_UID];let p=d[h];if(p)return d[a.id]=p,p;const c=t.buffers,f=t.attributes,m={},v={};for(const y in c)m[y]=0,v[y]=0;for(const y in f)!f[y].size&&a.attributeData[y]?f[y].size=a.attributeData[y].size:f[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),m[f[y].buffer]+=f[y].size*Dp[f[y].type];for(const y in f){const E=f[y],x=E.size;E.stride===void 0&&(m[E.buffer]===x*Dp[E.type]?E.stride=0:E.stride=m[E.buffer]),E.start===void 0&&(E.start=v[E.buffer],v[E.buffer]+=x*Dp[E.type])}p=i.createVertexArray(),i.bindVertexArray(p);for(let y=0;y<c.length;y++){const E=c[y];o.bind(E),n&&E._glBuffers[s].refCount++}return this.activateVao(t,a),d[a.id]=p,d[h]=p,i.bindVertexArray(null),o.unbind(gi.ARRAY_BUFFER),p}disposeGeometry(t,r){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=t.buffers,o=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(let a=0;a<s.length;a++){const h=s[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&o.dispose(s[a],r))}if(!r){for(const a in n)if(a[0]==="g"){const h=n[a];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)}activateVao(t,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let h=null;for(const d in a){const p=a[d],c=o[p.buffer],f=c._glBuffers[i];if(r.attributeData[d]){h!==f&&(s.bind(c),h=f);const m=r.attributeData[d].location;if(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,p.size,p.type||n.FLOAT,p.normalized,p.stride,p.start),p.instance)if(this.hasInstance)n.vertexAttribDivisor(m,p.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,h=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,r||o.indexBuffer.data.length,h,(n||0)*a,i||1):s.drawElements(t,r||o.indexBuffer.data.length,h,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,r||o.getSize(),i||1):s.drawArrays(t,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}wE.extension={type:pe.RendererSystem,name:"geometry"};Te.add(wE);const lb=new ft;class b1{constructor(t,r){this._texture=t,this.mapCoord=new ft,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,r){r===void 0&&(r=t);const n=this.mapCoord;for(let i=0;i<t.length;i+=2){const s=t[i],o=t[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(t){const r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(lb.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(lb));const o=r.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,d=this.clampOffset;return a[0]=(r._frame.x+h+d)/o.width,a[1]=(r._frame.y+h+d)/o.height,a[2]=(r._frame.x+r._frame.width-h+d)/o.width,a[3]=(r._frame.y+r._frame.height-h+d)/o.height,this.uClampOffset[0]=d/o.realWidth,this.uClampOffset[1]=d/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var N3=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,B3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class L3 extends Zt{constructor(t,r,n){let i=null;typeof t!="string"&&r===void 0&&n===void 0&&(i=t,t=void 0,r=void 0,n=void 0),super(t||B3,r||N3,n),this.maskSprite=i,this.maskMatrix=new ft}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,r,n,i){const s=this._maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new b1(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,r,n,i))}}class D3{constructor(t=null){this.type=Lt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Zt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Lt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class SE{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new D3;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Lt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Lt.SCISSOR:this.renderer.scissor.push(n);break;case Lt.STENCIL:this.renderer.stencil.push(n);break;case Lt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Lt.COLOR:this.pushColorMask(n);break}n.type===Lt.SPRITE&&this.maskStack.push(n)}pop(t){const r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Lt.SCISSOR:this.renderer.scissor.pop(r);break;case Lt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Lt.SPRITE:this.popSpriteMask(r);break;case Lt.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Lt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const r=t.maskObject;r?r.isSprite?t.type=Lt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Lt.SCISSOR:t.type=Lt.STENCIL:t.type=Lt.COLOR}pushSpriteMask(t){const{maskObject:r}=t,n=t._target;let i=t._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new L3]));const s=this.renderer,o=s.renderTexture;let a,h;if(o.current){const p=o.current;a=t.resolution||p.resolution,h=t.multisample??p.multisample}else a=t.resolution||s.resolution,h=t.multisample??s.multisample;i[0].resolution=a,i[0].multisample=h,i[0].maskSprite=r;const d=n.filterArea;n.filterArea=r.getBounds(!0),s.filter.push(n,i),n.filterArea=d,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const r=t._colorMask,n=t._colorMask=r&t.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const r=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}SE.extension={type:pe.RendererSystem,name:"mask"};Te.add(SE);class EE{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=t;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const ub=new ft,cb=[],rd=class extends EE{constructor(e){super(e),this.glConst=fe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,cb.pop()??new Ue);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||rd.isMatrixRotated(t.worldTransform)||rd.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,n,i){rd.isMatrixRotated(i)||(i=i?ub.copyFrom(i):ub.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&cb.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let TE=rd;TE.extension={type:pe.RendererSystem,name:"scissor"};Te.add(TE);class CE extends EE{constructor(t){super(t),this.glConst=fe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const r=t.maskObject,{gl:n}=this.renderer,i=t._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(t._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}CE.extension={type:pe.RendererSystem,name:"stencil"};Te.add(CE);class AE{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const r in t)this.plugins[r]=new t[r](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}AE.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"_plugin"};Te.add(AE);class kE{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ft,this.transform=null}update(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(t){}destroy(){this.renderer=null}}kE.extension={type:pe.RendererSystem,name:"projection"};Te.add(kE);const O3=new ff;class PE{constructor(t){this.renderer=t,this._tempMatrix=new ft}generateTexture(t,r){const{region:n,...i}=r||{},s=n||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Lo.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=O3,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}PE.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"textureGenerator"};Te.add(PE);const ro=new Ue,Ml=new Ue;class IE{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ue,this.destinationFrame=new Ue,this.viewportFrame=new Ue}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,r,n){const i=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,r||(ro.width=t.frame.width,ro.height=t.frame.height,r=ro),n||(Ml.x=t.frame.x,Ml.y=t.frame.y,Ml.width=r.width,Ml.height=r.height,n=Ml),o=s.framebuffer):(a=i.resolution,r||(ro.width=i._view.screen.width,ro.height=i._view.screen.height,r=ro),n||(n=ro,n.width=r.width,n.height=r.height));const h=this.viewportFrame;h.x=n.x*a,h.y=n.y*a,h.width=n.width*a,h.height=n.height*a,t||(h.y=i.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(n,r,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(t,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=et.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:h,y:d,width:p,height:c}=this.viewportFrame;h=Math.round(h),d=Math.round(d),p=Math.round(p),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,d,p,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}IE.extension={type:pe.RendererSystem,name:"renderTexture"};Te.add(IE);class F3{constructor(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function U3(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=t.getActiveAttrib(e,i);if(s.name.startsWith("gl_"))continue;const o=fE(t,s.type),a={type:o,name:s.name,size:dE(o),location:t.getAttribLocation(e,s.name)};r[s.name]=a}return r}function H3(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=t.getActiveUniform(e,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),h=fE(t,s.type);r[o]={name:o,index:i,type:h,size:s.size,isArray:a,value:cE(h,s.size)}}return r}function z3(e,t){const r=rb(e,e.VERTEX_SHADER,t.vertexSrc),n=rb(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const s=t.extra?.transformFeedbackVaryings;if(s&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||g3(e,i,r,n),t.attributeData=U3(i,e),t.uniformData=H3(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((d,p)=>d>p?1:-1);for(let d=0;d<h.length;d++)t.attributeData[h[d]].location=d,e.bindAttribLocation(i,d,h[d]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const o={};for(const h in t.uniformData){const d=t.uniformData[h];o[h]={location:e.getUniformLocation(i,h),value:cE(d.type,d.size)}}return new F3(i,o)}function G3(e,t,r,n,i){r.buffer.update(i)}const W3={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},RE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function j3(e){const t=e.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<t.length;s++){const o=t[s];if(r=RE[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function $3(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort((n,i)=>n.index-i.index),r}function V3(e,t){if(!e.autoManage)return{size:0,syncFunc:G3};const r=$3(e.uniforms,t),{uboElements:n,size:i}=j3(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],h=e.uniforms[a.data.name],d=a.data.name;let p=!1;for(let c=0;c<Da.length;c++){const f=Da[c];if(f.codeUbo&&f.test(a.data,h)){s.push(`offset = ${a.offset/4};`,Da[c].codeUbo(a.data.name,h)),p=!0;break}}if(!p)if(a.data.size>1){const c=dE(a.data.type),f=Math.max(RE[a.data.type]/16,1),m=c/f,v=(4-m%4)%4;s.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${m}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const c=W3[a.data.type];s.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let X3=0;const kh={textureCount:0,uboCount:0};class ME{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=X3++}systemCheck(){if(!x3())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(kh.textureCount=0,kh.uboCount=0,this.syncUniformGroup(t.uniformGroup,kh)),i}setUniforms(t){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,r){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))}syncUniforms(t,r,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(r.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=f3(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,r){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,kh,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(t,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=V3(t,this.shader.program.uniformData)),t.autoManage){const h=new Float32Array(a.size/4);t.buffer.update(h)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]}getSignature(t,r,n){const i=t.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const r=this.gl,n=t.program,i=z3(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ME.extension={type:pe.RendererSystem,name:"shader"};Te.add(ME);class vf{constructor(t){this.renderer=t}run(t){const{renderer:r}=this;r.runners.init.emit(r.options),t.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}vf.defaultOptions={hello:!1};vf.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"startup"};Te.add(vf);function Y3(e,t=[]){return t[ye.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.ADD]=[e.ONE,e.ONE],t[ye.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.NONE]=[0,0],t[ye.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ye.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ye.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ye.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ye.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ye.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ye.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ye.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ye.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ye.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ye.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const K3=0,Q3=1,q3=2,Z3=3,J3=4,eP=5,Jg=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ye.NONE,this._blendEq=!1,this.map=[],this.map[K3]=this.setBlend,this.map[Q3]=this.setOffset,this.map[q3]=this.setCullFace,this.map[Z3]=this.setDepthTest,this.map[J3]=this.setFrontFace,this.map[eP]=this.setDepthMask,this.checks=[],this.defaultState=new qi,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Y3(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Jg.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Jg.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let NE=Jg;NE.extension={type:pe.RendererSystem,name:"state"};Te.add(NE);class tP extends zu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const r=(t.priority??[]).filter(i=>t.systems[i]),n=[...r,...Object.keys(t.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(t.systems[i],i)}addRunners(...t){t.forEach(r=>{this.runners[r]=new Gn(r)})}addSystem(t,r){const n=new t(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(t,r){const n=Object.keys(this._systemsHash);t.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[t.name](r[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const nd=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=nd.defaultMaxIdle,this.checkCountMax=nd.defaultCheckCountMax,this.mode=nd.defaultMode}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==g1.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let n=0;for(let i=0;i<t.length;i++)t[i]!==null&&(t[n++]=t[i]);t.length=n}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};let Ln=nd;Ln.defaultMode=g1.AUTO;Ln.defaultMaxIdle=60*60;Ln.defaultCheckCountMax=60*10;Ln.extension={type:pe.RendererSystem,name:"textureGC"};Te.add(Ln);class Op{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Pe.UNSIGNED_BYTE,this.internalFormat=ce.RGBA,this.samplerType=0}}function rP(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[Pe.UNSIGNED_BYTE]:{[ce.RGBA]:e.RGBA8,[ce.RGB]:e.RGB8,[ce.RG]:e.RG8,[ce.RED]:e.R8,[ce.RGBA_INTEGER]:e.RGBA8UI,[ce.RGB_INTEGER]:e.RGB8UI,[ce.RG_INTEGER]:e.RG8UI,[ce.RED_INTEGER]:e.R8UI,[ce.ALPHA]:e.ALPHA,[ce.LUMINANCE]:e.LUMINANCE,[ce.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Pe.BYTE]:{[ce.RGBA]:e.RGBA8_SNORM,[ce.RGB]:e.RGB8_SNORM,[ce.RG]:e.RG8_SNORM,[ce.RED]:e.R8_SNORM,[ce.RGBA_INTEGER]:e.RGBA8I,[ce.RGB_INTEGER]:e.RGB8I,[ce.RG_INTEGER]:e.RG8I,[ce.RED_INTEGER]:e.R8I},[Pe.UNSIGNED_SHORT]:{[ce.RGBA_INTEGER]:e.RGBA16UI,[ce.RGB_INTEGER]:e.RGB16UI,[ce.RG_INTEGER]:e.RG16UI,[ce.RED_INTEGER]:e.R16UI,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Pe.SHORT]:{[ce.RGBA_INTEGER]:e.RGBA16I,[ce.RGB_INTEGER]:e.RGB16I,[ce.RG_INTEGER]:e.RG16I,[ce.RED_INTEGER]:e.R16I},[Pe.UNSIGNED_INT]:{[ce.RGBA_INTEGER]:e.RGBA32UI,[ce.RGB_INTEGER]:e.RGB32UI,[ce.RG_INTEGER]:e.RG32UI,[ce.RED_INTEGER]:e.R32UI,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Pe.INT]:{[ce.RGBA_INTEGER]:e.RGBA32I,[ce.RGB_INTEGER]:e.RGB32I,[ce.RG_INTEGER]:e.RG32I,[ce.RED_INTEGER]:e.R32I},[Pe.FLOAT]:{[ce.RGBA]:e.RGBA32F,[ce.RGB]:e.RGB32F,[ce.RG]:e.RG32F,[ce.RED]:e.R32F,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Pe.HALF_FLOAT]:{[ce.RGBA]:e.RGBA16F,[ce.RGB]:e.RGB16F,[ce.RG]:e.RG16F,[ce.RED]:e.R16F},[Pe.UNSIGNED_SHORT_5_6_5]:{[ce.RGB]:e.RGB565},[Pe.UNSIGNED_SHORT_4_4_4_4]:{[ce.RGBA]:e.RGBA4},[Pe.UNSIGNED_SHORT_5_5_5_1]:{[ce.RGBA]:e.RGB5_A1},[Pe.UNSIGNED_INT_2_10_10_10_REV]:{[ce.RGBA]:e.RGB10_A2,[ce.RGBA_INTEGER]:e.RGB10_A2UI},[Pe.UNSIGNED_INT_10F_11F_11F_REV]:{[ce.RGB]:e.R11F_G11F_B10F},[Pe.UNSIGNED_INT_5_9_9_9_REV]:{[ce.RGB]:e.RGB9_E5},[Pe.UNSIGNED_INT_24_8]:{[ce.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Pe.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ce.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[Pe.UNSIGNED_BYTE]:{[ce.RGBA]:e.RGBA,[ce.RGB]:e.RGB,[ce.ALPHA]:e.ALPHA,[ce.LUMINANCE]:e.LUMINANCE,[ce.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Pe.UNSIGNED_SHORT_5_6_5]:{[ce.RGB]:e.RGB},[Pe.UNSIGNED_SHORT_4_4_4_4]:{[ce.RGBA]:e.RGBA},[Pe.UNSIGNED_SHORT_5_5_5_1]:{[ce.RGBA]:e.RGBA}},t}class BE{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new De,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=rP(t);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Op(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Op(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(t,r=0){const{gl:n}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===t&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(t.target,this.emptyTextures[t.target].texture),n[i]=null)}ensureSamplerType(t){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(!!n)for(let s=t-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==Lg.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const r=new Op(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r}initTextureType(t,r){r.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,this.webGLVersion===2&&t.type===Pe.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type}updateTexture(t){const r=t._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(t,r),t.resource?.upload(n,t,r))r.samplerType!==Lg.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,s=t.realHeight,o=n.gl;(r.width!==i||r.height!==s||r.dirtyId<0)&&(r.width=i,r.height=s,o.texImage2D(t.target,0,r.internalFormat,i,s,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}destroyTexture(t,r){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(t);i!==-1&&Ba(this.managedTextures,i,1)}}updateTextureStyle(t){const r=t._glTextures[this.CONTEXT_UID];!r||((t.mipmap===yi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=Wi.CLAMP:r.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)}setStyle(t,r){const n=this.gl;if(r.mipmap&&t.mipmap!==yi.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Ui.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Ui.LINEAR){const s=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Ui.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Ui.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}BE.extension={type:pe.RendererSystem,name:"texture"};Te.add(BE);class LE{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();t._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];!a||(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,r){const n=t._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const h=a._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&s.dispose(a,r))}!n||(r||i.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}LE.extension={type:pe.RendererSystem,name:"transformFeedback"};Te.add(LE);class xf{constructor(t){this.renderer=t}init(t){this.screen=new Ue(0,0,t.width,t.height),this.element=t.view||fe.ADAPTER.createCanvas(),this.resolution=t.resolution||fe.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,r){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}xf.defaultOptions={width:800,height:600,resolution:fe.RESOLUTION,autoDensity:!1};xf.extension={type:[pe.RendererSystem,pe.CanvasRendererSystem],name:"_view"};Te.add(xf);fe.PREFER_ENV=Bo.WEBGL2;fe.STRICT_TEXTURE_CACHE=!1;fe.RENDER_OPTIONS={...gf.defaultOptions,...mf.defaultOptions,...xf.defaultOptions,...vf.defaultOptions};Object.defineProperties(fe,{WRAP_MODE:{get(){return De.defaultOptions.wrapMode},set(e){He("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),De.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return De.defaultOptions.scaleMode},set(e){He("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),De.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return De.defaultOptions.mipmap},set(e){He("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),De.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return De.defaultOptions.anisotropicLevel},set(e){He("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),De.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return He("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Zt.defaultResolution},set(e){Zt.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return He("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Zt.defaultMultisample},set(e){Zt.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Bn.defaultMaxTextures},set(e){He("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Bn.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Bn.defaultBatchSize},set(e){He("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Bn.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Bn.canUploadSameBuffer},set(e){He("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Bn.canUploadSameBuffer=e}},GC_MODE:{get(){return Ln.defaultMode},set(e){He("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ln.defaultMode=e}},GC_MAX_IDLE:{get(){return Ln.defaultMaxIdle},set(e){He("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ln.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Ln.defaultCheckCountMax},set(e){He("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ln.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return On.defaultVertexPrecision},set(e){He("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),On.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return On.defaultFragmentPrecision},set(e){He("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),On.defaultFragmentPrecision=e}}});var Us=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Us||{});class Fp{constructor(t,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}match(t,r=null){return this.fn===t&&this.context===r}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=t?null:r,this.previous=null,r}}const Hr=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Fp(null,null,1/0),this.deltaMS=1/Hr.targetFPMS,this.elapsedMS=1/Hr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Us.NORMAL){return this._addListener(new Fp(e,t,r))}addOnce(e,t,r=Us.NORMAL){return this._addListener(new Fp(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Hr.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,Hr.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Hr._shared){const e=Hr._shared=new Hr;e.autoStart=!0,e._protected=!0}return Hr._shared}static get system(){if(!Hr._system){const e=Hr._system=new Hr;e.autoStart=!0,e._protected=!0}return Hr._system}};let Pt=Hr;Pt.targetFPMS=.06;Object.defineProperties(fe,{TARGET_FPMS:{get(){return Pt.targetFPMS},set(e){He("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Pt.targetFPMS=e}}});class DE{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Us.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Pt.shared:new Pt,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}DE.extension=pe.Application;Te.add(DE);const OE=[];Te.handleByList(pe.Renderer,OE);function nP(e){for(const t of OE)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var iP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,sP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const oP=iP,FE=sP;class UE{constructor(t){this.renderer=t}contextChange(t){let r;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}r>=Mt.HIGH?this.multisample=Mt.HIGH:r>=Mt.MEDIUM?this.multisample=Mt.MEDIUM:r>=Mt.LOW?this.multisample=Mt.LOW:this.multisample=Mt.NONE}destroy(){}}UE.extension={type:pe.RendererSystem,name:"_multisample"};Te.add(UE);class aP{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class HE{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);r.bindBuffer(t.type,i.buffer)}unbind(t){const{gl:r}=this;r.bindBuffer(t,null)}bindBufferBase(t,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==t){const s=t._glBuffers[i]||this.createGLBuffer(t);this.boundBufferBases[r]=t,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(t,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=t._glBuffers[s]||this.createGLBuffer(t);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==i.updateID)if(i.updateID=t._updateID,r.bindBuffer(t.type,i.buffer),i.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{const s=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,s)}}dispose(t,r){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)}createGLBuffer(t){const{CONTEXT_UID:r,gl:n}=this;return t._glBuffers[r]=new aP(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]}}HE.extension={type:pe.RendererSystem,name:"buffer"};Te.add(HE);class zE{constructor(t){this.renderer=t}render(t,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=t),!a){const h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}zE.extension={type:pe.RendererSystem,name:"objectRenderer"};Te.add(zE);const ev=class extends tP{constructor(e){super(),this.type=YS.WEBGL,e=Object.assign({},fe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Wn({projectionMatrix:new ft},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ev.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(He("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=ev.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:Mk()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return He("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return He("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return He("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return He("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){He("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return He("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){He("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return He("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Qa=ev;Qa.extension={type:pe.Renderer,priority:1};Qa.__plugins={};Qa.__systems={};Te.handleByMap(pe.RendererPlugin,Qa.__plugins);Te.handleByMap(pe.RendererSystem,Qa.__systems);Te.add(Qa);class GE extends ku{constructor(t,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new De;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,r){for(let n=0;n<this.length;n++)!t[n]||(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof ku?this.addResourceAt(t[n],n):this.addResourceAt(oE(t[n],r),n))}dispose(){for(let t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)}unbind(t){super.unbind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)}load(){if(this._load)return this._load;const r=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(r).then(()=>{const{realWidth:n,realHeight:i}=this.items[0];return this.resize(n,i),Promise.resolve(this)}),this._load}}class lP extends GE{constructor(t,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Ra.TEXTURE_2D_ARRAY}upload(t,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=t;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let h=0;h<i;h++){const d=o[h];s[h]<d.dirtyId&&(s[h]=d.dirtyId,d.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,d.resource.width,d.resource.height,1,r.format,n.type,d.resource.source))}return!0}}class uP extends Fs{constructor(t){super(t)}static test(t){const{OffscreenCanvas:r}=globalThis;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Wl=class extends GE{constructor(e,t){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=t||{};if(e&&e.length!==Wl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:n});for(let o=0;o<Wl.SIDES;o++)this.items[o].target=Ra.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,e&&this.initFromArray(e,t),i!==!1&&this.load()}bind(e){super.bind(e),e.target=Ra.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Ra.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const n=this.itemDirtyIds;for(let i=0;i<Wl.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,r),n[i]=s.dirtyId):n[i]<-1&&(e.gl.texImage2D(s.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),n[i]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Wl.SIDES}};let WE=Wl;WE.SIDES=6;class Sa extends Fs{constructor(t,r){r=r||{};let n,i;typeof t=="string"?(n=Sa.EMPTY,i=t):(n=t,i=null),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,r)=>{if(this.url===null){t(this);return}try{const n=await fe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vn.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(t,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(t,r,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Sa._EMPTY=Sa._EMPTY??fe.ADAPTER.createCanvas(0,0),Sa._EMPTY}}const id=class extends Fs{constructor(e,t){t=t||{},super(fe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},id.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Fs.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{!this._resolve||(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${Ro()}`,s.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(e){const t=id.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&id.SVG_XML.test(e)}};let Pu=id;Pu.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Pu.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const tv=class extends Fs{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];Fs.crossOrigin(r,n,t.crossorigin);for(let i=0;i<e.length;++i){const s=document.createElement("source");let{src:o,mime:a}=e[i];o=o||e[i];const h=o.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);a=a||tv.MIME_TYPES[d]||`video/${d}`,s.src=o,s.type=a,r.appendChild(s)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=Pt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Pt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Pt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||tv.TYPES.includes(t)}};let w1=tv;w1.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];w1.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Yg.push(Sa,gE,uP,w1,Pu,Gu,WE,lP);class Dd{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ue.EMPTY:(t=t||new Ue(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,r){const{a:n,b:i,c:s,d:o,tx:a,ty:h}=t,d=n*r.x+s*r.y+a,p=i*r.x+o*r.y+h;this.minX=Math.min(this.minX,d),this.maxX=Math.max(this.maxX,d),this.minY=Math.min(this.minY,p),this.maxY=Math.max(this.maxY,p)}addQuad(t){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=t[0],a=t[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[2],a=t[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[4],a=t[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[6],a=t[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(t,r,n,i,s){this.addFrameMatrix(t.worldTransform,r,n,i,s)}addFrameMatrix(t,r,n,i,s){const o=t.a,a=t.b,h=t.c,d=t.d,p=t.tx,c=t.ty;let f=this.minX,m=this.minY,v=this.maxX,y=this.maxY,E=o*r+h*n+p,x=a*r+d*n+c;f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,y=x>y?x:y,E=o*i+h*n+p,x=a*i+d*n+c,f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,y=x>y?x:y,E=o*r+h*s+p,x=a*r+d*s+c,f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,y=x>y?x:y,E=o*i+h*s+p,x=a*i+d*s+c,f=E<f?E:f,m=x<m?x:m,v=E>v?E:v,y=x>y?x:y,this.minX=f,this.minY=m,this.maxX=v,this.maxY=y}addVertexData(t,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let h=r;h<n;h+=2){const d=t[h],p=t[h+1];i=d<i?d:i,s=p<s?p:s,o=d>o?d:o,a=p>a?p:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)}addVerticesMatrix(t,r,n,i,s=0,o=s){const a=t.a,h=t.b,d=t.c,p=t.d,c=t.tx,f=t.ty;let m=this.minX,v=this.minY,y=this.maxX,E=this.maxY;for(let x=n;x<i;x+=2){const _=r[x],w=r[x+1],T=a*_+d*w+c,P=p*w+h*_+f;m=Math.min(m,T-s),y=Math.max(y,T+s),v=Math.min(v,P-o),E=Math.max(E,P+o)}this.minX=m,this.minY=v,this.maxX=y,this.maxY=E}addBounds(t){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,r){const n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,s=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,h=this.minY,d=this.maxX,p=this.maxY;this.minX=n<a?n:a,this.minY=i<h?i:h,this.maxX=s>d?s:d,this.maxY=o>p?o:p}}addBoundsMatrix(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,r){const n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,s=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,h=this.minY,d=this.maxX,p=this.maxY;this.minX=n<a?n:a,this.minY=i<h?i:h,this.maxX=s>d?s:d,this.maxY=o>p?o:p}}pad(t=0,r=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)}addFramePad(t,r,n,i,s,o){t-=s,r-=o,n+=s,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class pt extends zu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new ff,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Dd,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const r=Object.keys(t);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(pt.prototype,i,Object.getOwnPropertyDescriptor(t,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Ue),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ue),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Dd);const r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)}toLocal(t,r,n,i){return r&&(t=r.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,r=0,n=1,i=1,s=0,o=0,a=0,h=0,d=0){return this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=h,this.pivot.y=d,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new cP),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*o3}set angle(t){this.transform.rotation=t*a3}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class cP extends pt{constructor(){super(...arguments),this.sortDirty=null}}pt.prototype.displayObjectUpdateTransform=pt.prototype.updateTransform;const hP=new ft;function dP(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const rv=class extends pt{constructor(){super(),this.children=[],this.sortableChildren=rv.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Ba(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Ba(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ba(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t,i=n-r;let s;if(i>0&&i<=n){s=this.children.splice(r,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(dP),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let n=0,i=this.children.length;n<i;++n){const s=this.children[n];s.visible&&s.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==rv.prototype._render&&(r=this.getBounds(!0));const i=e.projection.transform;if(i&&(n?(n=hP.copyFrom(n),n.prepend(i)):n=i),r&&t.intersects(r,n))this._render(e);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],h=a.cullable;a.cullable=h||!this.cullArea,a.render(e),a.cullable=h}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let i=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Lt.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<r.length;++n)r[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let $t=rv;$t.defaultSortableChildren=!1;$t.prototype.containerUpdateTransform=$t.prototype.updateTransform;Object.defineProperties(fe,{SORTABLE_CHILDREN:{get(){return $t.defaultSortableChildren},set(e){He("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),$t.defaultSortableChildren=e}}});var yf=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(yf||{});const Nl=new We,fP=new Uint16Array([0,1,2,0,2,3]);class Xn extends $t{constructor(t){super(),this._anchor=new zi(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new et(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ye.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||le.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=fP,this.pluginName="batch",this.isSprite=!0,this._roundPixels=fe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ss(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ss(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,h=r.ty,d=this.vertexData,p=t.trim,c=t.orig,f=this._anchor;let m=0,v=0,y=0,E=0;if(p?(v=p.x-f._x*c.width,m=v+p.width,E=p.y-f._y*c.height,y=E+p.height):(v=-f._x*c.width,m=v+c.width,E=-f._y*c.height,y=E+c.height),d[0]=n*v+s*E+a,d[1]=o*E+i*v+h,d[2]=n*m+s*E+a,d[3]=o*E+i*m+h,d[4]=n*m+s*y+a,d[5]=o*y+i*m+h,d[6]=n*v+s*y+a,d[7]=o*y+i*v+h,this._roundPixels){const x=fe.RESOLUTION;for(let _=0;_<d.length;++_)d[_]=Math.round(d[_]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,r=this.vertexTrimmedData,n=t.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,h=s.c,d=s.d,p=s.tx,c=s.ty,f=-i._x*n.width,m=f+n.width,v=-i._y*n.height,y=v+n.height;r[0]=o*f+h*v+p,r[1]=d*v+a*f+c,r[2]=o*m+h*v+p,r[3]=d*v+a*m+c,r[4]=o*m+h*y+p,r[5]=d*y+a*m+c,r[6]=o*f+h*y+p,r[7]=d*y+a*f+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Dd),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ue),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Nl);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return Nl.x>=i&&Nl.x<i+r&&(s=-n*this.anchor.y,Nl.y>=s&&Nl.y<s+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){const n=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(t,r){const n=t instanceof le?t:le.from(t,r);return new Xn(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const r=Ss(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const r=Ss(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||le.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Ph={willReadFrequently:!0},Se=class{static get experimentalLetterSpacingSupported(){let e=Se._experimentalLetterSpacingSupported;if(e!==void 0){const t=fe.ADAPTER.getCanvasRenderingContext2D().prototype;e=Se._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,n,i,s,o,a,h){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}static measureText(e,t,r,n=Se._canvas){r=r??t.wordWrap;const i=t.toFontString(),s=Se.measureFont(i);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=n.getContext("2d",Ph);o.font=i;const h=(r?Se.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),d=new Array(h.length);let p=0;for(let v=0;v<h.length;v++){const y=Se._measureText(h[v],t.letterSpacing,o);d[v]=y,p=Math.max(p,y)}let c=p+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const f=t.lineHeight||s.fontSize+t.strokeThickness;let m=Math.max(f,s.fontSize+t.strokeThickness*2)+(h.length-1)*(f+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new Se(e,t,c,m,h,d,f+t.leading,p,s)}static _measureText(e,t,r){let n=!1;Se.experimentalLetterSpacingSupported&&(Se.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let i=r.measureText(e).width;return i>0&&(n?i-=t:i+=(Se.graphemeSegmenter(e).length-1)*t),i}static wordWrap(e,t,r=Se._canvas){const n=r.getContext("2d",Ph);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:h,whiteSpace:d}=t,p=Se.collapseSpaces(d),c=Se.collapseNewlines(d);let f=!p;const m=t.wordWrapWidth+h,v=Se.tokenize(e);for(let y=0;y<v.length;y++){let E=v[y];if(Se.isNewline(E)){if(!c){o+=Se.addLine(s),f=!p,s="",i=0;continue}E=" "}if(p){const _=Se.isBreakingSpace(E),w=Se.isBreakingSpace(s[s.length-1]);if(_&&w)continue}const x=Se.getFromCache(E,h,a,n);if(x>m)if(s!==""&&(o+=Se.addLine(s),s="",i=0),Se.canBreakWords(E,t.breakWords)){const _=Se.wordWrapSplit(E);for(let w=0;w<_.length;w++){let T=_[w],P=T,I=1;for(;_[w+I];){const M=_[w+I];if(!Se.canBreakChars(P,M,E,w,t.breakWords))T+=M;else break;P=M,I++}w+=I-1;const R=Se.getFromCache(T,h,a,n);R+i>m&&(o+=Se.addLine(s),f=!1,s="",i=0),s+=T,i+=R}}else{s.length>0&&(o+=Se.addLine(s),s="",i=0);const _=y===v.length-1;o+=Se.addLine(E,!_),f=!1,s="",i=0}else x+i>m&&(f=!1,o+=Se.addLine(s),s="",i=0),(s.length>0||!Se.isBreakingSpace(E)||f)&&(s+=E,i+=x)}return o+=Se.addLine(s,!1),o}static addLine(e,t=!0){return e=Se.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,n){let i=r[e];return typeof i!="number"&&(i=Se._measureText(e,t,n)+t,r[e]=i),i}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!Se.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Se._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Se._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const i=e[n],s=e[n+1];if(Se.isBreakingSpace(i,s)||Se.isNewline(i)){r!==""&&(t.push(r),r=""),t.push(i);continue}r+=i}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,n,i){return!0}static wordWrapSplit(e){return Se.graphemeSegmenter(e)}static measureFont(e){if(Se._fonts[e])return Se._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=Se._canvas,n=Se._context;n.font=e;const i=Se.METRICS_STRING+Se.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let o=Math.ceil(n.measureText(Se.BASELINE_SYMBOL).width);const a=Math.ceil(Se.HEIGHT_MULTIPLIER*o);if(o=o*Se.BASELINE_MULTIPLIER|0,s===0||a===0)return Se._fonts[e]=t,t;r.width=s,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,o);const h=n.getImageData(0,0,s,a).data,d=h.length,p=s*4;let c=0,f=0,m=!1;for(c=0;c<o;++c){for(let v=0;v<p;v+=4)if(h[f+v]!==255){m=!0;break}if(!m)f+=p;else break}for(t.ascent=o-c,f=d-p,m=!1,c=a;c>o;--c){for(let v=0;v<p;v+=4)if(h[f+v]!==255){m=!0;break}if(!m)f-=p;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,Se._fonts[e]=t,t}static clearMetrics(e=""){e?delete Se._fonts[e]:Se._fonts={}}static get _canvas(){if(!Se.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",Ph)?.measureText)return Se.__canvas=t,t;e=fe.ADAPTER.createCanvas()}catch{e=fe.ADAPTER.createCanvas()}e.width=e.height=10,Se.__canvas=e}return Se.__canvas}static get _context(){return Se.__context||(Se.__context=Se._canvas.getContext("2d",Ph)),Se.__context}};let Qt=Se;Qt.METRICS_STRING="|\xC9q\xC5";Qt.BASELINE_SYMBOL="M";Qt.BASELINE_MULTIPLIER=1.4;Qt.HEIGHT_MULTIPLIER=2;Qt.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(r=>r.segment)}return e=>[...e]})();Qt.experimentalLetterSpacing=!1;Qt._fonts={};Qt._newlines=[10,13];Qt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const pP=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],jl=class{constructor(e){this.styleID=0,this.reset(),Hp(this,e,e)}clone(){const e={};return Hp(e,this,jl.defaultStyle),new jl(e)}reset(){Hp(this,jl.defaultStyle,jl.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Up(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Up(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){mP(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Up(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!pP.includes(n)&&(n=`"${n}"`),t[r]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let Jt=jl;Jt.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:yf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Up(e){const t=et.shared;return Array.isArray(e)?e.map(r=>t.setValue(r).toHex()):t.setValue(e).toHex()}function mP(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function Hp(e,t,r){for(const n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const gP={texture:!0,children:!1,baseTexture:!0},nv=class extends Xn{constructor(e,t,r){let n=!1;r||(r=fe.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=le.from(r);i.orig=new Ue,i.trim=new Ue,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=nv.defaultResolution??fe.RESOLUTION,this._autoResolution=nv.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Qt.experimentalLetterSpacing}static set experimentalLetterSpacing(e){He("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Qt.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,n=Qt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,o=n.lines,a=n.lineHeight,h=n.lineWidths,d=n.maxLineWidth,p=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let c,f;const m=t.dropShadow?2:1;for(let v=0;v<m;++v){const y=t.dropShadow&&v===0,E=y?Math.ceil(Math.max(1,s)+t.padding*2):0,x=E*this._resolution;if(y){r.fillStyle="black",r.strokeStyle="black";const w=t.dropShadowColor,T=t.dropShadowBlur*this._resolution,P=t.dropShadowDistance*this._resolution;r.shadowColor=et.shared.setValue(w).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=T,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*P,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*P+x}else r.fillStyle=this._generateFillStyle(t,o,n),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let _=(a-p.fontSize)/2;a-p.fontSize<0&&(_=0);for(let w=0;w<o.length;w++)c=t.strokeThickness/2,f=t.strokeThickness/2+w*a+p.ascent+_,t.align==="right"?c+=d-h[w]:t.align==="center"&&(c+=(d-h[w])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[w],c+t.padding,f+t.padding-E,!0),t.fill&&this.drawLetterSpacing(o[w],c+t.padding,f+t.padding-E)}this.updateTexture()}drawLetterSpacing(e,t,r,n=!1){const s=this._style.letterSpacing;let o=!1;if(Qt.experimentalLetterSpacingSupported&&(Qt.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let a=t;const h=Qt.graphemeSegmenter(e);let d=this.context.measureText(e).width,p=0;for(let c=0;c<h.length;++c){const f=h[c];n?this.context.strokeText(f,a,r):this.context.fillText(f,a,r);let m="";for(let v=c+1;v<h.length;++v)m+=h[v];p=this.context.measureText(m).width,a+=d-p+s,d=p}}updateTexture(){const e=this.canvas;if(this._style.trim){const s=Kk(e);s.data&&(e.width=s.width,e.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,r=this._style,n=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let i;const s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-s-o*2,h=this.canvas.height/this._resolution-s-o*2,d=n.slice(),p=e.fillGradientStops.slice();if(!p.length){const c=d.length+1;for(let f=1;f<c;++f)p.push(f/c)}if(d.unshift(n[0]),p.unshift(0),d.push(n[n.length-1]),p.push(1),e.fillGradientType===yf.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,h+o);const c=r.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const m=r.lineHeight*(f-1)+c,v=r.lineHeight*f;let y=v;f>0&&m>v&&(y=(v+m)/2);const E=v+c,x=r.lineHeight*(f+1);let _=E;f+1<t.length&&x<E&&(_=(E+x)/2);const w=(_-y)/h;for(let T=0;T<d.length;T++){let P=0;typeof p[T]=="number"?P=p[T]:P=T/d.length;let I=Math.min(1,Math.max(0,y/h+P*w));I=Number(I.toFixed(5)),i.addColorStop(I,d[T])}}}else{i=this.context.createLinearGradient(o,h/2,a+o,h/2);const c=d.length+1;let f=1;for(let m=0;m<d.length;m++){let v;typeof p[m]=="number"?v=p[m]:v=f/c,i.addColorStop(v,d[m]),f++}}return i}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},gP,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Ss(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Ss(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Jt?this._style=e:this._style=new Jt(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Wu=nv;Wu.defaultAutoResolution=!0;class Od{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class sd{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const d in a){const p=a[d].split("="),c=p[0],f=p[1].replace(/"/gm,""),m=parseFloat(f),v=isNaN(m)?f:m;h[c]=v}n[o].push(h)}const i=new Od;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class iv{static test(t){const r=t;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const r=new Od,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),h=t.getElementsByTagName("distanceField");for(let d=0;d<n.length;d++)r.info.push({face:n[d].getAttribute("face"),size:parseInt(n[d].getAttribute("size"),10)});for(let d=0;d<i.length;d++)r.common.push({lineHeight:parseInt(i[d].getAttribute("lineHeight"),10)});for(let d=0;d<s.length;d++)r.page.push({id:parseInt(s[d].getAttribute("id"),10)||0,file:s[d].getAttribute("file")});for(let d=0;d<o.length;d++){const p=o[d];r.char.push({id:parseInt(p.getAttribute("id"),10),page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xoffset:parseInt(p.getAttribute("xoffset"),10),yoffset:parseInt(p.getAttribute("yoffset"),10),xadvance:parseInt(p.getAttribute("xadvance"),10)})}for(let d=0;d<a.length;d++)r.kerning.push({first:parseInt(a[d].getAttribute("first"),10),second:parseInt(a[d].getAttribute("second"),10),amount:parseInt(a[d].getAttribute("amount"),10)});for(let d=0;d<h.length;d++)r.distanceField.push({fieldType:h[d].getAttribute("fieldType"),distanceRange:parseInt(h[d].getAttribute("distanceRange"),10)});return r}}class sv{static test(t){return typeof t=="string"&&t.includes("<font>")?iv.test(fe.ADAPTER.parseXML(t)):!1}static parse(t){return iv.parse(fe.ADAPTER.parseXML(t))}}const zp=[sd,iv,sv];function vP(e){for(let t=0;t<zp.length;t++)if(zp[t].test(e))return zp[t];return null}function xP(e,t,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const h=r.dropShadow?r.dropShadowDistance:0,d=r.padding||0,p=e.width/n-h-d*2,c=e.height/n-h-d*2,f=o.slice(),m=r.fillGradientStops.slice();if(!m.length){const v=f.length+1;for(let y=1;y<v;++y)m.push(y/v)}if(f.unshift(o[0]),m.unshift(0),f.push(o[o.length-1]),m.push(1),r.fillGradientType===yf.LINEAR_VERTICAL){a=t.createLinearGradient(p/2,d,p/2,c+d);let v=0;const E=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let x=0;x<i.length;x++){const _=s.lineHeight*x;for(let w=0;w<f.length;w++){let T=0;typeof m[w]=="number"?T=m[w]:T=w/f.length;const P=_/c+T*E;let I=Math.max(v,P);I=Math.min(I,1),a.addColorStop(I,f[w]),v=I}}}else{a=t.createLinearGradient(d,c/2,p+d,c/2);const v=f.length+1;let y=1;for(let E=0;E<f.length;E++){let x;typeof m[E]=="number"?x=m[E]:x=y/v,a.addColorStop(x,f[E]),y++}}return a}function yP(e,t,r,n,i,s,o){const a=r.text,h=r.fontProperties;t.translate(n,i),t.scale(s,s);const d=o.strokeThickness/2,p=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=xP(e,t,o,s,[a],r),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,f=o.dropShadowBlur*s,m=o.dropShadowDistance*s;t.shadowColor=et.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*m,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,d,p+r.lineHeight-h.descent),o.fill&&t.fillText(a,d,p+r.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function od(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function jE(e){return Array.from?Array.from(e):e.split("")}function _P(e){typeof e=="string"&&(e=[e]);const t=[];for(let r=0,n=e.length;r<n;r++){const i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,h=o;a<=h;a++)t.push(String.fromCharCode(a))}else t.push(...jE(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Pn=class{constructor(e,t,r){const[n]=e.info,[i]=e.common,[s]=e.page,[o]=e.distanceField,a=Ds(s.file),h={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=h;for(let d=0;d<e.page.length;d++){const{id:p,file:c}=e.page[d];h[p]=t instanceof Array?t[d]:t[c],o?.fieldType&&o.fieldType!=="none"&&(h[p].baseTexture.alphaMode=Vn.NO_PREMULTIPLIED_ALPHA,h[p].baseTexture.mipmap=yi.OFF)}for(let d=0;d<e.char.length;d++){const{id:p,page:c}=e.char[d];let{x:f,y:m,width:v,height:y,xoffset:E,yoffset:x,xadvance:_}=e.char[d];f/=a,m/=a,v/=a,y/=a,E/=a,x/=a,_/=a;const w=new Ue(f+h[c].frame.x/a,m+h[c].frame.y/a,v,y);this.chars[p]={xOffset:E,yOffset:x,xAdvance:_,kerning:{},texture:new le(h[c].baseTexture,w),page:c}}for(let d=0;d<e.kerning.length;d++){let{first:p,second:c,amount:f}=e.kerning[d];p/=a,c/=a,f/=a,this.chars[c]&&(this.chars[c].kerning[p]=f)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let n;if(e instanceof Od)n=e;else{const s=vP(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}t instanceof le&&(t=[t]);const i=new Pn(n,t,r);return Pn.available[i.font]=i,i}static uninstall(e){const t=Pn.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Pn.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:o,textureHeight:a,...h}=Object.assign({},Pn.defaultOptions,r),d=_P(n),p=t instanceof Jt?t:new Jt(t),c=o,f=new Od;f.info[0]={face:p.fontFamily,size:p.fontSize},f.common[0]={lineHeight:p.fontSize};let m=0,v=0,y,E,x,_=0;const w=[];for(let P=0;P<d.length;P++){y||(y=fe.ADAPTER.createCanvas(),y.width=o,y.height=a,E=y.getContext("2d"),x=new De(y,{resolution:s,...h}),w.push(new le(x)),f.page.push({id:w.length-1,file:""}));const I=d[P],R=Qt.measureText(I,p,!1,y),M=R.width,N=Math.ceil(R.height),k=Math.ceil((p.fontStyle==="italic"?2:1)*M);if(v>=a-N*s){if(v===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${I}')`);--P,y=null,E=null,x=null,v=0,m=0,_=0;continue}if(_=Math.max(N+R.fontProperties.descent,_),k*s+m>=c){if(m===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${I}')`);--P,v+=_*s,v=Math.ceil(v),m=0,_=0;continue}yP(y,E,R,m,v,s,p);const L=od(R.text);f.char.push({id:L,page:w.length-1,x:m/s,y:v/s,width:k,height:N,xoffset:0,yoffset:0,xadvance:M-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),m+=(k+2*i)*s,m=Math.ceil(m)}for(let P=0,I=d.length;P<I;P++){const R=d[P];for(let M=0;M<I;M++){const N=d[M],k=E.measureText(R).width,L=E.measureText(N).width,D=E.measureText(R+N).width-(k+L);D&&f.kerning.push({first:od(R),second:od(N),amount:D})}}const T=new Pn(f,w,!0);return Pn.available[e]!==void 0&&Pn.uninstall(e),Pn.available[e]=T,T}};let Cr=Pn;Cr.ALPHA=[["a","z"],["A","Z"]," "];Cr.NUMERIC=[["0","9"]];Cr.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];Cr.ASCII=[[" ","~"]];Cr.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Pn.ALPHANUMERIC};Cr.available={};class bP{constructor(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Gp=new We,hb=new La,$E=class extends $t{constructor(e,t,r,n=Dn.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||qi.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=fe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Dn.TRIANGLES&&t.length<$E.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],r=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,h=i.d,d=i.tx,p=i.ty,c=this.vertexData;for(let f=0;f<c.length/2;f++){const m=r[f*2],v=r[f*2+1];c[f*2]=s*m+a*v+d,c[f*2+1]=o*m+h*v+p}if(this._roundPixels){const f=fe.RESOLUTION;for(let m=0;m<c.length;++m)c[m]=Math.round(c[m]*f)/f}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new bP(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Gp);const t=this.geometry.getBuffer("aVertexPosition").data,r=hb.points,n=this.geometry.getIndex().data,i=n.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=n[o]*2,h=n[o+1]*2,d=n[o+2]*2;if(r[0]=t[a],r[1]=t[a+1],r[2]=t[h],r[3]=t[h+1],r[4]=t[d],r[5]=t[d+1],hb.contains(Gp.x,Gp.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ja=$E;ja.BATCHABLE_SIZE=100;class _f extends Os{constructor(t,r,n){super();const i=new At(t),s=new At(r,!0),o=new At(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Pe.FLOAT).addAttribute("aTextureCoord",s,2,!1,Pe.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var wP=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,SP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Iu extends vi{constructor(t,r){const n={uSampler:t,alpha:1,uTextureMatrix:ft.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||On.from(SP,wP),n),this._colorDirty=!1,this.uvMatrix=new b1(t),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new et(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const r=this.texture.baseTexture.alphaMode;et.shared.setValue(this._tintColor).premultiply(this._alpha,r).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var EP=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,TP=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const db=[],fb=[],pb=[],VE=class extends $t{constructor(e,t={}){super();const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},VE.styleDefaults,t);if(!Cr.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new et(n),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new zi(()=>{this.dirty=!0},this,0,0),this._roundPixels=fe.ROUND_PIXELS,this.dirty=!0,this._resolution=fe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=Cr.available[this._fontName],t=this.fontSize,r=t/e.size,n=new We,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=jE(a),d=this._maxWidth*e.size/t,p=e.distanceFieldType==="none"?db:fb;let c=null,f=0,m=0,v=0,y=-1,E=0,x=0,_=0,w=0;for(let k=0;k<h.length;k++){const L=h[k],W=od(L);if(/(?:\s)/.test(L)&&(y=k,E=f,w++),L==="\r"||L===`
`){s.push(f),o.push(-1),m=Math.max(m,f),++v,++x,n.x=0,n.y+=e.lineHeight,c=null,w=0;continue}const D=e.chars[W];if(!D)continue;c&&D.kerning[c]&&(n.x+=D.kerning[c]);const U=pb.pop()||{texture:le.EMPTY,line:0,charCode:0,prevSpaces:0,position:new We};U.texture=D.texture,U.line=v,U.charCode=W,U.position.x=Math.round(n.x+D.xOffset+this._letterSpacing/2),U.position.y=Math.round(n.y+D.yOffset),U.prevSpaces=w,i.push(U),f=U.position.x+Math.max(D.xAdvance-D.xOffset,D.texture.orig.width),n.x+=D.xAdvance+this._letterSpacing,_=Math.max(_,D.yOffset+D.texture.height),c=W,y!==-1&&d>0&&n.x>d&&(++x,Ba(i,1+y-x,1+k-y),k=y,y=-1,s.push(E),o.push(i.length>0?i[i.length-1].prevSpaces:0),m=Math.max(m,E),v++,n.x=0,n.y+=e.lineHeight,c=null,w=0)}const T=h[h.length-1];T!=="\r"&&T!==`
`&&(/(?:\s)/.test(T)&&(f=E),s.push(f),m=Math.max(m,f),o.push(-1));const P=[];for(let k=0;k<=v;k++){let L=0;this._align==="right"?L=m-s[k]:this._align==="center"?L=(m-s[k])/2:this._align==="justify"&&(L=o[k]<0?0:(m-s[k])/o[k]),P.push(L)}const I=i.length,R={},M=[],N=this._activePagesMeshData;p.push(...N);for(let k=0;k<I;k++){const L=i[k].texture,W=L.baseTexture.uid;if(!R[W]){let D=p.pop();if(!D){const X=new _f;let K,Z;e.distanceFieldType==="none"?(K=new Iu(le.EMPTY),Z=ye.NORMAL):(K=new Iu(le.EMPTY,{program:On.from(TP,EP),uniforms:{uFWidth:0}}),Z=ye.NORMAL_NPM);const F=new ja(X,K);F.blendMode=Z,D={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:F,vertices:null,uvs:null,indices:null}}D.index=0,D.indexCount=0,D.vertexCount=0,D.uvsCount=0,D.total=0;const{_textureCache:U}=this;U[W]=U[W]||new le(L.baseTexture),D.mesh.texture=U[W],D.mesh.tint=this._tintColor.value,M.push(D),R[W]=D}R[W].total++}for(let k=0;k<N.length;k++)M.includes(N[k])||this.removeChild(N[k].mesh);for(let k=0;k<M.length;k++)M[k].mesh.parent!==this&&this.addChild(M[k].mesh);this._activePagesMeshData=M;for(const k in R){const L=R[k],W=L.total;if(!(L.indices?.length>6*W)||L.vertices.length<ja.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*W),L.uvs=new Float32Array(4*2*W),L.indices=new Uint16Array(6*W);else{const D=L.total,U=L.vertices;for(let X=D*4*2;X<U.length;X++)U[X]=0}L.mesh.size=6*W}for(let k=0;k<I;k++){const L=i[k];let W=L.position.x+P[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(W=Math.round(W));const D=W*r,U=L.position.y*r,X=L.texture,K=R[X.baseTexture.uid],Z=X.frame,F=X._uvs,O=K.index++;K.indices[O*6+0]=0+O*4,K.indices[O*6+1]=1+O*4,K.indices[O*6+2]=2+O*4,K.indices[O*6+3]=0+O*4,K.indices[O*6+4]=2+O*4,K.indices[O*6+5]=3+O*4,K.vertices[O*8+0]=D,K.vertices[O*8+1]=U,K.vertices[O*8+2]=D+Z.width*r,K.vertices[O*8+3]=U,K.vertices[O*8+4]=D+Z.width*r,K.vertices[O*8+5]=U+Z.height*r,K.vertices[O*8+6]=D,K.vertices[O*8+7]=U+Z.height*r,K.uvs[O*8+0]=F.x0,K.uvs[O*8+1]=F.y0,K.uvs[O*8+2]=F.x1,K.uvs[O*8+3]=F.y1,K.uvs[O*8+4]=F.x2,K.uvs[O*8+5]=F.y2,K.uvs[O*8+6]=F.x3,K.uvs[O*8+7]=F.y3}this._textWidth=m*r,this._textHeight=(n.y+e.lineHeight)*r;for(const k in R){const L=R[k];if(this.anchor.x!==0||this.anchor.y!==0){let X=0;const K=this._textWidth*this.anchor.x,Z=this._textHeight*this.anchor.y;for(let F=0;F<L.total;F++)L.vertices[X++]-=K,L.vertices[X++]-=Z,L.vertices[X++]-=K,L.vertices[X++]-=Z,L.vertices[X++]-=K,L.vertices[X++]-=Z,L.vertices[X++]-=K,L.vertices[X++]-=Z}this._maxLineHeight=_*r;const W=L.mesh.geometry.getBuffer("aVertexPosition"),D=L.mesh.geometry.getBuffer("aTextureCoord"),U=L.mesh.geometry.getIndex();W.data=L.vertices,D.data=L.uvs,U.data=L.indices,W.update(),D.update(),U.update()}for(let k=0;k<i.length;k++)pb.push(i[k]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:n}=Cr.available[this._fontName];if(r!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,h=Math.sqrt(i*i+s*s),d=Math.sqrt(o*o+a*a),p=(Math.abs(h)+Math.abs(d))/2,c=this.fontSize/n,f=e._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=p*t*c*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Cr.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Cr.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Cr.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=Cr.available[this._fontName].distanceFieldType==="none"?db:fb;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=le.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let XE=VE;XE.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const mb={loader:pe.LoadParser,resolver:pe.ResolveParser,cache:pe.CacheParser,detection:pe.DetectionParser};Te.handle(pe.Asset,e=>{const t=e.ref;Object.entries(mb).filter(([r])=>!!t[r]).forEach(([r,n])=>Te.add(Object.assign(t[r],{extension:t[r].extension??n})))},e=>{const t=e.ref;Object.keys(mb).filter(r=>!!t[r]).forEach(r=>Te.remove(t[r]))});class CP{constructor(t,r=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(t){t.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function ju(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Do(e,t){const r=e.split("?")[0],n=dr.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const ji=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(r=>typeof r=="string"?t(r):r):e),ov=(e,t)=>{const r=t.split("?")[1];return r&&(e+=`?${r}`),e};function YE(e,t,r,n,i){const s=t[r];for(let o=0;o<s.length;o++){const a=s[o];r<t.length-1?YE(e.replace(n[r],a),t,r+1,n,i):i.push(e.replace(n[r],a))}}function AP(e){const t=/\{(.*?)\}/g,r=e.match(t),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),YE(e,i,0,r,n)}else n.push(e);return n}const Fd=e=>!Array.isArray(e);class kP{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const r=this._cache.get(t);return r||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),r}set(t,r){const n=ji(t);let i;for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];if(h.test(r)){i=h.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof le){const a=r;n.forEach(h=>{a.baseTexture!==le.EMPTY.baseTexture&&De.addToCache(a.baseTexture,h),le.addToCache(a,h)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const r=this._cacheMap.get(t);r.cacheKeys.forEach(i=>{this._cache.delete(i)}),r.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Bl=new kP;class PP{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,r,n)=>(this._parsersValidated=!1,t[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,r){const n={promise:null,parser:null};return n.promise=(async()=>{let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${t}`)),!s){for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];if(a.load&&a.test?.(t,r,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(t,r,this),n.parser=s;for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];a.parse&&a.parse&&await a.testParse?.(i,r,this)&&(i=await a.parse(i,r,this)||i,n.parser=a)}return i})(),n}async load(t,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Fd(t),o=ji(t,d=>({src:d})),a=o.length,h=o.map(async d=>{const p=dr.toAbsolute(d.src);if(!i[d.src])try{this.promiseCache[p]||(this.promiseCache[p]=this._getLoadPromiseAndParser(p,d)),i[d.src]=await this.promiseCache[p].promise,r&&r(++n/a)}catch(c){throw delete this.promiseCache[p],delete i[d.src],new Error(`[Loader.load] Failed to load ${p}.
${c}`)}});return await Promise.all(h),s?i[o[0].src]:i}async unload(t){const n=ji(t,i=>({src:i})).map(async i=>{const s=dr.toAbsolute(i.src),o=this.promiseCache[s];if(o){const a=await o.promise;o.parser?.unload?.(a,i,this),delete this.promiseCache[s]}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,r)=>(t[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...t,[r.name]:r}),{})}}var Ei=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Ei||{});const IP=".json",RP="application/json",MP={extension:{type:pe.LoadParser,priority:Ei.Low},name:"loadJson",test(e){return ju(e,RP)||Do(e,IP)},async load(e){return await(await fe.ADAPTER.fetch(e)).json()}};Te.add(MP);const NP=".txt",BP="text/plain",LP={name:"loadTxt",extension:{type:pe.LoadParser,priority:Ei.Low},test(e){return ju(e,BP)||Do(e,NP)},async load(e){return await(await fe.ADAPTER.fetch(e)).text()}};Te.add(LP);const DP=["normal","bold","100","200","300","400","500","600","700","800","900"],OP=[".ttf",".otf",".woff",".woff2"],FP=["font/ttf","font/otf","font/woff","font/woff2"],UP=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function HP(e){const t=dr.extname(e),i=dr.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(UP)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const zP={extension:{type:pe.LoadParser,priority:Ei.Low},name:"loadWebFont",test(e){return ju(e,FP)||Do(e,OP)},async load(e,t){const r=fe.ADAPTER.getFontFaceSet();if(r){const n=[],i=t.data?.family??HP(e),s=t.data?.weights?.filter(a=>DP.includes(a))??["normal"],o=t.data??{};for(let a=0;a<s.length;a++){const h=s[a],d=new FontFace(i,`url(${encodeURI(e)})`,{...o,weight:h});await d.load(),r.add(d),n.push(d)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>fe.ADAPTER.getFontFaceSet().delete(t))}};Te.add(zP);let gb=0,Wp;const GP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",WP={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${GP}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},jP={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let jp;class $P{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const r=URL.createObjectURL(new Blob([WP.code],{type:"application/javascript"})),n=new Worker(r);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(r),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Wp===void 0&&(Wp=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Wp&&(jp||(jp=URL.createObjectURL(new Blob([jP.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(jp),t.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:t,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const r=this.queue.pop(),n=r.id;this.resolveHash[gb]={resolve:r.resolve,reject:r.reject},t.postMessage({data:r.arguments,uuid:gb++,id:n})}}const vb=new $P;function bf(e,t,r){const n=new le(e);return n.baseTexture.on("dispose",()=>{delete t.promiseCache[r]}),n}const VP=[".jpeg",".jpg",".png",".webp",".avif"],XP=["image/jpeg","image/png","image/webp","image/avif"];async function YP(e){const t=await fe.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}const wf={name:"loadTextures",extension:{type:pe.LoadParser,priority:Ei.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return ju(e,XP)||Do(e,VP)},async load(e,t,r){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await vb.isImageBitmapSupported()?n=await vb.loadImageBitmap(e):n=await YP(e):n=await new Promise(s=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=e,n.complete?s(n):n.onload=()=>{s(n)}});const i=new De(n,{resolution:Ds(e),...t.data});return i.resource.src=e,bf(i,r,e)},unload(e){e.destroy(!0)}};Te.add(wf);const KP=".svg",QP="image/svg+xml",qP={extension:{type:pe.LoadParser,priority:Ei.High},name:"loadSVG",test(e){return ju(e,QP)||Do(e,KP)},async testParse(e){return Pu.test(e)},async parse(e,t,r){const n=new Pu(e,t?.data?.resourceOptions);await n.load();const i=new De(n,{resolution:Ds(e),...t?.data});return i.resource.src=e,bf(i,r,e)},async load(e,t){return(await fe.ADAPTER.fetch(e)).text()},unload:wf.unload};Te.add(qP);class ZP{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,r)=>`${t}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(t,r)=>r.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const r=t;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(t,r){const n=[];Array.isArray(r)?r.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(t,i.name);n.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{n.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(r).forEach(i=>{n.push(this._createBundleAssetId(t,i)),this.add([i,this._createBundleAssetId(t,i)],r[i])}),this._bundles[t]=n}add(t,r,n){const i=ji(t);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(r)||(typeof r=="string"?r=AP(r):r=[r]);const s=r.map(o=>{let a=o;if(typeof o=="string"){let h=!1;for(let d=0;d<this._parsers.length;d++){const p=this._parsers[d];if(p.test(o)){a=p.parse(o),h=!0;break}}h||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=dr.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??n,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const r=Fd(t);t=ji(t);const n={};return t.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const h in o){const d=o[h];a[this._extractAssetIdFromBundle(i,h)]=d}n[i]=a}}),r?n[t[0]]:n}resolveUrl(t){const r=this.resolve(t);if(typeof t!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(t){const r=Fd(t);t=ji(t);const n={};return t.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(h=>{o.params[h].forEach(d=>{const p=s.filter(c=>c[h]?c[h]===d:!1);p.length&&(s=p)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=dr.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}n[i]=this._resolverHash[i]}),r?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let r=0;r<t.length;r++){const n=t[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const r=/\?/.test(t)?"&":"?";return`${t}${r}${this._defaultSearchParams}`}}class JP{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ZP,this.loader=new PP,this.cache=Bl,this._backgroundLoader=new CP(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let s=t.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const r=t.texturePreference?.resolution??1,n=typeof r=="number"?[r]:r;let i=[];if(t.texturePreference?.format){const s=t.texturePreference?.format;i=typeof s=="string"?[s]:s;for(const o of this._detections)await o.test()||(i=await o.remove(i))}else for(const s of this._detections)await s.test()&&(i=await s.add(i));this.resolver.prefer({params:{format:i,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,r,n){this.resolver.add(t,r,n)}async load(t,r){this._initialized||await this.init();const n=Fd(t),i=ji(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(t,r){this.resolver.addBundle(t,r)}async loadBundle(t,r){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const i=this.resolver.resolveBundle(t),s={},o=Object.keys(i);let a=0,h=0;const d=()=>{r?.(++a/h)},p=o.map(c=>{const f=i[c];return h+=Object.keys(f).length,this._mapLoadToResolve(f,d).then(m=>{s[c]=m})});return await Promise.all(p),n?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolveBundle(t);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Bl.get(t);const r={};for(let n=0;n<t.length;n++)r[n]=Bl.get(t[n]);return r}async _mapLoadToResolve(t,r){const n=Object.values(t),i=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,h)=>{const d=s[a.src],p=[a.src];a.alias&&p.push(...a.alias),o[i[h]]=d,Bl.set(p,d)}),o}async unload(t){this._initialized||await this.init();const r=ji(t).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=ji(t);const r=this.resolver.resolveBundle(t),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(t){const r=Object.values(t);r.forEach(n=>{Bl.remove(n.src)}),await this.loader.unload(r)}get detections(){return this._detections}get preferWorkers(){return wf.config.preferWorkers}set preferWorkers(t){He("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(r=>{!r.config||Object.keys(r.config).filter(n=>n in t).forEach(n=>{r.config[n]=t[n]})})}}const Ih=new JP;Te.handleByList(pe.LoadParser,Ih.loader.parsers).handleByList(pe.ResolveParser,Ih.resolver.parsers).handleByList(pe.CacheParser,Ih.cache.parsers).handleByList(pe.DetectionParser,Ih.detections);const eI={extension:pe.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof le),getCacheableAssets:(e,t)=>{const r={};return e.forEach(n=>{t.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};Te.add(eI);const tI={extension:{type:pe.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await fe.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};Te.add(tI);const rI={extension:{type:pe.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await fe.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};Te.add(rI);const xb=["png","jpg","jpeg"],nI={extension:{type:pe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...xb],remove:async e=>e.filter(t=>!xb.includes(t))};Te.add(nI);const iI={extension:pe.ResolveParser,test:wf.test,parse:e=>({resolution:parseFloat(fe.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};Te.add(iI);const sI=[".xml",".fnt"],oI={extension:{type:pe.LoadParser,priority:Ei.Normal},name:"loadBitmapFont",test(e){return sI.includes(dr.extname(e).toLowerCase())},async testParse(e){return sd.test(e)||sv.test(e)},async parse(e,t,r){const n=sd.test(e)?sd.parse(e):sv.parse(e),{src:i}=t,{page:s}=n,o=[];for(let d=0;d<s.length;++d){const p=s[d].file;let c=dr.join(dr.dirname(i),p);c=ov(c,i),o.push(c)}const a=await r.load(o),h=o.map(d=>a[d]);return Cr.install(n,h,!0)},async load(e,t){return(await fe.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};Te.add(oI);const Ud={build(e){const t=e.points;let r,n,i,s,o,a;if(e.type===qt.CIRC){const v=e.shape;r=v.x,n=v.y,o=a=v.radius,i=s=0}else if(e.type===qt.ELIP){const v=e.shape;r=v.x,n=v.y,o=v.width,a=v.height,i=s=0}else{const v=e.shape,y=v.width/2,E=v.height/2;r=v.x+y,n=v.y+E,o=a=Math.max(0,Math.min(v.radius,Math.min(y,E))),i=y-o,s=E-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){t.length=0;return}const h=Math.ceil(2.3*Math.sqrt(o+a)),d=h*8+(i?4:0)+(s?4:0);if(t.length=d,d===0)return;if(h===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+s,t[2]=t[4]=r-i,t[5]=t[7]=n-s;return}let p=0,c=h*4+(i?2:0)+2,f=c,m=d;{const v=i+o,y=s,E=r+v,x=r-v,_=n+y;if(t[p++]=E,t[p++]=_,t[--c]=_,t[--c]=x,s){const w=n-y;t[f++]=x,t[f++]=w,t[--m]=w,t[--m]=E}}for(let v=1;v<h;v++){const y=Math.PI/2*(v/h),E=i+Math.cos(y)*o,x=s+Math.sin(y)*a,_=r+E,w=r-E,T=n+x,P=n-x;t[p++]=_,t[p++]=T,t[--c]=T,t[--c]=w,t[f++]=w,t[f++]=P,t[--m]=P,t[--m]=_}{const v=i,y=s+a,E=r+v,x=r-v,_=n+y,w=n-y;t[p++]=E,t[p++]=_,t[--m]=w,t[--m]=E,i&&(t[p++]=x,t[p++]=_,t[--m]=w,t[--m]=x)}},triangulate(e,t){const r=e.points,n=t.points,i=t.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,h;if(e.type!==qt.RREC){const p=e.shape;a=p.x,h=p.y}else{const p=e.shape;a=p.x+p.width/2,h=p.y+p.height/2}const d=e.matrix;n.push(e.matrix?d.a*a+d.c*h+d.tx:a,e.matrix?d.b*a+d.d*h+d.ty:h),s++,n.push(r[0],r[1]);for(let p=2;p<r.length;p+=2)n.push(r[p],r[p+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function yb(e,t=!1){const r=e.length;if(r<6)return;let n=0;for(let i=0,s=e[r-2],o=e[r-1];i<r;i+=2){const a=e[i],h=e[i+1];n+=(a-s)*(h+o),s=a,o=h}if(!t&&n>0||t&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,h=s,d=s+1;[e[o],e[h]]=[e[h],e[o]],[e[a],e[d]]=[e[d],e[a]]}}}const KE={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const n=e.holes,i=t.points,s=t.indices;if(r.length>=6){yb(r,!1);const o=[];for(let d=0;d<n.length;d++){const p=n[d];yb(p.points,!0),o.push(r.length/2),r=r.concat(p.points)}const a=v1.exports(r,o,2);if(!a)return;const h=i.length/2;for(let d=0;d<a.length;d+=3)s.push(a[d]+h),s.push(a[d+1]+h),s.push(a[d+2]+h);for(let d=0;d<r.length;d++)i.push(r[d])}}},aI={build(e){const t=e.shape,r=t.x,n=t.y,i=t.width,s=t.height,o=e.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(e,t){const r=e.points,n=t.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},lI={build(e){Ud.build(e)},triangulate(e,t){Ud.triangulate(e,t)}};var Rn=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Rn||{}),_o=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(_o||{});const $a={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class _b{static curveTo(t,r,n,i,s,o){const a=o[o.length-2],d=o[o.length-1]-r,p=a-t,c=i-r,f=n-t,m=Math.abs(d*f-p*c);if(m<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==r)&&o.push(t,r),null;const v=d*d+p*p,y=c*c+f*f,E=d*c+p*f,x=s*Math.sqrt(v)/m,_=s*Math.sqrt(y)/m,w=x*E/v,T=_*E/y,P=x*f+_*p,I=x*c+_*d,R=p*(_+w),M=d*(_+w),N=f*(x+T),k=c*(x+T),L=Math.atan2(M-I,R-P),W=Math.atan2(k-I,N-P);return{cx:P+t,cy:I+r,radius:s,startAngle:L,endAngle:W,anticlockwise:p*c>f*d}}static arc(t,r,n,i,s,o,a,h,d){const p=a-o,c=$a._segmentsCount(Math.abs(p)*s,Math.ceil(Math.abs(p)/Ld)*40),f=p/(c*2),m=f*2,v=Math.cos(f),y=Math.sin(f),E=c-1,x=E%1/E;for(let _=0;_<=E;++_){const w=_+x*_,T=f+o+m*w,P=Math.cos(T),I=-Math.sin(T);d.push((v*P+y*I)*s+n,(v*-I+y*P)*s+i)}}}class uI{constructor(){this.reset()}begin(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class S1{static curveLength(t,r,n,i,s,o,a,h){let p=0,c=0,f=0,m=0,v=0,y=0,E=0,x=0,_=0,w=0,T=0,P=t,I=r;for(let R=1;R<=10;++R)c=R/10,f=c*c,m=f*c,v=1-c,y=v*v,E=y*v,x=E*t+3*y*c*n+3*v*f*s+m*a,_=E*r+3*y*c*i+3*v*f*o+m*h,w=P-x,T=I-_,P=x,I=_,p+=Math.sqrt(w*w+T*T);return p}static curveTo(t,r,n,i,s,o,a){const h=a[a.length-2],d=a[a.length-1];a.length-=2;const p=$a._segmentsCount(S1.curveLength(h,d,t,r,n,i,s,o));let c=0,f=0,m=0,v=0,y=0;a.push(h,d);for(let E=1,x=0;E<=p;++E)x=E/p,c=1-x,f=c*c,m=f*c,v=x*x,y=v*x,a.push(m*h+3*f*x*t+3*c*v*n+y*s,m*d+3*f*x*r+3*c*v*i+y*o)}}function bb(e,t,r,n,i,s,o,a){const h=e-r*i,d=t-n*i,p=e+r*s,c=t+n*s;let f,m;o?(f=n,m=-r):(f=-n,m=r);const v=h+f,y=d+m,E=p+f,x=c+m;return a.push(v,y,E,x),2}function no(e,t,r,n,i,s,o,a){const h=r-e,d=n-t;let p=Math.atan2(h,d),c=Math.atan2(i-e,s-t);a&&p<c?p+=Math.PI*2:!a&&p>c&&(c+=Math.PI*2);let f=p;const m=c-p,v=Math.abs(m),y=Math.sqrt(h*h+d*d),E=(15*v*Math.sqrt(y)/Math.PI>>0)+1,x=m/E;if(f+=x,a){o.push(e,t,r,n);for(let _=1,w=f;_<E;_++,w+=x)o.push(e,t,e+Math.sin(w)*y,t+Math.cos(w)*y);o.push(e,t,i,s)}else{o.push(r,n,e,t);for(let _=1,w=f;_<E;_++,w+=x)o.push(e+Math.sin(w)*y,t+Math.cos(w)*y,e,t);o.push(i,s,e,t)}return E*2}function cI(e,t){const r=e.shape;let n=e.points||r.points.slice();const i=t.closePointEps;if(n.length===0)return;const s=e.lineStyle,o=new We(n[0],n[1]),a=new We(n[n.length-2],n[n.length-1]),h=r.type!==qt.POLY||r.closeStroke,d=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(h){n=n.slice(),d&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const Z=(o.x+a.x)*.5,F=(a.y+o.y)*.5;n.unshift(Z,F),n.push(Z,F)}const p=t.points,c=n.length/2;let f=n.length;const m=p.length/2,v=s.width/2,y=v*v,E=s.miterLimit*s.miterLimit;let x=n[0],_=n[1],w=n[2],T=n[3],P=0,I=0,R=-(_-T),M=x-w,N=0,k=0,L=Math.sqrt(R*R+M*M);R/=L,M/=L,R*=v,M*=v;const W=s.alignment,D=(1-W)*2,U=W*2;h||(s.cap===_o.ROUND?f+=no(x-R*(D-U)*.5,_-M*(D-U)*.5,x-R*D,_-M*D,x+R*U,_+M*U,p,!0)+2:s.cap===_o.SQUARE&&(f+=bb(x,_,R,M,D,U,!0,p))),p.push(x-R*D,_-M*D,x+R*U,_+M*U);for(let Z=1;Z<c-1;++Z){x=n[(Z-1)*2],_=n[(Z-1)*2+1],w=n[Z*2],T=n[Z*2+1],P=n[(Z+1)*2],I=n[(Z+1)*2+1],R=-(_-T),M=x-w,L=Math.sqrt(R*R+M*M),R/=L,M/=L,R*=v,M*=v,N=-(T-I),k=w-P,L=Math.sqrt(N*N+k*k),N/=L,k/=L,N*=v,k*=v;const F=w-x,O=_-T,z=w-P,H=I-T,j=F*z+O*H,J=O*z-H*F,q=J<0;if(Math.abs(J)<.001*Math.abs(j)){p.push(w-R*D,T-M*D,w+R*U,T+M*U),j>=0&&(s.join===Rn.ROUND?f+=no(w,T,w-R*D,T-M*D,w-N*D,T-k*D,p,!1)+4:f+=2,p.push(w-N*U,T-k*U,w+N*D,T+k*D));continue}const Ce=(-R+x)*(-M+T)-(-R+w)*(-M+_),ge=(-N+P)*(-k+T)-(-N+w)*(-k+I),Re=(F*ge-z*Ce)/J,Ee=(H*Ce-O*ge)/J,mt=(Re-w)*(Re-w)+(Ee-T)*(Ee-T),Je=w+(Re-w)*D,Oe=T+(Ee-T)*D,Qe=w-(Re-w)*U,Be=T-(Ee-T)*U,nt=Math.min(F*F+O*O,z*z+H*H),Vt=q?D:U,Br=nt+Vt*Vt*y,Zi=mt<=Br;let Qr=s.join;if(Qr===Rn.MITER&&mt/y>E&&(Qr=Rn.BEVEL),Zi)switch(Qr){case Rn.MITER:{p.push(Je,Oe,Qe,Be);break}case Rn.BEVEL:{q?p.push(Je,Oe,w+R*U,T+M*U,Je,Oe,w+N*U,T+k*U):p.push(w-R*D,T-M*D,Qe,Be,w-N*D,T-k*D,Qe,Be),f+=2;break}case Rn.ROUND:{q?(p.push(Je,Oe,w+R*U,T+M*U),f+=no(w,T,w+R*U,T+M*U,w+N*U,T+k*U,p,!0)+4,p.push(Je,Oe,w+N*U,T+k*U)):(p.push(w-R*D,T-M*D,Qe,Be),f+=no(w,T,w-R*D,T-M*D,w-N*D,T-k*D,p,!1)+4,p.push(w-N*D,T-k*D,Qe,Be));break}}else{switch(p.push(w-R*D,T-M*D,w+R*U,T+M*U),Qr){case Rn.MITER:{q?p.push(Qe,Be,Qe,Be):p.push(Je,Oe,Je,Oe),f+=2;break}case Rn.ROUND:{q?f+=no(w,T,w+R*U,T+M*U,w+N*U,T+k*U,p,!0)+2:f+=no(w,T,w-R*D,T-M*D,w-N*D,T-k*D,p,!1)+2;break}}p.push(w-N*D,T-k*D,w+N*U,T+k*U),f+=2}}x=n[(c-2)*2],_=n[(c-2)*2+1],w=n[(c-1)*2],T=n[(c-1)*2+1],R=-(_-T),M=x-w,L=Math.sqrt(R*R+M*M),R/=L,M/=L,R*=v,M*=v,p.push(w-R*D,T-M*D,w+R*U,T+M*U),h||(s.cap===_o.ROUND?f+=no(w-R*(D-U)*.5,T-M*(D-U)*.5,w-R*D,T-M*D,w+R*U,T+M*U,p,!1)+2:s.cap===_o.SQUARE&&(f+=bb(w,T,R,M,D,U,!1,p)));const X=t.indices,K=$a.epsilon*$a.epsilon;for(let Z=m;Z<f+m-2;++Z)x=p[Z*2],_=p[Z*2+1],w=p[(Z+1)*2],T=p[(Z+1)*2+1],P=p[(Z+2)*2],I=p[(Z+2)*2+1],!(Math.abs(x*(T-I)+w*(I-_)+P*(_-T))<K)&&X.push(Z,Z+1,Z+2)}function hI(e,t){let r=0;const n=e.shape,i=e.points||n.points,s=n.type!==qt.POLY||n.closeStroke;if(i.length===0)return;const o=t.points,a=t.indices,h=i.length/2,d=o.length/2;let p=d;for(o.push(i[0],i[1]),r=1;r<h;r++)o.push(i[r*2],i[r*2+1]),a.push(p,p+1),p++;s&&a.push(p,d)}function wb(e,t){e.lineStyle.native?hI(e,t):cI(e,t)}class E1{static curveLength(t,r,n,i,s,o){const a=t-2*n+s,h=r-2*i+o,d=2*n-2*t,p=2*i-2*r,c=4*(a*a+h*h),f=4*(a*d+h*p),m=d*d+p*p,v=2*Math.sqrt(c+f+m),y=Math.sqrt(c),E=2*c*y,x=2*Math.sqrt(m),_=f/y;return(E*v+y*f*(v-x)+(4*m*c-f*f)*Math.log((2*y+_+v)/(_+x)))/(4*E)}static curveTo(t,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],h=$a._segmentsCount(E1.curveLength(o,a,t,r,n,i));let d=0,p=0;for(let c=1;c<=h;++c){const f=c/h;d=o+(t-o)*f,p=a+(r-a)*f,s.push(d+(t+(n-t)*f-d)*f,p+(r+(i-r)*f-p)*f)}}}const $p={[qt.POLY]:KE,[qt.CIRC]:Ud,[qt.ELIP]:Ud,[qt.RECT]:aI,[qt.RREC]:lI},Sb=[],Rh=[];class Hd{constructor(t,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}clone(){return new Hd(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ra=new We,QE=class extends aE{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Dd,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Rh.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Sb.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,n=null){const i=new Hd(e,t,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Hd(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const n=t[r];if(!!n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,ra):ra.copyFrom(e),n.shape.contains(ra.x,ra.y))){let i=!1;if(n.holes){for(let s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(ra.x,ra.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const h=t[a],d=h.fillStyle,p=h.lineStyle;$p[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(d.visible||p.visible)&&this.processHoles(h.holes);for(let f=0;f<2;f++){const m=f===0?d:p;if(!m.visible)continue;const v=m.texture.baseTexture,y=this.indices.length,E=this.points.length/2;v.wrapMode=Wi.REPEAT,f===0?this.processFill(h):this.processLine(h);const x=this.points.length/2-E;x!==0&&(r&&!this._compareStyles(n,m)&&(r.end(y,E),r=null),r||(r=Sb.pop()||new uI,r.begin(m,y,E),this.batches.push(r),n=m),this.addUvs(this.points,e,m.texture,E,x,m.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const n=e[t];for(let i=0;i<n.size;i++){const s=n.start+i;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<QE.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++De._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),Rh.push(this.drawCalls[p]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let n=Rh.pop();n||(n=new Kg,n.texArray=new qg),n.texArray.count=0,n.start=0,n.size=0,n.type=Dn.TRIANGLES;let i=0,s=null,o=0,a=!1,h=Dn.TRIANGLES,d=0;this.drawCalls.push(n);for(let p=0;p<this.batches.length;p++){const c=this.batches[p],f=8,m=c.style,v=m.texture.baseTexture;a!==!!m.native&&(a=!!m.native,h=a?Dn.LINES:Dn.TRIANGLES,s=null,i=f,e++),s!==v&&(s=v,v._batchEnabled!==e&&(i===f&&(e++,i=0,n.size>0&&(n=Rh.pop(),n||(n=new Kg,n.texArray=new qg),this.drawCalls.push(n)),n.start=d,n.size=0,n.texArray.count=0,n.type=h),v.touched=1,v._batchEnabled=e,v._batchLocation=i,v.wrapMode=Wi.REPEAT,n.texArray.elements[n.texArray.count++]=v,i++)),n.size+=c.size,d+=c.size,o=v._batchLocation,this.addColors(t,m.color,m.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,o,c.attribSize,c.attribStart)}De._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(e.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let h=0;h<e.length/2;h++)s[a++]=e[h*2],s[a++]=e[h*2+1],s[a++]=t[h*2],s[a++]=t[h*2+1],o[a++]=r[h],s[a++]=n[h];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?KE.triangulate(e,this):$p[e.type].triangulate(e,this)}processLine(e){wb(e,this);for(let t=0;t<e.holes.length;t++)wb(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];$p[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const n=e[r*2],i=e[r*2+1];e[r*2]=t.a*n+t.c*i+t.tx,e[r*2+1]=t.b*n+t.d*i+t.ty}}addColors(e,t,r,n,i=0){const s=et.shared.setValue(t).toLittleEndianNumber(),o=et.shared.setValue(s).toPremultiplied(r);e.length=Math.max(e.length,i+n);for(let a=0;a<n;a++)e[i+a]=o}addTextureIds(e,t,r,n=0){e.length=Math.max(e.length,n+r);for(let i=0;i<r;i++)e[n+i]=t}addUvs(e,t,r,n,i,s=null){let o=0;const a=t.length,h=r.frame;for(;o<i;){let p=e[(n+o)*2],c=e[(n+o)*2+1];if(s){const f=s.a*p+s.c*c+s.tx;c=s.b*p+s.d*c+s.ty,p=f}o++,t.push(p/h.width,c/h.height)}const d=r.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(t,r,a,i)}adjustUvs(e,t,r,n){const i=t.baseTexture,s=1e-6,o=r+n*2,a=t.frame,h=a.width/i.width,d=a.height/i.height;let p=a.x/a.width,c=a.y/a.height,f=Math.floor(e[r]+s),m=Math.floor(e[r+1]+s);for(let v=r+2;v<o;v+=2)f=Math.min(f,Math.floor(e[v]+s)),m=Math.min(m,Math.floor(e[v+1]+s));p-=f,c-=m;for(let v=r;v<o;v+=2)e[v]=(e[v]+p)*h,e[v+1]=(e[v+1]+c)*d}};let qE=QE;qE.BATCHABLE_SIZE=100;class Sf{constructor(){this.color=16777215,this.alpha=1,this.texture=le.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Sf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=le.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class T1 extends Sf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=_o.BUTT,this.join=Rn.MITER,this.miterLimit=10}clone(){const t=new T1;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Vp={},ad=class extends $t{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Sf,this._lineStyle=new T1,this._matrix=null,this._holeMode=!1,this.state=qi.for2d(),this._geometry=e||new qE,this._geometry.refCount++,this._transformID=-1,this._tintColor=new et(16777215),this.blendMode=ye.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ad(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,n=.5,i=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:n,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:le.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:_o.BUTT,join:Rn.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new La,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new La,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==e||i!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,n){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),E1.curveTo(e,t,r,n,i),this}bezierCurveTo(e,t,r,n,i,s){return this._initCurve(),S1.curveTo(e,t,r,n,i,s,this.currentPath.points),this}arcTo(e,t,r,n,i){this._initCurve(e,t);const s=this.currentPath.points,o=_b.curveTo(e,t,r,n,i,s);if(o){const{cx:a,cy:h,radius:d,startAngle:p,endAngle:c,anticlockwise:f}=o;this.arc(a,h,d,p,c,f)}return this}arc(e,t,r,n,i,s=!1){if(n===i)return this;if(!s&&i<=n?i+=Ld:s&&n<=i&&(n+=Ld),i-n===0)return this;const a=e+Math.cos(n)*r,h=t+Math.sin(n)*r,d=this._geometry.closePointEps;let p=this.currentPath?this.currentPath.points:null;if(p){const c=Math.abs(p[p.length-2]-a),f=Math.abs(p[p.length-1]-h);c<d&&f<d||p.push(a,h)}else this.moveTo(a,h),p=this.currentPath.points;return _b.arc(a,h,e,t,r,n,i,s,p),this}beginFill(e=0,t){return this.beginTextureFill({texture:le.WHITE,color:e,alpha:t})}normalizeColor(e){const t=et.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:le.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,n){return this.drawShape(new Ue(e,t,r,n))}drawRoundedRect(e,t,r,n,i){return this.drawShape(new _1(e,t,r,n,i))}drawCircle(e,t,r){return this.drawShape(new x1(e,t,r))}drawEllipse(e,t,r,n){return this.drawShape(new y1(e,t,r,n))}drawPolygon(...e){let t,r=!0;const n=e[0];n.points?(r=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const i=new La(t);return i.closeStroke=r,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===qt.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let n=0;n<r;n++){const i=e.batches[n],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),h=new Uint16Array(e.indicesUint16.buffer,i.start*2,i.size),d={vertexData:o,blendMode:t,indices:h,uvs:a,_batchRGB:et.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=d}}_renderBatched(e){if(!!this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,n=this.worldAlpha,i=t.uniforms,s=r.drawCalls;i.translationMatrix=this.transform.worldTransform,et.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(e,r.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:r,type:n,size:i,start:s}=t,o=r.count;for(let a=0;a<o;a++)e.texture.bind(r.elements[a],a);e.geometry.draw(n,i,s)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!Vp[r]){const{maxTextures:n}=e.plugins[r],i=new Int32Array(n);for(let a=0;a<n;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ft,default:Wn.from({uSamplers:i},!0)},o=e.plugins[r]._shader.program;Vp[r]=new vi(o,s)}t=Vp[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:n,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,t,r,n,i)}containsPoint(e){return this.worldTransform.applyInverse(e,ad._TEMP_POINT),this._geometry.containsPoint(ad._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=et.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,o=t.tx,a=t.ty,h=this._geometry.points,d=this.vertexData;let p=0;for(let c=0;c<h.length;c+=2){const f=h[c],m=h[c+1];d[p++]=r*f+i*m+o,d[p++]=s*m+n*f+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let jn=ad;jn.curves=$a;jn._TEMP_POINT=new We;class dI extends _f{constructor(t=100,r=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=t,this.height=r,this.build()}build(){const t=this.segWidth*this.segHeight,r=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,h=this.height/o;for(let p=0;p<t;p++){const c=p%this.segWidth,f=p/this.segWidth|0;r.push(c*a,f*h),n.push(c/s,f/o)}const d=s*o;for(let p=0;p<d;p++){const c=p%s,f=p/s|0,m=f*this.segWidth+c,v=f*this.segWidth+c+1,y=(f+1)*this.segWidth+c,E=(f+1)*this.segWidth+c+1;i.push(m,v,y,v,E,y)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class fI extends _f{constructor(t=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=t,this.textureScale=n,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(t.length<1)return;r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),i.data=new Uint16Array((t.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,h=t[0];const d=this._width*this.textureScale,p=t.length;for(let f=0;f<p;f++){const m=f*4;if(this.textureScale>0){const v=h.x-t[f].x,y=h.y-t[f].y,E=Math.sqrt(v*v+y*y);h=t[f],a+=E/d}else a=f/(p-1);s[m]=a,s[m+1]=0,s[m+2]=a,s[m+3]=1}let c=0;for(let f=0;f<p-1;f++){const m=f*2;o[c++]=m,o[c++]=m+1,o[c++]=m+2,o[c++]=m+2,o[c++]=m+1,o[c++]=m+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let r=t[0],n,i=0,s=0;const o=this.buffers[0].data,a=t.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let d=0;d<a;d++){const p=t[d],c=d*4;d<t.length-1?n=t[d+1]:n=p,s=-(n.x-r.x),i=n.y-r.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=h,s*=h),o[c]=p.x+i,o[c+1]=p.y+s,o[c+2]=p.x-i,o[c+3]=p.y-s,r=p}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class pI extends ja{constructor(t,r,n){const i=new dI(t.width,t.height,r,n),s=new Iu(le.WHITE);super(i,s),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(t.width!==r||t.height!==n)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const Mh=10;class mI extends pI{constructor(t,r,n,i,s){super(le.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??t.defaultBorders?.left??Mh,this._rightWidth=i??t.defaultBorders?.right??Mh,this._topHeight=n??t.defaultBorders?.top??Mh,this._bottomHeight=s??t.defaultBorders?.bottom??Mh,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(r,i)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const n=1/this._origWidth,i=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=i*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class gI extends ja{constructor(t=le.EMPTY,r,n,i,s){const o=new _f(r,n,i);o.getBuffer("aVertexPosition").static=!1;const a=new Iu(t);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class vI extends ja{constructor(t,r,n=0){const i=new fI(t.height,r,n),s=new Iu(t);n>0&&(t.baseTexture.wrapMode=Wi.REPEAT),super(i,s),this.autoUpdate=!0}_render(t){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(t)}}class xI extends $t{constructor(t=1500,r,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=ye.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new et(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const r=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Eb{constructor(t,r,n){this.geometry=new Os,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<t.length;++i){let s=t[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Pe.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let r=0;this.indexBuffer=new At($k(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new At(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new At(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Pe.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Pe.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(t,r,n,s.type===Pe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(t,r,n,s.type===Pe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var yI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,_I=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ZE extends pf{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new ft,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Pe.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=vi.from(_I,yI,{}),this.state=qi.for2d()}render(t){const r=t.children,n=t._maxSize,i=t._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!t.autoResize&&(o=n);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const h=r[0]._texture.baseTexture,d=h.alphaMode>0;this.state.blendMode=nE(t.blendMode,d),s.state.set(this.state);const p=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=et.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,d).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let f=!1;for(let m=0,v=0;m<o;m+=i,v+=1){let y=o-m;y>i&&(y=i),v>=a.length&&a.push(this._generateOneMoreBuffer(t));const E=a[v];E.uploadDynamic(r,m,y);const x=t._bufferUpdateIDs[v]||0;f=f||E._updateID<x,f&&(E._updateID=t._updateID,E.uploadStatic(r,m,y)),s.geometry.bind(E.geometry),p.drawElements(p.TRIANGLES,y*6,p.UNSIGNED_SHORT,0)}}generateBuffers(t){const r=[],n=t._maxSize,i=t._batchSize,s=t._properties;for(let o=0;o<n;o+=i)r.push(new Eb(this.properties,s,i));return r}_generateOneMoreBuffer(t){const r=t._batchSize,n=t._properties;return new Eb(this.properties,n,r)}uploadVertices(t,r,n,i,s,o){let a=0,h=0,d=0,p=0;for(let c=0;c<n;++c){const f=t[r+c],m=f._texture,v=f.scale.x,y=f.scale.y,E=m.trim,x=m.orig;E?(h=E.x-f.anchor.x*x.width,a=h+E.width,p=E.y-f.anchor.y*x.height,d=p+E.height):(a=x.width*(1-f.anchor.x),h=x.width*-f.anchor.x,d=x.height*(1-f.anchor.y),p=x.height*-f.anchor.y),i[o]=h*v,i[o+1]=p*y,i[o+s]=a*v,i[o+s+1]=p*y,i[o+s*2]=a*v,i[o+s*2+1]=d*y,i[o+s*3]=h*v,i[o+s*3+1]=d*y,o+=s*4}}uploadPosition(t,r,n,i,s,o){for(let a=0;a<n;a++){const h=t[r+a].position;i[o]=h.x,i[o+1]=h.y,i[o+s]=h.x,i[o+s+1]=h.y,i[o+s*2]=h.x,i[o+s*2+1]=h.y,i[o+s*3]=h.x,i[o+s*3+1]=h.y,o+=s*4}}uploadRotation(t,r,n,i,s,o){for(let a=0;a<n;a++){const h=t[r+a].rotation;i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}uploadUvs(t,r,n,i,s,o){for(let a=0;a<n;++a){const h=t[r+a]._texture._uvs;h?(i[o]=h.x0,i[o+1]=h.y0,i[o+s]=h.x1,i[o+s+1]=h.y1,i[o+s*2]=h.x2,i[o+s*2+1]=h.y2,i[o+s*3]=h.x3,i[o+s*3+1]=h.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(t,r,n,i,s,o){for(let a=0;a<n;++a){const h=t[r+a],d=et.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);i[o]=d,i[o+s]=d,i[o+s*2]=d,i[o+s*3]=d,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ZE.extension={name:"particle",type:pe.RendererPlugin};Te.add(ZE);class Ru extends Xn{constructor(t,r=!0){super(t[0]instanceof le?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Pt.shared.add(this.update,this,Us.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const r=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=r/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const r=[];for(let n=0;n<t.length;++n)r.push(le.from(t[n]));return new Ru(r)}static fromImages(t){const r=[];for(let n=0;n<t.length;++n)r.push(le.from(t[n]));return new Ru(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof le)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Pt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Pt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Ll=new We;class C1 extends Xn{constructor(t,r=100,n=100){super(t),this.tileTransform=new ff,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new b1(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,n,i)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ue),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ll);const r=this._width,n=this._height,i=-r*this.anchor._x;if(Ll.x>=i&&Ll.x<i+r){const s=-n*this.anchor._y;if(Ll.y>=s&&Ll.y<s+n)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,r){const n=t instanceof le?t:le.from(t,r);return new C1(n,r.width,r.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var bI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,wI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,SI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Tb=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,EI=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Nh=new ft;class JE extends pf{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new yE,this.state=qi.for2d()}contextChange(){const t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=vi.from(Tb,EI,r),this.shader=t.context.webGLVersion>1?vi.from(wI,bI,r):vi.from(Tb,SI,r)}render(t){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=t._texture,h=a.baseTexture,d=h.alphaMode>0,p=t.tileTransform.localTransform,c=t.uvMatrix;let f=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;f&&(h._glTextures[r.CONTEXT_UID]?f=h.wrapMode!==Wi.CLAMP:h.wrapMode===Wi.CLAMP&&(h.wrapMode=Wi.REPEAT));const m=f?this.simpleShader:this.shader,v=a.width,y=a.height,E=t._width,x=t._height;Nh.set(p.a*v/E,p.b*v/x,p.c*y/E,p.d*y/x,p.tx/E,p.ty/x),Nh.invert(),f?Nh.prepend(c.mapCoord):(m.uniforms.uMapCoord=c.mapCoord.toArray(!0),m.uniforms.uClampFrame=c.uClampFrame,m.uniforms.uClampOffset=c.uClampOffset),m.uniforms.uTransform=Nh.toArray(!0),m.uniforms.uColor=et.shared.setValue(t.tint).premultiply(t.worldAlpha,d).toArray(m.uniforms.uColor),m.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),m.uniforms.uSampler=a,r.shader.bind(m),r.geometry.bind(n),this.state.blendMode=nE(t.blendMode,d),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}JE.extension={name:"tilingSprite",type:pe.RendererPlugin};Te.add(JE);const av=class{constructor(e){this.stage=new $t,e=Object.assign({forceCanvas:!1},e),this.renderer=nP(e),av._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const r=av._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let $u=av;$u._plugins=[];Te.handleByList(pe.Application,$u._plugins);class eT{static init(t){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}eT.extension=pe.Application;Te.add(eT);var st={exports:{}},TI="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",CI=TI,AI=CI;function tT(){}function rT(){}rT.resetWarningCache=tT;var kI=function(){function e(n,i,s,o,a,h){if(h!==AI){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rT,resetWarningCache:tT};return r.PropTypes=r,r};st.exports=kI();function Vr(e){return Vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vr(e)}function nT(e){var t=function(r,n){if(Vr(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Vr(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Vr(t)==="symbol"?t:String(t)}function Ct(e,t,r){return(t=nT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ki(e){return function(t){if(Array.isArray(t))return Xp(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return Xp(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xp(t,r):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Et(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var PI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function II(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var RI=function(e){return e==null};function $l(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=Ki(e);else{if(e===null||Vr(e)!=="object")return t;t=[e&&e?.x||0,e&&e?.y||0]}return t.filter(function(r){return!RI(r)&&!isNaN(r)}).map(Number)}function Cb(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Yp(e){return e instanceof We||e instanceof zi}var zd=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Kp(e,t,r){if(Yp(e[t])&&Yp(r))e[t].copyFrom(r);else if(Yp(e[t])){var n=$l(r);Et(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(r),Vr(r)),e[t].set(n.shift(),n.shift())}else e[t]=r}var na,iT=function(e){var t,r=e;if(!Array.isArray(r)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(e)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},sT=function(e){return function(){return!e.apply(void 0,arguments)}},lv="children",MI=(Ct(na={},lv,!0),Ct(na,"parent",!0),Ct(na,"worldAlpha",!0),Ct(na,"worldTransform",!0),Ct(na,"worldVisible",!0),na),uv={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},_i=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var h,d;a==null||(h=a.__reactpixi)===null||h===void 0||(d=h.root)===null||d===void 0||d.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,h){if(r.hasOwnProperty(a))return Et(h.typeofs.some(function(d){return Vr(r[a])===d})||h.instanceofs.some(function(d){return r[a]instanceof d}),"".concat(e," ").concat(a," prop is invalid")),r[a]};if(r.texture)return Et(r.texture instanceof le,"".concat(e," texture needs to be typeof `Texture`")),r.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,le]});Et(!!s,"".concat(e," could not get texture from props"));var o=le.from(s);return o.__reactpixi={root:t},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},NI=sT(iT([].concat(Ki(Object.keys(MI)),Ki(zd))));function bi(e,t,r){var n=!1;if(Et(pt.prototype.isPrototypeOf(e),"instance needs to be typeof `DisplayObject`, got `%s`",Vr(e)),!r.ignoreEvents)for(var i=typeof e.removeListener=="function",s=typeof e.on=="function",o=0;o<zd.length;o++){var a=zd[o];t[a]!==r[a]&&(n=!0,typeof t[a]=="function"&&i&&e.removeListener(a,t[a]),typeof r[a]=="function"&&s&&e.on(a,r[a]))}var h=Object.keys(r||{});if(r.overwriteProps){for(var d=0;d<h.length;d++){var p=h[d];t[p]!==r[p]&&(n=!0,Kp(e,p,r[p]))}return n}for(var c=h.filter(NI),f=0;f<c.length;f++){var m=c[f],v=r[m];r[m]!==t[m]&&(n=!0),v!==void 0?Kp(e,m,v):m in uv?(console.warn("setting default value: ".concat(m,", from: ").concat(e[m]," to: ").concat(v," for"),e),n=!0,Kp(e,m,uv[m])):console.warn("ignoring prop: ".concat(m,", from ").concat(e[m]," to ").concat(v," for"),e)}return n}var BI=function(e,t){var r=t.text,n=t.style;return new XE(r,n)},LI=function(){return new $t};function js(e,t){if(e==null)return{};var r,n,i=function(o,a){if(o==null)return{};var h,d,p={},c=Object.keys(o);for(d=0;d<c.length;d++)h=c[d],a.indexOf(h)>=0||(p[h]=o[h]);return p}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var DI=["draw","geometry"],OI=function(e,t){var r=t.geometry;Et(!r||r instanceof jn,"Graphics geometry needs to be a `PIXI.Graphics`");var n=r?new jn(r.geometry):new jn;return n.applyProps=function(i,s,o){var a=o.draw;o.geometry;var h=bi(i,s,js(o,DI));return s.draw!==a&&typeof a=="function"&&(h=!0,a.call(n,n)),h},n},FI=["image","texture"],UI=function(e,t){var r=t.leftWidth,n=r===void 0?10:r,i=t.topHeight,s=i===void 0?10:i,o=t.rightWidth,a=o===void 0?10:o,h=t.bottomHeight,d=h===void 0?10:h,p=_i("NineSlicePlane",e,t),c=new mI(p,n,s,a,d);return c.applyProps=function(f,m,v){var y=v.image,E=v.texture,x=bi(f,m,js(v,FI));return(y||E)&&(E!==m.texture&&(x=!0),f.texture=_i("NineSlicePlane",e,v)),x},c};function Ab(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(r),!0).forEach(function(n){Ct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ab(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var HI=function(e,t){var r=t.maxSize,n=r===void 0?1500:r,i=t.batchSize,s=i===void 0?16384:i,o=t.autoResize,a=o!==void 0&&o,h=Bh(Bh({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),d=Bh(Bh({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),p=new xI(n,h,s,a);return p.willUnmount=function(c,f,m){c.destroy(d)},p},zI=["image","texture"],GI=function(e,t){var r=new Xn(_i("Sprite",e,t));return r.applyProps=function(n,i,s){var o=s.image,a=s.texture,h=bi(n,i,js(s,zI));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(h=!0),n.texture=_i("Sprite",e,s)),h},r},WI=["textures","isPlaying","initialFrame"],jI=function(e,t){var r=t.textures,n=t.images,i=t.isPlaying,s=i===void 0||i,o=t.initialFrame,a=function(d){return d.map(function(p){return Et(p instanceof le||p?.texture,"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),p})},h=n?Ru.fromImages(n):new Ru(a(r));return h[s?"gotoAndPlay":"gotoAndStop"](o||0),h.applyProps=function(d,p,c){var f=c.textures,m=c.isPlaying,v=c.initialFrame,y=bi(d,p,js(c,WI));if(f&&p.textures!==f&&(d.textures=a(f),y=!0),m!==p.isPlaying||v!==p.initialFrame){var E=typeof v=="number"?v:h.currentFrame||0;h[m?"gotoAndPlay":"gotoAndStop"](E),y=!0}return y},h},$I=function(e,t){var r=t.text,n=r===void 0?"":r,i=t.style,s=i===void 0?{}:i,o=t.isSprite,a=new Wu(n,s);return o?(a.updateText(),new Xn(a.texture)):a},VI=["tileScale","tilePosition","image","texture"],XI=function(e,t){var r=t.width,n=r===void 0?100:r,i=t.height,s=i===void 0?100:i,o=_i("TilingSprite",e,t),a=new C1(o,n,s);return a.applyProps=function(h,d,p){var c=p.tileScale,f=p.tilePosition,m=p.image,v=p.texture,y=bi(h,d,js(p,VI));if(f){var E,x=$l(f);(E=h.tilePosition).set.apply(E,Ki(x)),y=!Cb($l(d.tilePosition),x)||y}if(c){var _,w=$l(c);(_=h.tileScale).set.apply(_,Ki(w)),y=!Cb($l(d.tileScale),w)||y}return(m||v)&&(v!==d.texture&&(y=!0),h.texture=_i("Sprite",e,p)),y},a},YI=["image","texture"],KI=function(e,t){var r=_i("Mesh",e,t),n=t.vertices,i=t.uvs,s=t.indices,o=t.drawMode,a=o===void 0?Dn.TRIANGLES:o,h=new gI(r,n,i,s,a);return h.applyProps=function(d,p,c){var f=c.image,m=c.texture,v=bi(d,p,js(c,YI));return(f||m)&&(m!==p.texture&&(v=!0),d.texture=_i("Mesh",e,c)),v},h},QI=["image","texture"],qI=function(e,t){var r=_i("SimpleRope",e,t),n=t.points,i=new vI(r,n);return i.applyProps=function(s,o,a){var h=a.image,d=a.texture,p=js(a,QI);Et(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var c=bi(s,o,p);return(h||d)&&(d!==o.texture&&(c=!0),s.texture=_i("SimpleRope",e,a)),c},i},ZI=Object.freeze({__proto__:null,BitmapText:BI,Container:LI,Graphics:OI,NineSlicePlane:UI,ParticleContainer:HI,Sprite:GI,Text:$I,TilingSprite:XI,SimpleMesh:KI,SimpleRope:qI,AnimatedSprite:jI});function kb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kb(Object(r),!0).forEach(function(n){Ct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Nr={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},JI=Object.keys(Nr).reduce(function(e,t){return Pb(Pb({},e),{},Ct({},t,ZI[t]))},{}),oT={};function eR(e,t){return Et(!!e,"Expect type to be defined, got `%s`",e),Et(!Nr[e],"Component `%s` could not be created, already exists in default components.",e),oT[e]=t,e}var Ib,Rb,Mb,Nb,cv={},hv={},tR={get exports(){return hv},set exports(e){hv=e}},Bb={};function rR(){return Rb||(Rb=1,tR.exports=(Ib||(Ib=1,function(e){function t(F,O){var z=F.length;F.push(O);e:for(;0<z;){var H=z-1>>>1,j=F[H];if(!(0<i(j,O)))break e;F[H]=O,F[z]=j,z=H}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var O=F[0],z=F.pop();if(z!==O){F[0]=z;e:for(var H=0,j=F.length,J=j>>>1;H<J;){var q=2*(H+1)-1,Ce=F[q],ge=q+1,Re=F[ge];if(0>i(Ce,z))ge<j&&0>i(Re,Ce)?(F[H]=Re,F[ge]=z,H=ge):(F[H]=Ce,F[q]=z,H=q);else{if(!(ge<j&&0>i(Re,z)))break e;F[H]=Re,F[ge]=z,H=ge}}}return O}function i(F,O){var z=F.sortIndex-O.sortIndex;return z!==0?z:F.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var h=[],d=[],p=1,c=null,f=3,m=!1,v=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function w(F){for(var O=r(d);O!==null;){if(O.callback===null)n(d);else{if(!(O.startTime<=F))break;n(d),O.sortIndex=O.expirationTime,t(h,O)}O=r(d)}}function T(F){if(y=!1,w(F),!v)if(r(h)!==null)v=!0,K(P);else{var O=r(d);O!==null&&Z(T,O.startTime-F)}}function P(F,O){v=!1,y&&(y=!1,x(N),N=-1),m=!0;var z=f;try{for(w(O),c=r(h);c!==null&&(!(c.expirationTime>O)||F&&!W());){var H=c.callback;if(typeof H=="function"){c.callback=null,f=c.priorityLevel;var j=H(c.expirationTime<=O);O=e.unstable_now(),typeof j=="function"?c.callback=j:c===r(h)&&n(h),w(O)}else n(h);c=r(h)}if(c!==null)var J=!0;else{var q=r(d);q!==null&&Z(T,q.startTime-O),J=!1}return J}finally{c=null,f=z,m=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,R=!1,M=null,N=-1,k=5,L=-1;function W(){return!(e.unstable_now()-L<k)}function D(){if(M!==null){var F=e.unstable_now();L=F;var O=!0;try{O=M(!0,F)}finally{O?I():(R=!1,M=null)}}else R=!1}if(typeof _=="function")I=function(){_(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=D,I=function(){X.postMessage(null)}}else I=function(){E(D,0)};function K(F){M=F,R||(R=!0,I())}function Z(F,O){N=E(function(){F(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,K(P))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(F){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var z=f;f=O;try{return F()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,O){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=f;f=F;try{return O()}finally{f=z}},e.unstable_scheduleCallback=function(F,O,z){var H=e.unstable_now();switch(z=typeof z=="object"&&z!==null&&typeof(z=z.delay)=="number"&&0<z?H+z:H,F){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return F={id:p++,callback:O,priorityLevel:F,startTime:z,expirationTime:j=z+j,sortIndex:-1},z>H?(F.sortIndex=z,t(d,F),r(h)===null&&F===r(d)&&(y?(x(N),N=-1):y=!0,Z(T,z-H))):(F.sortIndex=j,t(h,F),v||m||(v=!0,K(P))),F},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(F){var O=f;return function(){var z=f;f=O;try{return F.apply(this,arguments)}finally{f=z}}}}(Bb)),Bb)),hv}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function nR(){return Nb||(Nb=1,Mb=function(e){var t={},r=jr,n=rR(),i=Object.assign;function s(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),T=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:typeof(l=T&&l[T]||l["@@iterator"])=="function"?l:null}function I(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case d:return"Fragment";case h:return"Portal";case c:return"Profiler";case p:return"StrictMode";case y:return"Suspense";case E:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case m:return(l.displayName||"Context")+".Consumer";case f:return(l._context.displayName||"Context")+".Provider";case v:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x:return(u=l.displayName||null)!==null?u:I(l.type)||"Memo";case _:u=l._payload,l=l._init;try{return I(l(u))}catch{}}return null}function R(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(u);case 8:return u===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function M(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do(4098&(u=l).flags)!=0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function N(l){if(M(l)!==l)throw Error(s(188))}function k(l){var u=l.alternate;if(!u){if((u=M(l))===null)throw Error(s(188));return u!==l?null:l}for(var g=l,b=u;;){var S=g.return;if(S===null)break;var C=S.alternate;if(C===null){if((b=S.return)!==null){g=b;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===g)return N(S),l;if(C===b)return N(S),u;C=C.sibling}throw Error(s(188))}if(g.return!==b.return)g=S,b=C;else{for(var B=!1,G=S.child;G;){if(G===g){B=!0,g=S,b=C;break}if(G===b){B=!0,b=S,g=C;break}G=G.sibling}if(!B){for(G=C.child;G;){if(G===g){B=!0,g=C,b=S;break}if(G===b){B=!0,b=C,g=S;break}G=G.sibling}if(!B)throw Error(s(189))}}if(g.alternate!==b)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?l:u}function L(l){return(l=k(l))!==null?W(l):null}function W(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=W(l);if(u!==null)return u;l=l.sibling}return null}function D(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=D(l);if(u!==null)return u}l=l.sibling}return null}var U,X=Array.isArray,K=e.getPublicInstance,Z=e.getRootHostContext,F=e.getChildHostContext,O=e.prepareForCommit,z=e.resetAfterCommit,H=e.createInstance,j=e.appendInitialChild,J=e.finalizeInitialChildren,q=e.prepareUpdate,Ce=e.shouldSetTextContent,ge=e.createTextInstance,Re=e.scheduleTimeout,Ee=e.cancelTimeout,mt=e.noTimeout,Je=e.isPrimaryRenderer,Oe=e.supportsMutation,Qe=e.supportsPersistence,Be=e.supportsHydration,nt=e.getInstanceFromNode,Vt=e.preparePortalMount,Br=e.getCurrentEventPriority,Zi=e.detachDeletedInstance,Qr=e.supportsMicrotasks,Ja=e.scheduleMicrotask,gn=e.supportsTestSelectors,Lr=e.findFiberRoot,br=e.getBoundingRect,Kn=e.getTextContent,Qn=e.isHiddenSubtree,Ku=e.matchAccessibilityRole,Ji=e.setFocusIfFocusable,$s=e.setupIntersectionObserver,If=e.appendChild,Qu=e.appendChildToContainer,qu=e.commitTextUpdate,es=e.commitMount,Vs=e.commitUpdate,Rf=e.insertBefore,Zu=e.insertInContainerBefore,Ju=e.removeChild,Mf=e.removeChildFromContainer,ec=e.resetTextContent,tc=e.hideInstance,Nf=e.hideTextInstance,rc=e.unhideInstance,Bf=e.unhideTextInstance,nc=e.clearContainer,Lf=e.cloneInstance,ic=e.createContainerChildSet,sc=e.appendChildToContainerChildSet,oc=e.finalizeContainerChildren,el=e.replaceContainerChildren,ac=e.cloneHiddenInstance,tl=e.cloneHiddenTextInstance,Df=e.canHydrateInstance,lc=e.canHydrateTextInstance,pr=e.canHydrateSuspenseInstance,vn=e.isSuspenseInstancePending,Fo=e.isSuspenseInstanceFallback,Of=e.getSuspenseInstanceFallbackErrorDetails,NT=e.registerSuspenseInstanceRetry,uc=e.getNextHydratableSibling,BT=e.getFirstHydratableChild,LT=e.getFirstHydratableChildWithinContainer,DT=e.getFirstHydratableChildWithinSuspenseInstance,OT=e.hydrateInstance,FT=e.hydrateTextInstance,UT=e.hydrateSuspenseInstance,HT=e.getNextHydratableInstanceAfterSuspenseInstance,zT=e.commitHydratedContainer,GT=e.commitHydratedSuspenseInstance,WT=e.clearSuspenseBoundary,jT=e.clearSuspenseBoundaryFromContainer,$T=e.shouldDeleteUnhydratedTailInstances,VT=e.didNotMatchHydratedContainerTextInstance,XT=e.didNotMatchHydratedTextInstance;function rl(l){if(U===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);U=u&&u[1]||""}return`
`+U+l}var Ff=!1;function Uf(l,u){if(!l||Ff)return"";Ff=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(te){var b=te}Reflect.construct(l,[],u)}else{try{u.call()}catch(te){b=te}l.call(u.prototype)}else{try{throw Error()}catch(te){b=te}l()}}catch(te){if(te&&b&&typeof te.stack=="string"){for(var S=te.stack.split(`
`),C=b.stack.split(`
`),B=S.length-1,G=C.length-1;1<=B&&0<=G&&S[B]!==C[G];)G--;for(;1<=B&&0<=G;B--,G--)if(S[B]!==C[G]){if(B!==1||G!==1)do if(B--,0>--G||S[B]!==C[G]){var Q=`
`+S[B].replace(" at new "," at ");return l.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",l.displayName)),Q}while(1<=B&&0<=G);break}}}finally{Ff=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?rl(l):""}var YT=Object.prototype.hasOwnProperty,Hf=[],Uo=-1;function ts(l){return{current:l}}function ut(l){0>Uo||(l.current=Hf[Uo],Hf[Uo]=null,Uo--)}function it(l,u){Uo++,Hf[Uo]=l.current,l.current=u}var rs={},nr=ts(rs),wr=ts(!1),Xs=rs;function Ho(l,u){var g=l.type.contextTypes;if(!g)return rs;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===u)return b.__reactInternalMemoizedMaskedChildContext;var S,C={};for(S in g)C[S]=u[S];return b&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=C),C}function Dr(l){return(l=l.childContextTypes)!=null}function zf(){ut(wr),ut(nr)}function M1(l,u,g){if(nr.current!==rs)throw Error(s(168));it(nr,u),it(wr,g)}function N1(l,u,g){var b=l.stateNode;if(u=u.childContextTypes,typeof b.getChildContext!="function")return g;for(var S in b=b.getChildContext())if(!(S in u))throw Error(s(108,R(l)||"Unknown",S));return i({},g,b)}function cc(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||rs,Xs=nr.current,it(nr,l),it(wr,wr.current),!0}function B1(l,u,g){var b=l.stateNode;if(!b)throw Error(s(169));g?(l=N1(l,u,Xs),b.__reactInternalMemoizedMergedChildContext=l,ut(wr),ut(nr),it(nr,l)):ut(wr),it(wr,g)}var xn=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(KT(l)/QT|0)|0},KT=Math.log,QT=Math.LN2,Gf=64,Wf=4194304;function nl(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function hc(l,u){var g=l.pendingLanes;if(g===0)return 0;var b=0,S=l.suspendedLanes,C=l.pingedLanes,B=268435455&g;if(B!==0){var G=B&~S;G!==0?b=nl(G):(C&=B)!==0&&(b=nl(C))}else(B=g&~S)!==0?b=nl(B):C!==0&&(b=nl(C));if(b===0)return 0;if(u!==0&&u!==b&&(u&S)==0&&((S=b&-b)>=(C=u&-u)||S===16&&(4194240&C)!=0))return u;if((4&b)!=0&&(b|=16&g),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=b;0<u;)S=1<<(g=31-xn(u)),b|=l[g],u&=~S;return b}function qT(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function jf(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function L1(){var l=Gf;return(4194240&(Gf<<=1))==0&&(Gf=64),l}function $f(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function il(l,u,g){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-xn(u)]=g}function Vf(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var b=31-xn(g),S=1<<b;S&u|l[b]&u&&(l[b]|=u),g&=~S}}var Xe=0;function D1(l){return 1<(l&=-l)?4<l?(268435455&l)!=0?16:536870912:4:1}var Xf=n.unstable_scheduleCallback,O1=n.unstable_cancelCallback,ZT=n.unstable_shouldYield,JT=n.unstable_requestPaint,Ft=n.unstable_now,Yf=n.unstable_ImmediatePriority,eC=n.unstable_UserBlockingPriority,F1=n.unstable_NormalPriority,tC=n.unstable_IdlePriority,dc=null,qn=null,yn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},Ti=null,fc=!1,Kf=!1;function U1(l){Ti===null?Ti=[l]:Ti.push(l)}function Zn(){if(!Kf&&Ti!==null){Kf=!0;var l=0,u=Xe;try{var g=Ti;for(Xe=1;l<g.length;l++){var b=g[l];do b=b(!0);while(b!==null)}Ti=null,fc=!1}catch(S){throw Ti!==null&&(Ti=Ti.slice(l+1)),Xf(Yf,Zn),S}finally{Xe=u,Kf=!1}}return null}var zo=[],Go=0,pc=null,mc=0,qr=[],Zr=0,Ys=null,Jn=1,Ci="";function Ks(l,u){zo[Go++]=mc,zo[Go++]=pc,pc=l,mc=u}function H1(l,u,g){qr[Zr++]=Jn,qr[Zr++]=Ci,qr[Zr++]=Ys,Ys=l;var b=Jn;l=Ci;var S=32-xn(b)-1;b&=~(1<<S),g+=1;var C=32-xn(u)+S;if(30<C){var B=S-S%5;C=(b&(1<<B)-1).toString(32),b>>=B,S-=B,Jn=1<<32-xn(u)+S|g<<S|b,Ci=C+l}else Jn=1<<C|g<<S|b,Ci=l}function Qf(l){l.return!==null&&(Ks(l,1),H1(l,1,0))}function qf(l){for(;l===pc;)pc=zo[--Go],zo[Go]=null,mc=zo[--Go],zo[Go]=null;for(;l===Ys;)Ys=qr[--Zr],qr[Zr]=null,Ci=qr[--Zr],qr[Zr]=null,Jn=qr[--Zr],qr[Zr]=null}var Or=null,Jr=null,ct=!1,sl=!1,_n=null;function z1(l,u){var g=sn(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=l,(u=l.deletions)===null?(l.deletions=[g],l.flags|=16):u.push(g)}function G1(l,u){switch(l.tag){case 5:return(u=Df(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,Or=l,Jr=BT(u),!0);case 6:return(u=lc(u,l.pendingProps))!==null&&(l.stateNode=u,Or=l,Jr=null,!0);case 13:if((u=pr(u))!==null){var g=Ys!==null?{id:Jn,overflow:Ci}:null;return l.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},(g=sn(18,null,null,0)).stateNode=u,g.return=l,l.child=g,Or=l,Jr=null,!0}return!1;default:return!1}}function Zf(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Jf(l){if(ct){var u=Jr;if(u){var g=u;if(!G1(l,u)){if(Zf(l))throw Error(s(418));u=uc(g);var b=Or;u&&G1(l,u)?z1(b,g):(l.flags=-4097&l.flags|2,ct=!1,Or=l)}}else{if(Zf(l))throw Error(s(418));l.flags=-4097&l.flags|2,ct=!1,Or=l}}}function W1(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Or=l}function gc(l){if(!Be||l!==Or)return!1;if(!ct)return W1(l),ct=!0,!1;if(l.tag!==3&&(l.tag!==5||$T(l.type)&&!Ce(l.type,l.memoizedProps))){var u=Jr;if(u){if(Zf(l))throw j1(),Error(s(418));for(;u;)z1(l,u),u=uc(u)}}if(W1(l),l.tag===13){if(!Be)throw Error(s(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(s(317));Jr=HT(l)}else Jr=Or?uc(l.stateNode):null;return!0}function j1(){for(var l=Jr;l;)l=uc(l)}function Wo(){Be&&(Jr=Or=null,sl=ct=!1)}function e0(l){_n===null?_n=[l]:_n.push(l)}var rC=o.ReactCurrentBatchConfig;function vc(l,u){if(yn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var S=g[b];if(!YT.call(u,S)||!yn(l[S],u[S]))return!1}return!0}function nC(l){switch(l.tag){case 5:return rl(l.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return l=Uf(l.type,!1);case 11:return l=Uf(l.type.render,!1);case 1:return l=Uf(l.type,!0);default:return""}}function bn(l,u){if(l&&l.defaultProps){for(var g in u=i({},u),l=l.defaultProps)u[g]===void 0&&(u[g]=l[g]);return u}return u}var xc=ts(null),yc=null,jo=null,t0=null;function r0(){t0=jo=yc=null}function $1(l,u,g){Je?(it(xc,u._currentValue),u._currentValue=g):(it(xc,u._currentValue2),u._currentValue2=g)}function n0(l){var u=xc.current;ut(xc),Je?l._currentValue=u:l._currentValue2=u}function i0(l,u,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===g)break;l=l.return}}function $o(l,u){yc=l,t0=jo=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&u)!=0&&(Sr=!0),l.firstContext=null)}function en(l){var u=Je?l._currentValue:l._currentValue2;if(t0!==l)if(l={context:l,memoizedValue:u,next:null},jo===null){if(yc===null)throw Error(s(308));jo=l,yc.dependencies={lanes:0,firstContext:l}}else jo=jo.next=l;return u}var Qs=null;function s0(l){Qs===null?Qs=[l]:Qs.push(l)}function V1(l,u,g,b){var S=u.interleaved;return S===null?(g.next=g,s0(u)):(g.next=S.next,S.next=g),u.interleaved=g,ei(l,b)}function ei(l,u){l.lanes|=u;var g=l.alternate;for(g!==null&&(g.lanes|=u),g=l,l=l.return;l!==null;)l.childLanes|=u,(g=l.alternate)!==null&&(g.childLanes|=u),g=l,l=l.return;return g.tag===3?g.stateNode:null}var ns=!1;function o0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X1(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Ai(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function is(l,u,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(2&Ge)!=0){var S=b.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),b.pending=u,ei(l,g)}return(S=b.interleaved)===null?(u.next=u,s0(b)):(u.next=S.next,S.next=u),b.interleaved=u,ei(l,g)}function _c(l,u,g){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&g)!=0)){var b=u.lanes;g|=b&=l.pendingLanes,u.lanes=g,Vf(l,g)}}function Y1(l,u){var g=l.updateQueue,b=l.alternate;if(b!==null&&g===(b=b.updateQueue)){var S=null,C=null;if((g=g.firstBaseUpdate)!==null){do{var B={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};C===null?S=C=B:C=C.next=B,g=g.next}while(g!==null);C===null?S=C=u:C=C.next=u}else S=C=u;return g={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:b.shared,effects:b.effects},void(l.updateQueue=g)}(l=g.lastBaseUpdate)===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}function bc(l,u,g,b){var S=l.updateQueue;ns=!1;var C=S.firstBaseUpdate,B=S.lastBaseUpdate,G=S.shared.pending;if(G!==null){S.shared.pending=null;var Q=G,te=Q.next;Q.next=null,B===null?C=te:B.next=te,B=Q;var ne=l.alternate;ne!==null&&(G=(ne=ne.updateQueue).lastBaseUpdate)!==B&&(G===null?ne.firstBaseUpdate=te:G.next=te,ne.lastBaseUpdate=Q)}if(C!==null){var de=S.baseState;for(B=0,ne=te=Q=null,G=C;;){var re=G.lane,ue=G.eventTime;if((b&re)===re){ne!==null&&(ne=ne.next={eventTime:ue,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var _e=l,Fe=G;switch(re=u,ue=g,Fe.tag){case 1:if(typeof(_e=Fe.payload)=="function"){de=_e.call(ue,de,re);break e}de=_e;break e;case 3:_e.flags=-65537&_e.flags|128;case 0:if((re=typeof(_e=Fe.payload)=="function"?_e.call(ue,de,re):_e)==null)break e;de=i({},de,re);break e;case 2:ns=!0}}G.callback!==null&&G.lane!==0&&(l.flags|=64,(re=S.effects)===null?S.effects=[G]:re.push(G))}else ue={eventTime:ue,lane:re,tag:G.tag,payload:G.payload,callback:G.callback,next:null},ne===null?(te=ne=ue,Q=de):ne=ne.next=ue,B|=re;if((G=G.next)===null){if((G=S.shared.pending)===null)break;G=(re=G).next,re.next=null,S.lastBaseUpdate=re,S.shared.pending=null}}if(ne===null&&(Q=de),S.baseState=Q,S.firstBaseUpdate=te,S.lastBaseUpdate=ne,(u=S.shared.interleaved)!==null){S=u;do B|=S.lane,S=S.next;while(S!==u)}else C===null&&(S.shared.lanes=0);Zs|=B,l.lanes=B,l.memoizedState=de}}function K1(l,u,g){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var b=l[u],S=b.callback;if(S!==null){if(b.callback=null,b=g,typeof S!="function")throw Error(s(191,S));S.call(b)}}}var Q1=new r.Component().refs;function a0(l,u,g,b){g=(g=g(b,u=l.memoizedState))==null?u:i({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var wc={isMounted:function(l){return!!(l=l._reactInternals)&&M(l)===l},enqueueSetState:function(l,u,g){l=l._reactInternals;var b=or(),S=ls(l),C=Ai(b,S);C.payload=u,g!=null&&(C.callback=g),(u=is(l,C,S))!==null&&(nn(u,l,S,b),_c(u,l,S))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var b=or(),S=ls(l),C=Ai(b,S);C.tag=1,C.payload=u,g!=null&&(C.callback=g),(u=is(l,C,S))!==null&&(nn(u,l,S,b),_c(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=or(),b=ls(l),S=Ai(g,b);S.tag=2,u!=null&&(S.callback=u),(u=is(l,S,b))!==null&&(nn(u,l,b,g),_c(u,l,b))}};function q1(l,u,g,b,S,C,B){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,C,B):!u.prototype||!u.prototype.isPureReactComponent||!vc(g,b)||!vc(S,C)}function Z1(l,u,g){var b=!1,S=rs,C=u.contextType;return typeof C=="object"&&C!==null?C=en(C):(S=Dr(u)?Xs:nr.current,C=(b=(b=u.contextTypes)!=null)?Ho(l,S):rs),u=new u(g,C),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=wc,l.stateNode=u,u._reactInternals=l,b&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=C),u}function J1(l,u,g,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==l&&wc.enqueueReplaceState(u,u.state,null)}function l0(l,u,g,b){var S=l.stateNode;S.props=g,S.state=l.memoizedState,S.refs=Q1,o0(l);var C=u.contextType;typeof C=="object"&&C!==null?S.context=en(C):(C=Dr(u)?Xs:nr.current,S.context=Ho(l,C)),S.state=l.memoizedState,typeof(C=u.getDerivedStateFromProps)=="function"&&(a0(l,u,C,g),S.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&wc.enqueueReplaceState(S,S.state,null),bc(l,g,S,b),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}function ol(l,u,g){if((l=g.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner){if(g.tag!==1)throw Error(s(309));var b=g.stateNode}if(!b)throw Error(s(147,l));var S=b,C=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(B){var G=S.refs;G===Q1&&(G=S.refs={}),B===null?delete G[C]:G[C]=B},u._stringRef=C,u)}if(typeof l!="string")throw Error(s(284));if(!g._owner)throw Error(s(290,l))}return l}function Sc(l,u){throw l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function ex(l){return(0,l._init)(l._payload)}function tx(l){function u(ie,$){if(l){var ee=ie.deletions;ee===null?(ie.deletions=[$],ie.flags|=16):ee.push($)}}function g(ie,$){if(!l)return null;for(;$!==null;)u(ie,$),$=$.sibling;return null}function b(ie,$){for(ie=new Map;$!==null;)$.key!==null?ie.set($.key,$):ie.set($.index,$),$=$.sibling;return ie}function S(ie,$){return(ie=cs(ie,$)).index=0,ie.sibling=null,ie}function C(ie,$,ee){return ie.index=ee,l?(ee=ie.alternate)!==null?(ee=ee.index)<$?(ie.flags|=2,$):ee:(ie.flags|=2,$):(ie.flags|=1048576,$)}function B(ie){return l&&ie.alternate===null&&(ie.flags|=2),ie}function G(ie,$,ee,oe){return $===null||$.tag!==6?(($=Y0(ee,ie.mode,oe)).return=ie,$):(($=S($,ee)).return=ie,$)}function Q(ie,$,ee,oe){var Ae=ee.type;return Ae===d?ne(ie,$,ee.props.children,oe,ee.key):$!==null&&($.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===_&&ex(Ae)===$.type)?((oe=S($,ee.props)).ref=ol(ie,$,ee),oe.return=ie,oe):((oe=Kc(ee.type,ee.key,ee.props,null,ie.mode,oe)).ref=ol(ie,$,ee),oe.return=ie,oe)}function te(ie,$,ee,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?(($=K0(ee,ie.mode,oe)).return=ie,$):(($=S($,ee.children||[])).return=ie,$)}function ne(ie,$,ee,oe,Ae){return $===null||$.tag!==7?(($=to(ee,ie.mode,oe,Ae)).return=ie,$):(($=S($,ee)).return=ie,$)}function de(ie,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number")return($=Y0(""+$,ie.mode,ee)).return=ie,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case a:return(ee=Kc($.type,$.key,$.props,null,ie.mode,ee)).ref=ol(ie,null,$),ee.return=ie,ee;case h:return($=K0($,ie.mode,ee)).return=ie,$;case _:return de(ie,(0,$._init)($._payload),ee)}if(X($)||P($))return($=to($,ie.mode,ee,null)).return=ie,$;Sc(ie,$)}return null}function re(ie,$,ee,oe){var Ae=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Ae!==null?null:G(ie,$,""+ee,oe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:return ee.key===Ae?Q(ie,$,ee,oe):null;case h:return ee.key===Ae?te(ie,$,ee,oe):null;case _:return re(ie,$,(Ae=ee._init)(ee._payload),oe)}if(X(ee)||P(ee))return Ae!==null?null:ne(ie,$,ee,oe,null);Sc(ie,ee)}return null}function ue(ie,$,ee,oe,Ae){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return G($,ie=ie.get(ee)||null,""+oe,Ae);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case a:return Q($,ie=ie.get(oe.key===null?ee:oe.key)||null,oe,Ae);case h:return te($,ie=ie.get(oe.key===null?ee:oe.key)||null,oe,Ae);case _:return ue(ie,$,ee,(0,oe._init)(oe._payload),Ae)}if(X(oe)||P(oe))return ne($,ie=ie.get(ee)||null,oe,Ae,null);Sc($,oe)}return null}function _e(ie,$,ee,oe){for(var Ae=null,qe=null,we=$,Ye=$=0,Yt=null;we!==null&&Ye<ee.length;Ye++){we.index>Ye?(Yt=we,we=null):Yt=we.sibling;var Ze=re(ie,we,ee[Ye],oe);if(Ze===null){we===null&&(we=Yt);break}l&&we&&Ze.alternate===null&&u(ie,we),$=C(Ze,$,Ye),qe===null?Ae=Ze:qe.sibling=Ze,qe=Ze,we=Yt}if(Ye===ee.length)return g(ie,we),ct&&Ks(ie,Ye),Ae;if(we===null){for(;Ye<ee.length;Ye++)(we=de(ie,ee[Ye],oe))!==null&&($=C(we,$,Ye),qe===null?Ae=we:qe.sibling=we,qe=we);return ct&&Ks(ie,Ye),Ae}for(we=b(ie,we);Ye<ee.length;Ye++)(Yt=ue(we,ie,Ye,ee[Ye],oe))!==null&&(l&&Yt.alternate!==null&&we.delete(Yt.key===null?Ye:Yt.key),$=C(Yt,$,Ye),qe===null?Ae=Yt:qe.sibling=Yt,qe=Yt);return l&&we.forEach(function(hs){return u(ie,hs)}),ct&&Ks(ie,Ye),Ae}function Fe(ie,$,ee,oe){var Ae=P(ee);if(typeof Ae!="function")throw Error(s(150));if((ee=Ae.call(ee))==null)throw Error(s(151));for(var qe=Ae=null,we=$,Ye=$=0,Yt=null,Ze=ee.next();we!==null&&!Ze.done;Ye++,Ze=ee.next()){we.index>Ye?(Yt=we,we=null):Yt=we.sibling;var hs=re(ie,we,Ze.value,oe);if(hs===null){we===null&&(we=Yt);break}l&&we&&hs.alternate===null&&u(ie,we),$=C(hs,$,Ye),qe===null?Ae=hs:qe.sibling=hs,qe=hs,we=Yt}if(Ze.done)return g(ie,we),ct&&Ks(ie,Ye),Ae;if(we===null){for(;!Ze.done;Ye++,Ze=ee.next())(Ze=de(ie,Ze.value,oe))!==null&&($=C(Ze,$,Ye),qe===null?Ae=Ze:qe.sibling=Ze,qe=Ze);return ct&&Ks(ie,Ye),Ae}for(we=b(ie,we);!Ze.done;Ye++,Ze=ee.next())(Ze=ue(we,ie,Ye,Ze.value,oe))!==null&&(l&&Ze.alternate!==null&&we.delete(Ze.key===null?Ye:Ze.key),$=C(Ze,$,Ye),qe===null?Ae=Ze:qe.sibling=Ze,qe=Ze);return l&&we.forEach(function(AC){return u(ie,AC)}),ct&&Ks(ie,Ye),Ae}return function ie($,ee,oe,Ae){if(typeof oe=="object"&&oe!==null&&oe.type===d&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case a:e:{for(var qe=oe.key,we=ee;we!==null;){if(we.key===qe){if((qe=oe.type)===d){if(we.tag===7){g($,we.sibling),(ee=S(we,oe.props.children)).return=$,$=ee;break e}}else if(we.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===_&&ex(qe)===we.type){g($,we.sibling),(ee=S(we,oe.props)).ref=ol($,we,oe),ee.return=$,$=ee;break e}g($,we);break}u($,we),we=we.sibling}oe.type===d?((ee=to(oe.props.children,$.mode,Ae,oe.key)).return=$,$=ee):((Ae=Kc(oe.type,oe.key,oe.props,null,$.mode,Ae)).ref=ol($,ee,oe),Ae.return=$,$=Ae)}return B($);case h:e:{for(we=oe.key;ee!==null;){if(ee.key===we){if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){g($,ee.sibling),(ee=S(ee,oe.children||[])).return=$,$=ee;break e}g($,ee);break}u($,ee),ee=ee.sibling}(ee=K0(oe,$.mode,Ae)).return=$,$=ee}return B($);case _:return ie($,ee,(we=oe._init)(oe._payload),Ae)}if(X(oe))return _e($,ee,oe,Ae);if(P(oe))return Fe($,ee,oe,Ae);Sc($,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(g($,ee.sibling),(ee=S(ee,oe)).return=$,$=ee):(g($,ee),(ee=Y0(oe,$.mode,Ae)).return=$,$=ee),B($)):g($,ee)}}var Vo=tx(!0),rx=tx(!1),al={},tn=ts(al),ll=ts(al),Xo=ts(al);function ti(l){if(l===al)throw Error(s(174));return l}function u0(l,u){it(Xo,u),it(ll,l),it(tn,al),l=Z(u),ut(tn),it(tn,l)}function Yo(){ut(tn),ut(ll),ut(Xo)}function nx(l){var u=ti(Xo.current),g=ti(tn.current);g!==(u=F(g,l.type,u))&&(it(ll,l),it(tn,u))}function c0(l){ll.current===l&&(ut(tn),ut(ll))}var wt=ts(0);function Ec(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&((g=g.dehydrated)===null||vn(g)||Fo(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((128&u.flags)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var h0=[];function d0(){for(var l=0;l<h0.length;l++){var u=h0[l];Je?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}h0.length=0}var Tc=o.ReactCurrentDispatcher,f0=o.ReactCurrentBatchConfig,qs=0,gt=null,Ut=null,Ht=null,Cc=!1,ul=!1,cl=0,iC=0;function ir(){throw Error(s(321))}function p0(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!yn(l[g],u[g]))return!1;return!0}function m0(l,u,g,b,S,C){if(qs=C,gt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Tc.current=l===null||l.memoizedState===null?lC:uC,l=g(b,S),ul){C=0;do{if(ul=!1,cl=0,25<=C)throw Error(s(301));C+=1,Ht=Ut=null,u.updateQueue=null,Tc.current=cC,l=g(b,S)}while(ul)}if(Tc.current=Pc,u=Ut!==null&&Ut.next!==null,qs=0,Ht=Ut=gt=null,Cc=!1,u)throw Error(s(300));return l}function g0(){var l=cl!==0;return cl=0,l}function ri(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?gt.memoizedState=Ht=l:Ht=Ht.next=l,Ht}function rn(){if(Ut===null){var l=gt.alternate;l=l!==null?l.memoizedState:null}else l=Ut.next;var u=Ht===null?gt.memoizedState:Ht.next;if(u!==null)Ht=u,Ut=l;else{if(l===null)throw Error(s(310));l={memoizedState:(Ut=l).memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Ht===null?gt.memoizedState=Ht=l:Ht=Ht.next=l}return Ht}function hl(l,u){return typeof u=="function"?u(l):u}function v0(l){var u=rn(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var b=Ut,S=b.baseQueue,C=g.pending;if(C!==null){if(S!==null){var B=S.next;S.next=C.next,C.next=B}b.baseQueue=S=C,g.pending=null}if(S!==null){C=S.next,b=b.baseState;var G=B=null,Q=null,te=C;do{var ne=te.lane;if((qs&ne)===ne)Q!==null&&(Q=Q.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),b=te.hasEagerState?te.eagerState:l(b,te.action);else{var de={lane:ne,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};Q===null?(G=Q=de,B=b):Q=Q.next=de,gt.lanes|=ne,Zs|=ne}te=te.next}while(te!==null&&te!==C);Q===null?B=b:Q.next=G,yn(b,u.memoizedState)||(Sr=!0),u.memoizedState=b,u.baseState=B,u.baseQueue=Q,g.lastRenderedState=b}if((l=g.interleaved)!==null){S=l;do C=S.lane,gt.lanes|=C,Zs|=C,S=S.next;while(S!==l)}else S===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function x0(l){var u=rn(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var b=g.dispatch,S=g.pending,C=u.memoizedState;if(S!==null){g.pending=null;var B=S=S.next;do C=l(C,B.action),B=B.next;while(B!==S);yn(C,u.memoizedState)||(Sr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),g.lastRenderedState=C}return[C,b]}function ix(){}function sx(l,u){var g=gt,b=rn(),S=u(),C=!yn(b.memoizedState,S);if(C&&(b.memoizedState=S,Sr=!0),b=b.queue,y0(lx.bind(null,g,b,l),[l]),b.getSnapshot!==u||C||Ht!==null&&1&Ht.memoizedState.tag){if(g.flags|=2048,dl(9,ax.bind(null,g,b,S,u),void 0,null),zt===null)throw Error(s(349));(30&qs)!=0||ox(g,u,S)}return S}function ox(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},(u=gt.updateQueue)===null?(u={lastEffect:null,stores:null},gt.updateQueue=u,u.stores=[l]):(g=u.stores)===null?u.stores=[l]:g.push(l)}function ax(l,u,g,b){u.value=g,u.getSnapshot=b,ux(u)&&cx(l)}function lx(l,u,g){return g(function(){ux(u)&&cx(l)})}function ux(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!yn(l,g)}catch{return!0}}function cx(l){var u=ei(l,1);u!==null&&nn(u,l,1,-1)}function hx(l){var u=ri();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:l},u.queue=l,l=l.dispatch=aC.bind(null,gt,l),[u.memoizedState,l]}function dl(l,u,g,b){return l={tag:l,create:u,destroy:g,deps:b,next:null},(u=gt.updateQueue)===null?(u={lastEffect:null,stores:null},gt.updateQueue=u,u.lastEffect=l.next=l):(g=u.lastEffect)===null?u.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,u.lastEffect=l),l}function dx(){return rn().memoizedState}function Ac(l,u,g,b){var S=ri();gt.flags|=l,S.memoizedState=dl(1|u,g,void 0,b===void 0?null:b)}function kc(l,u,g,b){var S=rn();b=b===void 0?null:b;var C=void 0;if(Ut!==null){var B=Ut.memoizedState;if(C=B.destroy,b!==null&&p0(b,B.deps))return void(S.memoizedState=dl(u,g,C,b))}gt.flags|=l,S.memoizedState=dl(1|u,g,C,b)}function fx(l,u){return Ac(8390656,8,l,u)}function y0(l,u){return kc(2048,8,l,u)}function px(l,u){return kc(4,2,l,u)}function mx(l,u){return kc(4,4,l,u)}function gx(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function vx(l,u,g){return g=g!=null?g.concat([l]):null,kc(4,4,gx.bind(null,u,l),g)}function _0(){}function xx(l,u){var g=rn();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&p0(u,b[1])?b[0]:(g.memoizedState=[l,u],l)}function yx(l,u){var g=rn();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&p0(u,b[1])?b[0]:(l=l(),g.memoizedState=[l,u],l)}function _x(l,u,g){return(21&qs)==0?(l.baseState&&(l.baseState=!1,Sr=!0),l.memoizedState=g):(yn(g,u)||(g=L1(),gt.lanes|=g,Zs|=g,l.baseState=!0),u)}function sC(l,u){var g=Xe;Xe=g!==0&&4>g?g:4,l(!0);var b=f0.transition;f0.transition={};try{l(!1),u()}finally{Xe=g,f0.transition=b}}function bx(){return rn().memoizedState}function oC(l,u,g){var b=ls(l);g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},wx(l)?Sx(u,g):(g=V1(l,u,g,b))!==null&&(nn(g,l,b,or()),Ex(g,u,b))}function aC(l,u,g){var b=ls(l),S={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(wx(l))Sx(u,S);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer)!==null)try{var B=u.lastRenderedState,G=C(B,g);if(S.hasEagerState=!0,S.eagerState=G,yn(G,B)){var Q=u.interleaved;return Q===null?(S.next=S,s0(u)):(S.next=Q.next,Q.next=S),void(u.interleaved=S)}}catch{}(g=V1(l,u,S,b))!==null&&(nn(g,l,b,S=or()),Ex(g,u,b))}}function wx(l){var u=l.alternate;return l===gt||u!==null&&u===gt}function Sx(l,u){ul=Cc=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function Ex(l,u,g){if((4194240&g)!=0){var b=u.lanes;g|=b&=l.pendingLanes,u.lanes=g,Vf(l,g)}}var Pc={readContext:en,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},lC={readContext:en,useCallback:function(l,u){return ri().memoizedState=[l,u===void 0?null:u],l},useContext:en,useEffect:fx,useImperativeHandle:function(l,u,g){return g=g!=null?g.concat([l]):null,Ac(4194308,4,gx.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Ac(4194308,4,l,u)},useInsertionEffect:function(l,u){return Ac(4,2,l,u)},useMemo:function(l,u){var g=ri();return u=u===void 0?null:u,l=l(),g.memoizedState=[l,u],l},useReducer:function(l,u,g){var b=ri();return u=g!==void 0?g(u):u,b.memoizedState=b.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},b.queue=l,l=l.dispatch=oC.bind(null,gt,l),[b.memoizedState,l]},useRef:function(l){return l={current:l},ri().memoizedState=l},useState:hx,useDebugValue:_0,useDeferredValue:function(l){return ri().memoizedState=l},useTransition:function(){var l=hx(!1),u=l[0];return l=sC.bind(null,l[1]),ri().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,g){var b=gt,S=ri();if(ct){if(g===void 0)throw Error(s(407));g=g()}else{if(g=u(),zt===null)throw Error(s(349));(30&qs)!=0||ox(b,u,g)}S.memoizedState=g;var C={value:g,getSnapshot:u};return S.queue=C,fx(lx.bind(null,b,C,l),[l]),b.flags|=2048,dl(9,ax.bind(null,b,C,g,u),void 0,null),g},useId:function(){var l=ri(),u=zt.identifierPrefix;if(ct){var g=Ci;u=":"+u+"R"+(g=(Jn&~(1<<32-xn(Jn)-1)).toString(32)+g),0<(g=cl++)&&(u+="H"+g.toString(32)),u+=":"}else u=":"+u+"r"+(g=iC++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},uC={readContext:en,useCallback:xx,useContext:en,useEffect:y0,useImperativeHandle:vx,useInsertionEffect:px,useLayoutEffect:mx,useMemo:yx,useReducer:v0,useRef:dx,useState:function(){return v0(hl)},useDebugValue:_0,useDeferredValue:function(l){return _x(rn(),Ut.memoizedState,l)},useTransition:function(){return[v0(hl)[0],rn().memoizedState]},useMutableSource:ix,useSyncExternalStore:sx,useId:bx,unstable_isNewReconciler:!1},cC={readContext:en,useCallback:xx,useContext:en,useEffect:y0,useImperativeHandle:vx,useInsertionEffect:px,useLayoutEffect:mx,useMemo:yx,useReducer:x0,useRef:dx,useState:function(){return x0(hl)},useDebugValue:_0,useDeferredValue:function(l){var u=rn();return Ut===null?u.memoizedState=l:_x(u,Ut.memoizedState,l)},useTransition:function(){return[x0(hl)[0],rn().memoizedState]},useMutableSource:ix,useSyncExternalStore:sx,useId:bx,unstable_isNewReconciler:!1};function Ko(l,u){try{var g="",b=u;do g+=nC(b),b=b.return;while(b);var S=g}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:u,stack:S,digest:null}}function b0(l,u,g){return{value:l,source:null,stack:g??null,digest:u??null}}function w0(l,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var hC=typeof WeakMap=="function"?WeakMap:Map;function Tx(l,u,g){(g=Ai(-1,g)).tag=3,g.payload={element:null};var b=u.value;return g.callback=function(){Wc||(Wc=!0,z0=b),w0(0,u)},g}function Cx(l,u,g){(g=Ai(-1,g)).tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var S=u.value;g.payload=function(){return b(S)},g.callback=function(){w0(0,u)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(g.callback=function(){w0(0,u),typeof b!="function"&&(os===null?os=new Set([this]):os.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),g}function Ax(l,u,g){var b=l.pingCache;if(b===null){b=l.pingCache=new hC;var S=new Set;b.set(u,S)}else(S=b.get(u))===void 0&&(S=new Set,b.set(u,S));S.has(g)||(S.add(g),l=_C.bind(null,l,u,g),u.then(l,l))}function kx(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function Px(l,u,g,b,S){return(1&l.mode)==0?(l===u?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:((u=Ai(-1,1)).tag=2,is(g,u,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=S,l)}var dC=o.ReactCurrentOwner,Sr=!1;function Er(l,u,g,b){u.child=l===null?rx(u,null,g,b):Vo(u,l.child,g,b)}function Ix(l,u,g,b,S){g=g.render;var C=u.ref;return $o(u,S),b=m0(l,u,g,b,C,S),g=g0(),l===null||Sr?(ct&&g&&Qf(u),u.flags|=1,Er(l,u,b,S),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,ki(l,u,S))}function Rx(l,u,g,b,S){if(l===null){var C=g.type;return typeof C!="function"||X0(C)||C.defaultProps!==void 0||g.compare!==null||g.defaultProps!==void 0?((l=Kc(g.type,null,b,u,u.mode,S)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=C,Mx(l,u,C,b,S))}if(C=l.child,(l.lanes&S)==0){var B=C.memoizedProps;if((g=(g=g.compare)!==null?g:vc)(B,b)&&l.ref===u.ref)return ki(l,u,S)}return u.flags|=1,(l=cs(C,b)).ref=u.ref,l.return=u,u.child=l}function Mx(l,u,g,b,S){if(l!==null){var C=l.memoizedProps;if(vc(C,b)&&l.ref===u.ref){if(Sr=!1,u.pendingProps=b=C,(l.lanes&S)==0)return u.lanes=l.lanes,ki(l,u,S);(131072&l.flags)!=0&&(Sr=!0)}}return S0(l,u,g,b,S)}function Nx(l,u,g){var b=u.pendingProps,S=b.children,C=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((1&u.mode)==0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(qo,Fr),Fr|=g;else{if((1073741824&g)==0)return l=C!==null?C.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,it(qo,Fr),Fr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=C!==null?C.baseLanes:g,it(qo,Fr),Fr|=b}else C!==null?(b=C.baseLanes|g,u.memoizedState=null):b=g,it(qo,Fr),Fr|=b;return Er(l,u,S,g),u.child}function Bx(l,u){var g=u.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function S0(l,u,g,b,S){var C=Dr(g)?Xs:nr.current;return C=Ho(u,C),$o(u,S),g=m0(l,u,g,b,C,S),b=g0(),l===null||Sr?(ct&&b&&Qf(u),u.flags|=1,Er(l,u,g,S),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,ki(l,u,S))}function Lx(l,u,g,b,S){if(Dr(g)){var C=!0;cc(u)}else C=!1;if($o(u,S),u.stateNode===null)Nc(l,u),Z1(u,g,b),l0(u,g,b,S),b=!0;else if(l===null){var B=u.stateNode,G=u.memoizedProps;B.props=G;var Q=B.context,te=g.contextType;typeof te=="object"&&te!==null?te=en(te):te=Ho(u,te=Dr(g)?Xs:nr.current);var ne=g.getDerivedStateFromProps,de=typeof ne=="function"||typeof B.getSnapshotBeforeUpdate=="function";de||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(G!==b||Q!==te)&&J1(u,B,b,te),ns=!1;var re=u.memoizedState;B.state=re,bc(u,b,B,S),Q=u.memoizedState,G!==b||re!==Q||wr.current||ns?(typeof ne=="function"&&(a0(u,g,ne,b),Q=u.memoizedState),(G=ns||q1(u,g,G,b,re,Q,te))?(de||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Q),B.props=b,B.state=Q,B.context=te,b=G):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{B=u.stateNode,X1(l,u),G=u.memoizedProps,te=u.type===u.elementType?G:bn(u.type,G),B.props=te,de=u.pendingProps,re=B.context,typeof(Q=g.contextType)=="object"&&Q!==null?Q=en(Q):Q=Ho(u,Q=Dr(g)?Xs:nr.current);var ue=g.getDerivedStateFromProps;(ne=typeof ue=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(G!==de||re!==Q)&&J1(u,B,b,Q),ns=!1,re=u.memoizedState,B.state=re,bc(u,b,B,S);var _e=u.memoizedState;G!==de||re!==_e||wr.current||ns?(typeof ue=="function"&&(a0(u,g,ue,b),_e=u.memoizedState),(te=ns||q1(u,g,te,b,re,_e,Q)||!1)?(ne||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(b,_e,Q),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(b,_e,Q)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=_e),B.props=b,B.state=_e,B.context=Q,b=te):(typeof B.componentDidUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||G===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),b=!1)}return E0(l,u,g,b,C,S)}function E0(l,u,g,b,S,C){Bx(l,u);var B=(128&u.flags)!=0;if(!b&&!B)return S&&B1(u,g,!1),ki(l,u,C);b=u.stateNode,dC.current=u;var G=B&&typeof g.getDerivedStateFromError!="function"?null:b.render();return u.flags|=1,l!==null&&B?(u.child=Vo(u,l.child,null,C),u.child=Vo(u,null,G,C)):Er(l,u,G,C),u.memoizedState=b.state,S&&B1(u,g,!0),u.child}function Dx(l){var u=l.stateNode;u.pendingContext?M1(0,u.pendingContext,u.pendingContext!==u.context):u.context&&M1(0,u.context,!1),u0(l,u.containerInfo)}function Ox(l,u,g,b,S){return Wo(),e0(S),u.flags|=256,Er(l,u,g,b),u.child}var fl,pl,Ic,Rc,T0={dehydrated:null,treeContext:null,retryLane:0};function C0(l){return{baseLanes:l,cachePool:null,transitions:null}}function Fx(l,u,g){var b,S=u.pendingProps,C=wt.current,B=!1,G=(128&u.flags)!=0;if((b=G)||(b=(l===null||l.memoizedState!==null)&&(2&C)!=0),b?(B=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(C|=1),it(wt,1&C),l===null)return Jf(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?((1&u.mode)==0?u.lanes=1:Fo(l)?u.lanes=8:u.lanes=1073741824,null):(G=S.children,l=S.fallback,B?(S=u.mode,B=u.child,G={mode:"hidden",children:G},(1&S)==0&&B!==null?(B.childLanes=0,B.pendingProps=G):B=Qc(G,S,0,null),l=to(l,S,g,null),B.return=u,l.return=u,B.sibling=l,u.child=B,u.child.memoizedState=C0(g),u.memoizedState=T0,l):A0(u,G));if((C=l.memoizedState)!==null&&(b=C.dehydrated)!==null)return function(te,ne,de,re,ue,_e,Fe){if(de)return 256&ne.flags?(ne.flags&=-257,Mc(te,ne,Fe,re=b0(Error(s(422))))):ne.memoizedState!==null?(ne.child=te.child,ne.flags|=128,null):(_e=re.fallback,ue=ne.mode,re=Qc({mode:"visible",children:re.children},ue,0,null),(_e=to(_e,ue,Fe,null)).flags|=2,re.return=ne,_e.return=ne,re.sibling=_e,ne.child=re,(1&ne.mode)!=0&&Vo(ne,te.child,null,Fe),ne.child.memoizedState=C0(Fe),ne.memoizedState=T0,_e);if((1&ne.mode)==0)return Mc(te,ne,Fe,null);if(Fo(ue))return re=Of(ue).digest,_e=Error(s(419)),re=b0(_e,re,void 0),Mc(te,ne,Fe,re);if(de=(Fe&te.childLanes)!=0,Sr||de){if((re=zt)!==null){switch(Fe&-Fe){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}(ue=(ue&(re.suspendedLanes|Fe))!=0?0:ue)!==0&&ue!==_e.retryLane&&(_e.retryLane=ue,ei(te,ue),nn(re,te,ue,-1))}return V0(),Mc(te,ne,Fe,re=b0(Error(s(421))))}return vn(ue)?(ne.flags|=128,ne.child=te.child,ne=bC.bind(null,te),NT(ue,ne),null):(te=_e.treeContext,Be&&(Jr=DT(ue),Or=ne,ct=!0,_n=null,sl=!1,te!==null&&(qr[Zr++]=Jn,qr[Zr++]=Ci,qr[Zr++]=Ys,Jn=te.id,Ci=te.overflow,Ys=ne)),ne=A0(ne,re.children),ne.flags|=4096,ne)}(l,u,G,S,b,C,g);if(B){B=S.fallback,G=u.mode,b=(C=l.child).sibling;var Q={mode:"hidden",children:S.children};return(1&G)==0&&u.child!==C?((S=u.child).childLanes=0,S.pendingProps=Q,u.deletions=null):(S=cs(C,Q)).subtreeFlags=14680064&C.subtreeFlags,b!==null?B=cs(b,B):(B=to(B,G,g,null)).flags|=2,B.return=u,S.return=u,S.sibling=B,u.child=S,S=B,B=u.child,G=(G=l.child.memoizedState)===null?C0(g):{baseLanes:G.baseLanes|g,cachePool:null,transitions:G.transitions},B.memoizedState=G,B.childLanes=l.childLanes&~g,u.memoizedState=T0,S}return l=(B=l.child).sibling,S=cs(B,{mode:"visible",children:S.children}),(1&u.mode)==0&&(S.lanes=g),S.return=u,S.sibling=null,l!==null&&((g=u.deletions)===null?(u.deletions=[l],u.flags|=16):g.push(l)),u.child=S,u.memoizedState=null,S}function A0(l,u){return(u=Qc({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function Mc(l,u,g,b){return b!==null&&e0(b),Vo(u,l.child,null,g),(l=A0(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function Ux(l,u,g){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),i0(l.return,u,g)}function k0(l,u,g,b,S){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:S}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=b,C.tail=g,C.tailMode=S)}function Hx(l,u,g){var b=u.pendingProps,S=b.revealOrder,C=b.tail;if(Er(l,u,b.children,g),(2&(b=wt.current))!=0)b=1&b|2,u.flags|=128;else{if(l!==null&&(128&l.flags)!=0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Ux(l,g,u);else if(l.tag===19)Ux(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(it(wt,b),(1&u.mode)==0)u.memoizedState=null;else switch(S){case"forwards":for(g=u.child,S=null;g!==null;)(l=g.alternate)!==null&&Ec(l)===null&&(S=g),g=g.sibling;(g=S)===null?(S=u.child,u.child=null):(S=g.sibling,g.sibling=null),k0(u,!1,S,g,C);break;case"backwards":for(g=null,S=u.child,u.child=null;S!==null;){if((l=S.alternate)!==null&&Ec(l)===null){u.child=S;break}l=S.sibling,S.sibling=g,g=S,S=l}k0(u,!0,g,null,C);break;case"together":k0(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Nc(l,u){(1&u.mode)==0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function ki(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),Zs|=u.lanes,(g&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(g=cs(l=u.child,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,(g=g.sibling=cs(l,l.pendingProps)).return=u;g.sibling=null}return u.child}function ni(l){l.flags|=4}function zx(l,u){if(l!==null&&l.child===u.child)return!0;if((16&u.flags)!=0)return!1;for(l=u.child;l!==null;){if((12854&l.flags)!=0||(12854&l.subtreeFlags)!=0)return!1;l=l.sibling}return!0}if(Oe)fl=function(l,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)j(l,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},pl=function(){},Ic=function(l,u,g,b,S){if((l=l.memoizedProps)!==b){var C=u.stateNode,B=ti(tn.current);g=q(C,g,l,b,S,B),(u.updateQueue=g)&&ni(u)}},Rc=function(l,u,g,b){g!==b&&ni(u)};else if(Qe){fl=function(l,u,g,b){for(var S=u.child;S!==null;){if(S.tag===5){var C=S.stateNode;g&&b&&(C=ac(C,S.type,S.memoizedProps,S)),j(l,C)}else if(S.tag===6)C=S.stateNode,g&&b&&(C=tl(C,S.memoizedProps,S)),j(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),fl(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var Gx=function(l,u,g,b){for(var S=u.child;S!==null;){if(S.tag===5){var C=S.stateNode;g&&b&&(C=ac(C,S.type,S.memoizedProps,S)),sc(l,C)}else if(S.tag===6)C=S.stateNode,g&&b&&(C=tl(C,S.memoizedProps,S)),sc(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),Gx(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};pl=function(l,u){var g=u.stateNode;if(!zx(l,u)){l=g.containerInfo;var b=ic(l);Gx(b,u,!1,!1),g.pendingChildren=b,ni(u),oc(l,b)}},Ic=function(l,u,g,b,S){var C=l.stateNode,B=l.memoizedProps;if((l=zx(l,u))&&B===b)u.stateNode=C;else{var G=u.stateNode,Q=ti(tn.current),te=null;B!==b&&(te=q(G,g,B,b,S,Q)),l&&te===null?u.stateNode=C:(C=Lf(C,te,g,B,b,u,l,G),J(C,g,b,S,Q)&&ni(u),u.stateNode=C,l?ni(u):fl(C,u,!1,!1))}},Rc=function(l,u,g,b){g!==b?(l=ti(Xo.current),g=ti(tn.current),u.stateNode=ge(b,l,g,u),ni(u)):u.stateNode=l.stateNode}}else pl=function(){},Ic=function(){},Rc=function(){};function ml(l,u){if(!ct)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function mr(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(u)for(var S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=14680064&S.subtreeFlags,b|=14680064&S.flags,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=b,l.childLanes=g,u}function fC(l,u,g){var b=u.pendingProps;switch(qf(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(u),null;case 1:case 17:return Dr(u.type)&&zf(),mr(u),null;case 3:return g=u.stateNode,Yo(),ut(wr),ut(nr),d0(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),l!==null&&l.child!==null||(gc(u)?ni(u):l===null||l.memoizedState.isDehydrated&&(256&u.flags)==0||(u.flags|=1024,_n!==null&&(j0(_n),_n=null))),pl(l,u),mr(u),null;case 5:c0(u),g=ti(Xo.current);var S=u.type;if(l!==null&&u.stateNode!=null)Ic(l,u,S,b,g),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!b){if(u.stateNode===null)throw Error(s(166));return mr(u),null}if(l=ti(tn.current),gc(u)){if(!Be)throw Error(s(175));l=OT(u.stateNode,u.type,u.memoizedProps,g,l,u,!sl),u.updateQueue=l,l!==null&&ni(u)}else{var C=H(S,b,g,l,u);fl(C,u,!1,!1),u.stateNode=C,J(C,S,b,g,l)&&ni(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return mr(u),null;case 6:if(l&&u.stateNode!=null)Rc(l,u,l.memoizedProps,b);else{if(typeof b!="string"&&u.stateNode===null)throw Error(s(166));if(l=ti(Xo.current),g=ti(tn.current),gc(u)){if(!Be)throw Error(s(176));if(l=u.stateNode,g=u.memoizedProps,(b=FT(l,g,u,!sl))&&(S=Or)!==null)switch(S.tag){case 3:VT(S.stateNode.containerInfo,l,g,(1&S.mode)!=0);break;case 5:XT(S.type,S.memoizedProps,S.stateNode,l,g,(1&S.mode)!=0)}b&&ni(u)}else u.stateNode=ge(b,l,g,u)}return mr(u),null;case 13:if(ut(wt),b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(ct&&Jr!==null&&(1&u.mode)!=0&&(128&u.flags)==0)j1(),Wo(),u.flags|=98560,S=!1;else if(S=gc(u),b!==null&&b.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!Be)throw Error(s(344));if(!(S=(S=u.memoizedState)!==null?S.dehydrated:null))throw Error(s(317));UT(S,u)}else Wo(),(128&u.flags)==0&&(u.memoizedState=null),u.flags|=4;mr(u),S=!1}else _n!==null&&(j0(_n),_n=null),S=!0;if(!S)return 65536&u.flags?u:null}return(128&u.flags)!=0?(u.lanes=g,u):((g=b!==null)!=(l!==null&&l.memoizedState!==null)&&g&&(u.child.flags|=8192,(1&u.mode)!=0&&(l===null||(1&wt.current)!=0?Bt===0&&(Bt=3):V0())),u.updateQueue!==null&&(u.flags|=4),mr(u),null);case 4:return Yo(),pl(l,u),l===null&&Vt(u.stateNode.containerInfo),mr(u),null;case 10:return n0(u.type._context),mr(u),null;case 19:if(ut(wt),(S=u.memoizedState)===null)return mr(u),null;if(b=(128&u.flags)!=0,(C=S.rendering)===null)if(b)ml(S,!1);else{if(Bt!==0||l!==null&&(128&l.flags)!=0)for(l=u.child;l!==null;){if((C=Ec(l))!==null){for(u.flags|=128,ml(S,!1),(l=C.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=g,g=u.child;g!==null;)S=l,(b=g).flags&=14680066,(C=b.alternate)===null?(b.childLanes=0,b.lanes=S,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=C.childLanes,b.lanes=C.lanes,b.child=C.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=C.memoizedProps,b.memoizedState=C.memoizedState,b.updateQueue=C.updateQueue,b.type=C.type,S=C.dependencies,b.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),g=g.sibling;return it(wt,1&wt.current|2),u.child}l=l.sibling}S.tail!==null&&Ft()>H0&&(u.flags|=128,b=!0,ml(S,!1),u.lanes=4194304)}else{if(!b)if((l=Ec(C))!==null){if(u.flags|=128,b=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),ml(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!ct)return mr(u),null}else 2*Ft()-S.renderingStartTime>H0&&g!==1073741824&&(u.flags|=128,b=!0,ml(S,!1),u.lanes=4194304);S.isBackwards?(C.sibling=u.child,u.child=C):((l=S.last)!==null?l.sibling=C:u.child=C,S.last=C)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Ft(),u.sibling=null,l=wt.current,it(wt,b?1&l|2:1&l),u):(mr(u),null);case 22:case 23:return $0(),g=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==g&&(u.flags|=8192),g&&(1&u.mode)!=0?(1073741824&Fr)!=0&&(mr(u),Oe&&6&u.subtreeFlags&&(u.flags|=8192)):mr(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function pC(l,u){switch(qf(u),u.tag){case 1:return Dr(u.type)&&zf(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return Yo(),ut(wr),ut(nr),d0(),(65536&(l=u.flags))!=0&&(128&l)==0?(u.flags=-65537&l|128,u):null;case 5:return c0(u),null;case 13:if(ut(wt),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));Wo()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return ut(wt),null;case 4:return Yo(),null;case 10:return n0(u.type._context),null;case 22:case 23:return $0(),null;default:return null}}var Bc=!1,sr=!1,mC=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Qo(l,u){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){ht(l,u,b)}else g.current=null}function Wx(l,u,g){try{g()}catch(b){ht(l,u,b)}}var jx=!1;function gl(l,u,g){var b=u.updateQueue;if((b=b!==null?b.lastEffect:null)!==null){var S=b=b.next;do{if((S.tag&l)===l){var C=S.destroy;S.destroy=void 0,C!==void 0&&Wx(u,g,C)}S=S.next}while(S!==b)}}function Lc(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var g=u=u.next;do{if((g.tag&l)===l){var b=g.create;g.destroy=b()}g=g.next}while(g!==u)}}function P0(l){var u=l.ref;if(u!==null){var g=l.stateNode;l.tag===5?l=K(g):l=g,typeof u=="function"?u(l):u.current=l}}function $x(l){var u=l.alternate;u!==null&&(l.alternate=null,$x(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&Zi(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Vx(l){return l.tag===5||l.tag===3||l.tag===4}function Xx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Vx(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function I0(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?Zu(g,l,u):Qu(g,l);else if(b!==4&&(l=l.child)!==null)for(I0(l,u,g),l=l.sibling;l!==null;)I0(l,u,g),l=l.sibling}function R0(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?Rf(g,l,u):If(g,l);else if(b!==4&&(l=l.child)!==null)for(R0(l,u,g),l=l.sibling;l!==null;)R0(l,u,g),l=l.sibling}var gr=null,ii=!1;function si(l,u,g){for(g=g.child;g!==null;)M0(l,u,g),g=g.sibling}function M0(l,u,g){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(dc,g)}catch{}switch(g.tag){case 5:sr||Qo(g,u);case 6:if(Oe){var b=gr,S=ii;gr=null,si(l,u,g),ii=S,(gr=b)!==null&&(ii?Mf(gr,g.stateNode):Ju(gr,g.stateNode))}else si(l,u,g);break;case 18:Oe&&gr!==null&&(ii?jT(gr,g.stateNode):WT(gr,g.stateNode));break;case 4:Oe?(b=gr,S=ii,gr=g.stateNode.containerInfo,ii=!0,si(l,u,g),gr=b,ii=S):(Qe&&(b=g.stateNode.containerInfo,S=ic(b),el(b,S)),si(l,u,g));break;case 0:case 11:case 14:case 15:if(!sr&&(b=g.updateQueue)!==null&&(b=b.lastEffect)!==null){S=b=b.next;do{var C=S,B=C.destroy;C=C.tag,B!==void 0&&((2&C)!=0||(4&C)!=0)&&Wx(g,u,B),S=S.next}while(S!==b)}si(l,u,g);break;case 1:if(!sr&&(Qo(g,u),typeof(b=g.stateNode).componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(G){ht(g,u,G)}si(l,u,g);break;case 21:si(l,u,g);break;case 22:1&g.mode?(sr=(b=sr)||g.memoizedState!==null,si(l,u,g),sr=b):si(l,u,g);break;default:si(l,u,g)}}function Yx(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new mC),u.forEach(function(b){var S=wC.bind(null,l,b);g.has(b)||(g.add(b),b.then(S,S))})}}function wn(l,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var S=g[b];try{var C=l,B=u;if(Oe){var G=B;e:for(;G!==null;){switch(G.tag){case 5:gr=G.stateNode,ii=!1;break e;case 3:case 4:gr=G.stateNode.containerInfo,ii=!0;break e}G=G.return}if(gr===null)throw Error(s(160));M0(C,B,S),gr=null,ii=!1}else M0(C,B,S);var Q=S.alternate;Q!==null&&(Q.return=null),S.return=null}catch(te){ht(S,u,te)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)Kx(u,l),u=u.sibling}function Kx(l,u){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(wn(u,l),oi(l),4&b){try{gl(3,l,l.return),Lc(3,l)}catch(re){ht(l,l.return,re)}try{gl(5,l,l.return)}catch(re){ht(l,l.return,re)}}break;case 1:wn(u,l),oi(l),512&b&&g!==null&&Qo(g,g.return);break;case 5:if(wn(u,l),oi(l),512&b&&g!==null&&Qo(g,g.return),Oe){if(32&l.flags){var S=l.stateNode;try{ec(S)}catch(re){ht(l,l.return,re)}}if(4&b&&(S=l.stateNode)!=null){var C=l.memoizedProps;if(g=g!==null?g.memoizedProps:C,b=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{Vs(S,u,b,g,C,l)}catch(re){ht(l,l.return,re)}}}break;case 6:if(wn(u,l),oi(l),4&b&&Oe){if(l.stateNode===null)throw Error(s(162));S=l.stateNode,C=l.memoizedProps,g=g!==null?g.memoizedProps:C;try{qu(S,g,C)}catch(re){ht(l,l.return,re)}}break;case 3:if(wn(u,l),oi(l),4&b){if(Oe&&Be&&g!==null&&g.memoizedState.isDehydrated)try{zT(u.containerInfo)}catch(re){ht(l,l.return,re)}if(Qe){S=u.containerInfo,C=u.pendingChildren;try{el(S,C)}catch(re){ht(l,l.return,re)}}}break;case 4:if(wn(u,l),oi(l),4&b&&Qe){S=(C=l.stateNode).containerInfo,C=C.pendingChildren;try{el(S,C)}catch(re){ht(l,l.return,re)}}break;case 13:wn(u,l),oi(l),8192&(S=l.child).flags&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(U0=Ft())),4&b&&Yx(l);break;case 22:var B=g!==null&&g.memoizedState!==null;if(1&l.mode?(sr=(g=sr)||B,wn(u,l),sr=g):wn(u,l),oi(l),8192&b){if(g=l.memoizedState!==null,(l.stateNode.isHidden=g)&&!B&&(1&l.mode)!=0)for(ve=l,b=l.child;b!==null;){for(u=ve=b;ve!==null;){var G=(B=ve).child;switch(B.tag){case 0:case 11:case 14:case 15:gl(4,B,B.return);break;case 1:Qo(B,B.return);var Q=B.stateNode;if(typeof Q.componentWillUnmount=="function"){var te=B,ne=B.return;try{var de=te;Q.props=de.memoizedProps,Q.state=de.memoizedState,Q.componentWillUnmount()}catch(re){ht(te,ne,re)}}break;case 5:Qo(B,B.return);break;case 22:if(B.memoizedState!==null){Zx(u);continue}}G!==null?(G.return=B,ve=G):Zx(u)}b=b.sibling}if(Oe){e:if(b=null,Oe)for(u=l;;){if(u.tag===5){if(b===null){b=u;try{S=u.stateNode,g?tc(S):rc(u.stateNode,u.memoizedProps)}catch(re){ht(l,l.return,re)}}}else if(u.tag===6){if(b===null)try{C=u.stateNode,g?Nf(C):Bf(C,u.memoizedProps)}catch(re){ht(l,l.return,re)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;b===u&&(b=null),u=u.return}b===u&&(b=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:wn(u,l),oi(l),4&b&&Yx(l);break;case 21:break;default:wn(u,l),oi(l)}}function oi(l){var u=l.flags;if(2&u){try{if(Oe){e:{for(var g=l.return;g!==null;){if(Vx(g)){var b=g;break e}g=g.return}throw Error(s(160))}switch(b.tag){case 5:var S=b.stateNode;32&b.flags&&(ec(S),b.flags&=-33),R0(l,Xx(l),S);break;case 3:case 4:var C=b.stateNode.containerInfo;I0(l,Xx(l),C);break;default:throw Error(s(161))}}}catch(B){ht(l,l.return,B)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function gC(l,u,g){ve=l,Qx(l)}function Qx(l,u,g){for(var b=(1&l.mode)!=0;ve!==null;){var S=ve,C=S.child;if(S.tag===22&&b){var B=S.memoizedState!==null||Bc;if(!B){var G=S.alternate,Q=G!==null&&G.memoizedState!==null||sr;G=Bc;var te=sr;if(Bc=B,(sr=Q)&&!te)for(ve=S;ve!==null;)Q=(B=ve).child,B.tag===22&&B.memoizedState!==null?Jx(S):Q!==null?(Q.return=B,ve=Q):Jx(S);for(;C!==null;)ve=C,Qx(C),C=C.sibling;ve=S,Bc=G,sr=te}qx(l)}else(8772&S.subtreeFlags)!=0&&C!==null?(C.return=S,ve=C):qx(l)}}function qx(l){for(;ve!==null;){var u=ve;if((8772&u.flags)!=0){var g=u.alternate;try{if((8772&u.flags)!=0)switch(u.tag){case 0:case 11:case 15:sr||Lc(5,u);break;case 1:var b=u.stateNode;if(4&u.flags&&!sr)if(g===null)b.componentDidMount();else{var S=u.elementType===u.type?g.memoizedProps:bn(u.type,g.memoizedProps);b.componentDidUpdate(S,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&K1(u,C,b);break;case 3:var B=u.updateQueue;if(B!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=K(u.child.stateNode);break;case 1:g=u.child.stateNode}K1(u,B,g)}break;case 5:var G=u.stateNode;g===null&&4&u.flags&&es(G,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Be&&u.memoizedState===null){var Q=u.alternate;if(Q!==null){var te=Q.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&GT(ne)}}}break;default:throw Error(s(163))}sr||512&u.flags&&P0(u)}catch(de){ht(u,u.return,de)}}if(u===l){ve=null;break}if((g=u.sibling)!==null){g.return=u.return,ve=g;break}ve=u.return}}function Zx(l){for(;ve!==null;){var u=ve;if(u===l){ve=null;break}var g=u.sibling;if(g!==null){g.return=u.return,ve=g;break}ve=u.return}}function Jx(l){for(;ve!==null;){var u=ve;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{Lc(4,u)}catch(Q){ht(u,g,Q)}break;case 1:var b=u.stateNode;if(typeof b.componentDidMount=="function"){var S=u.return;try{b.componentDidMount()}catch(Q){ht(u,S,Q)}}var C=u.return;try{P0(u)}catch(Q){ht(u,C,Q)}break;case 5:var B=u.return;try{P0(u)}catch(Q){ht(u,B,Q)}}}catch(Q){ht(u,u.return,Q)}if(u===l){ve=null;break}var G=u.sibling;if(G!==null){G.return=u.return,ve=G;break}ve=u.return}}var Dc=0,Oc=1,Fc=2,Uc=3,Hc=4;if(typeof Symbol=="function"&&Symbol.for){var vl=Symbol.for;Dc=vl("selector.component"),Oc=vl("selector.has_pseudo_class"),Fc=vl("selector.role"),Uc=vl("selector.test_id"),Hc=vl("selector.text")}function N0(l){var u=nt(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((l=Lr(l))===null)throw Error(s(362));return l.stateNode.current}function B0(l,u){switch(u.$$typeof){case Dc:if(l.type===u.value)return!0;break;case Oc:e:{u=u.value,l=[l,0];for(var g=0;g<l.length;){var b=l[g++],S=l[g++],C=u[S];if(b.tag!==5||!Qn(b)){for(;C!=null&&B0(b,C);)C=u[++S];if(S===u.length){u=!0;break e}for(b=b.child;b!==null;)l.push(b,S),b=b.sibling}}u=!1}return u;case Fc:if(l.tag===5&&Ku(l.stateNode,u.value))return!0;break;case Hc:if((l.tag===5||l.tag===6)&&(l=Kn(l))!==null&&0<=l.indexOf(u.value))return!0;break;case Uc:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function L0(l){switch(l.$$typeof){case Dc:return"<"+(I(l.value)||"Unknown")+">";case Oc:return":has("+(L0(l)||"")+")";case Fc:return'[role="'+l.value+'"]';case Hc:return'"'+l.value+'"';case Uc:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function ey(l,u){var g=[];l=[l,0];for(var b=0;b<l.length;){var S=l[b++],C=l[b++],B=u[C];if(S.tag!==5||!Qn(S)){for(;B!=null&&B0(S,B);)B=u[++C];if(C===u.length)g.push(S);else for(S=S.child;S!==null;)l.push(S,C),S=S.sibling}}return g}function D0(l,u){if(!gn)throw Error(s(363));l=ey(l=N0(l),u),u=[],l=Array.from(l);for(var g=0;g<l.length;){var b=l[g++];if(b.tag===5)Qn(b)||u.push(b.stateNode);else for(b=b.child;b!==null;)l.push(b),b=b.sibling}return u}var vC=Math.ceil,zc=o.ReactCurrentDispatcher,O0=o.ReactCurrentOwner,Tt=o.ReactCurrentBatchConfig,Ge=0,zt=null,It=null,Xt=0,Fr=0,qo=ts(0),Bt=0,xl=null,Zs=0,Gc=0,F0=0,yl=null,Ur=null,U0=0,H0=1/0,ss=null;function Zo(){H0=Ft()+500}var ty,Wc=!1,z0=null,os=null,jc=!1,as=null,$c=0,_l=0,G0=null,Vc=-1,Xc=0;function or(){return(6&Ge)!=0?Ft():Vc!==-1?Vc:Vc=Ft()}function ls(l){return(1&l.mode)==0?1:(2&Ge)!=0&&Xt!==0?Xt&-Xt:rC.transition!==null?(Xc===0&&(Xc=L1()),Xc):(l=Xe)!==0?l:Br()}function nn(l,u,g,b){if(50<_l)throw _l=0,G0=null,Error(s(185));il(l,g,b),(2&Ge)!=0&&l===zt||(l===zt&&((2&Ge)==0&&(Gc|=g),Bt===4&&us(l,Xt)),Tr(l,b),g===1&&Ge===0&&(1&u.mode)==0&&(Zo(),fc&&Zn()))}function Tr(l,u){var g=l.callbackNode;(function(S,C){for(var B=S.suspendedLanes,G=S.pingedLanes,Q=S.expirationTimes,te=S.pendingLanes;0<te;){var ne=31-xn(te),de=1<<ne,re=Q[ne];re===-1?(de&B)!=0&&(de&G)==0||(Q[ne]=qT(de,C)):re<=C&&(S.expiredLanes|=de),te&=~de}})(l,u);var b=hc(l,l===zt?Xt:0);if(b===0)g!==null&&O1(g),l.callbackNode=null,l.callbackPriority=0;else if(u=b&-b,l.callbackPriority!==u){if(g!=null&&O1(g),u===1)l.tag===0?function(S){fc=!0,U1(S)}(ny.bind(null,l)):U1(ny.bind(null,l)),Qr?Ja(function(){(6&Ge)==0&&Zn()}):Xf(Yf,Zn),g=null;else{switch(D1(b)){case 1:g=Yf;break;case 4:g=eC;break;case 16:default:g=F1;break;case 536870912:g=tC}g=hy(g,ry.bind(null,l))}l.callbackPriority=u,l.callbackNode=g}}function ry(l,u){if(Vc=-1,Xc=0,(6&Ge)!=0)throw Error(s(327));var g=l.callbackNode;if(eo()&&l.callbackNode!==g)return null;var b=hc(l,l===zt?Xt:0);if(b===0)return null;if((30&b)!=0||(b&l.expiredLanes)!=0||u)u=Yc(l,b);else{u=b;var S=Ge;Ge|=2;var C=oy();for(zt===l&&Xt===u||(ss=null,Zo(),Js(l,u));;)try{yC();break}catch(G){sy(l,G)}r0(),zc.current=C,Ge=S,It!==null?u=0:(zt=null,Xt=0,u=Bt)}if(u!==0){if(u===2&&(S=jf(l))!==0&&(b=S,u=W0(l,S)),u===1)throw g=xl,Js(l,0),us(l,b),Tr(l,Ft()),g;if(u===6)us(l,b);else{if(S=l.current.alternate,(30&b)==0&&!function(G){for(var Q=G;;){if(16384&Q.flags){var te=Q.updateQueue;if(te!==null&&(te=te.stores)!==null)for(var ne=0;ne<te.length;ne++){var de=te[ne],re=de.getSnapshot;de=de.value;try{if(!yn(re(),de))return!1}catch{return!1}}}if(te=Q.child,16384&Q.subtreeFlags&&te!==null)te.return=Q,Q=te;else{if(Q===G)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===G)return!0;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}}return!0}(S)&&((u=Yc(l,b))===2&&(C=jf(l))!==0&&(b=C,u=W0(l,C)),u===1))throw g=xl,Js(l,0),us(l,b),Tr(l,Ft()),g;switch(l.finishedWork=S,l.finishedLanes=b,u){case 0:case 1:throw Error(s(345));case 2:case 5:Jo(l,Ur,ss);break;case 3:if(us(l,b),(130023424&b)===b&&10<(u=U0+500-Ft())){if(hc(l,0)!==0)break;if(((S=l.suspendedLanes)&b)!==b){or(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=Re(Jo.bind(null,l,Ur,ss),u);break}Jo(l,Ur,ss);break;case 4:if(us(l,b),(4194240&b)===b)break;for(u=l.eventTimes,S=-1;0<b;){var B=31-xn(b);C=1<<B,(B=u[B])>S&&(S=B),b&=~C}if(b=S,10<(b=(120>(b=Ft()-b)?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*vC(b/1960))-b)){l.timeoutHandle=Re(Jo.bind(null,l,Ur,ss),b);break}Jo(l,Ur,ss);break;default:throw Error(s(329))}}}return Tr(l,Ft()),l.callbackNode===g?ry.bind(null,l):null}function W0(l,u){var g=yl;return l.current.memoizedState.isDehydrated&&(Js(l,u).flags|=256),(l=Yc(l,u))!==2&&(u=Ur,Ur=g,u!==null&&j0(u)),l}function j0(l){Ur===null?Ur=l:Ur.push.apply(Ur,l)}function us(l,u){for(u&=~F0,u&=~Gc,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var g=31-xn(u),b=1<<g;l[g]=-1,u&=~b}}function ny(l){if((6&Ge)!=0)throw Error(s(327));eo();var u=hc(l,0);if((1&u)==0)return Tr(l,Ft()),null;var g=Yc(l,u);if(l.tag!==0&&g===2){var b=jf(l);b!==0&&(u=b,g=W0(l,b))}if(g===1)throw g=xl,Js(l,0),us(l,u),Tr(l,Ft()),g;if(g===6)throw Error(s(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,Jo(l,Ur,ss),Tr(l,Ft()),null}function iy(l){as!==null&&as.tag===0&&(6&Ge)==0&&eo();var u=Ge;Ge|=1;var g=Tt.transition,b=Xe;try{if(Tt.transition=null,Xe=1,l)return l()}finally{Xe=b,Tt.transition=g,(6&(Ge=u))==0&&Zn()}}function $0(){Fr=qo.current,ut(qo)}function Js(l,u){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==mt&&(l.timeoutHandle=mt,Ee(g)),It!==null)for(g=It.return;g!==null;){var b=g;switch(qf(b),b.tag){case 1:(b=b.type.childContextTypes)!=null&&zf();break;case 3:Yo(),ut(wr),ut(nr),d0();break;case 5:c0(b);break;case 4:Yo();break;case 13:case 19:ut(wt);break;case 10:n0(b.type._context);break;case 22:case 23:$0()}g=g.return}if(zt=l,It=l=cs(l.current,null),Xt=Fr=u,Bt=0,xl=null,F0=Gc=Zs=0,Ur=yl=null,Qs!==null){for(u=0;u<Qs.length;u++)if((b=(g=Qs[u]).interleaved)!==null){g.interleaved=null;var S=b.next,C=g.pending;if(C!==null){var B=C.next;C.next=S,b.next=B}g.pending=b}Qs=null}return l}function sy(l,u){for(;;){var g=It;try{if(r0(),Tc.current=Pc,Cc){for(var b=gt.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}Cc=!1}if(qs=0,Ht=Ut=gt=null,ul=!1,cl=0,O0.current=null,g===null||g.return===null){Bt=1,xl=u,It=null;break}e:{var C=l,B=g.return,G=g,Q=u;if(u=Xt,G.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var te=Q,ne=G,de=ne.tag;if((1&ne.mode)==0&&(de===0||de===11||de===15)){var re=ne.alternate;re?(ne.updateQueue=re.updateQueue,ne.memoizedState=re.memoizedState,ne.lanes=re.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ue=kx(B);if(ue!==null){ue.flags&=-257,Px(ue,B,G,0,u),1&ue.mode&&Ax(C,te,u),Q=te;var _e=(u=ue).updateQueue;if(_e===null){var Fe=new Set;Fe.add(Q),u.updateQueue=Fe}else _e.add(Q);break e}if((1&u)==0){Ax(C,te,u),V0();break e}Q=Error(s(426))}else if(ct&&1&G.mode){var ie=kx(B);if(ie!==null){(65536&ie.flags)==0&&(ie.flags|=256),Px(ie,B,G,0,u),e0(Ko(Q,G));break e}}C=Q=Ko(Q,G),Bt!==4&&(Bt=2),yl===null?yl=[C]:yl.push(C),C=B;do{switch(C.tag){case 3:C.flags|=65536,u&=-u,C.lanes|=u,Y1(C,Tx(0,Q,u));break e;case 1:G=Q;var $=C.type,ee=C.stateNode;if((128&C.flags)==0&&(typeof $.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(os===null||!os.has(ee)))){C.flags|=65536,u&=-u,C.lanes|=u,Y1(C,Cx(C,G,u));break e}}C=C.return}while(C!==null)}ly(g)}catch(oe){u=oe,It===g&&g!==null&&(It=g=g.return);continue}break}}function oy(){var l=zc.current;return zc.current=Pc,l===null?Pc:l}function V0(){Bt!==0&&Bt!==3&&Bt!==2||(Bt=4),zt===null||(268435455&Zs)==0&&(268435455&Gc)==0||us(zt,Xt)}function Yc(l,u){var g=Ge;Ge|=2;var b=oy();for(zt===l&&Xt===u||(ss=null,Js(l,u));;)try{xC();break}catch(S){sy(l,S)}if(r0(),Ge=g,zc.current=b,It!==null)throw Error(s(261));return zt=null,Xt=0,Bt}function xC(){for(;It!==null;)ay(It)}function yC(){for(;It!==null&&!ZT();)ay(It)}function ay(l){var u=ty(l.alternate,l,Fr);l.memoizedProps=l.pendingProps,u===null?ly(l):It=u,O0.current=null}function ly(l){var u=l;do{var g=u.alternate;if(l=u.return,(32768&u.flags)==0){if((g=fC(g,u,Fr))!==null)return void(It=g)}else{if((g=pC(g,u))!==null)return g.flags&=32767,void(It=g);if(l===null)return Bt=6,void(It=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(It=u);It=u=l}while(u!==null);Bt===0&&(Bt=5)}function Jo(l,u,g){var b=Xe,S=Tt.transition;try{Tt.transition=null,Xe=1,function(C,B,G,Q){do eo();while(as!==null);if((6&Ge)!=0)throw Error(s(327));G=C.finishedWork;var te=C.finishedLanes;if(G===null)return null;if(C.finishedWork=null,C.finishedLanes=0,G===C.current)throw Error(s(177));C.callbackNode=null,C.callbackPriority=0;var ne=G.lanes|G.childLanes;if(function(ue,_e){var Fe=ue.pendingLanes&~_e;ue.pendingLanes=_e,ue.suspendedLanes=0,ue.pingedLanes=0,ue.expiredLanes&=_e,ue.mutableReadLanes&=_e,ue.entangledLanes&=_e,_e=ue.entanglements;var ie=ue.eventTimes;for(ue=ue.expirationTimes;0<Fe;){var $=31-xn(Fe),ee=1<<$;_e[$]=0,ie[$]=-1,ue[$]=-1,Fe&=~ee}}(C,ne),C===zt&&(It=zt=null,Xt=0),(2064&G.subtreeFlags)==0&&(2064&G.flags)==0||jc||(jc=!0,hy(F1,function(){return eo(),null})),ne=(15990&G.flags)!=0,(15990&G.subtreeFlags)!=0||ne){ne=Tt.transition,Tt.transition=null;var de=Xe;Xe=1;var re=Ge;Ge|=4,O0.current=null,function(ue,_e){for(O(ue.containerInfo),ve=_e;ve!==null;)if(_e=(ue=ve).child,(1028&ue.subtreeFlags)!=0&&_e!==null)_e.return=ue,ve=_e;else for(;ve!==null;){ue=ve;try{var Fe=ue.alternate;if((1024&ue.flags)!=0)switch(ue.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Fe!==null){var ie=Fe.memoizedProps,$=Fe.memoizedState,ee=ue.stateNode,oe=ee.getSnapshotBeforeUpdate(ue.elementType===ue.type?ie:bn(ue.type,ie),$);ee.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Oe&&nc(ue.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Ae){ht(ue,ue.return,Ae)}if((_e=ue.sibling)!==null){_e.return=ue.return,ve=_e;break}ve=ue.return}Fe=jx,jx=!1}(C,G),Kx(G,C),z(C.containerInfo),C.current=G,gC(G),JT(),Ge=re,Xe=de,Tt.transition=ne}else C.current=G;if(jc&&(jc=!1,as=C,$c=te),ne=C.pendingLanes,ne===0&&(os=null),function(ue){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(dc,ue,void 0,(128&ue.current.flags)==128)}catch{}}(G.stateNode),Tr(C,Ft()),B!==null)for(Q=C.onRecoverableError,G=0;G<B.length;G++)te=B[G],Q(te.value,{componentStack:te.stack,digest:te.digest});if(Wc)throw Wc=!1,C=z0,z0=null,C;(1&$c)!=0&&C.tag!==0&&eo(),ne=C.pendingLanes,(1&ne)!=0?C===G0?_l++:(_l=0,G0=C):_l=0,Zn()}(l,u,g,b)}finally{Tt.transition=S,Xe=b}return null}function eo(){if(as!==null){var l=D1($c),u=Tt.transition,g=Xe;try{if(Tt.transition=null,Xe=16>l?16:l,as===null)var b=!1;else{if(l=as,as=null,$c=0,(6&Ge)!=0)throw Error(s(331));var S=Ge;for(Ge|=4,ve=l.current;ve!==null;){var C=ve,B=C.child;if((16&ve.flags)!=0){var G=C.deletions;if(G!==null){for(var Q=0;Q<G.length;Q++){var te=G[Q];for(ve=te;ve!==null;){var ne=ve;switch(ne.tag){case 0:case 11:case 15:gl(8,ne,C)}var de=ne.child;if(de!==null)de.return=ne,ve=de;else for(;ve!==null;){var re=(ne=ve).sibling,ue=ne.return;if($x(ne),ne===te){ve=null;break}if(re!==null){re.return=ue,ve=re;break}ve=ue}}}var _e=C.alternate;if(_e!==null){var Fe=_e.child;if(Fe!==null){_e.child=null;do{var ie=Fe.sibling;Fe.sibling=null,Fe=ie}while(Fe!==null)}}ve=C}}if((2064&C.subtreeFlags)!=0&&B!==null)B.return=C,ve=B;else e:for(;ve!==null;){if((2048&(C=ve).flags)!=0)switch(C.tag){case 0:case 11:case 15:gl(9,C,C.return)}var $=C.sibling;if($!==null){$.return=C.return,ve=$;break e}ve=C.return}}var ee=l.current;for(ve=ee;ve!==null;){var oe=(B=ve).child;if((2064&B.subtreeFlags)!=0&&oe!==null)oe.return=B,ve=oe;else e:for(B=ee;ve!==null;){if((2048&(G=ve).flags)!=0)try{switch(G.tag){case 0:case 11:case 15:Lc(9,G)}}catch(qe){ht(G,G.return,qe)}if(G===B){ve=null;break e}var Ae=G.sibling;if(Ae!==null){Ae.return=G.return,ve=Ae;break e}ve=G.return}}if(Ge=S,Zn(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(dc,l)}catch{}b=!0}return b}finally{Xe=g,Tt.transition=u}}return!1}function uy(l,u,g){l=is(l,u=Tx(0,u=Ko(g,u),1),1),u=or(),l!==null&&(il(l,1,u),Tr(l,u))}function ht(l,u,g){if(l.tag===3)uy(l,l,g);else for(;u!==null;){if(u.tag===3){uy(u,l,g);break}if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(os===null||!os.has(b))){u=is(u,l=Cx(u,l=Ko(g,l),1),1),l=or(),u!==null&&(il(u,1,l),Tr(u,l));break}}u=u.return}}function _C(l,u,g){var b=l.pingCache;b!==null&&b.delete(u),u=or(),l.pingedLanes|=l.suspendedLanes&g,zt===l&&(Xt&g)===g&&(Bt===4||Bt===3&&(130023424&Xt)===Xt&&500>Ft()-U0?Js(l,0):F0|=g),Tr(l,u)}function cy(l,u){u===0&&((1&l.mode)==0?u=1:(u=Wf,(130023424&(Wf<<=1))==0&&(Wf=4194304)));var g=or();(l=ei(l,u))!==null&&(il(l,u,g),Tr(l,g))}function bC(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),cy(l,g)}function wC(l,u){var g=0;switch(l.tag){case 13:var b=l.stateNode,S=l.memoizedState;S!==null&&(g=S.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(s(314))}b!==null&&b.delete(u),cy(l,g)}function hy(l,u){return Xf(l,u)}function SC(l,u,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(l,u,g,b){return new SC(l,u,g,b)}function X0(l){return!(!(l=l.prototype)||!l.isReactComponent)}function cs(l,u){var g=l.alternate;return g===null?((g=sn(l.tag,u,l.key,l.mode)).elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=14680064&l.flags,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function Kc(l,u,g,b,S,C){var B=2;if(b=l,typeof l=="function")X0(l)&&(B=1);else if(typeof l=="string")B=5;else e:switch(l){case d:return to(g.children,S,C,u);case p:B=8,S|=8;break;case c:return(l=sn(12,g,u,2|S)).elementType=c,l.lanes=C,l;case y:return(l=sn(13,g,u,S)).elementType=y,l.lanes=C,l;case E:return(l=sn(19,g,u,S)).elementType=E,l.lanes=C,l;case w:return Qc(g,S,C,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case f:B=10;break e;case m:B=9;break e;case v:B=11;break e;case x:B=14;break e;case _:B=16,b=null;break e}throw Error(s(130,l==null?l:typeof l,""))}return(u=sn(B,g,u,S)).elementType=l,u.type=b,u.lanes=C,u}function to(l,u,g,b){return(l=sn(7,l,b,u)).lanes=g,l}function Qc(l,u,g,b){return(l=sn(22,l,b,u)).elementType=w,l.lanes=g,l.stateNode={isHidden:!1},l}function Y0(l,u,g){return(l=sn(6,l,null,u)).lanes=g,l}function K0(l,u,g){return(u=sn(4,l.children!==null?l.children:[],l.key,u)).lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function EC(l,u,g,b,S){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=mt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=b,this.onRecoverableError=S,Be&&(this.mutableSourceEagerHydrationData=null)}function dy(l,u,g,b,S,C,B,G,Q){return l=new EC(l,u,g,G,Q),u===1?(u=1,C===!0&&(u|=8)):u=0,C=sn(3,null,null,u),l.current=C,C.stateNode=l,C.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},o0(C),l}function fy(l){if(!l)return rs;e:{if(M(l=l._reactInternals)!==l||l.tag!==1)throw Error(s(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Dr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(l.tag===1){var g=l.type;if(Dr(g))return N1(l,g,u)}return u}function py(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return(l=L(u))===null?null:l.stateNode}function my(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function qc(l,u){my(l,u),(l=l.alternate)&&my(l,u)}function TC(l){return(l=L(l))===null?null:l.stateNode}function CC(){return null}return ty=function(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps||wr.current)Sr=!0;else{if((l.lanes&g)==0&&(128&u.flags)==0)return Sr=!1,function(de,re,ue){switch(re.tag){case 3:Dx(re),Wo();break;case 5:nx(re);break;case 1:Dr(re.type)&&cc(re);break;case 4:u0(re,re.stateNode.containerInfo);break;case 10:$1(0,re.type._context,re.memoizedProps.value);break;case 13:var _e=re.memoizedState;if(_e!==null)return _e.dehydrated!==null?(it(wt,1&wt.current),re.flags|=128,null):(ue&re.child.childLanes)!=0?Fx(de,re,ue):(it(wt,1&wt.current),(de=ki(de,re,ue))!==null?de.sibling:null);it(wt,1&wt.current);break;case 19:if(_e=(ue&re.childLanes)!=0,(128&de.flags)!=0){if(_e)return Hx(de,re,ue);re.flags|=128}var Fe=re.memoizedState;if(Fe!==null&&(Fe.rendering=null,Fe.tail=null,Fe.lastEffect=null),it(wt,wt.current),_e)break;return null;case 22:case 23:return re.lanes=0,Nx(de,re,ue)}return ki(de,re,ue)}(l,u,g);Sr=(131072&l.flags)!=0}else Sr=!1,ct&&(1048576&u.flags)!=0&&H1(u,mc,u.index);switch(u.lanes=0,u.tag){case 2:var b=u.type;Nc(l,u),l=u.pendingProps;var S=Ho(u,nr.current);$o(u,g),S=m0(null,u,b,l,S,g);var C=g0();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Dr(b)?(C=!0,cc(u)):C=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,o0(u),S.updater=wc,u.stateNode=S,S._reactInternals=u,l0(u,b,l,g),u=E0(null,u,b,!0,C,g)):(u.tag=0,ct&&C&&Qf(u),Er(null,u,S,g),u=u.child),u;case 16:b=u.elementType;e:{switch(Nc(l,u),l=u.pendingProps,b=(S=b._init)(b._payload),u.type=b,S=u.tag=function(de){if(typeof de=="function")return X0(de)?1:0;if(de!=null){if((de=de.$$typeof)===v)return 11;if(de===x)return 14}return 2}(b),l=bn(b,l),S){case 0:u=S0(null,u,b,l,g);break e;case 1:u=Lx(null,u,b,l,g);break e;case 11:u=Ix(null,u,b,l,g);break e;case 14:u=Rx(null,u,b,bn(b.type,l),g);break e}throw Error(s(306,b,""))}return u;case 0:return b=u.type,S=u.pendingProps,S0(l,u,b,S=u.elementType===b?S:bn(b,S),g);case 1:return b=u.type,S=u.pendingProps,Lx(l,u,b,S=u.elementType===b?S:bn(b,S),g);case 3:e:{if(Dx(u),l===null)throw Error(s(387));b=u.pendingProps,S=(C=u.memoizedState).element,X1(l,u),bc(u,b,null,g);var B=u.memoizedState;if(b=B.element,Be&&C.isDehydrated){if(C={element:b,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},u.updateQueue.baseState=C,u.memoizedState=C,256&u.flags){u=Ox(l,u,b,g,S=Ko(Error(s(423)),u));break e}if(b!==S){u=Ox(l,u,b,g,S=Ko(Error(s(424)),u));break e}for(Be&&(Jr=LT(u.stateNode.containerInfo),Or=u,ct=!0,_n=null,sl=!1),g=rx(u,null,b,g),u.child=g;g;)g.flags=-3&g.flags|4096,g=g.sibling}else{if(Wo(),b===S){u=ki(l,u,g);break e}Er(l,u,b,g)}u=u.child}return u;case 5:return nx(u),l===null&&Jf(u),b=u.type,S=u.pendingProps,C=l!==null?l.memoizedProps:null,B=S.children,Ce(b,S)?B=null:C!==null&&Ce(b,C)&&(u.flags|=32),Bx(l,u),Er(l,u,B,g),u.child;case 6:return l===null&&Jf(u),null;case 13:return Fx(l,u,g);case 4:return u0(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=Vo(u,null,b,g):Er(l,u,b,g),u.child;case 11:return b=u.type,S=u.pendingProps,Ix(l,u,b,S=u.elementType===b?S:bn(b,S),g);case 7:return Er(l,u,u.pendingProps,g),u.child;case 8:case 12:return Er(l,u,u.pendingProps.children,g),u.child;case 10:e:{if(b=u.type._context,S=u.pendingProps,C=u.memoizedProps,$1(0,b,B=S.value),C!==null)if(yn(C.value,B)){if(C.children===S.children&&!wr.current){u=ki(l,u,g);break e}}else for((C=u.child)!==null&&(C.return=u);C!==null;){var G=C.dependencies;if(G!==null){B=C.child;for(var Q=G.firstContext;Q!==null;){if(Q.context===b){if(C.tag===1){(Q=Ai(-1,g&-g)).tag=2;var te=C.updateQueue;if(te!==null){var ne=(te=te.shared).pending;ne===null?Q.next=Q:(Q.next=ne.next,ne.next=Q),te.pending=Q}}C.lanes|=g,(Q=C.alternate)!==null&&(Q.lanes|=g),i0(C.return,g,u),G.lanes|=g;break}Q=Q.next}}else if(C.tag===10)B=C.type===u.type?null:C.child;else if(C.tag===18){if((B=C.return)===null)throw Error(s(341));B.lanes|=g,(G=B.alternate)!==null&&(G.lanes|=g),i0(B,g,u),B=C.sibling}else B=C.child;if(B!==null)B.return=C;else for(B=C;B!==null;){if(B===u){B=null;break}if((C=B.sibling)!==null){C.return=B.return,B=C;break}B=B.return}C=B}Er(l,u,S.children,g),u=u.child}return u;case 9:return S=u.type,b=u.pendingProps.children,$o(u,g),b=b(S=en(S)),u.flags|=1,Er(l,u,b,g),u.child;case 14:return S=bn(b=u.type,u.pendingProps),Rx(l,u,b,S=bn(b.type,S),g);case 15:return Mx(l,u,u.type,u.pendingProps,g);case 17:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:bn(b,S),Nc(l,u),u.tag=1,Dr(b)?(l=!0,cc(u)):l=!1,$o(u,g),Z1(u,b,S),l0(u,b,S,g),E0(null,u,b,!0,l,g);case 19:return Hx(l,u,g);case 22:return Nx(l,u,g)}throw Error(s(156,u.tag))},t.attemptContinuousHydration=function(l){if(l.tag===13){var u=ei(l,134217728);u!==null&&nn(u,l,134217728,or()),qc(l,134217728)}},t.attemptDiscreteHydration=function(l){if(l.tag===13){var u=ei(l,1);u!==null&&nn(u,l,1,or()),qc(l,1)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=ls(l),g=ei(l,u);g!==null&&nn(g,l,u,or()),qc(l,u)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var g=nl(u.pendingLanes);g!==0&&(Vf(u,1|g),Tr(u,Ft()),(6&Ge)==0&&(Zo(),Zn()))}break;case 13:iy(function(){var b=ei(l,1);if(b!==null){var S=or();nn(b,l,1,S)}}),qc(l,1)}},t.batchedUpdates=function(l,u){var g=Ge;Ge|=1;try{return l(u)}finally{(Ge=g)===0&&(Zo(),fc&&Zn())}},t.createComponentSelector=function(l){return{$$typeof:Dc,value:l}},t.createContainer=function(l,u,g,b,S,C,B){return dy(l,u,!1,null,0,b,0,C,B)},t.createHasPseudoClassSelector=function(l){return{$$typeof:Oc,value:l}},t.createHydrationContainer=function(l,u,g,b,S,C,B,G,Q){return(l=dy(g,b,!0,l,0,C,0,G,Q)).context=fy(null),g=l.current,(C=Ai(b=or(),S=ls(g))).callback=u??null,is(g,C,S),l.current.lanes=S,il(l,S,b),Tr(l,b),l},t.createPortal=function(l,u,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:b==null?null:""+b,children:l,containerInfo:u,implementation:g}},t.createRoleSelector=function(l){return{$$typeof:Fc,value:l}},t.createTestNameSelector=function(l){return{$$typeof:Uc,value:l}},t.createTextSelector=function(l){return{$$typeof:Hc,value:l}},t.deferredUpdates=function(l){var u=Xe,g=Tt.transition;try{return Tt.transition=null,Xe=16,l()}finally{Xe=u,Tt.transition=g}},t.discreteUpdates=function(l,u,g,b,S){var C=Xe,B=Tt.transition;try{return Tt.transition=null,Xe=1,l(u,g,b,S)}finally{Xe=C,Tt.transition=B,Ge===0&&Zo()}},t.findAllNodes=D0,t.findBoundingRects=function(l,u){if(!gn)throw Error(s(363));u=D0(l,u),l=[];for(var g=0;g<u.length;g++)l.push(br(u[g]));for(u=l.length-1;0<u;u--)for(var b=(g=l[u]).x,S=b+g.width,C=g.y,B=C+g.height,G=u-1;0<=G;G--)if(u!==G){var Q=l[G],te=Q.x,ne=te+Q.width,de=Q.y,re=de+Q.height;if(b>=te&&C>=de&&S<=ne&&B<=re){l.splice(u,1);break}if(!(b!==te||g.width!==Q.width||re<C||de>B)){de>C&&(Q.height+=de-C,Q.y=C),re<B&&(Q.height=B-de),l.splice(u,1);break}if(!(C!==de||g.height!==Q.height||ne<b||te>S)){te>b&&(Q.width+=te-b,Q.x=b),ne<S&&(Q.width=S-te),l.splice(u,1);break}}return l},t.findHostInstance=py,t.findHostInstanceWithNoPortals=function(l){return(l=(l=k(l))!==null?D(l):null)===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return py(l)},t.flushControlled=function(l){var u=Ge;Ge|=1;var g=Tt.transition,b=Xe;try{Tt.transition=null,Xe=1,l()}finally{Xe=b,Tt.transition=g,(Ge=u)===0&&(Zo(),Zn())}},t.flushPassiveEffects=eo,t.flushSync=iy,t.focusWithin=function(l,u){if(!gn)throw Error(s(363));for(u=ey(l=N0(l),u),u=Array.from(u),l=0;l<u.length;){var g=u[l++];if(!Qn(g)){if(g.tag===5&&Ji(g.stateNode))return!0;for(g=g.child;g!==null;)u.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Xe},t.getFindAllNodesFailureDescription=function(l,u){if(!gn)throw Error(s(363));var g=0,b=[];l=[N0(l),0];for(var S=0;S<l.length;){var C=l[S++],B=l[S++],G=u[B];if((C.tag!==5||!Qn(C))&&(B0(C,G)&&(b.push(L0(G)),++B>g&&(g=B)),B<u.length))for(C=C.child;C!==null;)l.push(C,B),C=C.sibling}if(g<u.length){for(l=[];g<u.length;g++)l.push(L0(u[g]));return`findAllNodes was able to match part of the selector:
  `+b.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},t.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?K(l.child.stateNode):l.child.stateNode:null},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:TC,findFiberByHostInstance:l.findFiberByHostInstance||CC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{dc=u.inject(l),qn=u}catch{}l=!!u.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,u,g,b){if(!gn)throw Error(s(363));l=D0(l,u);var S=$s(l,g,b).disconnect;return{disconnect:function(){S()}}},t.registerMutableSourceForHydration=function(l,u){var g=u._getVersion;g=g(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,g]:l.mutableSourceEagerHydrationData.push(u,g)},t.runWithPriority=function(l,u){var g=Xe;try{return Xe=l,u()}finally{Xe=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,u,g,b){var S=u.current,C=or(),B=ls(S);return g=fy(g),u.context===null?u.context=g:u.pendingContext=g,(u=Ai(C,B)).payload={element:l},(b=b===void 0?null:b)!==null&&(u.callback=b),(l=is(S,u,B))!==null&&(nn(l,S,B,C),_c(l,S,B)),B},t}),Mb}({get exports(){return cv},set exports(e){cv=e}}).exports=nR();var iR=II(cv),aT={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},dv={},Lh={get exports(){return dv},set exports(e){dv=e}};(function(){var e,t,r,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?Lh.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Lh.exports=function(){return(e()-i)/1e6},t=process.hrtime,n=(e=function(){var o;return 1e9*(o=t())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(Lh.exports=function(){return Date.now()-r},r=Date.now()):(Lh.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(PI);var Lb,Ea={},io={};({get exports(){return Ea},set exports(e){Ea=e}}).exports=(Lb||(Lb=1,io.ConcurrentRoot=1,io.ContinuousEventPriority=4,io.DefaultEventPriority=16,io.DiscreteEventPriority=1,io.IdleEventPriority=536870912,io.LegacyRoot=0),io);var sR={};function Qp(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount(t,e))}function lT(e,t){var r,n,i;(r=e.willUnmount)===null||r===void 0||r.call(e,e,t),((n=e.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=e.children)!==null&&i!==void 0&&i.length&&Ki(e.children).forEach(function(s){lT(s,e)})}function Db(e,t){var r;lT(t,e),e.removeChild(t);var n=(r=t.config)!==null&&r!==void 0?r:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,a=o===void 0||o,h=n.destroyTexture,d=h!==void 0&&h,p=n.destroyBaseTexture,c=p!==void 0&&p;s&&t.destroy({children:a,texture:d,baseTexture:c})}function Ob(e,t,r){Et(t!==r,"pixi-react: PixiFiber cannot insert node before itself"),e.children.indexOf(t)!==-1&&e.removeChild(t);var n=e.getChildIndex(r);e.addChildAt(t,n)}var Fb=null,Fn=iR({getRootHostContext:function(){return sR},getChildHostContext:function(e){return e},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},getCurrentEventPriority:function(){return function(){var e,t;if(typeof window>"u")return Ea.DefaultEventPriority;switch((e=window)===null||e===void 0||(t=e.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ea.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ea.ContinuousEventPriority;default:return Ea.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=JI[e];if(typeof s=="function"&&(t=s(i,n)),!t){var o=oT[e];o&&((t=o.create(n)).didMount=o.didMount?o.didMount.bind(t):void 0,t.willUnmount=o.willUnmount?o.willUnmount.bind(t):void 0,t.applyProps=o.applyProps?o.applyProps.bind(t):void 0,t.config=o.config)}return t&&((typeof((r=t)===null||r===void 0?void 0:r.applyProps)=="function"?t.applyProps:bi)(t,{},n),t.__reactpixi={root:i}),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var r=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=r},finalizeInitialChildren:function(e,t,r){return!1},prepareUpdate:function(e,t,r,n,i,s){return Fb=function(o,a,h,d){var p=null;for(var c in h)!d.hasOwnProperty(c)&&h.hasOwnProperty(c)&&h[c]!==null&&(c===lv||(p||(p=[]),p.push(c,null)));for(var f in d){var m=d[f],v=h!==null?h[f]:void 0;!d.hasOwnProperty(f)||m===v||m===null&&v===null||f===lv||(p||(p=[]),p.push(f,m))}return p}(0,0,r,n)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var r=t.alpha===void 0||t.alpha>0,n=t.renderable===void 0||t.renderable===!0,i=t.visible===void 0||t.visible===!0;return!(r&&n&&i)},createTextInstance:function(e,t,r){Et(!1,'pixi-react: Error trying to add text node "'.concat(e,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:dv,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Qp.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Qp.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Qp.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Db.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Db.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:Ob,insertInContainerBefore:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Ob.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(e,t,r,n,i){var s,o,a=e&&e.applyProps;typeof a!="function"&&(a=bi),(a(e,n,i)||Fb)&&((s=e.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,r,n,i){},commitTextUpdate:function(e,t,r){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(e){}}),oR=aT.dependencies["react-dom"].replace(/[^0-9.]/g,""),aR=aT.name;Fn.injectIntoDevTools({bundleType:0,version:oR,rendererPackageName:aR,findHostInstanceByFiber:Fn.findHostInstance});var Ms=new Map;function uT(e){if(Et($t.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`."),Ms.has(e)){var t=Ms.get(e).pixiFiberContainer;Fn.updateContainer(null,t,void 0,function(){Ms.delete(e)})}}function cT(e){Et($t.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`.");var t=Ms.get(e);if(Et(!t,"Pixi React: createRoot should only be called once"),!t){var r=Fn.createContainer(e);t={pixiFiberContainer:r,reactRoot:{render:function(n){return Fn.updateContainer(n,r,void 0),Fn.getPublicRootInstance(r)},unmount:function(){uT(e),Ms.delete(e)}}},Ms.set(e,t)}return t.reactRoot}function lR(e,t,r){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Ms.has(t)?n=Ms.get(t).reactRoot:n=cT(t),n.render(e)}function uR(e){uT(e)}function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mu.apply(this,arguments)}function cR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nT(n.key),n)}}function Mi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gd(e,t){return Gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Gd(e,t)}function dR(e,t){if(t&&(Vr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mi(e)}function Wd(e){return Wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wd(e)}var Ef=jr.createContext(null),hT=Ef.Provider,dT=Ef.Consumer,fR=function(e){var t=jr.forwardRef(function(r,n){return jr.createElement(dT,null,function(i){return jr.createElement(e,Mu({},r,{ref:n,app:i}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t};function pR(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=Wd(e);if(t){var i=Wd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dR(this,r)}}function Ub(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ub(Object(r),!0).forEach(function(n){Ct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ub(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Hb=function(){},fT={width:st.exports.number,height:st.exports.number,onMount:st.exports.func,onUnmount:st.exports.func,raf:st.exports.bool,renderOnComponentChange:st.exports.bool,children:st.exports.node,options:st.exports.shape({autoStart:st.exports.bool,width:st.exports.number,height:st.exports.number,useContextAlpha:st.exports.bool,backgroundAlpha:st.exports.number,autoDensity:st.exports.bool,antialias:st.exports.bool,preserveDrawingBuffer:st.exports.bool,resolution:st.exports.number,forceCanvas:st.exports.bool,backgroundColor:st.exports.number,clearBeforeRender:st.exports.bool,powerPreference:st.exports.string,sharedTicker:st.exports.bool,sharedLoader:st.exports.bool,resizeTo:function(e,t){var r=e[t];r&&Et(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Vr(r),", expect `window` or an `HTMLElement`."))},view:function(e,t,r){var n=e[t];n&&Et(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Vr(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},mR={width:800,height:600,onMount:Hb,onUnmount:Hb,raf:!0,renderOnComponentChange:!0},fv=function(e){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Gd(s,o)})(i,jr.Component);var t,r,n=pR(i);function i(){var s;cR(this,i);for(var o=arguments.length,a=new Array(o),h=0;h<o;h++)a[h]=arguments[h];return Ct(Mi(s=n.call.apply(n,[this].concat(a))),"_canvas",null),Ct(Mi(s),"_mediaQuery",null),Ct(Mi(s),"_ticker",null),Ct(Mi(s),"_needsUpdate",!0),Ct(Mi(s),"app",null),Ct(Mi(s),"updateSize",function(){var d=s.props,p=d.width,c=d.height,f=d.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(p,c)}),Ct(Mi(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Ct(Mi(s),"renderStage",function(){var d=s.props,p=d.renderOnComponentChange;!d.raf&&p&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return t=i,(r=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,h=s.height,d=s.options,p=s.raf,c=s.renderOnComponentChange;this.app=new $u(Dh(Dh({width:a,height:h,view:this._canvas},d),{},{autoDensity:d?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[p?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Fn.createContainer(this.app.stage),Fn.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),d!=null&&d.autoDensity&&window.matchMedia&&d?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),c&&!p&&(this._ticker=new Pt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var h,d=this.props,p=d.width,c=d.height,f=d.raf,m=d.renderOnComponentChange,v=d.options;v?.resolution!==void 0&&s?.options.resolution!==v?.resolution&&(this.app.renderer.resolution=v.resolution,this.resetInteractionManager()),s.height===c&&s.width===p&&((h=s.options)===null||h===void 0?void 0:h.resolution)===v?.resolution||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),Fn.updateContainer(this.getChildren(),this.mountNode,this),s.width===p&&s.height===c&&s.raf===f&&s.renderOnComponentChange===m&&s.options===v||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return jr.createElement(hT,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Fn.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,h=this.props.options;return h&&h.view?(Et(h.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):jr.createElement("canvas",Mu({},(s=this.props,o=[].concat(Ki(Object.keys(fT)),Ki(Object.keys(uv))),Object.keys(s).filter(function(d){return!o.includes(d)}).reduce(function(d,p){return Dh(Dh({},d),{},Ct({},p,s[p]))},{})),{ref:function(d){return a._canvas=d}}))}}])&&hR(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();fv.propTypes=fT,fv.defaultProps=mR;var gR=fv;function pT(){var e=Y.exports.useContext(Ef);return Et(e instanceof $u,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function vR(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=pT();Et(typeof e=="function","`useTick` needs a callback function."),Et(r instanceof $u,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var n=Y.exports.useRef(null);Y.exports.useEffect(function(){n.current=e},[e]),Y.exports.useEffect(function(){if(t){var i=function(s){return n.current.apply(r.ticker,[s,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[t])}function xR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pv(e,t,r){return pv=xR()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(n,o));return s&&Gd(a,s.prototype),a},pv.apply(null,arguments)}var yR=["children","apply"];function zb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Oh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zb(Object(r),!0).forEach(function(n){Ct(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var _R=function(e,t){Et(Vr(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(t),n=function(i){var s=i.children,o=i.apply,a=js(i,yR),h=Y.exports.useRef(Y.exports.useMemo(function(){return r.map(function(c){var f,m=(a==null||(f=a[c])===null||f===void 0?void 0:f.construct)||[];return pv(t[c],Ki(m))})},[r])),d=Y.exports.useMemo(function(){return r.reduce(function(c,f,m){return Oh(Oh({},c),{},Ct({},f,h.current[m]))},{})},[r]),p=Y.exports.useMemo(function(){return Object.keys(a).filter(sT(iT(r))).reduce(function(c,f){return Oh(Oh({},c),{},Ct({},f,a[f]))},{})},[a,r]);return r.forEach(function(c,f){return Object.assign(h.current[f],a[c])}),o&&function(){for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return f.every(function(v){return typeof v=="function"})}(o)&&o.call(e,d),jr.createElement(e,Mu({},p,{filters:h.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:st.exports.node,apply:st.exports.func},n},bR=Nr.BitmapText,wR=Nr.Container,SR=Nr.Graphics,ER=Nr.NineSlicePlane,TR=Nr.ParticleContainer,CR=Nr.Sprite,AR=Nr.AnimatedSprite,kR=Nr.Text,PR=Nr.TilingSprite,IR=Nr.SimpleMesh,RR=Nr.SimpleRope;const MR=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:AR,AppConsumer:dT,AppContext:Ef,AppProvider:hT,BitmapText:bR,Container:wR,Graphics:SR,NineSlicePlane:ER,ParticleContainer:TR,PixiComponent:eR,PixiFiber:Fn,SimpleMesh:IR,SimpleRope:RR,Sprite:CR,Stage:gR,TYPES:Nr,Text:kR,TilingSprite:PR,applyDefaultProps:bi,createRoot:cT,eventHandlers:zd,render:lR,unmountComponentAtNode:uR,useApp:pT,useTick:vR,withFilters:_R,withPixiApp:fR},Symbol.toStringTag,{value:"Module"})),NR=Ow(MR);(function(e){e.exports=NR})(he);const mT=new ft;pt.prototype._cacheAsBitmap=!1;pt.prototype._cacheData=null;pt.prototype._cacheAsBitmapResolution=null;pt.prototype._cacheAsBitmapMultisample=null;class BR{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(pt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new BR),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});pt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};pt.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const r=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const f=this.filters[0].padding;n.pad(f)}n.ceil(fe.RESOLUTION);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,h=Lo.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),d=`cacheAsBitmap_${Ro()}`;this._cacheData.textureCacheId=d,De.addToCache(h.baseTexture,d),le.addToCache(h,d);const p=this.transform.localTransform.copyTo(mT).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:p,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new Xn(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};pt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};pt.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const i=t.canvasContext.activeContext,s=t._projTransform;r.ceil(fe.RESOLUTION);const o=Lo.create({width:r.width,height:r.height}),a=`cacheAsBitmap_${Ro()}`;this._cacheData.textureCacheId=a,De.addToCache(o.baseTexture,a),le.addToCache(o,a);const h=mT;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=r.x,h.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),t.canvasContext.activeContext=i,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const d=new Xn(o);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(r.x/r.width),d.anchor.y=-(r.y/r.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)};pt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};pt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};pt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,De.removeFromCache(this._cacheData.textureCacheId),le.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};pt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};pt.prototype.name=null;$t.prototype.getChildByName=function(t,r){for(let n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};pt.prototype.getGlobalPosition=function(t=new We,r=!1){return this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};var LR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class DR extends Zt{constructor(t=1){super(oP,LR,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const OR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},FR=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function UR(e){const t=OR[e],r=t.length;let n=FR,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let h=s.replace("%index%",a.toString());o=a,a>=r&&(o=e-a-1),h=h.replace("%value%",t[o].toString()),i+=h,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}const HR=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function zR(e,t){const r=Math.ceil(e/2);let n=HR,i="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}class mv extends Zt{constructor(t,r=8,n=4,i=Zt.defaultResolution,s=5){const o=zR(s,t),a=UR(s);super(o,a),this.horizontal=t,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(t,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,n,i);else{const s=t.getFilterTexture(),o=t.renderer;let a=r,h=s;this.state.blend=!1,t.applyFilter(this,a,h,hi.CLEAR);for(let d=1;d<this.passes-1;d++){t.bindAndClear(a,hi.BLIT),this.uniforms.uSampler=h;const p=h;h=a,a=p,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,h,n,i),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class GR extends Zt{constructor(t=8,r=4,n=Zt.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new mv(!0,t,r,n,i),this.blurYFilter=new mv(!1,t,r,n,i),this.resolution=n,this.quality=r,this.blur=t,this.repeatEdgePixels=!1}apply(t,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,r,a,hi.CLEAR),this.blurYFilter.apply(t,a,n,i),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,r,n,i):this.blurXFilter.apply(t,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var WR=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class gv extends Zt{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(FE,WR,t),this.alpha=1}_loadMatrix(t,r=!1){let n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t}_colorMatrix(t){const r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(t,r){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(t,r){const[n,i,s]=et.shared.setValue(t).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(t,r){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(t){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)}hue(t,r){t=(t||0)/180*Math.PI;const n=Math.cos(t),i=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),h=n+(1-n)*o,d=o*(1-n)-a*i,p=o*(1-n)+a*i,c=o*(1-n)+a*i,f=n+o*(1-n),m=o*(1-n)-a*i,v=o*(1-n)-a*i,y=o*(1-n)+a*i,E=n+o*(1-n),x=[h,d,p,0,0,c,f,m,0,0,v,y,E,0,0,0,0,0,1,0];this._loadMatrix(x,r)}contrast(t,r){const n=(t||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(t=0,r){const n=t*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(t){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)}sepia(t){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)}technicolor(t){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)}polaroid(t){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)}toBGR(t){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)}kodachrome(t){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)}browni(t){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)}vintage(t){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)}colorTone(t,r,n,i,s){t=t||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=et.shared,[a,h,d]=o.setValue(n).toArray(),[p,c,f]=o.setValue(i).toArray(),m=[.3,.59,.11,0,0,a,h,d,t,0,p,c,f,r,0,a-p,h-c,d-f,0,0];this._loadMatrix(m,s)}night(t,r){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(t,r){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,r)}lsd(t){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}gv.prototype.grayscale=gv.prototype.greyscale;var jR=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,$R=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class VR extends Zt{constructor(t,r){const n=new ft;t.renderable=!1,super($R,jR,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,r==null&&(r=20),this.scale=new We(r,r)}apply(t,r,n,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var XR=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,YR=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class KR extends Zt{constructor(){super(YR,XR)}}var QR=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class qR extends Zt{constructor(t=.5,r=Math.random()){super(FE,QR,{uNoise:0,uSeed:0}),this.noise=t,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Gb={AlphaFilter:DR,BlurFilter:GR,BlurFilterPass:mv,ColorMatrixFilter:gv,DisplacementFilter:VR,FXAAFilter:KR,NoiseFilter:qR};Object.entries(Gb).forEach(([e,t])=>{Object.defineProperty(Gb,e,{get(){return He("7.1.0",`filters.${e} has moved to ${e}`),t}})});class ZR{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Pt.system.add(this.tickerUpdate,this,Us.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){!this.tickerAdded||(Pt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const _s=new ZR;class Vu{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Vu.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new We,this.page=new We,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class jd extends Vu{constructor(){super(...arguments),this.client=new We,this.movement=new We,this.offset=new We,this.global=new We,this.screen=new We}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,r,n,i,s,o,a,h,d,p,c,f,m,v,y){throw new Error("Method not implemented.")}}class An extends jd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Va extends jd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Va.DOM_DELTA_PIXEL=0;Va.DOM_DELTA_LINE=1;Va.DOM_DELTA_PAGE=2;const JR=2048,e8=new We,qp=new We;class t8{constructor(t){this.dispatch=new zu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort((n,i)=>n.priority-i.priority)}dispatchEvent(t,r){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r),this.dispatch.emit(r||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const r=this.mappingTable[t.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,r){_s.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,e8.set(t,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,r){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,r,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{t.currentTarget=n[s],this.notifyTarget(t,o)})}propagationPath(t){const r=[t];for(let n=0;n<JR&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(t.parent),t=t.parent}return r.reverse(),r}hitTestMoveRecursive(t,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(_s.pauseUpdate=!1),t.interactiveChildren&&t.children){const p=t.children;for(let c=p.length-1;c>=0;c--){const f=p[c],m=this.hitTestMoveRecursive(f,this._isInteractive(r)?r:f.eventMode,n,i,s,o||s(t,n));if(m){if(m.length>0&&!m[m.length-1].parent)continue;const v=t.isInteractive();(m.length>0||v)&&(v&&this._allInteractiveElements.push(t),m.push(t)),this._hitElements.length===0&&(this._hitElements=m),a=!0}}}const h=this._isInteractive(r),d=t.isInteractive();return d&&d&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:h&&!s(t,n)&&i(t,n)?d?[t]:[]:null}hitTestRecursive(t,r,n,i,s){if(this._interactivePrune(t)||s(t,n))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(_s.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let d=h.length-1;d>=0;d--){const p=h[d],c=this.hitTestRecursive(p,this._isInteractive(r)?r:p.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const f=t.isInteractive();return(c.length>0||f)&&c.push(t),c}}}const o=this._isInteractive(r),a=t.isInteractive();return o&&i(t,n)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,r){if(t.hitArea&&(t.worldTransform.applyInverse(r,qp),!t.hitArea.contains(qp.x,qp.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!n.containsPoint?.(r))return!0}return!1}hitTestFn(t,r){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(r):!1}notifyTarget(t,r){r=r??t.type;const n=`on${r}`;t.currentTarget[n]?.(t);const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${r}capture`:r;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}mapPointerDown(t){if(!(t instanceof An)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(t){if(!(t instanceof An)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==r.target){const h=t.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(t,h,s);if(this.dispatchEvent(d,"pointerout"),n&&this.dispatchEvent(d,"mouseout"),!r.composedPath().includes(s)){const p=this.createPointerEvent(t,"pointerleave",s);for(p.eventPhase=p.AT_TARGET;p.target&&!r.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(d)}if(s!==r.target){const h=t.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(r,h);this.dispatchEvent(d,"pointerover"),n&&this.dispatchEvent(d,"mouseover");let p=s?.parent;for(;p&&p!==this.rootTarget.parent&&p!==r.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=r.target?.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(t){if(!(t instanceof An)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.createPointerEvent(t),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof An)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId);if(r.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(t,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof An)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const h=n.button===2;this.notifyTarget(n,h?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[t.button]||(i.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:r});const h=i.clicksByButton[t.button];if(h.target===a.target&&r-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=a.target,h.timeStamp=r,a.detail=h.clickCount,a.pointerType==="mouse"){const d=a.button===2;this.dispatchEvent(a,d?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof An)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]),i=this.createPointerEvent(t);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[t.button]}this.freeEvent(i)}mapWheel(t){if(!(t instanceof Va)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(t);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(t){if(!t)return null;let r=t[0];for(let n=1;n<t.length&&t[n].parent===r;n++)r=t[n];return r}createPointerEvent(t,r,n){const i=this.allocateEvent(An);return this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(t){const r=this.allocateEvent(Va);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(t,r){const n=this.allocateEvent(An);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=r??n.type,n}copyWheelData(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}copyPointerData(t,r){t instanceof An&&r instanceof An&&(r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist)}copyMouseData(t,r){t instanceof jd&&r instanceof jd&&(r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.client.copyFrom(t.client),r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.movement.copyFrom(t.movement),r.screen.copyFrom(t.screen),r.shiftKey=t.shiftKey,r.global.copyFrom(t.global))}copyData(t,r){r.isTrusted=t.isTrusted,r.srcElement=t.srcElement,r.timeStamp=performance.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.which=t.which,r.layer.copyFrom(t.layer),r.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}notifyListeners(t,r){const n=t.currentTarget._events[r];if(!!n&&!!t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let i=0,s=n.length;i<s&&!t.propagationImmediatelyStopped;i++)n[i].once&&t.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,t)}}const r8=1,n8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},vv=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new t8(null),_s.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new An(null),this.rootWheelEvent=new Va(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...vv.defaultEventFeatures},{set:(t,r,n)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),t[r]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,vv._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,n=t.length;r<n;r++){const i=t[r],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;_s.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let i=0,s=n.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,n[i]);o.type+=r,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,_s.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;_s.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;_s.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*i,e.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,n=e.changedTouches.length;r<n;r++){const i=e.changedTouches[r];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,t.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=r8),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n8[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let Nu=vv;Nu.extension={name:"events",type:[pe.RendererSystem,pe.CanvasRendererSystem]};Nu.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Te.add(Nu);function Wb(e){return e==="dynamic"||e==="static"}const i8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Wb(Nu.defaultEventMode)},set interactive(e){He("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Nu.defaultEventMode},set eventMode(e){this._internalInteractive=Wb(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,i)},removeEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,i)},dispatchEvent(e){if(!(e instanceof Vu))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};pt.mixin(i8);const s8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};pt.mixin(s8);const o8=9,Fh=100,a8=0,l8=0,jb=2,$b=1,u8=-1e3,c8=-1e3,h8=2;class gT{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Hi.tablet||Hi.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${Fh}px`,r.style.height=`${Fh}px`,r.style.position="absolute",r.style.top=`${a8}px`,r.style.left=`${l8}px`,r.style.zIndex=jb.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${$b}px`,t.style.height=`${$b}px`,t.style.position="absolute",t.style.top=`${u8}px`,t.style.left=`${c8}px`,t.style.zIndex=h8.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const r=t.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const t=performance.now();if(Hi.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:h}=this.renderer,d=i/o*h,p=s/a*h;let c=this.div;c.style.left=`${r}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const m=this.children[f];if(m.renderId!==this.renderId)m._accessibleActive=!1,Ba(this.children,f,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,f--;else{c=m._accessibleDiv;let v=m.hitArea;const y=m.worldTransform;m.hitArea?(c.style.left=`${(y.tx+v.x*y.a)*d}px`,c.style.top=`${(y.ty+v.y*y.d)*p}px`,c.style.width=`${v.width*y.a*d}px`,c.style.height=`${v.height*y.d*p}px`):(v=m.getBounds(),this.capHitArea(v),c.style.left=`${v.x*d}px`,c.style.top=`${v.y*p}px`,c.style.width=`${v.width*d}px`,c.style.height=`${v.height*p}px`,c.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(c.title=m.accessibleTitle),c.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&c.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==c.title||m.tabIndex!==c.tabIndex)&&(c.title=m.accessibleTitle,c.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:r,height:n}=this.renderer;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${Fh}px`,r.style.height=`${Fh}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=jb.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,r){const{displayObject:n}=t.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Vu(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===o8&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}gT.extension={name:"accessibility",type:[pe.RendererPlugin,pe.CanvasRendererPlugin]};Te.add(gT);var zr=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(zr||{});const $d={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let Ni,aa;function Vb(){aa={s3tc:Ni.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ni.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Ni.getExtension("WEBGL_compressed_texture_etc"),etc1:Ni.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Ni.getExtension("WEBGL_compressed_texture_pvrtc")||Ni.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Ni.getExtension("WEBGL_compressed_texture_atc"),astc:Ni.getExtension("WEBGL_compressed_texture_astc")}}const d8={extension:{type:pe.DetectionParser,priority:2},test:async()=>{const t=fe.ADAPTER.createCanvas().getContext("webgl");return t?(Ni=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{aa||Vb();const t=[];for(const r in aa)!aa[r]||t.push(r);return[...t,...e]},remove:async e=>(aa||Vb(),e.filter(t=>!(t in aa)))};Te.add(d8);class f8 extends Gu{constructor(t,r={width:1,height:1,autoLoad:!0}){let n,i;typeof t=="string"?(n=t,i=new Uint8Array):(n=null,i=t),super(i,r),this.origin=n,this.buffer=i?new Xg(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Xg(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class So extends f8{constructor(t,r){super(t,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=So._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||So._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,r,n){const i=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:h,levelWidth:d,levelHeight:p,levelBuffer:c}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,h,this.format,d,p,0,c)}return!0}onBlobLoaded(){this._levelBuffers=So._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,r,n,i,s,o,a){const h=new Array(n);let d=t.byteOffset,p=o,c=a,f=p+i-1&~(i-1),m=c+s-1&~(s-1),v=f*m*$d[r];for(let y=0;y<n;y++)h[y]={levelID:y,levelWidth:n>1?p:f,levelHeight:n>1?c:m,levelBuffer:new Uint8Array(t.buffer,d,v)},d+=v,p=p>>1||1,c=c>>1||1,f=p+i-1&~(i-1),m=c+s-1&~(s-1),v=f*m*$d[r];return h}}const Zp=4,Uh=124,p8=32,Xb=20,m8=542327876,Hh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},g8={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},zh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},v8=1,x8=2,y8=4,_8=64,b8=512,w8=131072,S8=827611204,E8=861165636,T8=894720068,C8=808540228,A8=4,k8={[S8]:zr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[E8]:zr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[T8]:zr.COMPRESSED_RGBA_S3TC_DXT5_EXT},P8={[70]:zr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:zr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:zr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:zr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:zr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:zr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:zr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:zr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:zr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function I8(e){const t=new Uint32Array(e);if(t[0]!==m8)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,Uh/Uint32Array.BYTES_PER_ELEMENT),i=n[Hh.HEIGHT],s=n[Hh.WIDTH],o=n[Hh.MIPMAP_COUNT],a=new Uint32Array(e,Hh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,p8/Uint32Array.BYTES_PER_ELEMENT),h=a[v8];if(h&y8){const d=a[g8.FOURCC];if(d!==C8){const w=k8[d],T=Zp+Uh,P=new Uint8Array(e,T);return[new So(P,{format:w,width:s,height:i,levels:o})]}const p=Zp+Uh,c=new Uint32Array(t.buffer,p,Xb/Uint32Array.BYTES_PER_ELEMENT),f=c[zh.DXGI_FORMAT],m=c[zh.RESOURCE_DIMENSION],v=c[zh.MISC_FLAG],y=c[zh.ARRAY_SIZE],E=P8[f];if(E===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===A8)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,_=Zp+Uh+Xb;if(y===1)x.push(new Uint8Array(e,_));else{const w=$d[E];let T=0,P=s,I=i;for(let M=0;M<o;M++){const N=Math.max(1,P+3&-4),k=Math.max(1,I+3&-4),L=N*k*w;T+=L,P=P>>>1,I=I>>>1}let R=_;for(let M=0;M<y;M++)x.push(new Uint8Array(e,R,T)),R+=T}return x.map(w=>new So(w,{format:E,width:s,height:i,levels:o}))}throw h&_8?new Error("DDSParser does not support uncompressed texture data."):h&b8?new Error("DDSParser does not supported YUV uncompressed texture data."):h&w8?new Error("DDSParser does not support single-channel (lumninance) texture data!"):h&x8?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Yb=[171,75,84,88,32,49,49,187,13,10,26,10],R8=67305985,Tn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},xv=64,Kb={[Pe.UNSIGNED_BYTE]:1,[Pe.UNSIGNED_SHORT]:2,[Pe.INT]:4,[Pe.UNSIGNED_INT]:4,[Pe.FLOAT]:4,[Pe.HALF_FLOAT]:8},M8={[ce.RGBA]:4,[ce.RGB]:3,[ce.RG]:2,[ce.RED]:1,[ce.LUMINANCE]:1,[ce.LUMINANCE_ALPHA]:2,[ce.ALPHA]:1},N8={[Pe.UNSIGNED_SHORT_4_4_4_4]:2,[Pe.UNSIGNED_SHORT_5_5_5_1]:2,[Pe.UNSIGNED_SHORT_5_6_5]:2};function B8(e,t,r=!1){const n=new DataView(t);if(!L8(e,n))return null;const i=n.getUint32(Tn.ENDIANNESS,!0)===R8,s=n.getUint32(Tn.GL_TYPE,i),o=n.getUint32(Tn.GL_FORMAT,i),a=n.getUint32(Tn.GL_INTERNAL_FORMAT,i),h=n.getUint32(Tn.PIXEL_WIDTH,i),d=n.getUint32(Tn.PIXEL_HEIGHT,i)||1,p=n.getUint32(Tn.PIXEL_DEPTH,i)||1,c=n.getUint32(Tn.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=n.getUint32(Tn.NUMBER_OF_FACES,i),m=n.getUint32(Tn.NUMBER_OF_MIPMAP_LEVELS,i),v=n.getUint32(Tn.BYTES_OF_KEY_VALUE_DATA,i);if(d===0||p!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const y=4,E=4,x=h+3&-4,_=d+3&-4,w=new Array(c);let T=h*d;s===0&&(T=x*_);let P;if(s!==0?Kb[s]?P=Kb[s]*M8[o]:P=N8[s]:P=$d[a],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const I=r?O8(n,v,i):null;let M=T*P,N=h,k=d,L=x,W=_,D=xv+v;for(let U=0;U<m;U++){const X=n.getUint32(D,i);let K=D+4;for(let Z=0;Z<c;Z++){let F=w[Z];F||(F=w[Z]=new Array(m)),F[U]={levelID:U,levelWidth:m>1||s!==0?N:L,levelHeight:m>1||s!==0?k:W,levelBuffer:new Uint8Array(t,K,M)},K+=M}D+=X+4,D=D%4!==0?D+4-D%4:D,N=N>>1||1,k=k>>1||1,L=N+y-1&~(y-1),W=k+E-1&~(E-1),M=L*W*P}return s!==0?{uncompressed:w.map(U=>{let X=U[0].levelBuffer,K=!1;return s===Pe.FLOAT?X=new Float32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4):s===Pe.UNSIGNED_INT?(K=!0,X=new Uint32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)):s===Pe.INT&&(K=!0,X=new Int32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)),{resource:new Gu(X,{width:U[0].levelWidth,height:U[0].levelHeight}),type:s,format:K?D8(o):o}}),kvData:I}:{compressed:w.map(U=>new So(null,{format:a,width:h,height:d,levels:m,levelBuffers:U})),kvData:I}}function L8(e,t){for(let r=0;r<Yb.length;r++)if(t.getUint8(r)!==Yb[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function D8(e){switch(e){case ce.RGBA:return ce.RGBA_INTEGER;case ce.RGB:return ce.RGB_INTEGER;case ce.RG:return ce.RG_INTEGER;case ce.RED:return ce.RED_INTEGER;default:return e}}function O8(e,t,r){const n=new Map;let i=0;for(;i<t;){const s=e.getUint32(xv+i,r),o=xv+i+4,a=3-(s+3)%4;if(s===0||s>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<s&&e.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const d=new TextDecoder().decode(new Uint8Array(e.buffer,o,h)),p=new DataView(e.buffer,o+h+1,s-h-1);n.set(d,p),i+=4+s+a}return n}const F8={extension:{type:pe.LoadParser,priority:Ei.High},name:"loadDDS",test(e){return Do(e,".dds")},async load(e,t,r){const i=await(await fe.ADAPTER.fetch(e)).arrayBuffer(),o=I8(i).map(a=>{const h=new De(a,{mipmap:yi.OFF,alphaMode:Vn.NO_PREMULTIPLIED_ALPHA,resolution:Ds(e),...t.data});return bf(h,r,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Te.add(F8);const U8={extension:{type:pe.LoadParser,priority:Ei.High},name:"loadKTX",test(e){return Do(e,".ktx")},async load(e,t,r){const i=await(await fe.ADAPTER.fetch(e)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=B8(e,i),h=s??o,d={mipmap:yi.OFF,alphaMode:Vn.NO_PREMULTIPLIED_ALPHA,resolution:Ds(e),...t.data},p=h.map(c=>{h===o&&Object.assign(d,{type:c.type,format:c.format});const f=new De(c,d);return f.ktxKeyValueData=a,bf(f,r,e)});return p.length===1?p[0]:p},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Te.add(U8);const H8={extension:pe.ResolveParser,test:e=>{const r=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:e=>{if(e.split("?")[0].split(".").pop()==="ktx"){const n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(n.some(i=>e.endsWith(i)))return{resolution:parseFloat(fe.RETINA_PREFIX.exec(e)?.[1]??"1"),format:n.find(i=>e.endsWith(i)),src:e}}return{resolution:parseFloat(fe.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};Te.add(H8);const z8=new Ue,G8=4,Vl=class{constructor(e){this.renderer=e}async image(e,t,r){const n=new Image;return n.src=await this.base64(e,t,r),n}async base64(e,t,r){const n=this.canvas(e);if(n.toBlob!==void 0)return new Promise((i,s)=>{n.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},t,r)});if(n.toDataURL!==void 0)return n.toDataURL(t,r);if(n.convertToBlob!==void 0){const i=await n.convertToBlob({type:t,quality:r});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(e,t);s&&Vl._flipY(r,n,i),Vl._unpremultiplyAlpha(r);const o=new Xk(n,i,1),a=new ImageData(new Uint8ClampedArray(r.buffer),n,i);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(e,t);return s&&Vl._flipY(r,n,i),Vl._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,i=!1,s,o=!1;if(e&&(e instanceof Lo?s=e:(s=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),o=!0)),s){if(n=s.baseTexture.resolution,t=t??s.frame,i=!1,!o){r.renderTexture.bind(s);const c=s.framebuffer.glFramebuffers[r.CONTEXT_UID];c.blitFramebuffer&&r.framebuffer.bind(c.blitFramebuffer)}}else n=r.resolution,t||(t=z8,t.width=r.width/n,t.height=r.height/n),i=!0,r.renderTexture.bind();const a=Math.round(t.width*n),h=Math.round(t.height*n),d=new Uint8Array(G8*a*h),p=r.gl;return p.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,h,p.RGBA,p.UNSIGNED_BYTE,d),o&&s?.destroy(!0),{pixels:d,width:a,height:h,flipY:i}}destroy(){this.renderer=null}static _flipY(e,t,r){const n=t<<2,i=r>>1,s=new Uint8Array(n);for(let o=0;o<i;o++){const a=o*n,h=(r-o-1)*n;s.set(e.subarray(a,a+n)),e.copyWithin(a,h,h+n),e.set(s,h)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const n=e[r+3];if(n!==0){const i=255.001/n;e[r]=e[r]*i+.5,e[r+1]=e[r+1]*i+.5,e[r+2]=e[r+2]*i+.5}}}};let vT=Vl;vT.extension={name:"extract",type:pe.RendererSystem};Te.add(vT);class W8{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function j8(e,t){let r=!1;if(e?._textures?.length){for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof le){const i=e._textures[n].baseTexture;t.includes(i)||(t.push(i),r=!0)}}return r}function $8(e,t){if(e.baseTexture instanceof De){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function V8(e,t){if(e._texture&&e._texture instanceof le){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function X8(e,t){return t instanceof Wu?(t.updateText(!0),!0):!1}function Y8(e,t){if(t instanceof Jt){const r=t.toFontString();return Qt.measureFont(r),!0}return!1}function K8(e,t){if(e instanceof Wu){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Q8(e,t){return e instanceof Jt?(t.includes(e)||t.push(e),!0):!1}const xT=class{constructor(e){this.limiter=new W8(xT.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(K8),this.registerFindHook(Q8),this.registerFindHook(j8),this.registerFindHook($8),this.registerFindHook(V8),this.registerUploadHook(X8),this.registerUploadHook(Y8)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Pt.system.addOnce(this.tick,this,Us.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Pt.system.addOnce(this.tick,this,Us.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof $t)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Pt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Vd=xT;Vd.uploadsPerFrame=4;Object.defineProperties(fe,{UPLOADS_PER_FRAME:{get(){return Vd.uploadsPerFrame},set(e){He("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Vd.uploadsPerFrame=e}}});function yT(e,t){return t instanceof De?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function q8(e,t){if(!(t instanceof jn))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&yT(e,s.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function Z8(e,t){return e instanceof jn?(t.push(e),!0):!1}class _T extends Vd{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(Z8),this.registerUploadHook(yT),this.registerUploadHook(q8)}}_T.extension={name:"prepare",type:pe.RendererSystem};Te.add(_T);const Xl=class{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof le?e:null,this.baseTexture=e instanceof De?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=Ds(e,null);return r===null&&(r=parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Xl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Xl.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const n=this._frameKeys[t],i=this._frames[n],s=i.frame;if(s){let o=null,a=null;const h=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,d=new Ue(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);i.rotated?o=new Ue(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new Ue(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new Ue(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new le(this.baseTexture,o,d,a,i.rotated?2:0,i.anchor,i.borders),le.addToCache(this.textures[n],n)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const n=e[t][r];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Xl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Xl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let yv=Xl;yv.BATCH_SIZE=1e3;const J8=["jpg","png","jpeg","avif","webp"];function bT(e,t,r){const n={};if(e.forEach(i=>{n[i]=t}),Object.keys(t.textures).forEach(i=>{n[i]=t.textures[i]}),!r){const i=dr.dirname(e[0]);t.linkedSheets.forEach((s,o)=>{const a=bT([`${i}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const eM={extension:pe.Asset,cache:{test:e=>e instanceof yv,getCacheableAssets:(e,t)=>bT(e,t,!1)},resolver:{test:e=>{const r=e.split("?")[0].split("."),n=r.pop(),i=r.pop();return n==="json"&&J8.includes(i)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(fe.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:pe.LoadParser,priority:Ei.Normal},async testParse(e,t){return dr.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,r){let n=dr.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+e.meta.image;i=ov(i,t.src);const o=(await r.load([i]))[i],a=new yv(o.baseTexture,e,t.src);await a.parse();const h=e?.meta?.related_multi_packs;if(Array.isArray(h)){const d=[];for(const c of h){if(typeof c!="string")continue;let f=n+c;t.data?.ignoreMultiPack||(f=ov(f,t.src),d.push(r.load({src:f,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(d);a.linkedSheets=p,p.forEach(c=>{c.linkedSheets=[a].concat(a.linkedSheets.filter(f=>f!==c))})}return a},unload(e){e.destroy(!0)}}};Te.add(eM);const la=class extends Jt{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new la(Object.keys(la.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete la.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=la;if(r[e]){const n=r[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return fe.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((i,s)=>{const o=URL.createObjectURL(n),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(n)})).then(async([n,i])=>{const s=Object.assign({family:dr.basename(e,dr.extname(e)),weight:"normal",style:"normal",src:n,dataSrc:i,refs:1,originalUrl:e,fontFace:null},t);r[e]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=Wk(e)),typeof e=="number"?Gk(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const i=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${i} ${e}`}reset(){Object.assign(this,la.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=fe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let ou=la;ou.availableFonts={};ou.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const ua=class extends Xn{constructor(e="",t={}){super(le.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const r=new Image,n=le.from(r,{scaleMode:fe.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new Ue,n.trim=new Ue,this.texture=n;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),h=document.createElementNS(s,"div"),d=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=ua.defaultMaxWidth,this.maxHeight=ua.defaultMaxHeight,this._domElement=h,this._styleElement=d,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(d),this._foreignObject.appendChild(h),this._image=r,this._loadImage=new Image,this._autoResolution=ua.defaultAutoResolution,this._resolution=ua.defaultResolution??fe.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(n)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:s+r.padding*2,height:o+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:i,height:s}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,i)),r.height=n.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{n.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,r.src=n.src,n.onload=null,n.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:n}=this,{padding:i}=e,{baseTexture:s}=t;t.trim.width=t._frame.width=r.width/n,t.trim.height=t._frame.height=r.height/n,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ua.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Ss(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Ss(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof ou?(this.ownsStyle=!1,this._style=e):e instanceof Jt?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=ou.from(e)):(this.ownsStyle=!0,this._style=new ou(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Tf=ua;Tf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Tf.defaultMaxWidth=2024;Tf.defaultMaxHeight=2024;Tf.defaultAutoResolution=!0;function tM(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function rM(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}let wT=[12303291,7130603,15759548,12303291],Xd=[2883570,16722807],be=tM(),me=rM(),je=be*.13,ke=je/4,Di=15,an=je*3,nM=6,iM=me*(nM/3)/1980,Le=me*.064;function kr(e,t,r,n){const[i,s]=t,[o,a]=r;return e<i&&!n?o:e>s&&!n?a:o===a&&!n?o:(e-i)/(s-i)*(a-o)+o}function go(e,t,r,n){const[i,s]=t,[o,a]=r;let h=(e-i)/(s-i);return n=="eout"&&(h=Math.sin(h*Math.PI/2)),n=="ein"&&(h=1-Math.cos(h*Math.PI/2)),n=="normal"&&(h=0),e<i?o:e>s?a:o===a?o:h*(a-o)+o}function Eo(e,t,r){const[n,i]=t,[s,o]=r;let a=(e-n)/(i-n);return a=1-Math.pow(1-a,5),e<n?s:e>i?o:s===o?s:a*(o-s)+s}const ST="/assets/hit.3c6c1a6d.png",A1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABWCAYAAACJg9eFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFEsAABRLARTJybQAAAOMaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPg0KICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOklwdGM0eG1wRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIj4NCiAgICAgIDxkYzp0aXRsZT4NCiAgICAgICAgPHJkZjpBbHQ+DQogICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5VbnRpdGxlZCBBcnR3b3JrPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOkFsdD4NCiAgICAgIDwvZGM6dGl0bGU+DQogICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xMzI8L3RpZmY6WVJlc29sdXRpb24+DQogICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xMzI8L3RpZmY6WFJlc29sdXRpb24+DQogICAgICA8dGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPjI8L3RpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4NCiAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+DQogICAgICA8SXB0YzR4bXBFeHQ6QXJ0d29ya1RpdGxlPlVudGl0bGVkIEFydHdvcms8L0lwdGM0eG1wRXh0OkFydHdvcmtUaXRsZT4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgPC9yZGY6UkRGPg0KPC94OnhtcG1ldGE+DQo8P3hwYWNrZXQgZW5kPSJyIj8+LDm18gAABCNJREFUeF7t3T1uFEEQhmEvv5YsBw4ISAiJSbkAF+ACnIALEBMTkpGRcAJuwAk4DLbB1Neab6jtnV0hBN6u4X2kUveK9FVp7MW7JwAAAAAAAAAAAAAA/D8209nc3NxsvQaq2Gw2N9P1ZEPIWJs70wmsRr+p2dqoauvx4+50z4gbVcwxm6K+5/t0ClGjihx1uyvqB+0lUaOmxahP28tfIRM3KtiJ2aeiPtOpFwunEDZGszdonYr6PC4K1yP9CYxmJ2aPor6IS47aY/kOjMAhyxyzR1E/iksftEP2CYzGYS9G/TguemdR04fdR92/Bm6LI7admGN+aBT1k7joDZilsOVQyESOf0WR7uN/2wk65ruifhoXxfynYQO36WDQOhX1s7goZL2zmKP2KUSNUeSoFXKO+lqnon4eFwWtTd1va51C1BiFo+6D1pbWXCvqF3HJUS89hgAjUcxLQc9Rv4yLou7D9qYmaozGQevcClqjqF/FRUHfj8lR501N2BiFt7TDzlFfxbSoX8dFQTtqBe7Hj35TEzeORRGbg/ZoQzvqK0X9Ji4KOm/rPmpixijylvbMW1qnon4bF29qR53DFsLGCBy05KDnLa1R1O/ioj8U8Kb2D4x5SztowsaxOGaHrXHUbUNP56Wifh8XRe1NnaPm8QOjyUH3UWta1B/ioqgdtqPWOGhHTdw4FoXs0+NHD0d9qVHUH+OSo9YsbWqCxrHloPOmnre0RlF/isvDGIetTa1x1BrJURM4bosCNt8dtEZbuj1LT/NNUX+Oi4N21N7UOuXQpiZw/G055MxbWrShvalz1G1Tf4mLY973g6IQL47NQev0ps7P1C1uRf01Lg5aMXsctAcYgbe1w1bUnha2onb9wCr4h0BgNYgaq0PUWB2ixuoQNVaHX+mhmt/6lR5vvqAK//rZQe9984W3yTEax9vzhhbFnKPeepuc/9CEkeXAffeW1ijoHHX7D03811NU4U2tcdR+ltbMm5o/EkAF3tI5bAWdn6nnqPlzLlTioPOmdtQtbEXNH96iAoXsM4edo27P1oqaj0hAFY5Z8qbWeFPzYTYoJ2/pHLY3dYuajx1DBd7Q0ketmOdtraj5gEhU4k3tsP34MW9rRc1H+aIaB60zR62N3aLmQ9dRTd7U/bZuUfP1GKhEMYs3dR92i5ovMkIljtpB57D1+NG+yIivnEMlOWpP3tZ8OSiG5XiXHAxbUfM1zqigjzwH7WlhK2q+cB8VKWKfW6OoL+LSB51jzndgBA5aFqM+j0sfc38Co3HY+ZyjPovLoZgJG6NxyLITt6I+nV4QNCrZG7ai1h8ItPt0CjGjip24FbXeSWz36RSiRhWLUeuNlx5Ro4ocdaOo2dBYgznuPmqgPL01DqzK1pZma6OqzWaz82wNAAAAAAAAoICTk59aGlmKfpTNKQAAAABJRU5ErkJggg==",k1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFEsAABRLARTJybQAAAOMaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPg0KICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOklwdGM0eG1wRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIj4NCiAgICAgIDxkYzp0aXRsZT4NCiAgICAgICAgPHJkZjpBbHQ+DQogICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5VbnRpdGxlZCBBcnR3b3JrPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOkFsdD4NCiAgICAgIDwvZGM6dGl0bGU+DQogICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xMzI8L3RpZmY6WVJlc29sdXRpb24+DQogICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xMzI8L3RpZmY6WFJlc29sdXRpb24+DQogICAgICA8dGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPjI8L3RpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4NCiAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+DQogICAgICA8SXB0YzR4bXBFeHQ6QXJ0d29ya1RpdGxlPlVudGl0bGVkIEFydHdvcms8L0lwdGM0eG1wRXh0OkFydHdvcmtUaXRsZT4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgPC9yZGY6UkRGPg0KPC94OnhtcG1ldGE+DQo8P3hwYWNrZXQgZW5kPSJyIj8+LDm18gAABydJREFUeF7tncvLFlUcx99HS8XQoloGoasQum3MlZiVLUK0fZd9KrgU3UQiSYuwRfQPVLvATYSQKG40yvBC0CZJcBVlWhSZl+n7mfn94Ol9Ls4z88w8c/l94OvgmZdz+Z5nzpw5c86ZpSAIgiAIgiDoPgM7Np4kSdbp8Lz0tPSU9KT0hPSo9Ii0Rlot/WO6KV2XrklXpR+lS9KFwWDwp46NpLEVogrA4K3Sq9I26VlppVSWu9JF6bR0QjqjCqICG0GjKkSVsEKHl6Q3pF3Sw5JzW7osYeYP0hWJX/6v0m/SHRl7S3FwlTwoceU8LnElbZQ2SVTqMxLnnT+k49Jn0teK4x6BvUYmrpX2Sz9Jw1yS3pe2Sw/Zn5dC8ZDWixYv8Q9D+uRjrf15v1DB10sHpV8k55r0gcS9onJIx9IjXYf8HJK4N3UfFXSltEe6LjnnpJ3SPO4TM0O6lv5Zyfld2istJE+1oMJtlr6TnFPSy3a6ESg/NJEnyZxxXtpsp7uBCrRK+lC6K8FV6XU73UiUv13Sz2RWkG/yv8pOtxcVYoP0jQT/Skeludykq0b5pBNAfsk3UI4Ndrp9KPP8ymiL4YrUykuffFv+gfLstlPtQZl+R/Im6gup1b0W8m/lAMq1x041H2X23TTbSXJPOiC1ZphmGpTDykO54D071VyUyY+yvCa3pbctuFNQLisffCw18wenjPmV8bf0mgV3Espn5YTDFtwclCnuGcAvp9OV4VBOKy80556izNCb4kZH29rJZmoSlNfKTfkX3/tSJnjO8K7tAQvuFZQ7K37qA6PLi0GJ8wTuD310CTvRm5oVym3lh28lXgPUjxJmOAF4aOrH6OgEKL/5AMcsuD6UKE+vtJsMK3Rr8K0g5gl+4MsWC64eJcZwtY/aHrXgQOBHZks6SlzP0L0S4n0GMGrbioHCusAP8wX2WnB1KBHe9PnLpUYPoS8KfMnsSX1ab8HVoAR47QqnLCgYg/w5ndmUHLSg+aPIeT/g78Ab9aavaeBPZlPqVzUTJxQxszLgnAUFU8CnzK5kvwXND0W6QvKpOjstOJgCPmV2pb4x72x+KMJX0qizKTPdnYkxR/DJ/IL7NvGz1hgzCuHzwWDAlMzgPphPn2b/W3rTjuVR7a6RbqT1XNMktq4gvzZltqX+MWe5PIpoRxplkjCDPJgR+fZ9Zl+yw4LGMkuTxSx0+NKOwWx8ZUf3sRyqWcZlYLsFBTOAb5l9yXkLKo4iWSfdkRjFjHGrAuCb+YePLD4aS94mi5VLdHMvq9fwVxoSzIT5xvoWfHyOsHHkrRDvVbFYJiiO+8eiobHkrRDW9AErl4LiuH/u5wh5K4RlYcAysqA47p/7OULeCmG1K7CmLyiO++d+jpC3QlhACSywDIrj/rmfI+StEJ9NwmrXoDism4fh1cX/I2+F+PjLHTsGxWBpN5Qbz9KDTIr9NyiBWTnRy7xXyC3+UTyLmY3XEYb8m7hzRN4K8QgesGNQDN9BonSF3LDjY3YMiuG9KzbGGUveCvHeAXuHBMVx/9zPEfJWCFscwcQnzCAX7p/7OULeCvEnzMWte+gG7t/EEY+8FcLmX8AWR0Fx3D/3c4S8FcI4PrDfVFAc96/cvAT1n4ffGPZzL6mS4Jv5V/6N4SDbo5CXK/SjXyAsmBl8w7+L5udY8jZZwB6FMHUaSzARn7XoPpZDl1nMyyqBfMs1Lys3ioiZizfTKGPm4kzIL5+5iH9TR3pzN1lq9xh/YfdOmN8c1X7wlh2Pm4/zQbXrzVbMfs8JPplfMN/7ryKM9SEzgk+ZXRWsDwFF6iuozlpQMAV8yuyqYAUVKOLhNYYxz3cK+JPZVOEaQ1DkbDIMJy0oGAP+ZDYlhyyoGpQAe3r47j/s0R4sA18ye1Kfqt8DRomw4zOwr22Mbw2BH+YL7LPgalFCdOd8zUjsdTIEfmS2pE/n9T0eKLHYDWgZ5gl+1LsbkKNEY78sg/KbD1D/flmghGNHOUG5rfywuB3lQInHnotN2XPRUSZ2S7SbsStpU1BmfFOzvu7bW/1mZbOiTB3O8ta7na2PWHDzUObYCx345fRh7/dPpOZ2Zsic5FcKbWuXv45wRGpH2ZRR7inc6IAuYde+H9K8e8b9UKbpfXmXmIem+MLOolHmN0o8LAHDCm3+BhXlaP8cZxVitXRM8iasjV9pI//dWkWmAm2RfJQY2vAdQ0Zt6x8orAsVjqF73qe04Uuf+6R+zLBRQSd9C5c2u5alD6Rj6flUHSA//fkW7nJUcG6c474WTVNBP7+Kr0UTr0/vdEh/oV+LbtQDjYxg3lKvv6fe2CdMGcsc2K0SexRukzBzHm0527ZSqcxCPyGdmev0zpK0ZjhDFcQiF3a2Y6I3+03xy2dXHa4E2noqkKsDcxFLj1ntygJLriSWkTFz/4IqYOL6jCAIgiAIgiAIgn6xtPQfZzA7iPwOWWMAAAAASUVORK5CYII=",Cf="/assets/hit4.ca8e2549.png",ET="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AQMDzUv/OtSngAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAF1ElEQVR42u2d3Y7kNBCF62SzIEB7hRASl0j7MPvKXPMcSNxxx4+A3WGnU9w4kmX5p6pcttPT01LU6XR6Jv5yfFyuOA7RHbyYGbn1K79wRXhdBQL4ocHOUt4q0HiJMK8AGY8AdAVgPBLQmYBxQaDW3/KVAOMCQEepmlcCxiKosy2CZ8PFZKirPXcaYDwIUBPgHrgYDBWDaxWPBmyFi0FQVzZi7P0bC1wshoorVPkRcLEI6lWjAje4mAx1JHiesY8U7j4pHsYEBUMABwJ4cGgUZQVqqLUHGpxgs+E7tv5NiWqxCComRwXsfFKacDEIai9QD49lJ/Wa4G4DLEQKFck2ZLZpjwmVz9oT3lWTYFCr9iBqhett1DQ+ySMso6Rar6iAFCr1tAA0Ch+38Glrj8b+/lGBk1pLn9FhHz2eyULluqh2n6xMKK1DYhW56p6LV899kdmXvVULB7XW4EAJH52KZYW3smcEkap2hMdqVQiDqilRX257Sb0o7MPDIDioFQrVwqjuli+yUJkadatVOyoq0ECVwpb0+TmTMygpM6dct7zBbqzaFj+sQa1tqym2BCdtpKTVXgqyuR8G2ACE1b60TaraFGS8pFVdYg/saQd7Z1W3dARQgNkCLIlLkQFZC70k4ZbJDnajDVhzCDWoiPIXWrCpWlu+6+Gn1f09Gi8o/ZQacEvAc8Bi1R3CeNfSaKlVuzf81eK5EtWWoG5CuJxZtgxczhwTV0B2x7PMDAA8MgmDSjqwBnUrgM6BPZL1FC4agN07BhIrGDEgoxQVbJn3LbM9hYoILiVwayGXp3impA1hVHKq3DfJewr2CMstbL8VbEYD1TU62J3AQWEDLeVuEdQ9LCdgioCeMJ+TAh/R3+UCoJoduCh7dKK71YEoeewJ9YuwvI2O9UZE/4WFMjFrurBn43RFsK30IBK1vg1Qvyaib4joq7DvJyL6J4J0RFHB0BZfBXbxfQI5FZ9wdyL6kojeEdH3RPRD+P63sMSWcKt49nSozIz9IjBzcN8Exb4jovdE9CHA/omI/g3Lp0pItk4tAO8A+EJ3t6Sx7hYs4Vsi+jGsfxeAb8JOyfQXM2O/2C1Daet+C6r8lYh+Dor9Jaj1Oekg0KMrlpMsFGcC/xPqExH9FWD+EX73e9j2lIErub41p/G6kFLj5UZEn0N1/zsA/DOAfSKijxHYW3QyWpmuFwuWGyk/TnpUp7I/h+p/xrHPYdtzBSqvVO3uXL1rnkmCLNWR2ecIABHlBm7JcmT8lgUnkgTHPAUsU/suFgj3o4zXcpKd4gQsZZSdU+yhADVE0XsHROk+JTWg0HBRQcVIVMzJe8kOrH7LPUreJ/pqLgESg6Io5YdM/79kIUdhPQU6omGrX5pxCrm4kPSQHkyszjhhXQJLFaBaP3Wzg56rtKVBEVrVcqaRgqDLyw24VOg4aJTaZQMSsBYPReNzzmOpAFkDthZuScIv9rKBkeEWF6qvNKnMpB9XoIHqqs5W0qN0tdZjQFzp3gDNMKMWXBYAl3ireSSMdlCc1A6YZEMua8nokrprow1LcCxV3uXW0F4rkIDMXSkt2ULLGiSF5EJDxcIT4tYL6x3RLR1krB0jC8NJloRPGgvQbHMf0V1rpHqU25vcka6rAZoVO1C1tXXJZ2vMORz2qLtmpKotNWKtYZbWxkSa9HZXa1UVznfPWBTr1X/3ujtRdWfiRn4vdigkd/7/UVD9FGtUrbVDMUux1vBKpdYej5V2Blrd3prHetcWV6hdim2o1qpcTXQxypK6v+uaCGIw3N7feqhtCFTVwQ+E66lWTfU1d2UlYEdfpaVKIqVUkNHzx/aoWDw91IoJzVYOaZoC1VTIO50tbtpEZl2Fu5P5DZfNa9hVqEHTnGIiTNH+U6c5VcJd7avmE7BkYt47BTwcqHtBXyc/H1jA1+n6Bxfq9QETr49Eua9Holwd8N0/xOdqgF/cY6dWQn6IB6XNAn2Vx/td+nUCZ2acyz0c9/9qbmPj7j+UBQAAAABJRU5ErkJggg==";function Bu(e,t){let r=e.length;if(t<=e[0].time)return e[0];if(t>=e[r-1].time)return e[r-1];let n=0,i=r,s=0;for(;n<i;){if(s=Math.floor((n+i)/2),e[s].time==t)return e[s];if(t<e[s].time){if(s>0&&t>e[s-1].time)return e[s-1];i=s}else{if(s<r-1&&t<e[s+1].time)return e[s];n=s+1}}return e[s]}function Rt(e,t,r){const n=Bu(r.sort((a,h)=>a.time-h.time),e),i=n.floorPosition+n.speed*(e-n.time),s=Bu(r.sort((a,h)=>a.time-h.time),t);return s.floorPosition+s.speed*(t-s.time)-i}function Jp(e,t,r){let n=0,i=t.filter(s=>s.time<=e).sort((s,o)=>s.time-o.time).reverse();if(t=t.filter(s=>s.time<=e).sort((s,o)=>s.time-o.time),i[0]!=null&&(n+=e-i[0].time),i.length==0){const s=t[0],o=t.length!=1?t[1]:s;r-=o.speed*(e-s.time)}return i.forEach((s,o)=>{const a=s,h=o+1!=i.length?i[o+1]:s;h.speed*(a.time-h.time)<=r?(n+=a.time-h.time,r-=h.speed*(a.time-h.time)):n+=r/h.speed}),n}var Af={exports:{}},kf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sM=Y.exports,oM=Symbol.for("react.element"),aM=Symbol.for("react.fragment"),lM=Object.prototype.hasOwnProperty,uM=sM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cM={key:!0,ref:!0,__self:!0,__source:!0};function TT(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)lM.call(t,n)&&!cM.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:oM,type:e,key:s,ref:o,props:i,_owner:uM.current}}kf.Fragment=aM;kf.jsx=TT;kf.jsxs=TT;(function(e){e.exports=kf})(Af);const Me=Af.exports.Fragment,A=Af.exports.jsx,V=Af.exports.jsxs;function hM(e){const t=Y.exports.useRef(Rt(e.startTime,e.endTime,e.game.beatmap.timingPoints)),[r,n]=Y.exports.useState(-t),[i,s]=Y.exports.useState(!0),[o,a]=Y.exports.useState(1),[h,d]=Y.exports.useState(-1),[p,c]=Y.exports.useState(""),[f,m]=Y.exports.useState(!1),[v,y]=Y.exports.useState(0),[E,x]=Y.exports.useState(0),[_,w]=Y.exports.useState(0),[T,P]=Y.exports.useState(0);let I=e.game.beatmap.cursor.filter(Z=>Z.startTime<=e.startTime)[e.game.beatmap.cursor.filter(Z=>Z.startTime<=e.startTime).length-1],R=e.game.beatmap.cursor.filter(Z=>Z.startTime>e.startTime)[0],M=I!=null?I.x:.5,N=R!=null?R.x:I.x,k=I!=null?I.startTime:0,L=R!=null?R.startTime:I.startTime;const W=go(e.startTime,[k,L],[M,N],I.type);let D=be/2-an/2+W*an;const[U,X]=Y.exports.useState(16777215);Y.exports.useRef(new jn);let K=wT[e.keys-1];return e.color||(K=16777215),e.game.beatmap.cursor.filter(Z=>Z.startTime<=e.startTime).sort((Z,F)=>Z.startTime-F.startTime).reverse()[0],he.exports.useTick(()=>{const Z=e.game.currenttime;if(m(Z>=e.visiblestart&&Z<=e.visibleend+1e3),s(Z<=e.visibleend+2e3),f&&i){e.game.hitlist.length>0&&e.game.hitlist.forEach(z=>{z.startsWith(e.startTime.toString()+","+e.keys.toString())&&(!z.endsWith("misslost")&&h==-1&&p==""?(c("true"),d(Z),X(z.split(",")[2]=="perfect"?16735978:z.split(",")[2]=="great"?16775774:z.split(",")[2]=="miss"?16711680:16777215)):z.endsWith("misslost")&&c("false")),z.startsWith(e.startTime.toString()+","+(e.keys+10).toString())&&z.endsWith("misslost")&&c("false")});let F=e.hitobject.scrollPosList[T],O=e.hitobject.scrollPosList[T+1]!=null?e.hitobject.scrollPosList[T+1]:F;O!=null&&Z>O[0]&&(P(T+1),F=e.hitobject.scrollPosList[T],O=e.hitobject.scrollPosList[T+1]!=null?e.hitobject.scrollPosList[T+1]:F),p=="true"?(a(1),y(Eo(Z,[h,h+1e3],[1,0])),x(Eo(Z,[h,h+1e3],[2,2.5])),w(kr(Z,[h+100,h+1e3],[.3,0],!0))):p=="false"&&(a(.1),a(1),y(0),x(2.5),w(0)),O!=null&&n(me-Le-kr(Z,[F[0],O[0]],[F[1],O[1]])),Z>=e.endTime&&a(0)}}),A(Me,{children:f&&V(Me,{children:[A(he.exports.Sprite,{texture:le.WHITE,x:D-je/2+ke*(e.keys-1)+ke*.05,y:p=="true"?me-Le:r,anchor:[0,1],width:ke*.9,height:p=="true"?Math.round(t.current-(r-me)-Le):t.current,alpha:Math.round(t.current-(r-me)-Le)!=0?o:0,tint:K}),A(he.exports.Sprite,{texture:le.WHITE,tint:"white",x:D-je/2+ke*(e.keys-1),y:p=="true"?me-Le:r,anchor:[0,1],width:1,height:p=="true"?Math.round(t.current-(r-me)-Le):t.current,alpha:Math.round(t.current-(r-me)-Le)!=0?o:0}),A(he.exports.Sprite,{texture:le.WHITE,tint:"white",x:D-je/2+ke*e.keys,y:p=="true"?me-Le:r,anchor:[1,1],width:1,height:p=="true"?Math.round(t.current-(r-me)-Le):t.current,alpha:Math.round(t.current-(r-me)-Le)!=0?o:0}),A(he.exports.Sprite,{texture:le.WHITE,tint:"white",x:D-je/2+(ke*(e.keys-1)+ke/2),y:p=="true"?me-Le:r,blendMode:ye.ADD,anchor:[.5,1],width:2,height:p=="true"?Math.round(t.current-(r-me)-Le):t.current,alpha:Math.round(t.current-(r-me)-Le)!=0?o:0}),e.game.currenttime<e.visibleend+1e3&&V(he.exports.Container,{alpha:1,children:[A(he.exports.Sprite,{image:ST,x:D-je/2+ke*(e.keys-1)+ke/2,y:me-Le,blendMode:ye.ADD,tint:U,anchor:[.5,1],width:ke*v,height:ke*8,alpha:v}),A(he.exports.Sprite,{image:A1,x:D-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:U,width:ke,height:Di*1.5,alpha:v}),A(he.exports.Sprite,{image:k1,x:D-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:U,width:ke*E,height:ke*E,alpha:_}),A(he.exports.Sprite,{image:Cf,x:D-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:U,width:ke*4,alpha:v}),A(he.exports.Sprite,{image:ET,x:D-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:U,width:ke*v*10,height:ke*v*10,alpha:v})]})]})})}let po=-1,CT=-1,AT="miss",Yl="miss",mo=0;function em(e,t,r){switch(po=e,CT=e,AT=t,t){case"perfect":Yl="X-PHASED";break;case"great":Yl="PHASED";break;case"bad":Yl="MIS-PHASED";break;case"miss":Yl="ERROR";break}mo=r}function dM(e){return new Wu(e,new Jt({fill:16721594,dropShadow:!0,dropShadowBlur:0,dropShadowDistance:0,dropShadowColor:16777215,fontFamily:"Courier New",fontSize:25,fontVariant:"small-caps",trim:!1}))}function fM(e){he.exports.useApp(),Y.exports.useState(0);const[t,r]=Y.exports.useState(0),n=[16735838,16775774,6225761,6225914,8806143,16735978],[i,s]=Y.exports.useState(0),[o,a]=Y.exports.useState(0),[h,d]=Y.exports.useState(0);return he.exports.useTick(()=>{if(e.game.mode=="play"){const p=e.game.currenttime;if(po!=-1){switch(p>po+1e3&&(po=-1),AT){case"perfect":r(Math.round(Math.random()*(n.length-1)));break;case"great":r(1);break;case"miss":r(0);break;case"bad":r(4)}d(Eo(p,[po,po+300],[1.2,1])),s(p<po+1e3?1:0),a(p<CT+1e3?1:0)}}}),V(Me,{children:[A(he.exports.Text,{text:`${Math.round(e.game.score/e.game.maxscore*100)} %`,x:be-10,y:20,anchor:[1,0],style:new Jt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${be*.02}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${Yl.toUpperCase()} ${e.game.combo}`,anchor:[.5,.5],x:be/2,y:me*.3,alpha:i,tint:n[t],style:new Jt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${be*.018}px`,align:"left",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:0,dropShadowColor:"black"})}),A(he.exports.Text,{text:`${e.game.combo}`,anchor:[.5,.5],x:be/2,y:me*.05,alpha:1,style:new Jt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${be*.015}px`,align:"left"})}),A(he.exports.Sprite,{image:Cf,anchor:[.5,.5],x:be/2,width:be*.1,y:me*.3,alpha:i*.5,blendMode:ye.ADD,tint:n[t],scale:[3/h,3/h]}),A(he.exports.Text,{text:`${mo>20?"Late":mo<-20?"Early":""} ${Math.abs(mo)>20?`(${Math.round(mo*10)/10}ms)`:""}`,anchor:[.5,.5],x:be/2,y:me*.35,alpha:o,tint:mo>20?14907970:(mo<-20,5111771),style:new Jt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${be*.008}px`,align:"left",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:0,dropShadowColor:"black"})})]})}Xn.from(le.WHITE);dM("");function pM(e){let[t,r]=Y.exports.useState(!1),[n,i]=Y.exports.useState(!0);const[s,o]=Y.exports.useState(-Di),[a,h]=Y.exports.useState(1),[d,p]=Y.exports.useState(0),[c,f]=Y.exports.useState(0),[m,v]=Y.exports.useState(0),[y,E]=Y.exports.useState(-1),[x,_]=Y.exports.useState(!1),[w,T]=Y.exports.useState(16777215),[P,I]=Y.exports.useState(0);let R=wT[e.keys-1];e.color||(R=16777215);let M=e.game.beatmap.cursor.filter(K=>K.startTime<=e.startTime)[e.game.beatmap.cursor.filter(K=>K.startTime<=e.startTime).length-1],N=e.game.beatmap.cursor.filter(K=>K.startTime>e.startTime)[0],k=M!=null?M.x:.5,L=N!=null?N.x:M.x,W=M!=null?M.startTime:0,D=N!=null?N.startTime:M.startTime;const U=go(e.startTime,[W,D],[k,L],M.type);let X=be/2-an/2+U*an;return he.exports.useTick(()=>{const K=e.game.currenttime;_(K>=e.visiblestart&&K<=e.visibleend),i(K<=e.visibleend+2e3)}),he.exports.useTick(()=>{let K=e.game.isPlaying;const Z=e.game.currenttime;if(x&&n&&(e.game.hitlist.length>0?e.game.hitlist.forEach(F=>{F.startsWith(e.startTime.toString()+","+e.keys.toString())&&y==-1&&(r(!0),T(F.split(",")[2]=="perfect"?16735978:F.split(",")[2]=="great"?16775774:F.split(",")[2]=="miss"?16711680:16777215),E(Z))}):(r(!1),E(-1))),K&&n&&Z>=e.visiblestart&&Z<=e.visibleend+1e3)if(t)w!=16711680?h(0):h(Eo(Z,[y,y+500],[1,0])),p(Eo(Z,[y,y+500],[1,0])),f(Eo(Z,[y,y+500],[2,2.5])),v(kr(Z,[y+100,y+500],[.3,0],!0));else{let F=e.hitobject.scrollPosList[P],O=e.hitobject.scrollPosList[P+1]!=null?e.hitobject.scrollPosList[P+1]:F;O==null&&(O=F),Z>O[0]&&e.hitobject.scrollPosList[P+1]!=null&&(I(P+1),F=e.hitobject.scrollPosList[P],O=e.hitobject.scrollPosList[P+1]!=null?e.hitobject.scrollPosList[P+1]:F),o(me-Le-kr(Z,[F[0],O[0]],[F[1],O[1]]))}}),V(Me,{children:[x?V(Me,{children:[A(he.exports.Sprite,{texture:le.WHITE,tint:R,x:X-je/2+ke*(e.keys-1)+ke*.05,y:s,anchor:[0,1],width:ke*.9,height:Di,alpha:a}),A(he.exports.Sprite,{texture:le.WHITE,tint:"white",x:X-je/2+ke*(e.keys-1)-2,y:s,anchor:[0,1],width:2,height:Di,alpha:a}),A(he.exports.Sprite,{texture:le.WHITE,tint:"white",x:X-je/2+ke*e.keys+2,y:s,anchor:[1,1],width:2,height:Di,alpha:a})]}):null,e.game.currenttime<e.visibleend+1e3&&V(Me,{children:[A(he.exports.Sprite,{image:ST,x:X-je/2+ke*(e.keys-1)+ke/2,y:me-Le,tint:w,anchor:[.5,1],width:ke*d,height:ke*8,alpha:d}),A(he.exports.Sprite,{texture:le.WHITE,tint:w,x:X-je/2+ke*(e.keys-1),y:kr(d,[0,1],[me-Le-me*.3,me-Le]),anchor:[0,1],width:ke,height:Di,alpha:d*.4}),A(he.exports.Sprite,{image:A1,x:X-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],tint:w,width:ke,height:Di*1.5,alpha:d}),A(he.exports.Sprite,{image:k1,x:X-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:w,width:ke*c,height:ke*c,alpha:m}),A(he.exports.Sprite,{image:Cf,x:X-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],tint:w,width:ke*4,alpha:d}),A(he.exports.Sprite,{image:ET,x:X-je/2+ke*(e.keys-1)+ke/2,y:me-Le,anchor:[.5,.5],tint:w,width:ke*d*10,height:ke*d*10,alpha:d})]})]})}var hr={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var f=this||r;if(c=parseFloat(c),f.ctx||p(),typeof c<"u"&&c>=0&&c<=1){if(f._volume=c,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var v=f._howls[m]._getSoundIds(),y=0;y<v.length;y++){var E=f._howls[m]._soundById(v[y]);E&&E._node&&(E._node.volume=E._volume*c)}return f}return f._volume},mute:function(c){var f=this||r;f.ctx||p(),f._muted=c,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(c?0:f._volume,r.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var v=f._howls[m]._getSoundIds(),y=0;y<v.length;y++){var E=f._howls[m]._soundById(v[y]);E&&E._node&&(E._node.muted=c?!0:E._muted)}return f},stop:function(){for(var c=this||r,f=0;f<c._howls.length;f++)c._howls[f].stop();return c},unload:function(){for(var c=this||r,f=c._howls.length-1;f>=0;f--)c._howls[f].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,p()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var f=new Audio;f.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return c}if(!f||typeof f.canPlayType!="function")return c;var m=f.canPlayType("audio/mpeg;").replace(/^no$/,""),v=c._navigator?c._navigator.userAgent:"",y=v.match(/OPR\/(\d+)/g),E=y&&parseInt(y[0].split("/")[1],10)<33,x=v.indexOf("Safari")!==-1&&v.indexOf("Chrome")===-1,_=v.match(/Version\/(.*?) /),w=x&&_&&parseInt(_[1],10)<15;return c._codecs={mp3:!!(!E&&(m||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!m,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var f=function(m){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var v=new Audio;v._unlocked=!0,c._releaseHtml5Audio(v)}catch{c.noAudio=!0;break}for(var y=0;y<c._howls.length;y++)if(!c._howls[y]._webAudio)for(var E=c._howls[y]._getSoundIds(),x=0;x<E.length;x++){var _=c._howls[y]._soundById(E[x]);_&&_._node&&!_._node._unlocked&&(_._node._unlocked=!0,_._node.load())}c._autoResume();var w=c.ctx.createBufferSource();w.buffer=c._scratchBuffer,w.connect(c.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),w.onended=function(){w.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var T=0;T<c._howls.length;T++)c._howls[T]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var f=this||r;return c._unlocked&&f._html5AudioPool.push(c),f},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var f=0;f<c._howls.length;f++)if(c._howls[f]._webAudio){for(var m=0;m<c._howls[f]._sounds.length;m++)if(!c._howls[f]._sounds[m]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(!!c.autoSuspend){c._suspendTimer=null,c.state="suspending";var v=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(v,v)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var f=0;f<c._howls.length;f++)c._howls[f]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,n=function(c){var f=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(c)};n.prototype={init:function(c){var f=this;return r.ctx||p(),f._autoplay=c.autoplay||!1,f._format=typeof c.format!="string"?c.format:[c.format],f._html5=c.html5||!1,f._muted=c.mute||!1,f._loop=c.loop||!1,f._pool=c.pool||5,f._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,f._rate=c.rate||1,f._sprite=c.sprite||{},f._src=typeof c.src!="string"?c.src:[c.src],f._volume=c.volume!==void 0?c.volume:1,f._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=c.onend?[{fn:c.onend}]:[],f._onfade=c.onfade?[{fn:c.onfade}]:[],f._onload=c.onload?[{fn:c.onload}]:[],f._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],f._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],f._onpause=c.onpause?[{fn:c.onpause}]:[],f._onplay=c.onplay?[{fn:c.onplay}]:[],f._onstop=c.onstop?[{fn:c.onstop}]:[],f._onmute=c.onmute?[{fn:c.onmute}]:[],f._onvolume=c.onvolume?[{fn:c.onvolume}]:[],f._onrate=c.onrate?[{fn:c.onrate}]:[],f._onseek=c.onseek?[{fn:c.onseek}]:[],f._onunlock=c.onunlock?[{fn:c.onunlock}]:[],f._onresume=[],f._webAudio=r.usingWebAudio&&!f._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var c=this,f=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var m=0;m<c._src.length;m++){var v,y;if(c._format&&c._format[m])v=c._format[m];else{if(y=c._src[m],typeof y!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}v=/^data:audio\/([^;,]+);/i.exec(y),v||(v=/\.([^.]+)$/.exec(y.split("?",1)[0])),v&&(v=v[1].toLowerCase())}if(v||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),v&&r.codecs(v)){f=c._src[m];break}}if(!f){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=f,c._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&o(c),c},play:function(c,f){var m=this,v=null;if(typeof c=="number")v=c,c=null;else{if(typeof c=="string"&&m._state==="loaded"&&!m._sprite[c])return null;if(typeof c>"u"&&(c="__default",!m._playLock)){for(var y=0,E=0;E<m._sounds.length;E++)m._sounds[E]._paused&&!m._sounds[E]._ended&&(y++,v=m._sounds[E]._id);y===1?c=null:v=null}}var x=v?m._soundById(v):m._inactiveSound();if(!x)return null;if(v&&!c&&(c=x._sprite||"__default"),m._state!=="loaded"){x._sprite=c,x._ended=!1;var _=x._id;return m._queue.push({event:"play",action:function(){m.play(_)}}),_}if(v&&!x._paused)return f||m._loadQueue("play"),x._id;m._webAudio&&r._autoResume();var w=Math.max(0,x._seek>0?x._seek:m._sprite[c][0]/1e3),T=Math.max(0,(m._sprite[c][0]+m._sprite[c][1])/1e3-w),P=T*1e3/Math.abs(x._rate),I=m._sprite[c][0]/1e3,R=(m._sprite[c][0]+m._sprite[c][1])/1e3;x._sprite=c,x._ended=!1;var M=function(){x._paused=!1,x._seek=w,x._start=I,x._stop=R,x._loop=!!(x._loop||m._sprite[c][2])};if(w>=R){m._ended(x);return}var N=x._node;if(m._webAudio){var k=function(){m._playLock=!1,M(),m._refreshBuffer(x);var U=x._muted||m._muted?0:x._volume;N.gain.setValueAtTime(U,r.ctx.currentTime),x._playStart=r.ctx.currentTime,typeof N.bufferSource.start>"u"?x._loop?N.bufferSource.noteGrainOn(0,w,86400):N.bufferSource.noteGrainOn(0,w,T):x._loop?N.bufferSource.start(0,w,86400):N.bufferSource.start(0,w,T),P!==1/0&&(m._endTimers[x._id]=setTimeout(m._ended.bind(m,x),P)),f||setTimeout(function(){m._emit("play",x._id),m._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?k():(m._playLock=!0,m.once("resume",k),m._clearTimer(x._id))}else{var L=function(){N.currentTime=w,N.muted=x._muted||m._muted||r._muted||N.muted,N.volume=x._volume*r.volume(),N.playbackRate=x._rate;try{var U=N.play();if(U&&typeof Promise<"u"&&(U instanceof Promise||typeof U.then=="function")?(m._playLock=!0,M(),U.then(function(){m._playLock=!1,N._unlocked=!0,f?m._loadQueue():m._emit("play",x._id)}).catch(function(){m._playLock=!1,m._emit("playerror",x._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),x._ended=!0,x._paused=!0})):f||(m._playLock=!1,M(),m._emit("play",x._id)),N.playbackRate=x._rate,N.paused){m._emit("playerror",x._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||x._loop?m._endTimers[x._id]=setTimeout(m._ended.bind(m,x),P):(m._endTimers[x._id]=function(){m._ended(x),N.removeEventListener("ended",m._endTimers[x._id],!1)},N.addEventListener("ended",m._endTimers[x._id],!1))}catch(X){m._emit("playerror",x._id,X)}};N.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(N.src=m._src,N.load());var W=window&&window.ejecta||!N.readyState&&r._navigator.isCocoonJS;if(N.readyState>=3||W)L();else{m._playLock=!0,m._state="loading";var D=function(){m._state="loaded",L(),N.removeEventListener(r._canPlayEvent,D,!1)};N.addEventListener(r._canPlayEvent,D,!1),m._clearTimer(x._id)}}return x._id},pause:function(c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(c)}}),f;for(var m=f._getSoundIds(c),v=0;v<m.length;v++){f._clearTimer(m[v]);var y=f._soundById(m[v]);if(y&&!y._paused&&(y._seek=f.seek(m[v]),y._rateSeek=0,y._paused=!0,f._stopFade(m[v]),y._node))if(f._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||f._emit("pause",y?y._id:null)}return f},stop:function(c,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"stop",action:function(){m.stop(c)}}),m;for(var v=m._getSoundIds(c),y=0;y<v.length;y++){m._clearTimer(v[y]);var E=m._soundById(v[y]);E&&(E._seek=E._start||0,E._rateSeek=0,E._paused=!0,E._ended=!0,m._stopFade(v[y]),E._node&&(m._webAudio?E._node.bufferSource&&(typeof E._node.bufferSource.stop>"u"?E._node.bufferSource.noteOff(0):E._node.bufferSource.stop(0),m._cleanBuffer(E._node)):(!isNaN(E._node.duration)||E._node.duration===1/0)&&(E._node.currentTime=E._start||0,E._node.pause(),E._node.duration===1/0&&m._clearSound(E._node))),f||m._emit("stop",E._id))}return m},mute:function(c,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"mute",action:function(){m.mute(c,f)}}),m;if(typeof f>"u")if(typeof c=="boolean")m._muted=c;else return m._muted;for(var v=m._getSoundIds(f),y=0;y<v.length;y++){var E=m._soundById(v[y]);E&&(E._muted=c,E._interval&&m._stopFade(E._id),m._webAudio&&E._node?E._node.gain.setValueAtTime(c?0:E._volume,r.ctx.currentTime):E._node&&(E._node.muted=r._muted?!0:c),m._emit("mute",E._id))}return m},volume:function(){var c=this,f=arguments,m,v;if(f.length===0)return c._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var y=c._getSoundIds(),E=y.indexOf(f[0]);E>=0?v=parseInt(f[0],10):m=parseFloat(f[0])}else f.length>=2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));var x;if(typeof m<"u"&&m>=0&&m<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,f)}}),c;typeof v>"u"&&(c._volume=m),v=c._getSoundIds(v);for(var _=0;_<v.length;_++)x=c._soundById(v[_]),x&&(x._volume=m,f[2]||c._stopFade(v[_]),c._webAudio&&x._node&&!x._muted?x._node.gain.setValueAtTime(m,r.ctx.currentTime):x._node&&!x._muted&&(x._node.volume=m*r.volume()),c._emit("volume",x._id))}else return x=v?c._soundById(v):c._sounds[0],x?x._volume:0;return c},fade:function(c,f,m,v){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(c,f,m,v)}}),y;c=Math.min(Math.max(0,parseFloat(c)),1),f=Math.min(Math.max(0,parseFloat(f)),1),m=parseFloat(m),y.volume(c,v);for(var E=y._getSoundIds(v),x=0;x<E.length;x++){var _=y._soundById(E[x]);if(_){if(v||y._stopFade(E[x]),y._webAudio&&!_._muted){var w=r.ctx.currentTime,T=w+m/1e3;_._volume=c,_._node.gain.setValueAtTime(c,w),_._node.gain.linearRampToValueAtTime(f,T)}y._startFadeInterval(_,c,f,m,E[x],typeof v>"u")}}return y},_startFadeInterval:function(c,f,m,v,y,E){var x=this,_=f,w=m-f,T=Math.abs(w/.01),P=Math.max(4,T>0?v/T:v),I=Date.now();c._fadeTo=m,c._interval=setInterval(function(){var R=(Date.now()-I)/v;I=Date.now(),_+=w*R,_=Math.round(_*100)/100,w<0?_=Math.max(m,_):_=Math.min(m,_),x._webAudio?c._volume=_:x.volume(_,c._id,!0),E&&(x._volume=_),(m<f&&_<=m||m>f&&_>=m)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,x.volume(m,c._id),x._emit("fade",c._id))},P)},_stopFade:function(c){var f=this,m=f._soundById(c);return m&&m._interval&&(f._webAudio&&m._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(m._interval),m._interval=null,f.volume(m._fadeTo,c),m._fadeTo=null,f._emit("fade",c)),f},loop:function(){var c=this,f=arguments,m,v,y;if(f.length===0)return c._loop;if(f.length===1)if(typeof f[0]=="boolean")m=f[0],c._loop=m;else return y=c._soundById(parseInt(f[0],10)),y?y._loop:!1;else f.length===2&&(m=f[0],v=parseInt(f[1],10));for(var E=c._getSoundIds(v),x=0;x<E.length;x++)y=c._soundById(E[x]),y&&(y._loop=m,c._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=m,m&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,c.playing(E[x])&&(c.pause(E[x],!0),c.play(E[x],!0)))));return c},rate:function(){var c=this,f=arguments,m,v;if(f.length===0)v=c._sounds[0]._id;else if(f.length===1){var y=c._getSoundIds(),E=y.indexOf(f[0]);E>=0?v=parseInt(f[0],10):m=parseFloat(f[0])}else f.length===2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));var x;if(typeof m=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,f)}}),c;typeof v>"u"&&(c._rate=m),v=c._getSoundIds(v);for(var _=0;_<v.length;_++)if(x=c._soundById(v[_]),x){c.playing(v[_])&&(x._rateSeek=c.seek(v[_]),x._playStart=c._webAudio?r.ctx.currentTime:x._playStart),x._rate=m,c._webAudio&&x._node&&x._node.bufferSource?x._node.bufferSource.playbackRate.setValueAtTime(m,r.ctx.currentTime):x._node&&(x._node.playbackRate=m);var w=c.seek(v[_]),T=(c._sprite[x._sprite][0]+c._sprite[x._sprite][1])/1e3-w,P=T*1e3/Math.abs(x._rate);(c._endTimers[v[_]]||!x._paused)&&(c._clearTimer(v[_]),c._endTimers[v[_]]=setTimeout(c._ended.bind(c,x),P)),c._emit("rate",x._id)}}else return x=c._soundById(v),x?x._rate:c._rate;return c},seek:function(){var c=this,f=arguments,m,v;if(f.length===0)c._sounds.length&&(v=c._sounds[0]._id);else if(f.length===1){var y=c._getSoundIds(),E=y.indexOf(f[0]);E>=0?v=parseInt(f[0],10):c._sounds.length&&(v=c._sounds[0]._id,m=parseFloat(f[0]))}else f.length===2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));if(typeof v>"u")return 0;if(typeof m=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,f)}}),c;var x=c._soundById(v);if(x)if(typeof m=="number"&&m>=0){var _=c.playing(v);_&&c.pause(v,!0),x._seek=m,x._ended=!1,c._clearTimer(v),!c._webAudio&&x._node&&!isNaN(x._node.duration)&&(x._node.currentTime=m);var w=function(){_&&c.play(v,!0),c._emit("seek",v)};if(_&&!c._webAudio){var T=function(){c._playLock?setTimeout(T,0):w()};setTimeout(T,0)}else w()}else if(c._webAudio){var P=c.playing(v)?r.ctx.currentTime-x._playStart:0,I=x._rateSeek?x._rateSeek-x._seek:0;return x._seek+(I+P*Math.abs(x._rate))}else return x._node.currentTime;return c},playing:function(c){var f=this;if(typeof c=="number"){var m=f._soundById(c);return m?!m._paused:!1}for(var v=0;v<f._sounds.length;v++)if(!f._sounds[v]._paused)return!0;return!1},duration:function(c){var f=this,m=f._duration,v=f._soundById(c);return v&&(m=f._sprite[v._sprite][1]/1e3),m},state:function(){return this._state},unload:function(){for(var c=this,f=c._sounds,m=0;m<f.length;m++)f[m]._paused||c.stop(f[m]._id),c._webAudio||(c._clearSound(f[m]._node),f[m]._node.removeEventListener("error",f[m]._errorFn,!1),f[m]._node.removeEventListener(r._canPlayEvent,f[m]._loadFn,!1),f[m]._node.removeEventListener("ended",f[m]._endFn,!1),r._releaseHtml5Audio(f[m]._node)),delete f[m]._node,c._clearTimer(f[m]._id);var v=r._howls.indexOf(c);v>=0&&r._howls.splice(v,1);var y=!0;for(m=0;m<r._howls.length;m++)if(r._howls[m]._src===c._src||c._src.indexOf(r._howls[m]._src)>=0){y=!1;break}return s&&y&&delete s[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,f,m,v){var y=this,E=y["_on"+c];return typeof f=="function"&&E.push(v?{id:m,fn:f,once:v}:{id:m,fn:f}),y},off:function(c,f,m){var v=this,y=v["_on"+c],E=0;if(typeof f=="number"&&(m=f,f=null),f||m)for(E=0;E<y.length;E++){var x=m===y[E].id;if(f===y[E].fn&&x||!f&&x){y.splice(E,1);break}}else if(c)v["_on"+c]=[];else{var _=Object.keys(v);for(E=0;E<_.length;E++)_[E].indexOf("_on")===0&&Array.isArray(v[_[E]])&&(v[_[E]]=[])}return v},once:function(c,f,m){var v=this;return v.on(c,f,m,1),v},_emit:function(c,f,m){for(var v=this,y=v["_on"+c],E=y.length-1;E>=0;E--)(!y[E].id||y[E].id===f||c==="load")&&(setTimeout(function(x){x.call(this,f,m)}.bind(v,y[E].fn),0),y[E].once&&v.off(c,y[E].fn,y[E].id));return v._loadQueue(c),v},_loadQueue:function(c){var f=this;if(f._queue.length>0){var m=f._queue[0];m.event===c&&(f._queue.shift(),f._loadQueue()),c||m.action()}return f},_ended:function(c){var f=this,m=c._sprite;if(!f._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(f._ended.bind(f,c),100),f;var v=!!(c._loop||f._sprite[m][2]);if(f._emit("end",c._id),!f._webAudio&&v&&f.stop(c._id,!0).play(c._id),f._webAudio&&v){f._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var y=(c._stop-c._start)*1e3/Math.abs(c._rate);f._endTimers[c._id]=setTimeout(f._ended.bind(f,c),y)}return f._webAudio&&!v&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,f._clearTimer(c._id),f._cleanBuffer(c._node),r._autoSuspend()),!f._webAudio&&!v&&f.stop(c._id,!0),f},_clearTimer:function(c){var f=this;if(f._endTimers[c]){if(typeof f._endTimers[c]!="function")clearTimeout(f._endTimers[c]);else{var m=f._soundById(c);m&&m._node&&m._node.removeEventListener("ended",f._endTimers[c],!1)}delete f._endTimers[c]}return f},_soundById:function(c){for(var f=this,m=0;m<f._sounds.length;m++)if(c===f._sounds[m]._id)return f._sounds[m];return null},_inactiveSound:function(){var c=this;c._drain();for(var f=0;f<c._sounds.length;f++)if(c._sounds[f]._ended)return c._sounds[f].reset();return new i(c)},_drain:function(){var c=this,f=c._pool,m=0,v=0;if(!(c._sounds.length<f)){for(v=0;v<c._sounds.length;v++)c._sounds[v]._ended&&m++;for(v=c._sounds.length-1;v>=0;v--){if(m<=f)return;c._sounds[v]._ended&&(c._webAudio&&c._sounds[v]._node&&c._sounds[v]._node.disconnect(0),c._sounds.splice(v,1),m--)}}},_getSoundIds:function(c){var f=this;if(typeof c>"u"){for(var m=[],v=0;v<f._sounds.length;v++)m.push(f._sounds[v]._id);return m}else return[c]},_refreshBuffer:function(c){var f=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=s[f._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),f},_cleanBuffer:function(c){var f=this,m=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return f;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),m))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,f},_clearSound:function(c){var f=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);f||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,f=c._parent;return c._muted=f._muted,c._loop=f._loop,c._volume=f._volume,c._rate=f._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,f._sounds.push(c),c.create(),c},create:function(){var c=this,f=c._parent,m=r._muted||c._muted||c._parent._muted?0:c._volume;return f._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(m,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=f._src,c._node.preload=f._preload===!0?"auto":f._preload,c._node.volume=m*r.volume(),c._node.load()),c},reset:function(){var c=this,f=c._parent;return c._muted=f._muted,c._loop=f._loop,c._volume=f._volume,c._rate=f._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,f=c._parent;f._duration=Math.ceil(c._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,f=c._parent;f._duration===1/0&&(f._duration=Math.ceil(c._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},o=function(c){var f=c._src;if(s[f]){c._duration=s[f].duration,d(c);return}if(/^data:[^;]+;base64,/.test(f)){for(var m=atob(f.split(",")[1]),v=new Uint8Array(m.length),y=0;y<m.length;++y)v[y]=m.charCodeAt(y);h(v.buffer,c)}else{var E=new XMLHttpRequest;E.open(c._xhr.method,f,!0),E.withCredentials=c._xhr.withCredentials,E.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(x){E.setRequestHeader(x,c._xhr.headers[x])}),E.onload=function(){var x=(E.status+"")[0];if(x!=="0"&&x!=="2"&&x!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+E.status+".");return}h(E.response,c)},E.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[f],c.load())},a(E)}},a=function(c){try{c.send()}catch{c.onerror()}},h=function(c,f){var m=function(){f._emit("loaderror",null,"Decoding audio data failed.")},v=function(y){y&&f._sounds.length>0?(s[f._src]=y,d(f,y)):m()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(v).catch(m):r.ctx.decodeAudioData(c,v,m)},d=function(c,f){f&&!c._duration&&(c._duration=f.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},p=function(){if(!!r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),f=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=f?parseInt(f[1],10):null;if(c&&m&&m<9){var v=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!v&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};e.Howler=r,e.Howl=n,typeof Ne<"u"?(Ne.HowlerGlobal=t,Ne.Howler=r,Ne.Howl=n,Ne.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof r=="number")s._pos=[r,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,n,i,s,o,a){var h=this;if(!h.ctx||!h.ctx.listener)return h;var d=h._orientation;if(n=typeof n!="number"?d[1]:n,i=typeof i!="number"?d[2]:i,s=typeof s!="number"?d[3]:s,o=typeof o!="number"?d[4]:o,a=typeof a!="number"?d[5]:a,typeof r=="number")h._orientation=[r,n,i,s,o,a],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(r,n,i,s,o,a);else return d;return h},Howl.prototype.init=function(r){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(r,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")i._stereo=r,i._pos=[r,0,0];else return i._stereo;for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var h=i._soundById(o[a]);if(h)if(typeof r=="number")h._stereo=r,h._pos=[r,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&t(h,s),s==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(r,0,0):h._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),i._emit("stereo",h._id);else return h._stereo}return i},Howl.prototype.pos=function(r,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof r=="number")o._pos=[r,n,i];else return o._pos;for(var a=o._getSoundIds(s),h=0;h<a.length;h++){var d=o._soundById(a[h]);if(d)if(typeof r=="number")d._pos=[r,n,i],d._node&&((!d._panner||d._panner.pan)&&t(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):d._panner.setPosition(r,n,i)),o._emit("pos",d._id);else return d._pos}return o},Howl.prototype.orientation=function(r,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof r=="number")o._orientation=[r,n,i];else return o._orientation;for(var a=o._getSoundIds(s),h=0;h<a.length;h++){var d=o._soundById(a[h]);if(d)if(typeof r=="number")d._orientation=[r,n,i],d._node&&(d._panner||(d._pos||(d._pos=o._pos||[0,0,-.5]),t(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):d._panner.setOrientation(r,n,i)),o._emit("orientation",d._id);else return d._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,i,s,o;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),r._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(n[0],10)),o?o._pannerAttr:r._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var a=r._getSoundIds(s),h=0;h<a.length;h++)if(o=r._soundById(a[h]),o){var d=o._pannerAttr;d={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:d.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:d.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:d.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:d.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:d.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:d.panningModel};var p=o._panner;p||(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"),p=o._panner),p.coneInnerAngle=d.coneInnerAngle,p.coneOuterAngle=d.coneOuterAngle,p.coneOuterGain=d.coneOuterGain,p.distanceModel=d.distanceModel,p.maxDistance=d.maxDistance,p.refDistance=d.refDistance,p.rolloffFactor=d.rolloffFactor,p.panningModel=d.panningModel}return r},Sound.prototype.init=function(r){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,r.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var t=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(hr);const _v=200,mM=40,Qb=80,tm=_v;new hr.Howl({src:["audio/tap.wav"],preload:!0,volume:.1});function gM(e){const r=Y.exports.useRef(0),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0);e.hitObjects;let a=e.hitObjects.filter(h=>h.type=="hold"&&h.column==e.i&&h.ticks?.length!=0).sort((h,d)=>h.startTime-d.startTime);return he.exports.useApp().stage,he.exports.useTick(()=>{if(e.game.audio.playing()){const d=e.game.audio.seek()*1e3;if(e.game.mode=="play"){const p=e.hitObjects[r.current],c=d+0;if(p){const{startTime:m}=p,v=Math.abs(m-c);if(e.game.key[e.i-1][0]=="1"&&v<=_v){let y="";v<=mM&&v<=tm?y="perfect":v<=Qb&&v<=tm?y="great":v>=Qb&&v<=tm&&(y="miss"),p.type=="hold"?e.game.hit("perfect",m,e.i,m-c):e.game.hit(y,m,e.i,v),e.game.key[e.i-1]="01",r.current++}p&&d>p.startTime+_v&&(e.game.miss(d,e.i),r.current++)}(async()=>{const m=a[s];if(m){const y=m.ticks[n];d>=y-20&&(e.game.key[e.i-1][1]=="1"?(e.game.hit("perfect",y,e.i+10,0),i(n+1)):d>=y+20&&(e.game.miss(y,e.i+10),i(n+1)),n+1==m.ticks?.length&&(o(s+1),i(0)))}})()}}}),null}function vM(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function xM(e){const t=vM("TOGGLECOLOR");if(e.hitObjects.length==0)return null;var r=e.game.mode=="edit"?be/4:be/2;let n=e.i==1?r-je/2:e.i==2||e.i==3?r:r+je/2;return A(Me,{children:V(he.exports.Container,{position:[0,0],children:[A(gM,{hitObjects:e.hitObjects,timingPoints:e.timingPoints,game:e.game,i:e.i}),e.hitObjects.map((i,s)=>{if(i.type=="note")return A(pM,{x:n,startTime:i.startTime,keys:e.i,i:s,hitobject:i,visibleend:i.screenEndTime,visiblestart:i.screenStartTime,game:e.game,color:t=="True",cursorx:e.game.beatmap.cursor.filter(o=>o.startTime<=i.startTime)[0]!=null?e.game.beatmap.cursor.filter(o=>o.startTime<=i.startTime).sort((o,a)=>o.startTime-a.startTime).reverse()[0].x:.5},s)}),e.hitObjects.map((i,s)=>{if(i.type=="hold")return A(hM,{x:n,hitobject:i,visibleend:i.screenEndTime,visiblestart:i.screenStartTime,startTime:i.startTime,endTime:i.endTime,timingPoint:e.timingPoints.filter(o=>o.time<=i.startTime).sort((o,a)=>a.time-o.time)[0],keys:e.i,color:t=="True",i:s,game:e.game},s)})]})})}const ia=200;new hr.Howl({src:["audio/normal-hitnormal.wav"],preload:!0,volume:.1});function yM(e){const[t,r]=Y.exports.useState(0),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0);he.exports.useApp(),Y.exports.useState(0),e.game.playStartTime;const a=e.cursors.filter(p=>p.type!="normal"&&p.ticks?.length!=0).sort((p,c)=>p.startTime-c.startTime),h=e.cursors.sort((p,c)=>p.startTime-c.startTime).filter((p,c)=>(e.game.beatmap.cursor[c-1]!=null?e.game.beatmap.cursor[c-1].x:.5)!=p.x),d=Y.exports.useMemo(()=>h[n],[n]);return he.exports.useTick(()=>{if(e.game.playStartTime,e.game.isPlaying){const f=e.game.currenttime;if(e.game.mode=="play"){const m=n!=0?h[n-1].x:.5;if(d!=null){if(m==d.x)i(n+1);else if(f>d.startTime+ia){var c=async()=>{i(n+1),m!=d.x&&e.game.miss(d.startTime,5)};c()}if(m>d.x&&e.game.key[4]=="10"||m<d.x&&e.game.key[4]=="01"){const y=f>=d.startTime-ia||f>=d.startTime+ia?d:void 0;y&&Math.abs(y.startTime-f)<=ia&&(e.game.hit("perfect",d.startTime,5,0),i(n+1))}}(async()=>{const y=a[s];if(y){e.game.beatmap.timingPoints.find(_=>y.startTime>=_.time);const x=y.ticks[t];x==null?(o(s+1),r(0)):f>=x-ia&&(m>d.x&&e.game.key[4]=="10"||m<d.x&&e.game.key[4]=="01"?(e.game.hit("perfect",x,7,0),r(t+1)):f>=x+ia&&(e.game.miss(x,7),r(t+1)),t+1==y.ticks?.length&&(o(s+1),r(0)))}})()}}}),null}function _M(e){e.beatmap.cursor=Y.exports.useRef(e.beatmap.cursor.sort((F,O)=>F.startTime-O.startTime)).current;let t=e.beatmap.cursor[e.i]?e.beatmap.cursor[e.i].startTime:0,r=e.beatmap.cursor[e.i]!=null?e.beatmap.cursor[e.i].x:.5,n=e.beatmap.cursor[e.i-1]!=null?e.beatmap.cursor[e.i-1].x:.5,i=e.beatmap.cursor[e.i-1]!=null?e.beatmap.cursor[e.i-1].type:"normal",s=e.beatmap.cursor[e.i+1]!=null?e.beatmap.cursor[e.i+1].x:.5;const o=e.x;let a=e.beatmap.cursor[e.i+1]?e.beatmap.cursor[e.i+1].startTime:e.game.duration;const h=Y.exports.useRef(Math.round(Rt(t,a,e.game.beatmap.timingPoints))),[d,p]=Y.exports.useState(-h);let c=0;Y.exports.useEffect(()=>{for(let F=1;F<e.i+1;F++)if(e.beatmap.cursor[e.i-F]!=null){n=e.beatmap.cursor[e.i-F].x;break}});const f=n>r?Xd[0]:Xd[1],[m,v]=Y.exports.useState(!0),[y,E]=Y.exports.useState(!1),[x,_]=Y.exports.useState(-1),[w,T]=Y.exports.useState(0),[P,I]=Y.exports.useState(!1);Y.exports.useState(!1);const[R,M]=Y.exports.useState(0),[N,k]=Y.exports.useState(0),[L,W]=Y.exports.useState(0),D=Y.exports.useRef(0),U=e.i==-1?0:e.beatmap.cursor[e.i].screenStartTime,X=e.i==-1?a:e.beatmap.cursor[e.i].screenEndTime,K=e.i==-1?[[t,0],[a,-Rt(100,a,e.game.beatmap.timingPoints)]]:e.beatmap.cursor[e.i].scrollPosList;kr(e.x,[0,1],[be/2-an/2,be/2+an/2]),he.exports.useTick(()=>{if(c=e.game.currenttime,I(c>=U&&c<=X),v(c<=X+500),P&&m){e.game.hitlist.length>0&&e.game.hitlist.forEach(z=>{z.startsWith(t.toString()+",5")&&!z.endsWith("miss")&&x==-1&&(E(!0),_(c))}),y&&(T(kr(c,[x,x+500],[1,0])),M(Eo(c,[x,x+1e3],[2,2.5])),k(kr(c,[x+100,x+1e3],[.3,0],!0)));let F=K[L],O=K[L+1]!=null?K[L+1]:F;c>O[0]&&(W(L+1),F=K[L],O=K[L+1]!=null?K[L+1]:F),p(me-Le-kr(c,[F[0],O[0]],[F[1],O[1]])),D.current=kr(c,[a,a+e.game.NOTE_TRAVEL_FROM_LINE_TO_BOTTOM_DURATION()],[1,0])}});const Z=kr(o,[0,1],[be/2-an/2,be/2+an/2]);return A(Me,{children:P&&V(Me,{children:[e.beatmap.cursor[e.i].type=="ein"||e.beatmap.cursor[e.i].type=="eout"||e.beatmap.cursor[e.i].type=="linear"?V(he.exports.Container,{children:[A(he.exports.Sprite,{texture:e.curve1,x:s>e.x?Z-je*1.1/2:Z+je*1.1/2,y:d,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]}),A(he.exports.Sprite,{texture:e.curve2,x:s>e.x?Z-25:Z+25,y:d,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]}),A(he.exports.Sprite,{texture:e.curve3,x:(s>e.x,Z-je*1.1/2),y:d,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]}),A(he.exports.Sprite,{texture:e.curve3,x:(s>e.x,Z+je*1.1/2),y:d,scale:[s>e.x?-1:1,1],anchor:[(s>e.x,1),1]})]}):null,e.beatmap.cursor[e.i].type=="normal"&&V(Me,{children:[A(he.exports.Sprite,{texture:le.WHITE,x:Z,width:je*1.1+2,height:h.current+2,y:d+1,alpha:1,anchor:[.5,1]}),A(he.exports.Sprite,{texture:le.WHITE,tint:3151144,x:Z,width:je*1.1,height:h.current,y:d,alpha:1,anchor:[.5,1]}),A(he.exports.Sprite,{texture:le.WHITE,x:Z,width:1,height:h.current,alpha:.5,y:d,anchor:n>r?[.5,1]:[.5,1]})]}),i=="normal"&&V(Me,{children:[A(he.exports.Sprite,{texture:le.WHITE,x:Z,width:Math.abs(n-r)*an,tint:f,height:20,alpha:.7,y:d,anchor:n>r?[0,1]:[1,1]}),A(he.exports.Sprite,{texture:le.WHITE,x:Z,width:Math.abs(n-r)*an,height:2,alpha:1,y:d,anchor:n>r?[0,1]:[1,1]}),A(he.exports.Sprite,{texture:le.WHITE,x:Z,width:Math.abs(n-r)*an,height:2,alpha:1,y:d-20,anchor:n>r?[0,1]:[1,1]})]}),A(he.exports.Sprite,{image:A1,x:Z,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:16735978,width:je*1.1,height:Di*1.5,alpha:w}),A(he.exports.Sprite,{image:k1,x:Z,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:16735978,width:ke*R,height:ke*R,alpha:N}),A(he.exports.Sprite,{image:Cf,x:Z,y:me-Le,anchor:[.5,.5],blendMode:ye.ADD,tint:16735978,width:je*1.1,alpha:w})]})})}function kT(e){const[t,r]=Y.exports.useState(0);return he.exports.useTick(()=>{r(kr(e.game.currenttime,[0,e.game.duration],[0,be]))}),A(he.exports.Sprite,{texture:le.WHITE,height:1,width:t,x:0,tint:"white",alpha:1,anchor:[0,0],y:0})}function bM(e){return Y.exports.useState(!1),e.game.audio.on("end",function(){z5(e.user,e.game.beatmap,e.game.score/e.game.maxscore,e.game.hitlist.filter(t=>t.endsWith("perfect")).length,e.game.hitlist.filter(t=>t.endsWith("great")).length,e.game.hitlist.filter(t=>t.endsWith("miss")).length,e.game.hitlist.filter(t=>t.endsWith("misslost")).length,e.game.combo)}),he.exports.useTick(()=>{var t=e.game.audio.seek()*1e3;e.game.currenttime=t,e.game.isPlaying&&(e.game.beatmap.hitObjects.sort((i,s)=>{const o=i.endTime!=null?i.endTime:i.startTime,a=s.endTime!=null?s.endTime:s.startTime;return o-a}).reverse(),e.game.beatmap.cursor.reverse())}),V(he.exports.Container,{children:[A(kT,{game:e.game}),e.beatmap.cursor.map((t,r)=>{const n=r==e.beatmap.cursor.length-1?e.beatmap.cursor[r].x:e.beatmap.cursor[r+1].x;let i=e.beatmap.cursor[r+1]?e.beatmap.cursor[r+1].startTime:e.game.duration;const s=t.x>n?Xd[0]:Xd[1],o=Y.exports.useRef(Math.round(Rt(t.startTime,i,e.game.beatmap.timingPoints))),a=new jn;a.lineStyle(0,"white",1),a.beginFill(3151144);const h=0;let d=0;const p=Math.abs(t.x-n)*an,c=0,f=t.type=="ein"?"eout":t.type=="eout"?"ein":t.type;let m=0;const v=o.current,y=8;for(let I=0;I<y;I++)a.lineTo(go(d+(p-h)/y,[h,p],[h,p],f),m+(v-c)/y),d+=(p-h)/y,m+=(v-c)/y;d+=(p-h)/y,m+=(v-c)/y,a.lineTo(p,v);for(let I=0;I<y;I++)a.lineTo(go(d-(p-h)/y,[h,p],[h,p],f)+je*1.1,m-(v-c)/y),d-=(p-h)/y,m-=(v-c)/y;a.lineTo(h+je*1.1,c);const E=new jn,x=50;E.lineStyle(1,s,1),E.beginFill(s,.5),d=0,m=0;for(let I=0;I<y;I++)E.lineTo(go(d+(p-h)/y,[h,p],[h,p],f),m+(v-c)/y),d+=(p-h)/y,m+=(v-c)/y;d+=(p-h)/y,m+=(v-c)/y,E.lineTo(p,v);for(let I=0;I<y;I++)E.lineTo(go(d-(p-h)/y,[h,p],[h,p],f)+x,m-(v-c)/y),d-=(p-h)/y,m-=(v-c)/y;E.lineTo(h+x,c);const _=new jn;_.lineStyle(2,"white",1),d=0,m=0;for(let I=0;I<y;I++)_.lineTo(go(d+(p-h)/y,[h,p],[h,p],f),m+(v-c)/y),d+=(p-h)/y,m+=(v-c)/y;d+=(p-h)/y,m+=(v-c)/y,_.lineTo(p,v);const w=he.exports.useApp().renderer.generateTexture(a),T=he.exports.useApp().renderer.generateTexture(E),P=he.exports.useApp().renderer.generateTexture(_);return A(_M,{x:t.x,beatmap:e.beatmap,i:r,curve1:w,curve2:T,curve3:P,type:t.type,game:e.game},r)}),[...Array(4)].map((t,r)=>A(xM,{i:r+1,hitObjects:e.beatmap.hitObjects.filter(n=>n.column==r+1),timingPoints:e.beatmap.timingPoints,game:e.game},r)),A(yM,{game:e.game,cursors:e.beatmap.cursor})]})}function wM(e){const[t,r]=Y.exports.useState(0),n=5e3;let i=!1;return t>n&&!i&&(e.game.setVolume(10/100),e.game.isPlaying=!0,e.game.play("play"),i=!i),he.exports.useTick(()=>{t<=n&&r(Date.now()-e.time)}),t<=n&&A(he.exports.Container,{})}function SM(e){return V(Me,{children:[A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,0],alpha:1,tint:16721594,width:e.game.beatmap.metadata.title.length*(be*.02)+be*.3,height:me*.08,x:0,y:10}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,1],tint:e.game.beatmap.metadata.difficulttype=="LITE"?4697343:e.game.beatmap.metadata.difficulttype=="NEON"?13322239:e.game.beatmap.metadata.difficulttype=="ENIGMA"?16730050:6553600,alpha:1,width:2*`${e.game.beatmap.metadata.difficulttype}${e.game.beatmap.metadata.difficult}`.length*(be*.02),height:Le,x:be-30,y:me}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,1],tint:"white",alpha:1,width:2*`${e.game.beatmap.metadata.difficulttype}${e.game.beatmap.metadata.difficult}`.length*(be*.02),height:Le,x:be,y:me}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,.5],tint:16721594,alpha:1,width:4*(be*.012)+be*.02,height:Le,x:be/2,y:me*.05}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,.5],tint:"white",alpha:1,width:4*(be*.012)+be*.02,height:Le,x:be/2,y:me*.05}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,0],alpha:1,tint:"white",width:e.game.beatmap.metadata.title.length*(be*.03)+be*.1,height:me*.08,x:0,y:10}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,0],alpha:1,width:be*.5,tint:16721594,height:me*.09,x:be,y:10}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,0],alpha:1,width:be*.5,tint:"white",height:me*.09,x:be,y:10}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,0],alpha:0,width:be*.3,tint:16721594,height:me*.04,x:be,y:80}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",anchor:[.5,0],alpha:0,width:be*.3,tint:"white",height:me*.04,x:be,y:80}),A(he.exports.Text,{text:`${e.game.beatmap.metadata.title}`,x:10,y:15,anchor:[0,0],style:new Jt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${be*.012}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${e.game.beatmap.metadata.artist}`,x:10,y:15+be*.016,anchor:[0,0],style:new Jt({fill:16721594,fontFamily:"Montserrat",fontWeight:"600",fontSize:`${be*.01}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${e.game.beatmap.metadata.difficulttype} ${e.game.beatmap.metadata.difficult}`,x:be-10,anchor:[1,.5],y:me-Le/2,style:new Jt({fill:e.game.beatmap.metadata.difficulttype=="LITE"?4697343:e.game.beatmap.metadata.difficulttype=="NEON"?13322239:e.game.beatmap.metadata.difficulttype=="ENIGMA"?16730050:6553600,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${be*.012}px`,align:"left"}),alpha:1}),A(he.exports.Sprite,{texture:le.WHITE,height:10,tint:"white",width:be,x:be/2,anchor:[.5,.5],y:me-Le}),A(he.exports.Sprite,{texture:le.WHITE,height:5,tint:16721594,width:be,x:be/2,anchor:[.5,.5],y:me-Le})]})}function EM(e){return V(Me,{children:[A(he.exports.Sprite,{image:`${e.imgpath}`,height:be*9/16,width:be,x:be/2,anchor:[.5,.5],y:me/2}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",height:me,width:be,x:be/2,tint:"white",alpha:.7,anchor:[.5,.5],y:me/2}),A(he.exports.Sprite,{image:"https://cdn.discordapp.com/attachments/999638294390395022/1185218590048256040/Untitled_Artwork.png?ex=658ecfd4&is=657c5ad4&hm=3189fd723470945257aee534b16889fc079c64a63530cf74682b4f706676f9f8&",tint:16749567,anchor:[.5,0],alpha:1,width:be*.3,height:me*.1,x:be,y:10}),A(he.exports.Sprite,{texture:le.WHITE,tint:"black",height:me,width:be,x:be/2,alpha:.8,anchor:[.5,.5],y:me/2})]})}function Ke(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function TM(e){const[t,r]=Y.exports.useState(e.chart),{audioPath:n}=t;let i=0,s=0;t.hitObjects.forEach(m=>{m.type=="hold"&&(s+=m.ticks.length,i+=100*m.ticks.length),i+=100,s+=1}),t.cursor.sort((m,v)=>m.startTime-v.startTime).forEach((m,v)=>{const y=e.game.beatmap.cursor[v-1]!=null?e.game.beatmap.cursor[v-1].x:.5;m.type!="normal"&&(s+=m.ticks.length,i+=100*m.ticks.length),m.x!=y&&(i+=100,s+=1)});const o=e.game.init(10,10,400,n,i,t,iM,s,e.user);o.setAudioPath(n),o.audiovolume,o.effectvolume;function a(m){return m==Ke("COL_1_KEY")||m==Ke("COL_2_KEY")||m==Ke("COL_3_KEY")||m==Ke("COL_4_KEY")||m==Ke("COL_1_KEY2")||m==Ke("COL_2_KEY2")||m==Ke("COL_3_KEY2")||m==Ke("COL_4_KEY2")}function h(m){switch(m){case Ke("COL_1_KEY"):return 0;case Ke("COL_2_KEY"):return 1;case Ke("COL_3_KEY"):return 2;case Ke("COL_4_KEY"):return 3;case Ke("COL_1_KEY2"):return 0;case Ke("COL_2_KEY2"):return 1;case Ke("COL_3_KEY2"):return 2;case Ke("COL_4_KEY2"):return 3;default:return NaN}}function d(m){switch(m){case Ke("COL_1_KEY"):return 0;case Ke("COL_2_KEY"):return 1;case Ke("COL_3_KEY"):return 2;case Ke("COL_4_KEY"):return 3;case Ke("COL_1_KEY2"):return 4;case Ke("COL_2_KEY2"):return 5;case Ke("COL_3_KEY2"):return 6;case Ke("COL_4_KEY2"):return 7;default:return NaN}}let p=setTimeout(function(){o.key[4]="00"},50);Y.exports.useEffect(()=>{const m=[!1,!1,!1,!1,!1,!1,!1,!1],v=_=>{e.game.audio.playing()&&(_.movementX>0&&(o.key[4]="01"),_.movementX<0&&(o.key[4]="10"),Math.abs(_.movementX)>0&&(clearTimeout(p),p=setTimeout(function(){o.key[4]="00"},50)))},y=_=>{e.game.audio.playing()&&(m[d(_.key)]=!1,a(_.key)&&(d(_.key)>=4&&d(_.key)<=7?m[d(_.key)-4]:m[d(_.key)+4])==!1&&(o.key[h(_.key)]="00"),(_.key==Ke("CURSOR_LEFT_KEY")||_.key==Ke("CURSOR_LEFT_KEY2"))&&(o.key[4]="0"+o.key[4][1]),(_.key==Ke("CURSOR_RIGHT_KEY")||_.key==Ke("CURSOR_RIGHT_KEY2"))&&(o.key[4]=o.key[4][0]+"0"))},E=_=>{e.game.audio.playing()&&(m[d(_.key)]=!0,_.repeat?o.key[h(_.key)]="01":(o.key[h(_.key)]="11",(_.key==Ke("CURSOR_LEFT_KEY")||_.key==Ke("CURSOR_LEFT_KEY2"))&&(o.key[4]="1"+o.key[4][1]),(_.key==Ke("CURSOR_RIGHT_KEY")||_.key==Ke("CURSOR_RIGHT_KEY2"))&&(o.key[4]=o.key[4][0]+"1")))},x=_=>{switch(_.key){case"p":o.retry();break;case"o":o.audio.pause();break}};return document.addEventListener("keyup",y),document.addEventListener("mousemove",v),document.addEventListener("keydown",E),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("keyup",y),document.removeEventListener("keydown",E),document.removeEventListener("keydown",x)}},[]);const c=new $t,f=new $t;return V(Me,{children:[A(he.exports.Stage,{width:be,height:me,children:V(he.exports.Container,{filters:[],children:[A(EM,{imgpath:`BG/${t.bgPath}.jpg`}),A(bM,{beatmap:t,game:o,overlay:f,user:e.user},Date.now()),A(SM,{game:e.game}),A(fM,{game:e.game}),A(wM,{game:o,time:e.menutime,beatmap:t,container:f,pcontainer:c}),A(kT,{game:e.game})]})}),A("div",{id:"log"})]})}function CM(){return Math.max(document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function AM(){return Math.max(document.documentElement.clientHeight)}var xi={exports:{}};function kM(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rm={exports:{}};const PM={},IM=Object.freeze(Object.defineProperty({__proto__:null,default:PM},Symbol.toStringTag,{value:"Module"})),RM=Ow(IM);var qb;function $e(){return qb||(qb=1,function(e,t){(function(r,n){e.exports=n()})(Ne,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Ne<"u"&&Ne.crypto&&(s=Ne.crypto),!s&&typeof kM=="function")try{s=RM}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function _(){}return function(w){var T;return _.prototype=w,T=new _,_.prototype=null,T}}(),h={},d=h.lib={},p=d.Base=function(){return{extend:function(_){var w=a(this);return _&&w.mixIn(_),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var _=this.extend();return _.init.apply(_,arguments),_},init:function(){},mixIn:function(_){for(var w in _)_.hasOwnProperty(w)&&(this[w]=_[w]);_.hasOwnProperty("toString")&&(this.toString=_.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=d.WordArray=p.extend({init:function(_,w){_=this.words=_||[],w!=i?this.sigBytes=w:this.sigBytes=_.length*4},toString:function(_){return(_||m).stringify(this)},concat:function(_){var w=this.words,T=_.words,P=this.sigBytes,I=_.sigBytes;if(this.clamp(),P%4)for(var R=0;R<I;R++){var M=T[R>>>2]>>>24-R%4*8&255;w[P+R>>>2]|=M<<24-(P+R)%4*8}else for(var N=0;N<I;N+=4)w[P+N>>>2]=T[N>>>2];return this.sigBytes+=I,this},clamp:function(){var _=this.words,w=this.sigBytes;_[w>>>2]&=4294967295<<32-w%4*8,_.length=n.ceil(w/4)},clone:function(){var _=p.clone.call(this);return _.words=this.words.slice(0),_},random:function(_){for(var w=[],T=0;T<_;T+=4)w.push(o());return new c.init(w,_)}}),f=h.enc={},m=f.Hex={stringify:function(_){for(var w=_.words,T=_.sigBytes,P=[],I=0;I<T;I++){var R=w[I>>>2]>>>24-I%4*8&255;P.push((R>>>4).toString(16)),P.push((R&15).toString(16))}return P.join("")},parse:function(_){for(var w=_.length,T=[],P=0;P<w;P+=2)T[P>>>3]|=parseInt(_.substr(P,2),16)<<24-P%8*4;return new c.init(T,w/2)}},v=f.Latin1={stringify:function(_){for(var w=_.words,T=_.sigBytes,P=[],I=0;I<T;I++){var R=w[I>>>2]>>>24-I%4*8&255;P.push(String.fromCharCode(R))}return P.join("")},parse:function(_){for(var w=_.length,T=[],P=0;P<w;P++)T[P>>>2]|=(_.charCodeAt(P)&255)<<24-P%4*8;return new c.init(T,w)}},y=f.Utf8={stringify:function(_){try{return decodeURIComponent(escape(v.stringify(_)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(_){return v.parse(unescape(encodeURIComponent(_)))}},E=d.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(_){typeof _=="string"&&(_=y.parse(_)),this._data.concat(_),this._nDataBytes+=_.sigBytes},_process:function(_){var w,T=this._data,P=T.words,I=T.sigBytes,R=this.blockSize,M=R*4,N=I/M;_?N=n.ceil(N):N=n.max((N|0)-this._minBufferSize,0);var k=N*R,L=n.min(k*4,I);if(k){for(var W=0;W<k;W+=R)this._doProcessBlock(P,W);w=P.splice(0,k),T.sigBytes-=L}return new c.init(w,L)},clone:function(){var _=p.clone.call(this);return _._data=this._data.clone(),_},_minBufferSize:0});d.Hasher=E.extend({cfg:p.extend(),init:function(_){this.cfg=this.cfg.extend(_),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(_){return this._append(_),this._process(),this},finalize:function(_){_&&this._append(_);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(_){return function(w,T){return new _.init(T).finalize(w)}},_createHmacHelper:function(_){return function(w,T){return new x.HMAC.init(_,T).finalize(w)}}});var x=h.algo={};return h}(Math);return r})}(rm)),rm.exports}var nm={exports:{}},Zb;function Pf(){return Zb||(Zb=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,h=i.x64={};h.Word=o.extend({init:function(d,p){this.high=d,this.low=p}}),h.WordArray=o.extend({init:function(d,p){d=this.words=d||[],p!=n?this.sigBytes=p:this.sigBytes=d.length*8},toX32:function(){for(var d=this.words,p=d.length,c=[],f=0;f<p;f++){var m=d[f];c.push(m.high),c.push(m.low)}return a.create(c,this.sigBytes)},clone:function(){for(var d=o.clone.call(this),p=d.words=this.words.slice(0),c=p.length,f=0;f<c;f++)p[f]=p[f].clone();return d}})}(),r})}(nm)),nm.exports}var im={exports:{}},Jb;function MM(){return Jb||(Jb=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(h){if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),(h instanceof Int8Array||typeof Uint8ClampedArray<"u"&&h instanceof Uint8ClampedArray||h instanceof Int16Array||h instanceof Uint16Array||h instanceof Int32Array||h instanceof Uint32Array||h instanceof Float32Array||h instanceof Float64Array)&&(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),h instanceof Uint8Array){for(var d=h.byteLength,p=[],c=0;c<d;c++)p[c>>>2]|=h[c]<<24-c%4*8;o.call(this,p,d)}else o.apply(this,arguments)};a.prototype=s}}(),r.lib.WordArray})}(im)),im.exports}var sm={exports:{}},ew;function NM(){return ew||(ew=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(h){for(var d=h.words,p=h.sigBytes,c=[],f=0;f<p;f+=2){var m=d[f>>>2]>>>16-f%4*8&65535;c.push(String.fromCharCode(m))}return c.join("")},parse:function(h){for(var d=h.length,p=[],c=0;c<d;c++)p[c>>>1]|=h.charCodeAt(c)<<16-c%2*16;return s.create(p,d*2)}},o.Utf16LE={stringify:function(h){for(var d=h.words,p=h.sigBytes,c=[],f=0;f<p;f+=2){var m=a(d[f>>>2]>>>16-f%4*8&65535);c.push(String.fromCharCode(m))}return c.join("")},parse:function(h){for(var d=h.length,p=[],c=0;c<d;c++)p[c>>>1]|=a(h.charCodeAt(c)<<16-c%2*16);return s.create(p,d*2)}};function a(h){return h<<8&4278255360|h>>>8&16711935}}(),r.enc.Utf16})}(sm)),sm.exports}var om={exports:{}},tw;function qa(){return tw||(tw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(h){var d=h.words,p=h.sigBytes,c=this._map;h.clamp();for(var f=[],m=0;m<p;m+=3)for(var v=d[m>>>2]>>>24-m%4*8&255,y=d[m+1>>>2]>>>24-(m+1)%4*8&255,E=d[m+2>>>2]>>>24-(m+2)%4*8&255,x=v<<16|y<<8|E,_=0;_<4&&m+_*.75<p;_++)f.push(c.charAt(x>>>6*(3-_)&63));var w=c.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(h){var d=h.length,p=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var f=0;f<p.length;f++)c[p.charCodeAt(f)]=f}var m=p.charAt(64);if(m){var v=h.indexOf(m);v!==-1&&(d=v)}return a(h,d,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(h,d,p){for(var c=[],f=0,m=0;m<d;m++)if(m%4){var v=p[h.charCodeAt(m-1)]<<m%4*2,y=p[h.charCodeAt(m)]>>>6-m%4*2,E=v|y;c[f>>>2]|=E<<24-f%4*8,f++}return s.create(c,f)}}(),r.enc.Base64})}(om)),om.exports}var am={exports:{}},rw;function BM(){return rw||(rw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(h,d=!0){var p=h.words,c=h.sigBytes,f=d?this._safe_map:this._map;h.clamp();for(var m=[],v=0;v<c;v+=3)for(var y=p[v>>>2]>>>24-v%4*8&255,E=p[v+1>>>2]>>>24-(v+1)%4*8&255,x=p[v+2>>>2]>>>24-(v+2)%4*8&255,_=y<<16|E<<8|x,w=0;w<4&&v+w*.75<c;w++)m.push(f.charAt(_>>>6*(3-w)&63));var T=f.charAt(64);if(T)for(;m.length%4;)m.push(T);return m.join("")},parse:function(h,d=!0){var p=h.length,c=d?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<c.length;m++)f[c.charCodeAt(m)]=m}var v=c.charAt(64);if(v){var y=h.indexOf(v);y!==-1&&(p=y)}return a(h,p,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(h,d,p){for(var c=[],f=0,m=0;m<d;m++)if(m%4){var v=p[h.charCodeAt(m-1)]<<m%4*2,y=p[h.charCodeAt(m)]>>>6-m%4*2,E=v|y;c[f>>>2]|=E<<24-f%4*8,f++}return s.create(c,f)}}(),r.enc.Base64url})}(am)),am.exports}var lm={exports:{}},nw;function Za(){return nw||(nw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.algo,d=[];(function(){for(var y=0;y<64;y++)d[y]=n.abs(n.sin(y+1))*4294967296|0})();var p=h.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,E){for(var x=0;x<16;x++){var _=E+x,w=y[_];y[_]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var T=this._hash.words,P=y[E+0],I=y[E+1],R=y[E+2],M=y[E+3],N=y[E+4],k=y[E+5],L=y[E+6],W=y[E+7],D=y[E+8],U=y[E+9],X=y[E+10],K=y[E+11],Z=y[E+12],F=y[E+13],O=y[E+14],z=y[E+15],H=T[0],j=T[1],J=T[2],q=T[3];H=c(H,j,J,q,P,7,d[0]),q=c(q,H,j,J,I,12,d[1]),J=c(J,q,H,j,R,17,d[2]),j=c(j,J,q,H,M,22,d[3]),H=c(H,j,J,q,N,7,d[4]),q=c(q,H,j,J,k,12,d[5]),J=c(J,q,H,j,L,17,d[6]),j=c(j,J,q,H,W,22,d[7]),H=c(H,j,J,q,D,7,d[8]),q=c(q,H,j,J,U,12,d[9]),J=c(J,q,H,j,X,17,d[10]),j=c(j,J,q,H,K,22,d[11]),H=c(H,j,J,q,Z,7,d[12]),q=c(q,H,j,J,F,12,d[13]),J=c(J,q,H,j,O,17,d[14]),j=c(j,J,q,H,z,22,d[15]),H=f(H,j,J,q,I,5,d[16]),q=f(q,H,j,J,L,9,d[17]),J=f(J,q,H,j,K,14,d[18]),j=f(j,J,q,H,P,20,d[19]),H=f(H,j,J,q,k,5,d[20]),q=f(q,H,j,J,X,9,d[21]),J=f(J,q,H,j,z,14,d[22]),j=f(j,J,q,H,N,20,d[23]),H=f(H,j,J,q,U,5,d[24]),q=f(q,H,j,J,O,9,d[25]),J=f(J,q,H,j,M,14,d[26]),j=f(j,J,q,H,D,20,d[27]),H=f(H,j,J,q,F,5,d[28]),q=f(q,H,j,J,R,9,d[29]),J=f(J,q,H,j,W,14,d[30]),j=f(j,J,q,H,Z,20,d[31]),H=m(H,j,J,q,k,4,d[32]),q=m(q,H,j,J,D,11,d[33]),J=m(J,q,H,j,K,16,d[34]),j=m(j,J,q,H,O,23,d[35]),H=m(H,j,J,q,I,4,d[36]),q=m(q,H,j,J,N,11,d[37]),J=m(J,q,H,j,W,16,d[38]),j=m(j,J,q,H,X,23,d[39]),H=m(H,j,J,q,F,4,d[40]),q=m(q,H,j,J,P,11,d[41]),J=m(J,q,H,j,M,16,d[42]),j=m(j,J,q,H,L,23,d[43]),H=m(H,j,J,q,U,4,d[44]),q=m(q,H,j,J,Z,11,d[45]),J=m(J,q,H,j,z,16,d[46]),j=m(j,J,q,H,R,23,d[47]),H=v(H,j,J,q,P,6,d[48]),q=v(q,H,j,J,W,10,d[49]),J=v(J,q,H,j,O,15,d[50]),j=v(j,J,q,H,k,21,d[51]),H=v(H,j,J,q,Z,6,d[52]),q=v(q,H,j,J,M,10,d[53]),J=v(J,q,H,j,X,15,d[54]),j=v(j,J,q,H,I,21,d[55]),H=v(H,j,J,q,D,6,d[56]),q=v(q,H,j,J,z,10,d[57]),J=v(J,q,H,j,L,15,d[58]),j=v(j,J,q,H,F,21,d[59]),H=v(H,j,J,q,N,6,d[60]),q=v(q,H,j,J,K,10,d[61]),J=v(J,q,H,j,R,15,d[62]),j=v(j,J,q,H,U,21,d[63]),T[0]=T[0]+H|0,T[1]=T[1]+j|0,T[2]=T[2]+J|0,T[3]=T[3]+q|0},_doFinalize:function(){var y=this._data,E=y.words,x=this._nDataBytes*8,_=y.sigBytes*8;E[_>>>5]|=128<<24-_%32;var w=n.floor(x/4294967296),T=x;E[(_+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,E[(_+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,y.sigBytes=(E.length+1)*4,this._process();for(var P=this._hash,I=P.words,R=0;R<4;R++){var M=I[R];I[R]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return P},clone:function(){var y=a.clone.call(this);return y._hash=this._hash.clone(),y}});function c(y,E,x,_,w,T,P){var I=y+(E&x|~E&_)+w+P;return(I<<T|I>>>32-T)+E}function f(y,E,x,_,w,T,P){var I=y+(E&_|x&~_)+w+P;return(I<<T|I>>>32-T)+E}function m(y,E,x,_,w,T,P){var I=y+(E^x^_)+w+P;return(I<<T|I>>>32-T)+E}function v(y,E,x,_,w,T,P){var I=y+(x^(E|~_))+w+P;return(I<<T|I>>>32-T)+E}i.MD5=a._createHelper(p),i.HmacMD5=a._createHmacHelper(p)}(Math),r.MD5})}(lm)),lm.exports}var um={exports:{}},iw;function P1(){return iw||(iw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,h=[],d=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,c){for(var f=this._hash.words,m=f[0],v=f[1],y=f[2],E=f[3],x=f[4],_=0;_<80;_++){if(_<16)h[_]=p[c+_]|0;else{var w=h[_-3]^h[_-8]^h[_-14]^h[_-16];h[_]=w<<1|w>>>31}var T=(m<<5|m>>>27)+x+h[_];_<20?T+=(v&y|~v&E)+1518500249:_<40?T+=(v^y^E)+1859775393:_<60?T+=(v&y|v&E|y&E)-1894007588:T+=(v^y^E)-899497514,x=E,E=y,y=v<<30|v>>>2,v=m,m=T}f[0]=f[0]+m|0,f[1]=f[1]+v|0,f[2]=f[2]+y|0,f[3]=f[3]+E|0,f[4]=f[4]+x|0},_doFinalize:function(){var p=this._data,c=p.words,f=this._nDataBytes*8,m=p.sigBytes*8;return c[m>>>5]|=128<<24-m%32,c[(m+64>>>9<<4)+14]=Math.floor(f/4294967296),c[(m+64>>>9<<4)+15]=f,p.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});n.SHA1=o._createHelper(d),n.HmacSHA1=o._createHmacHelper(d)}(),r.SHA1})}(um)),um.exports}var cm={exports:{}},sw;function PT(){return sw||(sw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.algo,d=[],p=[];(function(){function m(x){for(var _=n.sqrt(x),w=2;w<=_;w++)if(!(x%w))return!1;return!0}function v(x){return(x-(x|0))*4294967296|0}for(var y=2,E=0;E<64;)m(y)&&(E<8&&(d[E]=v(n.pow(y,1/2))),p[E]=v(n.pow(y,1/3)),E++),y++})();var c=[],f=h.SHA256=a.extend({_doReset:function(){this._hash=new o.init(d.slice(0))},_doProcessBlock:function(m,v){for(var y=this._hash.words,E=y[0],x=y[1],_=y[2],w=y[3],T=y[4],P=y[5],I=y[6],R=y[7],M=0;M<64;M++){if(M<16)c[M]=m[v+M]|0;else{var N=c[M-15],k=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,L=c[M-2],W=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;c[M]=k+c[M-7]+W+c[M-16]}var D=T&P^~T&I,U=E&x^E&_^x&_,X=(E<<30|E>>>2)^(E<<19|E>>>13)^(E<<10|E>>>22),K=(T<<26|T>>>6)^(T<<21|T>>>11)^(T<<7|T>>>25),Z=R+K+D+p[M]+c[M],F=X+U;R=I,I=P,P=T,T=w+Z|0,w=_,_=x,x=E,E=Z+F|0}y[0]=y[0]+E|0,y[1]=y[1]+x|0,y[2]=y[2]+_|0,y[3]=y[3]+w|0,y[4]=y[4]+T|0,y[5]=y[5]+P|0,y[6]=y[6]+I|0,y[7]=y[7]+R|0},_doFinalize:function(){var m=this._data,v=m.words,y=this._nDataBytes*8,E=m.sigBytes*8;return v[E>>>5]|=128<<24-E%32,v[(E+64>>>9<<4)+14]=n.floor(y/4294967296),v[(E+64>>>9<<4)+15]=y,m.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),r.SHA256})}(cm)),cm.exports}var hm={exports:{}},ow;function LM(){return ow||(ow=1,function(e,t){(function(r,n,i){e.exports=n($e(),PT())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,h=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var d=a._doFinalize.call(this);return d.sigBytes-=4,d}});n.SHA224=a._createHelper(h),n.HmacSHA224=a._createHmacHelper(h)}(),r.SHA224})}(hm)),hm.exports}var dm={exports:{}},aw;function IT(){return aw||(aw=1,function(e,t){(function(r,n,i){e.exports=n($e(),Pf())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,h=o.WordArray,d=n.algo;function p(){return a.create.apply(a,arguments)}var c=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],f=[];(function(){for(var v=0;v<80;v++)f[v]=p()})();var m=d.SHA512=s.extend({_doReset:function(){this._hash=new h.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(v,y){for(var E=this._hash.words,x=E[0],_=E[1],w=E[2],T=E[3],P=E[4],I=E[5],R=E[6],M=E[7],N=x.high,k=x.low,L=_.high,W=_.low,D=w.high,U=w.low,X=T.high,K=T.low,Z=P.high,F=P.low,O=I.high,z=I.low,H=R.high,j=R.low,J=M.high,q=M.low,Ce=N,ge=k,Re=L,Ee=W,mt=D,Je=U,Oe=X,Qe=K,Be=Z,nt=F,Vt=O,Br=z,Zi=H,Qr=j,Ja=J,gn=q,Lr=0;Lr<80;Lr++){var br,Kn,Qn=f[Lr];if(Lr<16)Kn=Qn.high=v[y+Lr*2]|0,br=Qn.low=v[y+Lr*2+1]|0;else{var Ku=f[Lr-15],Ji=Ku.high,$s=Ku.low,If=(Ji>>>1|$s<<31)^(Ji>>>8|$s<<24)^Ji>>>7,Qu=($s>>>1|Ji<<31)^($s>>>8|Ji<<24)^($s>>>7|Ji<<25),qu=f[Lr-2],es=qu.high,Vs=qu.low,Rf=(es>>>19|Vs<<13)^(es<<3|Vs>>>29)^es>>>6,Zu=(Vs>>>19|es<<13)^(Vs<<3|es>>>29)^(Vs>>>6|es<<26),Ju=f[Lr-7],Mf=Ju.high,ec=Ju.low,tc=f[Lr-16],Nf=tc.high,rc=tc.low;br=Qu+ec,Kn=If+Mf+(br>>>0<Qu>>>0?1:0),br=br+Zu,Kn=Kn+Rf+(br>>>0<Zu>>>0?1:0),br=br+rc,Kn=Kn+Nf+(br>>>0<rc>>>0?1:0),Qn.high=Kn,Qn.low=br}var Bf=Be&Vt^~Be&Zi,nc=nt&Br^~nt&Qr,Lf=Ce&Re^Ce&mt^Re&mt,ic=ge&Ee^ge&Je^Ee&Je,sc=(Ce>>>28|ge<<4)^(Ce<<30|ge>>>2)^(Ce<<25|ge>>>7),oc=(ge>>>28|Ce<<4)^(ge<<30|Ce>>>2)^(ge<<25|Ce>>>7),el=(Be>>>14|nt<<18)^(Be>>>18|nt<<14)^(Be<<23|nt>>>9),ac=(nt>>>14|Be<<18)^(nt>>>18|Be<<14)^(nt<<23|Be>>>9),tl=c[Lr],Df=tl.high,lc=tl.low,pr=gn+ac,vn=Ja+el+(pr>>>0<gn>>>0?1:0),pr=pr+nc,vn=vn+Bf+(pr>>>0<nc>>>0?1:0),pr=pr+lc,vn=vn+Df+(pr>>>0<lc>>>0?1:0),pr=pr+br,vn=vn+Kn+(pr>>>0<br>>>0?1:0),Fo=oc+ic,Of=sc+Lf+(Fo>>>0<oc>>>0?1:0);Ja=Zi,gn=Qr,Zi=Vt,Qr=Br,Vt=Be,Br=nt,nt=Qe+pr|0,Be=Oe+vn+(nt>>>0<Qe>>>0?1:0)|0,Oe=mt,Qe=Je,mt=Re,Je=Ee,Re=Ce,Ee=ge,ge=pr+Fo|0,Ce=vn+Of+(ge>>>0<pr>>>0?1:0)|0}k=x.low=k+ge,x.high=N+Ce+(k>>>0<ge>>>0?1:0),W=_.low=W+Ee,_.high=L+Re+(W>>>0<Ee>>>0?1:0),U=w.low=U+Je,w.high=D+mt+(U>>>0<Je>>>0?1:0),K=T.low=K+Qe,T.high=X+Oe+(K>>>0<Qe>>>0?1:0),F=P.low=F+nt,P.high=Z+Be+(F>>>0<nt>>>0?1:0),z=I.low=z+Br,I.high=O+Vt+(z>>>0<Br>>>0?1:0),j=R.low=j+Qr,R.high=H+Zi+(j>>>0<Qr>>>0?1:0),q=M.low=q+gn,M.high=J+Ja+(q>>>0<gn>>>0?1:0)},_doFinalize:function(){var v=this._data,y=v.words,E=this._nDataBytes*8,x=v.sigBytes*8;y[x>>>5]|=128<<24-x%32,y[(x+128>>>10<<5)+30]=Math.floor(E/4294967296),y[(x+128>>>10<<5)+31]=E,v.sigBytes=y.length*4,this._process();var _=this._hash.toX32();return _},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});n.SHA512=s._createHelper(m),n.HmacSHA512=s._createHmacHelper(m)}(),r.SHA512})}(dm)),dm.exports}var fm={exports:{}},lw;function DM(){return lw||(lw=1,function(e,t){(function(r,n,i){e.exports=n($e(),Pf(),IT())})(Ne,function(r){return function(){var n=r,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,h=a.SHA512,d=a.SHA384=h.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var p=h._doFinalize.call(this);return p.sigBytes-=16,p}});n.SHA384=h._createHelper(d),n.HmacSHA384=h._createHmacHelper(d)}(),r.SHA384})}(fm)),fm.exports}var pm={exports:{}},uw;function OM(){return uw||(uw=1,function(e,t){(function(r,n,i){e.exports=n($e(),Pf())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.x64,d=h.Word,p=i.algo,c=[],f=[],m=[];(function(){for(var E=1,x=0,_=0;_<24;_++){c[E+5*x]=(_+1)*(_+2)/2%64;var w=x%5,T=(2*E+3*x)%5;E=w,x=T}for(var E=0;E<5;E++)for(var x=0;x<5;x++)f[E+5*x]=x+(2*E+3*x)%5*5;for(var P=1,I=0;I<24;I++){for(var R=0,M=0,N=0;N<7;N++){if(P&1){var k=(1<<N)-1;k<32?M^=1<<k:R^=1<<k-32}P&128?P=P<<1^113:P<<=1}m[I]=d.create(R,M)}})();var v=[];(function(){for(var E=0;E<25;E++)v[E]=d.create()})();var y=p.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var E=this._state=[],x=0;x<25;x++)E[x]=new d.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(E,x){for(var _=this._state,w=this.blockSize/2,T=0;T<w;T++){var P=E[x+2*T],I=E[x+2*T+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;var R=_[T];R.high^=I,R.low^=P}for(var M=0;M<24;M++){for(var N=0;N<5;N++){for(var k=0,L=0,W=0;W<5;W++){var R=_[N+5*W];k^=R.high,L^=R.low}var D=v[N];D.high=k,D.low=L}for(var N=0;N<5;N++)for(var U=v[(N+4)%5],X=v[(N+1)%5],K=X.high,Z=X.low,k=U.high^(K<<1|Z>>>31),L=U.low^(Z<<1|K>>>31),W=0;W<5;W++){var R=_[N+5*W];R.high^=k,R.low^=L}for(var F=1;F<25;F++){var k,L,R=_[F],O=R.high,z=R.low,H=c[F];H<32?(k=O<<H|z>>>32-H,L=z<<H|O>>>32-H):(k=z<<H-32|O>>>64-H,L=O<<H-32|z>>>64-H);var j=v[f[F]];j.high=k,j.low=L}var J=v[0],q=_[0];J.high=q.high,J.low=q.low;for(var N=0;N<5;N++)for(var W=0;W<5;W++){var F=N+5*W,R=_[F],Ce=v[F],ge=v[(N+1)%5+5*W],Re=v[(N+2)%5+5*W];R.high=Ce.high^~ge.high&Re.high,R.low=Ce.low^~ge.low&Re.low}var R=_[0],Ee=m[M];R.high^=Ee.high,R.low^=Ee.low}},_doFinalize:function(){var E=this._data,x=E.words;this._nDataBytes*8;var _=E.sigBytes*8,w=this.blockSize*32;x[_>>>5]|=1<<24-_%32,x[(n.ceil((_+1)/w)*w>>>5)-1]|=128,E.sigBytes=x.length*4,this._process();for(var T=this._state,P=this.cfg.outputLength/8,I=P/8,R=[],M=0;M<I;M++){var N=T[M],k=N.high,L=N.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,R.push(L),R.push(k)}return new o.init(R,P)},clone:function(){for(var E=a.clone.call(this),x=E._state=this._state.slice(0),_=0;_<25;_++)x[_]=x[_].clone();return E}});i.SHA3=a._createHelper(y),i.HmacSHA3=a._createHmacHelper(y)}(Math),r.SHA3})}(pm)),pm.exports}var mm={exports:{}},cw;function FM(){return cw||(cw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.algo,d=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),v=o.create([1352829926,1548603684,1836072691,2053994217,0]),y=h.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,R){for(var M=0;M<16;M++){var N=R+M,k=I[N];I[N]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var L=this._hash.words,W=m.words,D=v.words,U=d.words,X=p.words,K=c.words,Z=f.words,F,O,z,H,j,J,q,Ce,ge,Re;J=F=L[0],q=O=L[1],Ce=z=L[2],ge=H=L[3],Re=j=L[4];for(var Ee,M=0;M<80;M+=1)Ee=F+I[R+U[M]]|0,M<16?Ee+=E(O,z,H)+W[0]:M<32?Ee+=x(O,z,H)+W[1]:M<48?Ee+=_(O,z,H)+W[2]:M<64?Ee+=w(O,z,H)+W[3]:Ee+=T(O,z,H)+W[4],Ee=Ee|0,Ee=P(Ee,K[M]),Ee=Ee+j|0,F=j,j=H,H=P(z,10),z=O,O=Ee,Ee=J+I[R+X[M]]|0,M<16?Ee+=T(q,Ce,ge)+D[0]:M<32?Ee+=w(q,Ce,ge)+D[1]:M<48?Ee+=_(q,Ce,ge)+D[2]:M<64?Ee+=x(q,Ce,ge)+D[3]:Ee+=E(q,Ce,ge)+D[4],Ee=Ee|0,Ee=P(Ee,Z[M]),Ee=Ee+Re|0,J=Re,Re=ge,ge=P(Ce,10),Ce=q,q=Ee;Ee=L[1]+z+ge|0,L[1]=L[2]+H+Re|0,L[2]=L[3]+j+J|0,L[3]=L[4]+F+q|0,L[4]=L[0]+O+Ce|0,L[0]=Ee},_doFinalize:function(){var I=this._data,R=I.words,M=this._nDataBytes*8,N=I.sigBytes*8;R[N>>>5]|=128<<24-N%32,R[(N+64>>>9<<4)+14]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,I.sigBytes=(R.length+1)*4,this._process();for(var k=this._hash,L=k.words,W=0;W<5;W++){var D=L[W];L[W]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return k},clone:function(){var I=a.clone.call(this);return I._hash=this._hash.clone(),I}});function E(I,R,M){return I^R^M}function x(I,R,M){return I&R|~I&M}function _(I,R,M){return(I|~R)^M}function w(I,R,M){return I&M|R&~M}function T(I,R,M){return I^(R|~M)}function P(I,R){return I<<R|I>>>32-R}i.RIPEMD160=a._createHelper(y),i.HmacRIPEMD160=a._createHmacHelper(y)}(),r.RIPEMD160})}(mm)),mm.exports}var gm={exports:{}},hw;function I1(){return hw||(hw=1,function(e,t){(function(r,n){e.exports=n($e())})(Ne,function(r){(function(){var n=r,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,h=n.algo;h.HMAC=s.extend({init:function(d,p){d=this._hasher=new d.init,typeof p=="string"&&(p=a.parse(p));var c=d.blockSize,f=c*4;p.sigBytes>f&&(p=d.finalize(p)),p.clamp();for(var m=this._oKey=p.clone(),v=this._iKey=p.clone(),y=m.words,E=v.words,x=0;x<c;x++)y[x]^=1549556828,E[x]^=909522486;m.sigBytes=v.sigBytes=f,this.reset()},reset:function(){var d=this._hasher;d.reset(),d.update(this._iKey)},update:function(d){return this._hasher.update(d),this},finalize:function(d){var p=this._hasher,c=p.finalize(d);p.reset();var f=p.finalize(this._oKey.clone().concat(c));return f}})})()})}(gm)),gm.exports}var vm={exports:{}},dw;function UM(){return dw||(dw=1,function(e,t){(function(r,n,i){e.exports=n($e(),P1(),I1())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,h=a.SHA1,d=a.HMAC,p=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var m=this.cfg,v=d.create(m.hasher,c),y=o.create(),E=o.create([1]),x=y.words,_=E.words,w=m.keySize,T=m.iterations;x.length<w;){var P=v.update(f).finalize(E);v.reset();for(var I=P.words,R=I.length,M=P,N=1;N<T;N++){M=v.finalize(M),v.reset();for(var k=M.words,L=0;L<R;L++)I[L]^=k[L]}y.concat(P),_[0]++}return y.sigBytes=w*4,y}});n.PBKDF2=function(c,f,m){return p.create(m).compute(c,f)}}(),r.PBKDF2})}(vm)),vm.exports}var xm={exports:{}},fw;function Oo(){return fw||(fw=1,function(e,t){(function(r,n,i){e.exports=n($e(),P1(),I1())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,h=a.MD5,d=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,c){for(var f,m=this.cfg,v=m.hasher.create(),y=o.create(),E=y.words,x=m.keySize,_=m.iterations;E.length<x;){f&&v.update(f),f=v.update(p).finalize(c),v.reset();for(var w=1;w<_;w++)f=v.finalize(f),v.reset();y.concat(f)}return y.sigBytes=x*4,y}});n.EvpKDF=function(p,c,f){return d.create(f).compute(p,c)}}(),r.EvpKDF})}(xm)),xm.exports}var ym={exports:{}},pw;function rr(){return pw||(pw=1,function(e,t){(function(r,n,i){e.exports=n($e(),Oo())})(Ne,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,h=s.BufferedBlockAlgorithm,d=i.enc;d.Utf8;var p=d.Base64,c=i.algo,f=c.EvpKDF,m=s.Cipher=h.extend({cfg:o.extend(),createEncryptor:function(k,L){return this.create(this._ENC_XFORM_MODE,k,L)},createDecryptor:function(k,L){return this.create(this._DEC_XFORM_MODE,k,L)},init:function(k,L,W){this.cfg=this.cfg.extend(W),this._xformMode=k,this._key=L,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(L){return typeof L=="string"?N:I}return function(L){return{encrypt:function(W,D,U){return k(D).encrypt(L,W,D,U)},decrypt:function(W,D,U){return k(D).decrypt(L,W,D,U)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var v=i.mode={},y=s.BlockCipherMode=o.extend({createEncryptor:function(k,L){return this.Encryptor.create(k,L)},createDecryptor:function(k,L){return this.Decryptor.create(k,L)},init:function(k,L){this._cipher=k,this._iv=L}}),E=v.CBC=function(){var k=y.extend();k.Encryptor=k.extend({processBlock:function(W,D){var U=this._cipher,X=U.blockSize;L.call(this,W,D,X),U.encryptBlock(W,D),this._prevBlock=W.slice(D,D+X)}}),k.Decryptor=k.extend({processBlock:function(W,D){var U=this._cipher,X=U.blockSize,K=W.slice(D,D+X);U.decryptBlock(W,D),L.call(this,W,D,X),this._prevBlock=K}});function L(W,D,U){var X,K=this._iv;K?(X=K,this._iv=n):X=this._prevBlock;for(var Z=0;Z<U;Z++)W[D+Z]^=X[Z]}return k}(),x=i.pad={},_=x.Pkcs7={pad:function(k,L){for(var W=L*4,D=W-k.sigBytes%W,U=D<<24|D<<16|D<<8|D,X=[],K=0;K<D;K+=4)X.push(U);var Z=a.create(X,D);k.concat(Z)},unpad:function(k){var L=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=L}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:_}),reset:function(){var k;m.reset.call(this);var L=this.cfg,W=L.iv,D=L.mode;this._xformMode==this._ENC_XFORM_MODE?k=D.createEncryptor:(k=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,W&&W.words):(this._mode=k.call(D,this,W&&W.words),this._mode.__creator=k)},_doProcessBlock:function(k,L){this._mode.processBlock(k,L)},_doFinalize:function(){var k,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),L.unpad(k)),k},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),T=i.format={},P=T.OpenSSL={stringify:function(k){var L,W=k.ciphertext,D=k.salt;return D?L=a.create([1398893684,1701076831]).concat(D).concat(W):L=W,L.toString(p)},parse:function(k){var L,W=p.parse(k),D=W.words;return D[0]==1398893684&&D[1]==1701076831&&(L=a.create(D.slice(2,4)),D.splice(0,4),W.sigBytes-=16),w.create({ciphertext:W,salt:L})}},I=s.SerializableCipher=o.extend({cfg:o.extend({format:P}),encrypt:function(k,L,W,D){D=this.cfg.extend(D);var U=k.createEncryptor(W,D),X=U.finalize(L),K=U.cfg;return w.create({ciphertext:X,key:W,iv:K.iv,algorithm:k,mode:K.mode,padding:K.padding,blockSize:k.blockSize,formatter:D.format})},decrypt:function(k,L,W,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var U=k.createDecryptor(W,D).finalize(L.ciphertext);return U},_parse:function(k,L){return typeof k=="string"?L.parse(k,this):k}}),R=i.kdf={},M=R.OpenSSL={execute:function(k,L,W,D){D||(D=a.random(64/8));var U=f.create({keySize:L+W}).compute(k,D),X=a.create(U.words.slice(L),W*4);return U.sigBytes=L*4,w.create({key:U,iv:X,salt:D})}},N=s.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:M}),encrypt:function(k,L,W,D){D=this.cfg.extend(D);var U=D.kdf.execute(W,k.keySize,k.ivSize);D.iv=U.iv;var X=I.encrypt.call(this,k,L,U.key,D);return X.mixIn(U),X},decrypt:function(k,L,W,D){D=this.cfg.extend(D),L=this._parse(L,D.format);var U=D.kdf.execute(W,k.keySize,k.ivSize,L.salt);D.iv=U.iv;var X=I.decrypt.call(this,k,L,U.key,D);return X}})}()})}(ym)),ym.exports}var _m={exports:{}},mw;function HM(){return mw||(mw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize;i.call(this,s,o,h,a),this._prevBlock=s.slice(o,o+h)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize,d=s.slice(o,o+h);i.call(this,s,o,h,a),this._prevBlock=d}});function i(s,o,a,h){var d,p=this._iv;p?(d=p.slice(0),this._iv=void 0):d=this._prevBlock,h.encryptBlock(d,0);for(var c=0;c<a;c++)s[o+c]^=d[c]}return n}(),r.mode.CFB})}(_m)),_m.exports}var bm={exports:{}},gw;function zM(){return gw||(gw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize,d=this._iv,p=this._counter;d&&(p=this._counter=d.slice(0),this._iv=void 0);var c=p.slice(0);a.encryptBlock(c,0),p[h-1]=p[h-1]+1|0;for(var f=0;f<h;f++)s[o+f]^=c[f]}});return n.Decryptor=i,n}(),r.mode.CTR})}(bm)),bm.exports}var wm={exports:{}},vw;function GM(){return vw||(vw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var h=a>>16&255,d=a>>8&255,p=a&255;h===255?(h=0,d===255?(d=0,p===255?p=0:++p):++d):++h,a=0,a+=h<<16,a+=d<<8,a+=p}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,h){var d=this._cipher,p=d.blockSize,c=this._iv,f=this._counter;c&&(f=this._counter=c.slice(0),this._iv=void 0),s(f);var m=f.slice(0);d.encryptBlock(m,0);for(var v=0;v<p;v++)a[h+v]^=m[v]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(wm)),wm.exports}var Sm={exports:{}},xw;function WM(){return xw||(xw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize,d=this._iv,p=this._keystream;d&&(p=this._keystream=d.slice(0),this._iv=void 0),a.encryptBlock(p,0);for(var c=0;c<h;c++)s[o+c]^=p[c]}});return n.Decryptor=i,n}(),r.mode.OFB})}(Sm)),Sm.exports}var Em={exports:{}},yw;function jM(){return yw||(yw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})}(Em)),Em.exports}var Tm={exports:{}},_w;function $M(){return _w||(_w=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,h=s+a-1;n.clamp(),n.words[h>>>2]|=a<<24-h%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(Tm)),Tm.exports}var Cm={exports:{}},bw;function VM(){return bw||(bw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(Cm)),Cm.exports}var Am={exports:{}},ww;function XM(){return ww||(ww=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Am)),Am.exports}var km={exports:{}},Sw;function YM(){return Sw||(Sw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})}(km)),km.exports}var Pm={exports:{}},Ew;function KM(){return Ew||(Ew=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Pm)),Pm.exports}var Im={exports:{}},Tw;function QM(){return Tw||(Tw=1,function(e,t){(function(r,n,i){e.exports=n($e(),rr())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.CipherParams,a=i.enc,h=a.Hex,d=i.format;d.Hex={stringify:function(p){return p.ciphertext.toString(h)},parse:function(p){var c=h.parse(p);return o.create({ciphertext:c})}}}(),r.format.Hex})}(Im)),Im.exports}var Rm={exports:{}},Cw;function qM(){return Cw||(Cw=1,function(e,t){(function(r,n,i){e.exports=n($e(),qa(),Za(),Oo(),rr())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],h=[],d=[],p=[],c=[],f=[],m=[],v=[],y=[],E=[];(function(){for(var w=[],T=0;T<256;T++)T<128?w[T]=T<<1:w[T]=T<<1^283;for(var P=0,I=0,T=0;T<256;T++){var R=I^I<<1^I<<2^I<<3^I<<4;R=R>>>8^R&255^99,a[P]=R,h[R]=P;var M=w[P],N=w[M],k=w[N],L=w[R]*257^R*16843008;d[P]=L<<24|L>>>8,p[P]=L<<16|L>>>16,c[P]=L<<8|L>>>24,f[P]=L;var L=k*16843009^N*65537^M*257^P*16843008;m[R]=L<<24|L>>>8,v[R]=L<<16|L>>>16,y[R]=L<<8|L>>>24,E[R]=L,P?(P=M^w[w[w[k^M]]],I^=w[w[I]]):P=I=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],_=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var T=this._keyPriorReset=this._key,P=T.words,I=T.sigBytes/4,R=this._nRounds=I+6,M=(R+1)*4,N=this._keySchedule=[],k=0;k<M;k++)k<I?N[k]=P[k]:(w=N[k-1],k%I?I>6&&k%I==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=x[k/I|0]<<24),N[k]=N[k-I]^w);for(var L=this._invKeySchedule=[],W=0;W<M;W++){var k=M-W;if(W%4)var w=N[k];else var w=N[k-4];W<4||k<=4?L[W]=w:L[W]=m[a[w>>>24]]^v[a[w>>>16&255]]^y[a[w>>>8&255]]^E[a[w&255]]}}},encryptBlock:function(w,T){this._doCryptBlock(w,T,this._keySchedule,d,p,c,f,a)},decryptBlock:function(w,T){var P=w[T+1];w[T+1]=w[T+3],w[T+3]=P,this._doCryptBlock(w,T,this._invKeySchedule,m,v,y,E,h);var P=w[T+1];w[T+1]=w[T+3],w[T+3]=P},_doCryptBlock:function(w,T,P,I,R,M,N,k){for(var L=this._nRounds,W=w[T]^P[0],D=w[T+1]^P[1],U=w[T+2]^P[2],X=w[T+3]^P[3],K=4,Z=1;Z<L;Z++){var F=I[W>>>24]^R[D>>>16&255]^M[U>>>8&255]^N[X&255]^P[K++],O=I[D>>>24]^R[U>>>16&255]^M[X>>>8&255]^N[W&255]^P[K++],z=I[U>>>24]^R[X>>>16&255]^M[W>>>8&255]^N[D&255]^P[K++],H=I[X>>>24]^R[W>>>16&255]^M[D>>>8&255]^N[U&255]^P[K++];W=F,D=O,U=z,X=H}var F=(k[W>>>24]<<24|k[D>>>16&255]<<16|k[U>>>8&255]<<8|k[X&255])^P[K++],O=(k[D>>>24]<<24|k[U>>>16&255]<<16|k[X>>>8&255]<<8|k[W&255])^P[K++],z=(k[U>>>24]<<24|k[X>>>16&255]<<16|k[W>>>8&255]<<8|k[D&255])^P[K++],H=(k[X>>>24]<<24|k[W>>>16&255]<<16|k[D>>>8&255]<<8|k[U&255])^P[K++];w[T]=F,w[T+1]=O,w[T+2]=z,w[T+3]=H},keySize:256/32});n.AES=s._createHelper(_)}(),r.AES})}(Rm)),Rm.exports}var Mm={exports:{}},Aw;function ZM(){return Aw||(Aw=1,function(e,t){(function(r,n,i){e.exports=n($e(),qa(),Za(),Oo(),rr())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],d=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=o.extend({_doReset:function(){for(var x=this._key,_=x.words,w=[],T=0;T<56;T++){var P=h[T]-1;w[T]=_[P>>>5]>>>31-P%32&1}for(var I=this._subKeys=[],R=0;R<16;R++){for(var M=I[R]=[],N=p[R],T=0;T<24;T++)M[T/6|0]|=w[(d[T]-1+N)%28]<<31-T%6,M[4+(T/6|0)]|=w[28+(d[T+24]-1+N)%28]<<31-T%6;M[0]=M[0]<<1|M[0]>>>31;for(var T=1;T<7;T++)M[T]=M[T]>>>(T-1)*4+3;M[7]=M[7]<<5|M[7]>>>27}for(var k=this._invSubKeys=[],T=0;T<16;T++)k[T]=I[15-T]},encryptBlock:function(x,_){this._doCryptBlock(x,_,this._subKeys)},decryptBlock:function(x,_){this._doCryptBlock(x,_,this._invSubKeys)},_doCryptBlock:function(x,_,w){this._lBlock=x[_],this._rBlock=x[_+1],v.call(this,4,252645135),v.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),v.call(this,1,1431655765);for(var T=0;T<16;T++){for(var P=w[T],I=this._lBlock,R=this._rBlock,M=0,N=0;N<8;N++)M|=c[N][((R^P[N])&f[N])>>>0];this._lBlock=R,this._rBlock=I^M}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,v.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),x[_]=this._lBlock,x[_+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(x,_){var w=(this._lBlock>>>x^this._rBlock)&_;this._rBlock^=w,this._lBlock^=w<<x}function y(x,_){var w=(this._rBlock>>>x^this._lBlock)&_;this._lBlock^=w,this._rBlock^=w<<x}n.DES=o._createHelper(m);var E=a.TripleDES=o.extend({_doReset:function(){var x=this._key,_=x.words;if(_.length!==2&&_.length!==4&&_.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=_.slice(0,2),T=_.length<4?_.slice(0,2):_.slice(2,4),P=_.length<6?_.slice(0,2):_.slice(4,6);this._des1=m.createEncryptor(s.create(w)),this._des2=m.createEncryptor(s.create(T)),this._des3=m.createEncryptor(s.create(P))},encryptBlock:function(x,_){this._des1.encryptBlock(x,_),this._des2.decryptBlock(x,_),this._des3.encryptBlock(x,_)},decryptBlock:function(x,_){this._des3.decryptBlock(x,_),this._des2.encryptBlock(x,_),this._des1.decryptBlock(x,_)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(E)}(),r.TripleDES})}(Mm)),Mm.exports}var Nm={exports:{}},kw;function JM(){return kw||(kw=1,function(e,t){(function(r,n,i){e.exports=n($e(),qa(),Za(),Oo(),rr())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var p=this._key,c=p.words,f=p.sigBytes,m=this._S=[],v=0;v<256;v++)m[v]=v;for(var v=0,y=0;v<256;v++){var E=v%f,x=c[E>>>2]>>>24-E%4*8&255;y=(y+m[v]+x)%256;var _=m[v];m[v]=m[y],m[y]=_}this._i=this._j=0},_doProcessBlock:function(p,c){p[c]^=h.call(this)},keySize:256/32,ivSize:0});function h(){for(var p=this._S,c=this._i,f=this._j,m=0,v=0;v<4;v++){c=(c+1)%256,f=(f+p[c])%256;var y=p[c];p[c]=p[f],p[f]=y,m|=p[(p[c]+p[f])%256]<<24-v*8}return this._i=c,this._j=f,m}n.RC4=s._createHelper(a);var d=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)h.call(this)}});n.RC4Drop=s._createHelper(d)}(),r.RC4})}(Nm)),Nm.exports}var Bm={exports:{}},Pw;function e5(){return Pw||(Pw=1,function(e,t){(function(r,n,i){e.exports=n($e(),qa(),Za(),Oo(),rr())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],h=[],d=[],p=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,m=this.cfg.iv,v=0;v<4;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],E=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)c.call(this);for(var v=0;v<8;v++)E[v]^=y[v+4&7];if(m){var x=m.words,_=x[0],w=x[1],T=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,I=T>>>16|P&4294901760,R=P<<16|T&65535;E[0]^=T,E[1]^=I,E[2]^=P,E[3]^=R,E[4]^=T,E[5]^=I,E[6]^=P,E[7]^=R;for(var v=0;v<4;v++)c.call(this)}},_doProcessBlock:function(f,m){var v=this._X;c.call(this),a[0]=v[0]^v[5]>>>16^v[3]<<16,a[1]=v[2]^v[7]>>>16^v[5]<<16,a[2]=v[4]^v[1]>>>16^v[7]<<16,a[3]=v[6]^v[3]>>>16^v[1]<<16;for(var y=0;y<4;y++)a[y]=(a[y]<<8|a[y]>>>24)&16711935|(a[y]<<24|a[y]>>>8)&4278255360,f[m+y]^=a[y]},blockSize:128/32,ivSize:64/32});function c(){for(var f=this._X,m=this._C,v=0;v<8;v++)h[v]=m[v];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<h[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<h[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<h[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<h[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<h[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<h[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<h[6]>>>0?1:0)|0,this._b=m[7]>>>0<h[7]>>>0?1:0;for(var v=0;v<8;v++){var y=f[v]+m[v],E=y&65535,x=y>>>16,_=((E*E>>>17)+E*x>>>15)+x*x,w=((y&4294901760)*y|0)+((y&65535)*y|0);d[v]=_^w}f[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,f[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,f[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,f[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,f[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,f[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,f[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,f[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.Rabbit=s._createHelper(p)}(),r.Rabbit})}(Bm)),Bm.exports}var Lm={exports:{}},Iw;function t5(){return Iw||(Iw=1,function(e,t){(function(r,n,i){e.exports=n($e(),qa(),Za(),Oo(),rr())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],h=[],d=[],p=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,m=this.cfg.iv,v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var E=0;E<4;E++)c.call(this);for(var E=0;E<8;E++)y[E]^=v[E+4&7];if(m){var x=m.words,_=x[0],w=x[1],T=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,I=T>>>16|P&4294901760,R=P<<16|T&65535;y[0]^=T,y[1]^=I,y[2]^=P,y[3]^=R,y[4]^=T,y[5]^=I,y[6]^=P,y[7]^=R;for(var E=0;E<4;E++)c.call(this)}},_doProcessBlock:function(f,m){var v=this._X;c.call(this),a[0]=v[0]^v[5]>>>16^v[3]<<16,a[1]=v[2]^v[7]>>>16^v[5]<<16,a[2]=v[4]^v[1]>>>16^v[7]<<16,a[3]=v[6]^v[3]>>>16^v[1]<<16;for(var y=0;y<4;y++)a[y]=(a[y]<<8|a[y]>>>24)&16711935|(a[y]<<24|a[y]>>>8)&4278255360,f[m+y]^=a[y]},blockSize:128/32,ivSize:64/32});function c(){for(var f=this._X,m=this._C,v=0;v<8;v++)h[v]=m[v];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<h[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<h[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<h[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<h[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<h[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<h[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<h[6]>>>0?1:0)|0,this._b=m[7]>>>0<h[7]>>>0?1:0;for(var v=0;v<8;v++){var y=f[v]+m[v],E=y&65535,x=y>>>16,_=((E*E>>>17)+E*x>>>15)+x*x,w=((y&4294901760)*y|0)+((y&65535)*y|0);d[v]=_^w}f[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,f[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,f[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,f[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,f[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,f[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,f[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,f[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.RabbitLegacy=s._createHelper(p)}(),r.RabbitLegacy})}(Lm)),Lm.exports}(function(e,t){(function(r,n,i){e.exports=n($e(),Pf(),MM(),NM(),qa(),BM(),Za(),P1(),PT(),LM(),IT(),DM(),OM(),FM(),I1(),UM(),Oo(),rr(),HM(),zM(),GM(),WM(),jM(),$M(),VM(),XM(),YM(),KM(),QM(),qM(),ZM(),JM(),e5(),t5())})(Ne,function(r){return r})})(xi);new Audio;function Dm(e,t){return xi.exports.SHA256(xi.exports.SHA256(xi.exports.SHA256(e+t**2)))}class Lu{name;pass;pfpurl;boughtpack;unlockedsongs;cpu;ram;progression;readstory;partners;partnersexp;selectedpartner;constructor(){this.name="",this.pass="",this.pfpurl="",this.cpu=20,this.ram=200,this.progression=[],this.boughtpack=[],this.unlockedsongs=[],this.readstory=[],this.partners=[],this.partnersexp=["0,5210"],this.selectedpartner=0}save(){this.cpu=this.cpu,this.ram=this.ram,document.cookie="status=saved;",document.cookie=`name=${this.name};`;let t="";this.pass="123456789";let r="",n="",i="",s="";this.boughtpack.forEach(o=>{t+=o+"/"}),this.unlockedsongs.forEach(o=>{n+=o+"/"}),this.readstory.forEach(o=>{r+=o+"/"}),this.partners.forEach(o=>{i+=o+"/"}),this.partnersexp.forEach(o=>{s+=o+"/"}),document.cookie="data="+xi.exports.AES.encrypt(`pfp:${this.pfpurl},cpu:${Dm(this.cpu.toString(),parseInt(this.pass))},ram:${Dm(this.ram.toString(),parseInt(this.pass))},prog:${this.progression},bought:${t},unlock:${n},readstory:${r},selectedpartner:${Dm(this.selectedpartner.toString(),parseInt(this.pass))},partners:${i},partnersexp:${s}`,this.pass).toString()}}const Om=new Audio;class r5{audiovolume;gauge;audio;audioctx;hitlist;effectvolume;score;hitbonus;maxscore;hitwaitlist;combo;playStartTime;cursor;audiopath;editoractive;mode;isPlaying;key;currenttime;highestcombo;beatmap;maxcombo;notespeed;WIDTH;duration;HEIGHT;chartoffset;inputoffset;mousedown;user;alert;constructor(){this.beatmap=null,this.key=["00","00","00","00","00"],this.audio=Om,this.audiopath="",this.chartoffset=0,this.inputoffset=0,this.audiovolume=NaN,this.effectvolume=NaN,this.gauge=0,this.highestcombo=0,this.hitwaitlist=[],this.maxcombo=NaN,this.score=0,this.hitbonus=0,this.notespeed=0,this.maxscore=NaN,this.combo=0,this.user=new Lu,this.duration=0,this.playStartTime=-1,this.isPlaying=!1,this.cursor=.5,this.mode="",this.currenttime=0,this.HEIGHT=AM(),this.WIDTH=CM(),this.hitlist=[],this.mousedown="",this.alert=["",0,0],this.editoractive=""}init(t,r,n,i,s,o,a,h,d){return this.audiovolume=t,this.effectvolume=r,this.audiopath=i,this.notespeed=a,this.maxscore=s,this.maxcombo=h,this.beatmap=o,this.user=d,Om.src=i,this.audio=new hr.Howl({src:[i],preload:!0,volume:.1}),this}NOTE_TRAVEL_DURATION(){return me/this.notespeed*1e3}NOTE_TRAVEL_FROM_LINE_TO_BOTTOM_DURATION(){return Le/this.notespeed*1e3}currentTime(){return this.audio.currentTime}async miss(t,r){this.hitlist.find(n=>n.startsWith(t.toString()+r.toString()))==null&&(this.gauge=Math.round(this.gauge*.8),this.combo=0,this.hitlist.push(t.toString()+","+r.toString()+",misslost"),em(this.currenttime,"miss",0))}async hit(t,r,n,i){this.hitlist.find(s=>s.startsWith(r.toString()+","+n.toString()))==null&&(t!="miss"?(this.gauge+=5,this.gauge>100&&(this.gauge=100),this.score+=this.idtoscore(t),this.combo+=1,this.combo>this.highestcombo&&(this.highestcombo=this.combo),em(r,t,i)):(this.gauge=Math.round(this.gauge*.9),this.combo=0,em(r,"bad",i)),n!=5&&(this.key[n-1]="01"),this.hitlist.push(r.toString()+","+n.toString()+","+t))}play(t){this.score=0,this.combo=0,this.hitlist=[],this.mode=t,this.isPlaying=!0,this.mode=="play"?(this.audio.play(),this.playStartTime=Date.now()):this.playStartTime=Date.now()}retry(){this.isPlaying=!0,this.score=0,this.combo=0,this.playStartTime=Date.now(),this.audio.seek(0),this.hitlist=[],this.audio.stop(),this.audio.off(),R1(this.user)}quit(){this.isPlaying=!1,this.score=0,this.combo=0,this.playStartTime=0,this.hitlist=[]}idtoscore(t){switch(t){case"perfect":return 100;case"great":return 80;case"good":return 60;case"ok":return 50;default:return 0}}setAudioPath(t){this.audiopath=t}setVolume(t){Om.volume=t}setEffectVolume(t){this.effectvolume=t}}const n5="/assets/play.605c0571.wav";function so(e,t){const r=6e4/t;return Math.floor(r/e)}function Rw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function ur(e,t){return JSON.parse(e)}function i5(e,t){const r=me*(parseFloat(Rw("SCROLL_SPEED_FACTOR"))/3)/1980,n=parseFloat(Rw("OFFSET")),i=JSON.parse(e),{audioPath:s,metadata:o,hitObjects:a,timingPoints:h,cursor:d,speedChanges:p}=i,c=typeof s=="string",f=typeof o.title=="string"&&typeof o.artist=="string"&&typeof o.creator=="string"&&typeof o.difficult=="string",m=Array.isArray(h)&&h.length>0&&h.every(({time:x,bpm:_,meter:w})=>typeof x=="number"&&typeof _=="number"&&typeof w=="number");h.forEach(x=>{x.speed*=r});let v=0;h.forEach((x,_)=>{const w=_==0?v:h[_-1].floorPosition,T=_==0?1:h[_-1].speed,P=_==0?1*0:h[_-1].time;h[_].floorPosition=w+T*(h[_].time-P)});const y=Array.isArray(a)&&a.length>0&&a.every(({type:x,column:_,startTime:w,endTime:T})=>["note","hold"].includes(x)&&typeof _=="number"&&typeof w=="number"&&(T!=null?typeof T=="number":!0));if(!(c&&f&&m&&y))throw new Error("Invalid beatmap");return i.timingPoints.forEach(x=>{x.time=x.time+n}),i.timingPoints=i.timingPoints.sort((x,_)=>x.time-_.time),i.hitObjects.forEach(x=>{if(x.startTime=x.startTime+n,x.endTime&&(x.endTime=x.endTime+n),x.type=="note"){let N=me,k=0,L=h.filter((W,D)=>x.startTime>=W.time).sort((W,D)=>W.time-D.time).reverse();L.forEach((W,D)=>{if(N>0&&L[D+1]!=null){const U=L[D+1].time,X=W.time;N-Rt(U,X,i.timingPoints)>=0?(k+=X-U,N-=Rt(U,X,i.timingPoints),console.log(N)):(k+=Jp(x.startTime-k,L.reverse(),N),N=0)}else N>0&&L[D+1]==null&&(k+=N/W.speed,N=0)}),x.screenStartTime=x.startTime-k,x.screenEndTime=x.startTime}if(x.type=="hold"){const N=i.timingPoints.find(D=>x.startTime>=D.time);x.ticks=[];for(let D=0;D<Math.floor((x.endTime-(x.startTime+so(4,N?.bpm)))/so(4,N?.bpm));D++)x.ticks.push(x.startTime+so(4,N?.bpm)*(D+1));let k=me+Rt(x.startTime,x.endTime,i.timingPoints),L=0,W=h.filter((D,U)=>{if(U+1==h.length)return x.startTime>=D.time||x.endTime>=D.time;const X=h[U+1].time;return x.startTime>=D.time&&x.startTime<=X||x.endTime>=D.time&&x.endTime<=X}).sort((D,U)=>D.time-U.time).reverse();W.forEach((D,U)=>{if(k>0&&W[U+1]!=null){const X=W[U+1].time,K=D.time;k-Rt(X,K,i.timingPoints)>=0?(L+=K-X,k-=Rt(X,K,i.timingPoints),console.log(k)):(L+=Jp(x.startTime-L,W.reverse(),k),k=0)}else k>0&&W[U+1]==null&&(L+=k/D.speed,k=0)}),x.screenStartTime=x.startTime-L,x.screenEndTime=x.endTime}const _=x.screenStartTime,w=x.screenEndTime;x.scrollPosList=[],x.scrollPosList.find(N=>N[0]==_)==null&&x.scrollPosList?.push([_,Rt(_,x.startTime,i.timingPoints)]);let T=h.sort((N,k)=>N.time-k.time).filter((N,k)=>_>=N.time||w>=N.time);if(T.length==0||T[0].time>_){const N=T.length==0?_:T[0].time;x.scrollPosList?.push([N,Rt(N,x.startTime,i.timingPoints)])}T.forEach((N,k)=>{const L=k+1!=T.length&&T[k+1].time<=w?T[k+1].time:w;N.time<_||N.time,x.scrollPosList?.push([L,Rt(L,x.startTime,i.timingPoints)])}),x.scrollPosList.find(N=>N[0]==w)==null&&x.scrollPosList?.push([w,Rt(w,x.startTime,i.timingPoints)]),x.scrollPosList?.forEach((N,k)=>{if(x.scrollPosList[k][1]>me&&x.scrollPosList[k+1]!=null){Bu(i.timingPoints.sort((W,D)=>W.time-D.time),x.scrollPosList[k][0]);const L=kr(me,[x.scrollPosList[k+1][1],x.scrollPosList[k][1]],[x.scrollPosList[k+1][0],x.scrollPosList[k][0]]);x.scrollPosList[k]=[L,me],x.screenStartTime=L}});let P=0,I=Rt(w,x.startTime,i.timingPoints),R=h.filter((N,k)=>w>=N.time).sort((N,k)=>N.time-k.time).reverse();const M=R[0]!=null?R[0].speed:r;P=Le/M,x.scrollPosList?.push([w+Le/M,I-Le]),x.screenEndTime+=P}),i.cursor=i.cursor.sort((x,_)=>x.startTime-_.startTime),i.cursor.forEach(x=>{x.startTime=x.startTime+=n}),i.timingPoints=i.timingPoints.sort((x,_)=>x.time-_.time),i.cursor.sort((x,_)=>x.startTime-_.startTime).forEach((x,_)=>{const w=i.timingPoints.sort((X,K)=>X.time-K.time),T=i.cursor.sort((X,K)=>X.startTime-K.startTime)[_+1]!=null?i.cursor.sort((X,K)=>X.startTime-K.startTime)[_+1].startTime:i.hitObjects.sort((X,K)=>{const Z=X.endTime!=null?X.endTime:X.startTime,F=K.endTime!=null?K.endTime:K.startTime;return Z-F}).reverse()[0].screenEndTime+1e3,P=i.timingPoints.find(X=>x.startTime>=X.time);x.ticks=[];for(let X=0;X<Math.floor((T-(x.startTime+so(4,P?.bpm)))/so(8,P?.bpm));X++)x.startTime+so(4,P?.bpm)*(X+1)<=T&&x.ticks.push(x.startTime+so(4,P?.bpm)*(X+1));x.endTime=T;let I=me+Rt(x.startTime,x.endTime,i.timingPoints)+Di,R=0;R+=Jp(x.startTime,i.timingPoints.sort((X,K)=>X.time-K.time),I),console.log(x.startTime,R),x.screenStartTime=x.startTime-R,x.screenEndTime=T;const M=x.screenStartTime,N=x.screenEndTime;x.scrollPosList=[],x.scrollPosList.push([M,Rt(M,x.startTime,i.timingPoints)]);let k=w.sort((X,K)=>X.time-K.time).filter((X,K)=>M>=X.time||N>=X.time);(k.length==0||k[0].time>M)&&(k.length==0||k[0].time,x.scrollPosList?.push([0,Rt(0,x.startTime,i.timingPoints)])),k.forEach((X,K)=>{const Z=K+1!=k.length&&k[K+1].time<=N?k[K+1].time:N;X.time<M||X.time,x.scrollPosList?.push([Z,Rt(Z,x.startTime,i.timingPoints)])}),x.scrollPosList.find(X=>X[0]==N)==null&&x.scrollPosList?.push([N,Rt(N,x.startTime,i.timingPoints)]),x.scrollPosList?.forEach((X,K)=>{if(x.scrollPosList[K][1]>me&&x.scrollPosList[K+1]!=null){Bu(i.timingPoints.sort((F,O)=>F.time-O.time),x.scrollPosList[K][0]);const Z=kr(me,[x.scrollPosList[K+1][1],x.scrollPosList[K][1]],[x.scrollPosList[K+1][0],x.scrollPosList[K][0]]);x.scrollPosList[K]=[Z,me],x.screenStartTime=Z}});let L=0,W=Rt(N,x.startTime,i.timingPoints),D=w.filter((X,K)=>N>=X.time).sort((X,K)=>X.time-K.time).reverse();const U=D[0]!=null?D[0].speed:r;L=Le/U,x.scrollPosList?.push([N+Le/U,W-Le]),x.screenEndTime+=L}),i.hitObjects.sort((x,_)=>{const w=x.endTime!=null?x.endTime:x.startTime,T=_.endTime!=null?_.endTime:_.startTime;return w-T}),i}async function Ri(e,t,r){const i=await(await fetch(`./songs/${r}/${e}/${e}_${t}.json`)).json(),s=ur(JSON.stringify(i)),a=await(await fetch("./songs/difficulty.json")).json(),d=await(await fetch("./songs/cc.json")).json();return s.metadata.difficult=a[s.id],s.metadata.difficultcc=parseInt(d[s.id]),s}let se={utopia:{name:"HELLO_World!!",chapter:1,description:`One boy\u2019s journey reflects through  the NEODITRONIX.SYS:VER=UTOPIA
..Or perhaps two.`,banner:"banners/utopia.jpg",price:5,pack:{starrydream:{customtitle:!1,unlocktype:"quest",charts:{Lite:{chart:await Ri("starrydream","LI","utopia")},Neon:{chart:await Ri("starrydream","NE","utopia")},Enigma:{chart:await Ri("starrydream","EN","utopia")}}},sawasdee:{unlocktype:"pay",customtitle:!1,unlock:"10 RAM",charts:{Lite:{chart:await Ri("sawasdee","LI","utopia")},Neon:{chart:await Ri("sawasdee","NE","utopia")},Enigma:{chart:await Ri("sawasdee","EN","utopia")}}}}},eden:{name:"Eden",chapter:0,description:"I\u2019m no longer in control, let that paper guide your own way.",banner:"banners/eden.jpg",price:5,pack:{stellify:{customtitle:!1,unlock:"10 CPU",unlocktype:"pay",charts:{Lite:{chart:await Ri("stellify","LI","eden")},Neon:{chart:await Ri("stellify","NE","eden")},Enigma:{chart:await Ri("stellify","EN","eden")}}}}}};var RT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Mw=jr.createContext&&jr.createContext(RT),Ns=globalThis&&globalThis.__assign||function(){return Ns=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ns.apply(this,arguments)},s5=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function MT(e){return e&&e.map(function(t,r){return jr.createElement(t.tag,Ns({key:r},t.attr),MT(t.child))})}function Yn(e){return function(t){return A(o5,{...Ns({attr:Ns({},e.attr)},t),children:MT(e.child)})}}function o5(e){var t=function(r){var n=e.attr,i=e.size,s=e.title,o=s5(e,["attr","size","title"]),a=i||r.size||"1em",h;return r.className&&(h=r.className),e.className&&(h=(h?h+" ":"")+e.className),V("svg",{...Ns({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:h,style:Ns(Ns({color:e.color||r.color},r.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[s&&A("title",{children:s}),e.children]})};return Mw!==void 0?A(Mw.Consumer,{children:function(r){return t(r)}}):t(RT)}function a5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z"}}]})(e)}function l5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.469 332.802l29.863 29.864L352 256 245.332 149.333l-29.863 29.865 55.469 55.469H64v42.666h205.864l-54.395 55.469zM405.334 64H106.666C83.198 64 64 83.198 64 106.666V192h42.666v-85.333h298.668v298.668H106.666V320H64v85.334C64 428.802 83.198 448 106.666 448h298.668C428.802 448 448 428.802 448 405.334V106.666C448 83.198 428.802 64 405.334 64z"}}]})(e)}class Fm{id;cpurate;ramrate;name;subname;imagesrc;background;skilltype;skilldescription;constructor(){this.cpurate=0,this.ramrate=0,this.name="",this.imagesrc="",this.subname="",this.id="",this.background="",this.skilltype=0,this.skilldescription=""}init(t,r,n,i,s,o,a,h,d){return this.id=t,this.background=d,this.cpurate=r,this.ramrate=n,this.name=i,this.subname=s,this.imagesrc=o,this.skilltype=a,this.skilldescription=h,this}}const rt={data:[new Fm().init("shiro2",1,1,"Shiro","The First","Partners/Shiro.png",1,"Normal Play","utopia_2"),new Fm().init("shiro",1,1.2,"Shiro","Legacy","Partners/Shiro2.png",1,"Normal Play","utopia_space"),new Fm().init("rei",1.2,1,"Rei","STELLIFY","Partners/Rei.png",1,"Normal Play","eden_stellify")]};function u5(e){const[t,r]=Y.exports.useState(e.user.selectedpartner),[n,i]=Y.exports.useState("partner-img partner-img-animation"),[s,o]=Y.exports.useState("partner-display partner-display-animation");return e.user,e.user.partnersexp.find((a,h)=>{if(a.startsWith(`${e.user.selectedpartner}`))return!0}),V(Me,{children:[V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Buddy Select!"}),A("div",{className:"optionsmenu-partners-select-list",children:e.user.partners.map((a,h)=>V("div",{className:h==t?"partners-select partners-select-selected":"partners-select",onClick:()=>{i("partner-img"),o("partner-display"),setTimeout(()=>{e.user.selectedpartner=h,document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").src=rt.data[e.user.partners[h]].imagesrc),document.getElementById("storymenu-chapter-banner")!=null&&(document.getElementById("storymenu-chapter-banner").src=`BG/${rt.data[e.user.partners[e.user.selectedpartner]].background}.jpg`),i("partner-img partner-img-animation"),o("partner-display partner-display-animation"),r(h)},10)},children:[A("img",{src:rt.data[a].imagesrc,className:"partners-select-icon"}),A("span",{className:"partners-select-name",children:rt.data[a].name})]}))})]}),A("img",{className:n,src:rt.data[e.user.partners[t]].imagesrc}),V("div",{className:s,children:[rt.data[e.user.partners[t]].subname!=""?A("span",{className:"partner-display-subname",children:rt.data[e.user.partners[t]].subname}):null,A("span",{className:"partner-display-name",children:rt.data[e.user.partners[t]].name}),A("span",{className:"partner-display-description",children:rt.data[e.user.partners[t]].skilldescription}),A("br",{}),V("span",{className:"partner-display-description2",children:["RAM BONUS : ",V("b",{children:[rt.data[e.user.partners[t]].ramrate,"x"]})]}),V("span",{className:"partner-display-description2",children:["CPU BONUS : ",V("b",{children:[rt.data[e.user.partners[t]].cpurate,"x"]})]}),A("br",{})]})]})}function c5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm62.63 304L296 374.63 177.37 256 296 137.37 318.63 160l-96 96z"}}]})(e)}new Audio;function on(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function h5(e){e.user;let[t,r]=Y.exports.useState(on("COL_1_KEY")),[n,i]=Y.exports.useState(on("COL_2_KEY")),[s,o]=Y.exports.useState(on("COL_3_KEY")),[a,h]=Y.exports.useState(on("COL_4_KEY")),[d,p]=Y.exports.useState(on("CURSOR_LEFT_KEY")),[c,f]=Y.exports.useState(on("CURSOR_RIGHT_KEY")),[m,v]=Y.exports.useState(on("COL_1_KEY2")),[y,E]=Y.exports.useState(on("COL_2_KEY2")),[x,_]=Y.exports.useState(on("COL_3_KEY2")),[w,T]=Y.exports.useState(on("COL_4_KEY2")),[P,I]=Y.exports.useState(on("CURSOR_LEFT_KEY2")),[R,M]=Y.exports.useState(on("CURSOR_RIGHT_KEY2"));return A(Me,{children:V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Keybind Control"}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"LC Input"}),A("input",{type:"text",value:d,onChange:N=>{p(N.target.value),document.cookie=`CURSOR_LEFT_KEY=${N.target.value};`}})]}),V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"RC Input"}),A("input",{type:"text",value:c,onChange:N=>{f(N.target.value),document.cookie=`CURSOR_RIGHT_KEY=${N.target.value};`}})]})]}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:t,onChange:N=>{r(N.target.value),document.cookie=`COL_1_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"1st Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:n,onChange:N=>{i(N.target.value),document.cookie=`COL_2_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"2nd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:s,onChange:N=>{o(N.target.value),document.cookie=`COL_3_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"3rd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:a,onChange:N=>{h(N.target.value),document.cookie=`COL_4_KEY=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"4th Lane"})]})]}),A("hr",{}),A("h1",{children:"Alternate Keybind Control"}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"LC Input"}),A("input",{type:"text",value:P,onChange:N=>{I(N.target.value),document.cookie=`CURSOR_LEFT_KEY2=${N.target.value};`}})]}),V("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"RC Input"}),A("input",{type:"text",value:R,onChange:N=>{M(N.target.value),document.cookie=`CURSOR_RIGHT_KEY2=${N.target.value};`}})]})]}),V("div",{className:"optionsmenu-keys",children:[V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:m,onChange:N=>{v(N.target.value),document.cookie=`COL_1_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"1st Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:y,onChange:N=>{E(N.target.value),document.cookie=`COL_2_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"2nd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:x,onChange:N=>{_(N.target.value),document.cookie=`COL_3_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"3rd Lane"})]}),V("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:w,onChange:N=>{T(N.target.value),document.cookie=`COL_4_KEY2=${N.target.value};`}}),A("span",{className:"optionsmenu-key-text",children:"4th Lane"})]})]}),A("hr",{}),A("div",{className:"optionsmenu-list",children:A("div",{className:"optionsmenu-list-name",children:"Tips"})}),A("div",{className:"optionsmenu-list",children:A("div",{className:"optionsmenu-list-name",children:"It is recommend to use a keybind where all the keys are close together (like the default keybind that I gave you!), every charts is designed to be played with this playstyle!"})})]})})}new Audio;function Dl(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function d5(e){e.user;let[t,r]=Y.exports.useState(Dl("SCROLL_SPEED_FACTOR")),[n,i]=Y.exports.useState(Dl("OFFSET"));Y.exports.useState(Dl("BACKGROUND")),Y.exports.useState(Dl("INPUTOFFSET"));let[s,o]=Y.exports.useState(Dl("TOGGLECOLOR"));return A(Me,{children:V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Gameplay Settings"}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Offset"}),A("input",{type:"number",className:"optionsmenu-list-name",value:n,onChange:a=>{i(a.target.value),document.cookie=`OFFSET=${a.target.value};`}})]}),A("div",{className:"optionsmenu-list",children:A("small",{children:" * If you get EARLY judgement, add offset."})}),A("div",{className:"optionsmenu-list",children:A("small",{children:" * If you get LATE judgement, reduce offset."})}),A("hr",{}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Scroll Speed"}),A("input",{type:"number",className:"optionsmenu-list-name",value:t,onChange:a=>{r(a.target.value),document.cookie=`SCROLL_SPEED_FACTOR=${a.target.value};`}})]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Toggle Lane Coloring"}),V("select",{name:"",value:s,onChange:a=>{o(a.target.value),document.cookie=`TOGGLECOLOR=${a.target.value};`},className:"optionsmenu-list-name",children:[A("option",{value:"True",children:"True"}),A("option",{value:"False",children:"False"})]})]})]})})}new Audio;function f5(e){e.user;let[t,r]=Y.exports.useState(e.user.name);return A(Me,{children:V("div",{className:"optionsmenu-container",children:[A("h1",{children:"User Settings"}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Username"}),A("input",{type:"text",className:"optionsmenu-list-name",value:t,onChange:n=>{e.user.name=n.target.value,r(e.user.name)}})]})]})})}new Audio;function p5(e){return A(Me,{children:V("div",{className:"optionsmenu-container",children:[A("h1",{children:"Credits"}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"A game by"})," log() / ohm002"]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Additional Music"}),"encX, Vizunave"]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Programming Help"})," Smug Nanachi, 0thElement"]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Programming Help"})," Marvin (minetoblend)"]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Music Scouting"}),"blazin"]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Additional Graphic Design"})," 0ppInOsu"]}),A("h1",{children:"Socials"}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Discord Server"}),"  ",A("a",{href:"https://discord.gg/PB7JNFEUhq",children:"Discord Invite Link"})]}),V("div",{className:"optionsmenu-list",children:[A("b",{children:"Twitter"})," ",A("a",{href:"https://twitter.com/neuroditronix",children:"Twitter Link"})]})]})})}new Audio;function Xu(e){const[t,r]=Y.exports.useState("none"),[n,i]=Y.exports.useState("0"),[s,o]=Y.exports.useState("buddy"),[a,h]=Y.exports.useState(0);Y.exports.useState(e.user.selectedpartner),document.documentElement.style.filter="invert(0)";let d=e.user;const p=()=>{d.save()};s=="buddy"&&n=="1"?document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").style.opacity=0):document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").style.opacity=1);const c=()=>{t=="none"&&(r("auto"),i("1")),t=="auto"&&(r("none"),i("0"))};let f=0;return e.user.progression.sort((m,v)=>parseInt(m.split("-")[1])-parseInt(v.split("-")[1])).map((m,v)=>{v<30&&(f+=se[m.split("-")[0].split(".")[0]].pack[m.split("-")[0].split(".")[1]].charts[m.split("-")[0].split(".")[2]].chart.metadata.difficultcc*(parseFloat(m.split("-")[1])/100))}),f=Math.round(f/30*100)/100,V(Me,{children:[A("img",{src:`BG/${rt.data[e.user.partners[e.user.selectedpartner]].background}.jpg`,alt:"",className:"storymenu-chapter-banner",id:"storymenu-chapter-banner"}),V("div",{className:"navbar",children:[V("div",{className:"usercard",onClick:p,children:[A("img",{src:rt.data[e.user.partners[e.user.selectedpartner]].imagesrc,style:{objectFit:"cover"},className:"usercard-pfp"}),V("div",{className:"usercard-2ndcol",children:[V("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"USER"}),A("div",{className:"usercard-username",children:d.name})]}),V("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"RAM"}),A("div",{className:"usercard-username",children:d.ram})]}),V("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"CPU"}),A("div",{className:"usercard-username",children:d.cpu})]}),A("div",{className:"usercard-gradingcontainer",children:V("div",{className:"usercard-grading",children:[A("div",{className:"usercard-gradingtext",children:"GRADING"}),A("div",{className:"usercard-gradingval",children:f})]})}),A("div",{className:"usercard-usernamecard",children:V("div",{className:"navbar-button",onClick:c,children:[A(a5,{})," Options"]})})]})]}),A("div",{className:"navbarheader",children:e.display})]}),V("div",{className:"optionsmenu",style:{pointerEvents:t,opacity:n,transitionDuration:"0.1s"},children:[s=="buddy"?A(u5,{user:e.user}):s=="gameplay"?A(d5,{user:e.user}):s=="user"?A(f5,{user:e.user}):s=="credits"?A(p5,{user:e.user}):s=="key"?A(h5,{user:e.user}):null,V("div",{className:"navbar-back",onClick:c,children:[A(c5,{})," Back"]}),V("div",{className:"optionsmenu-navbar",children:[A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{o("buddy"),h(Math.round(Math.random()*100))},style:{opacity:s=="buddy"?1:.5,transitionDuration:"0.5s"},children:"Buddy Select!"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("key")},style:{opacity:s=="key"?1:.5,transitionDuration:"0.5s"},children:"Keybind Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("gameplay")},style:{opacity:s=="gameplay"?1:.5,transitionDuration:"0.5s"},children:"Gameplay Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("user")},style:{opacity:s=="user"?1:.5,transitionDuration:"0.5s"},children:"Profile Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("credits")},style:{opacity:s=="credits"?1:.5,transitionDuration:"0.5s"},children:"Credits & Socials"})]})]})]})}function Kl(e){return Yn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304z"}},{tag:"path",attr:{d:"M232 840h560V536H232v304zm280-226a48.01 48.01 0 0 1 28 87v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 0 1 28-87z"}},{tag:"path",attr:{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 1 0-56 0z"}}]})(e)}const Nw=[{type:"Partner",item:1,probability:30},{type:"Partner",item:2,probability:30},{type:"CPU",item:10,probability:10},{type:"CPU",item:12,probability:10},{type:"CPU",item:15,probability:10},{type:"CPU",item:5,probability:10}];function m5(e){const[t,r]=Y.exports.useState(e.toggle),[n,i]=Y.exports.useState(!1),[s,o]=Y.exports.useState(0),a=Y.exports.useRef(-1),[h,d]=Y.exports.useState(""),p=()=>{let c=0;Nw.forEach(v=>{c+=v.probability});let f=Math.random()*c,m;for(const v of Nw.sort((y,E)=>y.probability-E.probability).reverse())if(f<v.probability){m=v;break}else f-=v.probability;setTimeout(()=>{d(m?.type),o(m?.item),m?.type=="Partner"&&(console.log(e.user.partners.find(v=>v==m?.item)),e.user.partners.find(v=>v==m?.item)!=null?(d("CPU"),o(0)):e.user.partners.push(m?.item),console.log(e.user.partners)),m?.type=="CPU"&&(e.user.cpu+=m?.item),i(!0)},500)};return Y.exports.useEffect(()=>{document.addEventListener("keypress",c=>{c.key=="Enter"&&(i(!1),a.current!=-1&&a.current<=10&&(p(),a.current=a.current+1))})},[]),V(Me,{children:[V("div",{className:"gacha-container",style:{opacity:t?1:0,transitionDuration:"1s",pointerEvents:t?"inherit":"none",animation:t?"fadein 0.2s":"fadeout 0.2s"},children:[A("link",{rel:"stylesheet",href:"./chaptercss/BU/gacha.css"}),A("div",{className:"navbar-button",onClick:()=>{r(!1)},children:" Quit"}),A("br",{}),V("div",{children:[A("img",{src:"Gacha/1.jpeg",className:"gacha-event-banner",alt:""}),A("div",{className:"gacha-buys",children:V("div",{className:"gacha-buybutton",style:{opacity:e.user.ram>=100?1:.5,pointerEvents:e.user.ram>=100&&t?"auto":"none"},onClick:()=>{e.user.ram>=100&&(e.user.ram-=100),p()},children:[V("span",{className:"gacha-buydisplay",children:[A(Kl,{})," Recover Data"]}),A("span",{children:"100 RAM"}),e.user.ram>=100?null:A("small",{children:"Inefficient Balance"})]})})]})]}),V("div",{className:`gacha-reward-container ${n?"gacha-reward-animation":""}`,onClick:()=>{i(!1),a.current!=-1&&a.current<=10&&(p(),a.current=a.current+1)},style:{pointerEvents:n?"inherit":"none",backgroundImage:"url(BG/utopia_space.jpg)"},children:[A("div",{className:"gacha-reward-container-eff"}),h=="CPU"?V(Me,{children:[A("h1",{children:"DATA RECOVERED"}),V("div",{className:"gacha-reward-cpu",children:[s," CPU"]})]}):null,h=="Partner"?V(Me,{children:[A("h1",{children:"New Buddy!"}),A("img",{src:rt.data[s].imagesrc,className:"gacha-reward-partner-img"}),V("div",{className:"gacha-reward-partner",children:[rt.data[s].subname!=""?A("span",{className:"partner-display-subname",children:rt.data[s].subname}):null,A("span",{className:"partner-display-name",children:rt.data[s].name}),A("span",{className:"partner-display-description",children:rt.data[s].skilldescription}),A("br",{}),V("span",{className:"partner-display-description2",children:["TEMPORARY DATA : ",V("b",{children:[rt.data[s].ramrate,"x"]})]}),V("span",{className:"partner-display-description2",children:["PROCESSING POWER : ",V("b",{children:[rt.data[s].cpurate,"x"]})]})]})]}):null]})]})}const Ol=new hr.Howl({src:["/BGM/2.ogg"],preload:!0,volume:.2,loop:!0});function g5(e){const[t,r]=Y.exports.useState(!1),[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState(0);Y.exports.useState("transition-off"),document.getElementById("transition").className="transition-off";const a=e.user,h=()=>{Ol.stop(),R1(a)},d=()=>{Ol.stop(),H5(a)},p=()=>{Ol.stop(),F5(a)};return Y.exports.useEffect(()=>{Ol.seek(0),Ol.play()},[]),V(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/BU/bu.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/gacha.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("div",{className:"currentlyplaying currentlyplaying-animation",children:"log() - NEODITRONIX.SYS:VER=UTOPIA"}),A(Xu,{user:a,display:"CHAPTER SELECT"},s),V("div",{className:"display",id:"display",children:[A("img",{src:rt.data[e.user.partners[e.user.selectedpartner]].imagesrc,id:"partner-img-menu",className:"partner-img"}),V("div",{className:"mainmenubuttons",children:[V("div",{className:"mainmenubuttonscol animate__fadeInLeft animate__animated ",children:[A("img",{src:"./mainmenu/PLAY.jpg",onClick:h,className:"mainmenubuttons-play"}),A("img",{src:"./mainmenu/STORE.png",onClick:d,className:"mainmenubuttons-store"}),A("img",{src:"./mainmenu/GACHA.jpg",onClick:()=>{r(!0),i(Math.random())},className:"mainmenubuttons-settings"})]}),A("div",{className:"mainmenubuttonscol animate__fadeIn animate__animated ",children:A("img",{src:"./mainmenu/QUEST.jpg",onClick:p,className:"mainmenubuttons-quest"})})]})]}),A("div",{onClick:()=>{o(Math.random())},children:A(m5,{user:e.user,toggle:t},n)})]})}const v5="/assets/select.3effe8e5.wav",x5="/assets/selectdiff.e898ab90.wav";function y5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8"}}]})(e)}function _5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8",transform:"matrix(-1 0 0 1 24 0)"}}]})(e)}function Gh(e){return Yn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3,22.0000002 L21,12 L3,2 L3,22.0000002 Z M5,19 L17.5999998,11.9999999 L5,5 L5,19 Z M7,16 L14.1999999,12 L7,8 L7,16 Z M9,13 L10.8,12 L9,11 L9,13 Z"}}]})(e)}function b5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15 12 5-4-5-4v2.999H2v2h13zm7 3H9v-3l-5 4 5 4v-3h13z"}}]})(e)}const w5=new hr.Howl({src:v5,preload:!0,volume:.3});new hr.Howl({src:x5,preload:!0,volume:.3});w5.volume=.05;let ps=new hr.Howl({preload:!0,volume:.1,loop:!0});function Wh(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function S5(e){const[t,r]=Y.exports.useState(""),[n,i]=Y.exports.useState(""),[s,o]=Y.exports.useState(""),[a,h]=Y.exports.useState("utopia"),[d,p]=Y.exports.useState(""),[c,f]=Y.exports.useState(""),[m,v]=Y.exports.useState("");Y.exports.useState("");const[y,E]=Y.exports.useState("Lite"),[x,_]=Y.exports.useState("hide"),[w,T]=Y.exports.useState(!1),[P,I]=Y.exports.useState("songjacketbgcolor-trigger"),[R,M]=Y.exports.useState("songpreview-songmetadata-trigger"),[N,k]=Y.exports.useState(!0),L=e.user,W=O=>{try{ps.stop()}catch{}h(O.split("/")[0]),_(""),p(O.split("/")[1]),console.log(d);const z=se[O.split("/")[0]].pack[O.split("/")[1]].charts[y].chart;se[O.split("/")[0]].pack[O.split("/")[1]].customtitle&&(z.metadata.title=Wh(`${O.split("/")[0]}.${O.split("/")[1]}`),z.metadata.artist=e.user.name),I(""),M(""),setTimeout(()=>{I("songjacketbgcolor-trigger"),M("songpreview-songmetadata-trigger")},10),setTimeout(()=>{o(JSON.stringify(z)),i(O.split("/")[1])},100),se[O.split("/")[0]].pack[O.split("/")[1]].charts["EX-Enigma"]!=null?T(!0):T(!1);const H=z,j=H.preview,J=6e4/Bu(H.timingPoints,j*1e3).bpm*16*4;ps=new hr.Howl({src:[H.audioPath],sprite:{preview:[j*1e3,J,!0]},preload:!0,volume:.1}),ps.play("preview"),O!=null&&setTimeout(()=>{f(H.jacketPath)},10)},D=O=>{ps.volume=0;try{ps.stop()}catch{}O5(i5(s,ps.duration),L)},U=O=>{E(O);const z=se[a].pack[d].charts[O].chart;se[a].pack[d].customtitle&&(z.metadata.title=Wh(`${a}.${d}`),z.metadata.artist=e.user.name),o(JSON.stringify(z)),f(se[a].pack[d].charts[O].chart.jacketPath)},X=()=>{ps.volume=0;try{ps.stop()}catch{}Yu(e.user)},K=O=>{r(O),h(O.split("/")[0]);const z=Object.keys(se[O].pack).filter(H=>!(se[O].pack[H].charts[y]==null||se[O].pack[H].unlocktype=="quest"&&e.user.unlockedsongs.find(j=>j.startsWith(`${t}.${j}`))==null))[0];z!=null?W(O+"/"+z):(i(""),o("")),k(!1)};Y.exports.useEffect(()=>{setTimeout(()=>{e.song!=null&&(K(e.song.split(".")[0]),W(e.song.split(".")[0]+"/"+e.song.split(".")[1]),U(e.song.split(".")[2]),k(!1))},1e3)},[y]);const Z=O=>O<=50?"F":O<=80?"D":O<=90?"C":O<=92?"B":O<=94?"A":O<=96?"S":O<=98?"SS":O<=100?"SSS":"",F=O=>O<=50?"#d65e5e":O<=80?"#e665b0":O<=90?"#dd65e6":O<=92?"#9265e6":O<=94?"#6583e6":O<=96?"#65d7e6":O<=98?"#65e6b7":O<=100?"#dbe665":"";return V(Me,{children:[A("img",{src:"BG/overlay.png",className:"backgroundanim"}),A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:X}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A(Xu,{user:L,display:"SONG SELECT"}),V("div",{className:"display animate__animated animate__fadeIn",style:{transitionDuration:"1s"},children:[V("div",{className:"difficulty-selector",children:[A("div",{style:{opacity:y=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:"LI"}),A("div",{style:{opacity:y=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:"NE"}),A("div",{style:{opacity:y=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:"EN"})]}),A("div",{className:"songs "+m,children:A("div",{className:"songpack",children:V("div",{className:"songscontainer",children:[V("div",{className:"changepack",onClick:()=>{k(!0)},children:["Change Chapter",A(b5,{})]}),t!=""?A("div",{className:"current-chapter",children:A("img",{src:se[t].banner,className:"current-chapter-banner"})}):null,t=="sound"?V("div",{className:"songsubmission",children:[A("b",{children:"Sound Collection"}),` will be automatically unlocked for you to play for free. This is a pack where the songs are not related to the main story at all, which means this pack is not "My song only" exclusive. If you'd like to have your songs here, please enter this form!`,A("br",{}),A("br",{}),A("a",{href:"https://forms.gle/Pms7K9VACvteixQ5A",children:"Link to the form"})]}):t!=""?V("div",{className:"songsubmission",children:[A("b",{children:se[t].name})," ",A("br",{}),se[t].description]}):null,t!=""?Object.keys(se[t].pack).sort((O,z)=>{try{return se[t].pack[O].charts[y].chart.metadata.difficultcc-se[t].pack[z].charts[y].chart.metadata.difficultcc}catch{}}).map(O=>{if((se[t].pack[O].unlocktype!="quest"||se[t].pack[O].unlocktype=="quest"&&e.user.unlockedsongs.find(z=>z.startsWith(`${t}.${O}`))!=null)&&se[t].pack[O].charts[y]!=null)return V("div",{className:"song",onClick:()=>W(t+"/"+O),style:{border:n==O&&t==a?"rgb(255, 88, 191) 1px solid":"rgba(255, 88, 191, 0.5) 1px solid",filter:n==O&&t==a?"drop-shadow(rgb(255, 88, 191) 0 0 1svw)":"drop-shadow(0 0 0.5svw rgba(255, 26, 198, 0.5)",opacity:se[t].pack[O].unlocktype=="play"&&se[t].pack[O].unlock!=null&&e.user.progression.find(z=>z.startsWith(a+"."+se[t].pack[O].unlock))==null?.5:1},children:[A("img",{src:se[t].pack[O].charts[y].chart.jacketPath,className:"songdiffimg"}),se[t].pack[O].customtitle?Wh(`${t}.${O}`):se[t].pack[O].charts[y].chart.metadata.title,A("br",{}),A("small",{className:"songdiffs",children:se[t].pack[O].customtitle?e.user.name:se[t].pack[O].charts[y].chart.metadata.artist}),A("div",{className:"songdiffdiffdisplay",id:y,children:se[t].pack[O].charts[y].chart.metadata.difficult}),A("div",{className:"songdiff-rank",style:{color:F(parseFloat(e.user.progression.find(z=>z.startsWith(se[t].pack[O].charts[y].chart.id.toString()))?.split("-")[1]))},children:A("span",{children:Z(parseFloat(e.user.progression.find(z=>z.startsWith(se[t].pack[O].charts[y].chart.id.toString()))?.split("-")[1]))})})]},O)}):null]})})}),A("div",{className:"songpreview split right "+R,children:s!=""?V(Me,{children:[" ",V("div",{children:[s!=""?A("img",{src:c,className:"songjacketbg",style:{opacity:e.user.boughtpack.find(O=>O==a)!=null?1:.6}}):null,e.user.boughtpack.find(O=>O==a)==null?A("span",{className:"songjacketbg-locked",children:"Not Purchased"}):null,s!=""?A("div",{className:"songjacketbgcolor "+P}):null]}),V("div",{className:"songpreview-songmetadata",children:[A("h1",{children:se[a].pack[d].customtitle?Wh(`${a}.${d}`):s!=""?ur(s).metadata.title:null}),A("span",{children:se[a].pack[d].customtitle?e.user.name:s!=""?ur(s).metadata.artist:null}),V("span",{className:"songpreview-songmetadata-smaller",id:"illustrator",children:[A("p",{children:"Illustrator"}),A("p",{children:ur(s).metadata.illustrator})]}),e.user.progression.find(O=>O.startsWith(ur(s).id.toString()))!=null?A(Me,{children:V("span",{className:"songpreview-songmetadata-smaller",id:"highscore",children:[A("p",{children:"Highscore"}),V("p",{children:[e.user.progression.find(O=>O.startsWith(ur(s).id.toString()))?.split("-")[1],"%"]})]})}):null,A("div",{className:"songpreview-rank",style:{color:F(ur(s).id)},children:A("span",{children:Z(parseFloat(e.user.progression.find(O=>O.startsWith(ur(s).id.toString()))?.split("-")[1]))})})]}),A("div",{className:"diffselect",children:A("div",{className:"diffselects",style:{filter:y=="Lite"?"drop-shadow(rgba(170, 204, 255, 1) 0 0 1svw)":y=="Neon"?"drop-shadow(rgba(255, 170, 237, 1) 0 0 1svw)":y=="Enigma"?"drop-shadow(rgba(255, 170, 213, 1) 0 0 1svw)":"drop-shadow(rgba(255, 170, 170, 1) 0 0 1svw)"},children:e.user.boughtpack.find(O=>O==a)!=null?se[a].pack[d].unlocktype=="play"?se[a].pack[d].unlock!=null&&e.user.progression.find(O=>O.startsWith(a+"."+se[a].pack[d].unlock))!=null||se[a].pack[d].unlock==null?V(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:y=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:y=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:y=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:D,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):V(Me,{children:[" ",V("div",{className:"songlock",children:[A(Kl,{})," Play ",se[a].pack[se[a].pack[d].unlock].charts.Lite.chart.metadata.title," to unlock."]})," "]}):se[a].pack[d].unlocktype=="quest"?A(Me,{children:e.user.unlockedsongs.find(O=>O.startsWith(`${ur(s).id.toString().split(".")[0]}.${ur(s).id.toString().split(".")[1]}`))!=null?V(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:y=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:y=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:y=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:D,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):V("div",{className:"songlock",children:[A(Kl,{})," Unlocked in Quest Mode"]})}):se[a].pack[d].unlocktype=="pay"?A(Me,{children:e.user.unlockedsongs.find(O=>O.startsWith(`${ur(s).id.toString().split(".")[0]}.${ur(s).id.toString().split(".")[1]}`))!=null?V(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:y=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:y=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:y=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:D,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):A("div",{className:"songlock",children:V("div",{className:"buybutton",onClick:()=>{se[a].pack[d].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(se[a].pack[d].unlock?.split(" ")[0])&&(e.user.cpu-=parseInt(se[a].pack[d].unlock?.split(" ")[0]),e.user.unlockedsongs.push(`${ur(s).id.toString().split(".")[0]}.${ur(s).id.toString().split(".")[1]}`),W(t+"/"+d)),se[a].pack[d].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(se[a].pack[d].unlock?.split(" ")[0])&&(e.user.ram-=parseInt(se[a].pack[d].unlock?.split(" ")[0]),e.user.unlockedsongs.push(`${ur(s).id.toString().split(".")[0]}.${ur(s).id.toString().split(".")[1]}`),W(t+"/"+d)),e.user.save()},children:[V("span",{className:"buydisplay",style:{opacity:se[a].pack[d].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(se[a].pack[d].unlock?.split(" ")[0])||se[a].pack[d].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(se[a].pack[d].unlock?.split(" ")[0])?1:.5},children:[A(Kl,{})," Purchase"]}),A("span",{children:se[a].pack[d].unlock}),se[a].pack[d].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(se[a].pack[d].unlock?.split(" ")[0])||se[a].pack[d].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(se[a].pack[d].unlock?.split(" ")[0])?null:A("small",{children:"Inefficient Balance"})]})})}):V(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:y=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:y=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:y=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),V("div",{onClick:D,className:"songtitlediff",children:[" ",A(Gh,{})]})]}):V("div",{className:"songlock",children:[A(Kl,{})," Unlocked in Store"]})})})," "]}):null}),V("div",{className:"chapter-select",style:{opacity:N?"1":"0",transitionDuration:"1s",pointerEvents:N?"inherit":"none"},children:[A("div",{className:"chapter-select-header",children:"Chapter Select"}),A("div",{className:"chapter-select-list",children:Object.keys(se).map(O=>V("div",{className:"chapter-select-list-elements",style:{opacity:e.user.boughtpack.find(z=>z==O)!=null?1:.5},onClick:()=>K(O),children:[A("img",{src:se[O].banner,className:"chapter-select-list-elements-banner"}),se[O].name,V("small",{children:["Chapter ",se[O].chapter]})]},O))})]})]})]})}function E5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"}},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"}}]})(e)}let bv,ld;function T5(){bv.state==="running"&&bv.suspend().then(()=>{ld&&(ld.stop(),ld.disconnect())})}function C5(e){let[t,r]=Y.exports.useState(0);Y.exports.useEffect(()=>{let s=new AudioContext,o="./BGM/store.wav",a,h,d;const p=c=>{a||(a=c),h=s.createBufferSource(),h.buffer=c,h.connect(d),h.loop=!0,h.start(0),d.gain.setValueAtTime(.1,s.currentTime)};bv=s,fetch(o,{mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(c=>{s.decodeAudioData(c,p),ld=h,d=s.createGain(),d.connect(s.destination),p(a)})},[]),document.documentElement.style.filter="invert(0)",new Lu;const n=()=>{T5(),Yu(e.user)},i=s=>{const o=s;e.user.boughtpack.find(a=>a==o)==null&&e.user.cpu>=se[o].price&&(e.user.boughtpack.push(o),console.log(e.user.boughtpack),e.user.cpu-=se[o].price,r(Math.random()),console.log(t)),e.user.save()};return V(Me,{children:[A("img",{src:"./mainmenu/store/right.png",className:"rightbanner",onClick:n}),A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:n}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/store.css"}),A(Xu,{user:e.user,display:"MUSIC STORE"}),V("div",{className:"display",children:[V("div",{className:"page-description",children:[A("span",{className:"page-description-header",children:"STORE"}),A("span",{className:"page-description-text",children:"Buy song packs here!"})]}),A("div",{className:"storecontainer animate__animated animate__fadeIn centered",children:A("div",{className:"store",children:A("div",{className:"packlist",children:Object.keys(se).map((s,o)=>se[s].price!=-1?V("div",{className:"storepack",style:{transitionDuration:"2s",transitionTimingFunction:"cubic-bezier(0.08,0.82,0.17,1)"},children:[A("img",{src:se[s].banner,className:"storepackheader",id:s}),V("div",{className:"storedescription",children:[A("div",{className:"storedescription-header",children:A("b",{children:se[s].name})}),V("div",{className:"buybutton",onClick:()=>i(s),style:{pointerEvents:e.user.boughtpack.find(a=>a==s)!=null?"none":"inherit",opacity:e.user.boughtpack.find(a=>a==s)!=null?"0.5":"1"},children:[V("span",{className:"buydisplay",children:[A(E5,{})," ",e.user.boughtpack.find(a=>a==s)!=null?"Purchased":"Purchase"]}),V("span",{children:[se[s].price," CPU"]})]})]}),A("div",{className:"storedescription-songlist"})]},o):null)})})})]})]})}const Um=new hr.Howl({src:["/BGM/mainmenu.wav"],preload:!0,volume:.1,loop:!0});function A5(){const e=()=>{Um.stop(),U5()};return Y.exports.useEffect(()=>{Um.seek(0),Um.play()},[]),V(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"game-menu",children:A("img",{src:"logo/1.png",alt:"",className:"game-logo",onClick:e})})]})}new Audio;function k5(e){document.documentElement.style.filter="invert(0)";const t=e.user,r=()=>{R1(t,e.beatmap.id)};let n=-1;e.user.progression.find((p,c)=>{p.startsWith(`${e.beatmap.id}`)&&(n=c)}),n!=-1?parseInt(e.user.progression[n].split("-")[1])<Math.round(e.score*100*10)/10&&(e.user.progression[n]=`${e.beatmap.id}-${Math.round(e.score*100*10)/10}`):e.user.progression.push(`${e.beatmap.id}-${Math.round(e.score*100*10)/10}`);const i=Math.round(e.score*10/e.beatmap.metadata.difficultcc*(.5+e.beatmap.metadata.difficultcc/40))*rt.data[e.user.partners[e.user.selectedpartner]].cpurate,s=Math.round(e.score*10/e.beatmap.metadata.difficultcc*(.5+e.beatmap.metadata.difficultcc/40)*50)*rt.data[e.user.partners[e.user.selectedpartner]].ramrate;e.user.cpu=Math.round(e.user.cpu+Math.round(i)),e.user.ram=Math.round(e.user.ram+Math.round(s));let o=-1;const a=e.user.partnersexp.find((p,c)=>{if(p.startsWith(`${e.user.selectedpartner}`))return o=c,!0});a!=null&&o!=-1?e.user.partnersexp[o]=`${a.split(",")[0]},${parseInt(a.split(",")[1])+500}`:e.user.partnersexp.push(`${e.user.selectedpartner},500`),e.user.save();const h=p=>p<=50?"F":p<=80?"D":p<=90?"C":p<=92?"B":p<=94?"A":p<=96?"S":p<=98?"SS":p<=100?"SSS":"",d=p=>p<=50?"#d65e5e":p<=80?"#e665b0":p<=90?"#dd65e6":p<=92?"#9265e6":p<=94?"#6583e6":p<=96?"#65d7e6":p<=98?"#65e6b7":p<=100?"#dbe665":"";return V(Me,{children:[A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./result/left.png",className:"leftoverlay",alt:""}),A("img",{src:"/mainmenu/back.png",className:"backbutton",onClick:r}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A(Xu,{user:t,display:"PLAY RESULT"}),V("div",{className:"display animate__animated animate__fadeIn",children:[A("div",{className:"result-mapdisplay",children:A("img",{src:e.beatmap.jacketPath,className:"result-mapdisplay-bg"})}),V("div",{className:"rewardscreen",children:[V("div",{className:"rewardscreen-cpu",children:[A("div",{className:"rewardscreen-cpu-display",children:"CPU"})," ",Math.round(i*rt.data[e.user.partners[e.user.selectedpartner]].cpurate)," (x",rt.data[e.user.partners[e.user.selectedpartner]].cpurate," BONUS)"]}),V("div",{className:"rewardscreen-cpu",children:[A("div",{className:"rewardscreen-cpu-display",children:"RAM"})," ",Math.round(s*rt.data[e.user.partners[e.user.selectedpartner]].ramrate),"  (x",rt.data[e.user.partners[e.user.selectedpartner]].ramrate," BONUS)"]})]}),V("div",{className:"resultscreen",children:[A("div",{className:"result-mapdisplay-header",children:e.bad==0&&e.miss==0&&e.great==0?"ABSOLUTE PERFECT!":e.bad==0&&e.miss==0?"FULL CONNECTION!":Math.round(e.score*100*10)/10>=70?"CLEAR!":"Failed..."}),A("img",{className:"result-mapdisplay-jacket",src:e.beatmap.jacketPath}),V("div",{className:"resultscreen-1strow",children:[A("span",{className:"result-mapdisplay-title",children:e.beatmap.metadata.title}),A("span",{className:"result-mapdisplay-artist",children:e.beatmap.metadata.artist}),V("span",{className:"result-mapdisplay-diffname",id:e.beatmap.metadata.difficulttype,children:[e.beatmap.metadata.difficulttype," ",e.beatmap.metadata.difficult]})]}),V("div",{className:"resultscreen-2ndrow",children:[V("div",{className:"resultscreenscore",children:[V("div",{className:"resultscreendetail-maxcombo",children:[A("div",{className:"resultscreendetail-display",children:"MAX COMBO"})," ",e.combo]}),Math.round(e.score*100*10)/10," %"]}),V("div",{className:"resultscreendetail",children:[V("div",{className:"resultscreendetail-hit",children:[A("div",{className:"resultscreendetail-display",children:"X-PHASED"})," ",e.hit]}),V("div",{className:"resultscreendetail-hit",children:[A("div",{className:"resultscreendetail-display",children:"PHASED"})," ",e.great]}),V("div",{className:"resultscreendetail-miss",children:[A("div",{className:"resultscreendetail-display",children:"MIS-PHASED"})," ",e.bad]}),V("div",{className:"resultscreendetail-bad",children:[A("div",{className:"resultscreendetail-display",children:"ERROR"})," ",e.miss]})]})]})]}),V("div",{className:"rank",style:{color:d(Math.round(e.score*100*10)/10)},children:[" ",h(Math.round(e.score*100*10)/10)]})]})]})}function Hm(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function P5(e,t){return xi.exports.SHA256(xi.exports.SHA256(xi.exports.SHA256(e+t**2)))}function zm(e,t){let r=0;for(;P5(r.toString(),t).toString()!=e;)r++;return r}new Audio;function I5(){Object.keys(se).map(i=>{Object.keys(se[i].pack).forEach(s=>{Object.keys(se[i].pack[s].charts).map(o=>{new Howl({src:[se[i].pack[s].charts[o].chart.audioPath],preload:!0,volume:.1})})})}),new Lu,Y.exports.useState(""),Y.exports.useState("");const e=Hm("name"),t="123456789",r=new Lu,n=xi.exports.AES.decrypt(Hm("data"),t).toString(xi.exports.enc.Utf8).split(",");return r.pass=t,r.name=e,r.pfpurl=Hm("pfpurl"),r.cpu=zm(n.find(i=>i.startsWith("cpu"))?.split(":")[1],parseInt(t)),r.progression=[],r.ram=zm(n.find(i=>i.startsWith("ram"))?.split(":")[1],parseInt(t)),r.selectedpartner=zm(n.find(i=>i.startsWith("selectedpartner"))?.split(":")[1],parseInt(t)),r.unlockedsongs=[],r.boughtpack=["sound"],r.readstory=[],n.find(i=>i.startsWith("partners"))?.split(":")[1].split("/").forEach(i=>{i!=""&&r.partners.push(parseInt(i))}),n.find(i=>i.startsWith("partnersexp"))?.split(":")[1].split("/").forEach(i=>{i!=""&&r.partnersexp.push(i)}),n.find(i=>i.startsWith("bought"))?.split(":")[1].split("/").forEach(i=>{i!=""&&r.boughtpack.push(i)}),n.find(i=>i.startsWith("unlock"))?.split(":")[1].split("/").forEach(i=>{i!=""&&r.unlockedsongs.push(i)}),n.find(i=>i.startsWith("prog"))?.split(":")[1].split("/").forEach(i=>{i!=""&&r.progression.push(i)}),n.find(i=>i.startsWith("readstory"))?.split(":")[1].split("/").forEach(i=>{i!=""&&r.readstory.push(i)}),Yu(r),V(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),"loading neccessary resources..."]})}function R5(){const[e,t]=Y.exports.useState("");return Y.exports.useState(""),V(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"game-menu2",children:V("div",{className:"centered",children:[A("h1",{className:"animate__animated animate__fadeInUp",children:" NEODITRONIX"}),V("div",{className:"animate__animated animate__fadeInUp",children:["First off, Let's start with creating a user profile",A("br",{}),"This world is vast, and very infinite.",A("br",{}),"It is required to have a unique ID in order to distinguish one from another",A("br",{}),A("br",{}),"What's your name?",A("br",{}),A("br",{}),A("input",{id:"username",type:"text",value:e,placeholder:"USERNAME",onChange:i=>{t(i.target.value)}}),A("br",{}),A("input",{type:"submit",value:"That's my name",onClick:()=>{const i=new Lu;i.name=e,i.partners=[0],i.pass="123456789",i.boughtpack=["sound"],document.cookie="COL_1_KEY=q;",document.cookie="COL_2_KEY=w;",document.cookie="COL_3_KEY=e;",document.cookie="COL_4_KEY=r;",document.cookie="COL_1_KEY2=7;",document.cookie="COL_2_KEY2=8;",document.cookie="COL_3_KEY2=9;",document.cookie="COL_4_KEY2=+;",document.cookie="CURSOR_LEFT_KEY=1;",document.cookie="CURSOR_RIGHT_KEY=2;",document.cookie="CURSOR_LEFT_KEY2=*;",document.cookie="CURSOR_RIGHT_KEY2=-;",document.cookie="OFFSET=0;",document.cookie="SCROLL_SPEED_FACTOR=5;",document.cookie="TOGGLECOLOR=True;",Yu(i)}})]})]})})]})}async function Bw(e){const r=await(await fetch(`./VN/script/${e}.txt`)).text();let n="",i="",s=!1,o="",a="",h="",d="",p="";const c=r.split(`
`).map(m=>{if(m.startsWith("$IMG"))n=m.split("=")[1];else if(m.startsWith("$SFX"))h=m.split("=")[1];else if(m.startsWith("$CHAR"))d=m.split("=")[1];else if(m.startsWith("$ICON"))p=m.split("=")[1];else if(m.startsWith("$PLAY"))o=m.split("=")[1];else if(m.startsWith("$AUDIO"))a=m.split("=")[1];else if(m.startsWith("$UNLOCK")){var v=m.split("=")[1];return{icon:p.replace("\r",""),img:n,audio:a.replace("\r",""),isPlayingAudio:"",isForm:!1,Formtype:"",FormAnswer:"",sfx:"",isSongUnlock:v.replace("\r",""),char:d.replace("\r",""),story:""}}else if(m.startsWith("$FORM")){s=!0,i=m.split("=")[1].split("|")[0];let y=h,E=o;return h="",o="",{icon:p.replace("\r",""),img:n,audio:a.replace("\r",""),isPlayingAudio:E.replace("\r",""),isForm:s,Formtype:i.replace("\r",""),FormAnswer:m.split("=")[1].split("|")[2].replace("\r",""),sfx:y.replace("\r",""),char:d.replace("\r",""),story:m.split("=")[1].replace("\r","")}}else{let y=h,E=o;return h="",o="",{icon:p,img:n,audio:a.replace("\r",""),isPlayingAudio:E.replace("\r",""),isForm:!1,FormAnswer:"",Formtype:"",char:d,sfx:y.replace("\r",""),story:m}}}),f=[];for(let m in c)c[m]!==void 0&&f.push(c[m]);return f}const Ie={data:{0:{name:"Spaceship",img:"BG/utopia_explode.jpg",icon:"1",stories:[{pos:[1,3],title:"\u0E2A\u0E27\u0E31\u0E2A\u0E14\u0E35!",story:'Play "Sawasdee! (DJ PADKAPRAO GAI KAIDAO BOOTLEG REMIX)" To unlock this entry.',unlocktype:"play",unlock:"utopia.sawasdee",rewardtype:"song",reward:"utopia.starrydream",rewardstory:await Bw("T1")},{pos:[2,3],title:"?",story:"Experience the sky.",unlocktype:"none",unlock:"utopia.starrysky",rewardtype:"story",rewardstory:await Bw("T2")}]}}};function M5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function N5(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z"}}]})(e)}var oo=new hr.Howl({src:["/BGM/1.mp3"],preload:!0,volume:1,loop:!0});function B5(e){const[t,r]=Y.exports.useState(!0),n=Y.exports.useRef(0),[i,s]=Y.exports.useState(!1),o=Y.exports.useRef(!0),a=Y.exports.useRef("");let h=!1;const[d,p]=Y.exports.useState(0);let c=0;Ie.data[e.content[0]].name=="???"&&(document.documentElement.style.filter="saturate(0)");const[f,m]=Y.exports.useState(!1),v=()=>{const E=Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current];if(E.sfx.startsWith(".")){var x=new hr.Howl({src:[E.sfx],preload:!0,volume:.2});x.play(),console.log(x)}E.isPlayingAudio.startsWith("TRUE")?(oo=new hr.Howl({src:[E.audio],preload:!0,volume:.1,loop:!0}),oo.play()):E.isPlayingAudio.startsWith("FALSE")&&(oo=new hr.Howl({src:["/BGM/1.mp3"],preload:!0,volume:0,loop:!0}),oo.stop())},y=()=>{t&&n.current+1==Object.keys(Ie.data[e.content[0]].stories[e.content[1]].rewardstory).length?(r(!1),s(!1),o.current=!1,Lw(),console.log("play"),n.current=0,e.user.readstory.push(`${e.content[0]}.${e.content[1]}`),oo.stop(),p(Math.random())):t&&(n.current+=1,v(),p(Math.random()))};return Y.exports.useEffect(()=>{v(),n.current=0;const E=setInterval(()=>{if(console.log(t,h),t&&h&&Date.now()>=c)if(!Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm&&n.current+1!=Object.keys(Ie.data[e.content[0]].stories[e.content[1]].rewardstory).length){n.current+=1;const _=Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*80+1e3;c=Date.now()+_,p(Math.random())}else r(!1),s(!1),h=!1;t||clearInterval(E)},1e3),x=_=>{t&&(_.key=="Enter"&&(o.current?Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?(Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="ANSWER"&&a.current==Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer&&(s(!1),console.log(a.current),a.current="",y()),Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="SONG"&&a.current!=""&&(document.cookie=`${Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer}=${a.current};`,s(!1),console.log(a.current),a.current="",y())):(s(!1),console.log(a.current),a.current="",y()):o.current=!0),p(Math.random()))};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x),clearInterval(E)}},[h]),V("div",{className:`vn-box-container ${t?"notification-new-song-animation":""}`,style:{opacity:t?1:0,backgroundImage:Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].img!=""?`url(${Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].img}) `:"",pointerEvents:t?"inherit":"none",animation:t?"fadein 0.2s":"fadeout 0.2s"},children:[A("div",{className:"vn-box-log",onClick:()=>{m(!1)},style:{transitionDuration:"0.5s",opacity:f?"1":"0",left:f?"0":"-10svw",pointerEvents:f?"inherit":"none"},children:Ie.data[e.content[0]].stories[e.content[1]].rewardstory.map((E,x)=>x<=n.current?A(Me,{children:V("div",{children:[A("div",{className:"vn-text-display-char",children:E.char}),A("div",{className:"vn-text-display-dialogue",children:E.story})]})}):null)}),V(Me,{children:[A("div",{className:"vn-header",children:A("span",{children:Ie.data[e.content[0]].stories[e.content[1]].title})}),o.current?V("div",{className:`vn-box ${t?"notification-new-song-animation":""}`,children:[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].icon!=""&&A("img",{src:`./VN/icons/${Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].icon}.png`,className:"vn-icon"}),V("div",{className:"vn-text-display",onClick:()=>{Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?(Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="ANSWER"&&a.current==Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer&&(s(!1),console.log(a.current),a.current="",y()),Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="SONG"&&a.current!=""&&(document.cookie=`${Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer}=${a.current};`,s(!1),console.log(a.current),a.current="",y())):(s(!1),console.log(a.current),a.current="",y())},children:[A("div",{className:"vn-text-display-char",children:Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char.startsWith("$s")?"":Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char}),V("div",{className:`vn-text-display-dialogue ${Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char.startsWith("$s")||Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock!=null?"vn-text-display-dialogue-special":""}`,children:[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story,Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?A("input",{type:"text",onChange:E=>{a.current=E.target.value,console.log(a.current)}}):null,Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock!=null?V(Me,{children:[A("h3",{children:"New Song Unlocked"}),V("p",{children:[se[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[0]].pack[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[1]].charts.Lite.chart.metadata.artist," - ",se[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[0]].pack[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[1]].charts.Lite.chart.metadata.title]}),A("img",{style:{width:"40svw"},src:se[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[0]].pack[Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[1]].charts.Lite.chart.jacketPath,alt:""})]}):null]})]}),V("div",{className:"vn-box-tools",children:[V("div",{className:"vn-box-tools-bt",onClick:()=>{s(!i),h=!i;const E=Ie.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*80+1e3;c=Date.now()+E},style:{opacity:i?"0.5":"1"},children:[A(M5,{})," Autoplay"]}),V("div",{className:"vn-box-tools-bt",onClick:()=>{m(!f)},style:{opacity:f?"0.5":"1"},children:[A(N5,{})," Log"]}),V("div",{className:"vn-box-tools-bt",onClick:()=>{oo.stop(),oo=new hr.Howl({src:["/BGM/1.mp3"],preload:!0,volume:0,loop:!0}),r(!1),s(!1),o.current=!1,Lw()},children:[A(l5,{})," Quit"]})]})]}):null]})]})}function L5(e){return A("div",{className:`storymenu-chapter-description-${e.completed?"uncomplete":"complete"}`,style:{left:`${e.story.pos[0]*6}svw`,top:`${e.story.pos[1]*6}svw`},children:e.story.title})}const kn=new hr.Howl({src:["/BGM/1.mp3"],preload:!0,volume:1,loop:!0});let ms=!1;function Lw(){kn.fade(0,1,1e3),setTimeout(()=>{ms=!1},500)}function D5(e){document.getElementById("transition").className="transition-off",Y.exports.useState(0);const[t,r]=Y.exports.useState("");Y.exports.useState(0);const[n,i]=Y.exports.useState(0),[s,o]=Y.exports.useState("");Y.exports.useRef(!1);const[a,h]=Y.exports.useState("storymenu-animation"),d=Y.exports.useRef(!1);Y.exports.useRef(!1);const[p,c]=Y.exports.useState(""),[f,m]=Y.exports.useState(0),[v,y]=Y.exports.useState([n,0]),E=()=>{kn.stop(),Yu(e.user)};Y.exports.useEffect(()=>{kn.seek(0),kn.volume(1),kn.play()},[]);const x=(I,R)=>{I=="song"&&(o(""),o("notification-new-song-animation"),e.user.unlockedsongs.push(R),r(JSON.stringify(se[R.split(".")[0]].pack[R.split(".")[1]].charts.Lite.chart)),m(Math.round(Math.random()*1e3)),ms=!0),I=="story"&&(m(Math.round(Math.random()*1e3)),ms=!0),e.user.save()},_=(I,R)=>{const M=Ie.data[R].stories[I].unlocktype,N=Ie.data[R].stories[I].rewardtype,k=Ie.data[R].stories[I].reward,L=Ie.data[R].stories[I].unlock,W=e.user.unlockedsongs.find(X=>X.startsWith(k))!=null,D=e.user.progression.find(X=>X.startsWith(L))!=null,U=e.user.readstory.find(X=>X.startsWith(`${R}.${I}`))!=null;M=="play"?(D&&!U&&!W&&(e.user.readstory.push(`${R}.${I}`),y([R,I]),kn.fade(1,0,1e3),ms=!0,x(N,k)),U&&W&&(kn.fade(1,0,2e3),y([R,I]),ms=!0,m(Math.round(Math.random()*1e3))),!W&&!U&&!D&&(d.current=!0,c(Ie.data[R].stories[I].story),kn.fade(1,.5,1e3),m(Math.round(Math.random()*1e3)))):M=="none"&&(!U&&!W?(y([R,I]),kn.fade(1,0,1e3),x(N,k)):(kn.fade(1,0,2e3),y([R,I]),ms=!0,m(Math.round(Math.random()*1e3)))),e.user.save()};Ie.data[n].name=="???"?document.documentElement.style.filter="saturate(0)":document.documentElement.style.filter="saturate(1)";const w=e.user,T=Y.exports.useRef(48),P=Y.exports.useRef(21);return Y.exports.useRef(T),Y.exports.useRef(P),Y.exports.useRef(T),Y.exports.useRef(P),Y.exports.useRef(Date.now()),Y.exports.useRef("front"),Y.exports.useState(!1),Y.exports.useRef(!1),Y.exports.useRef(""),V(Me,{children:[A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:E}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bu.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("div",{className:"darkscreen"}),A(Xu,{user:w,display:"CHAPTER SELECT"}),Ie.data[n-1]!=null?V("span",{className:"prevchapter",onClick:()=>{h(""),setTimeout(()=>{h("storymenu-animation")},10),i(n-1)},children:[A("img",{src:Ie.data[n-1].img,className:"prevnextimg"}),A("span",{children:A(_5,{})}),"Previous Chapter : ",Ie.data[n-1].name," "]}):null,Ie.data[n+1]!=null?V("span",{className:"nextchapter",onClick:()=>{h(""),setTimeout(()=>{h("storymenu-animation")},10),i(n+1)},children:[A("img",{src:Ie.data[n+1].img,className:"prevnextimg"}),"Next Chapter : ",Ie.data[n+1].name,A("span",{children:A(y5,{})})]}):null,A("div",{className:"display",id:"display",children:V("div",{className:`storymenu ${a}`,children:[" ",V(Me,{children:[A("img",{src:Ie.data[n].img,className:"storymenu-chapter-banner"}),A("div",{className:"storymenu-chapter-banner-overlay"}),A("div",{className:"storymenu-chapter-header",children:Ie.data[n].name}),A("div",{className:"storymenu-chapter",children:Ie.data[n].stories.map((I,R)=>{if(e.user.readstory.find(M=>M.startsWith(`${n}.${R-1}`))!=null||R==0)return A("div",{onClick:()=>{_(R,n)},children:A(L5,{story:I,completed:e.user.readstory.find(M=>M.startsWith(`${n}.${R}`))==null})})})})]})]})}),A("div",{className:`notification-new-song ${d.current?s:""}`,style:{backgroundImage:"url(./mainmenu/grid.jpeg)",opacity:d.current?"1":"0",transitionDuration:"0.5s",pointerEvents:d.current?"inherit":"none"},onClick:()=>{d.current=!1,m(Math.round(Math.random()*1e3)),kn.fade(.5,1,1e3)},children:A(Me,{children:p.split(`
`).map(I=>V(Me,{children:[I," ",A("br",{})]}))})}),ms?A(B5,{user:e.user,content:v,toggle:ms},f):null]})}const Hs=["Tips : cpu is used to unlock songs!","Tips : log(), DJ PARKAPRAO GAI KAIDAO, ohm002... they're all the same person. after all.. this entire game is made by one person only (if you excludes all the helpers at the start tho!)","Tips : occasionaly you might need to use ram once in a while to enter some special event!","Tips : the main inspiration for me to develop this game is sta! his tone sphere game really inspires me to do the same too","Tips : it is very very unlikely that this game will ever be featured by other artist except myself, until i'm absolutely sure about quality control for my game.","Tips : making a rhythm game is fun!","Tips : this game is made with reactjs and react-pixi"],wi=XS(document.getElementById("root"));function O5(e,t){wi.render(null);const r=new r5;r.mode="menu";let n=e;r.beatmap=n,r.audio=new Audio(n.audioPath);const i=new Audio(n5);i.volume=.5,i.play(),document.getElementById("transitiontext").innerHTML=`
      <div class="play-songintro">
        <div class="play-songintro-artist">${n.metadata.artist}</div>
        <div class="play-songintro-title">${n.metadata.title} </div>
        <img class="play-songintro-jacket" src="${n.jacketPath}">
        <div class="play-songintro-diff">${n.metadata.difficulttype} ${n.metadata.difficult} </div>
        <div class="play-songintro-charter">Charted by ${n.metadata.creator} </div>
        </div>
      `,document.getElementById("transition").className="transition-on",setTimeout(()=>{var s=!1;setInterval(()=>{!isNaN(r.audio.duration)&&!s&&(r.duration=r.audio.duration*1e3,wi.render(A(jr.StrictMode,{children:A(TM,{game:r,chart:n,menutime:Date.now(),user:t},Math.random())})),s=!0)},10)},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},4e3)}const Si=new Audio("https://cdn.discordapp.com/attachments/1143769032605057136/1159757669033332829/eff.wav?ex=65322f7f&is=651fba7f&hm=8240581980bf0b374ed673e37625a6fd222264f738b364adb37d4df082b4404a&");Si.volume=.2;Si.preload="auto";function R1(e,t){Si.currentTime=0,Si.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",wi.render(A(S5,{user:e,song:t}))},1e3)}function F5(e){Si.currentTime=0,Si.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{wi.render(A(D5,{user:e}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2500)}function Yu(e){Si.currentTime=0,Si.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{wi.render(A(g5,{user:e}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2500)}function U5(){Dw("status")==""?wi.render(A(R5,{})):Dw("status")!=""&&wi.render(A(I5,{}))}function H5(e){Si.currentTime=0,Si.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",wi.render(A(C5,{user:e}))},1e3)}function z5(e,t,r,n,i,s,o,a){document.getElementById("transitiontext").innerHTML="",document.getElementById("transition").className="transition-on",setTimeout(()=>{wi.render(A(k5,{user:e,beatmap:t,score:r,hit:n,great:i,bad:s,miss:o,combo:a}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2e3)}function Dw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}wi.render(A(A5,{}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pw(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var V={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gu=Symbol.for("react.element"),EA=Symbol.for("react.portal"),CA=Symbol.for("react.fragment"),AA=Symbol.for("react.strict_mode"),kA=Symbol.for("react.profiler"),PA=Symbol.for("react.provider"),IA=Symbol.for("react.context"),RA=Symbol.for("react.forward_ref"),MA=Symbol.for("react.suspense"),NA=Symbol.for("react.memo"),DA=Symbol.for("react.lazy"),My=Symbol.iterator;function LA(e){return e===null||typeof e!="object"?null:(e=My&&e[My]||e["@@iterator"],typeof e=="function"?e:null)}var mw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gw=Object.assign,vw={};function Za(e,t,r){this.props=e,this.context=t,this.refs=vw,this.updater=r||mw}Za.prototype.isReactComponent={};Za.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Za.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xw(){}xw.prototype=Za.prototype;function Fv(e,t,r){this.props=e,this.context=t,this.refs=vw,this.updater=r||mw}var Ov=Fv.prototype=new xw;Ov.constructor=Fv;gw(Ov,Za.prototype);Ov.isPureReactComponent=!0;var Ny=Array.isArray,yw=Object.prototype.hasOwnProperty,Uv={current:null},_w={key:!0,ref:!0,__self:!0,__source:!0};function bw(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)yw.call(t,n)&&!_w.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var h=Array(a),d=0;d<a;d++)h[d]=arguments[d+2];i.children=h}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Gu,type:e,key:s,ref:o,props:i,_owner:Uv.current}}function BA(e,t){return{$$typeof:Gu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gu}function FA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Dy=/\/+/g;function lp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FA(""+e.key):t.toString(36)}function qh(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Gu:case EA:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+lp(o,0):n,Ny(i)?(r="",e!=null&&(r=e.replace(Dy,"$&/")+"/"),qh(i,t,r,"",function(d){return d})):i!=null&&(zv(i)&&(i=BA(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Dy,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",Ny(e))for(var a=0;a<e.length;a++){s=e[a];var h=n+lp(s,a);o+=qh(s,t,r,h,i)}else if(h=LA(e),typeof h=="function")for(e=h.call(e),a=0;!(s=e.next()).done;)s=s.value,h=n+lp(s,a++),o+=qh(s,t,r,h,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function nh(e,t,r){if(e==null)return e;var n=[],i=0;return qh(e,n,"","",function(s){return t.call(r,s,i++)}),n}function OA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},Qh={transition:null},UA={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:Qh,ReactCurrentOwner:Uv};je.Children={map:nh,forEach:function(e,t,r){nh(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return nh(e,function(){t++}),t},toArray:function(e){return nh(e,function(t){return t})||[]},only:function(e){if(!zv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Za;je.Fragment=CA;je.Profiler=kA;je.PureComponent=Fv;je.StrictMode=AA;je.Suspense=MA;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UA;je.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=gw({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Uv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(h in t)yw.call(t,h)&&!_w.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&a!==void 0?a[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){a=Array(h);for(var d=0;d<h;d++)a[d]=arguments[d+2];n.children=a}return{$$typeof:Gu,type:e.type,key:i,ref:s,props:n,_owner:o}};je.createContext=function(e){return e={$$typeof:IA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:PA,_context:e},e.Consumer=e};je.createElement=bw;je.createFactory=function(e){var t=bw.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:RA,render:e}};je.isValidElement=zv;je.lazy=function(e){return{$$typeof:DA,_payload:{_status:-1,_result:e},_init:OA}};je.memo=function(e,t){return{$$typeof:NA,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=Qh.transition;Qh.transition={};try{e()}finally{Qh.transition=t}};je.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};je.useCallback=function(e,t){return wr.current.useCallback(e,t)};je.useContext=function(e){return wr.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};je.useEffect=function(e,t){return wr.current.useEffect(e,t)};je.useId=function(){return wr.current.useId()};je.useImperativeHandle=function(e,t,r){return wr.current.useImperativeHandle(e,t,r)};je.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return wr.current.useMemo(e,t)};je.useReducer=function(e,t,r){return wr.current.useReducer(e,t,r)};je.useRef=function(e){return wr.current.useRef(e)};je.useState=function(e){return wr.current.useState(e)};je.useSyncExternalStore=function(e,t,r){return wr.current.useSyncExternalStore(e,t,r)};je.useTransition=function(){return wr.current.useTransition()};je.version="18.2.0";(function(e){e.exports=je})(V);const Xr=TA(V.exports);var ww={exports:{}},Qr={},Sw={exports:{}},Tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,L){var G=O.length;O.push(L);e:for(;0<G;){var H=G-1>>>1,j=O[H];if(0<i(j,L))O[H]=L,O[G]=j,G=H;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var L=O[0],G=O.pop();if(G!==L){O[0]=G;e:for(var H=0,j=O.length,Z=j>>>1;H<Z;){var K=2*(H+1)-1,xe=O[K],fe=K+1,Re=O[fe];if(0>i(xe,G))fe<j&&0>i(Re,xe)?(O[H]=Re,O[fe]=G,H=fe):(O[H]=xe,O[K]=G,H=K);else if(fe<j&&0>i(Re,G))O[H]=Re,O[fe]=G,H=fe;else break e}}return L}function i(O,L){var G=O.sortIndex-L.sortIndex;return G!==0?G:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var h=[],d=[],p=1,c=null,f=3,m=!1,v=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var L=r(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=O)n(d),L.sortIndex=L.expirationTime,t(h,L);else break;L=r(d)}}function E(O){if(_=!1,w(O),!v)if(r(h)!==null)v=!0,J(P);else{var L=r(d);L!==null&&Q(E,L.startTime-O)}}function P(O,L){v=!1,_&&(_=!1,x(N),N=-1),m=!0;var G=f;try{for(w(L),c=r(h);c!==null&&(!(c.expirationTime>L)||O&&!M());){var H=c.callback;if(typeof H=="function"){c.callback=null,f=c.priorityLevel;var j=H(c.expirationTime<=L);L=e.unstable_now(),typeof j=="function"?c.callback=j:c===r(h)&&n(h),w(L)}else n(h);c=r(h)}if(c!==null)var Z=!0;else{var K=r(d);K!==null&&Q(E,K.startTime-L),Z=!1}return Z}finally{c=null,f=G,m=!1}}var I=!1,R=null,N=-1,D=5,k=-1;function M(){return!(e.unstable_now()-k<D)}function z(){if(R!==null){var O=e.unstable_now();k=O;var L=!0;try{L=R(!0,O)}finally{L?F():(I=!1,R=null)}}else I=!1}var F;if(typeof y=="function")F=function(){y(z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Y=U.port2;U.port1.onmessage=z,F=function(){Y.postMessage(null)}}else F=function(){T(z,0)};function J(O){R=O,I||(I=!0,F())}function Q(O,L){N=T(function(){O(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,J(P))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(O){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var G=f;f=L;try{return O()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=f;f=O;try{return L()}finally{f=G}},e.unstable_scheduleCallback=function(O,L,G){var H=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,O){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=G+j,O={id:p++,callback:L,priorityLevel:O,startTime:G,expirationTime:j,sortIndex:-1},G>H?(O.sortIndex=G,t(d,O),r(h)===null&&O===r(d)&&(_?(x(N),N=-1):_=!0,Q(E,G-H))):(O.sortIndex=j,t(h,O),v||m||(v=!0,J(P))),O},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(O){var L=f;return function(){var G=f;f=L;try{return O.apply(this,arguments)}finally{f=G}}}})(Tw);(function(e){e.exports=Tw})(Sw);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=V.exports,qr=Sw.exports;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cw=new Set,fu={};function Mo(e,t){za(e,t),za(e+"Capture",t)}function za(e,t){for(fu[e]=t,e=0;e<t.length;e++)Cw.add(t[e])}var Yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tg=Object.prototype.hasOwnProperty,zA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ly={},By={};function HA(e){return tg.call(By,e)?!0:tg.call(Ly,e)?!1:zA.test(e)?By[e]=!0:(Ly[e]=!0,!1)}function GA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $A(e,t,r,n){if(t===null||typeof t>"u"||GA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hv=/[\-:]([a-z])/g;function Gv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hv,Gv);nr[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hv,Gv);nr[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hv,Gv);nr[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function $v(e,t,r,n){var i=nr.hasOwnProperty(t)?nr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($A(t,r,i,n)&&(r=null),n||i===null?HA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ji=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ih=Symbol.for("react.element"),da=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),jv=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),Aw=Symbol.for("react.provider"),kw=Symbol.for("react.context"),Wv=Symbol.for("react.forward_ref"),ng=Symbol.for("react.suspense"),ig=Symbol.for("react.suspense_list"),Vv=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),Pw=Symbol.for("react.offscreen"),Fy=Symbol.iterator;function Cl(e){return e===null||typeof e!="object"?null:(e=Fy&&e[Fy]||e["@@iterator"],typeof e=="function"?e:null)}var wt=Object.assign,up;function jl(e){if(up===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);up=t&&t[1]||""}return`
`+up+e}var cp=!1;function hp(e,t){if(!e||cp)return"";cp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var h=`
`+i[o].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=o&&0<=a);break}}}finally{cp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jl(e):""}function jA(e){switch(e.tag){case 5:return jl(e.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return e=hp(e.type,!1),e;case 11:return e=hp(e.type.render,!1),e;case 1:return e=hp(e.type,!0),e;default:return""}}function sg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fa:return"Fragment";case da:return"Portal";case rg:return"Profiler";case jv:return"StrictMode";case ng:return"Suspense";case ig:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kw:return(e.displayName||"Context")+".Consumer";case Aw:return(e._context.displayName||"Context")+".Provider";case Wv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vv:return t=e.displayName||null,t!==null?t:sg(e.type)||"Memo";case vs:t=e._payload,e=e._init;try{return sg(e(t))}catch{}}return null}function WA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sg(t);case 8:return t===jv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ls(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Iw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function VA(e){var t=Iw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sh(e){e._valueTracker||(e._valueTracker=VA(e))}function Rw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Iw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function og(e,t){var r=t.checked;return wt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Oy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ls(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Mw(e,t){t=t.checked,t!=null&&$v(e,"checked",t,!1)}function ag(e,t){Mw(e,t);var r=Ls(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lg(e,t.type,r):t.hasOwnProperty("defaultValue")&&lg(e,t.type,Ls(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function lg(e,t,r){(t!=="number"||gd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wl=Array.isArray;function Aa(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ls(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ug(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return wt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zy(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(le(92));if(Wl(r)){if(1<r.length)throw Error(le(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ls(r)}}function Nw(e,t){var r=Ls(t.value),n=Ls(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Hy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oh,Lw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oh=oh||document.createElement("div"),oh.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XA=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(e){XA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ru[t]=ru[e]})});function Bw(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ru.hasOwnProperty(e)&&ru[e]?(""+t).trim():t+"px"}function Fw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Bw(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var YA=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hg(e,t){if(t){if(YA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function dg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fg=null;function Xv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pg=null,ka=null,Pa=null;function Gy(e){if(e=Wu(e)){if(typeof pg!="function")throw Error(le(280));var t=e.stateNode;t&&(t=af(t),pg(e.stateNode,e.type,t))}}function Ow(e){ka?Pa?Pa.push(e):Pa=[e]:ka=e}function Uw(){if(ka){var e=ka,t=Pa;if(Pa=ka=null,Gy(e),t)for(e=0;e<t.length;e++)Gy(t[e])}}function zw(e,t){return e(t)}function Hw(){}var dp=!1;function Gw(e,t,r){if(dp)return e(t,r);dp=!0;try{return zw(e,t,r)}finally{dp=!1,(ka!==null||Pa!==null)&&(Hw(),Uw())}}function mu(e,t){var r=e.stateNode;if(r===null)return null;var n=af(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(le(231,t,typeof r));return r}var mg=!1;if(Yi)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){mg=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{mg=!1}function KA(e,t,r,n,i,s,o,a,h){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(p){this.onError(p)}}var nu=!1,vd=null,xd=!1,gg=null,qA={onError:function(e){nu=!0,vd=e}};function QA(e,t,r,n,i,s,o,a,h){nu=!1,vd=null,KA.apply(qA,arguments)}function ZA(e,t,r,n,i,s,o,a,h){if(QA.apply(this,arguments),nu){if(nu){var d=vd;nu=!1,vd=null}else throw Error(le(198));xd||(xd=!0,gg=d)}}function No(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $w(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $y(e){if(No(e)!==e)throw Error(le(188))}function JA(e){var t=e.alternate;if(!t){if(t=No(e),t===null)throw Error(le(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return $y(i),e;if(s===n)return $y(i),t;s=s.sibling}throw Error(le(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(le(189))}}if(r.alternate!==n)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?e:t}function jw(e){return e=JA(e),e!==null?Ww(e):null}function Ww(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ww(e);if(t!==null)return t;e=e.sibling}return null}var Vw=qr.unstable_scheduleCallback,jy=qr.unstable_cancelCallback,e4=qr.unstable_shouldYield,t4=qr.unstable_requestPaint,It=qr.unstable_now,r4=qr.unstable_getCurrentPriorityLevel,Yv=qr.unstable_ImmediatePriority,Xw=qr.unstable_UserBlockingPriority,yd=qr.unstable_NormalPriority,n4=qr.unstable_LowPriority,Yw=qr.unstable_IdlePriority,rf=null,yi=null;function i4(e){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(rf,e,void 0,(e.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:a4,s4=Math.log,o4=Math.LN2;function a4(e){return e>>>=0,e===0?32:31-(s4(e)/o4|0)|0}var ah=64,lh=4194304;function Vl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Vl(a):(s&=o,s!==0&&(n=Vl(s)))}else o=r&~i,o!==0?n=Vl(o):s!==0&&(n=Vl(s));if(n===0)return 0;if(t!==0&&t!==n&&(t&i)===0&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Gn(t),i=1<<r,n|=e[r],t&=~i;return n}function l4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u4(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Gn(s),a=1<<o,h=i[o];h===-1?((a&r)===0||(a&n)!==0)&&(i[o]=l4(a,t)):h<=t&&(e.expiredLanes|=a),s&=~a}}function vg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kw(){var e=ah;return ah<<=1,(ah&4194240)===0&&(ah=64),e}function fp(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function $u(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Gn(t),e[t]=r}function c4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Gn(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Kv(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Gn(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var nt=0;function qw(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Qw,qv,Zw,Jw,eS,xg=!1,uh=[],Es=null,Cs=null,As=null,gu=new Map,vu=new Map,ys=[],h4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wy(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":gu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vu.delete(t.pointerId)}}function kl(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Wu(t),t!==null&&qv(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function d4(e,t,r,n,i){switch(t){case"focusin":return Es=kl(Es,e,t,r,n,i),!0;case"dragenter":return Cs=kl(Cs,e,t,r,n,i),!0;case"mouseover":return As=kl(As,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return gu.set(s,kl(gu.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,vu.set(s,kl(vu.get(s)||null,e,t,r,n,i)),!0}return!1}function tS(e){var t=vo(e.target);if(t!==null){var r=No(t);if(r!==null){if(t=r.tag,t===13){if(t=$w(r),t!==null){e.blockedOn=t,eS(e.priority,function(){Zw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);fg=n,r.target.dispatchEvent(n),fg=null}else return t=Wu(r),t!==null&&qv(t),e.blockedOn=r,!1;t.shift()}return!0}function Vy(e,t,r){Zh(e)&&r.delete(t)}function f4(){xg=!1,Es!==null&&Zh(Es)&&(Es=null),Cs!==null&&Zh(Cs)&&(Cs=null),As!==null&&Zh(As)&&(As=null),gu.forEach(Vy),vu.forEach(Vy)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,xg||(xg=!0,qr.unstable_scheduleCallback(qr.unstable_NormalPriority,f4)))}function xu(e){function t(i){return Pl(i,e)}if(0<uh.length){Pl(uh[0],e);for(var r=1;r<uh.length;r++){var n=uh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Es!==null&&Pl(Es,e),Cs!==null&&Pl(Cs,e),As!==null&&Pl(As,e),gu.forEach(t),vu.forEach(t),r=0;r<ys.length;r++)n=ys[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ys.length&&(r=ys[0],r.blockedOn===null);)tS(r),r.blockedOn===null&&ys.shift()}var Ia=Ji.ReactCurrentBatchConfig,bd=!0;function p4(e,t,r,n){var i=nt,s=Ia.transition;Ia.transition=null;try{nt=1,Qv(e,t,r,n)}finally{nt=i,Ia.transition=s}}function m4(e,t,r,n){var i=nt,s=Ia.transition;Ia.transition=null;try{nt=4,Qv(e,t,r,n)}finally{nt=i,Ia.transition=s}}function Qv(e,t,r,n){if(bd){var i=yg(e,t,r,n);if(i===null)Sp(e,t,n,wd,r),Wy(e,n);else if(d4(i,e,t,r,n))n.stopPropagation();else if(Wy(e,n),t&4&&-1<h4.indexOf(e)){for(;i!==null;){var s=Wu(i);if(s!==null&&Qw(s),s=yg(e,t,r,n),s===null&&Sp(e,t,n,wd,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Sp(e,t,n,null,r)}}var wd=null;function yg(e,t,r,n){if(wd=null,e=Xv(n),e=vo(e),e!==null)if(t=No(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$w(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wd=e,null}function rS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r4()){case Yv:return 1;case Xw:return 4;case yd:case n4:return 16;case Yw:return 536870912;default:return 16}default:return 16}}var ws=null,Zv=null,Jh=null;function nS(){if(Jh)return Jh;var e,t=Zv,r=t.length,n,i="value"in ws?ws.value:ws.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return Jh=i.slice(e,1<n?1-n:void 0)}function ed(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ch(){return!0}function Xy(){return!1}function Zr(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ch:Xy,this.isPropagationStopped=Xy,this}return wt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ch)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ch)},persist:function(){},isPersistent:ch}),t}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=Zr(Ja),ju=wt({},Ja,{view:0,detail:0}),g4=Zr(ju),pp,mp,Il,nf=wt({},ju,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Il&&(Il&&e.type==="mousemove"?(pp=e.screenX-Il.screenX,mp=e.screenY-Il.screenY):mp=pp=0,Il=e),pp)},movementY:function(e){return"movementY"in e?e.movementY:mp}}),Yy=Zr(nf),v4=wt({},nf,{dataTransfer:0}),x4=Zr(v4),y4=wt({},ju,{relatedTarget:0}),gp=Zr(y4),_4=wt({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),b4=Zr(_4),w4=wt({},Ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S4=Zr(w4),T4=wt({},Ja,{data:0}),Ky=Zr(T4),E4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function k4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=A4[e])?!!t[e]:!1}function e1(){return k4}var P4=wt({},ju,{key:function(e){if(e.key){var t=E4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ed(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e1,charCode:function(e){return e.type==="keypress"?ed(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ed(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I4=Zr(P4),R4=wt({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=Zr(R4),M4=wt({},ju,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e1}),N4=Zr(M4),D4=wt({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),L4=Zr(D4),B4=wt({},nf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),F4=Zr(B4),O4=[9,13,27,32],t1=Yi&&"CompositionEvent"in window,iu=null;Yi&&"documentMode"in document&&(iu=document.documentMode);var U4=Yi&&"TextEvent"in window&&!iu,iS=Yi&&(!t1||iu&&8<iu&&11>=iu),Qy=String.fromCharCode(32),Zy=!1;function sS(e,t){switch(e){case"keyup":return O4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pa=!1;function z4(e,t){switch(e){case"compositionend":return oS(t);case"keypress":return t.which!==32?null:(Zy=!0,Qy);case"textInput":return e=t.data,e===Qy&&Zy?null:e;default:return null}}function H4(e,t){if(pa)return e==="compositionend"||!t1&&sS(e,t)?(e=nS(),Jh=Zv=ws=null,pa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iS&&t.locale!=="ko"?null:t.data;default:return null}}var G4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!G4[e.type]:t==="textarea"}function aS(e,t,r,n){Ow(n),t=Sd(t,"onChange"),0<t.length&&(r=new Jv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var su=null,yu=null;function $4(e){xS(e,0)}function sf(e){var t=va(e);if(Rw(t))return e}function j4(e,t){if(e==="change")return t}var lS=!1;if(Yi){var vp;if(Yi){var xp="oninput"in document;if(!xp){var e_=document.createElement("div");e_.setAttribute("oninput","return;"),xp=typeof e_.oninput=="function"}vp=xp}else vp=!1;lS=vp&&(!document.documentMode||9<document.documentMode)}function t_(){su&&(su.detachEvent("onpropertychange",uS),yu=su=null)}function uS(e){if(e.propertyName==="value"&&sf(yu)){var t=[];aS(t,yu,e,Xv(e)),Gw($4,t)}}function W4(e,t,r){e==="focusin"?(t_(),su=t,yu=r,su.attachEvent("onpropertychange",uS)):e==="focusout"&&t_()}function V4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sf(yu)}function X4(e,t){if(e==="click")return sf(t)}function Y4(e,t){if(e==="input"||e==="change")return sf(t)}function K4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yn=typeof Object.is=="function"?Object.is:K4;function _u(e,t){if(Yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!tg.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function r_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n_(e,t){var r=r_(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=r_(r)}}function cS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hS(){for(var e=window,t=gd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gd(e.document)}return t}function r1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function q4(e){var t=hS(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&cS(r.ownerDocument.documentElement,r)){if(n!==null&&r1(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=n_(r,s);var o=n_(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Q4=Yi&&"documentMode"in document&&11>=document.documentMode,ma=null,_g=null,ou=null,bg=!1;function i_(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bg||ma==null||ma!==gd(n)||(n=ma,"selectionStart"in n&&r1(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ou&&_u(ou,n)||(ou=n,n=Sd(_g,"onSelect"),0<n.length&&(t=new Jv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ma)))}function hh(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ga={animationend:hh("Animation","AnimationEnd"),animationiteration:hh("Animation","AnimationIteration"),animationstart:hh("Animation","AnimationStart"),transitionend:hh("Transition","TransitionEnd")},yp={},dS={};Yi&&(dS=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function of(e){if(yp[e])return yp[e];if(!ga[e])return e;var t=ga[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in dS)return yp[e]=t[r];return e}var fS=of("animationend"),pS=of("animationiteration"),mS=of("animationstart"),gS=of("transitionend"),vS=new Map,s_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){vS.set(e,t),Mo(t,[e])}for(var _p=0;_p<s_.length;_p++){var bp=s_[_p],Z4=bp.toLowerCase(),J4=bp[0].toUpperCase()+bp.slice(1);Gs(Z4,"on"+J4)}Gs(fS,"onAnimationEnd");Gs(pS,"onAnimationIteration");Gs(mS,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(gS,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xl));function o_(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ZA(n,t,void 0,e),e.currentTarget=null}function xS(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],h=a.instance,d=a.currentTarget;if(a=a.listener,h!==s&&i.isPropagationStopped())break e;o_(i,a,d),s=h}else for(o=0;o<n.length;o++){if(a=n[o],h=a.instance,d=a.currentTarget,a=a.listener,h!==s&&i.isPropagationStopped())break e;o_(i,a,d),s=h}}}if(xd)throw e=gg,xd=!1,gg=null,e}function lt(e,t){var r=t[Cg];r===void 0&&(r=t[Cg]=new Set);var n=e+"__bubble";r.has(n)||(yS(t,e,2,!1),r.add(n))}function wp(e,t,r){var n=0;t&&(n|=4),yS(r,e,n,t)}var dh="_reactListening"+Math.random().toString(36).slice(2);function bu(e){if(!e[dh]){e[dh]=!0,Cw.forEach(function(r){r!=="selectionchange"&&(e3.has(r)||wp(r,!1,e),wp(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dh]||(t[dh]=!0,wp("selectionchange",!1,t))}}function yS(e,t,r,n){switch(rS(t)){case 1:var i=p4;break;case 4:i=m4;break;default:i=Qv}r=i.bind(null,t,r,e),i=void 0,!mg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Sp(e,t,r,n,i){var s=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vo(a),o===null)return;if(h=o.tag,h===5||h===6){n=s=o;continue e}a=a.parentNode}}n=n.return}Gw(function(){var d=s,p=Xv(r),c=[];e:{var f=vS.get(e);if(f!==void 0){var m=Jv,v=e;switch(e){case"keypress":if(ed(r)===0)break e;case"keydown":case"keyup":m=I4;break;case"focusin":v="focus",m=gp;break;case"focusout":v="blur",m=gp;break;case"beforeblur":case"afterblur":m=gp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=x4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=N4;break;case fS:case pS:case mS:m=b4;break;case gS:m=L4;break;case"scroll":m=g4;break;case"wheel":m=F4;break;case"copy":case"cut":case"paste":m=S4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qy}var _=(t&4)!==0,T=!_&&e==="scroll",x=_?f!==null?f+"Capture":null:f;_=[];for(var y=d,w;y!==null;){w=y;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=mu(y,x),E!=null&&_.push(wu(y,E,w)))),T)break;y=y.return}0<_.length&&(f=new m(f,v,null,r,p),c.push({event:f,listeners:_}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==fg&&(v=r.relatedTarget||r.fromElement)&&(vo(v)||v[Ki]))break e;if((m||f)&&(f=p.window===p?p:(f=p.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=d,v=v?vo(v):null,v!==null&&(T=No(v),v!==T||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=d),m!==v)){if(_=Yy,E="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(_=qy,E="onPointerLeave",x="onPointerEnter",y="pointer"),T=m==null?f:va(m),w=v==null?f:va(v),f=new _(E,y+"leave",m,r,p),f.target=T,f.relatedTarget=w,E=null,vo(p)===d&&(_=new _(x,y+"enter",v,r,p),_.target=w,_.relatedTarget=T,E=_),T=E,m&&v)t:{for(_=m,x=v,y=0,w=_;w;w=ta(w))y++;for(w=0,E=x;E;E=ta(E))w++;for(;0<y-w;)_=ta(_),y--;for(;0<w-y;)x=ta(x),w--;for(;y--;){if(_===x||x!==null&&_===x.alternate)break t;_=ta(_),x=ta(x)}_=null}else _=null;m!==null&&a_(c,f,m,_,!1),v!==null&&T!==null&&a_(c,T,v,_,!0)}}e:{if(f=d?va(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=j4;else if(Jy(f))if(lS)P=Y4;else{P=V4;var I=W4}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=X4);if(P&&(P=P(e,d))){aS(c,P,r,p);break e}I&&I(e,f,d),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&lg(f,"number",f.value)}switch(I=d?va(d):window,e){case"focusin":(Jy(I)||I.contentEditable==="true")&&(ma=I,_g=d,ou=null);break;case"focusout":ou=_g=ma=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,i_(c,r,p);break;case"selectionchange":if(Q4)break;case"keydown":case"keyup":i_(c,r,p)}var R;if(t1)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else pa?sS(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(iS&&r.locale!=="ko"&&(pa||N!=="onCompositionStart"?N==="onCompositionEnd"&&pa&&(R=nS()):(ws=p,Zv="value"in ws?ws.value:ws.textContent,pa=!0)),I=Sd(d,N),0<I.length&&(N=new Ky(N,e,null,r,p),c.push({event:N,listeners:I}),R?N.data=R:(R=oS(r),R!==null&&(N.data=R)))),(R=U4?z4(e,r):H4(e,r))&&(d=Sd(d,"onBeforeInput"),0<d.length&&(p=new Ky("onBeforeInput","beforeinput",null,r,p),c.push({event:p,listeners:d}),p.data=R))}xS(c,t)})}function wu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Sd(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mu(e,r),s!=null&&n.unshift(wu(e,s,i)),s=mu(e,t),s!=null&&n.push(wu(e,s,i))),e=e.return}return n}function ta(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function a_(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,h=a.alternate,d=a.stateNode;if(h!==null&&h===n)break;a.tag===5&&d!==null&&(a=d,i?(h=mu(r,s),h!=null&&o.unshift(wu(r,h,a))):i||(h=mu(r,s),h!=null&&o.push(wu(r,h,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var t3=/\r\n?/g,r3=/\u0000|\uFFFD/g;function l_(e){return(typeof e=="string"?e:""+e).replace(t3,`
`).replace(r3,"")}function fh(e,t,r){if(t=l_(t),l_(e)!==t&&r)throw Error(le(425))}function Td(){}var wg=null,Sg=null;function Tg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eg=typeof setTimeout=="function"?setTimeout:void 0,n3=typeof clearTimeout=="function"?clearTimeout:void 0,u_=typeof Promise=="function"?Promise:void 0,i3=typeof queueMicrotask=="function"?queueMicrotask:typeof u_<"u"?function(e){return u_.resolve(null).then(e).catch(s3)}:Eg;function s3(e){setTimeout(function(){throw e})}function Tp(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),xu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);xu(t)}function ks(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function c_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var el=Math.random().toString(36).slice(2),gi="__reactFiber$"+el,Su="__reactProps$"+el,Ki="__reactContainer$"+el,Cg="__reactEvents$"+el,o3="__reactListeners$"+el,a3="__reactHandles$"+el;function vo(e){var t=e[gi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ki]||r[gi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=c_(e);e!==null;){if(r=e[gi])return r;e=c_(e)}return t}e=r,r=e.parentNode}return null}function Wu(e){return e=e[gi]||e[Ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function va(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function af(e){return e[Su]||null}var Ag=[],xa=-1;function $s(e){return{current:e}}function ut(e){0>xa||(e.current=Ag[xa],Ag[xa]=null,xa--)}function at(e,t){xa++,Ag[xa]=e.current,e.current=t}var Bs={},pr=$s(Bs),Nr=$s(!1),Eo=Bs;function Ha(e,t){var r=e.type.contextTypes;if(!r)return Bs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Dr(e){return e=e.childContextTypes,e!=null}function Ed(){ut(Nr),ut(pr)}function h_(e,t,r){if(pr.current!==Bs)throw Error(le(168));at(pr,t),at(Nr,r)}function _S(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(le(108,WA(e)||"Unknown",i));return wt({},r,n)}function Cd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bs,Eo=pr.current,at(pr,e),at(Nr,Nr.current),!0}function d_(e,t,r){var n=e.stateNode;if(!n)throw Error(le(169));r?(e=_S(e,t,Eo),n.__reactInternalMemoizedMergedChildContext=e,ut(Nr),ut(pr),at(pr,e)):ut(Nr),at(Nr,r)}var zi=null,lf=!1,Ep=!1;function bS(e){zi===null?zi=[e]:zi.push(e)}function l3(e){lf=!0,bS(e)}function js(){if(!Ep&&zi!==null){Ep=!0;var e=0,t=nt;try{var r=zi;for(nt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}zi=null,lf=!1}catch(i){throw zi!==null&&(zi=zi.slice(e+1)),Vw(Yv,js),i}finally{nt=t,Ep=!1}}return null}var ya=[],_a=0,Ad=null,kd=0,cn=[],hn=0,Co=null,Gi=1,$i="";function ao(e,t){ya[_a++]=kd,ya[_a++]=Ad,Ad=e,kd=t}function wS(e,t,r){cn[hn++]=Gi,cn[hn++]=$i,cn[hn++]=Co,Co=e;var n=Gi;e=$i;var i=32-Gn(n)-1;n&=~(1<<i),r+=1;var s=32-Gn(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Gi=1<<32-Gn(t)+i|r<<i|n,$i=s+e}else Gi=1<<s|r<<i|n,$i=e}function n1(e){e.return!==null&&(ao(e,1),wS(e,1,0))}function i1(e){for(;e===Ad;)Ad=ya[--_a],ya[_a]=null,kd=ya[--_a],ya[_a]=null;for(;e===Co;)Co=cn[--hn],cn[hn]=null,$i=cn[--hn],cn[hn]=null,Gi=cn[--hn],cn[hn]=null}var Yr=null,Vr=null,ft=!1,Bn=null;function SS(e,t){var r=dn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function f_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yr=e,Vr=ks(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yr=e,Vr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Co!==null?{id:Gi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=dn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Yr=e,Vr=null,!0):!1;default:return!1}}function kg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pg(e){if(ft){var t=Vr;if(t){var r=t;if(!f_(e,t)){if(kg(e))throw Error(le(418));t=ks(r.nextSibling);var n=Yr;t&&f_(e,t)?SS(n,r):(e.flags=e.flags&-4097|2,ft=!1,Yr=e)}}else{if(kg(e))throw Error(le(418));e.flags=e.flags&-4097|2,ft=!1,Yr=e}}}function p_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yr=e}function ph(e){if(e!==Yr)return!1;if(!ft)return p_(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Tg(e.type,e.memoizedProps)),t&&(t=Vr)){if(kg(e))throw TS(),Error(le(418));for(;t;)SS(e,t),t=ks(t.nextSibling)}if(p_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Vr=ks(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Vr=null}}else Vr=Yr?ks(e.stateNode.nextSibling):null;return!0}function TS(){for(var e=Vr;e;)e=ks(e.nextSibling)}function Ga(){Vr=Yr=null,ft=!1}function s1(e){Bn===null?Bn=[e]:Bn.push(e)}var u3=Ji.ReactCurrentBatchConfig;function Nn(e,t){if(e&&e.defaultProps){t=wt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Pd=$s(null),Id=null,ba=null,o1=null;function a1(){o1=ba=Id=null}function l1(e){var t=Pd.current;ut(Pd),e._currentValue=t}function Ig(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ra(e,t){Id=e,o1=ba=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Mr=!0),e.firstContext=null)}function gn(e){var t=e._currentValue;if(o1!==e)if(e={context:e,memoizedValue:t,next:null},ba===null){if(Id===null)throw Error(le(308));ba=e,Id.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var xo=null;function u1(e){xo===null?xo=[e]:xo.push(e)}function ES(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,u1(t)):(r.next=i.next,i.next=r),t.interleaved=r,qi(e,n)}function qi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var xs=!1;function c1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ps(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Xe&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,qi(e,r)}return i=n.interleaved,i===null?(t.next=t,u1(n)):(t.next=i.next,i.next=t),n.interleaved=t,qi(e,r)}function td(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kv(e,r)}}function m_(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Rd(e,t,r,n){var i=e.updateQueue;xs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var h=a,d=h.next;h.next=null,o===null?s=d:o.next=d,o=h;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=h))}if(s!==null){var c=i.baseState;o=0,p=d=h=null,a=s;do{var f=a.lane,m=a.eventTime;if((n&f)===f){p!==null&&(p=p.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,_=a;switch(f=t,m=r,_.tag){case 1:if(v=_.payload,typeof v=="function"){c=v.call(m,c,f);break e}c=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,f=typeof v=="function"?v.call(m,c,f):v,f==null)break e;c=wt({},c,f);break e;case 2:xs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=m,h=c):p=p.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(p===null&&(h=c),i.baseState=h,i.firstBaseUpdate=d,i.lastBaseUpdate=p,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ko|=o,e.lanes=o,e.memoizedState=c}}function g_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(le(191,i));i.call(n)}}}var AS=new Ew.Component().refs;function Rg(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:wt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var uf={isMounted:function(e){return(e=e._reactInternals)?No(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=br(),i=Rs(e),s=Wi(n,i);s.payload=t,r!=null&&(s.callback=r),t=Ps(e,s,i),t!==null&&($n(t,e,i,n),td(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=br(),i=Rs(e),s=Wi(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Ps(e,s,i),t!==null&&($n(t,e,i,n),td(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=br(),n=Rs(e),i=Wi(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ps(e,i,n),t!==null&&($n(t,e,n,r),td(t,e,n))}};function v_(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!_u(r,n)||!_u(i,s):!0}function kS(e,t,r){var n=!1,i=Bs,s=t.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Dr(t)?Eo:pr.current,n=t.contextTypes,s=(n=n!=null)?Ha(e,i):Bs),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function x_(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&uf.enqueueReplaceState(t,t.state,null)}function Mg(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=AS,c1(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Dr(t)?Eo:pr.current,i.context=Ha(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Rg(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&uf.enqueueReplaceState(i,i.state,null),Rd(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Rl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var n=r.stateNode}if(!n)throw Error(le(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===AS&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,e))}return e}function mh(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function y_(e){var t=e._init;return t(e._payload)}function PS(e){function t(x,y){if(e){var w=x.deletions;w===null?(x.deletions=[y],x.flags|=16):w.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function i(x,y){return x=Ms(x,y),x.index=0,x.sibling=null,x}function s(x,y,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<y?(x.flags|=2,y):w):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,y,w,E){return y===null||y.tag!==6?(y=Mp(w,x.mode,E),y.return=x,y):(y=i(y,w),y.return=x,y)}function h(x,y,w,E){var P=w.type;return P===fa?p(x,y,w.props.children,E,w.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===vs&&y_(P)===y.type)?(E=i(y,w.props),E.ref=Rl(x,y,w),E.return=x,E):(E=ad(w.type,w.key,w.props,null,x.mode,E),E.ref=Rl(x,y,w),E.return=x,E)}function d(x,y,w,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Np(w,x.mode,E),y.return=x,y):(y=i(y,w.children||[]),y.return=x,y)}function p(x,y,w,E,P){return y===null||y.tag!==7?(y=wo(w,x.mode,E,P),y.return=x,y):(y=i(y,w),y.return=x,y)}function c(x,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Mp(""+y,x.mode,w),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ih:return w=ad(y.type,y.key,y.props,null,x.mode,w),w.ref=Rl(x,null,y),w.return=x,w;case da:return y=Np(y,x.mode,w),y.return=x,y;case vs:var E=y._init;return c(x,E(y._payload),w)}if(Wl(y)||Cl(y))return y=wo(y,x.mode,w,null),y.return=x,y;mh(x,y)}return null}function f(x,y,w,E){var P=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:a(x,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ih:return w.key===P?h(x,y,w,E):null;case da:return w.key===P?d(x,y,w,E):null;case vs:return P=w._init,f(x,y,P(w._payload),E)}if(Wl(w)||Cl(w))return P!==null?null:p(x,y,w,E,null);mh(x,w)}return null}function m(x,y,w,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,a(y,x,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ih:return x=x.get(E.key===null?w:E.key)||null,h(y,x,E,P);case da:return x=x.get(E.key===null?w:E.key)||null,d(y,x,E,P);case vs:var I=E._init;return m(x,y,w,I(E._payload),P)}if(Wl(E)||Cl(E))return x=x.get(w)||null,p(y,x,E,P,null);mh(y,E)}return null}function v(x,y,w,E){for(var P=null,I=null,R=y,N=y=0,D=null;R!==null&&N<w.length;N++){R.index>N?(D=R,R=null):D=R.sibling;var k=f(x,R,w[N],E);if(k===null){R===null&&(R=D);break}e&&R&&k.alternate===null&&t(x,R),y=s(k,y,N),I===null?P=k:I.sibling=k,I=k,R=D}if(N===w.length)return r(x,R),ft&&ao(x,N),P;if(R===null){for(;N<w.length;N++)R=c(x,w[N],E),R!==null&&(y=s(R,y,N),I===null?P=R:I.sibling=R,I=R);return ft&&ao(x,N),P}for(R=n(x,R);N<w.length;N++)D=m(R,x,N,w[N],E),D!==null&&(e&&D.alternate!==null&&R.delete(D.key===null?N:D.key),y=s(D,y,N),I===null?P=D:I.sibling=D,I=D);return e&&R.forEach(function(M){return t(x,M)}),ft&&ao(x,N),P}function _(x,y,w,E){var P=Cl(w);if(typeof P!="function")throw Error(le(150));if(w=P.call(w),w==null)throw Error(le(151));for(var I=P=null,R=y,N=y=0,D=null,k=w.next();R!==null&&!k.done;N++,k=w.next()){R.index>N?(D=R,R=null):D=R.sibling;var M=f(x,R,k.value,E);if(M===null){R===null&&(R=D);break}e&&R&&M.alternate===null&&t(x,R),y=s(M,y,N),I===null?P=M:I.sibling=M,I=M,R=D}if(k.done)return r(x,R),ft&&ao(x,N),P;if(R===null){for(;!k.done;N++,k=w.next())k=c(x,k.value,E),k!==null&&(y=s(k,y,N),I===null?P=k:I.sibling=k,I=k);return ft&&ao(x,N),P}for(R=n(x,R);!k.done;N++,k=w.next())k=m(R,x,N,k.value,E),k!==null&&(e&&k.alternate!==null&&R.delete(k.key===null?N:k.key),y=s(k,y,N),I===null?P=k:I.sibling=k,I=k);return e&&R.forEach(function(z){return t(x,z)}),ft&&ao(x,N),P}function T(x,y,w,E){if(typeof w=="object"&&w!==null&&w.type===fa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ih:e:{for(var P=w.key,I=y;I!==null;){if(I.key===P){if(P=w.type,P===fa){if(I.tag===7){r(x,I.sibling),y=i(I,w.props.children),y.return=x,x=y;break e}}else if(I.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===vs&&y_(P)===I.type){r(x,I.sibling),y=i(I,w.props),y.ref=Rl(x,I,w),y.return=x,x=y;break e}r(x,I);break}else t(x,I);I=I.sibling}w.type===fa?(y=wo(w.props.children,x.mode,E,w.key),y.return=x,x=y):(E=ad(w.type,w.key,w.props,null,x.mode,E),E.ref=Rl(x,y,w),E.return=x,x=E)}return o(x);case da:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){r(x,y.sibling),y=i(y,w.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=Np(w,x.mode,E),y.return=x,x=y}return o(x);case vs:return I=w._init,T(x,y,I(w._payload),E)}if(Wl(w))return v(x,y,w,E);if(Cl(w))return _(x,y,w,E);mh(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(r(x,y.sibling),y=i(y,w),y.return=x,x=y):(r(x,y),y=Mp(w,x.mode,E),y.return=x,x=y),o(x)):r(x,y)}return T}var $a=PS(!0),IS=PS(!1),Vu={},_i=$s(Vu),Tu=$s(Vu),Eu=$s(Vu);function yo(e){if(e===Vu)throw Error(le(174));return e}function h1(e,t){switch(at(Eu,t),at(Tu,e),at(_i,Vu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cg(t,e)}ut(_i),at(_i,t)}function ja(){ut(_i),ut(Tu),ut(Eu)}function RS(e){yo(Eu.current);var t=yo(_i.current),r=cg(t,e.type);t!==r&&(at(Tu,e),at(_i,r))}function d1(e){Tu.current===e&&(ut(_i),ut(Tu))}var yt=$s(0);function Md(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cp=[];function f1(){for(var e=0;e<Cp.length;e++)Cp[e]._workInProgressVersionPrimary=null;Cp.length=0}var rd=Ji.ReactCurrentDispatcher,Ap=Ji.ReactCurrentBatchConfig,Ao=0,bt=null,Ot=null,Wt=null,Nd=!1,au=!1,Cu=0,c3=0;function ur(){throw Error(le(321))}function p1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Yn(e[r],t[r]))return!1;return!0}function m1(e,t,r,n,i,s){if(Ao=s,bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rd.current=e===null||e.memoizedState===null?p3:m3,e=r(n,i),au){s=0;do{if(au=!1,Cu=0,25<=s)throw Error(le(301));s+=1,Wt=Ot=null,t.updateQueue=null,rd.current=g3,e=r(n,i)}while(au)}if(rd.current=Dd,t=Ot!==null&&Ot.next!==null,Ao=0,Wt=Ot=bt=null,Nd=!1,t)throw Error(le(300));return e}function g1(){var e=Cu!==0;return Cu=0,e}function di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?bt.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function vn(){if(Ot===null){var e=bt.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=Wt===null?bt.memoizedState:Wt.next;if(t!==null)Wt=t,Ot=e;else{if(e===null)throw Error(le(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Wt===null?bt.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Au(e,t){return typeof t=="function"?t(e):t}function kp(e){var t=vn(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var n=Ot,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,h=null,d=s;do{var p=d.lane;if((Ao&p)===p)h!==null&&(h=h.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var c={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};h===null?(a=h=c,o=n):h=h.next=c,bt.lanes|=p,ko|=p}d=d.next}while(d!==null&&d!==s);h===null?o=n:h.next=a,Yn(n,t.memoizedState)||(Mr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=h,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,bt.lanes|=s,ko|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Pp(e){var t=vn(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Yn(s,t.memoizedState)||(Mr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function MS(){}function NS(e,t){var r=bt,n=vn(),i=t(),s=!Yn(n.memoizedState,i);if(s&&(n.memoizedState=i,Mr=!0),n=n.queue,v1(BS.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Wt!==null&&Wt.memoizedState.tag&1){if(r.flags|=2048,ku(9,LS.bind(null,r,n,i,t),void 0,null),Kt===null)throw Error(le(349));(Ao&30)!==0||DS(r,t,i)}return i}function DS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=bt.updateQueue,t===null?(t={lastEffect:null,stores:null},bt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function LS(e,t,r,n){t.value=r,t.getSnapshot=n,FS(t)&&OS(e)}function BS(e,t,r){return r(function(){FS(t)&&OS(e)})}function FS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Yn(e,r)}catch{return!0}}function OS(e){var t=qi(e,1);t!==null&&$n(t,e,1,-1)}function __(e){var t=di();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:e},t.queue=e,e=e.dispatch=f3.bind(null,bt,e),[t.memoizedState,e]}function ku(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=bt.updateQueue,t===null?(t={lastEffect:null,stores:null},bt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function US(){return vn().memoizedState}function nd(e,t,r,n){var i=di();bt.flags|=e,i.memoizedState=ku(1|t,r,void 0,n===void 0?null:n)}function cf(e,t,r,n){var i=vn();n=n===void 0?null:n;var s=void 0;if(Ot!==null){var o=Ot.memoizedState;if(s=o.destroy,n!==null&&p1(n,o.deps)){i.memoizedState=ku(t,r,s,n);return}}bt.flags|=e,i.memoizedState=ku(1|t,r,s,n)}function b_(e,t){return nd(8390656,8,e,t)}function v1(e,t){return cf(2048,8,e,t)}function zS(e,t){return cf(4,2,e,t)}function HS(e,t){return cf(4,4,e,t)}function GS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $S(e,t,r){return r=r!=null?r.concat([e]):null,cf(4,4,GS.bind(null,t,e),r)}function x1(){}function jS(e,t){var r=vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p1(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function WS(e,t){var r=vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p1(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function VS(e,t,r){return(Ao&21)===0?(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=r):(Yn(r,t)||(r=Kw(),bt.lanes|=r,ko|=r,e.baseState=!0),t)}function h3(e,t){var r=nt;nt=r!==0&&4>r?r:4,e(!0);var n=Ap.transition;Ap.transition={};try{e(!1),t()}finally{nt=r,Ap.transition=n}}function XS(){return vn().memoizedState}function d3(e,t,r){var n=Rs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},YS(e))KS(t,r);else if(r=ES(e,t,r,n),r!==null){var i=br();$n(r,e,n,i),qS(r,t,n)}}function f3(e,t,r){var n=Rs(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(YS(e))KS(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Yn(a,o)){var h=t.interleaved;h===null?(i.next=i,u1(t)):(i.next=h.next,h.next=i),t.interleaved=i;return}}catch{}finally{}r=ES(e,t,i,n),r!==null&&(i=br(),$n(r,e,n,i),qS(r,t,n))}}function YS(e){var t=e.alternate;return e===bt||t!==null&&t===bt}function KS(e,t){au=Nd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qS(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kv(e,r)}}var Dd={readContext:gn,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useInsertionEffect:ur,useLayoutEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useMutableSource:ur,useSyncExternalStore:ur,useId:ur,unstable_isNewReconciler:!1},p3={readContext:gn,useCallback:function(e,t){return di().memoizedState=[e,t===void 0?null:t],e},useContext:gn,useEffect:b_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,nd(4194308,4,GS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return nd(4194308,4,e,t)},useInsertionEffect:function(e,t){return nd(4,2,e,t)},useMemo:function(e,t){var r=di();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=di();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=d3.bind(null,bt,e),[n.memoizedState,e]},useRef:function(e){var t=di();return e={current:e},t.memoizedState=e},useState:__,useDebugValue:x1,useDeferredValue:function(e){return di().memoizedState=e},useTransition:function(){var e=__(!1),t=e[0];return e=h3.bind(null,e[1]),di().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=bt,i=di();if(ft){if(r===void 0)throw Error(le(407));r=r()}else{if(r=t(),Kt===null)throw Error(le(349));(Ao&30)!==0||DS(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,b_(BS.bind(null,n,s,e),[e]),n.flags|=2048,ku(9,LS.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=di(),t=Kt.identifierPrefix;if(ft){var r=$i,n=Gi;r=(n&~(1<<32-Gn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=c3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},m3={readContext:gn,useCallback:jS,useContext:gn,useEffect:v1,useImperativeHandle:$S,useInsertionEffect:zS,useLayoutEffect:HS,useMemo:WS,useReducer:kp,useRef:US,useState:function(){return kp(Au)},useDebugValue:x1,useDeferredValue:function(e){var t=vn();return VS(t,Ot.memoizedState,e)},useTransition:function(){var e=kp(Au)[0],t=vn().memoizedState;return[e,t]},useMutableSource:MS,useSyncExternalStore:NS,useId:XS,unstable_isNewReconciler:!1},g3={readContext:gn,useCallback:jS,useContext:gn,useEffect:v1,useImperativeHandle:$S,useInsertionEffect:zS,useLayoutEffect:HS,useMemo:WS,useReducer:Pp,useRef:US,useState:function(){return Pp(Au)},useDebugValue:x1,useDeferredValue:function(e){var t=vn();return Ot===null?t.memoizedState=e:VS(t,Ot.memoizedState,e)},useTransition:function(){var e=Pp(Au)[0],t=vn().memoizedState;return[e,t]},useMutableSource:MS,useSyncExternalStore:NS,useId:XS,unstable_isNewReconciler:!1};function Wa(e,t){try{var r="",n=t;do r+=jA(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Ip(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ng(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var v3=typeof WeakMap=="function"?WeakMap:Map;function QS(e,t,r){r=Wi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Bd||(Bd=!0,$g=n),Ng(e,t)},r}function ZS(e,t,r){r=Wi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Ng(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Ng(e,t),typeof n!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function w_(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new v3;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=R3.bind(null,e,t,r),t.then(e,e))}function S_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function T_(e,t,r,n,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wi(-1,1),t.tag=2,Ps(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var x3=Ji.ReactCurrentOwner,Mr=!1;function _r(e,t,r,n){t.child=e===null?IS(t,null,r,n):$a(t,e.child,r,n)}function E_(e,t,r,n,i){r=r.render;var s=t.ref;return Ra(t,i),n=m1(e,t,r,n,s,i),r=g1(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qi(e,t,i)):(ft&&r&&n1(t),t.flags|=1,_r(e,t,n,i),t.child)}function C_(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!C1(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,JS(e,t,s,n,i)):(e=ad(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&i)===0){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:_u,r(o,n)&&e.ref===t.ref)return Qi(e,t,i)}return t.flags|=1,e=Ms(s,n),e.ref=t.ref,e.return=t,t.child=e}function JS(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(_u(s,n)&&e.ref===t.ref)if(Mr=!1,t.pendingProps=n=s,(e.lanes&i)!==0)(e.flags&131072)!==0&&(Mr=!0);else return t.lanes=e.lanes,Qi(e,t,i)}return Dg(e,t,r,n,i)}function eT(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Sa,Wr),Wr|=r;else{if((r&1073741824)===0)return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,at(Sa,Wr),Wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,at(Sa,Wr),Wr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,at(Sa,Wr),Wr|=n;return _r(e,t,i,r),t.child}function tT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Dg(e,t,r,n,i){var s=Dr(r)?Eo:pr.current;return s=Ha(t,s),Ra(t,i),r=m1(e,t,r,n,s,i),n=g1(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qi(e,t,i)):(ft&&n&&n1(t),t.flags|=1,_r(e,t,r,i),t.child)}function A_(e,t,r,n,i){if(Dr(r)){var s=!0;Cd(t)}else s=!1;if(Ra(t,i),t.stateNode===null)id(e,t),kS(t,r,n),Mg(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var h=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=gn(d):(d=Dr(r)?Eo:pr.current,d=Ha(t,d));var p=r.getDerivedStateFromProps,c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||h!==d)&&x_(t,o,n,d),xs=!1;var f=t.memoizedState;o.state=f,Rd(t,n,o,i),h=t.memoizedState,a!==n||f!==h||Nr.current||xs?(typeof p=="function"&&(Rg(t,r,p,n),h=t.memoizedState),(a=xs||v_(t,r,a,n,f,h,d))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=d,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,CS(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Nn(t.type,a),o.props=d,c=t.pendingProps,f=o.context,h=r.contextType,typeof h=="object"&&h!==null?h=gn(h):(h=Dr(r)?Eo:pr.current,h=Ha(t,h));var m=r.getDerivedStateFromProps;(p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==h)&&x_(t,o,n,h),xs=!1,f=t.memoizedState,o.state=f,Rd(t,n,o,i);var v=t.memoizedState;a!==c||f!==v||Nr.current||xs?(typeof m=="function"&&(Rg(t,r,m,n),v=t.memoizedState),(d=xs||v_(t,r,d,n,f,v,h)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,h)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=h,n=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Lg(e,t,r,n,s,i)}function Lg(e,t,r,n,i,s){tT(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&d_(t,r,!1),Qi(e,t,s);n=t.stateNode,x3.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=$a(t,e.child,null,s),t.child=$a(t,null,a,s)):_r(e,t,a,s),t.memoizedState=n.state,i&&d_(t,r,!0),t.child}function rT(e){var t=e.stateNode;t.pendingContext?h_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&h_(e,t.context,!1),h1(e,t.containerInfo)}function k_(e,t,r,n,i){return Ga(),s1(i),t.flags|=256,_r(e,t,r,n),t.child}var Bg={dehydrated:null,treeContext:null,retryLane:0};function Fg(e){return{baseLanes:e,cachePool:null,transitions:null}}function nT(e,t,r){var n=t.pendingProps,i=yt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),at(yt,i&1),e===null)return Pg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ff(o,n,0,null),e=wo(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fg(r),t.memoizedState=Bg,e):y1(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return y3(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var h={mode:"hidden",children:n.children};return(o&1)===0&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=h,t.deletions=null):(n=Ms(i,h),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ms(a,s):(s=wo(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Fg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Bg,n}return s=e.child,e=s.sibling,n=Ms(s,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function y1(e,t){return t=ff({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gh(e,t,r,n){return n!==null&&s1(n),$a(t,e.child,null,r),e=y1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function y3(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=Ip(Error(le(422))),gh(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=ff({mode:"visible",children:n.children},i,0,null),s=wo(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,(t.mode&1)!==0&&$a(t,e.child,null,o),t.child.memoizedState=Fg(o),t.memoizedState=Bg,s);if((t.mode&1)===0)return gh(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(le(419)),n=Ip(s,n,void 0),gh(e,t,o,n)}if(a=(o&e.childLanes)!==0,Mr||a){if(n=Kt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(n.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qi(e,i),$n(n,e,i,-1))}return E1(),n=Ip(Error(le(421))),gh(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=M3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Vr=ks(i.nextSibling),Yr=t,ft=!0,Bn=null,e!==null&&(cn[hn++]=Gi,cn[hn++]=$i,cn[hn++]=Co,Gi=e.id,$i=e.overflow,Co=t),t=y1(t,n.children),t.flags|=4096,t)}function P_(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ig(e.return,t,r)}function Rp(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function iT(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(_r(e,t,n.children,r),n=yt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&P_(e,r,t);else if(e.tag===19)P_(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(at(yt,n),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Md(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Rp(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Md(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Rp(t,!0,r,null,s);break;case"together":Rp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function id(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ko|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,r=Ms(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ms(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _3(e,t,r){switch(t.tag){case 3:rT(t),Ga();break;case 5:RS(t);break;case 1:Dr(t.type)&&Cd(t);break;case 4:h1(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;at(Pd,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(at(yt,yt.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?nT(e,t,r):(at(yt,yt.current&1),e=Qi(e,t,r),e!==null?e.sibling:null);at(yt,yt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return iT(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),at(yt,yt.current),n)break;return null;case 22:case 23:return t.lanes=0,eT(e,t,r)}return Qi(e,t,r)}var sT,Og,oT,aT;sT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Og=function(){};oT=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,yo(_i.current);var s=null;switch(r){case"input":i=og(e,i),n=og(e,n),s=[];break;case"select":i=wt({},i,{value:void 0}),n=wt({},n,{value:void 0}),s=[];break;case"textarea":i=ug(e,i),n=ug(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Td)}hg(r,n);var o;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(fu.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in n){var h=n[d];if(a=i?.[d],n.hasOwnProperty(d)&&h!==a&&(h!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in h)h.hasOwnProperty(o)&&a[o]!==h[o]&&(r||(r={}),r[o]=h[o])}else r||(s||(s=[]),s.push(d,r)),r=h;else d==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,a=a?a.__html:void 0,h!=null&&a!==h&&(s=s||[]).push(d,h)):d==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(d,""+h):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(fu.hasOwnProperty(d)?(h!=null&&d==="onScroll"&&lt("scroll",e),s||a===h||(s=[])):(s=s||[]).push(d,h))}r&&(s=s||[]).push("style",r);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};aT=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ml(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function b3(e,t,r){var n=t.pendingProps;switch(i1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Dr(t.type)&&Ed(),cr(t),null;case 3:return n=t.stateNode,ja(),ut(Nr),ut(pr),f1(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ph(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bn!==null&&(Vg(Bn),Bn=null))),Og(e,t),cr(t),null;case 5:d1(t);var i=yo(Eu.current);if(r=t.type,e!==null&&t.stateNode!=null)oT(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(le(166));return cr(t),null}if(e=yo(_i.current),ph(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[gi]=t,n[Su]=s,e=(t.mode&1)!==0,r){case"dialog":lt("cancel",n),lt("close",n);break;case"iframe":case"object":case"embed":lt("load",n);break;case"video":case"audio":for(i=0;i<Xl.length;i++)lt(Xl[i],n);break;case"source":lt("error",n);break;case"img":case"image":case"link":lt("error",n),lt("load",n);break;case"details":lt("toggle",n);break;case"input":Oy(n,s),lt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},lt("invalid",n);break;case"textarea":zy(n,s),lt("invalid",n)}hg(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&fh(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fh(n.textContent,a,e),i=["children",""+a]):fu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&lt("scroll",n)}switch(r){case"input":sh(n),Uy(n,s,!0);break;case"textarea":sh(n),Hy(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Td)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[gi]=t,e[Su]=n,sT(e,t,!1,!1),t.stateNode=e;e:{switch(o=dg(r,n),r){case"dialog":lt("cancel",e),lt("close",e),i=n;break;case"iframe":case"object":case"embed":lt("load",e),i=n;break;case"video":case"audio":for(i=0;i<Xl.length;i++)lt(Xl[i],e);i=n;break;case"source":lt("error",e),i=n;break;case"img":case"image":case"link":lt("error",e),lt("load",e),i=n;break;case"details":lt("toggle",e),i=n;break;case"input":Oy(e,n),i=og(e,n),lt("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=wt({},n,{value:void 0}),lt("invalid",e);break;case"textarea":zy(e,n),i=ug(e,n),lt("invalid",e);break;default:i=n}hg(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var h=a[s];s==="style"?Fw(e,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Lw(e,h)):s==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&pu(e,h):typeof h=="number"&&pu(e,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fu.hasOwnProperty(s)?h!=null&&s==="onScroll"&&lt("scroll",e):h!=null&&$v(e,s,h,o))}switch(r){case"input":sh(e),Uy(e,n,!1);break;case"textarea":sh(e),Hy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ls(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Aa(e,!!n.multiple,s,!1):n.defaultValue!=null&&Aa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Td)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)aT(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(le(166));if(r=yo(Eu.current),yo(_i.current),ph(t)){if(n=t.stateNode,r=t.memoizedProps,n[gi]=t,(s=n.nodeValue!==r)&&(e=Yr,e!==null))switch(e.tag){case 3:fh(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fh(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gi]=t,t.stateNode=n}return cr(t),null;case 13:if(ut(yt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&Vr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)TS(),Ga(),t.flags|=98560,s=!1;else if(s=ph(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(le(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[gi]=t}else Ga(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;cr(t),s=!1}else Bn!==null&&(Vg(Bn),Bn=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(yt.current&1)!==0?Ut===0&&(Ut=3):E1())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return ja(),Og(e,t),e===null&&bu(t.stateNode.containerInfo),cr(t),null;case 10:return l1(t.type._context),cr(t),null;case 17:return Dr(t.type)&&Ed(),cr(t),null;case 19:if(ut(yt),s=t.memoizedState,s===null)return cr(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)Ml(s,!1);else{if(Ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Md(e),o!==null){for(t.flags|=128,Ml(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return at(yt,yt.current&1|2),t.child}e=e.sibling}s.tail!==null&&It()>Va&&(t.flags|=128,n=!0,Ml(s,!1),t.lanes=4194304)}else{if(!n)if(e=Md(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ml(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ft)return cr(t),null}else 2*It()-s.renderingStartTime>Va&&r!==1073741824&&(t.flags|=128,n=!0,Ml(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=It(),t.sibling=null,r=yt.current,at(yt,n?r&1|2:r&1),t):(cr(t),null);case 22:case 23:return T1(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Wr&1073741824)!==0&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function w3(e,t){switch(i1(t),t.tag){case 1:return Dr(t.type)&&Ed(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ja(),ut(Nr),ut(pr),f1(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return d1(t),null;case 13:if(ut(yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));Ga()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ut(yt),null;case 4:return ja(),null;case 10:return l1(t.type._context),null;case 22:case 23:return T1(),null;case 24:return null;default:return null}}var vh=!1,dr=!1,S3=typeof WeakSet=="function"?WeakSet:Set,be=null;function wa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Tt(e,t,n)}else r.current=null}function Ug(e,t,r){try{r()}catch(n){Tt(e,t,n)}}var I_=!1;function T3(e,t){if(wg=bd,e=hS(),r1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,h=-1,d=0,p=0,c=e,f=null;t:for(;;){for(var m;c!==r||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(h=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(m=c.firstChild)!==null;)f=c,c=m;for(;;){if(c===e)break t;if(f===r&&++d===i&&(a=o),f===s&&++p===n&&(h=o),(m=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=m}r=a===-1||h===-1?null:{start:a,end:h}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sg={focusedElem:e,selectionRange:r},bd=!1,be=t;be!==null;)if(t=be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,be=e;else for(;be!==null;){t=be;try{var v=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,T=v.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?_:Nn(t.type,_),T);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(E){Tt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,be=e;break}be=t.return}return v=I_,I_=!1,v}function lu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ug(t,r,s)}i=i.next}while(i!==n)}}function hf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function zg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function lT(e){var t=e.alternate;t!==null&&(e.alternate=null,lT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gi],delete t[Su],delete t[Cg],delete t[o3],delete t[a3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uT(e){return e.tag===5||e.tag===3||e.tag===4}function R_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Td));else if(n!==4&&(e=e.child,e!==null))for(Hg(e,t,r),e=e.sibling;e!==null;)Hg(e,t,r),e=e.sibling}function Gg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Gg(e,t,r),e=e.sibling;e!==null;)Gg(e,t,r),e=e.sibling}var Jt=null,Ln=!1;function ms(e,t,r){for(r=r.child;r!==null;)cT(e,t,r),r=r.sibling}function cT(e,t,r){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(rf,r)}catch{}switch(r.tag){case 5:dr||wa(r,t);case 6:var n=Jt,i=Ln;Jt=null,ms(e,t,r),Jt=n,Ln=i,Jt!==null&&(Ln?(e=Jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Jt.removeChild(r.stateNode));break;case 18:Jt!==null&&(Ln?(e=Jt,r=r.stateNode,e.nodeType===8?Tp(e.parentNode,r):e.nodeType===1&&Tp(e,r),xu(e)):Tp(Jt,r.stateNode));break;case 4:n=Jt,i=Ln,Jt=r.stateNode.containerInfo,Ln=!0,ms(e,t,r),Jt=n,Ln=i;break;case 0:case 11:case 14:case 15:if(!dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&Ug(r,t,o),i=i.next}while(i!==n)}ms(e,t,r);break;case 1:if(!dr&&(wa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Tt(r,t,a)}ms(e,t,r);break;case 21:ms(e,t,r);break;case 22:r.mode&1?(dr=(n=dr)||r.memoizedState!==null,ms(e,t,r),dr=n):ms(e,t,r);break;default:ms(e,t,r)}}function M_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new S3),t.forEach(function(n){var i=N3.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Jt=a.stateNode,Ln=!1;break e;case 3:Jt=a.stateNode.containerInfo,Ln=!0;break e;case 4:Jt=a.stateNode.containerInfo,Ln=!0;break e}a=a.return}if(Jt===null)throw Error(le(160));cT(s,o,i),Jt=null,Ln=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(d){Tt(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hT(t,e),t=t.sibling}function hT(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(t,e),ui(e),n&4){try{lu(3,e,e.return),hf(3,e)}catch(_){Tt(e,e.return,_)}try{lu(5,e,e.return)}catch(_){Tt(e,e.return,_)}}break;case 1:Cn(t,e),ui(e),n&512&&r!==null&&wa(r,r.return);break;case 5:if(Cn(t,e),ui(e),n&512&&r!==null&&wa(r,r.return),e.flags&32){var i=e.stateNode;try{pu(i,"")}catch(_){Tt(e,e.return,_)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Mw(i,s),dg(a,o);var d=dg(a,s);for(o=0;o<h.length;o+=2){var p=h[o],c=h[o+1];p==="style"?Fw(i,c):p==="dangerouslySetInnerHTML"?Lw(i,c):p==="children"?pu(i,c):$v(i,p,c,d)}switch(a){case"input":ag(i,s);break;case"textarea":Nw(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Aa(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Aa(i,!!s.multiple,s.defaultValue,!0):Aa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Su]=s}catch(_){Tt(e,e.return,_)}}break;case 6:if(Cn(t,e),ui(e),n&4){if(e.stateNode===null)throw Error(le(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(_){Tt(e,e.return,_)}}break;case 3:if(Cn(t,e),ui(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{xu(t.containerInfo)}catch(_){Tt(e,e.return,_)}break;case 4:Cn(t,e),ui(e);break;case 13:Cn(t,e),ui(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(w1=It())),n&4&&M_(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(dr=(d=dr)||p,Cn(t,e),dr=d):Cn(t,e),ui(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&(e.mode&1)!==0)for(be=e,p=e.child;p!==null;){for(c=be=p;be!==null;){switch(f=be,m=f.child,f.tag){case 0:case 11:case 14:case 15:lu(4,f,f.return);break;case 1:wa(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(_){Tt(n,r,_)}}break;case 5:wa(f,f.return);break;case 22:if(f.memoizedState!==null){D_(c);continue}}m!==null?(m.return=f,be=m):D_(c)}p=p.sibling}e:for(p=null,c=e;;){if(c.tag===5){if(p===null){p=c;try{i=c.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,h=c.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,a.style.display=Bw("display",o))}catch(_){Tt(e,e.return,_)}}}else if(c.tag===6){if(p===null)try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(_){Tt(e,e.return,_)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;p===c&&(p=null),c=c.return}p===c&&(p=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Cn(t,e),ui(e),n&4&&M_(e);break;case 21:break;default:Cn(t,e),ui(e)}}function ui(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(uT(r)){var n=r;break e}r=r.return}throw Error(le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(pu(i,""),n.flags&=-33);var s=R_(e);Gg(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=R_(e);Hg(e,a,o);break;default:throw Error(le(161))}}catch(h){Tt(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function E3(e,t,r){be=e,dT(e)}function dT(e,t,r){for(var n=(e.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||vh;if(!o){var a=i.alternate,h=a!==null&&a.memoizedState!==null||dr;a=vh;var d=dr;if(vh=o,(dr=h)&&!d)for(be=i;be!==null;)o=be,h=o.child,o.tag===22&&o.memoizedState!==null?L_(i):h!==null?(h.return=o,be=h):L_(i);for(;s!==null;)be=s,dT(s),s=s.sibling;be=i,vh=a,dr=d}N_(e)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,be=s):N_(e)}}function N_(e){for(;be!==null;){var t=be;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:dr||hf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Nn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&g_(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}g_(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&r.focus();break;case"img":h.src&&(r.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var c=p.dehydrated;c!==null&&xu(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}dr||t.flags&512&&zg(t)}catch(f){Tt(t,t.return,f)}}if(t===e){be=null;break}if(r=t.sibling,r!==null){r.return=t.return,be=r;break}be=t.return}}function D_(e){for(;be!==null;){var t=be;if(t===e){be=null;break}var r=t.sibling;if(r!==null){r.return=t.return,be=r;break}be=t.return}}function L_(e){for(;be!==null;){var t=be;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{hf(4,t)}catch(h){Tt(t,r,h)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(h){Tt(t,i,h)}}var s=t.return;try{zg(t)}catch(h){Tt(t,s,h)}break;case 5:var o=t.return;try{zg(t)}catch(h){Tt(t,o,h)}}}catch(h){Tt(t,t.return,h)}if(t===e){be=null;break}var a=t.sibling;if(a!==null){a.return=t.return,be=a;break}be=t.return}}var C3=Math.ceil,Ld=Ji.ReactCurrentDispatcher,_1=Ji.ReactCurrentOwner,mn=Ji.ReactCurrentBatchConfig,Xe=0,Kt=null,Lt=null,rr=0,Wr=0,Sa=$s(0),Ut=0,Pu=null,ko=0,df=0,b1=0,uu=null,Rr=null,w1=0,Va=1/0,Ui=null,Bd=!1,$g=null,Is=null,xh=!1,Ss=null,Fd=0,cu=0,jg=null,sd=-1,od=0;function br(){return(Xe&6)!==0?It():sd!==-1?sd:sd=It()}function Rs(e){return(e.mode&1)===0?1:(Xe&2)!==0&&rr!==0?rr&-rr:u3.transition!==null?(od===0&&(od=Kw()),od):(e=nt,e!==0||(e=window.event,e=e===void 0?16:rS(e.type)),e)}function $n(e,t,r,n){if(50<cu)throw cu=0,jg=null,Error(le(185));$u(e,r,n),((Xe&2)===0||e!==Kt)&&(e===Kt&&((Xe&2)===0&&(df|=r),Ut===4&&_s(e,rr)),Lr(e,n),r===1&&Xe===0&&(t.mode&1)===0&&(Va=It()+500,lf&&js()))}function Lr(e,t){var r=e.callbackNode;u4(e,t);var n=_d(e,e===Kt?rr:0);if(n===0)r!==null&&jy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&jy(r),t===1)e.tag===0?l3(B_.bind(null,e)):bS(B_.bind(null,e)),i3(function(){(Xe&6)===0&&js()}),r=null;else{switch(qw(n)){case 1:r=Yv;break;case 4:r=Xw;break;case 16:r=yd;break;case 536870912:r=Yw;break;default:r=yd}r=_T(r,fT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function fT(e,t){if(sd=-1,od=0,(Xe&6)!==0)throw Error(le(327));var r=e.callbackNode;if(Ma()&&e.callbackNode!==r)return null;var n=_d(e,e===Kt?rr:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Od(e,n);else{t=n;var i=Xe;Xe|=2;var s=mT();(Kt!==e||rr!==t)&&(Ui=null,Va=It()+500,bo(e,t));do try{P3();break}catch(a){pT(e,a)}while(1);a1(),Ld.current=s,Xe=i,Lt!==null?t=0:(Kt=null,rr=0,t=Ut)}if(t!==0){if(t===2&&(i=vg(e),i!==0&&(n=i,t=Wg(e,i))),t===1)throw r=Pu,bo(e,0),_s(e,n),Lr(e,It()),r;if(t===6)_s(e,n);else{if(i=e.current.alternate,(n&30)===0&&!A3(i)&&(t=Od(e,n),t===2&&(s=vg(e),s!==0&&(n=s,t=Wg(e,s))),t===1))throw r=Pu,bo(e,0),_s(e,n),Lr(e,It()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(le(345));case 2:lo(e,Rr,Ui);break;case 3:if(_s(e,n),(n&130023424)===n&&(t=w1+500-It(),10<t)){if(_d(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){br(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Eg(lo.bind(null,e,Rr,Ui),t);break}lo(e,Rr,Ui);break;case 4:if(_s(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Gn(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=It()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C3(n/1960))-n,10<n){e.timeoutHandle=Eg(lo.bind(null,e,Rr,Ui),n);break}lo(e,Rr,Ui);break;case 5:lo(e,Rr,Ui);break;default:throw Error(le(329))}}}return Lr(e,It()),e.callbackNode===r?fT.bind(null,e):null}function Wg(e,t){var r=uu;return e.current.memoizedState.isDehydrated&&(bo(e,t).flags|=256),e=Od(e,t),e!==2&&(t=Rr,Rr=r,t!==null&&Vg(t)),e}function Vg(e){Rr===null?Rr=e:Rr.push.apply(Rr,e)}function A3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Yn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _s(e,t){for(t&=~b1,t&=~df,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Gn(t),n=1<<r;e[r]=-1,t&=~n}}function B_(e){if((Xe&6)!==0)throw Error(le(327));Ma();var t=_d(e,0);if((t&1)===0)return Lr(e,It()),null;var r=Od(e,t);if(e.tag!==0&&r===2){var n=vg(e);n!==0&&(t=n,r=Wg(e,n))}if(r===1)throw r=Pu,bo(e,0),_s(e,t),Lr(e,It()),r;if(r===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lo(e,Rr,Ui),Lr(e,It()),null}function S1(e,t){var r=Xe;Xe|=1;try{return e(t)}finally{Xe=r,Xe===0&&(Va=It()+500,lf&&js())}}function Po(e){Ss!==null&&Ss.tag===0&&(Xe&6)===0&&Ma();var t=Xe;Xe|=1;var r=mn.transition,n=nt;try{if(mn.transition=null,nt=1,e)return e()}finally{nt=n,mn.transition=r,Xe=t,(Xe&6)===0&&js()}}function T1(){Wr=Sa.current,ut(Sa)}function bo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,n3(r)),Lt!==null)for(r=Lt.return;r!==null;){var n=r;switch(i1(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ed();break;case 3:ja(),ut(Nr),ut(pr),f1();break;case 5:d1(n);break;case 4:ja();break;case 13:ut(yt);break;case 19:ut(yt);break;case 10:l1(n.type._context);break;case 22:case 23:T1()}r=r.return}if(Kt=e,Lt=e=Ms(e.current,null),rr=Wr=t,Ut=0,Pu=null,b1=df=ko=0,Rr=uu=null,xo!==null){for(t=0;t<xo.length;t++)if(r=xo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}xo=null}return e}function pT(e,t){do{var r=Lt;try{if(a1(),rd.current=Dd,Nd){for(var n=bt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Nd=!1}if(Ao=0,Wt=Ot=bt=null,au=!1,Cu=0,_1.current=null,r===null||r.return===null){Ut=1,Pu=t,Lt=null;break}e:{var s=e,o=r.return,a=r,h=t;if(t=rr,a.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var d=h,p=a,c=p.tag;if((p.mode&1)===0&&(c===0||c===11||c===15)){var f=p.alternate;f?(p.updateQueue=f.updateQueue,p.memoizedState=f.memoizedState,p.lanes=f.lanes):(p.updateQueue=null,p.memoizedState=null)}var m=S_(o);if(m!==null){m.flags&=-257,T_(m,o,a,s,t),m.mode&1&&w_(s,d,t),t=m,h=d;var v=t.updateQueue;if(v===null){var _=new Set;_.add(h),t.updateQueue=_}else v.add(h);break e}else{if((t&1)===0){w_(s,d,t),E1();break e}h=Error(le(426))}}else if(ft&&a.mode&1){var T=S_(o);if(T!==null){(T.flags&65536)===0&&(T.flags|=256),T_(T,o,a,s,t),s1(Wa(h,a));break e}}s=h=Wa(h,a),Ut!==4&&(Ut=2),uu===null?uu=[s]:uu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var x=QS(s,h,t);m_(s,x);break e;case 1:a=h;var y=s.type,w=s.stateNode;if((s.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Is===null||!Is.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=ZS(s,a,t);m_(s,E);break e}}s=s.return}while(s!==null)}vT(r)}catch(P){t=P,Lt===r&&r!==null&&(Lt=r=r.return);continue}break}while(1)}function mT(){var e=Ld.current;return Ld.current=Dd,e===null?Dd:e}function E1(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Kt===null||(ko&268435455)===0&&(df&268435455)===0||_s(Kt,rr)}function Od(e,t){var r=Xe;Xe|=2;var n=mT();(Kt!==e||rr!==t)&&(Ui=null,bo(e,t));do try{k3();break}catch(i){pT(e,i)}while(1);if(a1(),Xe=r,Ld.current=n,Lt!==null)throw Error(le(261));return Kt=null,rr=0,Ut}function k3(){for(;Lt!==null;)gT(Lt)}function P3(){for(;Lt!==null&&!e4();)gT(Lt)}function gT(e){var t=yT(e.alternate,e,Wr);e.memoizedProps=e.pendingProps,t===null?vT(e):Lt=t,_1.current=null}function vT(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=b3(r,t,Wr),r!==null){Lt=r;return}}else{if(r=w3(r,t),r!==null){r.flags&=32767,Lt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ut=6,Lt=null;return}}if(t=t.sibling,t!==null){Lt=t;return}Lt=t=e}while(t!==null);Ut===0&&(Ut=5)}function lo(e,t,r){var n=nt,i=mn.transition;try{mn.transition=null,nt=1,I3(e,t,r,n)}finally{mn.transition=i,nt=n}return null}function I3(e,t,r,n){do Ma();while(Ss!==null);if((Xe&6)!==0)throw Error(le(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(c4(e,s),e===Kt&&(Lt=Kt=null,rr=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||xh||(xh=!0,_T(yd,function(){return Ma(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=mn.transition,mn.transition=null;var o=nt;nt=1;var a=Xe;Xe|=4,_1.current=null,T3(e,r),hT(r,e),q4(Sg),bd=!!wg,Sg=wg=null,e.current=r,E3(r),t4(),Xe=a,nt=o,mn.transition=s}else e.current=r;if(xh&&(xh=!1,Ss=e,Fd=i),s=e.pendingLanes,s===0&&(Is=null),i4(r.stateNode),Lr(e,It()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Bd)throw Bd=!1,e=$g,$g=null,e;return(Fd&1)!==0&&e.tag!==0&&Ma(),s=e.pendingLanes,(s&1)!==0?e===jg?cu++:(cu=0,jg=e):cu=0,js(),null}function Ma(){if(Ss!==null){var e=qw(Fd),t=mn.transition,r=nt;try{if(mn.transition=null,nt=16>e?16:e,Ss===null)var n=!1;else{if(e=Ss,Ss=null,Fd=0,(Xe&6)!==0)throw Error(le(331));var i=Xe;for(Xe|=4,be=e.current;be!==null;){var s=be,o=s.child;if((be.flags&16)!==0){var a=s.deletions;if(a!==null){for(var h=0;h<a.length;h++){var d=a[h];for(be=d;be!==null;){var p=be;switch(p.tag){case 0:case 11:case 15:lu(8,p,s)}var c=p.child;if(c!==null)c.return=p,be=c;else for(;be!==null;){p=be;var f=p.sibling,m=p.return;if(lT(p),p===d){be=null;break}if(f!==null){f.return=m,be=f;break}be=m}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}be=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:lu(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,be=x;break e}be=s.return}}var y=e.current;for(be=y;be!==null;){o=be;var w=o.child;if((o.subtreeFlags&2064)!==0&&w!==null)w.return=o,be=w;else e:for(o=y;be!==null;){if(a=be,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:hf(9,a)}}catch(P){Tt(a,a.return,P)}if(a===o){be=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,be=E;break e}be=a.return}}if(Xe=i,js(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(rf,e)}catch{}n=!0}return n}finally{nt=r,mn.transition=t}}return!1}function F_(e,t,r){t=Wa(r,t),t=QS(e,t,1),e=Ps(e,t,1),t=br(),e!==null&&($u(e,1,t),Lr(e,t))}function Tt(e,t,r){if(e.tag===3)F_(e,e,r);else for(;t!==null;){if(t.tag===3){F_(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Is===null||!Is.has(n))){e=Wa(r,e),e=ZS(t,e,1),t=Ps(t,e,1),e=br(),t!==null&&($u(t,1,e),Lr(t,e));break}}t=t.return}}function R3(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=br(),e.pingedLanes|=e.suspendedLanes&r,Kt===e&&(rr&r)===r&&(Ut===4||Ut===3&&(rr&130023424)===rr&&500>It()-w1?bo(e,0):b1|=r),Lr(e,t)}function xT(e,t){t===0&&((e.mode&1)===0?t=1:(t=lh,lh<<=1,(lh&130023424)===0&&(lh=4194304)));var r=br();e=qi(e,t),e!==null&&($u(e,t,r),Lr(e,r))}function M3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xT(e,r)}function N3(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(t),xT(e,r)}var yT;yT=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nr.current)Mr=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Mr=!1,_3(e,t,r);Mr=(e.flags&131072)!==0}else Mr=!1,ft&&(t.flags&1048576)!==0&&wS(t,kd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;id(e,t),e=t.pendingProps;var i=Ha(t,pr.current);Ra(t,r),i=m1(null,t,n,e,i,r);var s=g1();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(n)?(s=!0,Cd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,c1(t),i.updater=uf,t.stateNode=i,i._reactInternals=t,Mg(t,n,e,r),t=Lg(null,t,n,!0,s,r)):(t.tag=0,ft&&s&&n1(t),_r(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(id(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=L3(n),e=Nn(n,e),i){case 0:t=Dg(null,t,n,e,r);break e;case 1:t=A_(null,t,n,e,r);break e;case 11:t=E_(null,t,n,e,r);break e;case 14:t=C_(null,t,n,Nn(n.type,e),r);break e}throw Error(le(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),Dg(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),A_(e,t,n,i,r);case 3:e:{if(rT(t),e===null)throw Error(le(387));n=t.pendingProps,s=t.memoizedState,i=s.element,CS(e,t),Rd(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Wa(Error(le(423)),t),t=k_(e,t,n,r,i);break e}else if(n!==i){i=Wa(Error(le(424)),t),t=k_(e,t,n,r,i);break e}else for(Vr=ks(t.stateNode.containerInfo.firstChild),Yr=t,ft=!0,Bn=null,r=IS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ga(),n===i){t=Qi(e,t,r);break e}_r(e,t,n,r)}t=t.child}return t;case 5:return RS(t),e===null&&Pg(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Tg(n,i)?o=null:s!==null&&Tg(n,s)&&(t.flags|=32),tT(e,t),_r(e,t,o,r),t.child;case 6:return e===null&&Pg(t),null;case 13:return nT(e,t,r);case 4:return h1(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=$a(t,null,n,r):_r(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),E_(e,t,n,i,r);case 7:return _r(e,t,t.pendingProps,r),t.child;case 8:return _r(e,t,t.pendingProps.children,r),t.child;case 12:return _r(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,at(Pd,n._currentValue),n._currentValue=o,s!==null)if(Yn(s.value,o)){if(s.children===i.children&&!Nr.current){t=Qi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var h=a.firstContext;h!==null;){if(h.context===n){if(s.tag===1){h=Wi(-1,r&-r),h.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?h.next=h:(h.next=p.next,p.next=h),d.pending=h}}s.lanes|=r,h=s.alternate,h!==null&&(h.lanes|=r),Ig(s.return,r,t),a.lanes|=r;break}h=h.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Ig(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_r(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ra(t,r),i=gn(i),n=n(i),t.flags|=1,_r(e,t,n,r),t.child;case 14:return n=t.type,i=Nn(n,t.pendingProps),i=Nn(n.type,i),C_(e,t,n,i,r);case 15:return JS(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),id(e,t),t.tag=1,Dr(n)?(e=!0,Cd(t)):e=!1,Ra(t,r),kS(t,n,i),Mg(t,n,i,r),Lg(null,t,n,!0,e,r);case 19:return iT(e,t,r);case 22:return eT(e,t,r)}throw Error(le(156,t.tag))};function _T(e,t){return Vw(e,t)}function D3(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,r,n){return new D3(e,t,r,n)}function C1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function L3(e){if(typeof e=="function")return C1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wv)return 11;if(e===Vv)return 14}return 2}function Ms(e,t){var r=e.alternate;return r===null?(r=dn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ad(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")C1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fa:return wo(r.children,i,s,t);case jv:o=8,i|=8;break;case rg:return e=dn(12,r,t,i|2),e.elementType=rg,e.lanes=s,e;case ng:return e=dn(13,r,t,i),e.elementType=ng,e.lanes=s,e;case ig:return e=dn(19,r,t,i),e.elementType=ig,e.lanes=s,e;case Pw:return ff(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Aw:o=10;break e;case kw:o=9;break e;case Wv:o=11;break e;case Vv:o=14;break e;case vs:o=16,n=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=dn(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function wo(e,t,r,n){return e=dn(7,e,n,t),e.lanes=r,e}function ff(e,t,r,n){return e=dn(22,e,n,t),e.elementType=Pw,e.lanes=r,e.stateNode={isHidden:!1},e}function Mp(e,t,r){return e=dn(6,e,null,t),e.lanes=r,e}function Np(e,t,r){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function B3(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fp(0),this.expirationTimes=fp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function A1(e,t,r,n,i,s,o,a,h){return e=new B3(e,t,r,a,h),t===1?(t=1,s===!0&&(t|=8)):t=0,s=dn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},c1(s),e}function F3(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:da,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function bT(e){if(!e)return Bs;e=e._reactInternals;e:{if(No(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var r=e.type;if(Dr(r))return _S(e,r,t)}return t}function wT(e,t,r,n,i,s,o,a,h){return e=A1(r,n,!0,e,i,s,o,a,h),e.context=bT(null),r=e.current,n=br(),i=Rs(r),s=Wi(n,i),s.callback=t??null,Ps(r,s,i),e.current.lanes=i,$u(e,i,n),Lr(e,n),e}function pf(e,t,r,n){var i=t.current,s=br(),o=Rs(i);return r=bT(r),t.context===null?t.context=r:t.pendingContext=r,t=Wi(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ps(i,t,o),e!==null&&($n(e,i,o,s),td(e,i,o)),o}function Ud(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function O_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function k1(e,t){O_(e,t),(e=e.alternate)&&O_(e,t)}function O3(){return null}var ST=typeof reportError=="function"?reportError:function(e){console.error(e)};function P1(e){this._internalRoot=e}mf.prototype.render=P1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));pf(e,t,null,null)};mf.prototype.unmount=P1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Po(function(){pf(null,e,null,null)}),t[Ki]=null}};function mf(e){this._internalRoot=e}mf.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ys.length&&t!==0&&t<ys[r].priority;r++);ys.splice(r,0,e),r===0&&tS(e)}};function I1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function U_(){}function U3(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var d=Ud(o);s.call(d)}}var o=wT(t,n,e,0,null,!1,!1,"",U_);return e._reactRootContainer=o,e[Ki]=o.current,bu(e.nodeType===8?e.parentNode:e),Po(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var d=Ud(h);a.call(d)}}var h=A1(e,0,!1,null,null,!1,!1,"",U_);return e._reactRootContainer=h,e[Ki]=h.current,bu(e.nodeType===8?e.parentNode:e),Po(function(){pf(t,h,r,n)}),h}function vf(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var h=Ud(o);a.call(h)}}pf(t,o,e,i)}else o=U3(r,t,e,i,n);return Ud(o)}Qw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vl(t.pendingLanes);r!==0&&(Kv(t,r|1),Lr(t,It()),(Xe&6)===0&&(Va=It()+500,js()))}break;case 13:Po(function(){var n=qi(e,1);if(n!==null){var i=br();$n(n,e,1,i)}}),k1(e,1)}};qv=function(e){if(e.tag===13){var t=qi(e,134217728);if(t!==null){var r=br();$n(t,e,134217728,r)}k1(e,134217728)}};Zw=function(e){if(e.tag===13){var t=Rs(e),r=qi(e,t);if(r!==null){var n=br();$n(r,e,t,n)}k1(e,t)}};Jw=function(){return nt};eS=function(e,t){var r=nt;try{return nt=e,t()}finally{nt=r}};pg=function(e,t,r){switch(t){case"input":if(ag(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=af(n);if(!i)throw Error(le(90));Rw(n),ag(n,i)}}}break;case"textarea":Nw(e,r);break;case"select":t=r.value,t!=null&&Aa(e,!!r.multiple,t,!1)}};zw=S1;Hw=Po;var z3={usingClientEntryPoint:!1,Events:[Wu,va,af,Ow,Uw,S1]},Nl={findFiberByHostInstance:vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},H3={bundleType:Nl.bundleType,version:Nl.version,rendererPackageName:Nl.rendererPackageName,rendererConfig:Nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ji.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jw(e),e===null?null:e.stateNode},findFiberByHostInstance:Nl.findFiberByHostInstance||O3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{rf=yh.inject(H3),yi=yh}catch{}}Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z3;Qr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I1(t))throw Error(le(200));return F3(e,t,null,r)};Qr.createRoot=function(e,t){if(!I1(e))throw Error(le(299));var r=!1,n="",i=ST;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=A1(e,1,!1,null,null,r,!1,n,i),e[Ki]=t.current,bu(e.nodeType===8?e.parentNode:e),new P1(t)};Qr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=jw(t),e=e===null?null:e.stateNode,e};Qr.flushSync=function(e){return Po(e)};Qr.hydrate=function(e,t,r){if(!gf(t))throw Error(le(200));return vf(null,e,t,!0,r)};Qr.hydrateRoot=function(e,t,r){if(!I1(e))throw Error(le(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=ST;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=wT(t,null,e,1,r??null,i,!1,s,o),e[Ki]=t.current,bu(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new mf(t)};Qr.render=function(e,t,r){if(!gf(t))throw Error(le(200));return vf(null,e,t,!1,r)};Qr.unmountComponentAtNode=function(e){if(!gf(e))throw Error(le(40));return e._reactRootContainer?(Po(function(){vf(null,null,e,!1,function(){e._reactRootContainer=null,e[Ki]=null})}),!0):!1};Qr.unstable_batchedUpdates=S1;Qr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!gf(r))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return vf(e,t,r,!1,n)};Qr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Qr})(ww);var TT,z_=ww.exports;TT=z_.createRoot,z_.hydrateRoot;var he={exports:{}},Do=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Do||{}),ET=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(ET||{}),Xg=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Xg||{}),me=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(me||{}),Un=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Un||{}),ce=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(ce||{}),Na=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Na||{}),Ie=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Ie||{}),Yg=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Yg||{}),vi=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(vi||{}),Vi=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Vi||{}),Ti=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(Ti||{}),Kn=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Kn||{}),pi=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(pi||{}),R1=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(R1||{}),fn=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(fn||{}),Ft=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Ft||{}),Dt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Dt||{}),bi=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(bi||{});const G3={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},de={ADAPTER:G3,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Dp=/iPhone/i,H_=/iPod/i,G_=/iPad/i,$_=/\biOS-universal(?:.+)Mac\b/i,Lp=/\bAndroid(?:.+)Mobile\b/i,j_=/Android/i,ra=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_h=/Silk/i,Di=/Windows Phone/i,W_=/\bWindows(?:.+)ARM\b/i,V_=/BlackBerry/i,X_=/BB10/i,Y_=/Opera Mini/i,K_=/\b(CriOS|Chrome)(?:.+)Mobile/i,q_=/Mobile(?:.+)Firefox\b/i,Q_=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function $3(e){return function(t){return t.test(e)}}function Z_(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=$3(r),s={apple:{phone:i(Dp)&&!i(Di),ipod:i(H_),tablet:!i(Dp)&&(i(G_)||Q_(t))&&!i(Di),universal:i($_),device:(i(Dp)||i(H_)||i(G_)||i($_)||Q_(t))&&!i(Di)},amazon:{phone:i(ra),tablet:!i(ra)&&i(_h),device:i(ra)||i(_h)},android:{phone:!i(Di)&&i(ra)||!i(Di)&&i(Lp),tablet:!i(Di)&&!i(ra)&&!i(Lp)&&(i(_h)||i(j_)),device:!i(Di)&&(i(ra)||i(_h)||i(Lp)||i(j_))||i(/\bokhttp\b/i)},windows:{phone:i(Di),tablet:i(W_),device:i(Di)||i(W_)},other:{blackberry:i(V_),blackberry10:i(X_),opera:i(Y_),firefox:i(q_),chrome:i(K_),device:i(V_)||i(X_)||i(Y_)||i(q_)||i(K_)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const j3=Z_.default??Z_,ji=j3(globalThis.navigator);de.RETINA_PREFIX=/@([0-9\.]+)x/;de.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var CT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(h,d,p){this.fn=h,this.context=d,this.once=p||!1}function s(h,d,p,c,f){if(typeof p!="function")throw new TypeError("The listener must be a function");var m=new i(p,c||h,f),v=r?r+d:d;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],m]:h._events[v].push(m):(h._events[v]=m,h._eventsCount++),h}function o(h,d){--h._eventsCount===0?h._events=new n:delete h._events[d]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],p,c;if(this._eventsCount===0)return d;for(c in p=this._events)t.call(p,c)&&d.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(p)):d},a.prototype.listeners=function(d){var p=r?r+d:d,c=this._events[p];if(!c)return[];if(c.fn)return[c.fn];for(var f=0,m=c.length,v=new Array(m);f<m;f++)v[f]=c[f].fn;return v},a.prototype.listenerCount=function(d){var p=r?r+d:d,c=this._events[p];return c?c.fn?1:c.length:0},a.prototype.emit=function(d,p,c,f,m,v){var _=r?r+d:d;if(!this._events[_])return!1;var T=this._events[_],x=arguments.length,y,w;if(T.fn){switch(T.once&&this.removeListener(d,T.fn,void 0,!0),x){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,p),!0;case 3:return T.fn.call(T.context,p,c),!0;case 4:return T.fn.call(T.context,p,c,f),!0;case 5:return T.fn.call(T.context,p,c,f,m),!0;case 6:return T.fn.call(T.context,p,c,f,m,v),!0}for(w=1,y=new Array(x-1);w<x;w++)y[w-1]=arguments[w];T.fn.apply(T.context,y)}else{var E=T.length,P;for(w=0;w<E;w++)switch(T[w].once&&this.removeListener(d,T[w].fn,void 0,!0),x){case 1:T[w].fn.call(T[w].context);break;case 2:T[w].fn.call(T[w].context,p);break;case 3:T[w].fn.call(T[w].context,p,c);break;case 4:T[w].fn.call(T[w].context,p,c,f);break;default:if(!y)for(P=1,y=new Array(x-1);P<x;P++)y[P-1]=arguments[P];T[w].fn.apply(T[w].context,y)}}return!0},a.prototype.on=function(d,p,c){return s(this,d,p,c,!1)},a.prototype.once=function(d,p,c){return s(this,d,p,c,!0)},a.prototype.removeListener=function(d,p,c,f){var m=r?r+d:d;if(!this._events[m])return this;if(!p)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===p&&(!f||v.once)&&(!c||v.context===c)&&o(this,m);else{for(var _=0,T=[],x=v.length;_<x;_++)(v[_].fn!==p||f&&!v[_].once||c&&v[_].context!==c)&&T.push(v[_]);T.length?this._events[m]=T.length===1?T[0]:T:o(this,m)}return this},a.prototype.removeAllListeners=function(d){var p;return d?(p=r?r+d:d,this._events[p]&&o(this,p)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(CT);const Xu=CT.exports;var M1={exports:{}};M1.exports=xf;M1.exports.default=xf;function xf(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,s=AT(e,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,h,d,p,c,f,m;if(n&&(s=K3(e,t,s,r)),e.length>80*r){a=d=e[0],h=p=e[1];for(var v=r;v<i;v+=r)c=e[v],f=e[v+1],c<a&&(a=c),f<h&&(h=f),c>d&&(d=c),f>p&&(p=f);m=Math.max(d-a,p-h),m=m!==0?32767/m:0}return Iu(s,o,r,a,h,m,0),o}function AT(e,t,r,n,i){var s,o;if(i===Qg(e,t,r,n)>0)for(s=t;s<r;s+=n)o=J_(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=J_(s,e[s],e[s+1],o);return o&&yf(o,o.next)&&(Mu(o),o=o.next),o}function Io(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(yf(r,r.next)||_t(r.prev,r,r.next)===0)){if(Mu(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Iu(e,t,r,n,i,s,o){if(!!e){!o&&s&&ek(e,n,i,s);for(var a=e,h,d;e.prev!==e.next;){if(h=e.prev,d=e.next,s?V3(e,n,i,s):W3(e)){t.push(h.i/r|0),t.push(e.i/r|0),t.push(d.i/r|0),Mu(e),e=d.next,a=d.next;continue}if(e=d,e===a){o?o===1?(e=X3(Io(e),t,r),Iu(e,t,r,n,i,s,2)):o===2&&Y3(e,t,r,n,i,s):Iu(Io(e),t,r,n,i,s,1);break}}}}function W3(e){var t=e.prev,r=e,n=e.next;if(_t(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,o=n.x,a=t.y,h=r.y,d=n.y,p=i<s?i<o?i:o:s<o?s:o,c=a<h?a<d?a:d:h<d?h:d,f=i>s?i>o?i:o:s>o?s:o,m=a>h?a>d?a:d:h>d?h:d,v=n.next;v!==t;){if(v.x>=p&&v.x<=f&&v.y>=c&&v.y<=m&&Ta(i,a,s,h,o,d,v.x,v.y)&&_t(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function V3(e,t,r,n){var i=e.prev,s=e,o=e.next;if(_t(i,s,o)>=0)return!1;for(var a=i.x,h=s.x,d=o.x,p=i.y,c=s.y,f=o.y,m=a<h?a<d?a:d:h<d?h:d,v=p<c?p<f?p:f:c<f?c:f,_=a>h?a>d?a:d:h>d?h:d,T=p>c?p>f?p:f:c>f?c:f,x=Kg(m,v,t,r,n),y=Kg(_,T,t,r,n),w=e.prevZ,E=e.nextZ;w&&w.z>=x&&E&&E.z<=y;){if(w.x>=m&&w.x<=_&&w.y>=v&&w.y<=T&&w!==i&&w!==o&&Ta(a,p,h,c,d,f,w.x,w.y)&&_t(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=m&&E.x<=_&&E.y>=v&&E.y<=T&&E!==i&&E!==o&&Ta(a,p,h,c,d,f,E.x,E.y)&&_t(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=x;){if(w.x>=m&&w.x<=_&&w.y>=v&&w.y<=T&&w!==i&&w!==o&&Ta(a,p,h,c,d,f,w.x,w.y)&&_t(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=y;){if(E.x>=m&&E.x<=_&&E.y>=v&&E.y<=T&&E!==i&&E!==o&&Ta(a,p,h,c,d,f,E.x,E.y)&&_t(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function X3(e,t,r){var n=e;do{var i=n.prev,s=n.next.next;!yf(i,s)&&kT(i,n,n.next,s)&&Ru(i,s)&&Ru(s,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(s.i/r|0),Mu(n),Mu(n.next),n=e=s),n=n.next}while(n!==e);return Io(n)}function Y3(e,t,r,n,i,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&nk(o,a)){var h=PT(o,a);o=Io(o,o.next),h=Io(h,h.next),Iu(o,t,r,n,i,s,0),Iu(h,t,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==e)}function K3(e,t,r,n){var i=[],s,o,a,h,d;for(s=0,o=t.length;s<o;s++)a=t[s]*n,h=s<o-1?t[s+1]*n:e.length,d=AT(e,a,h,n,!1),d===d.next&&(d.steiner=!0),i.push(rk(d));for(i.sort(q3),s=0;s<i.length;s++)r=Q3(i[s],r);return r}function q3(e,t){return e.x-t.x}function Q3(e,t){var r=Z3(e,t);if(!r)return t;var n=PT(r,e);return Io(n,n.next),Io(r,r.next)}function Z3(e,t){var r=t,n=e.x,i=e.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==t);if(!o)return null;var h=o,d=o.x,p=o.y,c=1/0,f;r=o;do n>=r.x&&r.x>=d&&n!==r.x&&Ta(i<p?n:s,i,d,p,i<p?s:n,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(n-r.x),Ru(r,e)&&(f<c||f===c&&(r.x>o.x||r.x===o.x&&J3(o,r)))&&(o=r,c=f)),r=r.next;while(r!==h);return o}function J3(e,t){return _t(e.prev,e,t.prev)<0&&_t(t.next,e,e.next)<0}function ek(e,t,r,n){var i=e;do i.z===0&&(i.z=Kg(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,tk(i)}function tk(e){var t,r,n,i,s,o,a,h,d=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<d&&(a++,n=n.nextZ,!!n);t++);for(h=d;a>0||h>0&&n;)a!==0&&(h===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,h--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,d*=2}while(o>1);return e}function Kg(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function rk(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Ta(e,t,r,n,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(r-o)*(t-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function nk(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!ik(e,t)&&(Ru(e,t)&&Ru(t,e)&&sk(e,t)&&(_t(e.prev,e,t.prev)||_t(e,t.prev,t))||yf(e,t)&&_t(e.prev,e,e.next)>0&&_t(t.prev,t,t.next)>0)}function _t(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function yf(e,t){return e.x===t.x&&e.y===t.y}function kT(e,t,r,n){var i=wh(_t(e,t,r)),s=wh(_t(e,t,n)),o=wh(_t(r,n,e)),a=wh(_t(r,n,t));return!!(i!==s&&o!==a||i===0&&bh(e,r,t)||s===0&&bh(e,n,t)||o===0&&bh(r,e,n)||a===0&&bh(r,t,n))}function bh(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function wh(e){return e>0?1:e<0?-1:0}function ik(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&kT(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Ru(e,t){return _t(e.prev,e,e.next)<0?_t(e,t,e.next)>=0&&_t(e,e.prev,t)>=0:_t(e,t,e.prev)<0||_t(e,e.next,t)<0}function sk(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function PT(e,t){var r=new qg(e.i,e.x,e.y),n=new qg(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function J_(e,t,r,n){var i=new qg(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Mu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function qg(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}xf.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(Qg(e,0,s,r));if(i)for(var a=0,h=t.length;a<h;a++){var d=t[a]*r,p=a<h-1?t[a+1]*r:e.length;o-=Math.abs(Qg(e,d,p,r))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,m=n[a+1]*r,v=n[a+2]*r;c+=Math.abs((e[f]-e[v])*(e[m+1]-e[f+1])-(e[f]-e[m])*(e[v+1]-e[f+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Qg(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}xf.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var Zg={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,s=typeof Ne=="object"&&Ne;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,h=36,d=1,p=26,c=38,f=700,m=72,v=128,_="-",T=/^xn--/,x=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=h-d,P=Math.floor,I=String.fromCharCode,R;function N(G){throw RangeError(w[G])}function D(G,H){for(var j=G.length,Z=[];j--;)Z[j]=H(G[j]);return Z}function k(G,H){var j=G.split("@"),Z="";j.length>1&&(Z=j[0]+"@",G=j[1]),G=G.replace(y,".");var K=G.split("."),xe=D(K,H).join(".");return Z+xe}function M(G){for(var H=[],j=0,Z=G.length,K,xe;j<Z;)K=G.charCodeAt(j++),K>=55296&&K<=56319&&j<Z?(xe=G.charCodeAt(j++),(xe&64512)==56320?H.push(((K&1023)<<10)+(xe&1023)+65536):(H.push(K),j--)):H.push(K);return H}function z(G){return D(G,function(H){var j="";return H>65535&&(H-=65536,j+=I(H>>>10&1023|55296),H=56320|H&1023),j+=I(H),j}).join("")}function F(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:h}function U(G,H){return G+22+75*(G<26)-((H!=0)<<5)}function Y(G,H,j){var Z=0;for(G=j?P(G/f):G>>1,G+=P(G/H);G>E*p>>1;Z+=h)G=P(G/E);return P(Z+(E+1)*G/(G+c))}function J(G){var H=[],j=G.length,Z,K=0,xe=v,fe=m,Re,Ce,gt,tt,Oe,Qe,Le,it,qt;for(Re=G.lastIndexOf(_),Re<0&&(Re=0),Ce=0;Ce<Re;++Ce)G.charCodeAt(Ce)>=128&&N("not-basic"),H.push(G.charCodeAt(Ce));for(gt=Re>0?Re+1:0;gt<j;){for(tt=K,Oe=1,Qe=h;gt>=j&&N("invalid-input"),Le=F(G.charCodeAt(gt++)),(Le>=h||Le>P((a-K)/Oe))&&N("overflow"),K+=Le*Oe,it=Qe<=fe?d:Qe>=fe+p?p:Qe-fe,!(Le<it);Qe+=h)qt=h-it,Oe>P(a/qt)&&N("overflow"),Oe*=qt;Z=H.length+1,fe=Y(K-tt,Z,tt==0),P(K/Z)>a-xe&&N("overflow"),xe+=P(K/Z),K%=Z,H.splice(K++,0,xe)}return z(H)}function Q(G){var H,j,Z,K,xe,fe,Re,Ce,gt,tt,Oe,Qe=[],Le,it,qt,Fr;for(G=M(G),Le=G.length,H=v,j=0,xe=m,fe=0;fe<Le;++fe)Oe=G[fe],Oe<128&&Qe.push(I(Oe));for(Z=K=Qe.length,K&&Qe.push(_);Z<Le;){for(Re=a,fe=0;fe<Le;++fe)Oe=G[fe],Oe>=H&&Oe<Re&&(Re=Oe);for(it=Z+1,Re-H>P((a-j)/it)&&N("overflow"),j+=(Re-H)*it,H=Re,fe=0;fe<Le;++fe)if(Oe=G[fe],Oe<H&&++j>a&&N("overflow"),Oe==H){for(Ce=j,gt=h;tt=gt<=xe?d:gt>=xe+p?p:gt-xe,!(Ce<tt);gt+=h)Fr=Ce-tt,qt=h-tt,Qe.push(I(U(tt+Fr%qt,0))),Ce=P(Fr/qt);Qe.push(I(U(Ce,0))),xe=Y(j,it,Z==K),j=0,++Z}++j,++H}return Qe.join("")}function O(G){return k(G,function(H){return T.test(H)?J(H.slice(4).toLowerCase()):H})}function L(G){return k(G,function(H){return x.test(H)?"xn--"+Q(H):H})}if(o={version:"1.3.2",ucs2:{decode:M,encode:z},decode:J,encode:Q,toASCII:L,toUnicode:O},n&&i)if(e.exports==n)i.exports=o;else for(R in o)o.hasOwnProperty(R)&&(n[R]=o[R]);else r.punycode=o})(Ne)})(Zg,Zg.exports);var ok={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Nu={};function ak(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var lk=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var h=0;h<a;++h){var d=e[h].replace(s,"%20"),p=d.indexOf(r),c,f,m,v;p>=0?(c=d.substr(0,p),f=d.substr(p+1)):(c=d,f=""),m=decodeURIComponent(c),v=decodeURIComponent(f),ak(i,m)?Array.isArray(i[m])?i[m].push(v):i[m]=[i[m],v]:i[m]=v}return i},Dl=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},uk=function(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var s=encodeURIComponent(Dl(i))+r;return Array.isArray(e[i])?e[i].map(function(o){return s+encodeURIComponent(Dl(o))}).join(t):s+encodeURIComponent(Dl(e[i]))}).join(t):n?encodeURIComponent(Dl(n))+r+encodeURIComponent(Dl(e)):""};Nu.decode=Nu.parse=lk;Nu.encode=Nu.stringify=uk;var ck=Zg.exports,mi=ok,hk=_f,dk=Sk,fk=wk;function jn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var pk=/^([a-z0-9.+-]+:)/i,mk=/:[0-9]*$/,gk=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,vk=["<",">",'"',"`"," ","\r",`
`,"	"],xk=["{","}","|","\\","^","`"].concat(vk),Jg=["'"].concat(xk),eb=["%","/","?",";","#"].concat(Jg),tb=["/","?","#"],yk=255,rb=/^[+a-z0-9A-Z_-]{0,63}$/,_k=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,bk={javascript:!0,"javascript:":!0},ev={javascript:!0,"javascript:":!0},Da={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tv=Nu;function _f(e,t,r){if(e&&mi.isObject(e)&&e instanceof jn)return e;var n=new jn;return n.parse(e,t,r),n}jn.prototype.parse=function(e,t,r){if(!mi.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(i);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var h=gk.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=tv.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=pk.exec(a);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,a=a.substr(d.length)}if(r||d||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";c&&!(d&&ev[d])&&(a=a.substr(2),this.slashes=!0)}if(!ev[d]&&(c||d&&!Da[d])){for(var f=-1,m=0;m<tb.length;m++){var v=a.indexOf(tb[m]);v!==-1&&(f===-1||v<f)&&(f=v)}var _,T;f===-1?T=a.lastIndexOf("@"):T=a.lastIndexOf("@",f),T!==-1&&(_=a.slice(0,T),a=a.slice(T+1),this.auth=decodeURIComponent(_)),f=-1;for(var m=0;m<eb.length;m++){var v=a.indexOf(eb[m]);v!==-1&&(f===-1||v<f)&&(f=v)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x)for(var y=this.hostname.split(/\./),m=0,w=y.length;m<w;m++){var E=y[m];if(!!E&&!E.match(rb)){for(var P="",I=0,R=E.length;I<R;I++)E.charCodeAt(I)>127?P+="x":P+=E[I];if(!P.match(rb)){var N=y.slice(0,m),D=y.slice(m+1),k=E.match(_k);k&&(N.push(k[1]),D.unshift(k[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>yk?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=ck.toASCII(this.hostname));var M=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+M,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!bk[p])for(var m=0,w=Jg.length;m<w;m++){var F=Jg[m];if(a.indexOf(F)!==-1){var U=encodeURIComponent(F);U===F&&(U=escape(F)),a=a.split(F).join(U)}}var Y=a.indexOf("#");Y!==-1&&(this.hash=a.substr(Y),a=a.slice(0,Y));var J=a.indexOf("?");if(J!==-1?(this.search=a.substr(J),this.query=a.substr(J+1),t&&(this.query=tv.parse(this.query)),a=a.slice(0,J)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Da[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",Q=this.search||"";this.path=M+Q}return this.href=this.format(),this};function wk(e){return mi.isString(e)&&(e=_f(e)),e instanceof jn?e.format():jn.prototype.format.call(e)}jn.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&mi.isObject(this.query)&&Object.keys(this.query).length&&(s=tv.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Da[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+i+r+o+n};function Sk(e,t){return _f(e,!1,!0).resolve(t)}jn.prototype.resolve=function(e){return this.resolveObject(_f(e,!1,!0)).format()};jn.prototype.resolveObject=function(e){if(mi.isString(e)){var t=new jn;t.parse(e,!1,!0),e=t}for(var r=new jn,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a];h!=="protocol"&&(r[h]=e[h])}return Da[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Da[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var c=d[p];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!ev[e.protocol]){for(var w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),r.pathname=w.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",m=r.search||"";r.path=f+m}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&r.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",T=_||v||r.host&&e.pathname,x=T,y=r.pathname&&r.pathname.split("/")||[],w=e.pathname&&e.pathname.split("/")||[],E=r.protocol&&!Da[r.protocol];if(E&&(r.hostname="",r.port=null,r.host&&(y[0]===""?y[0]=r.host:y.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(w[0]===""?w[0]=e.host:w.unshift(e.host)),e.host=null),T=T&&(w[0]===""||y[0]==="")),_)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,y=w;else if(w.length)y||(y=[]),y.pop(),y=y.concat(w),r.search=e.search,r.query=e.query;else if(!mi.isNullOrUndefined(e.search)){if(E){r.hostname=r.host=y.shift();var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())}return r.search=e.search,r.query=e.query,(!mi.isNull(r.pathname)||!mi.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var I=y.slice(-1)[0],R=(r.host||e.host||y.length>1)&&(I==="."||I==="..")||I==="",N=0,D=y.length;D>=0;D--)I=y[D],I==="."?y.splice(D,1):I===".."?(y.splice(D,1),N++):N&&(y.splice(D,1),N--);if(!T&&!x)for(;N--;N)y.unshift("..");T&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),R&&y.join("/").substr(-1)!=="/"&&y.push("");var k=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(E){r.hostname=r.host=k?"":y.length?y.shift():"";var P=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;P&&(r.auth=P.shift(),r.host=r.hostname=P.shift())}return T=T||r.host&&y.length,T&&!k&&y.unshift(""),y.length?r.pathname=y.join("/"):(r.pathname=null,r.path=null),(!mi.isNull(r.pathname)||!mi.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};jn.prototype.parseHost=function(){var e=this.host,t=mk.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Tk={parse:hk,format:fk,resolve:dk};function An(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Ll(e){return e.split("?")[0].split("#")[0]}function Ek(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ck(e,t,r){return e.replace(new RegExp(Ek(t),"g"),r)}function Ak(e,t){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const h=r.lastIndexOf("/");if(h!==r.length-1){h===-1?(r="",n=0):(r=r.slice(0,h),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${e.slice(i+1,a)}`:r=e.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const fr={toPosix(e){return Ck(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){An(e),e=this.toPosix(e);let t="";const r=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];t=s,e=e.slice(s.length)}return t},toAbsolute(e,t,r){if(this.isDataUrl(e))return e;const n=Ll(this.toPosix(t??de.ADAPTER.getBaseUrl())),i=Ll(this.toPosix(r??this.rootname(n)));return An(e),e=this.toPosix(e),e.startsWith("/")?fr.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(e=this.toPosix(e),An(e),e.length===0)return".";let t="";const r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return e=Ak(e,!1),e.length>0&&n&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return An(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const n=e[r];if(An(n),n.length>0)if(t===void 0)t=n;else{const i=e[r-1]??"";this.extname(i)?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(An(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const r=t===47;let n=-1,i=!0;const s=this.getProtocol(e),o=e;e=e.slice(s.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+e:s:r&&n===1?"//":s+e.slice(0,n)},rootname(e){An(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);r!==-1?t=e.slice(0,r):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){An(e),t&&An(t),e=Ll(this.toPosix(e));let r=0,n=-1,i=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=0;--s){const h=e.charCodeAt(s);if(h===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=e.length),e.slice(r,n)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":e.slice(r,n)},extname(e){An(e),e=Ll(this.toPosix(e));let t=-1,r=0,n=-1,i=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===r+1?"":e.slice(t,n)},parse(e){An(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Ll(this.toPosix(e));let r=e.charCodeAt(0);const n=this.isAbsolute(e);let i;t.root=this.rootname(e),n||this.hasProtocol(e)?i=1:i=0;let s=-1,o=0,a=-1,h=!0,d=e.length-1,p=0;for(;d>=i;--d){if(r=e.charCodeAt(d),r===47){if(!h){o=d+1;break}continue}a===-1&&(h=!1,a=d+1),r===46?s===-1?s=d:p!==1&&(p=1):s!==-1&&(p=-1)}return s===-1||a===-1||p===0||p===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},nb={};function ze(e,t,r=3){if(nb[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(n))),nb[t]=!0}let Bp;function kk(){return typeof Bp>"u"&&(Bp=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:de.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!de.ADAPTER.getWebGLRenderingContext())return!1;const r=de.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const i=!!n?.getContextAttributes()?.stencil;if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Bp}var Pk={grad:.9,turn:360,rad:360/(2*Math.PI)},Li=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Vt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},pn=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},IT=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},ib=function(e){return{r:pn(e.r,0,255),g:pn(e.g,0,255),b:pn(e.b,0,255),a:pn(e.a)}},Fp=function(e){return{r:Vt(e.r),g:Vt(e.g),b:Vt(e.b),a:Vt(e.a,3)}},Ik=/^#([0-9a-f]{3,8})$/i,Sh=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},RT=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=Math.max(t,r,n),o=s-Math.min(t,r,n),a=o?s===t?(r-n)/o:s===r?2+(n-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},MT=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),o=n*(1-r),a=n*(1-(t-s)*r),h=n*(1-(1-t+s)*r),d=s%6;return{r:255*[n,a,o,o,h,n][d],g:255*[h,n,n,a,o,o][d],b:255*[o,o,h,n,n,a][d],a:i}},sb=function(e){return{h:IT(e.h),s:pn(e.s,0,100),l:pn(e.l,0,100),a:pn(e.a)}},ob=function(e){return{h:Vt(e.h),s:Vt(e.s),l:Vt(e.l),a:Vt(e.a,3)}},ab=function(e){return MT((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},hu=function(e){return{h:(t=RT(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},Rk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Mk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Nk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Dk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rv={string:[[function(e){var t=Ik.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Vt(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Vt(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Nk.exec(e)||Dk.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:ib({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Rk.exec(e)||Mk.exec(e);if(!t)return null;var r,n,i=sb({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(Pk[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return ab(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=i===void 0?1:i;return Li(t)&&Li(r)&&Li(n)?ib({r:Number(t),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,s=i===void 0?1:i;if(!Li(t)||!Li(r)||!Li(n))return null;var o=sb({h:Number(t),s:Number(r),l:Number(n),a:Number(s)});return ab(o)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,s=i===void 0?1:i;if(!Li(t)||!Li(r)||!Li(n))return null;var o=function(a){return{h:IT(a.h),s:pn(a.s,0,100),v:pn(a.v,0,100),a:pn(a.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(s)});return MT(o)},"hsv"]]},lb=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},Lk=function(e){return typeof e=="string"?lb(e.trim(),rv.string):typeof e=="object"&&e!==null?lb(e,rv.object):[null,void 0]},Op=function(e,t){var r=hu(e);return{h:r.h,s:pn(r.s+100*t,0,100),l:r.l,a:r.a}},Up=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},ub=function(e,t){var r=hu(e);return{h:r.h,s:r.s,l:pn(r.l+100*t,0,100),a:r.a}},nv=function(){function e(t){this.parsed=Lk(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Vt(Up(this.rgba),2)},e.prototype.isDark=function(){return Up(this.rgba)<.5},e.prototype.isLight=function(){return Up(this.rgba)>=.5},e.prototype.toHex=function(){return t=Fp(this.rgba),r=t.r,n=t.g,i=t.b,o=(s=t.a)<1?Sh(Vt(255*s)):"","#"+Sh(r)+Sh(n)+Sh(i)+o;var t,r,n,i,s,o},e.prototype.toRgb=function(){return Fp(this.rgba)},e.prototype.toRgbString=function(){return t=Fp(this.rgba),r=t.r,n=t.g,i=t.b,(s=t.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var t,r,n,i,s},e.prototype.toHsl=function(){return ob(hu(this.rgba))},e.prototype.toHslString=function(){return t=ob(hu(this.rgba)),r=t.h,n=t.s,i=t.l,(s=t.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var t,r,n,i,s},e.prototype.toHsv=function(){return t=RT(this.rgba),{h:Vt(t.h),s:Vt(t.s),v:Vt(t.v),a:Vt(t.a,3)};var t},e.prototype.invert=function(){return ci({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),ci(Op(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),ci(Op(this.rgba,-t))},e.prototype.grayscale=function(){return ci(Op(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),ci(ub(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),ci(ub(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?ci({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):Vt(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=hu(this.rgba);return typeof t=="number"?ci({h:t,s:r.s,l:r.l,a:r.a}):Vt(r.h)},e.prototype.isEqual=function(t){return this.toHex()===ci(t).toHex()},e}(),ci=function(e){return e instanceof nv?e:new nv(e)},cb=[],Bk=function(e){e.forEach(function(t){cb.indexOf(t)<0&&(t(nv,rv),cb.push(t))})};function Fk(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,h,d=n[this.toHex()];if(d)return d;if(o?.closest){var p=this.toRgb(),c=1/0,f="black";if(!s.length)for(var m in r)s[m]=new e(r[m]).toRgb();for(var v in r){var _=(a=p,h=s[v],Math.pow(a.r-h.r,2)+Math.pow(a.g-h.g,2)+Math.pow(a.b-h.b,2));_<c&&(c=_,f=v)}return f}},t.string.push([function(o){var a=o.toLowerCase(),h=a==="transparent"?"#0000":r[a];return h?new e(h).toRgb():null},"name"])}Bk([Fk]);const La=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof La)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,r,n]=this._components;return{r:e,g:t,b:r,a:n}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,n]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(n*255),e}toRgbArray(e){e=e??[];const[t,r,n]=this._components;return e[0]=t,e[1]=r,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,n,i]=La.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=n,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=this._int&255;return t&&(r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0),(e*255<<24)+(r<<16)+(n<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,n,i]=this._components;return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}normalize(e){let t,r,n,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const s=e;t=(s>>16&255)/255,r=(s>>8&255)/255,n=(s&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,n,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,n,i=255]=e,t/=255,r/=255,n/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=La.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const s=ci(e);s.isValid()&&({r:t,g:r,b:n,a:i}=s.rgba,t/=255,r/=255,n/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=n,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((n,i)=>{e[i]=Math.min(Math.max(n,t),r)}),e)}};let et=La;et.shared=new La;et.temp=new La;et.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function bf(e,t=[]){return ze("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),et.shared.setValue(e).toRgbArray(t)}function Ok(e){return ze("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),et.shared.setValue(e).toHex()}function wf(e){return ze("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),et.shared.setValue(e).toNumber()}function Uk(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[me.NORMAL_NPM]=me.NORMAL,e[me.ADD_NPM]=me.ADD,e[me.SCREEN_NPM]=me.SCREEN,t[me.NORMAL]=me.NORMAL_NPM,t[me.ADD]=me.ADD_NPM,t[me.SCREEN]=me.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}const NT=Uk();function DT(e,t){return NT[t?1:0][e]}function zk(e,t=null){const r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function LT(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function zd(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function hb(e){return!(e&e-1)&&!!e}function db(e){let t=(e>65535?1:0)<<4;e>>>=t;let r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function Ba(e,t,r){const n=e.length;let i;if(t>=n||r===0)return;r=t+r>n?n-t:r;const s=n-r;for(i=t;i<s;++i)e[i]=e[i+r];e.length=s}function Ts(e){return e===0?0:e<0?-1:1}let Hk=0;function Ro(){return++Hk}const BT=class{constructor(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let iv=BT;iv.EMPTY=new BT(0,0,0,0);const fb={},hi=Object.create(null),gs=Object.create(null);class Gk{constructor(t,r,n){this._canvas=de.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||de.RESOLUTION,this.resize(t,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,r){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function pb(e,t,r){for(let n=0,i=4*r*t;n<t;++n,i+=4)if(e[i+3]!==0)return!1;return!0}function mb(e,t,r,n,i){const s=4*t;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(e[a+3]!==0)return!1;return!0}function $k(e){const{width:t,height:r}=e,n=e.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,t,r).data;let o=0,a=0,h=t-1,d=r-1;for(;a<r&&pb(s,t,a);)++a;if(a===r)return iv.EMPTY;for(;pb(s,t,d);)--d;for(;mb(s,t,o,a,d);)++o;for(;mb(s,t,h,a,d);)--h;return++h,++d,new iv(o,a,h,d)}function jk(e){const t=$k(e),{width:r,height:n}=t;let i=null;if(!t.isEmpty()){const s=e.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(t.left,t.top,r,n)}return{width:r,height:n,data:i}}let Th;function Wk(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,Th||(Th=document.createElement("a")),Th.href=e;const r=Tk.parse(Th.href),n=!r.port&&t.port===""||r.port===t.port;return r.hostname!==t.hostname||!n||r.protocol!==t.protocol?"anonymous":""}function Fs(e,t=1){const r=de.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var ve=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(ve||{});const sv=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},gb=(e,t)=>sv(e).priority??t,Ae={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(sv).forEach(t=>{t.type.forEach(r=>this._removeHandlers[r]?.(t))}),this},add(...e){return e.map(sv).forEach(t=>{t.type.forEach(r=>{const n=this._addHandlers,i=this._queue;n[r]?n[r](t):(i[r]=i[r]||[],i[r].push(t))})}),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const s=this._queue;return s[e]&&(s[e].forEach(o=>t(o)),delete s[e]),this},handleByMap(e,t){return this.handle(e,r=>{t[r.name]=r.ref},r=>{delete t[r.name]})},handleByList(e,t,r=-1){return this.handle(e,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((i,s)=>gb(s,r)-gb(i,r)))},n=>{const i=t.indexOf(n.ref);i!==-1&&t.splice(i,1)})}};class ov{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Vk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Xk(e){let t="";for(let r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function Yk(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=Vk.replace(/%forloop%/gi,Xk(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}const zp=0,Hp=1,Gp=2,$p=3,jp=4,Wp=5;class es{constructor(){this.data=0,this.blendMode=me.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<zp)}set blend(t){!!(this.data&1<<zp)!==t&&(this.data^=1<<zp)}get offsets(){return!!(this.data&1<<Hp)}set offsets(t){!!(this.data&1<<Hp)!==t&&(this.data^=1<<Hp)}get culling(){return!!(this.data&1<<Gp)}set culling(t){!!(this.data&1<<Gp)!==t&&(this.data^=1<<Gp)}get depthTest(){return!!(this.data&1<<$p)}set depthTest(t){!!(this.data&1<<$p)!==t&&(this.data^=1<<$p)}get depthMask(){return!!(this.data&1<<Wp)}set depthMask(t){!!(this.data&1<<Wp)!==t&&(this.data^=1<<Wp)}get clockwiseFrontFace(){return!!(this.data&1<<jp)}set clockwiseFrontFace(t){!!(this.data&1<<jp)!==t&&(this.data^=1<<jp)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==me.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new es;return t.depthTest=!1,t.blend=!0,t}}const av=[];function FT(e,t){if(!e)return null;let r="";if(typeof e=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(let n=av.length-1;n>=0;--n){const i=av[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Wn{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,r,n,i,s,o,a,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:d,items:p}=this;this._aliasCount++;for(let c=0,f=p.length;c<f;c++)p[c][d](t,r,n,i,s,o,a,h);return p===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Wn.prototype,{dispatch:{value:Wn.prototype.emit},run:{value:Wn.prototype.emit}});class Du{constructor(t=0,r=0){this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Wn("setRealSize"),this.onUpdate=new Wn("update"),this.onError=new Wn("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,r){return!1}}class Yu extends Du{constructor(t,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=t}upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Kn.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const Kk={scaleMode:vi.NEAREST,format:ce.RGBA,alphaMode:Kn.NPM},aa=class extends Xu{constructor(e=null,t=null){super(),t=Object.assign({},aa.defaultOptions,t);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:h,format:d,type:p,target:c,resolution:f,resourceOptions:m}=t;e&&!(e instanceof Du)&&(e=FT(e,m),e.internal=!0),this.resolution=f||de.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=h,this._scaleMode=s,this.format=d,this.type=p,this.target=c,this.alphaMode=r,this.uid=Ro(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=hb(this.realWidth)&&hb(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete gs[this.cacheId],delete hi[this.cacheId],this.cacheId=null),this.dispose(),aa.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=de.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let i=null;if(n)i=e;else{if(!e._pixiId){const o=t?.pixiIdPrefix||"pixiid";e._pixiId=`${o}_${Ro()}`}i=e._pixiId}let s=gs[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new aa(e,t),s.cacheId=i,aa.addToCache(s,i)),s}static fromBuffer(e,t,r,n){e=e||new Float32Array(t*r*4);const i=new Yu(e,{width:t,height:r}),s=e instanceof Float32Array?Ie.FLOAT:Ie.UNSIGNED_BYTE;return new aa(i,Object.assign({},Kk,{type:s},n))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),gs[t]&&gs[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),gs[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=gs[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete gs[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete gs[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let Be=aa;Be.defaultOptions={mipmap:Ti.POW2,anisotropicLevel:0,scaleMode:vi.LINEAR,wrapMode:Vi.CLAMP,alphaMode:Kn.UNPACK,target:Na.TEXTURE_2D,format:ce.RGBA,type:Ie.UNSIGNED_BYTE};Be._globalBatch=0;class lv{constructor(){this.texArray=null,this.blend=0,this.type=Un.TRIANGLES,this.start=0,this.size=0,this.data=null}}let qk=0;class Pt{constructor(t,r=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=qk++,this.disposeRunner=new Wn("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?bi.ELEMENT_ARRAY_BUFFER:bi.ARRAY_BUFFER}get index(){return this.type===bi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new Pt(t)}}class Hd{constructor(t,r=0,n=!1,i=Ie.FLOAT,s,o,a,h=1){this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=h}destroy(){this.buffer=null}static from(t,r,n,i,s){return new Hd(t,r,n,i,s)}}const Qk={Float32Array,Uint32Array,Int32Array,Uint8Array};function Zk(e,t){let r=0,n=0;const i={};for(let h=0;h<e.length;h++)n+=t[h],r+=e[h].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let h=0;h<e.length;h++){const d=t[h],p=e[h],c=LT(p);i[c]||(i[c]=new Qk[c](s)),o=i[c];for(let f=0;f<p.length;f++){const m=(f/d|0)*n+a,v=f%d;o[m+v]=p[f]}a+=d}return new Float32Array(s)}const vb={5126:4,5123:2,5121:1};let Jk=0;const eP={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Os{constructor(t=[],r={}){this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=Jk++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Wn("disposeGeometry"),this.refCount=0}addAttribute(t,r,n=0,i=!1,s,o,a,h=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Pt||(r instanceof Array&&(r=new Float32Array(r)),r=new Pt(r));const d=t.split("|");if(d.length>1){for(let c=0;c<d.length;c++)this.addAttribute(d[c],r,n,i,s);return this}let p=this.buffers.indexOf(r);return p===-1&&(this.buffers.push(r),p=this.buffers.length-1),this.attributes[t]=new Hd(p,n,i,s,o,a,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Pt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Pt(t)),t.type=bi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],r=[],n=new Pt;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];t.push(o.data),r.push(s.size*vb[s.type]/4),s.buffer=0}for(n.data=Zk(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const r=this.attributes[t];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Os;for(let r=0;r<this.buffers.length;r++)t.buffers[r]=new Pt(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];t.attributes[r]=new Hd(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=bi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const r=new Os,n=[],i=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)i[h]=i[h]||0,i[h]+=o.buffers[h].data.length,s[h]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new eP[LT(o.buffers[a].data)](i[a]),r.buffers[a]=new Pt(n[a]);for(let a=0;a<t.length;a++){o=t[a];for(let h=0;h<o.buffers.length;h++)n[h].set(o.buffers[h].data,s[h]),s[h]+=o.buffers[h].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=bi.ELEMENT_ARRAY_BUFFER;let a=0,h=0,d=0,p=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){p=c;break}for(const c in o.attributes){const f=o.attributes[c];(f.buffer|0)===p&&(h+=f.size*vb[f.type]/4)}for(let c=0;c<t.length;c++){const f=t[c].indexBuffer.data;for(let m=0;m<f.length;m++)r.indexBuffer.data[m+d]+=a;a+=t[c].buffers[p].data.length/h,d+=f.length}}return r}}class OT extends Os{constructor(t=!1){super(),this._buffer=new Pt(null,t,!1),this._indexBuffer=new Pt(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ie.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ie.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ie.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ie.FLOAT).addIndex(this._indexBuffer)}}const Gd=Math.PI*2,tP=180/Math.PI,Lu=Math.PI/180;var tr=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(tr||{});class Fe{constructor(t=0,r=0){this.x=0,this.y=0,this.x=t,this.y=r}clone(){return new Fe(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,r=t){return this.x=t,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Eh=[new Fe,new Fe,new Fe,new Fe];class He{constructor(t=0,r=0,n=0,i=0){this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=tr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new He(0,0,0,0)}clone(){return new He(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(t,r){if(!r){const N=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=N)return!1;const k=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>k}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Eh[0].set(t.left,t.top),h=Eh[1].set(t.left,t.bottom),d=Eh[2].set(t.right,t.top),p=Eh[3].set(t.right,t.bottom);if(d.x<=a.x||h.y<=a.y)return!1;const c=Math.sign(r.a*r.d-r.b*r.c);if(c===0||(r.apply(a,a),r.apply(h,h),r.apply(d,d),r.apply(p,p),Math.max(a.x,h.x,d.x,p.x)<=n||Math.min(a.x,h.x,d.x,p.x)>=i||Math.max(a.y,h.y,d.y,p.y)<=s||Math.min(a.y,h.y,d.y,p.y)>=o))return!1;const f=c*(h.y-a.y),m=c*(a.x-h.x),v=f*n+m*s,_=f*i+m*s,T=f*n+m*o,x=f*i+m*o;if(Math.max(v,_,T,x)<=f*a.x+m*a.y||Math.min(v,_,T,x)>=f*p.x+m*p.y)return!1;const y=c*(a.y-d.y),w=c*(d.x-a.x),E=y*n+w*s,P=y*i+w*s,I=y*n+w*o,R=y*i+w*o;return!(Math.max(E,P,I,R)<=y*a.x+w*a.y||Math.min(E,P,I,R)>=y*p.x+w*p.y)}pad(t=0,r=t){return this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this}fit(t){const r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(t=1,r=.001){const n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this}enlarge(t){const r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class N1{constructor(t=0,r=0,n=0){this.x=t,this.y=r,this.radius=n,this.type=tr.CIRC}clone(){return new N1(this.x,this.y,this.radius)}contains(t,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-t,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new He(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class D1{constructor(t=0,r=0,n=0,i=0){this.x=t,this.y=r,this.width=n,this.height=i,this.type=tr.ELIP}clone(){return new D1(this.x,this.y,this.width,this.height)}contains(t,r){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new He(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Fa{constructor(...t){let r=Array.isArray(t[0])?t[0]:t;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=tr.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),r=new Fa(t);return r.closeStroke=this.closeStroke,r}contains(t,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],h=this.points[s*2+1],d=this.points[o*2],p=this.points[o*2+1];h>r!=p>r&&t<(d-a)*((r-h)/(p-h))+a&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,r)=>`${t}, ${r}`,"")}]`}}class L1{constructor(t=0,r=0,n=0,i=0,s=20){this.x=t,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=tr.RREC}clone(){return new L1(this.x,this.y,this.width,this.height,this.radius)}contains(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let i=t-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=t-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=t-(this.x+n),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class pt{constructor(t=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,r,n,i,s,o){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(t,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,r){r=r||new Fe;const n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(t,r){r=r||new Fe;const n=1/(this.a*this.d+this.c*-this.b),i=t.x,s=t.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(t,r){return this.tx+=t,this.ty+=r,this}scale(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this}rotate(t){const r=Math.cos(t),n=Math.sin(t),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(t){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*s,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*s,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*s+this.ty,this}setTransform(t,r,n,i,s,o,a,h,d){return this.a=Math.cos(a+d)*s,this.b=Math.sin(a+d)*s,this.c=-Math.sin(a-h)*o,this.d=Math.cos(a-h)*o,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(t){const r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this}decompose(t){const r=this.a,n=this.b,i=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-i,s),h=Math.atan2(n,r),d=Math.abs(a+h);return d<1e-5||Math.abs(Gd-d)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+s*s),t.position.x=this.tx+(o.x*r+o.y*i),t.position.y=this.ty+(o.x*n+o.y*s),t}invert(){const t=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=t*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(t*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new pt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new pt}static get TEMP_MATRIX(){return new pt}}const uo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],co=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ho=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],uv=[],UT=[],Ch=Math.sign;function rP(){for(let e=0;e<16;e++){const t=[];uv.push(t);for(let r=0;r<16;r++){const n=Ch(uo[e]*uo[r]+ho[e]*co[r]),i=Ch(co[e]*uo[r]+fo[e]*co[r]),s=Ch(uo[e]*ho[r]+ho[e]*fo[r]),o=Ch(co[e]*ho[r]+fo[e]*fo[r]);for(let a=0;a<16;a++)if(uo[a]===n&&co[a]===i&&ho[a]===s&&fo[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new pt;t.set(uo[e],co[e],ho[e],fo[e],0,0),UT.push(t)}}rP();const xt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>uo[e],uY:e=>co[e],vX:e=>ho[e],vY:e=>fo[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>uv[e][t],sub:(e,t)=>uv[e][xt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?xt.S:xt.N:Math.abs(t)*2<=Math.abs(e)?e>0?xt.E:xt.W:t>0?e>0?xt.SE:xt.SW:e>0?xt.NE:xt.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=UT[xt.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class xi{constructor(t,r,n=0,i=0){this._x=n,this._y=i,this.cb=t,this.scope=r}clone(t=this.cb,r=this.scope){return new xi(t,r,this._x,this._y)}set(t=0,r=t){return(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const zT=class{constructor(){this.worldTransform=new pt,this.localTransform=new pt,this.position=new xi(this.onChange,this,0,0),this.scale=new xi(this.onChange,this,1,1),this.pivot=new xi(this.onChange,this,0,0),this.skew=new xi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Sf=zT;Sf.IDENTITY=new zT;var nP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,iP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function xb(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function Vp(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function HT(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Vp(2*t);case"bvec3":return Vp(3*t);case"bvec4":return Vp(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Oa=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],sP={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},oP={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function aP(e,t){const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in e.uniforms){const i=t[n];if(!i){e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const s=e.uniforms[n];let o=!1;for(let a=0;a<Oa.length;a++)if(Oa[a].test(i,s)){r.push(Oa[a].code(n,s)),o=!0;break}if(!o){const h=(i.size===1&&!i.isArray?sP:oP)[i.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const GT={};let Ah=GT;function lP(){if(Ah===GT||Ah?.isContextLost()){const e=de.ADAPTER.createCanvas();let t;de.PREFER_ENV>=Do.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Ah=t}return Ah}let kh;function uP(){if(!kh){kh=fn.MEDIUM;const e=lP();e&&e.getShaderPrecisionFormat&&(kh=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?fn.HIGH:fn.MEDIUM)}return kh}function yb(e,t){const r=e.getShaderSource(t).split(`
`).map((d,p)=>`${p}: ${d}`),n=e.getShaderInfoLog(t),i=n.split(`
`),s={},o=i.map(d=>parseFloat(d.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(d=>d&&!s[d]?(s[d]=!0,!0):!1),a=[""];o.forEach(d=>{r[d-1]=`%c${r[d-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=r.join(`
`);a[0]=h,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function cP(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||yb(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||yb(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const hP={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function $T(e){return hP[e]}let Ph=null;const _b={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function jT(e,t){if(!Ph){const r=Object.keys(_b);Ph={};for(let n=0;n<r.length;++n){const i=r[n];Ph[e[i]]=_b[i]}}return Ph[t]}function bb(e,t,r){if(e.substring(0,9)!=="precision"){let n=t;return t===fn.HIGH&&r!==fn.HIGH&&(n=fn.MEDIUM),`precision ${n} float;
${e}`}else if(r!==fn.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let Bl;function dP(){if(typeof Bl=="boolean")return Bl;try{Bl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Bl=!1}return Bl}let fP=0;const Ih={},la=class{constructor(e,t,r="pixi-shader",n={}){this.extra={},this.id=fP++,this.vertexSrc=e||la.defaultVertexSrc,this.fragmentSrc=t||la.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Ih[r]?(Ih[r]++,r+=`-${Ih[r]}`):Ih[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=bb(this.vertexSrc,la.defaultVertexPrecision,fn.HIGH),this.fragmentSrc=bb(this.fragmentSrc,la.defaultFragmentPrecision,uP())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return iP}static get defaultFragmentSrc(){return nP}static from(e,t,r){const n=e+t;let i=fb[n];return i||(fb[n]=i=new la(e,t,r)),i}};let zn=la;zn.defaultVertexPrecision=fn.HIGH;zn.defaultFragmentPrecision=ji.apple.device?fn.HIGH:fn.MEDIUM;let pP=0;class Vn{constructor(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=pP++,this.static=!!r,this.ubo=!!n,t instanceof Pt?(this.buffer=t,this.buffer.type=bi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Pt(new Float32Array(1)),this.buffer.type=bi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,r,n){if(!this.ubo)this.uniforms[t]=new Vn(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,r,n){return new Vn(t,r,n)}static uboFrom(t,r){return new Vn(t,r??!0,!0)}}class wi{constructor(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof Vn?this.uniformGroup=r:this.uniformGroup=new Vn(r):this.uniformGroup=new Vn({}),this.disposeRunner=new Wn("disposeShader")}checkUniformExists(t,r){if(r.uniforms[t])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group&&this.checkUniformExists(t,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,r,n){const i=zn.from(t,r);return new wi(i,n)}}class mP{constructor(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let s=0;s<t;s++)n[s]=s;this.defaultGroupCache[t]=Vn.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${t}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new zn(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new pt,default:this.defaultGroupCache[t]};return new wi(this.programCache[t],r)}generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class cv{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function gP(){return!ji.apple.device}function vP(e){let t=!0;const r=de.ADAPTER.getNavigator();if(ji.tablet||ji.phone){if(ji.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(ji.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?e:4}class Tf{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var xP=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,yP=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const In=class extends Tf{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=OT,this.vertexSize=6,this.state=es.for2d(),this.size=In.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??vP(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??gP(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return ze("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return yP}static get defaultFragmentTemplate(){return xP}setShaderGenerator({vertex:e=In.defaultVertexSrc,fragment:t=In.defaultFragmentTemplate}={}){this.shaderGenerator=new mP(e,t)}contextChange(){const e=this.renderer.gl;de.PREFER_ENV===Do.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),In.defaultMaxTextures),this.maxTextures=Yk(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=In,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new lv);for(;t.length<n;)t.push(new cv);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(e){!e._texture.valid||(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=In._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Be._globalBatch,a=0,h=r[0],d=0;n.copyBoundTextures(i,t);for(let p=0;p<this._bufferSize;++p){const c=e[p];e[p]=null,c._batchEnabled!==o&&(h.count>=t&&(n.boundArray(h,i,o,t),this.buildDrawCalls(h,d,p),d=p,h=r[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}h.count>0&&(n.boundArray(h,i,o,t),this.buildDrawCalls(h,d,this._bufferSize),++a,++o);for(let p=0;p<i.length;p++)i[p]=null;Be._globalBatch=o}buildDrawCalls(e,t,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=In._drawCallPool;let h=this._dcIndex,d=this._aIndex,p=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=e;for(let f=t;f<r;++f){const m=n[f],v=m._texture.baseTexture,_=NT[v.alphaMode?1:0][m.blendMode];n[f]=null,t<f&&c.blend!==_&&(c.size=p-c.start,t=f,c=a[++h],c.texArray=e,c.start=p),this.packInterleavedGeometry(m,i,s,d,p),d+=m.vertexData.length/2*o,p+=m.indices.length,c.blend=_}t<r&&(c.size=p-c.start,++h),this._dcIndex=h,this._aIndex=d,this._iIndex=p}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;In.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,n=In._drawCallPool;let i=null;for(let s=0;s<e;s++){const{texArray:o,type:a,size:h,start:d,blend:p}=n[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=p,r.set(this.state),t.drawElements(a,h,t.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),In.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=zd(Math.ceil(e/8)),r=db(t),n=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new ov(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=zd(Math.ceil(e/12)),r=db(t),n=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:s,float32View:o}=t,a=n/this.vertexSize,h=e.uvs,d=e.indices,p=e.vertexData,c=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),m=et.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let v=0;v<p.length;v+=2)o[n++]=p[v],o[n++]=p[v+1],o[n++]=h[v],o[n++]=h[v+1],s[n++]=m,o[n++]=c;for(let v=0;v<d.length;v++)r[i++]=a+d[v]}};let Fn=In;Fn.defaultBatchSize=4096;Fn.extension={name:"batch",type:ve.RendererPlugin};Fn._drawCallPool=[];Fn._textureArrayPool=[];Ae.add(Fn);var _P=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,bP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Yl=class extends wi{constructor(e,t,r){const n=zn.from(e||Yl.defaultVertexSrc,t||Yl.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=Yl.defaultResolution,this.multisample=Yl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new es}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return bP}static get defaultFragmentSrc(){return _P}};let Ge=Yl;Ge.defaultResolution=1;Ge.defaultMultisample=Dt.NONE;class Ef{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new et(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=t,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Ef.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};Ef.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"background"};Ae.add(Ef);class WT{constructor(t){this.renderer=t,this.emptyRenderer=new Tf(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)}boundArray(t,r,n,i){const{elements:s,ids:o,count:a}=t;let h=0;for(let d=0;d<a;d++){const p=s[d],c=p._batchLocation;if(c>=0&&c<i&&r[c]===p){o[d]=c;continue}for(;h<i;){const f=r[h];if(f&&f._batchEnabled===n&&f._batchLocation===h){h++;continue}o[d]=h,p._batchLocation=h,r[h]=p;break}}}destroy(){this.renderer=null}}WT.extension={type:ve.RendererSystem,name:"batch"};Ae.add(WT);let wb=0;class Cf{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=wb++}init(t){if(t.context)this.initFromContext(t.context);else{const r=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=wb++,this.renderer.runners.contextChange.emit(t);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const r=this.createContext(this.renderer.view,t);this.initFromContext(r)}createContext(t,r){let n;if(de.PREFER_ENV>=Do.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Cf.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};Cf.extension={type:ve.RendererSystem,name:"context"};Ae.add(Cf);class wP extends Yu{upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Kn.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}}class hv{constructor(t,r){this.width=Math.round(t||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Wn("disposeFramebuffer"),this.multisample=Dt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,r){return this.colorTextures[t]=r||new Be(null,{scaleMode:vi.NEAREST,resolution:1,mipmap:Ti.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Be(new wP(null,{width:this.width,height:this.height}),{scaleMode:vi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ti.OFF,format:ce.DEPTH_COMPONENT,type:Ie.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,r){if(t=Math.round(t),r=Math.round(r),!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(t/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class VT extends Be{constructor(t={}){if(typeof t=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];t={width:r,height:n,scaleMode:i,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Dt.NONE),super(null,t),this.mipmap=Ti.OFF,this.valid=!0,this._clear=new et([0,0,0,0]),this.framebuffer=new hv(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Us extends Du{constructor(t){const r=t,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;super(n,i),this.source=t,this.noSubImage=!1}static crossOrigin(t,r,n){n===void 0&&!r.startsWith("data:")?t.crossOrigin=Wk(r):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,r,n,i){const s=t.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===Kn.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class XT extends Us{constructor(t,r){if(r=r||{},typeof t=="string"){const n=new Image;Us.crossOrigin(n,t,r.crossorigin),n.src=t,t=n}super(t),!t.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??de.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Kn.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class YT{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,r,n){const i=r.width,s=r.height;if(n){const o=t.width/2/i,a=t.height/2/s,h=t.x/i+o,d=t.y/s+a;n=xt.add(n,xt.NW),this.x0=h+o*xt.uX(n),this.y0=d+a*xt.uY(n),n=xt.add(n,2),this.x1=h+o*xt.uX(n),this.y1=d+a*xt.uY(n),n=xt.add(n,2),this.x2=h+o*xt.uX(n),this.y2=d+a*xt.uY(n),n=xt.add(n,2),this.x3=h+o*xt.uX(n),this.y3=d+a*xt.uY(n)}else this.x0=t.x/i,this.y0=t.y/s,this.x1=(t.x+t.width)/i,this.y1=t.y/s,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/s,this.x3=t.x/i,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Sb=new YT;function Rh(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class ae extends Xu{constructor(t,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new He(0,0,1,1)),t instanceof ae&&(t=t.baseTexture),this.baseTexture=t,this._frame=r,this.trim=i,this.valid=!1,this._uvs=Sb,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Fe(o.x,o.y):new Fe(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=r:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:r}=this.baseTexture;r?.url&&hi[r.url]&&ae.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ae.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new ae(this.baseTexture,!this.noFrame&&t,r,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===Sb&&(this._uvs=new YT),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,r={},n=de.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let s=null;if(i)s=t;else if(t instanceof Be){if(!t.cacheId){const a=r?.pixiIdPrefix||"pixiid";t.cacheId=`${a}-${Ro()}`,Be.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=r?.pixiIdPrefix||"pixiid";t._pixiId=`${a}_${Ro()}`}s=t._pixiId}let o=hi[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof Be)?(r.resolution||(r.resolution=Fs(t)),o=new ae(new Be(t,r)),o.baseTexture.cacheId=s,Be.addToCache(o.baseTexture,s),ae.addToCache(o,s)):!o&&t instanceof Be&&(o=new ae(t),ae.addToCache(o,s)),o}static fromURL(t,r){const n=Object.assign({autoLoad:!1},r?.resourceOptions),i=ae.from(t,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(t,r,n,i){return new ae(Be.fromBuffer(t,r,n,i))}static fromLoader(t,r,n,i){const s=new Be(t,Object.assign({scaleMode:Be.defaultOptions.scaleMode,resolution:Fs(r)},i)),{resource:o}=s;o instanceof XT&&(o.url=r);const a=new ae(s);return n||(n=r),Be.addToCache(a.baseTexture,n),ae.addToCache(a,n),n!==r&&(Be.addToCache(a.baseTexture,r),ae.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(h=>{a.baseTexture.once("loaded",()=>h(a))})}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),hi[r]&&hi[r]!==t&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),hi[r]=t)}static removeFromCache(t){if(typeof t=="string"){const r=hi[t];if(r){const n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete hi[t],r}}else if(t?.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)hi[t.textureCacheIds[r]]===t&&delete hi[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=t,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const h=o&&a?"and":"or",d=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,p=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${d} ${h} ${p}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ae._EMPTY||(ae._EMPTY=new ae(new Be),Rh(ae._EMPTY),Rh(ae._EMPTY.baseTexture)),ae._EMPTY}static get WHITE(){if(!ae._WHITE){const t=de.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),ae._WHITE=new ae(Be.from(t)),Rh(ae._WHITE),Rh(ae._WHITE.baseTexture)}return ae._WHITE}}class Lo extends ae{constructor(t,r){super(t,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(t*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:r}=this;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))}static create(t){return new Lo(new VT(t))}}class KT{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,n=Dt.NONE){const i=new VT(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new Lo(i)}getOptimalTexture(t,r,n=1,i=Dt.NONE){let s;t=Math.ceil(t*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=zd(t),r=zd(r),s=((t&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(t,r,n){const i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||Dt.NONE);return i.filterFrame=t.filterFrame,i}returnTexture(t){const r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}KT.SCREEN_KEY=-1;class SP extends Os{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class qT extends Os{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Pt(this.vertices),this.uvBuffer=new Pt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/t.width,this.uvs[3]=i,this.uvs[4]=n+r.width/t.width,this.uvs[5]=i+r.height/t.height,this.uvs[6]=n,this.uvs[7]=i+r.height/t.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class TP{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Dt.NONE,this.sourceFrame=new He,this.destinationFrame=new He,this.bindingSourceFrame=new He,this.bindingDestinationFrame=new He,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Mh=[new Fe,new Fe,new Fe,new Fe],Xp=new pt;class QT{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new KT,this.statePool=[],this.quad=new SP,this.quadUv=new qT,this.tempRect=new He,this.activeState={},this.globalUniforms=new Vn({outputFrame:new He,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new TP,o=this.renderer.renderTexture;let a=r[0].resolution,h=r[0].multisample,d=r[0].padding,p=r[0].autoFit,c=r[0].legacy??!0;for(let v=1;v<r.length;v++){const _=r[v];a=Math.min(a,_.resolution),h=Math.min(h,_.multisample),d=this.useMaxPadding?Math.max(d,_.padding):d+_.padding,p=p&&_.autoFit,c=c||(_.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=h,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(d);const f=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Xp.copyFrom(n.projection.transform).invert(),f),p?(s.sourceFrame.fit(f),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(f)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,h),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const d=i.filterArea;d[0]=r.destinationFrame.width,d[1]=r.destinationFrame.height,d[2]=r.sourceFrame.x,d[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const h=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,h.renderTexture,pi.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let d=r.renderTexture,p=this.getOptimalFilterTexture(d.width,d.height,r.resolution);p.filterFrame=d.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&r.multisample>1&&(p=this.getOptimalFilterTexture(d.width,d.height,r.resolution),p.filterFrame=d.filterFrame),n[c].apply(this,d,p,pi.CLEAR,r);const f=d;d=p,p=f}n[c].apply(this,d,h.renderTexture,pi.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(d),this.returnFilterTexture(p)}r.clear(),this.statePool.push(r)}bindAndClear(t,r=pi.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===pi.CLEAR||r===pi.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,r,n,i){const s=this.renderer;s.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Un.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Un.TRIANGLE_STRIP))}calculateSpriteMatrix(t,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=t.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(pt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,r,n=1,i=Dt.NONE){return this.texturePool.getOptimalTexture(t,r,n,i)}getFilterTexture(t,r,n){if(typeof t=="number"){const s=t;t=r,r=s}t=t||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||Dt.NONE);return i.filterFrame=t.filterFrame,i}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,r){const n=Mh[0],i=Mh[1],s=Mh[2],o=Mh[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(s,s),t.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),h=Math.min(n.y,i.y,s.y,o.y),d=Math.max(n.x,i.x,s.x,o.x),p=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=h,r.width=d-a,r.height=p-h}roundFrame(t,r,n,i,s){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:h,d}=s;if((Math.abs(a)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(d)>1e-4))return}s=s?Xp.copyFrom(s):Xp.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,t),t.ceil(r),this.transformAABB(s.invert(),t)}}}QT.extension={type:ve.RendererSystem,name:"filter"};Ae.add(QT);class EP{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Dt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const CP=new He;class ZT{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new hv(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new He,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;de.PREFER_ENV===Do.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,r,n=0){const{gl:i}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=n),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){const o=r.width>>n,a=r.height>>n,h=o/r.width;this.setViewport(r.x*h,r.y*h,o,a)}else{const o=t.width>>n,a=t.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,r,n,i){const s=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=n,s.height=i,this.gl.viewport(t,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,r,n,i,s=Xg.COLOR|Xg.DEPTH){const{gl:o}=this;o.clearColor(t,r,n,i),o.clear(s)}initFramebuffer(t){const{gl:r}=this,n=new EP(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height));const i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],h=a.parentTextureArray||a;this.renderer.texture.bind(h,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,r){const{gl:n}=this,i=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let h=0;h<o;h++){const d=s[h],p=d.parentTextureArray||d;this.renderer.texture.bind(p,0),h===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,p._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+h,d.target,p._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+h))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const d=t.depthTexture;this.renderer.texture.bind(d,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,d._glTextures[this.CONTEXT_UID].texture,r)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:r}=this;let n=Dt.NONE;if(t<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=Dt.NONE),n}blit(t,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const h=i.glFramebuffers[a];if(!h)return;if(!t){if(!h.msaaBuffer)return;const p=i.colorTextures[0];if(!p)return;h.blitFramebuffer||(h.blitFramebuffer=new hv(i.width,i.height),h.blitFramebuffer.addColorTexture(0,p)),t=h.blitFramebuffer,t.colorTextures[0]!==p&&(t.colorTextures[0]=p,t.dirtyId++,t.dirtyFormat++),(t.width!==i.width||t.height!==i.height)&&(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}r||(r=CP,r.width=i.width,r.height=i.height),n||(n=r);const d=r.width===n.width&&r.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,d?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,r){const n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(t){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)}forceStencil(){const t=this.current;if(!t)return;const r=t.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;t.stencil=!0;const n=t.width,i=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),r.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new He}destroy(){this.renderer=null}}ZT.extension={type:ve.RendererSystem,name:"framebuffer"};Ae.add(ZT);const Yp={5126:4,5123:2,5121:1};class JT{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;de.PREFER_ENV===Do.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=i=>n.bindVertexArrayOES(i),t.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),t.drawElementsInstanced=(i,s,o,a,h)=>n.drawElementsInstancedANGLE(i,s,o,a,h),t.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(t,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(t,r,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const i=t.buffers[n];r.update(i)}}checkCompatibility(t,r){const n=t.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,r){const n=t.attributes,i=r.attributeData,s=["g",t.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(t,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);const h=this.getSignature(t,a),d=t.glVertexArrayObjects[this.CONTEXT_UID];let p=d[h];if(p)return d[a.id]=p,p;const c=t.buffers,f=t.attributes,m={},v={};for(const _ in c)m[_]=0,v[_]=0;for(const _ in f)!f[_].size&&a.attributeData[_]?f[_].size=a.attributeData[_].size:f[_].size||console.warn(`PIXI Geometry attribute '${_}' size cannot be determined (likely the bound shader does not have the attribute)`),m[f[_].buffer]+=f[_].size*Yp[f[_].type];for(const _ in f){const T=f[_],x=T.size;T.stride===void 0&&(m[T.buffer]===x*Yp[T.type]?T.stride=0:T.stride=m[T.buffer]),T.start===void 0&&(T.start=v[T.buffer],v[T.buffer]+=x*Yp[T.type])}p=i.createVertexArray(),i.bindVertexArray(p);for(let _=0;_<c.length;_++){const T=c[_];o.bind(T),n&&T._glBuffers[s].refCount++}return this.activateVao(t,a),d[a.id]=p,d[h]=p,i.bindVertexArray(null),o.unbind(bi.ARRAY_BUFFER),p}disposeGeometry(t,r){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=t.buffers,o=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(let a=0;a<s.length;a++){const h=s[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&o.dispose(s[a],r))}if(!r){for(const a in n)if(a[0]==="g"){const h=n[a];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)}activateVao(t,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let h=null;for(const d in a){const p=a[d],c=o[p.buffer],f=c._glBuffers[i];if(r.attributeData[d]){h!==f&&(s.bind(c),h=f);const m=r.attributeData[d].location;if(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,p.size,p.type||n.FLOAT,p.normalized,p.stride,p.start),p.instance)if(this.hasInstance)n.vertexAttribDivisor(m,p.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,h=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,r||o.indexBuffer.data.length,h,(n||0)*a,i||1):s.drawElements(t,r||o.indexBuffer.data.length,h,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,r||o.getSize(),i||1):s.drawArrays(t,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}JT.extension={type:ve.RendererSystem,name:"geometry"};Ae.add(JT);const Tb=new pt;class B1{constructor(t,r){this._texture=t,this.mapCoord=new pt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,r){r===void 0&&(r=t);const n=this.mapCoord;for(let i=0;i<t.length;i+=2){const s=t[i],o=t[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(t){const r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(Tb.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Tb));const o=r.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,d=this.clampOffset;return a[0]=(r._frame.x+h+d)/o.width,a[1]=(r._frame.y+h+d)/o.height,a[2]=(r._frame.x+r._frame.width-h+d)/o.width,a[3]=(r._frame.y+r._frame.height-h+d)/o.height,this.uClampOffset[0]=d/o.realWidth,this.uClampOffset[1]=d/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var AP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,kP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class PP extends Ge{constructor(t,r,n){let i=null;typeof t!="string"&&r===void 0&&n===void 0&&(i=t,t=void 0,r=void 0,n=void 0),super(t||kP,r||AP,n),this.maskSprite=i,this.maskMatrix=new pt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,r,n,i){const s=this._maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new B1(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,r,n,i))}}class IP{constructor(t=null){this.type=Ft.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ge.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ft.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class eE{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new IP;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Ft.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ft.SCISSOR:this.renderer.scissor.push(n);break;case Ft.STENCIL:this.renderer.stencil.push(n);break;case Ft.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Ft.COLOR:this.pushColorMask(n);break}n.type===Ft.SPRITE&&this.maskStack.push(n)}pop(t){const r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case Ft.SCISSOR:this.renderer.scissor.pop(r);break;case Ft.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Ft.SPRITE:this.popSpriteMask(r);break;case Ft.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Ft.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const r=t.maskObject;r?r.isSprite?t.type=Ft.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Ft.SCISSOR:t.type=Ft.STENCIL:t.type=Ft.COLOR}pushSpriteMask(t){const{maskObject:r}=t,n=t._target;let i=t._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new PP]));const s=this.renderer,o=s.renderTexture;let a,h;if(o.current){const p=o.current;a=t.resolution||p.resolution,h=t.multisample??p.multisample}else a=t.resolution||s.resolution,h=t.multisample??s.multisample;i[0].resolution=a,i[0].multisample=h,i[0].maskSprite=r;const d=n.filterArea;n.filterArea=r.getBounds(!0),s.filter.push(n,i),n.filterArea=d,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const r=t._colorMask,n=t._colorMask=r&t.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const r=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}eE.extension={type:ve.RendererSystem,name:"mask"};Ae.add(eE);class tE{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=t;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Eb=new pt,Cb=[],ld=class extends tE{constructor(e){super(e),this.glConst=de.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,Cb.pop()??new He);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||ld.isMatrixRotated(t.worldTransform)||ld.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,n,i){ld.isMatrixRotated(i)||(i=i?Eb.copyFrom(i):Eb.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Cb.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let rE=ld;rE.extension={type:ve.RendererSystem,name:"scissor"};Ae.add(rE);class nE extends tE{constructor(t){super(t),this.glConst=de.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const r=t.maskObject,{gl:n}=this.renderer,i=t._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(t._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}nE.extension={type:ve.RendererSystem,name:"stencil"};Ae.add(nE);class iE{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ze("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return ze("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return ze("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const r in t)this.plugins[r]=new t[r](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}iE.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"_plugin"};Ae.add(iE);class sE{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new pt,this.transform=null}update(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(t){}destroy(){this.renderer=null}}sE.extension={type:ve.RendererSystem,name:"projection"};Ae.add(sE);const RP=new Sf;class oE{constructor(t){this.renderer=t,this._tempMatrix=new pt}generateTexture(t,r){const{region:n,...i}=r||{},s=n||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Lo.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=RP,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}oE.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"textureGenerator"};Ae.add(oE);const no=new He,Fl=new He;class aE{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new He,this.destinationFrame=new He,this.viewportFrame=new He}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,r,n){const i=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,r||(no.width=t.frame.width,no.height=t.frame.height,r=no),n||(Fl.x=t.frame.x,Fl.y=t.frame.y,Fl.width=r.width,Fl.height=r.height,n=Fl),o=s.framebuffer):(a=i.resolution,r||(no.width=i._view.screen.width,no.height=i._view.screen.height,r=no),n||(n=no,n.width=r.width,n.height=r.height));const h=this.viewportFrame;h.x=n.x*a,h.y=n.y*a,h.width=n.width*a,h.height=n.height*a,t||(h.y=i.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(n,r,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(t,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=et.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:h,y:d,width:p,height:c}=this.viewportFrame;h=Math.round(h),d=Math.round(d),p=Math.round(p),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,d,p,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}aE.extension={type:ve.RendererSystem,name:"renderTexture"};Ae.add(aE);class MP{constructor(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function NP(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=t.getActiveAttrib(e,i);if(s.name.startsWith("gl_"))continue;const o=jT(t,s.type),a={type:o,name:s.name,size:$T(o),location:t.getAttribLocation(e,s.name)};r[s.name]=a}return r}function DP(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=t.getActiveUniform(e,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),h=jT(t,s.type);r[o]={name:o,index:i,type:h,size:s.size,isArray:a,value:HT(h,s.size)}}return r}function LP(e,t){const r=xb(e,e.VERTEX_SHADER,t.vertexSrc),n=xb(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const s=t.extra?.transformFeedbackVaryings;if(s&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||cP(e,i,r,n),t.attributeData=NP(i,e),t.uniformData=DP(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((d,p)=>d>p?1:-1);for(let d=0;d<h.length;d++)t.attributeData[h[d]].location=d,e.bindAttribLocation(i,d,h[d]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const o={};for(const h in t.uniformData){const d=t.uniformData[h];o[h]={location:e.getUniformLocation(i,h),value:HT(d.type,d.size)}}return new MP(i,o)}function BP(e,t,r,n,i){r.buffer.update(i)}const FP={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},lE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function OP(e){const t=e.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<t.length;s++){const o=t[s];if(r=lE[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function UP(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort((n,i)=>n.index-i.index),r}function zP(e,t){if(!e.autoManage)return{size:0,syncFunc:BP};const r=UP(e.uniforms,t),{uboElements:n,size:i}=OP(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],h=e.uniforms[a.data.name],d=a.data.name;let p=!1;for(let c=0;c<Oa.length;c++){const f=Oa[c];if(f.codeUbo&&f.test(a.data,h)){s.push(`offset = ${a.offset/4};`,Oa[c].codeUbo(a.data.name,h)),p=!0;break}}if(!p)if(a.data.size>1){const c=$T(a.data.type),f=Math.max(lE[a.data.type]/16,1),m=c/f,v=(4-m%4)%4;s.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${m}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const c=FP[a.data.type];s.push(`
                cv = ud.${d}.value;
                v = uv.${d};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let HP=0;const Nh={textureCount:0,uboCount:0};class uE{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=HP++}systemCheck(){if(!dP())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Nh.textureCount=0,Nh.uboCount=0,this.syncUniformGroup(t.uniformGroup,Nh)),i}setUniforms(t){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,r){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))}syncUniforms(t,r,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(r.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=aP(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,r){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,Nh,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(t,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=zP(t,this.shader.program.uniformData)),t.autoManage){const h=new Float32Array(a.size/4);t.buffer.update(h)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]}getSignature(t,r,n){const i=t.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const r=this.gl,n=t.program,i=LP(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}uE.extension={type:ve.RendererSystem,name:"shader"};Ae.add(uE);class Af{constructor(t){this.renderer=t}run(t){const{renderer:r}=this;r.runners.init.emit(r.options),t.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}Af.defaultOptions={hello:!1};Af.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"startup"};Ae.add(Af);function GP(e,t=[]){return t[me.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.ADD]=[e.ONE,e.ONE],t[me.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.NONE]=[0,0],t[me.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[me.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[me.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[me.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[me.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[me.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[me.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[me.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[me.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[me.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[me.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const $P=0,jP=1,WP=2,VP=3,XP=4,YP=5,dv=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=me.NONE,this._blendEq=!1,this.map=[],this.map[$P]=this.setBlend,this.map[jP]=this.setOffset,this.map[WP]=this.setCullFace,this.map[VP]=this.setDepthTest,this.map[XP]=this.setFrontFace,this.map[YP]=this.setDepthMask,this.checks=[],this.defaultState=new es,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=GP(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(dv.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(dv.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let cE=dv;cE.extension={type:ve.RendererSystem,name:"state"};Ae.add(cE);class KP extends Xu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const r=(t.priority??[]).filter(i=>t.systems[i]),n=[...r,...Object.keys(t.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(t.systems[i],i)}addRunners(...t){t.forEach(r=>{this.runners[r]=new Wn(r)})}addSystem(t,r){const n=new t(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(t,r){const n=Object.keys(this._systemsHash);t.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[t.name](r[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const ud=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=ud.defaultMaxIdle,this.checkCountMax=ud.defaultCheckCountMax,this.mode=ud.defaultMode}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==R1.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let n=0;for(let i=0;i<t.length;i++)t[i]!==null&&(t[n++]=t[i]);t.length=n}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};let On=ud;On.defaultMode=R1.AUTO;On.defaultMaxIdle=60*60;On.defaultCheckCountMax=60*10;On.extension={type:ve.RendererSystem,name:"textureGC"};Ae.add(On);class Kp{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ie.UNSIGNED_BYTE,this.internalFormat=ce.RGBA,this.samplerType=0}}function qP(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[Ie.UNSIGNED_BYTE]:{[ce.RGBA]:e.RGBA8,[ce.RGB]:e.RGB8,[ce.RG]:e.RG8,[ce.RED]:e.R8,[ce.RGBA_INTEGER]:e.RGBA8UI,[ce.RGB_INTEGER]:e.RGB8UI,[ce.RG_INTEGER]:e.RG8UI,[ce.RED_INTEGER]:e.R8UI,[ce.ALPHA]:e.ALPHA,[ce.LUMINANCE]:e.LUMINANCE,[ce.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Ie.BYTE]:{[ce.RGBA]:e.RGBA8_SNORM,[ce.RGB]:e.RGB8_SNORM,[ce.RG]:e.RG8_SNORM,[ce.RED]:e.R8_SNORM,[ce.RGBA_INTEGER]:e.RGBA8I,[ce.RGB_INTEGER]:e.RGB8I,[ce.RG_INTEGER]:e.RG8I,[ce.RED_INTEGER]:e.R8I},[Ie.UNSIGNED_SHORT]:{[ce.RGBA_INTEGER]:e.RGBA16UI,[ce.RGB_INTEGER]:e.RGB16UI,[ce.RG_INTEGER]:e.RG16UI,[ce.RED_INTEGER]:e.R16UI,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Ie.SHORT]:{[ce.RGBA_INTEGER]:e.RGBA16I,[ce.RGB_INTEGER]:e.RGB16I,[ce.RG_INTEGER]:e.RG16I,[ce.RED_INTEGER]:e.R16I},[Ie.UNSIGNED_INT]:{[ce.RGBA_INTEGER]:e.RGBA32UI,[ce.RGB_INTEGER]:e.RGB32UI,[ce.RG_INTEGER]:e.RG32UI,[ce.RED_INTEGER]:e.R32UI,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Ie.INT]:{[ce.RGBA_INTEGER]:e.RGBA32I,[ce.RGB_INTEGER]:e.RGB32I,[ce.RG_INTEGER]:e.RG32I,[ce.RED_INTEGER]:e.R32I},[Ie.FLOAT]:{[ce.RGBA]:e.RGBA32F,[ce.RGB]:e.RGB32F,[ce.RG]:e.RG32F,[ce.RED]:e.R32F,[ce.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Ie.HALF_FLOAT]:{[ce.RGBA]:e.RGBA16F,[ce.RGB]:e.RGB16F,[ce.RG]:e.RG16F,[ce.RED]:e.R16F},[Ie.UNSIGNED_SHORT_5_6_5]:{[ce.RGB]:e.RGB565},[Ie.UNSIGNED_SHORT_4_4_4_4]:{[ce.RGBA]:e.RGBA4},[Ie.UNSIGNED_SHORT_5_5_5_1]:{[ce.RGBA]:e.RGB5_A1},[Ie.UNSIGNED_INT_2_10_10_10_REV]:{[ce.RGBA]:e.RGB10_A2,[ce.RGBA_INTEGER]:e.RGB10_A2UI},[Ie.UNSIGNED_INT_10F_11F_11F_REV]:{[ce.RGB]:e.R11F_G11F_B10F},[Ie.UNSIGNED_INT_5_9_9_9_REV]:{[ce.RGB]:e.RGB9_E5},[Ie.UNSIGNED_INT_24_8]:{[ce.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Ie.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ce.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[Ie.UNSIGNED_BYTE]:{[ce.RGBA]:e.RGBA,[ce.RGB]:e.RGB,[ce.ALPHA]:e.ALPHA,[ce.LUMINANCE]:e.LUMINANCE,[ce.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Ie.UNSIGNED_SHORT_5_6_5]:{[ce.RGB]:e.RGB},[Ie.UNSIGNED_SHORT_4_4_4_4]:{[ce.RGBA]:e.RGBA},[Ie.UNSIGNED_SHORT_5_5_5_1]:{[ce.RGBA]:e.RGBA}},t}class hE{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Be,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=qP(t);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Kp(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Kp(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(t,r=0){const{gl:n}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===t&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(t.target,this.emptyTextures[t.target].texture),n[i]=null)}ensureSamplerType(t){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(!!n)for(let s=t-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==Yg.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const r=new Kp(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r}initTextureType(t,r){r.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,this.webGLVersion===2&&t.type===Ie.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type}updateTexture(t){const r=t._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(t,r),t.resource?.upload(n,t,r))r.samplerType!==Yg.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,s=t.realHeight,o=n.gl;(r.width!==i||r.height!==s||r.dirtyId<0)&&(r.width=i,r.height=s,o.texImage2D(t.target,0,r.internalFormat,i,s,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}destroyTexture(t,r){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(t);i!==-1&&Ba(this.managedTextures,i,1)}}updateTextureStyle(t){const r=t._glTextures[this.CONTEXT_UID];!r||((t.mipmap===Ti.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=Vi.CLAMP:r.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)}setStyle(t,r){const n=this.gl;if(r.mipmap&&t.mipmap!==Ti.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===vi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===vi.LINEAR){const s=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===vi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===vi.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}hE.extension={type:ve.RendererSystem,name:"texture"};Ae.add(hE);class dE{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();t._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];!a||(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,r){const n=t._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const h=a._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&s.dispose(a,r))}!n||(r||i.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}dE.extension={type:ve.RendererSystem,name:"transformFeedback"};Ae.add(dE);class kf{constructor(t){this.renderer=t}init(t){this.screen=new He(0,0,t.width,t.height),this.element=t.view||de.ADAPTER.createCanvas(),this.resolution=t.resolution||de.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,r){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}kf.defaultOptions={width:800,height:600,resolution:de.RESOLUTION,autoDensity:!1};kf.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"_view"};Ae.add(kf);de.PREFER_ENV=Do.WEBGL2;de.STRICT_TEXTURE_CACHE=!1;de.RENDER_OPTIONS={...Cf.defaultOptions,...Ef.defaultOptions,...kf.defaultOptions,...Af.defaultOptions};Object.defineProperties(de,{WRAP_MODE:{get(){return Be.defaultOptions.wrapMode},set(e){ze("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Be.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return Be.defaultOptions.scaleMode},set(e){ze("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Be.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return Be.defaultOptions.mipmap},set(e){ze("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Be.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return Be.defaultOptions.anisotropicLevel},set(e){ze("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Be.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return ze("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ge.defaultResolution},set(e){Ge.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return ze("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ge.defaultMultisample},set(e){Ge.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return Fn.defaultMaxTextures},set(e){ze("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Fn.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return Fn.defaultBatchSize},set(e){ze("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Fn.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return Fn.canUploadSameBuffer},set(e){ze("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Fn.canUploadSameBuffer=e}},GC_MODE:{get(){return On.defaultMode},set(e){ze("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),On.defaultMode=e}},GC_MAX_IDLE:{get(){return On.defaultMaxIdle},set(e){ze("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),On.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return On.defaultCheckCountMax},set(e){ze("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),On.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return zn.defaultVertexPrecision},set(e){ze("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),zn.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return zn.defaultFragmentPrecision},set(e){ze("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),zn.defaultFragmentPrecision=e}}});var zs=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(zs||{});class qp{constructor(t,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}match(t,r=null){return this.fn===t&&this.context===r}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=t?null:r,this.previous=null,r}}const $r=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qp(null,null,1/0),this.deltaMS=1/$r.targetFPMS,this.elapsedMS=1/$r.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=zs.NORMAL){return this._addListener(new qp(e,t,r))}addOnce(e,t,r=zs.NORMAL){return this._addListener(new qp(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*$r.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,$r.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!$r._shared){const e=$r._shared=new $r;e.autoStart=!0,e._protected=!0}return $r._shared}static get system(){if(!$r._system){const e=$r._system=new $r;e.autoStart=!0,e._protected=!0}return $r._system}};let Rt=$r;Rt.targetFPMS=.06;Object.defineProperties(de,{TARGET_FPMS:{get(){return Rt.targetFPMS},set(e){ze("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Rt.targetFPMS=e}}});class fE{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,zs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Rt.shared:new Rt,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}fE.extension=ve.Application;Ae.add(fE);const pE=[];Ae.handleByList(ve.Renderer,pE);function QP(e){for(const t of pE)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var ZP=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,JP=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const eI=ZP,mE=JP;class gE{constructor(t){this.renderer=t}contextChange(t){let r;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}r>=Dt.HIGH?this.multisample=Dt.HIGH:r>=Dt.MEDIUM?this.multisample=Dt.MEDIUM:r>=Dt.LOW?this.multisample=Dt.LOW:this.multisample=Dt.NONE}destroy(){}}gE.extension={type:ve.RendererSystem,name:"_multisample"};Ae.add(gE);class tI{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class vE{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);r.bindBuffer(t.type,i.buffer)}unbind(t){const{gl:r}=this;r.bindBuffer(t,null)}bindBufferBase(t,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==t){const s=t._glBuffers[i]||this.createGLBuffer(t);this.boundBufferBases[r]=t,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(t,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=t._glBuffers[s]||this.createGLBuffer(t);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==i.updateID)if(i.updateID=t._updateID,r.bindBuffer(t.type,i.buffer),i.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{const s=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,s)}}dispose(t,r){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)}createGLBuffer(t){const{CONTEXT_UID:r,gl:n}=this;return t._glBuffers[r]=new tI(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]}}vE.extension={type:ve.RendererSystem,name:"buffer"};Ae.add(vE);class xE{constructor(t){this.renderer=t}render(t,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=t),!a){const h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}xE.extension={type:ve.RendererSystem,name:"objectRenderer"};Ae.add(xE);const fv=class extends KP{constructor(e){super(),this.type=ET.WEBGL,e=Object.assign({},de.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Vn({projectionMatrix:new pt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:fv.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(ze("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=fv.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:kk()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ze("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ze("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ze("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ze("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){ze("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return ze("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){ze("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return ze("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let tl=fv;tl.extension={type:ve.Renderer,priority:1};tl.__plugins={};tl.__systems={};Ae.handleByMap(ve.RendererPlugin,tl.__plugins);Ae.handleByMap(ve.RendererSystem,tl.__systems);Ae.add(tl);class yE extends Du{constructor(t,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new Be;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,r){for(let n=0;n<this.length;n++)!t[n]||(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Du?this.addResourceAt(t[n],n):this.addResourceAt(FT(t[n],r),n))}dispose(){for(let t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)}unbind(t){super.unbind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)}load(){if(this._load)return this._load;const r=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(r).then(()=>{const{realWidth:n,realHeight:i}=this.items[0];return this.resize(n,i),Promise.resolve(this)}),this._load}}class rI extends yE{constructor(t,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Na.TEXTURE_2D_ARRAY}upload(t,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=t;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let h=0;h<i;h++){const d=o[h];s[h]<d.dirtyId&&(s[h]=d.dirtyId,d.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,d.resource.width,d.resource.height,1,r.format,n.type,d.resource.source))}return!0}}class nI extends Us{constructor(t){super(t)}static test(t){const{OffscreenCanvas:r}=globalThis;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Kl=class extends yE{constructor(e,t){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=t||{};if(e&&e.length!==Kl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:n});for(let o=0;o<Kl.SIDES;o++)this.items[o].target=Na.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,e&&this.initFromArray(e,t),i!==!1&&this.load()}bind(e){super.bind(e),e.target=Na.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Na.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const n=this.itemDirtyIds;for(let i=0;i<Kl.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,r),n[i]=s.dirtyId):n[i]<-1&&(e.gl.texImage2D(s.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),n[i]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Kl.SIDES}};let _E=Kl;_E.SIDES=6;class Ea extends Us{constructor(t,r){r=r||{};let n,i;typeof t=="string"?(n=Ea.EMPTY,i=t):(n=t,i=null),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,r)=>{if(this.url===null){t(this);return}try{const n=await de.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Kn.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(t,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(t,r,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Ea._EMPTY=Ea._EMPTY??de.ADAPTER.createCanvas(0,0),Ea._EMPTY}}const cd=class extends Us{constructor(e,t){t=t||{},super(de.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},cd.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Us.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{!this._resolve||(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${Ro()}`,s.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(e){const t=cd.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&cd.SVG_XML.test(e)}};let Bu=cd;Bu.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Bu.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const pv=class extends Us{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];Us.crossOrigin(r,n,t.crossorigin);for(let i=0;i<e.length;++i){const s=document.createElement("source");let{src:o,mime:a}=e[i];o=o||e[i];const h=o.split("?").shift().toLowerCase(),d=h.slice(h.lastIndexOf(".")+1);a=a||pv.MIME_TYPES[d]||`video/${d}`,s.src=o,s.type=a,r.appendChild(s)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=Rt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||pv.TYPES.includes(t)}};let F1=pv;F1.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];F1.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};av.push(Ea,XT,nI,F1,Bu,Yu,_E,rI);class $d{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?He.EMPTY:(t=t||new He(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,r){const{a:n,b:i,c:s,d:o,tx:a,ty:h}=t,d=n*r.x+s*r.y+a,p=i*r.x+o*r.y+h;this.minX=Math.min(this.minX,d),this.maxX=Math.max(this.maxX,d),this.minY=Math.min(this.minY,p),this.maxY=Math.max(this.maxY,p)}addQuad(t){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=t[0],a=t[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[2],a=t[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[4],a=t[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[6],a=t[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(t,r,n,i,s){this.addFrameMatrix(t.worldTransform,r,n,i,s)}addFrameMatrix(t,r,n,i,s){const o=t.a,a=t.b,h=t.c,d=t.d,p=t.tx,c=t.ty;let f=this.minX,m=this.minY,v=this.maxX,_=this.maxY,T=o*r+h*n+p,x=a*r+d*n+c;f=T<f?T:f,m=x<m?x:m,v=T>v?T:v,_=x>_?x:_,T=o*i+h*n+p,x=a*i+d*n+c,f=T<f?T:f,m=x<m?x:m,v=T>v?T:v,_=x>_?x:_,T=o*r+h*s+p,x=a*r+d*s+c,f=T<f?T:f,m=x<m?x:m,v=T>v?T:v,_=x>_?x:_,T=o*i+h*s+p,x=a*i+d*s+c,f=T<f?T:f,m=x<m?x:m,v=T>v?T:v,_=x>_?x:_,this.minX=f,this.minY=m,this.maxX=v,this.maxY=_}addVertexData(t,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let h=r;h<n;h+=2){const d=t[h],p=t[h+1];i=d<i?d:i,s=p<s?p:s,o=d>o?d:o,a=p>a?p:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)}addVerticesMatrix(t,r,n,i,s=0,o=s){const a=t.a,h=t.b,d=t.c,p=t.d,c=t.tx,f=t.ty;let m=this.minX,v=this.minY,_=this.maxX,T=this.maxY;for(let x=n;x<i;x+=2){const y=r[x],w=r[x+1],E=a*y+d*w+c,P=p*w+h*y+f;m=Math.min(m,E-s),_=Math.max(_,E+s),v=Math.min(v,P-o),T=Math.max(T,P+o)}this.minX=m,this.minY=v,this.maxX=_,this.maxY=T}addBounds(t){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,r){const n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,s=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,h=this.minY,d=this.maxX,p=this.maxY;this.minX=n<a?n:a,this.minY=i<h?i:h,this.maxX=s>d?s:d,this.maxY=o>p?o:p}}addBoundsMatrix(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,r){const n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,s=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,h=this.minY,d=this.maxX,p=this.maxY;this.minX=n<a?n:a,this.minY=i<h?i:h,this.maxX=s>d?s:d,this.maxY=o>p?o:p}}pad(t=0,r=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)}addFramePad(t,r,n,i,s,o){t-=s,r-=o,n+=s,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class mt extends Xu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Sf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new $d,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const r=Object.keys(t);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(mt.prototype,i,Object.getOwnPropertyDescriptor(t,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new He),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new He),t=this._localBoundsRect),this._localBounds||(this._localBounds=new $d);const r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)}toLocal(t,r,n,i){return r&&(t=r.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,r=0,n=1,i=1,s=0,o=0,a=0,h=0,d=0){return this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=h,this.pivot.y=d,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new iI),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*tP}set angle(t){this.transform.rotation=t*Lu}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class iI extends mt{constructor(){super(...arguments),this.sortDirty=null}}mt.prototype.displayObjectUpdateTransform=mt.prototype.updateTransform;const sI=new pt;function oI(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const mv=class extends mt{constructor(){super(),this.children=[],this.sortableChildren=mv.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Ba(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Ba(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ba(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t,i=n-r;let s;if(i>0&&i<=n){s=this.children.splice(r,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(oI),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let n=0,i=this.children.length;n<i;++n){const s=this.children[n];s.visible&&s.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==mv.prototype._render&&(r=this.getBounds(!0));const i=e.projection.transform;if(i&&(n?(n=sI.copyFrom(n),n.prepend(i)):n=i),r&&t.intersects(r,n))this._render(e);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],h=a.cullable;a.cullable=h||!this.cullArea,a.render(e),a.cullable=h}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let i=0;i<t.length;i++)t[i].enabled&&this._enabledFilters.push(t[i])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Ft.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<r.length;++n)r[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let zt=mv;zt.defaultSortableChildren=!1;zt.prototype.containerUpdateTransform=zt.prototype.updateTransform;Object.defineProperties(de,{SORTABLE_CHILDREN:{get(){return zt.defaultSortableChildren},set(e){ze("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),zt.defaultSortableChildren=e}}});var Pf=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(Pf||{});const Ol=new Fe,aI=new Uint16Array([0,1,2,0,2,3]);class qn extends zt{constructor(t){super(),this._anchor=new xi(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new et(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=me.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ae.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=aI,this.pluginName="batch",this.isSprite=!0,this._roundPixels=de.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ts(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ts(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,h=r.ty,d=this.vertexData,p=t.trim,c=t.orig,f=this._anchor;let m=0,v=0,_=0,T=0;if(p?(v=p.x-f._x*c.width,m=v+p.width,T=p.y-f._y*c.height,_=T+p.height):(v=-f._x*c.width,m=v+c.width,T=-f._y*c.height,_=T+c.height),d[0]=n*v+s*T+a,d[1]=o*T+i*v+h,d[2]=n*m+s*T+a,d[3]=o*T+i*m+h,d[4]=n*m+s*_+a,d[5]=o*_+i*m+h,d[6]=n*v+s*_+a,d[7]=o*_+i*v+h,this._roundPixels){const x=de.RESOLUTION;for(let y=0;y<d.length;++y)d[y]=Math.round(d[y]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,r=this.vertexTrimmedData,n=t.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,h=s.c,d=s.d,p=s.tx,c=s.ty,f=-i._x*n.width,m=f+n.width,v=-i._y*n.height,_=v+n.height;r[0]=o*f+h*v+p,r[1]=d*v+a*f+c,r[2]=o*m+h*v+p,r[3]=d*v+a*m+c,r[4]=o*m+h*_+p,r[5]=d*_+a*m+c,r[6]=o*f+h*_+p,r[7]=d*_+a*f+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new $d),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new He),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ol);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return Ol.x>=i&&Ol.x<i+r&&(s=-n*this.anchor.y,Ol.y>=s&&Ol.y<s+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){const n=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(t,r){const n=t instanceof ae?t:ae.from(t,r);return new qn(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const r=Ts(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const r=Ts(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ae.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Dh={willReadFrequently:!0},Te=class{static get experimentalLetterSpacingSupported(){let e=Te._experimentalLetterSpacingSupported;if(e!==void 0){const t=de.ADAPTER.getCanvasRenderingContext2D().prototype;e=Te._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,n,i,s,o,a,h){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}static measureText(e,t,r,n=Te._canvas){r=r??t.wordWrap;const i=t.toFontString(),s=Te.measureFont(i);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=n.getContext("2d",Dh);o.font=i;const h=(r?Te.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),d=new Array(h.length);let p=0;for(let v=0;v<h.length;v++){const _=Te._measureText(h[v],t.letterSpacing,o);d[v]=_,p=Math.max(p,_)}let c=p+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const f=t.lineHeight||s.fontSize+t.strokeThickness;let m=Math.max(f,s.fontSize+t.strokeThickness*2)+(h.length-1)*(f+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new Te(e,t,c,m,h,d,f+t.leading,p,s)}static _measureText(e,t,r){let n=!1;Te.experimentalLetterSpacingSupported&&(Te.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let i=r.measureText(e).width;return i>0&&(n?i-=t:i+=(Te.graphemeSegmenter(e).length-1)*t),i}static wordWrap(e,t,r=Te._canvas){const n=r.getContext("2d",Dh);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:h,whiteSpace:d}=t,p=Te.collapseSpaces(d),c=Te.collapseNewlines(d);let f=!p;const m=t.wordWrapWidth+h,v=Te.tokenize(e);for(let _=0;_<v.length;_++){let T=v[_];if(Te.isNewline(T)){if(!c){o+=Te.addLine(s),f=!p,s="",i=0;continue}T=" "}if(p){const y=Te.isBreakingSpace(T),w=Te.isBreakingSpace(s[s.length-1]);if(y&&w)continue}const x=Te.getFromCache(T,h,a,n);if(x>m)if(s!==""&&(o+=Te.addLine(s),s="",i=0),Te.canBreakWords(T,t.breakWords)){const y=Te.wordWrapSplit(T);for(let w=0;w<y.length;w++){let E=y[w],P=E,I=1;for(;y[w+I];){const N=y[w+I];if(!Te.canBreakChars(P,N,T,w,t.breakWords))E+=N;else break;P=N,I++}w+=I-1;const R=Te.getFromCache(E,h,a,n);R+i>m&&(o+=Te.addLine(s),f=!1,s="",i=0),s+=E,i+=R}}else{s.length>0&&(o+=Te.addLine(s),s="",i=0);const y=_===v.length-1;o+=Te.addLine(T,!y),f=!1,s="",i=0}else x+i>m&&(f=!1,o+=Te.addLine(s),s="",i=0),(s.length>0||!Te.isBreakingSpace(T)||f)&&(s+=T,i+=x)}return o+=Te.addLine(s,!1),o}static addLine(e,t=!0){return e=Te.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,n){let i=r[e];return typeof i!="number"&&(i=Te._measureText(e,t,n)+t,r[e]=i),i}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!Te.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Te._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Te._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const i=e[n],s=e[n+1];if(Te.isBreakingSpace(i,s)||Te.isNewline(i)){r!==""&&(t.push(r),r=""),t.push(i);continue}r+=i}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,n,i){return!0}static wordWrapSplit(e){return Te.graphemeSegmenter(e)}static measureFont(e){if(Te._fonts[e])return Te._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=Te._canvas,n=Te._context;n.font=e;const i=Te.METRICS_STRING+Te.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let o=Math.ceil(n.measureText(Te.BASELINE_SYMBOL).width);const a=Math.ceil(Te.HEIGHT_MULTIPLIER*o);if(o=o*Te.BASELINE_MULTIPLIER|0,s===0||a===0)return Te._fonts[e]=t,t;r.width=s,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,o);const h=n.getImageData(0,0,s,a).data,d=h.length,p=s*4;let c=0,f=0,m=!1;for(c=0;c<o;++c){for(let v=0;v<p;v+=4)if(h[f+v]!==255){m=!0;break}if(!m)f+=p;else break}for(t.ascent=o-c,f=d-p,m=!1,c=a;c>o;--c){for(let v=0;v<p;v+=4)if(h[f+v]!==255){m=!0;break}if(!m)f-=p;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,Te._fonts[e]=t,t}static clearMetrics(e=""){e?delete Te._fonts[e]:Te._fonts={}}static get _canvas(){if(!Te.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",Dh)?.measureText)return Te.__canvas=t,t;e=de.ADAPTER.createCanvas()}catch{e=de.ADAPTER.createCanvas()}e.width=e.height=10,Te.__canvas=e}return Te.__canvas}static get _context(){return Te.__context||(Te.__context=Te._canvas.getContext("2d",Dh)),Te.__context}};let er=Te;er.METRICS_STRING="|\xC9q\xC5";er.BASELINE_SYMBOL="M";er.BASELINE_MULTIPLIER=1.4;er.HEIGHT_MULTIPLIER=2;er.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(r=>r.segment)}return e=>[...e]})();er.experimentalLetterSpacing=!1;er._fonts={};er._newlines=[10,13];er._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const lI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ql=class{constructor(e){this.styleID=0,this.reset(),Zp(this,e,e)}clone(){const e={};return Zp(e,this,ql.defaultStyle),new ql(e)}reset(){Zp(this,ql.defaultStyle,ql.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Qp(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Qp(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){uI(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Qp(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let n=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!lI.includes(n)&&(n=`"${n}"`),t[r]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let Yt=ql;Yt.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Pf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Qp(e){const t=et.shared;return Array.isArray(e)?e.map(r=>t.setValue(r).toHex()):t.setValue(e).toHex()}function uI(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function Zp(e,t,r){for(const n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const cI={texture:!0,children:!1,baseTexture:!0},gv=class extends qn{constructor(e,t,r){let n=!1;r||(r=de.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=ae.from(r);i.orig=new He,i.trim=new He,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=gv.defaultResolution??de.RESOLUTION,this._autoResolution=gv.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return er.experimentalLetterSpacing}static set experimentalLetterSpacing(e){ze("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),er.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,n=er.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,o=n.lines,a=n.lineHeight,h=n.lineWidths,d=n.maxLineWidth,p=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let c,f;const m=t.dropShadow?2:1;for(let v=0;v<m;++v){const _=t.dropShadow&&v===0,T=_?Math.ceil(Math.max(1,s)+t.padding*2):0,x=T*this._resolution;if(_){r.fillStyle="black",r.strokeStyle="black";const w=t.dropShadowColor,E=t.dropShadowBlur*this._resolution,P=t.dropShadowDistance*this._resolution;r.shadowColor=et.shared.setValue(w).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=E,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*P,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*P+x}else r.fillStyle=this._generateFillStyle(t,o,n),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let y=(a-p.fontSize)/2;a-p.fontSize<0&&(y=0);for(let w=0;w<o.length;w++)c=t.strokeThickness/2,f=t.strokeThickness/2+w*a+p.ascent+y,t.align==="right"?c+=d-h[w]:t.align==="center"&&(c+=(d-h[w])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[w],c+t.padding,f+t.padding-T,!0),t.fill&&this.drawLetterSpacing(o[w],c+t.padding,f+t.padding-T)}this.updateTexture()}drawLetterSpacing(e,t,r,n=!1){const s=this._style.letterSpacing;let o=!1;if(er.experimentalLetterSpacingSupported&&(er.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let a=t;const h=er.graphemeSegmenter(e);let d=this.context.measureText(e).width,p=0;for(let c=0;c<h.length;++c){const f=h[c];n?this.context.strokeText(f,a,r):this.context.fillText(f,a,r);let m="";for(let v=c+1;v<h.length;++v)m+=h[v];p=this.context.measureText(m).width,a+=d-p+s,d=p}}updateTexture(){const e=this.canvas;if(this._style.trim){const s=jk(e);s.data&&(e.width=s.width,e.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,r=this._style,n=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let i;const s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-s-o*2,h=this.canvas.height/this._resolution-s-o*2,d=n.slice(),p=e.fillGradientStops.slice();if(!p.length){const c=d.length+1;for(let f=1;f<c;++f)p.push(f/c)}if(d.unshift(n[0]),p.unshift(0),d.push(n[n.length-1]),p.push(1),e.fillGradientType===Pf.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,h+o);const c=r.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const m=r.lineHeight*(f-1)+c,v=r.lineHeight*f;let _=v;f>0&&m>v&&(_=(v+m)/2);const T=v+c,x=r.lineHeight*(f+1);let y=T;f+1<t.length&&x<T&&(y=(T+x)/2);const w=(y-_)/h;for(let E=0;E<d.length;E++){let P=0;typeof p[E]=="number"?P=p[E]:P=E/d.length;let I=Math.min(1,Math.max(0,_/h+P*w));I=Number(I.toFixed(5)),i.addColorStop(I,d[E])}}}else{i=this.context.createLinearGradient(o,h/2,a+o,h/2);const c=d.length+1;let f=1;for(let m=0;m<d.length;m++){let v;typeof p[m]=="number"?v=p[m]:v=f/c,i.addColorStop(v,d[m]),f++}}return i}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},cI,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Ts(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Ts(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Yt?this._style=e:this._style=new Yt(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Ku=gv;Ku.defaultAutoResolution=!0;class jd{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class hd{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const d in a){const p=a[d].split("="),c=p[0],f=p[1].replace(/"/gm,""),m=parseFloat(f),v=isNaN(m)?f:m;h[c]=v}n[o].push(h)}const i=new jd;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class vv{static test(t){const r=t;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const r=new jd,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),h=t.getElementsByTagName("distanceField");for(let d=0;d<n.length;d++)r.info.push({face:n[d].getAttribute("face"),size:parseInt(n[d].getAttribute("size"),10)});for(let d=0;d<i.length;d++)r.common.push({lineHeight:parseInt(i[d].getAttribute("lineHeight"),10)});for(let d=0;d<s.length;d++)r.page.push({id:parseInt(s[d].getAttribute("id"),10)||0,file:s[d].getAttribute("file")});for(let d=0;d<o.length;d++){const p=o[d];r.char.push({id:parseInt(p.getAttribute("id"),10),page:parseInt(p.getAttribute("page"),10)||0,x:parseInt(p.getAttribute("x"),10),y:parseInt(p.getAttribute("y"),10),width:parseInt(p.getAttribute("width"),10),height:parseInt(p.getAttribute("height"),10),xoffset:parseInt(p.getAttribute("xoffset"),10),yoffset:parseInt(p.getAttribute("yoffset"),10),xadvance:parseInt(p.getAttribute("xadvance"),10)})}for(let d=0;d<a.length;d++)r.kerning.push({first:parseInt(a[d].getAttribute("first"),10),second:parseInt(a[d].getAttribute("second"),10),amount:parseInt(a[d].getAttribute("amount"),10)});for(let d=0;d<h.length;d++)r.distanceField.push({fieldType:h[d].getAttribute("fieldType"),distanceRange:parseInt(h[d].getAttribute("distanceRange"),10)});return r}}class xv{static test(t){return typeof t=="string"&&t.includes("<font>")?vv.test(de.ADAPTER.parseXML(t)):!1}static parse(t){return vv.parse(de.ADAPTER.parseXML(t))}}const Jp=[hd,vv,xv];function hI(e){for(let t=0;t<Jp.length;t++)if(Jp[t].test(e))return Jp[t];return null}function dI(e,t,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const h=r.dropShadow?r.dropShadowDistance:0,d=r.padding||0,p=e.width/n-h-d*2,c=e.height/n-h-d*2,f=o.slice(),m=r.fillGradientStops.slice();if(!m.length){const v=f.length+1;for(let _=1;_<v;++_)m.push(_/v)}if(f.unshift(o[0]),m.unshift(0),f.push(o[o.length-1]),m.push(1),r.fillGradientType===Pf.LINEAR_VERTICAL){a=t.createLinearGradient(p/2,d,p/2,c+d);let v=0;const T=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let x=0;x<i.length;x++){const y=s.lineHeight*x;for(let w=0;w<f.length;w++){let E=0;typeof m[w]=="number"?E=m[w]:E=w/f.length;const P=y/c+E*T;let I=Math.max(v,P);I=Math.min(I,1),a.addColorStop(I,f[w]),v=I}}}else{a=t.createLinearGradient(d,c/2,p+d,c/2);const v=f.length+1;let _=1;for(let T=0;T<f.length;T++){let x;typeof m[T]=="number"?x=m[T]:x=_/v,a.addColorStop(x,f[T]),_++}}return a}function fI(e,t,r,n,i,s,o){const a=r.text,h=r.fontProperties;t.translate(n,i),t.scale(s,s);const d=o.strokeThickness/2,p=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=dI(e,t,o,s,[a],r),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,f=o.dropShadowBlur*s,m=o.dropShadowDistance*s;t.shadowColor=et.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*m,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,d,p+r.lineHeight-h.descent),o.fill&&t.fillText(a,d,p+r.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function dd(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function bE(e){return Array.from?Array.from(e):e.split("")}function pI(e){typeof e=="string"&&(e=[e]);const t=[];for(let r=0,n=e.length;r<n;r++){const i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,h=o;a<=h;a++)t.push(String.fromCharCode(a))}else t.push(...bE(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Mn=class{constructor(e,t,r){const[n]=e.info,[i]=e.common,[s]=e.page,[o]=e.distanceField,a=Fs(s.file),h={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=h;for(let d=0;d<e.page.length;d++){const{id:p,file:c}=e.page[d];h[p]=t instanceof Array?t[d]:t[c],o?.fieldType&&o.fieldType!=="none"&&(h[p].baseTexture.alphaMode=Kn.NO_PREMULTIPLIED_ALPHA,h[p].baseTexture.mipmap=Ti.OFF)}for(let d=0;d<e.char.length;d++){const{id:p,page:c}=e.char[d];let{x:f,y:m,width:v,height:_,xoffset:T,yoffset:x,xadvance:y}=e.char[d];f/=a,m/=a,v/=a,_/=a,T/=a,x/=a,y/=a;const w=new He(f+h[c].frame.x/a,m+h[c].frame.y/a,v,_);this.chars[p]={xOffset:T,yOffset:x,xAdvance:y,kerning:{},texture:new ae(h[c].baseTexture,w),page:c}}for(let d=0;d<e.kerning.length;d++){let{first:p,second:c,amount:f}=e.kerning[d];p/=a,c/=a,f/=a,this.chars[c]&&(this.chars[c].kerning[p]=f)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let n;if(e instanceof jd)n=e;else{const s=hI(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}t instanceof ae&&(t=[t]);const i=new Mn(n,t,r);return Mn.available[i.font]=i,i}static uninstall(e){const t=Mn.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Mn.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:o,textureHeight:a,...h}=Object.assign({},Mn.defaultOptions,r),d=pI(n),p=t instanceof Yt?t:new Yt(t),c=o,f=new jd;f.info[0]={face:p.fontFamily,size:p.fontSize},f.common[0]={lineHeight:p.fontSize};let m=0,v=0,_,T,x,y=0;const w=[];for(let P=0;P<d.length;P++){_||(_=de.ADAPTER.createCanvas(),_.width=o,_.height=a,T=_.getContext("2d"),x=new Be(_,{resolution:s,...h}),w.push(new ae(x)),f.page.push({id:w.length-1,file:""}));const I=d[P],R=er.measureText(I,p,!1,_),N=R.width,D=Math.ceil(R.height),k=Math.ceil((p.fontStyle==="italic"?2:1)*N);if(v>=a-D*s){if(v===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${I}')`);--P,_=null,T=null,x=null,v=0,m=0,y=0;continue}if(y=Math.max(D+R.fontProperties.descent,y),k*s+m>=c){if(m===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${p.fontFamily}', fontSize: ${p.fontSize}px, char: '${I}')`);--P,v+=y*s,v=Math.ceil(v),m=0,y=0;continue}fI(_,T,R,m,v,s,p);const M=dd(R.text);f.char.push({id:M,page:w.length-1,x:m/s,y:v/s,width:k,height:D,xoffset:0,yoffset:0,xadvance:N-(p.dropShadow?p.dropShadowDistance:0)-(p.stroke?p.strokeThickness:0)}),m+=(k+2*i)*s,m=Math.ceil(m)}for(let P=0,I=d.length;P<I;P++){const R=d[P];for(let N=0;N<I;N++){const D=d[N],k=T.measureText(R).width,M=T.measureText(D).width,F=T.measureText(R+D).width-(k+M);F&&f.kerning.push({first:dd(R),second:dd(D),amount:F})}}const E=new Mn(f,w,!0);return Mn.available[e]!==void 0&&Mn.uninstall(e),Mn.available[e]=E,E}};let Ir=Mn;Ir.ALPHA=[["a","z"],["A","Z"]," "];Ir.NUMERIC=[["0","9"]];Ir.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];Ir.ASCII=[[" ","~"]];Ir.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Mn.ALPHANUMERIC};Ir.available={};class mI{constructor(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const em=new Fe,Ab=new Fa,wE=class extends zt{constructor(e,t,r,n=Un.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||es.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=de.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Un.TRIANGLES&&t.length<wE.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],r=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,h=i.d,d=i.tx,p=i.ty,c=this.vertexData;for(let f=0;f<c.length/2;f++){const m=r[f*2],v=r[f*2+1];c[f*2]=s*m+a*v+d,c[f*2+1]=o*m+h*v+p}if(this._roundPixels){const f=de.RESOLUTION;for(let m=0;m<c.length;++m)c[m]=Math.round(c[m]*f)/f}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new mI(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,em);const t=this.geometry.getBuffer("aVertexPosition").data,r=Ab.points,n=this.geometry.getIndex().data,i=n.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=n[o]*2,h=n[o+1]*2,d=n[o+2]*2;if(r[0]=t[a],r[1]=t[a+1],r[2]=t[h],r[3]=t[h+1],r[4]=t[d],r[5]=t[d+1],Ab.contains(em.x,em.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Xa=wE;Xa.BATCHABLE_SIZE=100;class If extends Os{constructor(t,r,n){super();const i=new Pt(t),s=new Pt(r,!0),o=new Pt(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Ie.FLOAT).addAttribute("aTextureCoord",s,2,!1,Ie.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var gI=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Fu extends wi{constructor(t,r){const n={uSampler:t,alpha:1,uTextureMatrix:pt.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||zn.from(vI,gI),n),this._colorDirty=!1,this.uvMatrix=new B1(t),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new et(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const r=this.texture.baseTexture.alphaMode;et.shared.setValue(this._tintColor).premultiply(this._alpha,r).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var xI=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,yI=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const kb=[],Pb=[],Ib=[],SE=class extends zt{constructor(e,t={}){super();const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},SE.styleDefaults,t);if(!Ir.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new et(n),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new xi(()=>{this.dirty=!0},this,0,0),this._roundPixels=de.ROUND_PIXELS,this.dirty=!0,this._resolution=de.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=Ir.available[this._fontName],t=this.fontSize,r=t/e.size,n=new Fe,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=bE(a),d=this._maxWidth*e.size/t,p=e.distanceFieldType==="none"?kb:Pb;let c=null,f=0,m=0,v=0,_=-1,T=0,x=0,y=0,w=0;for(let k=0;k<h.length;k++){const M=h[k],z=dd(M);if(/(?:\s)/.test(M)&&(_=k,T=f,w++),M==="\r"||M===`
`){s.push(f),o.push(-1),m=Math.max(m,f),++v,++x,n.x=0,n.y+=e.lineHeight,c=null,w=0;continue}const F=e.chars[z];if(!F)continue;c&&F.kerning[c]&&(n.x+=F.kerning[c]);const U=Ib.pop()||{texture:ae.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Fe};U.texture=F.texture,U.line=v,U.charCode=z,U.position.x=Math.round(n.x+F.xOffset+this._letterSpacing/2),U.position.y=Math.round(n.y+F.yOffset),U.prevSpaces=w,i.push(U),f=U.position.x+Math.max(F.xAdvance-F.xOffset,F.texture.orig.width),n.x+=F.xAdvance+this._letterSpacing,y=Math.max(y,F.yOffset+F.texture.height),c=z,_!==-1&&d>0&&n.x>d&&(++x,Ba(i,1+_-x,1+k-_),k=_,_=-1,s.push(T),o.push(i.length>0?i[i.length-1].prevSpaces:0),m=Math.max(m,T),v++,n.x=0,n.y+=e.lineHeight,c=null,w=0)}const E=h[h.length-1];E!=="\r"&&E!==`
`&&(/(?:\s)/.test(E)&&(f=T),s.push(f),m=Math.max(m,f),o.push(-1));const P=[];for(let k=0;k<=v;k++){let M=0;this._align==="right"?M=m-s[k]:this._align==="center"?M=(m-s[k])/2:this._align==="justify"&&(M=o[k]<0?0:(m-s[k])/o[k]),P.push(M)}const I=i.length,R={},N=[],D=this._activePagesMeshData;p.push(...D);for(let k=0;k<I;k++){const M=i[k].texture,z=M.baseTexture.uid;if(!R[z]){let F=p.pop();if(!F){const Y=new If;let J,Q;e.distanceFieldType==="none"?(J=new Fu(ae.EMPTY),Q=me.NORMAL):(J=new Fu(ae.EMPTY,{program:zn.from(yI,xI),uniforms:{uFWidth:0}}),Q=me.NORMAL_NPM);const O=new Xa(Y,J);O.blendMode=Q,F={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:O,vertices:null,uvs:null,indices:null}}F.index=0,F.indexCount=0,F.vertexCount=0,F.uvsCount=0,F.total=0;const{_textureCache:U}=this;U[z]=U[z]||new ae(M.baseTexture),F.mesh.texture=U[z],F.mesh.tint=this._tintColor.value,N.push(F),R[z]=F}R[z].total++}for(let k=0;k<D.length;k++)N.includes(D[k])||this.removeChild(D[k].mesh);for(let k=0;k<N.length;k++)N[k].mesh.parent!==this&&this.addChild(N[k].mesh);this._activePagesMeshData=N;for(const k in R){const M=R[k],z=M.total;if(!(M.indices?.length>6*z)||M.vertices.length<Xa.BATCHABLE_SIZE*2)M.vertices=new Float32Array(4*2*z),M.uvs=new Float32Array(4*2*z),M.indices=new Uint16Array(6*z);else{const F=M.total,U=M.vertices;for(let Y=F*4*2;Y<U.length;Y++)U[Y]=0}M.mesh.size=6*z}for(let k=0;k<I;k++){const M=i[k];let z=M.position.x+P[M.line]*(this._align==="justify"?M.prevSpaces:1);this._roundPixels&&(z=Math.round(z));const F=z*r,U=M.position.y*r,Y=M.texture,J=R[Y.baseTexture.uid],Q=Y.frame,O=Y._uvs,L=J.index++;J.indices[L*6+0]=0+L*4,J.indices[L*6+1]=1+L*4,J.indices[L*6+2]=2+L*4,J.indices[L*6+3]=0+L*4,J.indices[L*6+4]=2+L*4,J.indices[L*6+5]=3+L*4,J.vertices[L*8+0]=F,J.vertices[L*8+1]=U,J.vertices[L*8+2]=F+Q.width*r,J.vertices[L*8+3]=U,J.vertices[L*8+4]=F+Q.width*r,J.vertices[L*8+5]=U+Q.height*r,J.vertices[L*8+6]=F,J.vertices[L*8+7]=U+Q.height*r,J.uvs[L*8+0]=O.x0,J.uvs[L*8+1]=O.y0,J.uvs[L*8+2]=O.x1,J.uvs[L*8+3]=O.y1,J.uvs[L*8+4]=O.x2,J.uvs[L*8+5]=O.y2,J.uvs[L*8+6]=O.x3,J.uvs[L*8+7]=O.y3}this._textWidth=m*r,this._textHeight=(n.y+e.lineHeight)*r;for(const k in R){const M=R[k];if(this.anchor.x!==0||this.anchor.y!==0){let Y=0;const J=this._textWidth*this.anchor.x,Q=this._textHeight*this.anchor.y;for(let O=0;O<M.total;O++)M.vertices[Y++]-=J,M.vertices[Y++]-=Q,M.vertices[Y++]-=J,M.vertices[Y++]-=Q,M.vertices[Y++]-=J,M.vertices[Y++]-=Q,M.vertices[Y++]-=J,M.vertices[Y++]-=Q}this._maxLineHeight=y*r;const z=M.mesh.geometry.getBuffer("aVertexPosition"),F=M.mesh.geometry.getBuffer("aTextureCoord"),U=M.mesh.geometry.getIndex();z.data=M.vertices,F.data=M.uvs,U.data=M.indices,z.update(),F.update(),U.update()}for(let k=0;k<i.length;k++)Ib.push(i[k]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:n}=Ir.available[this._fontName];if(r!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,h=Math.sqrt(i*i+s*s),d=Math.sqrt(o*o+a*a),p=(Math.abs(h)+Math.abs(d))/2,c=this.fontSize/n,f=e._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=p*t*c*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Ir.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Ir.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Ir.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=Ir.available[this._fontName].distanceFieldType==="none"?kb:Pb;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=ae.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let TE=SE;TE.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Rb={loader:ve.LoadParser,resolver:ve.ResolveParser,cache:ve.CacheParser,detection:ve.DetectionParser};Ae.handle(ve.Asset,e=>{const t=e.ref;Object.entries(Rb).filter(([r])=>!!t[r]).forEach(([r,n])=>Ae.add(Object.assign(t[r],{extension:t[r].extension??n})))},e=>{const t=e.ref;Object.keys(Rb).filter(r=>!!t[r]).forEach(r=>Ae.remove(t[r]))});class _I{constructor(t,r=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(t){t.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function qu(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Bo(e,t){const r=e.split("?")[0],n=fr.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const Xi=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(r=>typeof r=="string"?t(r):r):e),yv=(e,t)=>{const r=t.split("?")[1];return r&&(e+=`?${r}`),e};function EE(e,t,r,n,i){const s=t[r];for(let o=0;o<s.length;o++){const a=s[o];r<t.length-1?EE(e.replace(n[r],a),t,r+1,n,i):i.push(e.replace(n[r],a))}}function bI(e){const t=/\{(.*?)\}/g,r=e.match(t),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),EE(e,i,0,r,n)}else n.push(e);return n}const Wd=e=>!Array.isArray(e);class wI{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const r=this._cache.get(t);return r||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),r}set(t,r){const n=Xi(t);let i;for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];if(h.test(r)){i=h.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof ae){const a=r;n.forEach(h=>{a.baseTexture!==ae.EMPTY.baseTexture&&Be.addToCache(a.baseTexture,h),ae.addToCache(a,h)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const r=this._cacheMap.get(t);r.cacheKeys.forEach(i=>{this._cache.delete(i)}),r.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Ul=new wI;class SI{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,r,n)=>(this._parsersValidated=!1,t[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,r){const n={promise:null,parser:null};return n.promise=(async()=>{let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${t}`)),!s){for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];if(a.load&&a.test?.(t,r,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(t,r,this),n.parser=s;for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];a.parse&&a.parse&&await a.testParse?.(i,r,this)&&(i=await a.parse(i,r,this)||i,n.parser=a)}return i})(),n}async load(t,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Wd(t),o=Xi(t,d=>({src:d})),a=o.length,h=o.map(async d=>{const p=fr.toAbsolute(d.src);if(!i[d.src])try{this.promiseCache[p]||(this.promiseCache[p]=this._getLoadPromiseAndParser(p,d)),i[d.src]=await this.promiseCache[p].promise,r&&r(++n/a)}catch(c){throw delete this.promiseCache[p],delete i[d.src],new Error(`[Loader.load] Failed to load ${p}.
${c}`)}});return await Promise.all(h),s?i[o[0].src]:i}async unload(t){const n=Xi(t,i=>({src:i})).map(async i=>{const s=fr.toAbsolute(i.src),o=this.promiseCache[s];if(o){const a=await o.promise;o.parser?.unload?.(a,i,this),delete this.promiseCache[s]}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,r)=>(t[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...t,[r.name]:r}),{})}}var Pi=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Pi||{});const TI=".json",EI="application/json",CI={extension:{type:ve.LoadParser,priority:Pi.Low},name:"loadJson",test(e){return qu(e,EI)||Bo(e,TI)},async load(e){return await(await de.ADAPTER.fetch(e)).json()}};Ae.add(CI);const AI=".txt",kI="text/plain",PI={name:"loadTxt",extension:{type:ve.LoadParser,priority:Pi.Low},test(e){return qu(e,kI)||Bo(e,AI)},async load(e){return await(await de.ADAPTER.fetch(e)).text()}};Ae.add(PI);const II=["normal","bold","100","200","300","400","500","600","700","800","900"],RI=[".ttf",".otf",".woff",".woff2"],MI=["font/ttf","font/otf","font/woff","font/woff2"],NI=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function DI(e){const t=fr.extname(e),i=fr.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(NI)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const LI={extension:{type:ve.LoadParser,priority:Pi.Low},name:"loadWebFont",test(e){return qu(e,MI)||Bo(e,RI)},async load(e,t){const r=de.ADAPTER.getFontFaceSet();if(r){const n=[],i=t.data?.family??DI(e),s=t.data?.weights?.filter(a=>II.includes(a))??["normal"],o=t.data??{};for(let a=0;a<s.length;a++){const h=s[a],d=new FontFace(i,`url(${encodeURI(e)})`,{...o,weight:h});await d.load(),r.add(d),n.push(d)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>de.ADAPTER.getFontFaceSet().delete(t))}};Ae.add(LI);let Mb=0,tm;const BI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",FI={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${BI}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},OI={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let rm;class UI{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const r=URL.createObjectURL(new Blob([FI.code],{type:"application/javascript"})),n=new Worker(r);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(r),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){tm===void 0&&(tm=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<tm&&(rm||(rm=URL.createObjectURL(new Blob([OI.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(rm),t.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:t,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const r=this.queue.pop(),n=r.id;this.resolveHash[Mb]={resolve:r.resolve,reject:r.reject},t.postMessage({data:r.arguments,uuid:Mb++,id:n})}}const Nb=new UI;function Rf(e,t,r){const n=new ae(e);return n.baseTexture.on("dispose",()=>{delete t.promiseCache[r]}),n}const zI=[".jpeg",".jpg",".png",".webp",".avif"],HI=["image/jpeg","image/png","image/webp","image/avif"];async function GI(e){const t=await de.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}const Mf={name:"loadTextures",extension:{type:ve.LoadParser,priority:Pi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return qu(e,HI)||Bo(e,zI)},async load(e,t,r){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Nb.isImageBitmapSupported()?n=await Nb.loadImageBitmap(e):n=await GI(e):n=await new Promise(s=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=e,n.complete?s(n):n.onload=()=>{s(n)}});const i=new Be(n,{resolution:Fs(e),...t.data});return i.resource.src=e,Rf(i,r,e)},unload(e){e.destroy(!0)}};Ae.add(Mf);const $I=".svg",jI="image/svg+xml",WI={extension:{type:ve.LoadParser,priority:Pi.High},name:"loadSVG",test(e){return qu(e,jI)||Bo(e,$I)},async testParse(e){return Bu.test(e)},async parse(e,t,r){const n=new Bu(e,t?.data?.resourceOptions);await n.load();const i=new Be(n,{resolution:Fs(e),...t?.data});return i.resource.src=e,Rf(i,r,e)},async load(e,t){return(await de.ADAPTER.fetch(e)).text()},unload:Mf.unload};Ae.add(WI);class VI{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,r)=>`${t}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(t,r)=>r.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const r=t;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(t,r){const n=[];Array.isArray(r)?r.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(t,i.name);n.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{n.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(r).forEach(i=>{n.push(this._createBundleAssetId(t,i)),this.add([i,this._createBundleAssetId(t,i)],r[i])}),this._bundles[t]=n}add(t,r,n){const i=Xi(t);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(r)||(typeof r=="string"?r=bI(r):r=[r]);const s=r.map(o=>{let a=o;if(typeof o=="string"){let h=!1;for(let d=0;d<this._parsers.length;d++){const p=this._parsers[d];if(p.test(o)){a=p.parse(o),h=!0;break}}h||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=fr.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??n,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const r=Wd(t);t=Xi(t);const n={};return t.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const h in o){const d=o[h];a[this._extractAssetIdFromBundle(i,h)]=d}n[i]=a}}),r?n[t[0]]:n}resolveUrl(t){const r=this.resolve(t);if(typeof t!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(t){const r=Wd(t);t=Xi(t);const n={};return t.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(h=>{o.params[h].forEach(d=>{const p=s.filter(c=>c[h]?c[h]===d:!1);p.length&&(s=p)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=fr.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}n[i]=this._resolverHash[i]}),r?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let r=0;r<t.length;r++){const n=t[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const r=/\?/.test(t)?"&":"?";return`${t}${r}${this._defaultSearchParams}`}}class XI{constructor(){this._detections=[],this._initialized=!1,this.resolver=new VI,this.loader=new SI,this.cache=Ul,this._backgroundLoader=new _I(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let s=t.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const r=t.texturePreference?.resolution??1,n=typeof r=="number"?[r]:r;let i=[];if(t.texturePreference?.format){const s=t.texturePreference?.format;i=typeof s=="string"?[s]:s;for(const o of this._detections)await o.test()||(i=await o.remove(i))}else for(const s of this._detections)await s.test()&&(i=await s.add(i));this.resolver.prefer({params:{format:i,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,r,n){this.resolver.add(t,r,n)}async load(t,r){this._initialized||await this.init();const n=Wd(t),i=Xi(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(t,r){this.resolver.addBundle(t,r)}async loadBundle(t,r){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const i=this.resolver.resolveBundle(t),s={},o=Object.keys(i);let a=0,h=0;const d=()=>{r?.(++a/h)},p=o.map(c=>{const f=i[c];return h+=Object.keys(f).length,this._mapLoadToResolve(f,d).then(m=>{s[c]=m})});return await Promise.all(p),n?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolveBundle(t);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ul.get(t);const r={};for(let n=0;n<t.length;n++)r[n]=Ul.get(t[n]);return r}async _mapLoadToResolve(t,r){const n=Object.values(t),i=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,h)=>{const d=s[a.src],p=[a.src];a.alias&&p.push(...a.alias),o[i[h]]=d,Ul.set(p,d)}),o}async unload(t){this._initialized||await this.init();const r=Xi(t).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=Xi(t);const r=this.resolver.resolveBundle(t),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(t){const r=Object.values(t);r.forEach(n=>{Ul.remove(n.src)}),await this.loader.unload(r)}get detections(){return this._detections}get preferWorkers(){return Mf.config.preferWorkers}set preferWorkers(t){ze("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(r=>{!r.config||Object.keys(r.config).filter(n=>n in t).forEach(n=>{r.config[n]=t[n]})})}}const Lh=new XI;Ae.handleByList(ve.LoadParser,Lh.loader.parsers).handleByList(ve.ResolveParser,Lh.resolver.parsers).handleByList(ve.CacheParser,Lh.cache.parsers).handleByList(ve.DetectionParser,Lh.detections);const YI={extension:ve.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof ae),getCacheableAssets:(e,t)=>{const r={};return e.forEach(n=>{t.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};Ae.add(YI);const KI={extension:{type:ve.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await de.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};Ae.add(KI);const qI={extension:{type:ve.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await de.ADAPTER.fetch(e).then(r=>r.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};Ae.add(qI);const Db=["png","jpg","jpeg"],QI={extension:{type:ve.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Db],remove:async e=>e.filter(t=>!Db.includes(t))};Ae.add(QI);const ZI={extension:ve.ResolveParser,test:Mf.test,parse:e=>({resolution:parseFloat(de.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};Ae.add(ZI);const JI=[".xml",".fnt"],eR={extension:{type:ve.LoadParser,priority:Pi.Normal},name:"loadBitmapFont",test(e){return JI.includes(fr.extname(e).toLowerCase())},async testParse(e){return hd.test(e)||xv.test(e)},async parse(e,t,r){const n=hd.test(e)?hd.parse(e):xv.parse(e),{src:i}=t,{page:s}=n,o=[];for(let d=0;d<s.length;++d){const p=s[d].file;let c=fr.join(fr.dirname(i),p);c=yv(c,i),o.push(c)}const a=await r.load(o),h=o.map(d=>a[d]);return Ir.install(n,h,!0)},async load(e,t){return(await de.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};Ae.add(eR);const Vd={build(e){const t=e.points;let r,n,i,s,o,a;if(e.type===tr.CIRC){const v=e.shape;r=v.x,n=v.y,o=a=v.radius,i=s=0}else if(e.type===tr.ELIP){const v=e.shape;r=v.x,n=v.y,o=v.width,a=v.height,i=s=0}else{const v=e.shape,_=v.width/2,T=v.height/2;r=v.x+_,n=v.y+T,o=a=Math.max(0,Math.min(v.radius,Math.min(_,T))),i=_-o,s=T-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){t.length=0;return}const h=Math.ceil(2.3*Math.sqrt(o+a)),d=h*8+(i?4:0)+(s?4:0);if(t.length=d,d===0)return;if(h===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+s,t[2]=t[4]=r-i,t[5]=t[7]=n-s;return}let p=0,c=h*4+(i?2:0)+2,f=c,m=d;{const v=i+o,_=s,T=r+v,x=r-v,y=n+_;if(t[p++]=T,t[p++]=y,t[--c]=y,t[--c]=x,s){const w=n-_;t[f++]=x,t[f++]=w,t[--m]=w,t[--m]=T}}for(let v=1;v<h;v++){const _=Math.PI/2*(v/h),T=i+Math.cos(_)*o,x=s+Math.sin(_)*a,y=r+T,w=r-T,E=n+x,P=n-x;t[p++]=y,t[p++]=E,t[--c]=E,t[--c]=w,t[f++]=w,t[f++]=P,t[--m]=P,t[--m]=y}{const v=i,_=s+a,T=r+v,x=r-v,y=n+_,w=n-_;t[p++]=T,t[p++]=y,t[--m]=w,t[--m]=T,i&&(t[p++]=x,t[p++]=y,t[--m]=w,t[--m]=x)}},triangulate(e,t){const r=e.points,n=t.points,i=t.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,h;if(e.type!==tr.RREC){const p=e.shape;a=p.x,h=p.y}else{const p=e.shape;a=p.x+p.width/2,h=p.y+p.height/2}const d=e.matrix;n.push(e.matrix?d.a*a+d.c*h+d.tx:a,e.matrix?d.b*a+d.d*h+d.ty:h),s++,n.push(r[0],r[1]);for(let p=2;p<r.length;p+=2)n.push(r[p],r[p+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function Lb(e,t=!1){const r=e.length;if(r<6)return;let n=0;for(let i=0,s=e[r-2],o=e[r-1];i<r;i+=2){const a=e[i],h=e[i+1];n+=(a-s)*(h+o),s=a,o=h}if(!t&&n>0||t&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,h=s,d=s+1;[e[o],e[h]]=[e[h],e[o]],[e[a],e[d]]=[e[d],e[a]]}}}const CE={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const n=e.holes,i=t.points,s=t.indices;if(r.length>=6){Lb(r,!1);const o=[];for(let d=0;d<n.length;d++){const p=n[d];Lb(p.points,!0),o.push(r.length/2),r=r.concat(p.points)}const a=M1.exports(r,o,2);if(!a)return;const h=i.length/2;for(let d=0;d<a.length;d+=3)s.push(a[d]+h),s.push(a[d+1]+h),s.push(a[d+2]+h);for(let d=0;d<r.length;d++)i.push(r[d])}}},tR={build(e){const t=e.shape,r=t.x,n=t.y,i=t.width,s=t.height,o=e.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(e,t){const r=e.points,n=t.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},rR={build(e){Vd.build(e)},triangulate(e,t){Vd.triangulate(e,t)}};var Dn=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Dn||{}),_o=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(_o||{});const Ya={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Bb{static curveTo(t,r,n,i,s,o){const a=o[o.length-2],d=o[o.length-1]-r,p=a-t,c=i-r,f=n-t,m=Math.abs(d*f-p*c);if(m<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==r)&&o.push(t,r),null;const v=d*d+p*p,_=c*c+f*f,T=d*c+p*f,x=s*Math.sqrt(v)/m,y=s*Math.sqrt(_)/m,w=x*T/v,E=y*T/_,P=x*f+y*p,I=x*c+y*d,R=p*(y+w),N=d*(y+w),D=f*(x+E),k=c*(x+E),M=Math.atan2(N-I,R-P),z=Math.atan2(k-I,D-P);return{cx:P+t,cy:I+r,radius:s,startAngle:M,endAngle:z,anticlockwise:p*c>f*d}}static arc(t,r,n,i,s,o,a,h,d){const p=a-o,c=Ya._segmentsCount(Math.abs(p)*s,Math.ceil(Math.abs(p)/Gd)*40),f=p/(c*2),m=f*2,v=Math.cos(f),_=Math.sin(f),T=c-1,x=T%1/T;for(let y=0;y<=T;++y){const w=y+x*y,E=f+o+m*w,P=Math.cos(E),I=-Math.sin(E);d.push((v*P+_*I)*s+n,(v*-I+_*P)*s+i)}}}class nR{constructor(){this.reset()}begin(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class O1{static curveLength(t,r,n,i,s,o,a,h){let p=0,c=0,f=0,m=0,v=0,_=0,T=0,x=0,y=0,w=0,E=0,P=t,I=r;for(let R=1;R<=10;++R)c=R/10,f=c*c,m=f*c,v=1-c,_=v*v,T=_*v,x=T*t+3*_*c*n+3*v*f*s+m*a,y=T*r+3*_*c*i+3*v*f*o+m*h,w=P-x,E=I-y,P=x,I=y,p+=Math.sqrt(w*w+E*E);return p}static curveTo(t,r,n,i,s,o,a){const h=a[a.length-2],d=a[a.length-1];a.length-=2;const p=Ya._segmentsCount(O1.curveLength(h,d,t,r,n,i,s,o));let c=0,f=0,m=0,v=0,_=0;a.push(h,d);for(let T=1,x=0;T<=p;++T)x=T/p,c=1-x,f=c*c,m=f*c,v=x*x,_=v*x,a.push(m*h+3*f*x*t+3*c*v*n+_*s,m*d+3*f*x*r+3*c*v*i+_*o)}}function Fb(e,t,r,n,i,s,o,a){const h=e-r*i,d=t-n*i,p=e+r*s,c=t+n*s;let f,m;o?(f=n,m=-r):(f=-n,m=r);const v=h+f,_=d+m,T=p+f,x=c+m;return a.push(v,_,T,x),2}function io(e,t,r,n,i,s,o,a){const h=r-e,d=n-t;let p=Math.atan2(h,d),c=Math.atan2(i-e,s-t);a&&p<c?p+=Math.PI*2:!a&&p>c&&(c+=Math.PI*2);let f=p;const m=c-p,v=Math.abs(m),_=Math.sqrt(h*h+d*d),T=(15*v*Math.sqrt(_)/Math.PI>>0)+1,x=m/T;if(f+=x,a){o.push(e,t,r,n);for(let y=1,w=f;y<T;y++,w+=x)o.push(e,t,e+Math.sin(w)*_,t+Math.cos(w)*_);o.push(e,t,i,s)}else{o.push(r,n,e,t);for(let y=1,w=f;y<T;y++,w+=x)o.push(e+Math.sin(w)*_,t+Math.cos(w)*_,e,t);o.push(i,s,e,t)}return T*2}function iR(e,t){const r=e.shape;let n=e.points||r.points.slice();const i=t.closePointEps;if(n.length===0)return;const s=e.lineStyle,o=new Fe(n[0],n[1]),a=new Fe(n[n.length-2],n[n.length-1]),h=r.type!==tr.POLY||r.closeStroke,d=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(h){n=n.slice(),d&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const Q=(o.x+a.x)*.5,O=(a.y+o.y)*.5;n.unshift(Q,O),n.push(Q,O)}const p=t.points,c=n.length/2;let f=n.length;const m=p.length/2,v=s.width/2,_=v*v,T=s.miterLimit*s.miterLimit;let x=n[0],y=n[1],w=n[2],E=n[3],P=0,I=0,R=-(y-E),N=x-w,D=0,k=0,M=Math.sqrt(R*R+N*N);R/=M,N/=M,R*=v,N*=v;const z=s.alignment,F=(1-z)*2,U=z*2;h||(s.cap===_o.ROUND?f+=io(x-R*(F-U)*.5,y-N*(F-U)*.5,x-R*F,y-N*F,x+R*U,y+N*U,p,!0)+2:s.cap===_o.SQUARE&&(f+=Fb(x,y,R,N,F,U,!0,p))),p.push(x-R*F,y-N*F,x+R*U,y+N*U);for(let Q=1;Q<c-1;++Q){x=n[(Q-1)*2],y=n[(Q-1)*2+1],w=n[Q*2],E=n[Q*2+1],P=n[(Q+1)*2],I=n[(Q+1)*2+1],R=-(y-E),N=x-w,M=Math.sqrt(R*R+N*N),R/=M,N/=M,R*=v,N*=v,D=-(E-I),k=w-P,M=Math.sqrt(D*D+k*k),D/=M,k/=M,D*=v,k*=v;const O=w-x,L=y-E,G=w-P,H=I-E,j=O*G+L*H,Z=L*G-H*O,K=Z<0;if(Math.abs(Z)<.001*Math.abs(j)){p.push(w-R*F,E-N*F,w+R*U,E+N*U),j>=0&&(s.join===Dn.ROUND?f+=io(w,E,w-R*F,E-N*F,w-D*F,E-k*F,p,!1)+4:f+=2,p.push(w-D*U,E-k*U,w+D*F,E+k*F));continue}const xe=(-R+x)*(-N+E)-(-R+w)*(-N+y),fe=(-D+P)*(-k+E)-(-D+w)*(-k+I),Re=(O*fe-G*xe)/Z,Ce=(H*xe-L*fe)/Z,gt=(Re-w)*(Re-w)+(Ce-E)*(Ce-E),tt=w+(Re-w)*F,Oe=E+(Ce-E)*F,Qe=w-(Re-w)*U,Le=E-(Ce-E)*U,it=Math.min(O*O+L*L,G*G+H*H),qt=K?F:U,Fr=it+qt*qt*_,ts=gt<=Fr;let Jr=s.join;if(Jr===Dn.MITER&&gt/_>T&&(Jr=Dn.BEVEL),ts)switch(Jr){case Dn.MITER:{p.push(tt,Oe,Qe,Le);break}case Dn.BEVEL:{K?p.push(tt,Oe,w+R*U,E+N*U,tt,Oe,w+D*U,E+k*U):p.push(w-R*F,E-N*F,Qe,Le,w-D*F,E-k*F,Qe,Le),f+=2;break}case Dn.ROUND:{K?(p.push(tt,Oe,w+R*U,E+N*U),f+=io(w,E,w+R*U,E+N*U,w+D*U,E+k*U,p,!0)+4,p.push(tt,Oe,w+D*U,E+k*U)):(p.push(w-R*F,E-N*F,Qe,Le),f+=io(w,E,w-R*F,E-N*F,w-D*F,E-k*F,p,!1)+4,p.push(w-D*F,E-k*F,Qe,Le));break}}else{switch(p.push(w-R*F,E-N*F,w+R*U,E+N*U),Jr){case Dn.MITER:{K?p.push(Qe,Le,Qe,Le):p.push(tt,Oe,tt,Oe),f+=2;break}case Dn.ROUND:{K?f+=io(w,E,w+R*U,E+N*U,w+D*U,E+k*U,p,!0)+2:f+=io(w,E,w-R*F,E-N*F,w-D*F,E-k*F,p,!1)+2;break}}p.push(w-D*F,E-k*F,w+D*U,E+k*U),f+=2}}x=n[(c-2)*2],y=n[(c-2)*2+1],w=n[(c-1)*2],E=n[(c-1)*2+1],R=-(y-E),N=x-w,M=Math.sqrt(R*R+N*N),R/=M,N/=M,R*=v,N*=v,p.push(w-R*F,E-N*F,w+R*U,E+N*U),h||(s.cap===_o.ROUND?f+=io(w-R*(F-U)*.5,E-N*(F-U)*.5,w-R*F,E-N*F,w+R*U,E+N*U,p,!1)+2:s.cap===_o.SQUARE&&(f+=Fb(w,E,R,N,F,U,!1,p)));const Y=t.indices,J=Ya.epsilon*Ya.epsilon;for(let Q=m;Q<f+m-2;++Q)x=p[Q*2],y=p[Q*2+1],w=p[(Q+1)*2],E=p[(Q+1)*2+1],P=p[(Q+2)*2],I=p[(Q+2)*2+1],!(Math.abs(x*(E-I)+w*(I-y)+P*(y-E))<J)&&Y.push(Q,Q+1,Q+2)}function sR(e,t){let r=0;const n=e.shape,i=e.points||n.points,s=n.type!==tr.POLY||n.closeStroke;if(i.length===0)return;const o=t.points,a=t.indices,h=i.length/2,d=o.length/2;let p=d;for(o.push(i[0],i[1]),r=1;r<h;r++)o.push(i[r*2],i[r*2+1]),a.push(p,p+1),p++;s&&a.push(p,d)}function Ob(e,t){e.lineStyle.native?sR(e,t):iR(e,t)}class U1{static curveLength(t,r,n,i,s,o){const a=t-2*n+s,h=r-2*i+o,d=2*n-2*t,p=2*i-2*r,c=4*(a*a+h*h),f=4*(a*d+h*p),m=d*d+p*p,v=2*Math.sqrt(c+f+m),_=Math.sqrt(c),T=2*c*_,x=2*Math.sqrt(m),y=f/_;return(T*v+_*f*(v-x)+(4*m*c-f*f)*Math.log((2*_+y+v)/(y+x)))/(4*T)}static curveTo(t,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],h=Ya._segmentsCount(U1.curveLength(o,a,t,r,n,i));let d=0,p=0;for(let c=1;c<=h;++c){const f=c/h;d=o+(t-o)*f,p=a+(r-a)*f,s.push(d+(t+(n-t)*f-d)*f,p+(r+(i-r)*f-p)*f)}}}const nm={[tr.POLY]:CE,[tr.CIRC]:Vd,[tr.ELIP]:Vd,[tr.RECT]:tR,[tr.RREC]:rR},Ub=[],Bh=[];class Xd{constructor(t,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}clone(){return new Xd(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const na=new Fe,AE=class extends OT{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new $d,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Bh.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Ub.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,n=null){const i=new Xd(e,t,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Xd(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const n=t[r];if(!!n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,na):na.copyFrom(e),n.shape.contains(na.x,na.y))){let i=!1;if(n.holes){for(let s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(na.x,na.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const h=t[a],d=h.fillStyle,p=h.lineStyle;nm[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(d.visible||p.visible)&&this.processHoles(h.holes);for(let f=0;f<2;f++){const m=f===0?d:p;if(!m.visible)continue;const v=m.texture.baseTexture,_=this.indices.length,T=this.points.length/2;v.wrapMode=Vi.REPEAT,f===0?this.processFill(h):this.processLine(h);const x=this.points.length/2-T;x!==0&&(r&&!this._compareStyles(n,m)&&(r.end(_,T),r=null),r||(r=Ub.pop()||new nR,r.begin(m,_,T),this.batches.push(r),n=m),this.addUvs(this.points,e,m.texture,T,x,m.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const n=e[t];for(let i=0;i<n.size;i++){const s=n.start+i;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<AE.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Be._globalBatch;for(let p=0;p<this.drawCalls.length;p++)this.drawCalls[p].texArray.clear(),Bh.push(this.drawCalls[p]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let n=Bh.pop();n||(n=new lv,n.texArray=new cv),n.texArray.count=0,n.start=0,n.size=0,n.type=Un.TRIANGLES;let i=0,s=null,o=0,a=!1,h=Un.TRIANGLES,d=0;this.drawCalls.push(n);for(let p=0;p<this.batches.length;p++){const c=this.batches[p],f=8,m=c.style,v=m.texture.baseTexture;a!==!!m.native&&(a=!!m.native,h=a?Un.LINES:Un.TRIANGLES,s=null,i=f,e++),s!==v&&(s=v,v._batchEnabled!==e&&(i===f&&(e++,i=0,n.size>0&&(n=Bh.pop(),n||(n=new lv,n.texArray=new cv),this.drawCalls.push(n)),n.start=d,n.size=0,n.texArray.count=0,n.type=h),v.touched=1,v._batchEnabled=e,v._batchLocation=i,v.wrapMode=Vi.REPEAT,n.texArray.elements[n.texArray.count++]=v,i++)),n.size+=c.size,d+=c.size,o=v._batchLocation,this.addColors(t,m.color,m.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,o,c.attribSize,c.attribStart)}Be._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(e.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let h=0;h<e.length/2;h++)s[a++]=e[h*2],s[a++]=e[h*2+1],s[a++]=t[h*2],s[a++]=t[h*2+1],o[a++]=r[h],s[a++]=n[h];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?CE.triangulate(e,this):nm[e.type].triangulate(e,this)}processLine(e){Ob(e,this);for(let t=0;t<e.holes.length;t++)Ob(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];nm[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const n=e[r*2],i=e[r*2+1];e[r*2]=t.a*n+t.c*i+t.tx,e[r*2+1]=t.b*n+t.d*i+t.ty}}addColors(e,t,r,n,i=0){const s=et.shared.setValue(t).toLittleEndianNumber(),o=et.shared.setValue(s).toPremultiplied(r);e.length=Math.max(e.length,i+n);for(let a=0;a<n;a++)e[i+a]=o}addTextureIds(e,t,r,n=0){e.length=Math.max(e.length,n+r);for(let i=0;i<r;i++)e[n+i]=t}addUvs(e,t,r,n,i,s=null){let o=0;const a=t.length,h=r.frame;for(;o<i;){let p=e[(n+o)*2],c=e[(n+o)*2+1];if(s){const f=s.a*p+s.c*c+s.tx;c=s.b*p+s.d*c+s.ty,p=f}o++,t.push(p/h.width,c/h.height)}const d=r.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(t,r,a,i)}adjustUvs(e,t,r,n){const i=t.baseTexture,s=1e-6,o=r+n*2,a=t.frame,h=a.width/i.width,d=a.height/i.height;let p=a.x/a.width,c=a.y/a.height,f=Math.floor(e[r]+s),m=Math.floor(e[r+1]+s);for(let v=r+2;v<o;v+=2)f=Math.min(f,Math.floor(e[v]+s)),m=Math.min(m,Math.floor(e[v+1]+s));p-=f,c-=m;for(let v=r;v<o;v+=2)e[v]=(e[v]+p)*h,e[v+1]=(e[v+1]+c)*d}};let kE=AE;kE.BATCHABLE_SIZE=100;class Nf{constructor(){this.color=16777215,this.alpha=1,this.texture=ae.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Nf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ae.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class z1 extends Nf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=_o.BUTT,this.join=Dn.MITER,this.miterLimit=10}clone(){const t=new z1;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const im={},fd=class extends zt{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Nf,this._lineStyle=new z1,this._matrix=null,this._holeMode=!1,this.state=es.for2d(),this._geometry=e||new kE,this._geometry.refCount++,this._transformID=-1,this._tintColor=new et(16777215),this.blendMode=me.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new fd(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,n=.5,i=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:n,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:ae.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:_o.BUTT,join:Dn.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Fa,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Fa,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==e||i!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,n){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),U1.curveTo(e,t,r,n,i),this}bezierCurveTo(e,t,r,n,i,s){return this._initCurve(),O1.curveTo(e,t,r,n,i,s,this.currentPath.points),this}arcTo(e,t,r,n,i){this._initCurve(e,t);const s=this.currentPath.points,o=Bb.curveTo(e,t,r,n,i,s);if(o){const{cx:a,cy:h,radius:d,startAngle:p,endAngle:c,anticlockwise:f}=o;this.arc(a,h,d,p,c,f)}return this}arc(e,t,r,n,i,s=!1){if(n===i)return this;if(!s&&i<=n?i+=Gd:s&&n<=i&&(n+=Gd),i-n===0)return this;const a=e+Math.cos(n)*r,h=t+Math.sin(n)*r,d=this._geometry.closePointEps;let p=this.currentPath?this.currentPath.points:null;if(p){const c=Math.abs(p[p.length-2]-a),f=Math.abs(p[p.length-1]-h);c<d&&f<d||p.push(a,h)}else this.moveTo(a,h),p=this.currentPath.points;return Bb.arc(a,h,e,t,r,n,i,s,p),this}beginFill(e=0,t){return this.beginTextureFill({texture:ae.WHITE,color:e,alpha:t})}normalizeColor(e){const t=et.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:ae.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,n){return this.drawShape(new He(e,t,r,n))}drawRoundedRect(e,t,r,n,i){return this.drawShape(new L1(e,t,r,n,i))}drawCircle(e,t,r){return this.drawShape(new N1(e,t,r))}drawEllipse(e,t,r,n){return this.drawShape(new D1(e,t,r,n))}drawPolygon(...e){let t,r=!0;const n=e[0];n.points?(r=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const i=new Fa(t);return i.closeStroke=r,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===tr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let n=0;n<r;n++){const i=e.batches[n],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),h=new Uint16Array(e.indicesUint16.buffer,i.start*2,i.size),d={vertexData:o,blendMode:t,indices:h,uvs:a,_batchRGB:et.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=d}}_renderBatched(e){if(!!this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,n=this.worldAlpha,i=t.uniforms,s=r.drawCalls;i.translationMatrix=this.transform.worldTransform,et.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(e,r.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:r,type:n,size:i,start:s}=t,o=r.count;for(let a=0;a<o;a++)e.texture.bind(r.elements[a],a);e.geometry.draw(n,i,s)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!im[r]){const{maxTextures:n}=e.plugins[r],i=new Int32Array(n);for(let a=0;a<n;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new pt,default:Vn.from({uSamplers:i},!0)},o=e.plugins[r]._shader.program;im[r]=new wi(o,s)}t=im[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:n,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,t,r,n,i)}containsPoint(e){return this.worldTransform.applyInverse(e,fd._TEMP_POINT),this._geometry.containsPoint(fd._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=et.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,o=t.tx,a=t.ty,h=this._geometry.points,d=this.vertexData;let p=0;for(let c=0;c<h.length;c+=2){const f=h[c],m=h[c+1];d[p++]=r*f+i*m+o,d[p++]=s*m+n*f+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let Xn=fd;Xn.curves=Ya;Xn._TEMP_POINT=new Fe;class oR extends If{constructor(t=100,r=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=t,this.height=r,this.build()}build(){const t=this.segWidth*this.segHeight,r=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,h=this.height/o;for(let p=0;p<t;p++){const c=p%this.segWidth,f=p/this.segWidth|0;r.push(c*a,f*h),n.push(c/s,f/o)}const d=s*o;for(let p=0;p<d;p++){const c=p%s,f=p/s|0,m=f*this.segWidth+c,v=f*this.segWidth+c+1,_=(f+1)*this.segWidth+c,T=(f+1)*this.segWidth+c+1;i.push(m,v,_,v,T,_)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class aR extends If{constructor(t=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=t,this.textureScale=n,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(t.length<1)return;r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),n.data=new Float32Array(t.length*4),i.data=new Uint16Array((t.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,h=t[0];const d=this._width*this.textureScale,p=t.length;for(let f=0;f<p;f++){const m=f*4;if(this.textureScale>0){const v=h.x-t[f].x,_=h.y-t[f].y,T=Math.sqrt(v*v+_*_);h=t[f],a+=T/d}else a=f/(p-1);s[m]=a,s[m+1]=0,s[m+2]=a,s[m+3]=1}let c=0;for(let f=0;f<p-1;f++){const m=f*2;o[c++]=m,o[c++]=m+1,o[c++]=m+2,o[c++]=m+2,o[c++]=m+1,o[c++]=m+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let r=t[0],n,i=0,s=0;const o=this.buffers[0].data,a=t.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let d=0;d<a;d++){const p=t[d],c=d*4;d<t.length-1?n=t[d+1]:n=p,s=-(n.x-r.x),i=n.y-r.y;const f=Math.sqrt(i*i+s*s);f<1e-6?(i=0,s=0):(i/=f,s/=f,i*=h,s*=h),o[c]=p.x+i,o[c+1]=p.y+s,o[c+2]=p.x-i,o[c+3]=p.y-s,r=p}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class lR extends Xa{constructor(t,r,n){const i=new oR(t.width,t.height,r,n),s=new Fu(ae.WHITE);super(i,s),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(t.width!==r||t.height!==n)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const Fh=10;class uR extends lR{constructor(t,r,n,i,s){super(ae.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??t.defaultBorders?.left??Fh,this._rightWidth=i??t.defaultBorders?.right??Fh,this._topHeight=n??t.defaultBorders?.top??Fh,this._bottomHeight=s??t.defaultBorders?.bottom??Fh,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(r,i)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const n=1/this._origWidth,i=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=i*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class cR extends Xa{constructor(t=ae.EMPTY,r,n,i,s){const o=new If(r,n,i);o.getBuffer("aVertexPosition").static=!1;const a=new Fu(t);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class hR extends Xa{constructor(t,r,n=0){const i=new aR(t.height,r,n),s=new Fu(t);n>0&&(t.baseTexture.wrapMode=Vi.REPEAT),super(i,s),this.autoUpdate=!0}_render(t){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(t)}}class dR extends zt{constructor(t=1500,r,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=me.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new et(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const r=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class zb{constructor(t,r,n){this.geometry=new Os,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<t.length;++i){let s=t[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Ie.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let r=0;this.indexBuffer=new Pt(zk(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Pt(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Pt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Ie.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Ie.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(t,r,n,s.type===Ie.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(t,r,n,s.type===Ie.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fR=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,pR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class PE extends Tf{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new pt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ie.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=wi.from(pR,fR,{}),this.state=es.for2d()}render(t){const r=t.children,n=t._maxSize,i=t._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!t.autoResize&&(o=n);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const h=r[0]._texture.baseTexture,d=h.alphaMode>0;this.state.blendMode=DT(t.blendMode,d),s.state.set(this.state);const p=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=et.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,d).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let f=!1;for(let m=0,v=0;m<o;m+=i,v+=1){let _=o-m;_>i&&(_=i),v>=a.length&&a.push(this._generateOneMoreBuffer(t));const T=a[v];T.uploadDynamic(r,m,_);const x=t._bufferUpdateIDs[v]||0;f=f||T._updateID<x,f&&(T._updateID=t._updateID,T.uploadStatic(r,m,_)),s.geometry.bind(T.geometry),p.drawElements(p.TRIANGLES,_*6,p.UNSIGNED_SHORT,0)}}generateBuffers(t){const r=[],n=t._maxSize,i=t._batchSize,s=t._properties;for(let o=0;o<n;o+=i)r.push(new zb(this.properties,s,i));return r}_generateOneMoreBuffer(t){const r=t._batchSize,n=t._properties;return new zb(this.properties,n,r)}uploadVertices(t,r,n,i,s,o){let a=0,h=0,d=0,p=0;for(let c=0;c<n;++c){const f=t[r+c],m=f._texture,v=f.scale.x,_=f.scale.y,T=m.trim,x=m.orig;T?(h=T.x-f.anchor.x*x.width,a=h+T.width,p=T.y-f.anchor.y*x.height,d=p+T.height):(a=x.width*(1-f.anchor.x),h=x.width*-f.anchor.x,d=x.height*(1-f.anchor.y),p=x.height*-f.anchor.y),i[o]=h*v,i[o+1]=p*_,i[o+s]=a*v,i[o+s+1]=p*_,i[o+s*2]=a*v,i[o+s*2+1]=d*_,i[o+s*3]=h*v,i[o+s*3+1]=d*_,o+=s*4}}uploadPosition(t,r,n,i,s,o){for(let a=0;a<n;a++){const h=t[r+a].position;i[o]=h.x,i[o+1]=h.y,i[o+s]=h.x,i[o+s+1]=h.y,i[o+s*2]=h.x,i[o+s*2+1]=h.y,i[o+s*3]=h.x,i[o+s*3+1]=h.y,o+=s*4}}uploadRotation(t,r,n,i,s,o){for(let a=0;a<n;a++){const h=t[r+a].rotation;i[o]=h,i[o+s]=h,i[o+s*2]=h,i[o+s*3]=h,o+=s*4}}uploadUvs(t,r,n,i,s,o){for(let a=0;a<n;++a){const h=t[r+a]._texture._uvs;h?(i[o]=h.x0,i[o+1]=h.y0,i[o+s]=h.x1,i[o+s+1]=h.y1,i[o+s*2]=h.x2,i[o+s*2+1]=h.y2,i[o+s*3]=h.x3,i[o+s*3+1]=h.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(t,r,n,i,s,o){for(let a=0;a<n;++a){const h=t[r+a],d=et.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);i[o]=d,i[o+s]=d,i[o+s*2]=d,i[o+s*3]=d,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}PE.extension={name:"particle",type:ve.RendererPlugin};Ae.add(PE);class Ou extends qn{constructor(t,r=!0){super(t[0]instanceof ae?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Rt.shared.add(this.update,this,zs.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const r=this.animationSpeed*t,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=r/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const r=[];for(let n=0;n<t.length;++n)r.push(ae.from(t[n]));return new Ou(r)}static fromImages(t){const r=[];for(let n=0;n<t.length;++n)r.push(ae.from(t[n]));return new Ou(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof ae)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Rt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Rt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const zl=new Fe;class H1 extends qn{constructor(t,r=100,n=100){super(t),this.tileTransform=new Sf,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new B1(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,n,i)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new He),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,zl);const r=this._width,n=this._height,i=-r*this.anchor._x;if(zl.x>=i&&zl.x<i+r){const s=-n*this.anchor._y;if(zl.y>=s&&zl.y<s+n)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,r){const n=t instanceof ae?t:ae.from(t,r);return new H1(n,r.width,r.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var mR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,vR=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Hb=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,xR=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Oh=new pt;class IE extends Tf{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new qT,this.state=es.for2d()}contextChange(){const t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=wi.from(Hb,xR,r),this.shader=t.context.webGLVersion>1?wi.from(gR,mR,r):wi.from(Hb,vR,r)}render(t){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=t._texture,h=a.baseTexture,d=h.alphaMode>0,p=t.tileTransform.localTransform,c=t.uvMatrix;let f=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;f&&(h._glTextures[r.CONTEXT_UID]?f=h.wrapMode!==Vi.CLAMP:h.wrapMode===Vi.CLAMP&&(h.wrapMode=Vi.REPEAT));const m=f?this.simpleShader:this.shader,v=a.width,_=a.height,T=t._width,x=t._height;Oh.set(p.a*v/T,p.b*v/x,p.c*_/T,p.d*_/x,p.tx/T,p.ty/x),Oh.invert(),f?Oh.prepend(c.mapCoord):(m.uniforms.uMapCoord=c.mapCoord.toArray(!0),m.uniforms.uClampFrame=c.uClampFrame,m.uniforms.uClampOffset=c.uClampOffset),m.uniforms.uTransform=Oh.toArray(!0),m.uniforms.uColor=et.shared.setValue(t.tint).premultiply(t.worldAlpha,d).toArray(m.uniforms.uColor),m.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),m.uniforms.uSampler=a,r.shader.bind(m),r.geometry.bind(n),this.state.blendMode=DT(t.blendMode,d),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}IE.extension={name:"tilingSprite",type:ve.RendererPlugin};Ae.add(IE);const _v=class{constructor(e){this.stage=new zt,e=Object.assign({forceCanvas:!1},e),this.renderer=QP(e),_v._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const r=_v._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Qu=_v;Qu._plugins=[];Ae.handleByList(ve.Application,Qu._plugins);class RE{static init(t){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}RE.extension=ve.Application;Ae.add(RE);var ot={exports:{}},yR="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_R=yR,bR=_R;function ME(){}function NE(){}NE.resetWarningCache=ME;var wR=function(){function e(n,i,s,o,a,h){if(h!==bR){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:NE,resetWarningCache:ME};return r.PropTypes=r,r};ot.exports=wR();function Kr(e){return Kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kr(e)}function DE(e){var t=function(r,n){if(Kr(r)!=="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,n||"default");if(Kr(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Kr(t)==="symbol"?t:String(t)}function kt(e,t,r){return(t=DE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zi(e){return function(t){if(Array.isArray(t))return sm(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return sm(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sm(t,r):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Et(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]}var SR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ER=function(e){return e==null};function Ql(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=Zi(e);else{if(e===null||Kr(e)!=="object")return t;t=[e&&e?.x||0,e&&e?.y||0]}return t.filter(function(r){return!ER(r)&&!isNaN(r)}).map(Number)}function Gb(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function om(e){return e instanceof Fe||e instanceof xi}var Yd=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function am(e,t,r){if(om(e[t])&&om(r))e[t].copyFrom(r);else if(om(e[t])){var n=Ql(r);Et(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(r),Kr(r)),e[t].set(n.shift(),n.shift())}else e[t]=r}var ia,LE=function(e){var t,r=e;if(!Array.isArray(r)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(e)}var n={};return r.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},BE=function(e){return function(){return!e.apply(void 0,arguments)}},bv="children",CR=(kt(ia={},bv,!0),kt(ia,"parent",!0),kt(ia,"worldAlpha",!0),kt(ia,"worldTransform",!0),kt(ia,"worldVisible",!0),ia),wv={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ei=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var h,d;a==null||(h=a.__reactpixi)===null||h===void 0||(d=h.root)===null||d===void 0||d.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,h){if(r.hasOwnProperty(a))return Et(h.typeofs.some(function(d){return Kr(r[a])===d})||h.instanceofs.some(function(d){return r[a]instanceof d}),"".concat(e," ").concat(a," prop is invalid")),r[a]};if(r.texture)return Et(r.texture instanceof ae,"".concat(e," texture needs to be typeof `Texture`")),r.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,ae]});Et(!!s,"".concat(e," could not get texture from props"));var o=ae.from(s);return o.__reactpixi={root:t},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},AR=BE(LE([].concat(Zi(Object.keys(CR)),Zi(Yd))));function Ci(e,t,r){var n=!1;if(Et(mt.prototype.isPrototypeOf(e),"instance needs to be typeof `DisplayObject`, got `%s`",Kr(e)),!r.ignoreEvents)for(var i=typeof e.removeListener=="function",s=typeof e.on=="function",o=0;o<Yd.length;o++){var a=Yd[o];t[a]!==r[a]&&(n=!0,typeof t[a]=="function"&&i&&e.removeListener(a,t[a]),typeof r[a]=="function"&&s&&e.on(a,r[a]))}var h=Object.keys(r||{});if(r.overwriteProps){for(var d=0;d<h.length;d++){var p=h[d];t[p]!==r[p]&&(n=!0,am(e,p,r[p]))}return n}for(var c=h.filter(AR),f=0;f<c.length;f++){var m=c[f],v=r[m];r[m]!==t[m]&&(n=!0),v!==void 0?am(e,m,v):m in wv?(console.warn("setting default value: ".concat(m,", from: ").concat(e[m]," to: ").concat(v," for"),e),n=!0,am(e,m,wv[m])):console.warn("ignoring prop: ".concat(m,", from ").concat(e[m]," to ").concat(v," for"),e)}return n}var kR=function(e,t){var r=t.text,n=t.style;return new TE(r,n)},PR=function(){return new zt};function Ws(e,t){if(e==null)return{};var r,n,i=function(o,a){if(o==null)return{};var h,d,p={},c=Object.keys(o);for(d=0;d<c.length;d++)h=c[d],a.indexOf(h)>=0||(p[h]=o[h]);return p}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var IR=["draw","geometry"],RR=function(e,t){var r=t.geometry;Et(!r||r instanceof Xn,"Graphics geometry needs to be a `PIXI.Graphics`");var n=r?new Xn(r.geometry):new Xn;return n.applyProps=function(i,s,o){var a=o.draw;o.geometry;var h=Ci(i,s,Ws(o,IR));return s.draw!==a&&typeof a=="function"&&(h=!0,a.call(n,n)),h},n},MR=["image","texture"],NR=function(e,t){var r=t.leftWidth,n=r===void 0?10:r,i=t.topHeight,s=i===void 0?10:i,o=t.rightWidth,a=o===void 0?10:o,h=t.bottomHeight,d=h===void 0?10:h,p=Ei("NineSlicePlane",e,t),c=new uR(p,n,s,a,d);return c.applyProps=function(f,m,v){var _=v.image,T=v.texture,x=Ci(f,m,Ws(v,MR));return(_||T)&&(T!==m.texture&&(x=!0),f.texture=Ei("NineSlicePlane",e,v)),x},c};function $b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$b(Object(r),!0).forEach(function(n){kt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$b(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var DR=function(e,t){var r=t.maxSize,n=r===void 0?1500:r,i=t.batchSize,s=i===void 0?16384:i,o=t.autoResize,a=o!==void 0&&o,h=Uh(Uh({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),d=Uh(Uh({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),p=new dR(n,h,s,a);return p.willUnmount=function(c,f,m){c.destroy(d)},p},LR=["image","texture"],BR=function(e,t){var r=new qn(Ei("Sprite",e,t));return r.applyProps=function(n,i,s){var o=s.image,a=s.texture,h=Ci(n,i,Ws(s,LR));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(h=!0),n.texture=Ei("Sprite",e,s)),h},r},FR=["textures","isPlaying","initialFrame"],OR=function(e,t){var r=t.textures,n=t.images,i=t.isPlaying,s=i===void 0||i,o=t.initialFrame,a=function(d){return d.map(function(p){return Et(p instanceof ae||p?.texture,"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),p})},h=n?Ou.fromImages(n):new Ou(a(r));return h[s?"gotoAndPlay":"gotoAndStop"](o||0),h.applyProps=function(d,p,c){var f=c.textures,m=c.isPlaying,v=c.initialFrame,_=Ci(d,p,Ws(c,FR));if(f&&p.textures!==f&&(d.textures=a(f),_=!0),m!==p.isPlaying||v!==p.initialFrame){var T=typeof v=="number"?v:h.currentFrame||0;h[m?"gotoAndPlay":"gotoAndStop"](T),_=!0}return _},h},UR=function(e,t){var r=t.text,n=r===void 0?"":r,i=t.style,s=i===void 0?{}:i,o=t.isSprite,a=new Ku(n,s);return o?(a.updateText(),new qn(a.texture)):a},zR=["tileScale","tilePosition","image","texture"],HR=function(e,t){var r=t.width,n=r===void 0?100:r,i=t.height,s=i===void 0?100:i,o=Ei("TilingSprite",e,t),a=new H1(o,n,s);return a.applyProps=function(h,d,p){var c=p.tileScale,f=p.tilePosition,m=p.image,v=p.texture,_=Ci(h,d,Ws(p,zR));if(f){var T,x=Ql(f);(T=h.tilePosition).set.apply(T,Zi(x)),_=!Gb(Ql(d.tilePosition),x)||_}if(c){var y,w=Ql(c);(y=h.tileScale).set.apply(y,Zi(w)),_=!Gb(Ql(d.tileScale),w)||_}return(m||v)&&(v!==d.texture&&(_=!0),h.texture=Ei("Sprite",e,p)),_},a},GR=["image","texture"],$R=function(e,t){var r=Ei("Mesh",e,t),n=t.vertices,i=t.uvs,s=t.indices,o=t.drawMode,a=o===void 0?Un.TRIANGLES:o,h=new cR(r,n,i,s,a);return h.applyProps=function(d,p,c){var f=c.image,m=c.texture,v=Ci(d,p,Ws(c,GR));return(f||m)&&(m!==p.texture&&(v=!0),d.texture=Ei("Mesh",e,c)),v},h},jR=["image","texture"],WR=function(e,t){var r=Ei("SimpleRope",e,t),n=t.points,i=new hR(r,n);return i.applyProps=function(s,o,a){var h=a.image,d=a.texture,p=Ws(a,jR);Et(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var c=Ci(s,o,p);return(h||d)&&(d!==o.texture&&(c=!0),s.texture=Ei("SimpleRope",e,a)),c},i},VR=Object.freeze({__proto__:null,BitmapText:kR,Container:PR,Graphics:RR,NineSlicePlane:NR,ParticleContainer:DR,Sprite:BR,Text:UR,TilingSprite:HR,SimpleMesh:$R,SimpleRope:WR,AnimatedSprite:OR});function jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jb(Object(r),!0).forEach(function(n){kt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Br={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},XR=Object.keys(Br).reduce(function(e,t){return Wb(Wb({},e),{},kt({},t,VR[t]))},{}),FE={};function YR(e,t){return Et(!!e,"Expect type to be defined, got `%s`",e),Et(!Br[e],"Component `%s` could not be created, already exists in default components.",e),FE[e]=t,e}var Vb,Xb,Yb,Kb,Sv={},Tv={},KR={get exports(){return Tv},set exports(e){Tv=e}},qb={};function qR(){return Xb||(Xb=1,KR.exports=(Vb||(Vb=1,function(e){function t(O,L){var G=O.length;O.push(L);e:for(;0<G;){var H=G-1>>>1,j=O[H];if(!(0<i(j,L)))break e;O[H]=L,O[G]=j,G=H}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var L=O[0],G=O.pop();if(G!==L){O[0]=G;e:for(var H=0,j=O.length,Z=j>>>1;H<Z;){var K=2*(H+1)-1,xe=O[K],fe=K+1,Re=O[fe];if(0>i(xe,G))fe<j&&0>i(Re,xe)?(O[H]=Re,O[fe]=G,H=fe):(O[H]=xe,O[K]=G,H=K);else{if(!(fe<j&&0>i(Re,G)))break e;O[H]=Re,O[fe]=G,H=fe}}}return L}function i(O,L){var G=O.sortIndex-L.sortIndex;return G!==0?G:O.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var h=[],d=[],p=1,c=null,f=3,m=!1,v=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(O){for(var L=r(d);L!==null;){if(L.callback===null)n(d);else{if(!(L.startTime<=O))break;n(d),L.sortIndex=L.expirationTime,t(h,L)}L=r(d)}}function E(O){if(_=!1,w(O),!v)if(r(h)!==null)v=!0,J(P);else{var L=r(d);L!==null&&Q(E,L.startTime-O)}}function P(O,L){v=!1,_&&(_=!1,x(D),D=-1),m=!0;var G=f;try{for(w(L),c=r(h);c!==null&&(!(c.expirationTime>L)||O&&!z());){var H=c.callback;if(typeof H=="function"){c.callback=null,f=c.priorityLevel;var j=H(c.expirationTime<=L);L=e.unstable_now(),typeof j=="function"?c.callback=j:c===r(h)&&n(h),w(L)}else n(h);c=r(h)}if(c!==null)var Z=!0;else{var K=r(d);K!==null&&Q(E,K.startTime-L),Z=!1}return Z}finally{c=null,f=G,m=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,R=!1,N=null,D=-1,k=5,M=-1;function z(){return!(e.unstable_now()-M<k)}function F(){if(N!==null){var O=e.unstable_now();M=O;var L=!0;try{L=N(!0,O)}finally{L?I():(R=!1,N=null)}}else R=!1}if(typeof y=="function")I=function(){y(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Y=U.port2;U.port1.onmessage=F,I=function(){Y.postMessage(null)}}else I=function(){T(F,0)};function J(O){N=O,R||(R=!0,I())}function Q(O,L){D=T(function(){O(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,J(P))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(h)},e.unstable_next=function(O){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var G=f;f=L;try{return O()}finally{f=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,L){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=f;f=O;try{return L()}finally{f=G}},e.unstable_scheduleCallback=function(O,L,G){var H=e.unstable_now();switch(G=typeof G=="object"&&G!==null&&typeof(G=G.delay)=="number"&&0<G?H+G:H,O){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return O={id:p++,callback:L,priorityLevel:O,startTime:G,expirationTime:j=G+j,sortIndex:-1},G>H?(O.sortIndex=G,t(d,O),r(h)===null&&O===r(d)&&(_?(x(D),D=-1):_=!0,Q(E,G-H))):(O.sortIndex=j,t(h,O),v||m||(v=!0,J(P))),O},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(O){var L=f;return function(){var G=f;f=L;try{return O.apply(this,arguments)}finally{f=G}}}}(qb)),qb)),Tv}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function QR(){return Kb||(Kb=1,Yb=function(e){var t={},r=Xr,n=qR(),i=Object.assign;function s(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),h=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),E=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:typeof(l=E&&l[E]||l["@@iterator"])=="function"?l:null}function I(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case d:return"Fragment";case h:return"Portal";case c:return"Profiler";case p:return"StrictMode";case _:return"Suspense";case T:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case m:return(l.displayName||"Context")+".Consumer";case f:return(l._context.displayName||"Context")+".Provider";case v:var u=l.render;return(l=l.displayName)||(l=(l=u.displayName||u.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x:return(u=l.displayName||null)!==null?u:I(l.type)||"Memo";case y:u=l._payload,l=l._init;try{return I(l(u))}catch{}}return null}function R(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=u.render).displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(u);case 8:return u===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function N(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do(4098&(u=l).flags)!=0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function D(l){if(N(l)!==l)throw Error(s(188))}function k(l){var u=l.alternate;if(!u){if((u=N(l))===null)throw Error(s(188));return u!==l?null:l}for(var g=l,b=u;;){var S=g.return;if(S===null)break;var C=S.alternate;if(C===null){if((b=S.return)!==null){g=b;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===g)return D(S),l;if(C===b)return D(S),u;C=C.sibling}throw Error(s(188))}if(g.return!==b.return)g=S,b=C;else{for(var B=!1,$=S.child;$;){if($===g){B=!0,g=S,b=C;break}if($===b){B=!0,b=S,g=C;break}$=$.sibling}if(!B){for($=C.child;$;){if($===g){B=!0,g=C,b=S;break}if($===b){B=!0,b=C,g=S;break}$=$.sibling}if(!B)throw Error(s(189))}}if(g.alternate!==b)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?l:u}function M(l){return(l=k(l))!==null?z(l):null}function z(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=z(l);if(u!==null)return u;l=l.sibling}return null}function F(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var u=F(l);if(u!==null)return u}l=l.sibling}return null}var U,Y=Array.isArray,J=e.getPublicInstance,Q=e.getRootHostContext,O=e.getChildHostContext,L=e.prepareForCommit,G=e.resetAfterCommit,H=e.createInstance,j=e.appendInitialChild,Z=e.finalizeInitialChildren,K=e.prepareUpdate,xe=e.shouldSetTextContent,fe=e.createTextInstance,Re=e.scheduleTimeout,Ce=e.cancelTimeout,gt=e.noTimeout,tt=e.isPrimaryRenderer,Oe=e.supportsMutation,Qe=e.supportsPersistence,Le=e.supportsHydration,it=e.getInstanceFromNode,qt=e.preparePortalMount,Fr=e.getCurrentEventPriority,ts=e.detachDeletedInstance,Jr=e.supportsMicrotasks,il=e.scheduleMicrotask,yn=e.supportsTestSelectors,Or=e.findFiberRoot,Tr=e.getBoundingRect,Qn=e.getTextContent,Zn=e.isHiddenSubtree,ec=e.matchAccessibilityRole,rs=e.setFocusIfFocusable,Vs=e.setupIntersectionObserver,Gf=e.appendChild,tc=e.appendChildToContainer,rc=e.commitTextUpdate,ns=e.commitMount,Xs=e.commitUpdate,$f=e.insertBefore,nc=e.insertInContainerBefore,ic=e.removeChild,jf=e.removeChildFromContainer,sc=e.resetTextContent,oc=e.hideInstance,Wf=e.hideTextInstance,ac=e.unhideInstance,Vf=e.unhideTextInstance,lc=e.clearContainer,Xf=e.cloneInstance,uc=e.createContainerChildSet,cc=e.appendChildToContainerChildSet,hc=e.finalizeContainerChildren,sl=e.replaceContainerChildren,dc=e.cloneHiddenInstance,ol=e.cloneHiddenTextInstance,Yf=e.canHydrateInstance,fc=e.canHydrateTextInstance,gr=e.canHydrateSuspenseInstance,_n=e.isSuspenseInstancePending,Uo=e.isSuspenseInstanceFallback,Kf=e.getSuspenseInstanceFallbackErrorDetails,PC=e.registerSuspenseInstanceRetry,pc=e.getNextHydratableSibling,IC=e.getFirstHydratableChild,RC=e.getFirstHydratableChildWithinContainer,MC=e.getFirstHydratableChildWithinSuspenseInstance,NC=e.hydrateInstance,DC=e.hydrateTextInstance,LC=e.hydrateSuspenseInstance,BC=e.getNextHydratableInstanceAfterSuspenseInstance,FC=e.commitHydratedContainer,OC=e.commitHydratedSuspenseInstance,UC=e.clearSuspenseBoundary,zC=e.clearSuspenseBoundaryFromContainer,HC=e.shouldDeleteUnhydratedTailInstances,GC=e.didNotMatchHydratedContainerTextInstance,$C=e.didNotMatchHydratedTextInstance;function al(l){if(U===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);U=u&&u[1]||""}return`
`+U+l}var qf=!1;function Qf(l,u){if(!l||qf)return"";qf=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(te){var b=te}Reflect.construct(l,[],u)}else{try{u.call()}catch(te){b=te}l.call(u.prototype)}else{try{throw Error()}catch(te){b=te}l()}}catch(te){if(te&&b&&typeof te.stack=="string"){for(var S=te.stack.split(`
`),C=b.stack.split(`
`),B=S.length-1,$=C.length-1;1<=B&&0<=$&&S[B]!==C[$];)$--;for(;1<=B&&0<=$;B--,$--)if(S[B]!==C[$]){if(B!==1||$!==1)do if(B--,0>--$||S[B]!==C[$]){var q=`
`+S[B].replace(" at new "," at ");return l.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",l.displayName)),q}while(1<=B&&0<=$);break}}}finally{qf=!1,Error.prepareStackTrace=g}return(l=l?l.displayName||l.name:"")?al(l):""}var jC=Object.prototype.hasOwnProperty,Zf=[],zo=-1;function is(l){return{current:l}}function ct(l){0>zo||(l.current=Zf[zo],Zf[zo]=null,zo--)}function st(l,u){zo++,Zf[zo]=l.current,l.current=u}var ss={},sr=is(ss),Er=is(!1),Ys=ss;function Ho(l,u){var g=l.type.contextTypes;if(!g)return ss;var b=l.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===u)return b.__reactInternalMemoizedMaskedChildContext;var S,C={};for(S in g)C[S]=u[S];return b&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=C),C}function Ur(l){return(l=l.childContextTypes)!=null}function Jf(){ct(Er),ct(sr)}function Y1(l,u,g){if(sr.current!==ss)throw Error(s(168));st(sr,u),st(Er,g)}function K1(l,u,g){var b=l.stateNode;if(u=u.childContextTypes,typeof b.getChildContext!="function")return g;for(var S in b=b.getChildContext())if(!(S in u))throw Error(s(108,R(l)||"Unknown",S));return i({},g,b)}function mc(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ss,Ys=sr.current,st(sr,l),st(Er,Er.current),!0}function q1(l,u,g){var b=l.stateNode;if(!b)throw Error(s(169));g?(l=K1(l,u,Ys),b.__reactInternalMemoizedMergedChildContext=l,ct(Er),ct(sr),st(sr,l)):ct(Er),st(Er,g)}var bn=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(WC(l)/VC|0)|0},WC=Math.log,VC=Math.LN2,e0=64,t0=4194304;function ll(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function gc(l,u){var g=l.pendingLanes;if(g===0)return 0;var b=0,S=l.suspendedLanes,C=l.pingedLanes,B=268435455&g;if(B!==0){var $=B&~S;$!==0?b=ll($):(C&=B)!==0&&(b=ll(C))}else(B=g&~S)!==0?b=ll(B):C!==0&&(b=ll(C));if(b===0)return 0;if(u!==0&&u!==b&&(u&S)==0&&((S=b&-b)>=(C=u&-u)||S===16&&(4194240&C)!=0))return u;if((4&b)!=0&&(b|=16&g),(u=l.entangledLanes)!==0)for(l=l.entanglements,u&=b;0<u;)S=1<<(g=31-bn(u)),b|=l[g],u&=~S;return b}function XC(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function r0(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function Q1(){var l=e0;return(4194240&(e0<<=1))==0&&(e0=64),l}function n0(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function ul(l,u,g){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[u=31-bn(u)]=g}function i0(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var b=31-bn(g),S=1<<b;S&u|l[b]&u&&(l[b]|=u),g&=~S}}var Ye=0;function Z1(l){return 1<(l&=-l)?4<l?(268435455&l)!=0?16:536870912:4:1}var s0=n.unstable_scheduleCallback,J1=n.unstable_cancelCallback,YC=n.unstable_shouldYield,KC=n.unstable_requestPaint,Ht=n.unstable_now,o0=n.unstable_ImmediatePriority,qC=n.unstable_UserBlockingPriority,ex=n.unstable_NormalPriority,QC=n.unstable_IdlePriority,vc=null,Jn=null,wn=typeof Object.is=="function"?Object.is:function(l,u){return l===u&&(l!==0||1/l==1/u)||l!=l&&u!=u},Ii=null,xc=!1,a0=!1;function tx(l){Ii===null?Ii=[l]:Ii.push(l)}function ei(){if(!a0&&Ii!==null){a0=!0;var l=0,u=Ye;try{var g=Ii;for(Ye=1;l<g.length;l++){var b=g[l];do b=b(!0);while(b!==null)}Ii=null,xc=!1}catch(S){throw Ii!==null&&(Ii=Ii.slice(l+1)),s0(o0,ei),S}finally{Ye=u,a0=!1}}return null}var Go=[],$o=0,yc=null,_c=0,en=[],tn=0,Ks=null,ti=1,Ri="";function qs(l,u){Go[$o++]=_c,Go[$o++]=yc,yc=l,_c=u}function rx(l,u,g){en[tn++]=ti,en[tn++]=Ri,en[tn++]=Ks,Ks=l;var b=ti;l=Ri;var S=32-bn(b)-1;b&=~(1<<S),g+=1;var C=32-bn(u)+S;if(30<C){var B=S-S%5;C=(b&(1<<B)-1).toString(32),b>>=B,S-=B,ti=1<<32-bn(u)+S|g<<S|b,Ri=C+l}else ti=1<<C|g<<S|b,Ri=l}function l0(l){l.return!==null&&(qs(l,1),rx(l,1,0))}function u0(l){for(;l===yc;)yc=Go[--$o],Go[$o]=null,_c=Go[--$o],Go[$o]=null;for(;l===Ks;)Ks=en[--tn],en[tn]=null,Ri=en[--tn],en[tn]=null,ti=en[--tn],en[tn]=null}var zr=null,rn=null,ht=!1,cl=!1,Sn=null;function nx(l,u){var g=ln(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=l,(u=l.deletions)===null?(l.deletions=[g],l.flags|=16):u.push(g)}function ix(l,u){switch(l.tag){case 5:return(u=Yf(u,l.type,l.pendingProps))!==null&&(l.stateNode=u,zr=l,rn=IC(u),!0);case 6:return(u=fc(u,l.pendingProps))!==null&&(l.stateNode=u,zr=l,rn=null,!0);case 13:if((u=gr(u))!==null){var g=Ks!==null?{id:ti,overflow:Ri}:null;return l.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},(g=ln(18,null,null,0)).stateNode=u,g.return=l,l.child=g,zr=l,rn=null,!0}return!1;default:return!1}}function c0(l){return(1&l.mode)!=0&&(128&l.flags)==0}function h0(l){if(ht){var u=rn;if(u){var g=u;if(!ix(l,u)){if(c0(l))throw Error(s(418));u=pc(g);var b=zr;u&&ix(l,u)?nx(b,g):(l.flags=-4097&l.flags|2,ht=!1,zr=l)}}else{if(c0(l))throw Error(s(418));l.flags=-4097&l.flags|2,ht=!1,zr=l}}}function sx(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;zr=l}function bc(l){if(!Le||l!==zr)return!1;if(!ht)return sx(l),ht=!0,!1;if(l.tag!==3&&(l.tag!==5||HC(l.type)&&!xe(l.type,l.memoizedProps))){var u=rn;if(u){if(c0(l))throw ox(),Error(s(418));for(;u;)nx(l,u),u=pc(u)}}if(sx(l),l.tag===13){if(!Le)throw Error(s(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(s(317));rn=BC(l)}else rn=zr?pc(l.stateNode):null;return!0}function ox(){for(var l=rn;l;)l=pc(l)}function jo(){Le&&(rn=zr=null,cl=ht=!1)}function d0(l){Sn===null?Sn=[l]:Sn.push(l)}var ZC=o.ReactCurrentBatchConfig;function wc(l,u){if(wn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var S=g[b];if(!jC.call(u,S)||!wn(l[S],u[S]))return!1}return!0}function JC(l){switch(l.tag){case 5:return al(l.type);case 16:return al("Lazy");case 13:return al("Suspense");case 19:return al("SuspenseList");case 0:case 2:case 15:return l=Qf(l.type,!1);case 11:return l=Qf(l.type.render,!1);case 1:return l=Qf(l.type,!0);default:return""}}function Tn(l,u){if(l&&l.defaultProps){for(var g in u=i({},u),l=l.defaultProps)u[g]===void 0&&(u[g]=l[g]);return u}return u}var Sc=is(null),Tc=null,Wo=null,f0=null;function p0(){f0=Wo=Tc=null}function ax(l,u,g){tt?(st(Sc,u._currentValue),u._currentValue=g):(st(Sc,u._currentValue2),u._currentValue2=g)}function m0(l){var u=Sc.current;ct(Sc),tt?l._currentValue=u:l._currentValue2=u}function g0(l,u,g){for(;l!==null;){var b=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),l===g)break;l=l.return}}function Vo(l,u){Tc=l,f0=Wo=null,(l=l.dependencies)!==null&&l.firstContext!==null&&((l.lanes&u)!=0&&(Cr=!0),l.firstContext=null)}function nn(l){var u=tt?l._currentValue:l._currentValue2;if(f0!==l)if(l={context:l,memoizedValue:u,next:null},Wo===null){if(Tc===null)throw Error(s(308));Wo=l,Tc.dependencies={lanes:0,firstContext:l}}else Wo=Wo.next=l;return u}var Qs=null;function v0(l){Qs===null?Qs=[l]:Qs.push(l)}function lx(l,u,g,b){var S=u.interleaved;return S===null?(g.next=g,v0(u)):(g.next=S.next,S.next=g),u.interleaved=g,ri(l,b)}function ri(l,u){l.lanes|=u;var g=l.alternate;for(g!==null&&(g.lanes|=u),g=l,l=l.return;l!==null;)l.childLanes|=u,(g=l.alternate)!==null&&(g.childLanes|=u),g=l,l=l.return;return g.tag===3?g.stateNode:null}var os=!1;function x0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ux(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Mi(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function as(l,u,g){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(2&We)!=0){var S=b.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),b.pending=u,ri(l,g)}return(S=b.interleaved)===null?(u.next=u,v0(b)):(u.next=S.next,S.next=u),b.interleaved=u,ri(l,g)}function Ec(l,u,g){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&g)!=0)){var b=u.lanes;g|=b&=l.pendingLanes,u.lanes=g,i0(l,g)}}function cx(l,u){var g=l.updateQueue,b=l.alternate;if(b!==null&&g===(b=b.updateQueue)){var S=null,C=null;if((g=g.firstBaseUpdate)!==null){do{var B={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};C===null?S=C=B:C=C.next=B,g=g.next}while(g!==null);C===null?S=C=u:C=C.next=u}else S=C=u;return g={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:b.shared,effects:b.effects},void(l.updateQueue=g)}(l=g.lastBaseUpdate)===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}function Cc(l,u,g,b){var S=l.updateQueue;os=!1;var C=S.firstBaseUpdate,B=S.lastBaseUpdate,$=S.shared.pending;if($!==null){S.shared.pending=null;var q=$,te=q.next;q.next=null,B===null?C=te:B.next=te,B=q;var ne=l.alternate;ne!==null&&($=(ne=ne.updateQueue).lastBaseUpdate)!==B&&($===null?ne.firstBaseUpdate=te:$.next=te,ne.lastBaseUpdate=q)}if(C!==null){var pe=S.baseState;for(B=0,ne=te=q=null,$=C;;){var re=$.lane,ue=$.eventTime;if((b&re)===re){ne!==null&&(ne=ne.next={eventTime:ue,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var we=l,Ue=$;switch(re=u,ue=g,Ue.tag){case 1:if(typeof(we=Ue.payload)=="function"){pe=we.call(ue,pe,re);break e}pe=we;break e;case 3:we.flags=-65537&we.flags|128;case 0:if((re=typeof(we=Ue.payload)=="function"?we.call(ue,pe,re):we)==null)break e;pe=i({},pe,re);break e;case 2:os=!0}}$.callback!==null&&$.lane!==0&&(l.flags|=64,(re=S.effects)===null?S.effects=[$]:re.push($))}else ue={eventTime:ue,lane:re,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ne===null?(te=ne=ue,q=pe):ne=ne.next=ue,B|=re;if(($=$.next)===null){if(($=S.shared.pending)===null)break;$=(re=$).next,re.next=null,S.lastBaseUpdate=re,S.shared.pending=null}}if(ne===null&&(q=pe),S.baseState=q,S.firstBaseUpdate=te,S.lastBaseUpdate=ne,(u=S.shared.interleaved)!==null){S=u;do B|=S.lane,S=S.next;while(S!==u)}else C===null&&(S.shared.lanes=0);Js|=B,l.lanes=B,l.memoizedState=pe}}function hx(l,u,g){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var b=l[u],S=b.callback;if(S!==null){if(b.callback=null,b=g,typeof S!="function")throw Error(s(191,S));S.call(b)}}}var dx=new r.Component().refs;function y0(l,u,g,b){g=(g=g(b,u=l.memoizedState))==null?u:i({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var Ac={isMounted:function(l){return!!(l=l._reactInternals)&&N(l)===l},enqueueSetState:function(l,u,g){l=l._reactInternals;var b=lr(),S=hs(l),C=Mi(b,S);C.payload=u,g!=null&&(C.callback=g),(u=as(l,C,S))!==null&&(an(u,l,S,b),Ec(u,l,S))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var b=lr(),S=hs(l),C=Mi(b,S);C.tag=1,C.payload=u,g!=null&&(C.callback=g),(u=as(l,C,S))!==null&&(an(u,l,S,b),Ec(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=lr(),b=hs(l),S=Mi(g,b);S.tag=2,u!=null&&(S.callback=u),(u=as(l,S,b))!==null&&(an(u,l,b,g),Ec(u,l,b))}};function fx(l,u,g,b,S,C,B){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,C,B):!u.prototype||!u.prototype.isPureReactComponent||!wc(g,b)||!wc(S,C)}function px(l,u,g){var b=!1,S=ss,C=u.contextType;return typeof C=="object"&&C!==null?C=nn(C):(S=Ur(u)?Ys:sr.current,C=(b=(b=u.contextTypes)!=null)?Ho(l,S):ss),u=new u(g,C),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ac,l.stateNode=u,u._reactInternals=l,b&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=C),u}function mx(l,u,g,b){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==l&&Ac.enqueueReplaceState(u,u.state,null)}function _0(l,u,g,b){var S=l.stateNode;S.props=g,S.state=l.memoizedState,S.refs=dx,x0(l);var C=u.contextType;typeof C=="object"&&C!==null?S.context=nn(C):(C=Ur(u)?Ys:sr.current,S.context=Ho(l,C)),S.state=l.memoizedState,typeof(C=u.getDerivedStateFromProps)=="function"&&(y0(l,u,C,g),S.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(u=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),u!==S.state&&Ac.enqueueReplaceState(S,S.state,null),Cc(l,g,S,b),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}function hl(l,u,g){if((l=g.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(g._owner){if(g=g._owner){if(g.tag!==1)throw Error(s(309));var b=g.stateNode}if(!b)throw Error(s(147,l));var S=b,C=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===C?u.ref:(u=function(B){var $=S.refs;$===dx&&($=S.refs={}),B===null?delete $[C]:$[C]=B},u._stringRef=C,u)}if(typeof l!="string")throw Error(s(284));if(!g._owner)throw Error(s(290,l))}return l}function kc(l,u){throw l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function gx(l){return(0,l._init)(l._payload)}function vx(l){function u(ie,X){if(l){var ee=ie.deletions;ee===null?(ie.deletions=[X],ie.flags|=16):ee.push(X)}}function g(ie,X){if(!l)return null;for(;X!==null;)u(ie,X),X=X.sibling;return null}function b(ie,X){for(ie=new Map;X!==null;)X.key!==null?ie.set(X.key,X):ie.set(X.index,X),X=X.sibling;return ie}function S(ie,X){return(ie=fs(ie,X)).index=0,ie.sibling=null,ie}function C(ie,X,ee){return ie.index=ee,l?(ee=ie.alternate)!==null?(ee=ee.index)<X?(ie.flags|=2,X):ee:(ie.flags|=2,X):(ie.flags|=1048576,X)}function B(ie){return l&&ie.alternate===null&&(ie.flags|=2),ie}function $(ie,X,ee,oe){return X===null||X.tag!==6?((X=op(ee,ie.mode,oe)).return=ie,X):((X=S(X,ee)).return=ie,X)}function q(ie,X,ee,oe){var ke=ee.type;return ke===d?ne(ie,X,ee.props.children,oe,ee.key):X!==null&&(X.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===y&&gx(ke)===X.type)?((oe=S(X,ee.props)).ref=hl(ie,X,ee),oe.return=ie,oe):((oe=eh(ee.type,ee.key,ee.props,null,ie.mode,oe)).ref=hl(ie,X,ee),oe.return=ie,oe)}function te(ie,X,ee,oe){return X===null||X.tag!==4||X.stateNode.containerInfo!==ee.containerInfo||X.stateNode.implementation!==ee.implementation?((X=ap(ee,ie.mode,oe)).return=ie,X):((X=S(X,ee.children||[])).return=ie,X)}function ne(ie,X,ee,oe,ke){return X===null||X.tag!==7?((X=ro(ee,ie.mode,oe,ke)).return=ie,X):((X=S(X,ee)).return=ie,X)}function pe(ie,X,ee){if(typeof X=="string"&&X!==""||typeof X=="number")return(X=op(""+X,ie.mode,ee)).return=ie,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case a:return(ee=eh(X.type,X.key,X.props,null,ie.mode,ee)).ref=hl(ie,null,X),ee.return=ie,ee;case h:return(X=ap(X,ie.mode,ee)).return=ie,X;case y:return pe(ie,(0,X._init)(X._payload),ee)}if(Y(X)||P(X))return(X=ro(X,ie.mode,ee,null)).return=ie,X;kc(ie,X)}return null}function re(ie,X,ee,oe){var ke=X!==null?X.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ke!==null?null:$(ie,X,""+ee,oe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:return ee.key===ke?q(ie,X,ee,oe):null;case h:return ee.key===ke?te(ie,X,ee,oe):null;case y:return re(ie,X,(ke=ee._init)(ee._payload),oe)}if(Y(ee)||P(ee))return ke!==null?null:ne(ie,X,ee,oe,null);kc(ie,ee)}return null}function ue(ie,X,ee,oe,ke){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return $(X,ie=ie.get(ee)||null,""+oe,ke);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case a:return q(X,ie=ie.get(oe.key===null?ee:oe.key)||null,oe,ke);case h:return te(X,ie=ie.get(oe.key===null?ee:oe.key)||null,oe,ke);case y:return ue(ie,X,ee,(0,oe._init)(oe._payload),ke)}if(Y(oe)||P(oe))return ne(X,ie=ie.get(ee)||null,oe,ke,null);kc(X,oe)}return null}function we(ie,X,ee,oe){for(var ke=null,Ze=null,Se=X,Ke=X=0,Zt=null;Se!==null&&Ke<ee.length;Ke++){Se.index>Ke?(Zt=Se,Se=null):Zt=Se.sibling;var Je=re(ie,Se,ee[Ke],oe);if(Je===null){Se===null&&(Se=Zt);break}l&&Se&&Je.alternate===null&&u(ie,Se),X=C(Je,X,Ke),Ze===null?ke=Je:Ze.sibling=Je,Ze=Je,Se=Zt}if(Ke===ee.length)return g(ie,Se),ht&&qs(ie,Ke),ke;if(Se===null){for(;Ke<ee.length;Ke++)(Se=pe(ie,ee[Ke],oe))!==null&&(X=C(Se,X,Ke),Ze===null?ke=Se:Ze.sibling=Se,Ze=Se);return ht&&qs(ie,Ke),ke}for(Se=b(ie,Se);Ke<ee.length;Ke++)(Zt=ue(Se,ie,Ke,ee[Ke],oe))!==null&&(l&&Zt.alternate!==null&&Se.delete(Zt.key===null?Ke:Zt.key),X=C(Zt,X,Ke),Ze===null?ke=Zt:Ze.sibling=Zt,Ze=Zt);return l&&Se.forEach(function(ps){return u(ie,ps)}),ht&&qs(ie,Ke),ke}function Ue(ie,X,ee,oe){var ke=P(ee);if(typeof ke!="function")throw Error(s(150));if((ee=ke.call(ee))==null)throw Error(s(151));for(var Ze=ke=null,Se=X,Ke=X=0,Zt=null,Je=ee.next();Se!==null&&!Je.done;Ke++,Je=ee.next()){Se.index>Ke?(Zt=Se,Se=null):Zt=Se.sibling;var ps=re(ie,Se,Je.value,oe);if(ps===null){Se===null&&(Se=Zt);break}l&&Se&&ps.alternate===null&&u(ie,Se),X=C(ps,X,Ke),Ze===null?ke=ps:Ze.sibling=ps,Ze=ps,Se=Zt}if(Je.done)return g(ie,Se),ht&&qs(ie,Ke),ke;if(Se===null){for(;!Je.done;Ke++,Je=ee.next())(Je=pe(ie,Je.value,oe))!==null&&(X=C(Je,X,Ke),Ze===null?ke=Je:Ze.sibling=Je,Ze=Je);return ht&&qs(ie,Ke),ke}for(Se=b(ie,Se);!Je.done;Ke++,Je=ee.next())(Je=ue(Se,ie,Ke,Je.value,oe))!==null&&(l&&Je.alternate!==null&&Se.delete(Je.key===null?Ke:Je.key),X=C(Je,X,Ke),Ze===null?ke=Je:Ze.sibling=Je,Ze=Je);return l&&Se.forEach(function(SA){return u(ie,SA)}),ht&&qs(ie,Ke),ke}return function ie(X,ee,oe,ke){if(typeof oe=="object"&&oe!==null&&oe.type===d&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case a:e:{for(var Ze=oe.key,Se=ee;Se!==null;){if(Se.key===Ze){if((Ze=oe.type)===d){if(Se.tag===7){g(X,Se.sibling),(ee=S(Se,oe.props.children)).return=X,X=ee;break e}}else if(Se.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===y&&gx(Ze)===Se.type){g(X,Se.sibling),(ee=S(Se,oe.props)).ref=hl(X,Se,oe),ee.return=X,X=ee;break e}g(X,Se);break}u(X,Se),Se=Se.sibling}oe.type===d?((ee=ro(oe.props.children,X.mode,ke,oe.key)).return=X,X=ee):((ke=eh(oe.type,oe.key,oe.props,null,X.mode,ke)).ref=hl(X,ee,oe),ke.return=X,X=ke)}return B(X);case h:e:{for(Se=oe.key;ee!==null;){if(ee.key===Se){if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){g(X,ee.sibling),(ee=S(ee,oe.children||[])).return=X,X=ee;break e}g(X,ee);break}u(X,ee),ee=ee.sibling}(ee=ap(oe,X.mode,ke)).return=X,X=ee}return B(X);case y:return ie(X,ee,(Se=oe._init)(oe._payload),ke)}if(Y(oe))return we(X,ee,oe,ke);if(P(oe))return Ue(X,ee,oe,ke);kc(X,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,ee!==null&&ee.tag===6?(g(X,ee.sibling),(ee=S(ee,oe)).return=X,X=ee):(g(X,ee),(ee=op(oe,X.mode,ke)).return=X,X=ee),B(X)):g(X,ee)}}var Xo=vx(!0),xx=vx(!1),dl={},sn=is(dl),fl=is(dl),Yo=is(dl);function ni(l){if(l===dl)throw Error(s(174));return l}function b0(l,u){st(Yo,u),st(fl,l),st(sn,dl),l=Q(u),ct(sn),st(sn,l)}function Ko(){ct(sn),ct(fl),ct(Yo)}function yx(l){var u=ni(Yo.current),g=ni(sn.current);g!==(u=O(g,l.type,u))&&(st(fl,l),st(sn,u))}function w0(l){fl.current===l&&(ct(sn),ct(fl))}var St=is(0);function Pc(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&((g=g.dehydrated)===null||_n(g)||Uo(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((128&u.flags)!=0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var S0=[];function T0(){for(var l=0;l<S0.length;l++){var u=S0[l];tt?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}S0.length=0}var Ic=o.ReactCurrentDispatcher,E0=o.ReactCurrentBatchConfig,Zs=0,vt=null,Gt=null,$t=null,Rc=!1,pl=!1,ml=0,eA=0;function or(){throw Error(s(321))}function C0(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!wn(l[g],u[g]))return!1;return!0}function A0(l,u,g,b,S,C){if(Zs=C,vt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ic.current=l===null||l.memoizedState===null?iA:sA,l=g(b,S),pl){C=0;do{if(pl=!1,ml=0,25<=C)throw Error(s(301));C+=1,$t=Gt=null,u.updateQueue=null,Ic.current=oA,l=g(b,S)}while(pl)}if(Ic.current=Dc,u=Gt!==null&&Gt.next!==null,Zs=0,$t=Gt=vt=null,Rc=!1,u)throw Error(s(300));return l}function k0(){var l=ml!==0;return ml=0,l}function ii(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?vt.memoizedState=$t=l:$t=$t.next=l,$t}function on(){if(Gt===null){var l=vt.alternate;l=l!==null?l.memoizedState:null}else l=Gt.next;var u=$t===null?vt.memoizedState:$t.next;if(u!==null)$t=u,Gt=l;else{if(l===null)throw Error(s(310));l={memoizedState:(Gt=l).memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},$t===null?vt.memoizedState=$t=l:$t=$t.next=l}return $t}function gl(l,u){return typeof u=="function"?u(l):u}function P0(l){var u=on(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var b=Gt,S=b.baseQueue,C=g.pending;if(C!==null){if(S!==null){var B=S.next;S.next=C.next,C.next=B}b.baseQueue=S=C,g.pending=null}if(S!==null){C=S.next,b=b.baseState;var $=B=null,q=null,te=C;do{var ne=te.lane;if((Zs&ne)===ne)q!==null&&(q=q.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),b=te.hasEagerState?te.eagerState:l(b,te.action);else{var pe={lane:ne,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};q===null?($=q=pe,B=b):q=q.next=pe,vt.lanes|=ne,Js|=ne}te=te.next}while(te!==null&&te!==C);q===null?B=b:q.next=$,wn(b,u.memoizedState)||(Cr=!0),u.memoizedState=b,u.baseState=B,u.baseQueue=q,g.lastRenderedState=b}if((l=g.interleaved)!==null){S=l;do C=S.lane,vt.lanes|=C,Js|=C,S=S.next;while(S!==l)}else S===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function I0(l){var u=on(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var b=g.dispatch,S=g.pending,C=u.memoizedState;if(S!==null){g.pending=null;var B=S=S.next;do C=l(C,B.action),B=B.next;while(B!==S);wn(C,u.memoizedState)||(Cr=!0),u.memoizedState=C,u.baseQueue===null&&(u.baseState=C),g.lastRenderedState=C}return[C,b]}function _x(){}function bx(l,u){var g=vt,b=on(),S=u(),C=!wn(b.memoizedState,S);if(C&&(b.memoizedState=S,Cr=!0),b=b.queue,R0(Tx.bind(null,g,b,l),[l]),b.getSnapshot!==u||C||$t!==null&&1&$t.memoizedState.tag){if(g.flags|=2048,vl(9,Sx.bind(null,g,b,S,u),void 0,null),jt===null)throw Error(s(349));(30&Zs)!=0||wx(g,u,S)}return S}function wx(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},(u=vt.updateQueue)===null?(u={lastEffect:null,stores:null},vt.updateQueue=u,u.stores=[l]):(g=u.stores)===null?u.stores=[l]:g.push(l)}function Sx(l,u,g,b){u.value=g,u.getSnapshot=b,Ex(u)&&Cx(l)}function Tx(l,u,g){return g(function(){Ex(u)&&Cx(l)})}function Ex(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!wn(l,g)}catch{return!0}}function Cx(l){var u=ri(l,1);u!==null&&an(u,l,1,-1)}function Ax(l){var u=ii();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gl,lastRenderedState:l},u.queue=l,l=l.dispatch=nA.bind(null,vt,l),[u.memoizedState,l]}function vl(l,u,g,b){return l={tag:l,create:u,destroy:g,deps:b,next:null},(u=vt.updateQueue)===null?(u={lastEffect:null,stores:null},vt.updateQueue=u,u.lastEffect=l.next=l):(g=u.lastEffect)===null?u.lastEffect=l.next=l:(b=g.next,g.next=l,l.next=b,u.lastEffect=l),l}function kx(){return on().memoizedState}function Mc(l,u,g,b){var S=ii();vt.flags|=l,S.memoizedState=vl(1|u,g,void 0,b===void 0?null:b)}function Nc(l,u,g,b){var S=on();b=b===void 0?null:b;var C=void 0;if(Gt!==null){var B=Gt.memoizedState;if(C=B.destroy,b!==null&&C0(b,B.deps))return void(S.memoizedState=vl(u,g,C,b))}vt.flags|=l,S.memoizedState=vl(1|u,g,C,b)}function Px(l,u){return Mc(8390656,8,l,u)}function R0(l,u){return Nc(2048,8,l,u)}function Ix(l,u){return Nc(4,2,l,u)}function Rx(l,u){return Nc(4,4,l,u)}function Mx(l,u){return typeof u=="function"?(l=l(),u(l),function(){u(null)}):u!=null?(l=l(),u.current=l,function(){u.current=null}):void 0}function Nx(l,u,g){return g=g!=null?g.concat([l]):null,Nc(4,4,Mx.bind(null,u,l),g)}function M0(){}function Dx(l,u){var g=on();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&C0(u,b[1])?b[0]:(g.memoizedState=[l,u],l)}function Lx(l,u){var g=on();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&C0(u,b[1])?b[0]:(l=l(),g.memoizedState=[l,u],l)}function Bx(l,u,g){return(21&Zs)==0?(l.baseState&&(l.baseState=!1,Cr=!0),l.memoizedState=g):(wn(g,u)||(g=Q1(),vt.lanes|=g,Js|=g,l.baseState=!0),u)}function tA(l,u){var g=Ye;Ye=g!==0&&4>g?g:4,l(!0);var b=E0.transition;E0.transition={};try{l(!1),u()}finally{Ye=g,E0.transition=b}}function Fx(){return on().memoizedState}function rA(l,u,g){var b=hs(l);g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},Ox(l)?Ux(u,g):(g=lx(l,u,g,b))!==null&&(an(g,l,b,lr()),zx(g,u,b))}function nA(l,u,g){var b=hs(l),S={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(Ox(l))Ux(u,S);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=u.lastRenderedReducer)!==null)try{var B=u.lastRenderedState,$=C(B,g);if(S.hasEagerState=!0,S.eagerState=$,wn($,B)){var q=u.interleaved;return q===null?(S.next=S,v0(u)):(S.next=q.next,q.next=S),void(u.interleaved=S)}}catch{}(g=lx(l,u,S,b))!==null&&(an(g,l,b,S=lr()),zx(g,u,b))}}function Ox(l){var u=l.alternate;return l===vt||u!==null&&u===vt}function Ux(l,u){pl=Rc=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function zx(l,u,g){if((4194240&g)!=0){var b=u.lanes;g|=b&=l.pendingLanes,u.lanes=g,i0(l,g)}}var Dc={readContext:nn,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},iA={readContext:nn,useCallback:function(l,u){return ii().memoizedState=[l,u===void 0?null:u],l},useContext:nn,useEffect:Px,useImperativeHandle:function(l,u,g){return g=g!=null?g.concat([l]):null,Mc(4194308,4,Mx.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Mc(4194308,4,l,u)},useInsertionEffect:function(l,u){return Mc(4,2,l,u)},useMemo:function(l,u){var g=ii();return u=u===void 0?null:u,l=l(),g.memoizedState=[l,u],l},useReducer:function(l,u,g){var b=ii();return u=g!==void 0?g(u):u,b.memoizedState=b.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},b.queue=l,l=l.dispatch=rA.bind(null,vt,l),[b.memoizedState,l]},useRef:function(l){return l={current:l},ii().memoizedState=l},useState:Ax,useDebugValue:M0,useDeferredValue:function(l){return ii().memoizedState=l},useTransition:function(){var l=Ax(!1),u=l[0];return l=tA.bind(null,l[1]),ii().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,g){var b=vt,S=ii();if(ht){if(g===void 0)throw Error(s(407));g=g()}else{if(g=u(),jt===null)throw Error(s(349));(30&Zs)!=0||wx(b,u,g)}S.memoizedState=g;var C={value:g,getSnapshot:u};return S.queue=C,Px(Tx.bind(null,b,C,l),[l]),b.flags|=2048,vl(9,Sx.bind(null,b,C,g,u),void 0,null),g},useId:function(){var l=ii(),u=jt.identifierPrefix;if(ht){var g=Ri;u=":"+u+"R"+(g=(ti&~(1<<32-bn(ti)-1)).toString(32)+g),0<(g=ml++)&&(u+="H"+g.toString(32)),u+=":"}else u=":"+u+"r"+(g=eA++).toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},sA={readContext:nn,useCallback:Dx,useContext:nn,useEffect:R0,useImperativeHandle:Nx,useInsertionEffect:Ix,useLayoutEffect:Rx,useMemo:Lx,useReducer:P0,useRef:kx,useState:function(){return P0(gl)},useDebugValue:M0,useDeferredValue:function(l){return Bx(on(),Gt.memoizedState,l)},useTransition:function(){return[P0(gl)[0],on().memoizedState]},useMutableSource:_x,useSyncExternalStore:bx,useId:Fx,unstable_isNewReconciler:!1},oA={readContext:nn,useCallback:Dx,useContext:nn,useEffect:R0,useImperativeHandle:Nx,useInsertionEffect:Ix,useLayoutEffect:Rx,useMemo:Lx,useReducer:I0,useRef:kx,useState:function(){return I0(gl)},useDebugValue:M0,useDeferredValue:function(l){var u=on();return Gt===null?u.memoizedState=l:Bx(u,Gt.memoizedState,l)},useTransition:function(){return[I0(gl)[0],on().memoizedState]},useMutableSource:_x,useSyncExternalStore:bx,useId:Fx,unstable_isNewReconciler:!1};function qo(l,u){try{var g="",b=u;do g+=JC(b),b=b.return;while(b);var S=g}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:u,stack:S,digest:null}}function N0(l,u,g){return{value:l,source:null,stack:g??null,digest:u??null}}function D0(l,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var aA=typeof WeakMap=="function"?WeakMap:Map;function Hx(l,u,g){(g=Mi(-1,g)).tag=3,g.payload={element:null};var b=u.value;return g.callback=function(){Yc||(Yc=!0,J0=b),D0(0,u)},g}function Gx(l,u,g){(g=Mi(-1,g)).tag=3;var b=l.type.getDerivedStateFromError;if(typeof b=="function"){var S=u.value;g.payload=function(){return b(S)},g.callback=function(){D0(0,u)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(g.callback=function(){D0(0,u),typeof b!="function"&&(us===null?us=new Set([this]):us.add(this));var B=u.stack;this.componentDidCatch(u.value,{componentStack:B!==null?B:""})}),g}function $x(l,u,g){var b=l.pingCache;if(b===null){b=l.pingCache=new aA;var S=new Set;b.set(u,S)}else(S=b.get(u))===void 0&&(S=new Set,b.set(u,S));S.has(g)||(S.add(g),l=gA.bind(null,l,u,g),u.then(l,l))}function jx(l){do{var u;if((u=l.tag===13)&&(u=(u=l.memoizedState)===null||u.dehydrated!==null),u)return l;l=l.return}while(l!==null);return null}function Wx(l,u,g,b,S){return(1&l.mode)==0?(l===u?l.flags|=65536:(l.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:((u=Mi(-1,1)).tag=2,as(g,u,1))),g.lanes|=1),l):(l.flags|=65536,l.lanes=S,l)}var lA=o.ReactCurrentOwner,Cr=!1;function Ar(l,u,g,b){u.child=l===null?xx(u,null,g,b):Xo(u,l.child,g,b)}function Vx(l,u,g,b,S){g=g.render;var C=u.ref;return Vo(u,S),b=A0(l,u,g,b,C,S),g=k0(),l===null||Cr?(ht&&g&&l0(u),u.flags|=1,Ar(l,u,b,S),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,Ni(l,u,S))}function Xx(l,u,g,b,S){if(l===null){var C=g.type;return typeof C!="function"||sp(C)||C.defaultProps!==void 0||g.compare!==null||g.defaultProps!==void 0?((l=eh(g.type,null,b,u,u.mode,S)).ref=u.ref,l.return=u,u.child=l):(u.tag=15,u.type=C,Yx(l,u,C,b,S))}if(C=l.child,(l.lanes&S)==0){var B=C.memoizedProps;if((g=(g=g.compare)!==null?g:wc)(B,b)&&l.ref===u.ref)return Ni(l,u,S)}return u.flags|=1,(l=fs(C,b)).ref=u.ref,l.return=u,u.child=l}function Yx(l,u,g,b,S){if(l!==null){var C=l.memoizedProps;if(wc(C,b)&&l.ref===u.ref){if(Cr=!1,u.pendingProps=b=C,(l.lanes&S)==0)return u.lanes=l.lanes,Ni(l,u,S);(131072&l.flags)!=0&&(Cr=!0)}}return L0(l,u,g,b,S)}function Kx(l,u,g){var b=u.pendingProps,S=b.children,C=l!==null?l.memoizedState:null;if(b.mode==="hidden")if((1&u.mode)==0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(Zo,Hr),Hr|=g;else{if((1073741824&g)==0)return l=C!==null?C.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,st(Zo,Hr),Hr|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=C!==null?C.baseLanes:g,st(Zo,Hr),Hr|=b}else C!==null?(b=C.baseLanes|g,u.memoizedState=null):b=g,st(Zo,Hr),Hr|=b;return Ar(l,u,S,g),u.child}function qx(l,u){var g=u.ref;(l===null&&g!==null||l!==null&&l.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function L0(l,u,g,b,S){var C=Ur(g)?Ys:sr.current;return C=Ho(u,C),Vo(u,S),g=A0(l,u,g,b,C,S),b=k0(),l===null||Cr?(ht&&b&&l0(u),u.flags|=1,Ar(l,u,g,S),u.child):(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~S,Ni(l,u,S))}function Qx(l,u,g,b,S){if(Ur(g)){var C=!0;mc(u)}else C=!1;if(Vo(u,S),u.stateNode===null)Oc(l,u),px(u,g,b),_0(u,g,b,S),b=!0;else if(l===null){var B=u.stateNode,$=u.memoizedProps;B.props=$;var q=B.context,te=g.contextType;typeof te=="object"&&te!==null?te=nn(te):te=Ho(u,te=Ur(g)?Ys:sr.current);var ne=g.getDerivedStateFromProps,pe=typeof ne=="function"||typeof B.getSnapshotBeforeUpdate=="function";pe||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||($!==b||q!==te)&&mx(u,B,b,te),os=!1;var re=u.memoizedState;B.state=re,Cc(u,b,B,S),q=u.memoizedState,$!==b||re!==q||Er.current||os?(typeof ne=="function"&&(y0(u,g,ne,b),q=u.memoizedState),($=os||fx(u,g,$,b,re,q,te))?(pe||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(u.flags|=4194308)):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=q),B.props=b,B.state=q,B.context=te,b=$):(typeof B.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{B=u.stateNode,ux(l,u),$=u.memoizedProps,te=u.type===u.elementType?$:Tn(u.type,$),B.props=te,pe=u.pendingProps,re=B.context,typeof(q=g.contextType)=="object"&&q!==null?q=nn(q):q=Ho(u,q=Ur(g)?Ys:sr.current);var ue=g.getDerivedStateFromProps;(ne=typeof ue=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||($!==pe||re!==q)&&mx(u,B,b,q),os=!1,re=u.memoizedState,B.state=re,Cc(u,b,B,S);var we=u.memoizedState;$!==pe||re!==we||Er.current||os?(typeof ue=="function"&&(y0(u,g,ue,b),we=u.memoizedState),(te=os||fx(u,g,te,b,re,we,q)||!1)?(ne||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(b,we,q),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(b,we,q)),typeof B.componentDidUpdate=="function"&&(u.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof B.componentDidUpdate!="function"||$===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=we),B.props=b,B.state=we,B.context=q,b=te):(typeof B.componentDidUpdate!="function"||$===l.memoizedProps&&re===l.memoizedState||(u.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&re===l.memoizedState||(u.flags|=1024),b=!1)}return B0(l,u,g,b,C,S)}function B0(l,u,g,b,S,C){qx(l,u);var B=(128&u.flags)!=0;if(!b&&!B)return S&&q1(u,g,!1),Ni(l,u,C);b=u.stateNode,lA.current=u;var $=B&&typeof g.getDerivedStateFromError!="function"?null:b.render();return u.flags|=1,l!==null&&B?(u.child=Xo(u,l.child,null,C),u.child=Xo(u,null,$,C)):Ar(l,u,$,C),u.memoizedState=b.state,S&&q1(u,g,!0),u.child}function Zx(l){var u=l.stateNode;u.pendingContext?Y1(0,u.pendingContext,u.pendingContext!==u.context):u.context&&Y1(0,u.context,!1),b0(l,u.containerInfo)}function Jx(l,u,g,b,S){return jo(),d0(S),u.flags|=256,Ar(l,u,g,b),u.child}var xl,yl,Lc,Bc,F0={dehydrated:null,treeContext:null,retryLane:0};function O0(l){return{baseLanes:l,cachePool:null,transitions:null}}function ey(l,u,g){var b,S=u.pendingProps,C=St.current,B=!1,$=(128&u.flags)!=0;if((b=$)||(b=(l===null||l.memoizedState!==null)&&(2&C)!=0),b?(B=!0,u.flags&=-129):l!==null&&l.memoizedState===null||(C|=1),st(St,1&C),l===null)return h0(u),(l=u.memoizedState)!==null&&(l=l.dehydrated)!==null?((1&u.mode)==0?u.lanes=1:Uo(l)?u.lanes=8:u.lanes=1073741824,null):($=S.children,l=S.fallback,B?(S=u.mode,B=u.child,$={mode:"hidden",children:$},(1&S)==0&&B!==null?(B.childLanes=0,B.pendingProps=$):B=th($,S,0,null),l=ro(l,S,g,null),B.return=u,l.return=u,B.sibling=l,u.child=B,u.child.memoizedState=O0(g),u.memoizedState=F0,l):U0(u,$));if((C=l.memoizedState)!==null&&(b=C.dehydrated)!==null)return function(te,ne,pe,re,ue,we,Ue){if(pe)return 256&ne.flags?(ne.flags&=-257,Fc(te,ne,Ue,re=N0(Error(s(422))))):ne.memoizedState!==null?(ne.child=te.child,ne.flags|=128,null):(we=re.fallback,ue=ne.mode,re=th({mode:"visible",children:re.children},ue,0,null),(we=ro(we,ue,Ue,null)).flags|=2,re.return=ne,we.return=ne,re.sibling=we,ne.child=re,(1&ne.mode)!=0&&Xo(ne,te.child,null,Ue),ne.child.memoizedState=O0(Ue),ne.memoizedState=F0,we);if((1&ne.mode)==0)return Fc(te,ne,Ue,null);if(Uo(ue))return re=Kf(ue).digest,we=Error(s(419)),re=N0(we,re,void 0),Fc(te,ne,Ue,re);if(pe=(Ue&te.childLanes)!=0,Cr||pe){if((re=jt)!==null){switch(Ue&-Ue){case 4:ue=2;break;case 16:ue=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ue=32;break;case 536870912:ue=268435456;break;default:ue=0}(ue=(ue&(re.suspendedLanes|Ue))!=0?0:ue)!==0&&ue!==we.retryLane&&(we.retryLane=ue,ri(te,ue),an(re,te,ue,-1))}return ip(),Fc(te,ne,Ue,re=N0(Error(s(421))))}return _n(ue)?(ne.flags|=128,ne.child=te.child,ne=vA.bind(null,te),PC(ue,ne),null):(te=we.treeContext,Le&&(rn=MC(ue),zr=ne,ht=!0,Sn=null,cl=!1,te!==null&&(en[tn++]=ti,en[tn++]=Ri,en[tn++]=Ks,ti=te.id,Ri=te.overflow,Ks=ne)),ne=U0(ne,re.children),ne.flags|=4096,ne)}(l,u,$,S,b,C,g);if(B){B=S.fallback,$=u.mode,b=(C=l.child).sibling;var q={mode:"hidden",children:S.children};return(1&$)==0&&u.child!==C?((S=u.child).childLanes=0,S.pendingProps=q,u.deletions=null):(S=fs(C,q)).subtreeFlags=14680064&C.subtreeFlags,b!==null?B=fs(b,B):(B=ro(B,$,g,null)).flags|=2,B.return=u,S.return=u,S.sibling=B,u.child=S,S=B,B=u.child,$=($=l.child.memoizedState)===null?O0(g):{baseLanes:$.baseLanes|g,cachePool:null,transitions:$.transitions},B.memoizedState=$,B.childLanes=l.childLanes&~g,u.memoizedState=F0,S}return l=(B=l.child).sibling,S=fs(B,{mode:"visible",children:S.children}),(1&u.mode)==0&&(S.lanes=g),S.return=u,S.sibling=null,l!==null&&((g=u.deletions)===null?(u.deletions=[l],u.flags|=16):g.push(l)),u.child=S,u.memoizedState=null,S}function U0(l,u){return(u=th({mode:"visible",children:u},l.mode,0,null)).return=l,l.child=u}function Fc(l,u,g,b){return b!==null&&d0(b),Xo(u,l.child,null,g),(l=U0(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,l}function ty(l,u,g){l.lanes|=u;var b=l.alternate;b!==null&&(b.lanes|=u),g0(l.return,u,g)}function z0(l,u,g,b,S){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:S}:(C.isBackwards=u,C.rendering=null,C.renderingStartTime=0,C.last=b,C.tail=g,C.tailMode=S)}function ry(l,u,g){var b=u.pendingProps,S=b.revealOrder,C=b.tail;if(Ar(l,u,b.children,g),(2&(b=St.current))!=0)b=1&b|2,u.flags|=128;else{if(l!==null&&(128&l.flags)!=0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&ty(l,g,u);else if(l.tag===19)ty(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}if(st(St,b),(1&u.mode)==0)u.memoizedState=null;else switch(S){case"forwards":for(g=u.child,S=null;g!==null;)(l=g.alternate)!==null&&Pc(l)===null&&(S=g),g=g.sibling;(g=S)===null?(S=u.child,u.child=null):(S=g.sibling,g.sibling=null),z0(u,!1,S,g,C);break;case"backwards":for(g=null,S=u.child,u.child=null;S!==null;){if((l=S.alternate)!==null&&Pc(l)===null){u.child=S;break}l=S.sibling,S.sibling=g,g=S,S=l}z0(u,!0,g,null,C);break;case"together":z0(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Oc(l,u){(1&u.mode)==0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function Ni(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),Js|=u.lanes,(g&u.childLanes)==0)return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(g=fs(l=u.child,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,(g=g.sibling=fs(l,l.pendingProps)).return=u;g.sibling=null}return u.child}function si(l){l.flags|=4}function ny(l,u){if(l!==null&&l.child===u.child)return!0;if((16&u.flags)!=0)return!1;for(l=u.child;l!==null;){if((12854&l.flags)!=0||(12854&l.subtreeFlags)!=0)return!1;l=l.sibling}return!0}if(Oe)xl=function(l,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)j(l,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},yl=function(){},Lc=function(l,u,g,b,S){if((l=l.memoizedProps)!==b){var C=u.stateNode,B=ni(sn.current);g=K(C,g,l,b,S,B),(u.updateQueue=g)&&si(u)}},Bc=function(l,u,g,b){g!==b&&si(u)};else if(Qe){xl=function(l,u,g,b){for(var S=u.child;S!==null;){if(S.tag===5){var C=S.stateNode;g&&b&&(C=dc(C,S.type,S.memoizedProps,S)),j(l,C)}else if(S.tag===6)C=S.stateNode,g&&b&&(C=ol(C,S.memoizedProps,S)),j(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),xl(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var iy=function(l,u,g,b){for(var S=u.child;S!==null;){if(S.tag===5){var C=S.stateNode;g&&b&&(C=dc(C,S.type,S.memoizedProps,S)),cc(l,C)}else if(S.tag===6)C=S.stateNode,g&&b&&(C=ol(C,S.memoizedProps,S)),cc(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),iy(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===u)break;for(;S.sibling===null;){if(S.return===null||S.return===u)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};yl=function(l,u){var g=u.stateNode;if(!ny(l,u)){l=g.containerInfo;var b=uc(l);iy(b,u,!1,!1),g.pendingChildren=b,si(u),hc(l,b)}},Lc=function(l,u,g,b,S){var C=l.stateNode,B=l.memoizedProps;if((l=ny(l,u))&&B===b)u.stateNode=C;else{var $=u.stateNode,q=ni(sn.current),te=null;B!==b&&(te=K($,g,B,b,S,q)),l&&te===null?u.stateNode=C:(C=Xf(C,te,g,B,b,u,l,$),Z(C,g,b,S,q)&&si(u),u.stateNode=C,l?si(u):xl(C,u,!1,!1))}},Bc=function(l,u,g,b){g!==b?(l=ni(Yo.current),g=ni(sn.current),u.stateNode=fe(b,l,g,u),si(u)):u.stateNode=l.stateNode}}else yl=function(){},Lc=function(){},Bc=function(){};function _l(l,u){if(!ht)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function vr(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,b=0;if(u)for(var S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=14680064&S.subtreeFlags,b|=14680064&S.flags,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)g|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=b,l.childLanes=g,u}function uA(l,u,g){var b=u.pendingProps;switch(u0(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(u),null;case 1:case 17:return Ur(u.type)&&Jf(),vr(u),null;case 3:return g=u.stateNode,Ko(),ct(Er),ct(sr),T0(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),l!==null&&l.child!==null||(bc(u)?si(u):l===null||l.memoizedState.isDehydrated&&(256&u.flags)==0||(u.flags|=1024,Sn!==null&&(rp(Sn),Sn=null))),yl(l,u),vr(u),null;case 5:w0(u),g=ni(Yo.current);var S=u.type;if(l!==null&&u.stateNode!=null)Lc(l,u,S,b,g),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!b){if(u.stateNode===null)throw Error(s(166));return vr(u),null}if(l=ni(sn.current),bc(u)){if(!Le)throw Error(s(175));l=NC(u.stateNode,u.type,u.memoizedProps,g,l,u,!cl),u.updateQueue=l,l!==null&&si(u)}else{var C=H(S,b,g,l,u);xl(C,u,!1,!1),u.stateNode=C,Z(C,S,b,g,l)&&si(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return vr(u),null;case 6:if(l&&u.stateNode!=null)Bc(l,u,l.memoizedProps,b);else{if(typeof b!="string"&&u.stateNode===null)throw Error(s(166));if(l=ni(Yo.current),g=ni(sn.current),bc(u)){if(!Le)throw Error(s(176));if(l=u.stateNode,g=u.memoizedProps,(b=DC(l,g,u,!cl))&&(S=zr)!==null)switch(S.tag){case 3:GC(S.stateNode.containerInfo,l,g,(1&S.mode)!=0);break;case 5:$C(S.type,S.memoizedProps,S.stateNode,l,g,(1&S.mode)!=0)}b&&si(u)}else u.stateNode=fe(b,l,g,u)}return vr(u),null;case 13:if(ct(St),b=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(ht&&rn!==null&&(1&u.mode)!=0&&(128&u.flags)==0)ox(),jo(),u.flags|=98560,S=!1;else if(S=bc(u),b!==null&&b.dehydrated!==null){if(l===null){if(!S)throw Error(s(318));if(!Le)throw Error(s(344));if(!(S=(S=u.memoizedState)!==null?S.dehydrated:null))throw Error(s(317));LC(S,u)}else jo(),(128&u.flags)==0&&(u.memoizedState=null),u.flags|=4;vr(u),S=!1}else Sn!==null&&(rp(Sn),Sn=null),S=!0;if(!S)return 65536&u.flags?u:null}return(128&u.flags)!=0?(u.lanes=g,u):((g=b!==null)!=(l!==null&&l.memoizedState!==null)&&g&&(u.child.flags|=8192,(1&u.mode)!=0&&(l===null||(1&St.current)!=0?Bt===0&&(Bt=3):ip())),u.updateQueue!==null&&(u.flags|=4),vr(u),null);case 4:return Ko(),yl(l,u),l===null&&qt(u.stateNode.containerInfo),vr(u),null;case 10:return m0(u.type._context),vr(u),null;case 19:if(ct(St),(S=u.memoizedState)===null)return vr(u),null;if(b=(128&u.flags)!=0,(C=S.rendering)===null)if(b)_l(S,!1);else{if(Bt!==0||l!==null&&(128&l.flags)!=0)for(l=u.child;l!==null;){if((C=Pc(l))!==null){for(u.flags|=128,_l(S,!1),(l=C.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),u.subtreeFlags=0,l=g,g=u.child;g!==null;)S=l,(b=g).flags&=14680066,(C=b.alternate)===null?(b.childLanes=0,b.lanes=S,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=C.childLanes,b.lanes=C.lanes,b.child=C.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=C.memoizedProps,b.memoizedState=C.memoizedState,b.updateQueue=C.updateQueue,b.type=C.type,S=C.dependencies,b.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),g=g.sibling;return st(St,1&St.current|2),u.child}l=l.sibling}S.tail!==null&&Ht()>Z0&&(u.flags|=128,b=!0,_l(S,!1),u.lanes=4194304)}else{if(!b)if((l=Pc(C))!==null){if(u.flags|=128,b=!0,(l=l.updateQueue)!==null&&(u.updateQueue=l,u.flags|=4),_l(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!ht)return vr(u),null}else 2*Ht()-S.renderingStartTime>Z0&&g!==1073741824&&(u.flags|=128,b=!0,_l(S,!1),u.lanes=4194304);S.isBackwards?(C.sibling=u.child,u.child=C):((l=S.last)!==null?l.sibling=C:u.child=C,S.last=C)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.renderingStartTime=Ht(),u.sibling=null,l=St.current,st(St,b?1&l|2:1&l),u):(vr(u),null);case 22:case 23:return np(),g=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==g&&(u.flags|=8192),g&&(1&u.mode)!=0?(1073741824&Hr)!=0&&(vr(u),Oe&&6&u.subtreeFlags&&(u.flags|=8192)):vr(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function cA(l,u){switch(u0(u),u.tag){case 1:return Ur(u.type)&&Jf(),65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 3:return Ko(),ct(Er),ct(sr),T0(),(65536&(l=u.flags))!=0&&(128&l)==0?(u.flags=-65537&l|128,u):null;case 5:return w0(u),null;case 13:if(ct(St),(l=u.memoizedState)!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));jo()}return 65536&(l=u.flags)?(u.flags=-65537&l|128,u):null;case 19:return ct(St),null;case 4:return Ko(),null;case 10:return m0(u.type._context),null;case 22:case 23:return np(),null;default:return null}}var Uc=!1,ar=!1,hA=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Qo(l,u){var g=l.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){dt(l,u,b)}else g.current=null}function sy(l,u,g){try{g()}catch(b){dt(l,u,b)}}var oy=!1;function bl(l,u,g){var b=u.updateQueue;if((b=b!==null?b.lastEffect:null)!==null){var S=b=b.next;do{if((S.tag&l)===l){var C=S.destroy;S.destroy=void 0,C!==void 0&&sy(u,g,C)}S=S.next}while(S!==b)}}function zc(l,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var g=u=u.next;do{if((g.tag&l)===l){var b=g.create;g.destroy=b()}g=g.next}while(g!==u)}}function H0(l){var u=l.ref;if(u!==null){var g=l.stateNode;l.tag===5?l=J(g):l=g,typeof u=="function"?u(l):u.current=l}}function ay(l){var u=l.alternate;u!==null&&(l.alternate=null,ay(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode)!==null&&ts(u),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function ly(l){return l.tag===5||l.tag===3||l.tag===4}function uy(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ly(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function G0(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?nc(g,l,u):tc(g,l);else if(b!==4&&(l=l.child)!==null)for(G0(l,u,g),l=l.sibling;l!==null;)G0(l,u,g),l=l.sibling}function $0(l,u,g){var b=l.tag;if(b===5||b===6)l=l.stateNode,u?$f(g,l,u):Gf(g,l);else if(b!==4&&(l=l.child)!==null)for($0(l,u,g),l=l.sibling;l!==null;)$0(l,u,g),l=l.sibling}var xr=null,oi=!1;function ai(l,u,g){for(g=g.child;g!==null;)j0(l,u,g),g=g.sibling}function j0(l,u,g){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(vc,g)}catch{}switch(g.tag){case 5:ar||Qo(g,u);case 6:if(Oe){var b=xr,S=oi;xr=null,ai(l,u,g),oi=S,(xr=b)!==null&&(oi?jf(xr,g.stateNode):ic(xr,g.stateNode))}else ai(l,u,g);break;case 18:Oe&&xr!==null&&(oi?zC(xr,g.stateNode):UC(xr,g.stateNode));break;case 4:Oe?(b=xr,S=oi,xr=g.stateNode.containerInfo,oi=!0,ai(l,u,g),xr=b,oi=S):(Qe&&(b=g.stateNode.containerInfo,S=uc(b),sl(b,S)),ai(l,u,g));break;case 0:case 11:case 14:case 15:if(!ar&&(b=g.updateQueue)!==null&&(b=b.lastEffect)!==null){S=b=b.next;do{var C=S,B=C.destroy;C=C.tag,B!==void 0&&((2&C)!=0||(4&C)!=0)&&sy(g,u,B),S=S.next}while(S!==b)}ai(l,u,g);break;case 1:if(!ar&&(Qo(g,u),typeof(b=g.stateNode).componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch($){dt(g,u,$)}ai(l,u,g);break;case 21:ai(l,u,g);break;case 22:1&g.mode?(ar=(b=ar)||g.memoizedState!==null,ai(l,u,g),ar=b):ai(l,u,g);break;default:ai(l,u,g)}}function cy(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var g=l.stateNode;g===null&&(g=l.stateNode=new hA),u.forEach(function(b){var S=xA.bind(null,l,b);g.has(b)||(g.add(b),b.then(S,S))})}}function En(l,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var S=g[b];try{var C=l,B=u;if(Oe){var $=B;e:for(;$!==null;){switch($.tag){case 5:xr=$.stateNode,oi=!1;break e;case 3:case 4:xr=$.stateNode.containerInfo,oi=!0;break e}$=$.return}if(xr===null)throw Error(s(160));j0(C,B,S),xr=null,oi=!1}else j0(C,B,S);var q=S.alternate;q!==null&&(q.return=null),S.return=null}catch(te){dt(S,u,te)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)hy(u,l),u=u.sibling}function hy(l,u){var g=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(En(u,l),li(l),4&b){try{bl(3,l,l.return),zc(3,l)}catch(re){dt(l,l.return,re)}try{bl(5,l,l.return)}catch(re){dt(l,l.return,re)}}break;case 1:En(u,l),li(l),512&b&&g!==null&&Qo(g,g.return);break;case 5:if(En(u,l),li(l),512&b&&g!==null&&Qo(g,g.return),Oe){if(32&l.flags){var S=l.stateNode;try{sc(S)}catch(re){dt(l,l.return,re)}}if(4&b&&(S=l.stateNode)!=null){var C=l.memoizedProps;if(g=g!==null?g.memoizedProps:C,b=l.type,u=l.updateQueue,l.updateQueue=null,u!==null)try{Xs(S,u,b,g,C,l)}catch(re){dt(l,l.return,re)}}}break;case 6:if(En(u,l),li(l),4&b&&Oe){if(l.stateNode===null)throw Error(s(162));S=l.stateNode,C=l.memoizedProps,g=g!==null?g.memoizedProps:C;try{rc(S,g,C)}catch(re){dt(l,l.return,re)}}break;case 3:if(En(u,l),li(l),4&b){if(Oe&&Le&&g!==null&&g.memoizedState.isDehydrated)try{FC(u.containerInfo)}catch(re){dt(l,l.return,re)}if(Qe){S=u.containerInfo,C=u.pendingChildren;try{sl(S,C)}catch(re){dt(l,l.return,re)}}}break;case 4:if(En(u,l),li(l),4&b&&Qe){S=(C=l.stateNode).containerInfo,C=C.pendingChildren;try{sl(S,C)}catch(re){dt(l,l.return,re)}}break;case 13:En(u,l),li(l),8192&(S=l.child).flags&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(Q0=Ht())),4&b&&cy(l);break;case 22:var B=g!==null&&g.memoizedState!==null;if(1&l.mode?(ar=(g=ar)||B,En(u,l),ar=g):En(u,l),li(l),8192&b){if(g=l.memoizedState!==null,(l.stateNode.isHidden=g)&&!B&&(1&l.mode)!=0)for(_e=l,b=l.child;b!==null;){for(u=_e=b;_e!==null;){var $=(B=_e).child;switch(B.tag){case 0:case 11:case 14:case 15:bl(4,B,B.return);break;case 1:Qo(B,B.return);var q=B.stateNode;if(typeof q.componentWillUnmount=="function"){var te=B,ne=B.return;try{var pe=te;q.props=pe.memoizedProps,q.state=pe.memoizedState,q.componentWillUnmount()}catch(re){dt(te,ne,re)}}break;case 5:Qo(B,B.return);break;case 22:if(B.memoizedState!==null){py(u);continue}}$!==null?($.return=B,_e=$):py(u)}b=b.sibling}if(Oe){e:if(b=null,Oe)for(u=l;;){if(u.tag===5){if(b===null){b=u;try{S=u.stateNode,g?oc(S):ac(u.stateNode,u.memoizedProps)}catch(re){dt(l,l.return,re)}}}else if(u.tag===6){if(b===null)try{C=u.stateNode,g?Wf(C):Vf(C,u.memoizedProps)}catch(re){dt(l,l.return,re)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;b===u&&(b=null),u=u.return}b===u&&(b=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:En(u,l),li(l),4&b&&cy(l);break;case 21:break;default:En(u,l),li(l)}}function li(l){var u=l.flags;if(2&u){try{if(Oe){e:{for(var g=l.return;g!==null;){if(ly(g)){var b=g;break e}g=g.return}throw Error(s(160))}switch(b.tag){case 5:var S=b.stateNode;32&b.flags&&(sc(S),b.flags&=-33),$0(l,uy(l),S);break;case 3:case 4:var C=b.stateNode.containerInfo;G0(l,uy(l),C);break;default:throw Error(s(161))}}}catch(B){dt(l,l.return,B)}l.flags&=-3}4096&u&&(l.flags&=-4097)}function dA(l,u,g){_e=l,dy(l)}function dy(l,u,g){for(var b=(1&l.mode)!=0;_e!==null;){var S=_e,C=S.child;if(S.tag===22&&b){var B=S.memoizedState!==null||Uc;if(!B){var $=S.alternate,q=$!==null&&$.memoizedState!==null||ar;$=Uc;var te=ar;if(Uc=B,(ar=q)&&!te)for(_e=S;_e!==null;)q=(B=_e).child,B.tag===22&&B.memoizedState!==null?my(S):q!==null?(q.return=B,_e=q):my(S);for(;C!==null;)_e=C,dy(C),C=C.sibling;_e=S,Uc=$,ar=te}fy(l)}else(8772&S.subtreeFlags)!=0&&C!==null?(C.return=S,_e=C):fy(l)}}function fy(l){for(;_e!==null;){var u=_e;if((8772&u.flags)!=0){var g=u.alternate;try{if((8772&u.flags)!=0)switch(u.tag){case 0:case 11:case 15:ar||zc(5,u);break;case 1:var b=u.stateNode;if(4&u.flags&&!ar)if(g===null)b.componentDidMount();else{var S=u.elementType===u.type?g.memoizedProps:Tn(u.type,g.memoizedProps);b.componentDidUpdate(S,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var C=u.updateQueue;C!==null&&hx(u,C,b);break;case 3:var B=u.updateQueue;if(B!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=J(u.child.stateNode);break;case 1:g=u.child.stateNode}hx(u,B,g)}break;case 5:var $=u.stateNode;g===null&&4&u.flags&&ns($,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Le&&u.memoizedState===null){var q=u.alternate;if(q!==null){var te=q.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&OC(ne)}}}break;default:throw Error(s(163))}ar||512&u.flags&&H0(u)}catch(pe){dt(u,u.return,pe)}}if(u===l){_e=null;break}if((g=u.sibling)!==null){g.return=u.return,_e=g;break}_e=u.return}}function py(l){for(;_e!==null;){var u=_e;if(u===l){_e=null;break}var g=u.sibling;if(g!==null){g.return=u.return,_e=g;break}_e=u.return}}function my(l){for(;_e!==null;){var u=_e;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{zc(4,u)}catch(q){dt(u,g,q)}break;case 1:var b=u.stateNode;if(typeof b.componentDidMount=="function"){var S=u.return;try{b.componentDidMount()}catch(q){dt(u,S,q)}}var C=u.return;try{H0(u)}catch(q){dt(u,C,q)}break;case 5:var B=u.return;try{H0(u)}catch(q){dt(u,B,q)}}}catch(q){dt(u,u.return,q)}if(u===l){_e=null;break}var $=u.sibling;if($!==null){$.return=u.return,_e=$;break}_e=u.return}}var Hc=0,Gc=1,$c=2,jc=3,Wc=4;if(typeof Symbol=="function"&&Symbol.for){var wl=Symbol.for;Hc=wl("selector.component"),Gc=wl("selector.has_pseudo_class"),$c=wl("selector.role"),jc=wl("selector.test_id"),Wc=wl("selector.text")}function W0(l){var u=it(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((l=Or(l))===null)throw Error(s(362));return l.stateNode.current}function V0(l,u){switch(u.$$typeof){case Hc:if(l.type===u.value)return!0;break;case Gc:e:{u=u.value,l=[l,0];for(var g=0;g<l.length;){var b=l[g++],S=l[g++],C=u[S];if(b.tag!==5||!Zn(b)){for(;C!=null&&V0(b,C);)C=u[++S];if(S===u.length){u=!0;break e}for(b=b.child;b!==null;)l.push(b,S),b=b.sibling}}u=!1}return u;case $c:if(l.tag===5&&ec(l.stateNode,u.value))return!0;break;case Wc:if((l.tag===5||l.tag===6)&&(l=Qn(l))!==null&&0<=l.indexOf(u.value))return!0;break;case jc:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function X0(l){switch(l.$$typeof){case Hc:return"<"+(I(l.value)||"Unknown")+">";case Gc:return":has("+(X0(l)||"")+")";case $c:return'[role="'+l.value+'"]';case Wc:return'"'+l.value+'"';case jc:return'[data-testname="'+l.value+'"]';default:throw Error(s(365))}}function gy(l,u){var g=[];l=[l,0];for(var b=0;b<l.length;){var S=l[b++],C=l[b++],B=u[C];if(S.tag!==5||!Zn(S)){for(;B!=null&&V0(S,B);)B=u[++C];if(C===u.length)g.push(S);else for(S=S.child;S!==null;)l.push(S,C),S=S.sibling}}return g}function Y0(l,u){if(!yn)throw Error(s(363));l=gy(l=W0(l),u),u=[],l=Array.from(l);for(var g=0;g<l.length;){var b=l[g++];if(b.tag===5)Zn(b)||u.push(b.stateNode);else for(b=b.child;b!==null;)l.push(b),b=b.sibling}return u}var fA=Math.ceil,Vc=o.ReactCurrentDispatcher,K0=o.ReactCurrentOwner,Ct=o.ReactCurrentBatchConfig,We=0,jt=null,Mt=null,Qt=0,Hr=0,Zo=is(0),Bt=0,Sl=null,Js=0,Xc=0,q0=0,Tl=null,Gr=null,Q0=0,Z0=1/0,ls=null;function Jo(){Z0=Ht()+500}var vy,Yc=!1,J0=null,us=null,Kc=!1,cs=null,qc=0,El=0,ep=null,Qc=-1,Zc=0;function lr(){return(6&We)!=0?Ht():Qc!==-1?Qc:Qc=Ht()}function hs(l){return(1&l.mode)==0?1:(2&We)!=0&&Qt!==0?Qt&-Qt:ZC.transition!==null?(Zc===0&&(Zc=Q1()),Zc):(l=Ye)!==0?l:Fr()}function an(l,u,g,b){if(50<El)throw El=0,ep=null,Error(s(185));ul(l,g,b),(2&We)!=0&&l===jt||(l===jt&&((2&We)==0&&(Xc|=g),Bt===4&&ds(l,Qt)),kr(l,b),g===1&&We===0&&(1&u.mode)==0&&(Jo(),xc&&ei()))}function kr(l,u){var g=l.callbackNode;(function(S,C){for(var B=S.suspendedLanes,$=S.pingedLanes,q=S.expirationTimes,te=S.pendingLanes;0<te;){var ne=31-bn(te),pe=1<<ne,re=q[ne];re===-1?(pe&B)!=0&&(pe&$)==0||(q[ne]=XC(pe,C)):re<=C&&(S.expiredLanes|=pe),te&=~pe}})(l,u);var b=gc(l,l===jt?Qt:0);if(b===0)g!==null&&J1(g),l.callbackNode=null,l.callbackPriority=0;else if(u=b&-b,l.callbackPriority!==u){if(g!=null&&J1(g),u===1)l.tag===0?function(S){xc=!0,tx(S)}(yy.bind(null,l)):tx(yy.bind(null,l)),Jr?il(function(){(6&We)==0&&ei()}):s0(o0,ei),g=null;else{switch(Z1(b)){case 1:g=o0;break;case 4:g=qC;break;case 16:default:g=ex;break;case 536870912:g=QC}g=Ay(g,xy.bind(null,l))}l.callbackPriority=u,l.callbackNode=g}}function xy(l,u){if(Qc=-1,Zc=0,(6&We)!=0)throw Error(s(327));var g=l.callbackNode;if(to()&&l.callbackNode!==g)return null;var b=gc(l,l===jt?Qt:0);if(b===0)return null;if((30&b)!=0||(b&l.expiredLanes)!=0||u)u=Jc(l,b);else{u=b;var S=We;We|=2;var C=wy();for(jt===l&&Qt===u||(ls=null,Jo(),eo(l,u));;)try{mA();break}catch($){by(l,$)}p0(),Vc.current=C,We=S,Mt!==null?u=0:(jt=null,Qt=0,u=Bt)}if(u!==0){if(u===2&&(S=r0(l))!==0&&(b=S,u=tp(l,S)),u===1)throw g=Sl,eo(l,0),ds(l,b),kr(l,Ht()),g;if(u===6)ds(l,b);else{if(S=l.current.alternate,(30&b)==0&&!function($){for(var q=$;;){if(16384&q.flags){var te=q.updateQueue;if(te!==null&&(te=te.stores)!==null)for(var ne=0;ne<te.length;ne++){var pe=te[ne],re=pe.getSnapshot;pe=pe.value;try{if(!wn(re(),pe))return!1}catch{return!1}}}if(te=q.child,16384&q.subtreeFlags&&te!==null)te.return=q,q=te;else{if(q===$)break;for(;q.sibling===null;){if(q.return===null||q.return===$)return!0;q=q.return}q.sibling.return=q.return,q=q.sibling}}return!0}(S)&&((u=Jc(l,b))===2&&(C=r0(l))!==0&&(b=C,u=tp(l,C)),u===1))throw g=Sl,eo(l,0),ds(l,b),kr(l,Ht()),g;switch(l.finishedWork=S,l.finishedLanes=b,u){case 0:case 1:throw Error(s(345));case 2:case 5:ea(l,Gr,ls);break;case 3:if(ds(l,b),(130023424&b)===b&&10<(u=Q0+500-Ht())){if(gc(l,0)!==0)break;if(((S=l.suspendedLanes)&b)!==b){lr(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=Re(ea.bind(null,l,Gr,ls),u);break}ea(l,Gr,ls);break;case 4:if(ds(l,b),(4194240&b)===b)break;for(u=l.eventTimes,S=-1;0<b;){var B=31-bn(b);C=1<<B,(B=u[B])>S&&(S=B),b&=~C}if(b=S,10<(b=(120>(b=Ht()-b)?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*fA(b/1960))-b)){l.timeoutHandle=Re(ea.bind(null,l,Gr,ls),b);break}ea(l,Gr,ls);break;default:throw Error(s(329))}}}return kr(l,Ht()),l.callbackNode===g?xy.bind(null,l):null}function tp(l,u){var g=Tl;return l.current.memoizedState.isDehydrated&&(eo(l,u).flags|=256),(l=Jc(l,u))!==2&&(u=Gr,Gr=g,u!==null&&rp(u)),l}function rp(l){Gr===null?Gr=l:Gr.push.apply(Gr,l)}function ds(l,u){for(u&=~q0,u&=~Xc,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var g=31-bn(u),b=1<<g;l[g]=-1,u&=~b}}function yy(l){if((6&We)!=0)throw Error(s(327));to();var u=gc(l,0);if((1&u)==0)return kr(l,Ht()),null;var g=Jc(l,u);if(l.tag!==0&&g===2){var b=r0(l);b!==0&&(u=b,g=tp(l,b))}if(g===1)throw g=Sl,eo(l,0),ds(l,u),kr(l,Ht()),g;if(g===6)throw Error(s(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,ea(l,Gr,ls),kr(l,Ht()),null}function _y(l){cs!==null&&cs.tag===0&&(6&We)==0&&to();var u=We;We|=1;var g=Ct.transition,b=Ye;try{if(Ct.transition=null,Ye=1,l)return l()}finally{Ye=b,Ct.transition=g,(6&(We=u))==0&&ei()}}function np(){Hr=Zo.current,ct(Zo)}function eo(l,u){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;if(g!==gt&&(l.timeoutHandle=gt,Ce(g)),Mt!==null)for(g=Mt.return;g!==null;){var b=g;switch(u0(b),b.tag){case 1:(b=b.type.childContextTypes)!=null&&Jf();break;case 3:Ko(),ct(Er),ct(sr),T0();break;case 5:w0(b);break;case 4:Ko();break;case 13:case 19:ct(St);break;case 10:m0(b.type._context);break;case 22:case 23:np()}g=g.return}if(jt=l,Mt=l=fs(l.current,null),Qt=Hr=u,Bt=0,Sl=null,q0=Xc=Js=0,Gr=Tl=null,Qs!==null){for(u=0;u<Qs.length;u++)if((b=(g=Qs[u]).interleaved)!==null){g.interleaved=null;var S=b.next,C=g.pending;if(C!==null){var B=C.next;C.next=S,b.next=B}g.pending=b}Qs=null}return l}function by(l,u){for(;;){var g=Mt;try{if(p0(),Ic.current=Dc,Rc){for(var b=vt.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}Rc=!1}if(Zs=0,$t=Gt=vt=null,pl=!1,ml=0,K0.current=null,g===null||g.return===null){Bt=1,Sl=u,Mt=null;break}e:{var C=l,B=g.return,$=g,q=u;if(u=Qt,$.flags|=32768,q!==null&&typeof q=="object"&&typeof q.then=="function"){var te=q,ne=$,pe=ne.tag;if((1&ne.mode)==0&&(pe===0||pe===11||pe===15)){var re=ne.alternate;re?(ne.updateQueue=re.updateQueue,ne.memoizedState=re.memoizedState,ne.lanes=re.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var ue=jx(B);if(ue!==null){ue.flags&=-257,Wx(ue,B,$,0,u),1&ue.mode&&$x(C,te,u),q=te;var we=(u=ue).updateQueue;if(we===null){var Ue=new Set;Ue.add(q),u.updateQueue=Ue}else we.add(q);break e}if((1&u)==0){$x(C,te,u),ip();break e}q=Error(s(426))}else if(ht&&1&$.mode){var ie=jx(B);if(ie!==null){(65536&ie.flags)==0&&(ie.flags|=256),Wx(ie,B,$,0,u),d0(qo(q,$));break e}}C=q=qo(q,$),Bt!==4&&(Bt=2),Tl===null?Tl=[C]:Tl.push(C),C=B;do{switch(C.tag){case 3:C.flags|=65536,u&=-u,C.lanes|=u,cx(C,Hx(0,q,u));break e;case 1:$=q;var X=C.type,ee=C.stateNode;if((128&C.flags)==0&&(typeof X.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(us===null||!us.has(ee)))){C.flags|=65536,u&=-u,C.lanes|=u,cx(C,Gx(C,$,u));break e}}C=C.return}while(C!==null)}Ty(g)}catch(oe){u=oe,Mt===g&&g!==null&&(Mt=g=g.return);continue}break}}function wy(){var l=Vc.current;return Vc.current=Dc,l===null?Dc:l}function ip(){Bt!==0&&Bt!==3&&Bt!==2||(Bt=4),jt===null||(268435455&Js)==0&&(268435455&Xc)==0||ds(jt,Qt)}function Jc(l,u){var g=We;We|=2;var b=wy();for(jt===l&&Qt===u||(ls=null,eo(l,u));;)try{pA();break}catch(S){by(l,S)}if(p0(),We=g,Vc.current=b,Mt!==null)throw Error(s(261));return jt=null,Qt=0,Bt}function pA(){for(;Mt!==null;)Sy(Mt)}function mA(){for(;Mt!==null&&!YC();)Sy(Mt)}function Sy(l){var u=vy(l.alternate,l,Hr);l.memoizedProps=l.pendingProps,u===null?Ty(l):Mt=u,K0.current=null}function Ty(l){var u=l;do{var g=u.alternate;if(l=u.return,(32768&u.flags)==0){if((g=uA(g,u,Hr))!==null)return void(Mt=g)}else{if((g=cA(g,u))!==null)return g.flags&=32767,void(Mt=g);if(l===null)return Bt=6,void(Mt=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((u=u.sibling)!==null)return void(Mt=u);Mt=u=l}while(u!==null);Bt===0&&(Bt=5)}function ea(l,u,g){var b=Ye,S=Ct.transition;try{Ct.transition=null,Ye=1,function(C,B,$,q){do to();while(cs!==null);if((6&We)!=0)throw Error(s(327));$=C.finishedWork;var te=C.finishedLanes;if($===null)return null;if(C.finishedWork=null,C.finishedLanes=0,$===C.current)throw Error(s(177));C.callbackNode=null,C.callbackPriority=0;var ne=$.lanes|$.childLanes;if(function(ue,we){var Ue=ue.pendingLanes&~we;ue.pendingLanes=we,ue.suspendedLanes=0,ue.pingedLanes=0,ue.expiredLanes&=we,ue.mutableReadLanes&=we,ue.entangledLanes&=we,we=ue.entanglements;var ie=ue.eventTimes;for(ue=ue.expirationTimes;0<Ue;){var X=31-bn(Ue),ee=1<<X;we[X]=0,ie[X]=-1,ue[X]=-1,Ue&=~ee}}(C,ne),C===jt&&(Mt=jt=null,Qt=0),(2064&$.subtreeFlags)==0&&(2064&$.flags)==0||Kc||(Kc=!0,Ay(ex,function(){return to(),null})),ne=(15990&$.flags)!=0,(15990&$.subtreeFlags)!=0||ne){ne=Ct.transition,Ct.transition=null;var pe=Ye;Ye=1;var re=We;We|=4,K0.current=null,function(ue,we){for(L(ue.containerInfo),_e=we;_e!==null;)if(we=(ue=_e).child,(1028&ue.subtreeFlags)!=0&&we!==null)we.return=ue,_e=we;else for(;_e!==null;){ue=_e;try{var Ue=ue.alternate;if((1024&ue.flags)!=0)switch(ue.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ue!==null){var ie=Ue.memoizedProps,X=Ue.memoizedState,ee=ue.stateNode,oe=ee.getSnapshotBeforeUpdate(ue.elementType===ue.type?ie:Tn(ue.type,ie),X);ee.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:Oe&&lc(ue.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(ke){dt(ue,ue.return,ke)}if((we=ue.sibling)!==null){we.return=ue.return,_e=we;break}_e=ue.return}Ue=oy,oy=!1}(C,$),hy($,C),G(C.containerInfo),C.current=$,dA($),KC(),We=re,Ye=pe,Ct.transition=ne}else C.current=$;if(Kc&&(Kc=!1,cs=C,qc=te),ne=C.pendingLanes,ne===0&&(us=null),function(ue){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(vc,ue,void 0,(128&ue.current.flags)==128)}catch{}}($.stateNode),kr(C,Ht()),B!==null)for(q=C.onRecoverableError,$=0;$<B.length;$++)te=B[$],q(te.value,{componentStack:te.stack,digest:te.digest});if(Yc)throw Yc=!1,C=J0,J0=null,C;(1&qc)!=0&&C.tag!==0&&to(),ne=C.pendingLanes,(1&ne)!=0?C===ep?El++:(El=0,ep=C):El=0,ei()}(l,u,g,b)}finally{Ct.transition=S,Ye=b}return null}function to(){if(cs!==null){var l=Z1(qc),u=Ct.transition,g=Ye;try{if(Ct.transition=null,Ye=16>l?16:l,cs===null)var b=!1;else{if(l=cs,cs=null,qc=0,(6&We)!=0)throw Error(s(331));var S=We;for(We|=4,_e=l.current;_e!==null;){var C=_e,B=C.child;if((16&_e.flags)!=0){var $=C.deletions;if($!==null){for(var q=0;q<$.length;q++){var te=$[q];for(_e=te;_e!==null;){var ne=_e;switch(ne.tag){case 0:case 11:case 15:bl(8,ne,C)}var pe=ne.child;if(pe!==null)pe.return=ne,_e=pe;else for(;_e!==null;){var re=(ne=_e).sibling,ue=ne.return;if(ay(ne),ne===te){_e=null;break}if(re!==null){re.return=ue,_e=re;break}_e=ue}}}var we=C.alternate;if(we!==null){var Ue=we.child;if(Ue!==null){we.child=null;do{var ie=Ue.sibling;Ue.sibling=null,Ue=ie}while(Ue!==null)}}_e=C}}if((2064&C.subtreeFlags)!=0&&B!==null)B.return=C,_e=B;else e:for(;_e!==null;){if((2048&(C=_e).flags)!=0)switch(C.tag){case 0:case 11:case 15:bl(9,C,C.return)}var X=C.sibling;if(X!==null){X.return=C.return,_e=X;break e}_e=C.return}}var ee=l.current;for(_e=ee;_e!==null;){var oe=(B=_e).child;if((2064&B.subtreeFlags)!=0&&oe!==null)oe.return=B,_e=oe;else e:for(B=ee;_e!==null;){if((2048&($=_e).flags)!=0)try{switch($.tag){case 0:case 11:case 15:zc(9,$)}}catch(Ze){dt($,$.return,Ze)}if($===B){_e=null;break e}var ke=$.sibling;if(ke!==null){ke.return=$.return,_e=ke;break e}_e=$.return}}if(We=S,ei(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(vc,l)}catch{}b=!0}return b}finally{Ye=g,Ct.transition=u}}return!1}function Ey(l,u,g){l=as(l,u=Hx(0,u=qo(g,u),1),1),u=lr(),l!==null&&(ul(l,1,u),kr(l,u))}function dt(l,u,g){if(l.tag===3)Ey(l,l,g);else for(;u!==null;){if(u.tag===3){Ey(u,l,g);break}if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(us===null||!us.has(b))){u=as(u,l=Gx(u,l=qo(g,l),1),1),l=lr(),u!==null&&(ul(u,1,l),kr(u,l));break}}u=u.return}}function gA(l,u,g){var b=l.pingCache;b!==null&&b.delete(u),u=lr(),l.pingedLanes|=l.suspendedLanes&g,jt===l&&(Qt&g)===g&&(Bt===4||Bt===3&&(130023424&Qt)===Qt&&500>Ht()-Q0?eo(l,0):q0|=g),kr(l,u)}function Cy(l,u){u===0&&((1&l.mode)==0?u=1:(u=t0,(130023424&(t0<<=1))==0&&(t0=4194304)));var g=lr();(l=ri(l,u))!==null&&(ul(l,u,g),kr(l,g))}function vA(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),Cy(l,g)}function xA(l,u){var g=0;switch(l.tag){case 13:var b=l.stateNode,S=l.memoizedState;S!==null&&(g=S.retryLane);break;case 19:b=l.stateNode;break;default:throw Error(s(314))}b!==null&&b.delete(u),Cy(l,g)}function Ay(l,u){return s0(l,u)}function yA(l,u,g,b){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(l,u,g,b){return new yA(l,u,g,b)}function sp(l){return!(!(l=l.prototype)||!l.isReactComponent)}function fs(l,u){var g=l.alternate;return g===null?((g=ln(l.tag,u,l.key,l.mode)).elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=14680064&l.flags,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g}function eh(l,u,g,b,S,C){var B=2;if(b=l,typeof l=="function")sp(l)&&(B=1);else if(typeof l=="string")B=5;else e:switch(l){case d:return ro(g.children,S,C,u);case p:B=8,S|=8;break;case c:return(l=ln(12,g,u,2|S)).elementType=c,l.lanes=C,l;case _:return(l=ln(13,g,u,S)).elementType=_,l.lanes=C,l;case T:return(l=ln(19,g,u,S)).elementType=T,l.lanes=C,l;case w:return th(g,S,C,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case f:B=10;break e;case m:B=9;break e;case v:B=11;break e;case x:B=14;break e;case y:B=16,b=null;break e}throw Error(s(130,l==null?l:typeof l,""))}return(u=ln(B,g,u,S)).elementType=l,u.type=b,u.lanes=C,u}function ro(l,u,g,b){return(l=ln(7,l,b,u)).lanes=g,l}function th(l,u,g,b){return(l=ln(22,l,b,u)).elementType=w,l.lanes=g,l.stateNode={isHidden:!1},l}function op(l,u,g){return(l=ln(6,l,null,u)).lanes=g,l}function ap(l,u,g){return(u=ln(4,l.children!==null?l.children:[],l.key,u)).lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function _A(l,u,g,b,S){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=gt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=n0(0),this.expirationTimes=n0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=n0(0),this.identifierPrefix=b,this.onRecoverableError=S,Le&&(this.mutableSourceEagerHydrationData=null)}function ky(l,u,g,b,S,C,B,$,q){return l=new _A(l,u,g,$,q),u===1?(u=1,C===!0&&(u|=8)):u=0,C=ln(3,null,null,u),l.current=C,C.stateNode=l,C.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},x0(C),l}function Py(l){if(!l)return ss;e:{if(N(l=l._reactInternals)!==l||l.tag!==1)throw Error(s(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ur(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(s(171))}if(l.tag===1){var g=l.type;if(Ur(g))return K1(l,g,u)}return u}function Iy(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return(l=M(u))===null?null:l.stateNode}function Ry(l,u){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function rh(l,u){Ry(l,u),(l=l.alternate)&&Ry(l,u)}function bA(l){return(l=M(l))===null?null:l.stateNode}function wA(){return null}return vy=function(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps||Er.current)Cr=!0;else{if((l.lanes&g)==0&&(128&u.flags)==0)return Cr=!1,function(pe,re,ue){switch(re.tag){case 3:Zx(re),jo();break;case 5:yx(re);break;case 1:Ur(re.type)&&mc(re);break;case 4:b0(re,re.stateNode.containerInfo);break;case 10:ax(0,re.type._context,re.memoizedProps.value);break;case 13:var we=re.memoizedState;if(we!==null)return we.dehydrated!==null?(st(St,1&St.current),re.flags|=128,null):(ue&re.child.childLanes)!=0?ey(pe,re,ue):(st(St,1&St.current),(pe=Ni(pe,re,ue))!==null?pe.sibling:null);st(St,1&St.current);break;case 19:if(we=(ue&re.childLanes)!=0,(128&pe.flags)!=0){if(we)return ry(pe,re,ue);re.flags|=128}var Ue=re.memoizedState;if(Ue!==null&&(Ue.rendering=null,Ue.tail=null,Ue.lastEffect=null),st(St,St.current),we)break;return null;case 22:case 23:return re.lanes=0,Kx(pe,re,ue)}return Ni(pe,re,ue)}(l,u,g);Cr=(131072&l.flags)!=0}else Cr=!1,ht&&(1048576&u.flags)!=0&&rx(u,_c,u.index);switch(u.lanes=0,u.tag){case 2:var b=u.type;Oc(l,u),l=u.pendingProps;var S=Ho(u,sr.current);Vo(u,g),S=A0(null,u,b,l,S,g);var C=k0();return u.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ur(b)?(C=!0,mc(u)):C=!1,u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,x0(u),S.updater=Ac,u.stateNode=S,S._reactInternals=u,_0(u,b,l,g),u=B0(null,u,b,!0,C,g)):(u.tag=0,ht&&C&&l0(u),Ar(null,u,S,g),u=u.child),u;case 16:b=u.elementType;e:{switch(Oc(l,u),l=u.pendingProps,b=(S=b._init)(b._payload),u.type=b,S=u.tag=function(pe){if(typeof pe=="function")return sp(pe)?1:0;if(pe!=null){if((pe=pe.$$typeof)===v)return 11;if(pe===x)return 14}return 2}(b),l=Tn(b,l),S){case 0:u=L0(null,u,b,l,g);break e;case 1:u=Qx(null,u,b,l,g);break e;case 11:u=Vx(null,u,b,l,g);break e;case 14:u=Xx(null,u,b,Tn(b.type,l),g);break e}throw Error(s(306,b,""))}return u;case 0:return b=u.type,S=u.pendingProps,L0(l,u,b,S=u.elementType===b?S:Tn(b,S),g);case 1:return b=u.type,S=u.pendingProps,Qx(l,u,b,S=u.elementType===b?S:Tn(b,S),g);case 3:e:{if(Zx(u),l===null)throw Error(s(387));b=u.pendingProps,S=(C=u.memoizedState).element,ux(l,u),Cc(u,b,null,g);var B=u.memoizedState;if(b=B.element,Le&&C.isDehydrated){if(C={element:b,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},u.updateQueue.baseState=C,u.memoizedState=C,256&u.flags){u=Jx(l,u,b,g,S=qo(Error(s(423)),u));break e}if(b!==S){u=Jx(l,u,b,g,S=qo(Error(s(424)),u));break e}for(Le&&(rn=RC(u.stateNode.containerInfo),zr=u,ht=!0,Sn=null,cl=!1),g=xx(u,null,b,g),u.child=g;g;)g.flags=-3&g.flags|4096,g=g.sibling}else{if(jo(),b===S){u=Ni(l,u,g);break e}Ar(l,u,b,g)}u=u.child}return u;case 5:return yx(u),l===null&&h0(u),b=u.type,S=u.pendingProps,C=l!==null?l.memoizedProps:null,B=S.children,xe(b,S)?B=null:C!==null&&xe(b,C)&&(u.flags|=32),qx(l,u),Ar(l,u,B,g),u.child;case 6:return l===null&&h0(u),null;case 13:return ey(l,u,g);case 4:return b0(u,u.stateNode.containerInfo),b=u.pendingProps,l===null?u.child=Xo(u,null,b,g):Ar(l,u,b,g),u.child;case 11:return b=u.type,S=u.pendingProps,Vx(l,u,b,S=u.elementType===b?S:Tn(b,S),g);case 7:return Ar(l,u,u.pendingProps,g),u.child;case 8:case 12:return Ar(l,u,u.pendingProps.children,g),u.child;case 10:e:{if(b=u.type._context,S=u.pendingProps,C=u.memoizedProps,ax(0,b,B=S.value),C!==null)if(wn(C.value,B)){if(C.children===S.children&&!Er.current){u=Ni(l,u,g);break e}}else for((C=u.child)!==null&&(C.return=u);C!==null;){var $=C.dependencies;if($!==null){B=C.child;for(var q=$.firstContext;q!==null;){if(q.context===b){if(C.tag===1){(q=Mi(-1,g&-g)).tag=2;var te=C.updateQueue;if(te!==null){var ne=(te=te.shared).pending;ne===null?q.next=q:(q.next=ne.next,ne.next=q),te.pending=q}}C.lanes|=g,(q=C.alternate)!==null&&(q.lanes|=g),g0(C.return,g,u),$.lanes|=g;break}q=q.next}}else if(C.tag===10)B=C.type===u.type?null:C.child;else if(C.tag===18){if((B=C.return)===null)throw Error(s(341));B.lanes|=g,($=B.alternate)!==null&&($.lanes|=g),g0(B,g,u),B=C.sibling}else B=C.child;if(B!==null)B.return=C;else for(B=C;B!==null;){if(B===u){B=null;break}if((C=B.sibling)!==null){C.return=B.return,B=C;break}B=B.return}C=B}Ar(l,u,S.children,g),u=u.child}return u;case 9:return S=u.type,b=u.pendingProps.children,Vo(u,g),b=b(S=nn(S)),u.flags|=1,Ar(l,u,b,g),u.child;case 14:return S=Tn(b=u.type,u.pendingProps),Xx(l,u,b,S=Tn(b.type,S),g);case 15:return Yx(l,u,u.type,u.pendingProps,g);case 17:return b=u.type,S=u.pendingProps,S=u.elementType===b?S:Tn(b,S),Oc(l,u),u.tag=1,Ur(b)?(l=!0,mc(u)):l=!1,Vo(u,g),px(u,b,S),_0(u,b,S,g),B0(null,u,b,!0,l,g);case 19:return ry(l,u,g);case 22:return Kx(l,u,g)}throw Error(s(156,u.tag))},t.attemptContinuousHydration=function(l){if(l.tag===13){var u=ri(l,134217728);u!==null&&an(u,l,134217728,lr()),rh(l,134217728)}},t.attemptDiscreteHydration=function(l){if(l.tag===13){var u=ri(l,1);u!==null&&an(u,l,1,lr()),rh(l,1)}},t.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=hs(l),g=ri(l,u);g!==null&&an(g,l,u,lr()),rh(l,u)}},t.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var g=ll(u.pendingLanes);g!==0&&(i0(u,1|g),kr(u,Ht()),(6&We)==0&&(Jo(),ei()))}break;case 13:_y(function(){var b=ri(l,1);if(b!==null){var S=lr();an(b,l,1,S)}}),rh(l,1)}},t.batchedUpdates=function(l,u){var g=We;We|=1;try{return l(u)}finally{(We=g)===0&&(Jo(),xc&&ei())}},t.createComponentSelector=function(l){return{$$typeof:Hc,value:l}},t.createContainer=function(l,u,g,b,S,C,B){return ky(l,u,!1,null,0,b,0,C,B)},t.createHasPseudoClassSelector=function(l){return{$$typeof:Gc,value:l}},t.createHydrationContainer=function(l,u,g,b,S,C,B,$,q){return(l=ky(g,b,!0,l,0,C,0,$,q)).context=Py(null),g=l.current,(C=Mi(b=lr(),S=hs(g))).callback=u??null,as(g,C,S),l.current.lanes=S,ul(l,S,b),kr(l,b),l},t.createPortal=function(l,u,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:b==null?null:""+b,children:l,containerInfo:u,implementation:g}},t.createRoleSelector=function(l){return{$$typeof:$c,value:l}},t.createTestNameSelector=function(l){return{$$typeof:jc,value:l}},t.createTextSelector=function(l){return{$$typeof:Wc,value:l}},t.deferredUpdates=function(l){var u=Ye,g=Ct.transition;try{return Ct.transition=null,Ye=16,l()}finally{Ye=u,Ct.transition=g}},t.discreteUpdates=function(l,u,g,b,S){var C=Ye,B=Ct.transition;try{return Ct.transition=null,Ye=1,l(u,g,b,S)}finally{Ye=C,Ct.transition=B,We===0&&Jo()}},t.findAllNodes=Y0,t.findBoundingRects=function(l,u){if(!yn)throw Error(s(363));u=Y0(l,u),l=[];for(var g=0;g<u.length;g++)l.push(Tr(u[g]));for(u=l.length-1;0<u;u--)for(var b=(g=l[u]).x,S=b+g.width,C=g.y,B=C+g.height,$=u-1;0<=$;$--)if(u!==$){var q=l[$],te=q.x,ne=te+q.width,pe=q.y,re=pe+q.height;if(b>=te&&C>=pe&&S<=ne&&B<=re){l.splice(u,1);break}if(!(b!==te||g.width!==q.width||re<C||pe>B)){pe>C&&(q.height+=pe-C,q.y=C),re<B&&(q.height=B-pe),l.splice(u,1);break}if(!(C!==pe||g.height!==q.height||ne<b||te>S)){te>b&&(q.width+=te-b,q.x=b),ne<S&&(q.width=S-te),l.splice(u,1);break}}return l},t.findHostInstance=Iy,t.findHostInstanceWithNoPortals=function(l){return(l=(l=k(l))!==null?F(l):null)===null?null:l.stateNode},t.findHostInstanceWithWarning=function(l){return Iy(l)},t.flushControlled=function(l){var u=We;We|=1;var g=Ct.transition,b=Ye;try{Ct.transition=null,Ye=1,l()}finally{Ye=b,Ct.transition=g,(We=u)===0&&(Jo(),ei())}},t.flushPassiveEffects=to,t.flushSync=_y,t.focusWithin=function(l,u){if(!yn)throw Error(s(363));for(u=gy(l=W0(l),u),u=Array.from(u),l=0;l<u.length;){var g=u[l++];if(!Zn(g)){if(g.tag===5&&rs(g.stateNode))return!0;for(g=g.child;g!==null;)u.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ye},t.getFindAllNodesFailureDescription=function(l,u){if(!yn)throw Error(s(363));var g=0,b=[];l=[W0(l),0];for(var S=0;S<l.length;){var C=l[S++],B=l[S++],$=u[B];if((C.tag!==5||!Zn(C))&&(V0(C,$)&&(b.push(X0($)),++B>g&&(g=B)),B<u.length))for(C=C.child;C!==null;)l.push(C,B),C=C.sibling}if(g<u.length){for(l=[];g<u.length;g++)l.push(X0(u[g]));return`findAllNodes was able to match part of the selector:
  `+b.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},t.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?J(l.child.stateNode):l.child.stateNode:null},t.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:bA,findFiberByHostInstance:l.findFiberByHostInstance||wA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{vc=u.inject(l),Jn=u}catch{}l=!!u.checkDCE}}return l},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(l,u,g,b){if(!yn)throw Error(s(363));l=Y0(l,u);var S=Vs(l,g,b).disconnect;return{disconnect:function(){S()}}},t.registerMutableSourceForHydration=function(l,u){var g=u._getVersion;g=g(u._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[u,g]:l.mutableSourceEagerHydrationData.push(u,g)},t.runWithPriority=function(l,u){var g=Ye;try{return Ye=l,u()}finally{Ye=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(l,u,g,b){var S=u.current,C=lr(),B=hs(S);return g=Py(g),u.context===null?u.context=g:u.pendingContext=g,(u=Mi(C,B)).payload={element:l},(b=b===void 0?null:b)!==null&&(u.callback=b),(l=as(S,u,B))!==null&&(an(l,S,B,C),Ec(l,S,B)),B},t}),Yb}({get exports(){return Sv},set exports(e){Sv=e}}).exports=QR();var ZR=TR(Sv),OE={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},Ev={},zh={get exports(){return Ev},set exports(e){Ev=e}};(function(){var e,t,r,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?zh.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(zh.exports=function(){return(e()-i)/1e6},t=process.hrtime,n=(e=function(){var o;return 1e9*(o=t())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(zh.exports=function(){return Date.now()-r},r=Date.now()):(zh.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(SR);var Qb,Ca={},so={};({get exports(){return Ca},set exports(e){Ca=e}}).exports=(Qb||(Qb=1,so.ConcurrentRoot=1,so.ContinuousEventPriority=4,so.DefaultEventPriority=16,so.DiscreteEventPriority=1,so.IdleEventPriority=536870912,so.LegacyRoot=0),so);var JR={};function lm(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount(t,e))}function UE(e,t){var r,n,i;(r=e.willUnmount)===null||r===void 0||r.call(e,e,t),((n=e.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=e.children)!==null&&i!==void 0&&i.length&&Zi(e.children).forEach(function(s){UE(s,e)})}function Zb(e,t){var r;UE(t,e),e.removeChild(t);var n=(r=t.config)!==null&&r!==void 0?r:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,a=o===void 0||o,h=n.destroyTexture,d=h!==void 0&&h,p=n.destroyBaseTexture,c=p!==void 0&&p;s&&t.destroy({children:a,texture:d,baseTexture:c})}function Jb(e,t,r){Et(t!==r,"pixi-react: PixiFiber cannot insert node before itself"),e.children.indexOf(t)!==-1&&e.removeChild(t);var n=e.getChildIndex(r);e.addChildAt(t,n)}var e2=null,Hn=ZR({getRootHostContext:function(){return JR},getChildHostContext:function(e){return e},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},getCurrentEventPriority:function(){return function(){var e,t;if(typeof window>"u")return Ca.DefaultEventPriority;switch((e=window)===null||e===void 0||(t=e.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ca.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ca.ContinuousEventPriority;default:return Ca.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=XR[e];if(typeof s=="function"&&(t=s(i,n)),!t){var o=FE[e];o&&((t=o.create(n)).didMount=o.didMount?o.didMount.bind(t):void 0,t.willUnmount=o.willUnmount?o.willUnmount.bind(t):void 0,t.applyProps=o.applyProps?o.applyProps.bind(t):void 0,t.config=o.config)}return t&&((typeof((r=t)===null||r===void 0?void 0:r.applyProps)=="function"?t.applyProps:Ci)(t,{},n),t.__reactpixi={root:i}),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var r=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=r},finalizeInitialChildren:function(e,t,r){return!1},prepareUpdate:function(e,t,r,n,i,s){return e2=function(o,a,h,d){var p=null;for(var c in h)!d.hasOwnProperty(c)&&h.hasOwnProperty(c)&&h[c]!==null&&(c===bv||(p||(p=[]),p.push(c,null)));for(var f in d){var m=d[f],v=h!==null?h[f]:void 0;!d.hasOwnProperty(f)||m===v||m===null&&v===null||f===bv||(p||(p=[]),p.push(f,m))}return p}(0,0,r,n)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var r=t.alpha===void 0||t.alpha>0,n=t.renderable===void 0||t.renderable===!0,i=t.visible===void 0||t.visible===!0;return!(r&&n&&i)},createTextInstance:function(e,t,r){Et(!1,'pixi-react: Error trying to add text node "'.concat(e,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Ev,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=lm.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=lm.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=lm.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Zb.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Zb.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:Jb,insertInContainerBefore:function(){for(var e,t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=Jb.apply(null,n);return(e=n[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(e,t,r,n,i){var s,o,a=e&&e.applyProps;typeof a!="function"&&(a=Ci),(a(e,n,i)||e2)&&((s=e.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,r,n,i){},commitTextUpdate:function(e,t,r){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(e){}}),e5=OE.dependencies["react-dom"].replace(/[^0-9.]/g,""),t5=OE.name;Hn.injectIntoDevTools({bundleType:0,version:e5,rendererPackageName:t5,findHostInstanceByFiber:Hn.findHostInstance});var Ns=new Map;function zE(e){if(Et(zt.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`."),Ns.has(e)){var t=Ns.get(e).pixiFiberContainer;Hn.updateContainer(null,t,void 0,function(){Ns.delete(e)})}}function HE(e){Et(zt.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`.");var t=Ns.get(e);if(Et(!t,"Pixi React: createRoot should only be called once"),!t){var r=Hn.createContainer(e);t={pixiFiberContainer:r,reactRoot:{render:function(n){return Hn.updateContainer(n,r,void 0),Hn.getPublicRootInstance(r)},unmount:function(){zE(e),Ns.delete(e)}}},Ns.set(e,t)}return t.reactRoot}function r5(e,t,r){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),Ns.has(t)?n=Ns.get(t).reactRoot:n=HE(t),n.render(e)}function n5(e){zE(e)}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uu.apply(this,arguments)}function i5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DE(n.key),n)}}function Fi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kd(e,t){return Kd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Kd(e,t)}function o5(e,t){if(t&&(Kr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fi(e)}function qd(e){return qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qd(e)}var Df=Xr.createContext(null),GE=Df.Provider,$E=Df.Consumer,a5=function(e){var t=Xr.forwardRef(function(r,n){return Xr.createElement($E,null,function(i){return Xr.createElement(e,Uu({},r,{ref:n,app:i}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t};function l5(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=qd(e);if(t){var i=qd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o5(this,r)}}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){kt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var r2=function(){},jE={width:ot.exports.number,height:ot.exports.number,onMount:ot.exports.func,onUnmount:ot.exports.func,raf:ot.exports.bool,renderOnComponentChange:ot.exports.bool,children:ot.exports.node,options:ot.exports.shape({autoStart:ot.exports.bool,width:ot.exports.number,height:ot.exports.number,useContextAlpha:ot.exports.bool,backgroundAlpha:ot.exports.number,autoDensity:ot.exports.bool,antialias:ot.exports.bool,preserveDrawingBuffer:ot.exports.bool,resolution:ot.exports.number,forceCanvas:ot.exports.bool,backgroundColor:ot.exports.number,clearBeforeRender:ot.exports.bool,powerPreference:ot.exports.string,sharedTicker:ot.exports.bool,sharedLoader:ot.exports.bool,resizeTo:function(e,t){var r=e[t];r&&Et(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Kr(r),", expect `window` or an `HTMLElement`."))},view:function(e,t,r){var n=e[t];n&&Et(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Kr(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},u5={width:800,height:600,onMount:r2,onUnmount:r2,raf:!0,renderOnComponentChange:!0},Cv=function(e){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Kd(s,o)})(i,Xr.Component);var t,r,n=l5(i);function i(){var s;i5(this,i);for(var o=arguments.length,a=new Array(o),h=0;h<o;h++)a[h]=arguments[h];return kt(Fi(s=n.call.apply(n,[this].concat(a))),"_canvas",null),kt(Fi(s),"_mediaQuery",null),kt(Fi(s),"_ticker",null),kt(Fi(s),"_needsUpdate",!0),kt(Fi(s),"app",null),kt(Fi(s),"updateSize",function(){var d=s.props,p=d.width,c=d.height,f=d.options;f!=null&&f.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(p,c)}),kt(Fi(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),kt(Fi(s),"renderStage",function(){var d=s.props,p=d.renderOnComponentChange;!d.raf&&p&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return t=i,(r=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,h=s.height,d=s.options,p=s.raf,c=s.renderOnComponentChange;this.app=new Qu(Hh(Hh({width:a,height:h,view:this._canvas},d),{},{autoDensity:d?.autoDensity!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[p?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Hn.createContainer(this.app.stage),Hn.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),d!=null&&d.autoDensity&&window.matchMedia&&d?.resolution===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),c&&!p&&(this._ticker=new Rt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var h,d=this.props,p=d.width,c=d.height,f=d.raf,m=d.renderOnComponentChange,v=d.options;v?.resolution!==void 0&&s?.options.resolution!==v?.resolution&&(this.app.renderer.resolution=v.resolution,this.resetInteractionManager()),s.height===c&&s.width===p&&((h=s.options)===null||h===void 0?void 0:h.resolution)===v?.resolution||this.updateSize(),s.raf!==f&&this.app.ticker[f?"start":"stop"](),Hn.updateContainer(this.getChildren(),this.mountNode,this),s.width===p&&s.height===c&&s.raf===f&&s.renderOnComponentChange===m&&s.options===v||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return Xr.createElement(GE,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Hn.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,h=this.props.options;return h&&h.view?(Et(h.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Xr.createElement("canvas",Uu({},(s=this.props,o=[].concat(Zi(Object.keys(jE)),Zi(Object.keys(wv))),Object.keys(s).filter(function(d){return!o.includes(d)}).reduce(function(d,p){return Hh(Hh({},d),{},kt({},p,s[p]))},{})),{ref:function(d){return a._canvas=d}}))}}])&&s5(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();Cv.propTypes=jE,Cv.defaultProps=u5;var c5=Cv;function WE(){var e=V.exports.useContext(Df);return Et(e instanceof Qu,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function h5(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=WE();Et(typeof e=="function","`useTick` needs a callback function."),Et(r instanceof Qu,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var n=V.exports.useRef(null);V.exports.useEffect(function(){n.current=e},[e]),V.exports.useEffect(function(){if(t){var i=function(s){return n.current.apply(r.ticker,[s,r.ticker])};return r.ticker.add(i),function(){r.ticker&&r.ticker.remove(i)}}},[t])}function d5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Av(e,t,r){return Av=d5()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(n,o));return s&&Kd(a,s.prototype),a},Av.apply(null,arguments)}var f5=["children","apply"];function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(n){kt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var p5=function(e,t){Et(Kr(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(t),n=function(i){var s=i.children,o=i.apply,a=Ws(i,f5),h=V.exports.useRef(V.exports.useMemo(function(){return r.map(function(c){var f,m=(a==null||(f=a[c])===null||f===void 0?void 0:f.construct)||[];return Av(t[c],Zi(m))})},[r])),d=V.exports.useMemo(function(){return r.reduce(function(c,f,m){return Gh(Gh({},c),{},kt({},f,h.current[m]))},{})},[r]),p=V.exports.useMemo(function(){return Object.keys(a).filter(BE(LE(r))).reduce(function(c,f){return Gh(Gh({},c),{},kt({},f,a[f]))},{})},[a,r]);return r.forEach(function(c,f){return Object.assign(h.current[f],a[c])}),o&&function(){for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];return f.every(function(v){return typeof v=="function"})}(o)&&o.call(e,d),Xr.createElement(e,Uu({},p,{filters:h.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:ot.exports.node,apply:ot.exports.func},n},m5=Br.BitmapText,g5=Br.Container,v5=Br.Graphics,x5=Br.NineSlicePlane,y5=Br.ParticleContainer,_5=Br.Sprite,b5=Br.AnimatedSprite,w5=Br.Text,S5=Br.TilingSprite,T5=Br.SimpleMesh,E5=Br.SimpleRope;const C5=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:b5,AppConsumer:$E,AppContext:Df,AppProvider:GE,BitmapText:m5,Container:g5,Graphics:v5,NineSlicePlane:x5,ParticleContainer:y5,PixiComponent:YR,PixiFiber:Hn,SimpleMesh:T5,SimpleRope:E5,Sprite:_5,Stage:c5,TYPES:Br,Text:w5,TilingSprite:S5,applyDefaultProps:Ci,createRoot:HE,eventHandlers:Yd,render:r5,unmountComponentAtNode:n5,useApp:WE,useTick:h5,withFilters:p5,withPixiApp:a5},Symbol.toStringTag,{value:"Module"})),A5=pw(C5);(function(e){e.exports=A5})(he);const VE=new pt;mt.prototype._cacheAsBitmap=!1;mt.prototype._cacheData=null;mt.prototype._cacheAsBitmapResolution=null;mt.prototype._cacheAsBitmapMultisample=null;class k5{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(mt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new k5),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});mt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};mt.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const r=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const f=this.filters[0].padding;n.pad(f)}n.ceil(de.RESOLUTION);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,h=Lo.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),d=`cacheAsBitmap_${Ro()}`;this._cacheData.textureCacheId=d,Be.addToCache(h.baseTexture,d),ae.addToCache(h,d);const p=this.transform.localTransform.copyTo(VE).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:p,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new qn(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};mt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};mt.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const i=t.canvasContext.activeContext,s=t._projTransform;r.ceil(de.RESOLUTION);const o=Lo.create({width:r.width,height:r.height}),a=`cacheAsBitmap_${Ro()}`;this._cacheData.textureCacheId=a,Be.addToCache(o.baseTexture,a),ae.addToCache(o,a);const h=VE;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=r.x,h.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),t.canvasContext.activeContext=i,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const d=new qn(o);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(r.x/r.width),d.anchor.y=-(r.y/r.height),d.alpha=n,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)};mt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};mt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};mt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Be.removeFromCache(this._cacheData.textureCacheId),ae.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};mt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};mt.prototype.name=null;zt.prototype.getChildByName=function(t,r){for(let n=0,i=this.children.length;n<i;n++)if(this.children[n].name===t)return this.children[n];if(r)for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};mt.prototype.getGlobalPosition=function(t=new Fe,r=!1){return this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};var P5=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class XE extends Ge{constructor(t=1){super(eI,P5,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const I5={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},R5=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function M5(e){const t=I5[e],r=t.length;let n=R5,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let h=s.replace("%index%",a.toString());o=a,a>=r&&(o=e-a-1),h=h.replace("%value%",t[o].toString()),i+=h,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}const N5=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function D5(e,t){const r=Math.ceil(e/2);let n=N5,i="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}class zu extends Ge{constructor(t,r=8,n=4,i=Ge.defaultResolution,s=5){const o=D5(s,t),a=M5(s);super(o,a),this.horizontal=t,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(t,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,n,i);else{const s=t.getFilterTexture(),o=t.renderer;let a=r,h=s;this.state.blend=!1,t.applyFilter(this,a,h,pi.CLEAR);for(let d=1;d<this.passes-1;d++){t.bindAndClear(a,pi.BLIT),this.uniforms.uSampler=h;const p=h;h=a,a=p,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,h,n,i),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class L5 extends Ge{constructor(t=8,r=4,n=Ge.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new zu(!0,t,r,n,i),this.blurYFilter=new zu(!1,t,r,n,i),this.resolution=n,this.quality=r,this.blur=t,this.repeatEdgePixels=!1}apply(t,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,r,a,pi.CLEAR),this.blurYFilter.apply(t,a,n,i),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,r,n,i):this.blurXFilter.apply(t,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var B5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class kv extends Ge{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(mE,B5,t),this.alpha=1}_loadMatrix(t,r=!1){let n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t}_colorMatrix(t){const r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(t,r){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(t,r){const[n,i,s]=et.shared.setValue(t).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(t,r){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(t){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)}hue(t,r){t=(t||0)/180*Math.PI;const n=Math.cos(t),i=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),h=n+(1-n)*o,d=o*(1-n)-a*i,p=o*(1-n)+a*i,c=o*(1-n)+a*i,f=n+o*(1-n),m=o*(1-n)-a*i,v=o*(1-n)-a*i,_=o*(1-n)+a*i,T=n+o*(1-n),x=[h,d,p,0,0,c,f,m,0,0,v,_,T,0,0,0,0,0,1,0];this._loadMatrix(x,r)}contrast(t,r){const n=(t||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(t=0,r){const n=t*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(t){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)}sepia(t){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)}technicolor(t){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)}polaroid(t){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)}toBGR(t){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)}kodachrome(t){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)}browni(t){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)}vintage(t){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)}colorTone(t,r,n,i,s){t=t||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=et.shared,[a,h,d]=o.setValue(n).toArray(),[p,c,f]=o.setValue(i).toArray(),m=[.3,.59,.11,0,0,a,h,d,t,0,p,c,f,r,0,a-p,h-c,d-f,0,0];this._loadMatrix(m,s)}night(t,r){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(t,r){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,r)}lsd(t){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}kv.prototype.grayscale=kv.prototype.greyscale;var F5=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,O5=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class U5 extends Ge{constructor(t,r){const n=new pt;t.renderable=!1,super(O5,F5,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,r==null&&(r=20),this.scale=new Fe(r,r)}apply(t,r,n,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var z5=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,H5=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class G5 extends Ge{constructor(){super(H5,z5)}}var $5=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class j5 extends Ge{constructor(t=.5,r=Math.random()){super(mE,$5,{uNoise:0,uSeed:0}),this.noise=t,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const i2={AlphaFilter:XE,BlurFilter:L5,BlurFilterPass:zu,ColorMatrixFilter:kv,DisplacementFilter:U5,FXAAFilter:G5,NoiseFilter:j5};Object.entries(i2).forEach(([e,t])=>{Object.defineProperty(i2,e,{get(){return ze("7.1.0",`filters.${e} has moved to ${e}`),t}})});class W5{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Rt.system.add(this.tickerUpdate,this,zs.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){!this.tickerAdded||(Rt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const bs=new W5;class Zu{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Zu.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Fe,this.page=new Fe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Qd extends Zu{constructor(){super(...arguments),this.client=new Fe,this.movement=new Fe,this.offset=new Fe,this.global=new Fe,this.screen=new Fe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,r,n,i,s,o,a,h,d,p,c,f,m,v,_){throw new Error("Method not implemented.")}}class Rn extends Qd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ka extends Qd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ka.DOM_DELTA_PIXEL=0;Ka.DOM_DELTA_LINE=1;Ka.DOM_DELTA_PAGE=2;const V5=2048,X5=new Fe,um=new Fe;class Y5{constructor(t){this.dispatch=new Xu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort((n,i)=>n.priority-i.priority)}dispatchEvent(t,r){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r),this.dispatch.emit(r||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const r=this.mappingTable[t.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,r){bs.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,X5.set(t,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,r){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,r,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{t.currentTarget=n[s],this.notifyTarget(t,o)})}propagationPath(t){const r=[t];for(let n=0;n<V5&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(t.parent),t=t.parent}return r.reverse(),r}hitTestMoveRecursive(t,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(bs.pauseUpdate=!1),t.interactiveChildren&&t.children){const p=t.children;for(let c=p.length-1;c>=0;c--){const f=p[c],m=this.hitTestMoveRecursive(f,this._isInteractive(r)?r:f.eventMode,n,i,s,o||s(t,n));if(m){if(m.length>0&&!m[m.length-1].parent)continue;const v=t.isInteractive();(m.length>0||v)&&(v&&this._allInteractiveElements.push(t),m.push(t)),this._hitElements.length===0&&(this._hitElements=m),a=!0}}}const h=this._isInteractive(r),d=t.isInteractive();return d&&d&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:h&&!s(t,n)&&i(t,n)?d?[t]:[]:null}hitTestRecursive(t,r,n,i,s){if(this._interactivePrune(t)||s(t,n))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(bs.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let d=h.length-1;d>=0;d--){const p=h[d],c=this.hitTestRecursive(p,this._isInteractive(r)?r:p.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const f=t.isInteractive();return(c.length>0||f)&&c.push(t),c}}}const o=this._isInteractive(r),a=t.isInteractive();return o&&i(t,n)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,r){if(t.hitArea&&(t.worldTransform.applyInverse(r,um),!t.hitArea.contains(um.x,um.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!n.containsPoint?.(r))return!0}return!1}hitTestFn(t,r){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(r):!1}notifyTarget(t,r){r=r??t.type;const n=`on${r}`;t.currentTarget[n]?.(t);const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${r}capture`:r;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}mapPointerDown(t){if(!(t instanceof Rn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(t){if(!(t instanceof Rn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==r.target){const h=t.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(t,h,s);if(this.dispatchEvent(d,"pointerout"),n&&this.dispatchEvent(d,"mouseout"),!r.composedPath().includes(s)){const p=this.createPointerEvent(t,"pointerleave",s);for(p.eventPhase=p.AT_TARGET;p.target&&!r.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(d)}if(s!==r.target){const h=t.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(r,h);this.dispatchEvent(d,"pointerover"),n&&this.dispatchEvent(d,"mouseover");let p=s?.parent;for(;p&&p!==this.rootTarget.parent&&p!==r.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=r.target?.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(t){if(!(t instanceof Rn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.createPointerEvent(t),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof Rn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId);if(r.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(t,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Rn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const h=n.button===2;this.notifyTarget(n,h?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[t.button]||(i.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:r});const h=i.clicksByButton[t.button];if(h.target===a.target&&r-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=a.target,h.timeStamp=r,a.detail=h.clickCount,a.pointerType==="mouse"){const d=a.button===2;this.dispatchEvent(a,d?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof Rn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]),i=this.createPointerEvent(t);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[t.button]}this.freeEvent(i)}mapWheel(t){if(!(t instanceof Ka)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(t);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(t){if(!t)return null;let r=t[0];for(let n=1;n<t.length&&t[n].parent===r;n++)r=t[n];return r}createPointerEvent(t,r,n){const i=this.allocateEvent(Rn);return this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(t){const r=this.allocateEvent(Ka);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(t,r){const n=this.allocateEvent(Rn);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=r??n.type,n}copyWheelData(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}copyPointerData(t,r){t instanceof Rn&&r instanceof Rn&&(r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist)}copyMouseData(t,r){t instanceof Qd&&r instanceof Qd&&(r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.client.copyFrom(t.client),r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.movement.copyFrom(t.movement),r.screen.copyFrom(t.screen),r.shiftKey=t.shiftKey,r.global.copyFrom(t.global))}copyData(t,r){r.isTrusted=t.isTrusted,r.srcElement=t.srcElement,r.timeStamp=performance.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.which=t.which,r.layer.copyFrom(t.layer),r.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}notifyListeners(t,r){const n=t.currentTarget._events[r];if(!!n&&!!t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let i=0,s=n.length;i<s&&!t.propagationImmediatelyStopped;i++)n[i].once&&t.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,t)}}const K5=1,q5={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Pv=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Y5(null),bs.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Rn(null),this.rootWheelEvent=new Ka(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Pv.defaultEventFeatures},{set:(t,r,n)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),t[r]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,Pv._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,n=t.length;r<n;r++){const i=t[r],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;bs.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let i=0,s=n.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,n[i]);o.type+=r,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let r=0,n=t.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,bs.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;bs.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;bs.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*i,e.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,n=e.changedTouches.length;r<n;r++){const i=e.changedTouches[r];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,t.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=K5),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=q5[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let Hu=Pv;Hu.extension={name:"events",type:[ve.RendererSystem,ve.CanvasRendererSystem]};Hu.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};Ae.add(Hu);function s2(e){return e==="dynamic"||e==="static"}const Q5={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??s2(Hu.defaultEventMode)},set interactive(e){ze("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Hu.defaultEventMode},set eventMode(e){this._internalInteractive=s2(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,i)},removeEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,i)},dispatchEvent(e){if(!(e instanceof Zu))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};mt.mixin(Q5);const Z5={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};mt.mixin(Z5);const J5=9,$h=100,eM=0,tM=0,o2=2,a2=1,rM=-1e3,nM=-1e3,iM=2;class YE{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ji.tablet||ji.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${$h}px`,r.style.height=`${$h}px`,r.style.position="absolute",r.style.top=`${eM}px`,r.style.left=`${tM}px`,r.style.zIndex=o2.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${a2}px`,t.style.height=`${a2}px`,t.style.position="absolute",t.style.top=`${rM}px`,t.style.left=`${nM}px`,t.style.zIndex=iM.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const r=t.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const t=performance.now();if(ji.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:h}=this.renderer,d=i/o*h,p=s/a*h;let c=this.div;c.style.left=`${r}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const m=this.children[f];if(m.renderId!==this.renderId)m._accessibleActive=!1,Ba(this.children,f,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,f--;else{c=m._accessibleDiv;let v=m.hitArea;const _=m.worldTransform;m.hitArea?(c.style.left=`${(_.tx+v.x*_.a)*d}px`,c.style.top=`${(_.ty+v.y*_.d)*p}px`,c.style.width=`${v.width*_.a*d}px`,c.style.height=`${v.height*_.d*p}px`):(v=m.getBounds(),this.capHitArea(v),c.style.left=`${v.x*d}px`,c.style.top=`${v.y*p}px`,c.style.width=`${v.width*d}px`,c.style.height=`${v.height*p}px`,c.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(c.title=m.accessibleTitle),c.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&c.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==c.title||m.tabIndex!==c.tabIndex)&&(c.title=m.accessibleTitle,c.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:r,height:n}=this.renderer;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${$h}px`,r.style.height=`${$h}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=o2.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,r){const{displayObject:n}=t.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Zu(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===J5&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}YE.extension={name:"accessibility",type:[ve.RendererPlugin,ve.CanvasRendererPlugin]};Ae.add(YE);var jr=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(jr||{});const Zd={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let Oi,ua;function l2(){ua={s3tc:Oi.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Oi.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Oi.getExtension("WEBGL_compressed_texture_etc"),etc1:Oi.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Oi.getExtension("WEBGL_compressed_texture_pvrtc")||Oi.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Oi.getExtension("WEBGL_compressed_texture_atc"),astc:Oi.getExtension("WEBGL_compressed_texture_astc")}}const sM={extension:{type:ve.DetectionParser,priority:2},test:async()=>{const t=de.ADAPTER.createCanvas().getContext("webgl");return t?(Oi=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{ua||l2();const t=[];for(const r in ua)!ua[r]||t.push(r);return[...t,...e]},remove:async e=>(ua||l2(),e.filter(t=>!(t in ua)))};Ae.add(sM);class oM extends Yu{constructor(t,r={width:1,height:1,autoLoad:!0}){let n,i;typeof t=="string"?(n=t,i=new Uint8Array):(n=null,i=t),super(i,r),this.origin=n,this.buffer=i?new ov(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new ov(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class So extends oM{constructor(t,r){super(t,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=So._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||So._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,r,n){const i=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:h,levelWidth:d,levelHeight:p,levelBuffer:c}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,h,this.format,d,p,0,c)}return!0}onBlobLoaded(){this._levelBuffers=So._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,r,n,i,s,o,a){const h=new Array(n);let d=t.byteOffset,p=o,c=a,f=p+i-1&~(i-1),m=c+s-1&~(s-1),v=f*m*Zd[r];for(let _=0;_<n;_++)h[_]={levelID:_,levelWidth:n>1?p:f,levelHeight:n>1?c:m,levelBuffer:new Uint8Array(t.buffer,d,v)},d+=v,p=p>>1||1,c=c>>1||1,f=p+i-1&~(i-1),m=c+s-1&~(s-1),v=f*m*Zd[r];return h}}const cm=4,jh=124,aM=32,u2=20,lM=542327876,Wh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},uM={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Vh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},cM=1,hM=2,dM=4,fM=64,pM=512,mM=131072,gM=827611204,vM=861165636,xM=894720068,yM=808540228,_M=4,bM={[gM]:jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[vM]:jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[xM]:jr.COMPRESSED_RGBA_S3TC_DXT5_EXT},wM={[70]:jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:jr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:jr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:jr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:jr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:jr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function SM(e){const t=new Uint32Array(e);if(t[0]!==lM)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,jh/Uint32Array.BYTES_PER_ELEMENT),i=n[Wh.HEIGHT],s=n[Wh.WIDTH],o=n[Wh.MIPMAP_COUNT],a=new Uint32Array(e,Wh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,aM/Uint32Array.BYTES_PER_ELEMENT),h=a[cM];if(h&dM){const d=a[uM.FOURCC];if(d!==yM){const w=bM[d],E=cm+jh,P=new Uint8Array(e,E);return[new So(P,{format:w,width:s,height:i,levels:o})]}const p=cm+jh,c=new Uint32Array(t.buffer,p,u2/Uint32Array.BYTES_PER_ELEMENT),f=c[Vh.DXGI_FORMAT],m=c[Vh.RESOURCE_DIMENSION],v=c[Vh.MISC_FLAG],_=c[Vh.ARRAY_SIZE],T=wM[f];if(T===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===_M)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,y=cm+jh+u2;if(_===1)x.push(new Uint8Array(e,y));else{const w=Zd[T];let E=0,P=s,I=i;for(let N=0;N<o;N++){const D=Math.max(1,P+3&-4),k=Math.max(1,I+3&-4),M=D*k*w;E+=M,P=P>>>1,I=I>>>1}let R=y;for(let N=0;N<_;N++)x.push(new Uint8Array(e,R,E)),R+=E}return x.map(w=>new So(w,{format:T,width:s,height:i,levels:o}))}throw h&fM?new Error("DDSParser does not support uncompressed texture data."):h&pM?new Error("DDSParser does not supported YUV uncompressed texture data."):h&mM?new Error("DDSParser does not support single-channel (lumninance) texture data!"):h&hM?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const c2=[171,75,84,88,32,49,49,187,13,10,26,10],TM=67305985,kn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Iv=64,h2={[Ie.UNSIGNED_BYTE]:1,[Ie.UNSIGNED_SHORT]:2,[Ie.INT]:4,[Ie.UNSIGNED_INT]:4,[Ie.FLOAT]:4,[Ie.HALF_FLOAT]:8},EM={[ce.RGBA]:4,[ce.RGB]:3,[ce.RG]:2,[ce.RED]:1,[ce.LUMINANCE]:1,[ce.LUMINANCE_ALPHA]:2,[ce.ALPHA]:1},CM={[Ie.UNSIGNED_SHORT_4_4_4_4]:2,[Ie.UNSIGNED_SHORT_5_5_5_1]:2,[Ie.UNSIGNED_SHORT_5_6_5]:2};function AM(e,t,r=!1){const n=new DataView(t);if(!kM(e,n))return null;const i=n.getUint32(kn.ENDIANNESS,!0)===TM,s=n.getUint32(kn.GL_TYPE,i),o=n.getUint32(kn.GL_FORMAT,i),a=n.getUint32(kn.GL_INTERNAL_FORMAT,i),h=n.getUint32(kn.PIXEL_WIDTH,i),d=n.getUint32(kn.PIXEL_HEIGHT,i)||1,p=n.getUint32(kn.PIXEL_DEPTH,i)||1,c=n.getUint32(kn.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=n.getUint32(kn.NUMBER_OF_FACES,i),m=n.getUint32(kn.NUMBER_OF_MIPMAP_LEVELS,i),v=n.getUint32(kn.BYTES_OF_KEY_VALUE_DATA,i);if(d===0||p!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const _=4,T=4,x=h+3&-4,y=d+3&-4,w=new Array(c);let E=h*d;s===0&&(E=x*y);let P;if(s!==0?h2[s]?P=h2[s]*EM[o]:P=CM[s]:P=Zd[a],P===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const I=r?IM(n,v,i):null;let N=E*P,D=h,k=d,M=x,z=y,F=Iv+v;for(let U=0;U<m;U++){const Y=n.getUint32(F,i);let J=F+4;for(let Q=0;Q<c;Q++){let O=w[Q];O||(O=w[Q]=new Array(m)),O[U]={levelID:U,levelWidth:m>1||s!==0?D:M,levelHeight:m>1||s!==0?k:z,levelBuffer:new Uint8Array(t,J,N)},J+=N}F+=Y+4,F=F%4!==0?F+4-F%4:F,D=D>>1||1,k=k>>1||1,M=D+_-1&~(_-1),z=k+T-1&~(T-1),N=M*z*P}return s!==0?{uncompressed:w.map(U=>{let Y=U[0].levelBuffer,J=!1;return s===Ie.FLOAT?Y=new Float32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4):s===Ie.UNSIGNED_INT?(J=!0,Y=new Uint32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)):s===Ie.INT&&(J=!0,Y=new Int32Array(U[0].levelBuffer.buffer,U[0].levelBuffer.byteOffset,U[0].levelBuffer.byteLength/4)),{resource:new Yu(Y,{width:U[0].levelWidth,height:U[0].levelHeight}),type:s,format:J?PM(o):o}}),kvData:I}:{compressed:w.map(U=>new So(null,{format:a,width:h,height:d,levels:m,levelBuffers:U})),kvData:I}}function kM(e,t){for(let r=0;r<c2.length;r++)if(t.getUint8(r)!==c2[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function PM(e){switch(e){case ce.RGBA:return ce.RGBA_INTEGER;case ce.RGB:return ce.RGB_INTEGER;case ce.RG:return ce.RG_INTEGER;case ce.RED:return ce.RED_INTEGER;default:return e}}function IM(e,t,r){const n=new Map;let i=0;for(;i<t;){const s=e.getUint32(Iv+i,r),o=Iv+i+4,a=3-(s+3)%4;if(s===0||s>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<s&&e.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const d=new TextDecoder().decode(new Uint8Array(e.buffer,o,h)),p=new DataView(e.buffer,o+h+1,s-h-1);n.set(d,p),i+=4+s+a}return n}const RM={extension:{type:ve.LoadParser,priority:Pi.High},name:"loadDDS",test(e){return Bo(e,".dds")},async load(e,t,r){const i=await(await de.ADAPTER.fetch(e)).arrayBuffer(),o=SM(i).map(a=>{const h=new Be(a,{mipmap:Ti.OFF,alphaMode:Kn.NO_PREMULTIPLIED_ALPHA,resolution:Fs(e),...t.data});return Rf(h,r,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Ae.add(RM);const MM={extension:{type:ve.LoadParser,priority:Pi.High},name:"loadKTX",test(e){return Bo(e,".ktx")},async load(e,t,r){const i=await(await de.ADAPTER.fetch(e)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=AM(e,i),h=s??o,d={mipmap:Ti.OFF,alphaMode:Kn.NO_PREMULTIPLIED_ALPHA,resolution:Fs(e),...t.data},p=h.map(c=>{h===o&&Object.assign(d,{type:c.type,format:c.format});const f=new Be(c,d);return f.ktxKeyValueData=a,Rf(f,r,e)});return p.length===1?p[0]:p},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Ae.add(MM);const NM={extension:ve.ResolveParser,test:e=>{const r=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:e=>{if(e.split("?")[0].split(".").pop()==="ktx"){const n=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(n.some(i=>e.endsWith(i)))return{resolution:parseFloat(de.RETINA_PREFIX.exec(e)?.[1]??"1"),format:n.find(i=>e.endsWith(i)),src:e}}return{resolution:parseFloat(de.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};Ae.add(NM);const DM=new He,LM=4,Zl=class{constructor(e){this.renderer=e}async image(e,t,r){const n=new Image;return n.src=await this.base64(e,t,r),n}async base64(e,t,r){const n=this.canvas(e);if(n.toBlob!==void 0)return new Promise((i,s)=>{n.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},t,r)});if(n.toDataURL!==void 0)return n.toDataURL(t,r);if(n.convertToBlob!==void 0){const i=await n.convertToBlob({type:t,quality:r});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(e,t);s&&Zl._flipY(r,n,i),Zl._unpremultiplyAlpha(r);const o=new Gk(n,i,1),a=new ImageData(new Uint8ClampedArray(r.buffer),n,i);return o.context.putImageData(a,0,0),o.canvas}pixels(e,t){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(e,t);return s&&Zl._flipY(r,n,i),Zl._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,i=!1,s,o=!1;if(e&&(e instanceof Lo?s=e:(s=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),o=!0)),s){if(n=s.baseTexture.resolution,t=t??s.frame,i=!1,!o){r.renderTexture.bind(s);const c=s.framebuffer.glFramebuffers[r.CONTEXT_UID];c.blitFramebuffer&&r.framebuffer.bind(c.blitFramebuffer)}}else n=r.resolution,t||(t=DM,t.width=r.width/n,t.height=r.height/n),i=!0,r.renderTexture.bind();const a=Math.round(t.width*n),h=Math.round(t.height*n),d=new Uint8Array(LM*a*h),p=r.gl;return p.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,h,p.RGBA,p.UNSIGNED_BYTE,d),o&&s?.destroy(!0),{pixels:d,width:a,height:h,flipY:i}}destroy(){this.renderer=null}static _flipY(e,t,r){const n=t<<2,i=r>>1,s=new Uint8Array(n);for(let o=0;o<i;o++){const a=o*n,h=(r-o-1)*n;s.set(e.subarray(a,a+n)),e.copyWithin(a,h,h+n),e.set(s,h)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const n=e[r+3];if(n!==0){const i=255.001/n;e[r]=e[r]*i+.5,e[r+1]=e[r+1]*i+.5,e[r+2]=e[r+2]*i+.5}}}};let KE=Zl;KE.extension={name:"extract",type:ve.RendererSystem};Ae.add(KE);class BM{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function FM(e,t){let r=!1;if(e?._textures?.length){for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof ae){const i=e._textures[n].baseTexture;t.includes(i)||(t.push(i),r=!0)}}return r}function OM(e,t){if(e.baseTexture instanceof Be){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function UM(e,t){if(e._texture&&e._texture instanceof ae){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function zM(e,t){return t instanceof Ku?(t.updateText(!0),!0):!1}function HM(e,t){if(t instanceof Yt){const r=t.toFontString();return er.measureFont(r),!0}return!1}function GM(e,t){if(e instanceof Ku){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function $M(e,t){return e instanceof Yt?(t.includes(e)||t.push(e),!0):!1}const qE=class{constructor(e){this.limiter=new BM(qE.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(GM),this.registerFindHook($M),this.registerFindHook(FM),this.registerFindHook(OM),this.registerFindHook(UM),this.registerUploadHook(zM),this.registerUploadHook(HM)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Rt.system.addOnce(this.tick,this,zs.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Rt.system.addOnce(this.tick,this,zs.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof zt)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Rt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Jd=qE;Jd.uploadsPerFrame=4;Object.defineProperties(de,{UPLOADS_PER_FRAME:{get(){return Jd.uploadsPerFrame},set(e){ze("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Jd.uploadsPerFrame=e}}});function QE(e,t){return t instanceof Be?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function jM(e,t){if(!(t instanceof Xn))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&QE(e,s.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function WM(e,t){return e instanceof Xn?(t.push(e),!0):!1}class ZE extends Jd{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(WM),this.registerUploadHook(QE),this.registerUploadHook(jM)}}ZE.extension={name:"prepare",type:ve.RendererSystem};Ae.add(ZE);const Jl=class{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof ae?e:null,this.baseTexture=e instanceof Be?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=Fs(e,null);return r===null&&(r=parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Jl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Jl.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const n=this._frameKeys[t],i=this._frames[n],s=i.frame;if(s){let o=null,a=null;const h=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,d=new He(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);i.rotated?o=new He(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new He(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new He(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new ae(this.baseTexture,o,d,a,i.rotated?2:0,i.anchor,i.borders),ae.addToCache(this.textures[n],n)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const n=e[t][r];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Jl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Jl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Rv=Jl;Rv.BATCH_SIZE=1e3;const VM=["jpg","png","jpeg","avif","webp"];function JE(e,t,r){const n={};if(e.forEach(i=>{n[i]=t}),Object.keys(t.textures).forEach(i=>{n[i]=t.textures[i]}),!r){const i=fr.dirname(e[0]);t.linkedSheets.forEach((s,o)=>{const a=JE([`${i}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const XM={extension:ve.Asset,cache:{test:e=>e instanceof Rv,getCacheableAssets:(e,t)=>JE(e,t,!1)},resolver:{test:e=>{const r=e.split("?")[0].split("."),n=r.pop(),i=r.pop();return n==="json"&&VM.includes(i)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(de.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:ve.LoadParser,priority:Pi.Normal},async testParse(e,t){return fr.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,r){let n=fr.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+e.meta.image;i=yv(i,t.src);const o=(await r.load([i]))[i],a=new Rv(o.baseTexture,e,t.src);await a.parse();const h=e?.meta?.related_multi_packs;if(Array.isArray(h)){const d=[];for(const c of h){if(typeof c!="string")continue;let f=n+c;t.data?.ignoreMultiPack||(f=yv(f,t.src),d.push(r.load({src:f,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(d);a.linkedSheets=p,p.forEach(c=>{c.linkedSheets=[a].concat(a.linkedSheets.filter(f=>f!==c))})}return a},unload(e){e.destroy(!0)}}};Ae.add(XM);const ca=class extends Yt{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ca(Object.keys(ca.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ca.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=ca;if(r[e]){const n=r[e];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return de.ADAPTER.fetch(e).then(n=>n.blob()).then(async n=>new Promise((i,s)=>{const o=URL.createObjectURL(n),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(n)})).then(async([n,i])=>{const s=Object.assign({family:fr.basename(e,fr.extname(e)),weight:"normal",style:"normal",src:n,dataSrc:i,refs:1,originalUrl:e,fontFace:null},t);r[e]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=wf(e)),typeof e=="number"?Ok(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const i=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${i} ${e}`}reset(){Object.assign(this,ca.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=de.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let du=ca;du.availableFonts={};du.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const ha=class extends qn{constructor(e="",t={}){super(ae.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const r=new Image,n=ae.from(r,{scaleMode:de.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new He,n.trim=new He,this.texture=n;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),h=document.createElementNS(s,"div"),d=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=ha.defaultMaxWidth,this.maxHeight=ha.defaultMaxHeight,this._domElement=h,this._styleElement=d,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(d),this._foreignObject.appendChild(h),this._image=r,this._loadImage=new Image,this._autoResolution=ha.defaultAutoResolution,this._resolution=ha.defaultResolution??de.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(n)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:s+r.padding*2,height:o+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:n}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:i,height:s}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,i)),r.height=n.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{n.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,r.src=n.src,n.onload=null,n.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:n}=this,{padding:i}=e,{baseTexture:s}=t;t.trim.width=t._frame.width=r.width/n,t.trim.height=t._frame.height=r.height/n,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,n),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ha.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Ts(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Ts(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof du?(this.ownsStyle=!1,this._style=e):e instanceof Yt?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=du.from(e)):(this.ownsStyle=!0,this._style=new du(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let Lf=ha;Lf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};Lf.defaultMaxWidth=2024;Lf.defaultMaxHeight=2024;Lf.defaultAutoResolution=!0;function YM(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function KM(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}let eC=[12303291,7130603,15759548,12303291],ef=[2883570,16722807],ye=YM(),ge=KM(),$e=ye*.13,Pe=$e/4,Hi=15,Nt=$e*3,qM=6,tC=ge*(qM/3)/1980,De=ge*.064;function Xt(e,t,r,n){const[i,s]=t,[o,a]=r;return e<i&&!n?o:e>s&&!n?a:o===a&&!n?o:(e-i)/(s-i)*(a-o)+o}function go(e,t,r,n){const[i,s]=t,[o,a]=r;let h=(e-i)/(s-i);return n=="eout"&&(h=Math.sin(h*Math.PI/2)),n=="ein"&&(h=1-Math.cos(h*Math.PI/2)),n=="normal"&&(h=0),e<i?o:e>s?a:o===a?o:h*(a-o)+o}function To(e,t,r){const[n,i]=t,[s,o]=r;let a=(e-n)/(i-n);return a=1-Math.pow(1-a,5),e<n?s:e>i?o:s===o?s:a*(o-s)+s}const G1="/assets/hit.3c6c1a6d.png",$1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABWCAYAAACJg9eFAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFEsAABRLARTJybQAAAOMaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPg0KICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOklwdGM0eG1wRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIj4NCiAgICAgIDxkYzp0aXRsZT4NCiAgICAgICAgPHJkZjpBbHQ+DQogICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5VbnRpdGxlZCBBcnR3b3JrPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOkFsdD4NCiAgICAgIDwvZGM6dGl0bGU+DQogICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xMzI8L3RpZmY6WVJlc29sdXRpb24+DQogICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xMzI8L3RpZmY6WFJlc29sdXRpb24+DQogICAgICA8dGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPjI8L3RpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4NCiAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+DQogICAgICA8SXB0YzR4bXBFeHQ6QXJ0d29ya1RpdGxlPlVudGl0bGVkIEFydHdvcms8L0lwdGM0eG1wRXh0OkFydHdvcmtUaXRsZT4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgPC9yZGY6UkRGPg0KPC94OnhtcG1ldGE+DQo8P3hwYWNrZXQgZW5kPSJyIj8+LDm18gAABCNJREFUeF7t3T1uFEEQhmEvv5YsBw4ISAiJSbkAF+ACnIALEBMTkpGRcAJuwAk4DLbB1Neab6jtnV0hBN6u4X2kUveK9FVp7MW7JwAAAAAAAAAAAAAA/D8209nc3NxsvQaq2Gw2N9P1ZEPIWJs70wmsRr+p2dqoauvx4+50z4gbVcwxm6K+5/t0ClGjihx1uyvqB+0lUaOmxahP28tfIRM3KtiJ2aeiPtOpFwunEDZGszdonYr6PC4K1yP9CYxmJ2aPor6IS47aY/kOjMAhyxyzR1E/iksftEP2CYzGYS9G/TguemdR04fdR92/Bm6LI7admGN+aBT1k7joDZilsOVQyESOf0WR7uN/2wk65ruifhoXxfynYQO36WDQOhX1s7goZL2zmKP2KUSNUeSoFXKO+lqnon4eFwWtTd1va51C1BiFo+6D1pbWXCvqF3HJUS89hgAjUcxLQc9Rv4yLou7D9qYmaozGQevcClqjqF/FRUHfj8lR501N2BiFt7TDzlFfxbSoX8dFQTtqBe7Hj35TEzeORRGbg/ZoQzvqK0X9Ji4KOm/rPmpixijylvbMW1qnon4bF29qR53DFsLGCBy05KDnLa1R1O/ioj8U8Kb2D4x5SztowsaxOGaHrXHUbUNP56Wifh8XRe1NnaPm8QOjyUH3UWta1B/ioqgdtqPWOGhHTdw4FoXs0+NHD0d9qVHUH+OSo9YsbWqCxrHloPOmnre0RlF/isvDGIetTa1x1BrJURM4bosCNt8dtEZbuj1LT/NNUX+Oi4N21N7UOuXQpiZw/G055MxbWrShvalz1G1Tf4mLY973g6IQL47NQev0ps7P1C1uRf01Lg5aMXsctAcYgbe1w1bUnha2onb9wCr4h0BgNYgaq0PUWB2ixuoQNVaHX+mhmt/6lR5vvqAK//rZQe9984W3yTEax9vzhhbFnKPeepuc/9CEkeXAffeW1ijoHHX7D03811NU4U2tcdR+ltbMm5o/EkAF3tI5bAWdn6nnqPlzLlTioPOmdtQtbEXNH96iAoXsM4edo27P1oqaj0hAFY5Z8qbWeFPzYTYoJ2/pHLY3dYuajx1DBd7Q0ketmOdtraj5gEhU4k3tsP34MW9rRc1H+aIaB60zR62N3aLmQ9dRTd7U/bZuUfP1GKhEMYs3dR92i5ovMkIljtpB57D1+NG+yIivnEMlOWpP3tZ8OSiG5XiXHAxbUfM1zqigjzwH7WlhK2q+cB8VKWKfW6OoL+LSB51jzndgBA5aFqM+j0sfc38Co3HY+ZyjPovLoZgJG6NxyLITt6I+nV4QNCrZG7ai1h8ItPt0CjGjip24FbXeSWz36RSiRhWLUeuNlx5Ro4ocdaOo2dBYgznuPmqgPL01DqzK1pZma6OqzWaz82wNAAAAAAAAoICTk59aGlmKfpTNKQAAAABJRU5ErkJggg==",j1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFEsAABRLARTJybQAAAOMaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNi4wLjAiPg0KICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iIHhtbG5zOklwdGM0eG1wRXh0PSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wRXh0LzIwMDgtMDItMjkvIj4NCiAgICAgIDxkYzp0aXRsZT4NCiAgICAgICAgPHJkZjpBbHQ+DQogICAgICAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ij5VbnRpdGxlZCBBcnR3b3JrPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOkFsdD4NCiAgICAgIDwvZGM6dGl0bGU+DQogICAgICA8dGlmZjpZUmVzb2x1dGlvbj4xMzI8L3RpZmY6WVJlc29sdXRpb24+DQogICAgICA8dGlmZjpYUmVzb2x1dGlvbj4xMzI8L3RpZmY6WFJlc29sdXRpb24+DQogICAgICA8dGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPjI8L3RpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4NCiAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+DQogICAgICA8SXB0YzR4bXBFeHQ6QXJ0d29ya1RpdGxlPlVudGl0bGVkIEFydHdvcms8L0lwdGM0eG1wRXh0OkFydHdvcmtUaXRsZT4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgPC9yZGY6UkRGPg0KPC94OnhtcG1ldGE+DQo8P3hwYWNrZXQgZW5kPSJyIj8+LDm18gAABydJREFUeF7tncvLFlUcx99HS8XQoloGoasQum3MlZiVLUK0fZd9KrgU3UQiSYuwRfQPVLvATYSQKG40yvBC0CZJcBVlWhSZl+n7mfn94Ol9Ls4z88w8c/l94OvgmZdz+Z5nzpw5c86ZpSAIgiAIgiDoPgM7Np4kSdbp8Lz0tPSU9KT0hPSo9Ii0Rlot/WO6KV2XrklXpR+lS9KFwWDwp46NpLEVogrA4K3Sq9I26VlppVSWu9JF6bR0QjqjCqICG0GjKkSVsEKHl6Q3pF3Sw5JzW7osYeYP0hWJX/6v0m/SHRl7S3FwlTwoceU8LnElbZQ2SVTqMxLnnT+k49Jn0teK4x6BvUYmrpX2Sz9Jw1yS3pe2Sw/Zn5dC8ZDWixYv8Q9D+uRjrf15v1DB10sHpV8k55r0gcS9onJIx9IjXYf8HJK4N3UfFXSltEe6LjnnpJ3SPO4TM0O6lv5Zyfld2istJE+1oMJtlr6TnFPSy3a6ESg/NJEnyZxxXtpsp7uBCrRK+lC6K8FV6XU73UiUv13Sz2RWkG/yv8pOtxcVYoP0jQT/Skeludykq0b5pBNAfsk3UI4Ndrp9KPP8ymiL4YrUykuffFv+gfLstlPtQZl+R/Im6gup1b0W8m/lAMq1x041H2X23TTbSXJPOiC1ZphmGpTDykO54D071VyUyY+yvCa3pbctuFNQLisffCw18wenjPmV8bf0mgV3Espn5YTDFtwclCnuGcAvp9OV4VBOKy80556izNCb4kZH29rJZmoSlNfKTfkX3/tSJnjO8K7tAQvuFZQ7K37qA6PLi0GJ8wTuD310CTvRm5oVym3lh28lXgPUjxJmOAF4aOrH6OgEKL/5AMcsuD6UKE+vtJsMK3Rr8K0g5gl+4MsWC64eJcZwtY/aHrXgQOBHZks6SlzP0L0S4n0GMGrbioHCusAP8wX2WnB1KBHe9PnLpUYPoS8KfMnsSX1ab8HVoAR47QqnLCgYg/w5ndmUHLSg+aPIeT/g78Ab9aavaeBPZlPqVzUTJxQxszLgnAUFU8CnzK5kvwXND0W6QvKpOjstOJgCPmV2pb4x72x+KMJX0qizKTPdnYkxR/DJ/IL7NvGz1hgzCuHzwWDAlMzgPphPn2b/W3rTjuVR7a6RbqT1XNMktq4gvzZltqX+MWe5PIpoRxplkjCDPJgR+fZ9Zl+yw4LGMkuTxSx0+NKOwWx8ZUf3sRyqWcZlYLsFBTOAb5l9yXkLKo4iWSfdkRjFjHGrAuCb+YePLD4aS94mi5VLdHMvq9fwVxoSzIT5xvoWfHyOsHHkrRDvVbFYJiiO+8eiobHkrRDW9AErl4LiuH/u5wh5K4RlYcAysqA47p/7OULeCmG1K7CmLyiO++d+jpC3QlhACSywDIrj/rmfI+StEJ9NwmrXoDism4fh1cX/I2+F+PjLHTsGxWBpN5Qbz9KDTIr9NyiBWTnRy7xXyC3+UTyLmY3XEYb8m7hzRN4K8QgesGNQDN9BonSF3LDjY3YMiuG9KzbGGUveCvHeAXuHBMVx/9zPEfJWCFscwcQnzCAX7p/7OULeCvEnzMWte+gG7t/EEY+8FcLmX8AWR0Fx3D/3c4S8FcI4PrDfVFAc96/cvAT1n4ffGPZzL6mS4Jv5V/6N4SDbo5CXK/SjXyAsmBl8w7+L5udY8jZZwB6FMHUaSzARn7XoPpZDl1nMyyqBfMs1Lys3ioiZizfTKGPm4kzIL5+5iH9TR3pzN1lq9xh/YfdOmN8c1X7wlh2Pm4/zQbXrzVbMfs8JPplfMN/7ryKM9SEzgk+ZXRWsDwFF6iuozlpQMAV8yuyqYAUVKOLhNYYxz3cK+JPZVOEaQ1DkbDIMJy0oGAP+ZDYlhyyoGpQAe3r47j/s0R4sA18ye1Kfqt8DRomw4zOwr22Mbw2BH+YL7LPgalFCdOd8zUjsdTIEfmS2pE/n9T0eKLHYDWgZ5gl+1LsbkKNEY78sg/KbD1D/flmghGNHOUG5rfywuB3lQInHnotN2XPRUSZ2S7SbsStpU1BmfFOzvu7bW/1mZbOiTB3O8ta7na2PWHDzUObYCx345fRh7/dPpOZ2Zsic5FcKbWuXv45wRGpH2ZRR7inc6IAuYde+H9K8e8b9UKbpfXmXmIem+MLOolHmN0o8LAHDCm3+BhXlaP8cZxVitXRM8iasjV9pI//dWkWmAm2RfJQY2vAdQ0Zt6x8orAsVjqF73qe04Uuf+6R+zLBRQSd9C5c2u5alD6Rj6flUHSA//fkW7nJUcG6c474WTVNBP7+Kr0UTr0/vdEh/oV+LbtQDjYxg3lKvv6fe2CdMGcsc2K0SexRukzBzHm0527ZSqcxCPyGdmev0zpK0ZjhDFcQiF3a2Y6I3+03xy2dXHa4E2noqkKsDcxFLj1ntygJLriSWkTFz/4IqYOL6jCAIgiAIgiAIgn6xtPQfZzA7iPwOWWMAAAAASUVORK5CYII=",Bf="/assets/hit4.ca8e2549.png",rC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5AQMDzUv/OtSngAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAF1ElEQVR42u2d3Y7kNBCF62SzIEB7hRASl0j7MPvKXPMcSNxxx4+A3WGnU9w4kmX5p6pcttPT01LU6XR6Jv5yfFyuOA7RHbyYGbn1K79wRXhdBQL4ocHOUt4q0HiJMK8AGY8AdAVgPBLQmYBxQaDW3/KVAOMCQEepmlcCxiKosy2CZ8PFZKirPXcaYDwIUBPgHrgYDBWDaxWPBmyFi0FQVzZi7P0bC1wshoorVPkRcLEI6lWjAje4mAx1JHiesY8U7j4pHsYEBUMABwJ4cGgUZQVqqLUHGpxgs+E7tv5NiWqxCComRwXsfFKacDEIai9QD49lJ/Wa4G4DLEQKFck2ZLZpjwmVz9oT3lWTYFCr9iBqhett1DQ+ySMso6Rar6iAFCr1tAA0Ch+38Glrj8b+/lGBk1pLn9FhHz2eyULluqh2n6xMKK1DYhW56p6LV899kdmXvVULB7XW4EAJH52KZYW3smcEkap2hMdqVQiDqilRX257Sb0o7MPDIDioFQrVwqjuli+yUJkadatVOyoq0ECVwpb0+TmTMygpM6dct7zBbqzaFj+sQa1tqym2BCdtpKTVXgqyuR8G2ACE1b60TaraFGS8pFVdYg/saQd7Z1W3dARQgNkCLIlLkQFZC70k4ZbJDnajDVhzCDWoiPIXWrCpWlu+6+Gn1f09Gi8o/ZQacEvAc8Bi1R3CeNfSaKlVuzf81eK5EtWWoG5CuJxZtgxczhwTV0B2x7PMDAA8MgmDSjqwBnUrgM6BPZL1FC4agN07BhIrGDEgoxQVbJn3LbM9hYoILiVwayGXp3impA1hVHKq3DfJewr2CMstbL8VbEYD1TU62J3AQWEDLeVuEdQ9LCdgioCeMJ+TAh/R3+UCoJoduCh7dKK71YEoeewJ9YuwvI2O9UZE/4WFMjFrurBn43RFsK30IBK1vg1Qvyaib4joq7DvJyL6J4J0RFHB0BZfBXbxfQI5FZ9wdyL6kojeEdH3RPRD+P63sMSWcKt49nSozIz9IjBzcN8Exb4jovdE9CHA/omI/g3Lp0pItk4tAO8A+EJ3t6Sx7hYs4Vsi+jGsfxeAb8JOyfQXM2O/2C1Daet+C6r8lYh+Dor9Jaj1Oekg0KMrlpMsFGcC/xPqExH9FWD+EX73e9j2lIErub41p/G6kFLj5UZEn0N1/zsA/DOAfSKijxHYW3QyWpmuFwuWGyk/TnpUp7I/h+p/xrHPYdtzBSqvVO3uXL1rnkmCLNWR2ecIABHlBm7JcmT8lgUnkgTHPAUsU/suFgj3o4zXcpKd4gQsZZSdU+yhADVE0XsHROk+JTWg0HBRQcVIVMzJe8kOrH7LPUreJ/pqLgESg6Io5YdM/79kIUdhPQU6omGrX5pxCrm4kPSQHkyszjhhXQJLFaBaP3Wzg56rtKVBEVrVcqaRgqDLyw24VOg4aJTaZQMSsBYPReNzzmOpAFkDthZuScIv9rKBkeEWF6qvNKnMpB9XoIHqqs5W0qN0tdZjQFzp3gDNMKMWXBYAl3ireSSMdlCc1A6YZEMua8nokrprow1LcCxV3uXW0F4rkIDMXSkt2ULLGiSF5EJDxcIT4tYL6x3RLR1krB0jC8NJloRPGgvQbHMf0V1rpHqU25vcka6rAZoVO1C1tXXJZ2vMORz2qLtmpKotNWKtYZbWxkSa9HZXa1UVznfPWBTr1X/3ujtRdWfiRn4vdigkd/7/UVD9FGtUrbVDMUux1vBKpdYej5V2Blrd3prHetcWV6hdim2o1qpcTXQxypK6v+uaCGIw3N7feqhtCFTVwQ+E66lWTfU1d2UlYEdfpaVKIqVUkNHzx/aoWDw91IoJzVYOaZoC1VTIO50tbtpEZl2Fu5P5DZfNa9hVqEHTnGIiTNH+U6c5VcJd7avmE7BkYt47BTwcqHtBXyc/H1jA1+n6Bxfq9QETr49Eua9Holwd8N0/xOdqgF/cY6dWQn6IB6XNAn2Vx/td+nUCZ2acyz0c9/9qbmPj7j+UBQAAAABJRU5ErkJggg==";function qa(e,t){let r=e.length;if(t<=e[0].time)return e[0];if(t>=e[r-1].time)return e[r-1];let n=0,i=r,s=0;for(;n<i;){if(s=Math.floor((n+i)/2),e[s].time==t)return e[s];if(t<e[s].time){if(s>0&&t>e[s-1].time)return e[s-1];i=s}else{if(s<r-1&&t<e[s+1].time)return e[s];n=s+1}}return e[s]}function At(e,t,r){const n=qa(r.sort((a,h)=>a.time-h.time),e),i=n.floorPosition+n.speed*(e-n.time),s=qa(r.sort((a,h)=>a.time-h.time),t);return s.floorPosition+s.speed*(t-s.time)-i}function hm(e,t,r){let n=0,i=t.filter(s=>s.time<=e).sort((s,o)=>s.time-o.time).reverse();if(t=t.filter(s=>s.time<=e).sort((s,o)=>s.time-o.time),i[0]!=null&&(n+=e-i[0].time),i.length==0){const s=t[0],o=t.length!=1?t[1]:s;r-=o.speed*(e-s.time)}return i.forEach((s,o)=>{const a=s,h=o+1!=i.length?i[o+1]:s;h.speed*(a.time-h.time)<=r?(n+=a.time-h.time,r-=h.speed*(a.time-h.time)):n+=r/h.speed}),n}var Ff={exports:{}},Of={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QM=V.exports,ZM=Symbol.for("react.element"),JM=Symbol.for("react.fragment"),e8=Object.prototype.hasOwnProperty,t8=QM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r8={key:!0,ref:!0,__self:!0,__source:!0};function nC(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)e8.call(t,n)&&!r8.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:ZM,type:e,key:s,ref:o,props:i,_owner:t8.current}}Of.Fragment=JM;Of.jsx=nC;Of.jsxs=nC;(function(e){e.exports=Of})(Ff);const Me=Ff.exports.Fragment,A=Ff.exports.jsx,W=Ff.exports.jsxs;function n8(e){const t=V.exports.useRef(At(e.startTime,e.endTime,e.game.beatmap.timingPoints)),[r,n]=V.exports.useState(-t),[i,s]=V.exports.useState(!0),[o,a]=V.exports.useState(1),[h,d]=V.exports.useState(-1),[p,c]=V.exports.useState(""),[f,m]=V.exports.useState(!1),[v,_]=V.exports.useState(0),[T,x]=V.exports.useState(0),[y,w]=V.exports.useState(0),[E,P]=V.exports.useState(0),[I,R]=V.exports.useState(ye/2-Nt/2+.5*Nt);V.exports.useEffect(()=>{let M=e.game.beatmap.cursor.filter(O=>O.startTime<=e.startTime)[e.game.beatmap.cursor.filter(O=>O.startTime<=e.startTime).length-1],z=e.game.beatmap.cursor.filter(O=>O.startTime>e.startTime)[0],F=M!=null?M.x:.5,U=z!=null?z.x:M.x,Y=M!=null?M.startTime:0,J=z!=null?z.startTime:M.startTime;const Q=go(e.startTime,[Y,J],[F,U],M.type);R(ye/2-Nt/2+Q*Nt)},[e.game.beatmap]);const[N,D]=V.exports.useState(16777215);V.exports.useRef(new Xn);let k=eC[e.keys-1];return e.color||(k=16777215),e.game.beatmap.cursor.filter(M=>M.startTime<=e.startTime).sort((M,z)=>M.startTime-z.startTime).reverse()[0],he.exports.useTick(()=>{let M=!0;const z=e.game.currenttime;if(e.game.mode=="edit"?(m(z>=e.visiblestart&&z<=e.visibleend+1e3),s(z<=e.visibleend+1e3)):(m(z>=e.visiblestart&&z<=e.visibleend),s(M)),f&&i){e.game.mode!="edit"&&(e.game.hitlist.length>0&&e.game.hitlist.forEach(Y=>{Y.startsWith(e.startTime.toString()+","+e.keys.toString())&&(!Y.endsWith("misslost")&&h==-1&&p==""?(c("true"),d(z),D(Y.split(",")[2]=="perfect"?16735978:Y.split(",")[2]=="great"?16775774:Y.split(",")[2]=="miss"?16711680:16777215)):Y.endsWith("misslost")&&c("false")),Y.startsWith(e.startTime.toString()+","+(e.keys+10).toString())&&Y.endsWith("misslost")&&c("false")}),p=="true"?(a(1),_(To(z,[h,h+1e3],[1,0])),x(To(z,[h,h+1e3],[2,2.5])),w(Xt(z,[h+100,h+1e3],[.3,0],!0))):p=="false"&&(a(.1),a(1),_(0),x(2.5),w(0)));let F=e.hitobject.scrollPosList[E],U=e.hitobject.scrollPosList[E+1]!=null?e.hitobject.scrollPosList[E+1]:F;U==null&&(U=F),z>=U[0]&&e.hitobject.scrollPosList[E+1]!=null?(P(E+1),F=e.hitobject.scrollPosList[E],U=e.hitobject.scrollPosList[E+1]!=null?e.hitobject.scrollPosList[E+1]:F):z<F[0]&&e.game.mode=="edit"&&e.hitobject.scrollPosList[E-1]!=null&&(P(E-1),F=e.hitobject.scrollPosList[E],U=e.hitobject.scrollPosList[E+1]!=null?e.hitobject.scrollPosList[E+1]:F),n(ge-De-Xt(z,[F[0],U[0]],[F[1],U[1]])),e.game.mode=="edit"&&c("false"),z>=e.endTime&&e.game.mode!="edit"&&a(0)}}),A(Me,{children:f&&W(Me,{children:[A(he.exports.Sprite,{texture:ae.WHITE,x:I-$e/2+Pe*(e.keys-1)+Pe*.05,y:p=="true"?ge-De:r,anchor:[0,1],width:Pe*.9,height:p=="true"?Math.round(t.current-(r-ge)-De):t.current,alpha:Math.round(t.current-(r-ge)-De)!=0?o:0,tint:k}),A(he.exports.Sprite,{texture:ae.WHITE,tint:"white",x:I-$e/2+Pe*(e.keys-1),y:p=="true"?ge-De:r,anchor:[0,1],width:1,height:p=="true"?Math.round(t.current-(r-ge)-De):t.current,alpha:Math.round(t.current-(r-ge)-De)!=0?o:0}),A(he.exports.Sprite,{texture:ae.WHITE,tint:"white",x:I-$e/2+Pe*e.keys,y:p=="true"?ge-De:r,anchor:[1,1],width:1,height:p=="true"?Math.round(t.current-(r-ge)-De):t.current,alpha:Math.round(t.current-(r-ge)-De)!=0?o:0}),A(he.exports.Sprite,{texture:ae.WHITE,tint:"white",x:I-$e/2+(Pe*(e.keys-1)+Pe/2),y:p=="true"?ge-De:r,blendMode:me.ADD,anchor:[.5,1],width:2,height:p=="true"?Math.round(t.current-(r-ge)-De):t.current,alpha:Math.round(t.current-(r-ge)-De)!=0?o:0}),W(he.exports.Container,{alpha:1,children:[A(he.exports.Sprite,{image:G1,x:I-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,blendMode:me.ADD,tint:N,anchor:[.5,1],width:Pe*v,height:Pe*8,alpha:v}),A(he.exports.Sprite,{image:$1,x:I-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:N,width:Pe,height:Hi*1.5,alpha:v}),A(he.exports.Sprite,{image:j1,x:I-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:N,width:Pe*T,height:Pe*T,alpha:y}),A(he.exports.Sprite,{image:Bf,x:I-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:N,width:Pe*4,alpha:v}),A(he.exports.Sprite,{image:rC,x:I-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:N,width:Pe*v*10,height:Pe*v*10,alpha:v})]})]})})}let po=-1,iC=-1,sC="miss",eu="miss",mo=0;function dm(e,t,r){switch(po=e,iC=e,sC=t,t){case"perfect":eu="X-PHASED";break;case"great":eu="PHASED";break;case"bad":eu="MIS-PHASED";break;case"miss":eu="ERROR";break}mo=r}function i8(e){return new Ku(e,new Yt({fill:16721594,dropShadow:!0,dropShadowBlur:0,dropShadowDistance:0,dropShadowColor:16777215,fontFamily:"Courier New",fontSize:25,fontVariant:"small-caps",trim:!1}))}function s8(e){he.exports.useApp(),V.exports.useState(0);const[t,r]=V.exports.useState(0),n=[16735838,16775774,6225761,6225914,8806143,16735978],[i,s]=V.exports.useState(0),[o,a]=V.exports.useState(0),[h,d]=V.exports.useState(0);return he.exports.useTick(()=>{if(e.game.mode=="play"){const p=e.game.currenttime;if(po!=-1){switch(p>po+1e3&&(po=-1),sC){case"perfect":r(Math.round(Math.random()*(n.length-1)));break;case"great":r(1);break;case"miss":r(0);break;case"bad":r(4)}d(To(p,[po,po+300],[1.2,1])),s(p<po+1e3?1:0),a(p<iC+1e3?1:0)}}}),W(Me,{children:[A(he.exports.Text,{text:`${Math.round(e.game.score/e.game.maxscore*100)} %`,x:ye-10,y:20,anchor:[1,0],style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${ye*.02}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${eu.toUpperCase()} ${e.game.combo}`,anchor:[.5,.5],x:ye/2,y:ge*.3,alpha:i,tint:n[t],style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${ye*.018}px`,align:"left",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:0,dropShadowColor:"black"})}),A(he.exports.Text,{text:`${e.game.combo}`,anchor:[.5,.5],x:ye/2,y:ge*.05,alpha:1,style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${ye*.015}px`,align:"left"})}),A(he.exports.Sprite,{image:Bf,anchor:[.5,.5],x:ye/2,width:ye*.1,y:ge*.3,alpha:i*.5,blendMode:me.ADD,tint:n[t],scale:[3/h,3/h]}),A(he.exports.Text,{text:`${mo>20?"Late":mo<-20?"Early":""} ${Math.abs(mo)>20?`(${Math.round(mo*10)/10}ms)`:""}`,anchor:[.5,.5],x:ye/2,y:ge*.35,alpha:o,tint:mo>20?14907970:(mo<-20,5111771),style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"700",fontSize:`${ye*.008}px`,align:"left",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:0,dropShadowColor:"black"})})]})}qn.from(ae.WHITE);i8("");function o8(e){let[t,r]=V.exports.useState(!1),[n,i]=V.exports.useState(!0);const[s,o]=V.exports.useState(-Hi),[a,h]=V.exports.useState(1),[d,p]=V.exports.useState(0),[c,f]=V.exports.useState(0),[m,v]=V.exports.useState(0),[_,T]=V.exports.useState(-1),[x,y]=V.exports.useState(ye/2-Nt/2+.5*Nt),[w,E]=V.exports.useState(!1),[P,I]=V.exports.useState(16777215),[R,N]=V.exports.useState(0);let D=eC[e.keys-1];return e.color||(D=16777215),V.exports.useEffect(()=>{let k=e.game.beatmap.cursor.filter(Q=>Q.startTime<=e.startTime)[e.game.beatmap.cursor.filter(Q=>Q.startTime<=e.startTime).length-1],M=e.game.beatmap.cursor.filter(Q=>Q.startTime>e.startTime)[0],z=k!=null?k.x:.5,F=M!=null?M.x:k.x,U=k!=null?k.startTime:0,Y=M!=null?M.startTime:k.startTime;const J=go(e.startTime,[U,Y],[z,F],k.type);y(ye/2-Nt/2+J*Nt)},[e.game.beatmap]),he.exports.useTick(()=>{let k=!0;const M=e.game.currenttime;e.game.mode=="edit"?(E(M>=e.visiblestart&&M<=e.visibleend+1e3),i(M<=e.visibleend+1e3)):(E(M>=e.visiblestart&&M<=e.visibleend),i(k))}),he.exports.useTick(()=>{let k=e.game.isPlaying;const M=e.game.currenttime;if(w&&n&&e.game.mode!="edit"&&(e.game.hitlist.length>0?e.game.hitlist.forEach(z=>{z.startsWith(e.startTime.toString()+","+e.keys.toString())&&_==-1&&(r(!0),I(z.split(",")[2]=="perfect"?16735978:z.split(",")[2]=="great"?16775774:z.split(",")[2]=="miss"?16711680:16777215),T(M))}):(r(!1),T(-1))),k&&n&&M>=e.visiblestart&&M<=e.visibleend+1e3)if(t)P!=16711680?h(0):h(To(M,[_,_+500],[1,0])),p(To(M,[_,_+500],[1,0])),f(To(M,[_,_+500],[2,2.5])),v(Xt(M,[_+100,_+500],[.3,0],!0));else{let z=e.hitobject.scrollPosList[R],F=e.hitobject.scrollPosList[R+1]!=null?e.hitobject.scrollPosList[R+1]:z;F==null&&(F=z),M>=F[0]&&e.hitobject.scrollPosList[R+1]!=null?(N(R+1),z=e.hitobject.scrollPosList[R],F=e.hitobject.scrollPosList[R+1]!=null?e.hitobject.scrollPosList[R+1]:z):M<z[0]&&e.game.mode=="edit"&&e.hitobject.scrollPosList[R-1]!=null&&(N(R-1),z=e.hitobject.scrollPosList[R],F=e.hitobject.scrollPosList[R+1]!=null?e.hitobject.scrollPosList[R+1]:z),o(ge-De-Xt(M,[z[0],F[0]],[z[1],F[1]]))}}),W(Me,{children:[w?W(Me,{children:[A(he.exports.Sprite,{texture:ae.WHITE,tint:D,x:x-$e/2+Pe*(e.keys-1)+Pe*.05,y:s,anchor:[0,1],width:Pe*.9,height:Hi,alpha:a}),A(he.exports.Sprite,{texture:ae.WHITE,tint:"white",x:x-$e/2+Pe*(e.keys-1)-2,y:s,anchor:[0,1],width:2,height:Hi,alpha:a}),A(he.exports.Sprite,{texture:ae.WHITE,tint:"white",x:x-$e/2+Pe*e.keys+2,y:s,anchor:[1,1],width:2,height:Hi,alpha:a})]}):null,e.game.currenttime<e.visibleend+1e3&&W(Me,{children:[A(he.exports.Sprite,{image:G1,x:x-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,tint:P,anchor:[.5,1],width:Pe*d,height:Pe*8,alpha:d}),A(he.exports.Sprite,{texture:ae.WHITE,tint:P,x:x-$e/2+Pe*(e.keys-1),y:Xt(d,[0,1],[ge-De-ge*.3,ge-De]),anchor:[0,1],width:Pe,height:Hi,alpha:d*.4}),A(he.exports.Sprite,{image:$1,x:x-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],tint:P,width:Pe,height:Hi*1.5,alpha:d}),A(he.exports.Sprite,{image:j1,x:x-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:P,width:Pe*c,height:Pe*c,alpha:m}),A(he.exports.Sprite,{image:Bf,x:x-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],tint:P,width:Pe*4,alpha:d}),A(he.exports.Sprite,{image:rC,x:x-$e/2+Pe*(e.keys-1)+Pe/2,y:ge-De,anchor:[.5,.5],tint:P,width:Pe*d*10,height:Pe*d*10,alpha:d})]})]})}var mr={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var t=function(){this.init()};t.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var f=this||r;if(c=parseFloat(c),f.ctx||p(),typeof c<"u"&&c>=0&&c<=1){if(f._volume=c,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var v=f._howls[m]._getSoundIds(),_=0;_<v.length;_++){var T=f._howls[m]._soundById(v[_]);T&&T._node&&(T._node.volume=T._volume*c)}return f}return f._volume},mute:function(c){var f=this||r;f.ctx||p(),f._muted=c,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(c?0:f._volume,r.ctx.currentTime);for(var m=0;m<f._howls.length;m++)if(!f._howls[m]._webAudio)for(var v=f._howls[m]._getSoundIds(),_=0;_<v.length;_++){var T=f._howls[m]._soundById(v[_]);T&&T._node&&(T._node.muted=c?!0:T._muted)}return f},stop:function(){for(var c=this||r,f=0;f<c._howls.length;f++)c._howls[f].stop();return c},unload:function(){for(var c=this||r,f=c._howls.length-1;f>=0;f--)c._howls[f].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,p()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var f=new Audio;f.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return c}if(!f||typeof f.canPlayType!="function")return c;var m=f.canPlayType("audio/mpeg;").replace(/^no$/,""),v=c._navigator?c._navigator.userAgent:"",_=v.match(/OPR\/(\d+)/g),T=_&&parseInt(_[0].split("/")[1],10)<33,x=v.indexOf("Safari")!==-1&&v.indexOf("Chrome")===-1,y=v.match(/Version\/(.*?) /),w=x&&y&&parseInt(y[1],10)<15;return c._codecs={mp3:!!(!T&&(m||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!m,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!w&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!w&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var f=function(m){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var v=new Audio;v._unlocked=!0,c._releaseHtml5Audio(v)}catch{c.noAudio=!0;break}for(var _=0;_<c._howls.length;_++)if(!c._howls[_]._webAudio)for(var T=c._howls[_]._getSoundIds(),x=0;x<T.length;x++){var y=c._howls[_]._soundById(T[x]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}c._autoResume();var w=c.ctx.createBufferSource();w.buffer=c._scratchBuffer,w.connect(c.ctx.destination),typeof w.start>"u"?w.noteOn(0):w.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),w.onended=function(){w.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var E=0;E<c._howls.length;E++)c._howls[E]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var f=this||r;return c._unlocked&&f._html5AudioPool.push(c),f},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var f=0;f<c._howls.length;f++)if(c._howls[f]._webAudio){for(var m=0;m<c._howls[f]._sounds.length;m++)if(!c._howls[f]._sounds[m]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(!!c.autoSuspend){c._suspendTimer=null,c.state="suspending";var v=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(v,v)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var f=0;f<c._howls.length;f++)c._howls[f]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new t,n=function(c){var f=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(c)};n.prototype={init:function(c){var f=this;return r.ctx||p(),f._autoplay=c.autoplay||!1,f._format=typeof c.format!="string"?c.format:[c.format],f._html5=c.html5||!1,f._muted=c.mute||!1,f._loop=c.loop||!1,f._pool=c.pool||5,f._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,f._rate=c.rate||1,f._sprite=c.sprite||{},f._src=typeof c.src!="string"?c.src:[c.src],f._volume=c.volume!==void 0?c.volume:1,f._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=c.onend?[{fn:c.onend}]:[],f._onfade=c.onfade?[{fn:c.onfade}]:[],f._onload=c.onload?[{fn:c.onload}]:[],f._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],f._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],f._onpause=c.onpause?[{fn:c.onpause}]:[],f._onplay=c.onplay?[{fn:c.onplay}]:[],f._onstop=c.onstop?[{fn:c.onstop}]:[],f._onmute=c.onmute?[{fn:c.onmute}]:[],f._onvolume=c.onvolume?[{fn:c.onvolume}]:[],f._onrate=c.onrate?[{fn:c.onrate}]:[],f._onseek=c.onseek?[{fn:c.onseek}]:[],f._onunlock=c.onunlock?[{fn:c.onunlock}]:[],f._onresume=[],f._webAudio=r.usingWebAudio&&!f._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var c=this,f=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var m=0;m<c._src.length;m++){var v,_;if(c._format&&c._format[m])v=c._format[m];else{if(_=c._src[m],typeof _!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}v=/^data:audio\/([^;,]+);/i.exec(_),v||(v=/\.([^.]+)$/.exec(_.split("?",1)[0])),v&&(v=v[1].toLowerCase())}if(v||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),v&&r.codecs(v)){f=c._src[m];break}}if(!f){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=f,c._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&o(c),c},play:function(c,f){var m=this,v=null;if(typeof c=="number")v=c,c=null;else{if(typeof c=="string"&&m._state==="loaded"&&!m._sprite[c])return null;if(typeof c>"u"&&(c="__default",!m._playLock)){for(var _=0,T=0;T<m._sounds.length;T++)m._sounds[T]._paused&&!m._sounds[T]._ended&&(_++,v=m._sounds[T]._id);_===1?c=null:v=null}}var x=v?m._soundById(v):m._inactiveSound();if(!x)return null;if(v&&!c&&(c=x._sprite||"__default"),m._state!=="loaded"){x._sprite=c,x._ended=!1;var y=x._id;return m._queue.push({event:"play",action:function(){m.play(y)}}),y}if(v&&!x._paused)return f||m._loadQueue("play"),x._id;m._webAudio&&r._autoResume();var w=Math.max(0,x._seek>0?x._seek:m._sprite[c][0]/1e3),E=Math.max(0,(m._sprite[c][0]+m._sprite[c][1])/1e3-w),P=E*1e3/Math.abs(x._rate),I=m._sprite[c][0]/1e3,R=(m._sprite[c][0]+m._sprite[c][1])/1e3;x._sprite=c,x._ended=!1;var N=function(){x._paused=!1,x._seek=w,x._start=I,x._stop=R,x._loop=!!(x._loop||m._sprite[c][2])};if(w>=R){m._ended(x);return}var D=x._node;if(m._webAudio){var k=function(){m._playLock=!1,N(),m._refreshBuffer(x);var U=x._muted||m._muted?0:x._volume;D.gain.setValueAtTime(U,r.ctx.currentTime),x._playStart=r.ctx.currentTime,typeof D.bufferSource.start>"u"?x._loop?D.bufferSource.noteGrainOn(0,w,86400):D.bufferSource.noteGrainOn(0,w,E):x._loop?D.bufferSource.start(0,w,86400):D.bufferSource.start(0,w,E),P!==1/0&&(m._endTimers[x._id]=setTimeout(m._ended.bind(m,x),P)),f||setTimeout(function(){m._emit("play",x._id),m._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?k():(m._playLock=!0,m.once("resume",k),m._clearTimer(x._id))}else{var M=function(){D.currentTime=w,D.muted=x._muted||m._muted||r._muted||D.muted,D.volume=x._volume*r.volume(),D.playbackRate=x._rate;try{var U=D.play();if(U&&typeof Promise<"u"&&(U instanceof Promise||typeof U.then=="function")?(m._playLock=!0,N(),U.then(function(){m._playLock=!1,D._unlocked=!0,f?m._loadQueue():m._emit("play",x._id)}).catch(function(){m._playLock=!1,m._emit("playerror",x._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),x._ended=!0,x._paused=!0})):f||(m._playLock=!1,N(),m._emit("play",x._id)),D.playbackRate=x._rate,D.paused){m._emit("playerror",x._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||x._loop?m._endTimers[x._id]=setTimeout(m._ended.bind(m,x),P):(m._endTimers[x._id]=function(){m._ended(x),D.removeEventListener("ended",m._endTimers[x._id],!1)},D.addEventListener("ended",m._endTimers[x._id],!1))}catch(Y){m._emit("playerror",x._id,Y)}};D.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(D.src=m._src,D.load());var z=window&&window.ejecta||!D.readyState&&r._navigator.isCocoonJS;if(D.readyState>=3||z)M();else{m._playLock=!0,m._state="loading";var F=function(){m._state="loaded",M(),D.removeEventListener(r._canPlayEvent,F,!1)};D.addEventListener(r._canPlayEvent,F,!1),m._clearTimer(x._id)}}return x._id},pause:function(c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(c)}}),f;for(var m=f._getSoundIds(c),v=0;v<m.length;v++){f._clearTimer(m[v]);var _=f._soundById(m[v]);if(_&&!_._paused&&(_._seek=f.seek(m[v]),_._rateSeek=0,_._paused=!0,f._stopFade(m[v]),_._node))if(f._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),f._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||f._emit("pause",_?_._id:null)}return f},stop:function(c,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"stop",action:function(){m.stop(c)}}),m;for(var v=m._getSoundIds(c),_=0;_<v.length;_++){m._clearTimer(v[_]);var T=m._soundById(v[_]);T&&(T._seek=T._start||0,T._rateSeek=0,T._paused=!0,T._ended=!0,m._stopFade(v[_]),T._node&&(m._webAudio?T._node.bufferSource&&(typeof T._node.bufferSource.stop>"u"?T._node.bufferSource.noteOff(0):T._node.bufferSource.stop(0),m._cleanBuffer(T._node)):(!isNaN(T._node.duration)||T._node.duration===1/0)&&(T._node.currentTime=T._start||0,T._node.pause(),T._node.duration===1/0&&m._clearSound(T._node))),f||m._emit("stop",T._id))}return m},mute:function(c,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"mute",action:function(){m.mute(c,f)}}),m;if(typeof f>"u")if(typeof c=="boolean")m._muted=c;else return m._muted;for(var v=m._getSoundIds(f),_=0;_<v.length;_++){var T=m._soundById(v[_]);T&&(T._muted=c,T._interval&&m._stopFade(T._id),m._webAudio&&T._node?T._node.gain.setValueAtTime(c?0:T._volume,r.ctx.currentTime):T._node&&(T._node.muted=r._muted?!0:c),m._emit("mute",T._id))}return m},volume:function(){var c=this,f=arguments,m,v;if(f.length===0)return c._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var _=c._getSoundIds(),T=_.indexOf(f[0]);T>=0?v=parseInt(f[0],10):m=parseFloat(f[0])}else f.length>=2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));var x;if(typeof m<"u"&&m>=0&&m<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,f)}}),c;typeof v>"u"&&(c._volume=m),v=c._getSoundIds(v);for(var y=0;y<v.length;y++)x=c._soundById(v[y]),x&&(x._volume=m,f[2]||c._stopFade(v[y]),c._webAudio&&x._node&&!x._muted?x._node.gain.setValueAtTime(m,r.ctx.currentTime):x._node&&!x._muted&&(x._node.volume=m*r.volume()),c._emit("volume",x._id))}else return x=v?c._soundById(v):c._sounds[0],x?x._volume:0;return c},fade:function(c,f,m,v){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(c,f,m,v)}}),_;c=Math.min(Math.max(0,parseFloat(c)),1),f=Math.min(Math.max(0,parseFloat(f)),1),m=parseFloat(m),_.volume(c,v);for(var T=_._getSoundIds(v),x=0;x<T.length;x++){var y=_._soundById(T[x]);if(y){if(v||_._stopFade(T[x]),_._webAudio&&!y._muted){var w=r.ctx.currentTime,E=w+m/1e3;y._volume=c,y._node.gain.setValueAtTime(c,w),y._node.gain.linearRampToValueAtTime(f,E)}_._startFadeInterval(y,c,f,m,T[x],typeof v>"u")}}return _},_startFadeInterval:function(c,f,m,v,_,T){var x=this,y=f,w=m-f,E=Math.abs(w/.01),P=Math.max(4,E>0?v/E:v),I=Date.now();c._fadeTo=m,c._interval=setInterval(function(){var R=(Date.now()-I)/v;I=Date.now(),y+=w*R,y=Math.round(y*100)/100,w<0?y=Math.max(m,y):y=Math.min(m,y),x._webAudio?c._volume=y:x.volume(y,c._id,!0),T&&(x._volume=y),(m<f&&y<=m||m>f&&y>=m)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,x.volume(m,c._id),x._emit("fade",c._id))},P)},_stopFade:function(c){var f=this,m=f._soundById(c);return m&&m._interval&&(f._webAudio&&m._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(m._interval),m._interval=null,f.volume(m._fadeTo,c),m._fadeTo=null,f._emit("fade",c)),f},loop:function(){var c=this,f=arguments,m,v,_;if(f.length===0)return c._loop;if(f.length===1)if(typeof f[0]=="boolean")m=f[0],c._loop=m;else return _=c._soundById(parseInt(f[0],10)),_?_._loop:!1;else f.length===2&&(m=f[0],v=parseInt(f[1],10));for(var T=c._getSoundIds(v),x=0;x<T.length;x++)_=c._soundById(T[x]),_&&(_._loop=m,c._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=m,m&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,c.playing(T[x])&&(c.pause(T[x],!0),c.play(T[x],!0)))));return c},rate:function(){var c=this,f=arguments,m,v;if(f.length===0)v=c._sounds[0]._id;else if(f.length===1){var _=c._getSoundIds(),T=_.indexOf(f[0]);T>=0?v=parseInt(f[0],10):m=parseFloat(f[0])}else f.length===2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));var x;if(typeof m=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,f)}}),c;typeof v>"u"&&(c._rate=m),v=c._getSoundIds(v);for(var y=0;y<v.length;y++)if(x=c._soundById(v[y]),x){c.playing(v[y])&&(x._rateSeek=c.seek(v[y]),x._playStart=c._webAudio?r.ctx.currentTime:x._playStart),x._rate=m,c._webAudio&&x._node&&x._node.bufferSource?x._node.bufferSource.playbackRate.setValueAtTime(m,r.ctx.currentTime):x._node&&(x._node.playbackRate=m);var w=c.seek(v[y]),E=(c._sprite[x._sprite][0]+c._sprite[x._sprite][1])/1e3-w,P=E*1e3/Math.abs(x._rate);(c._endTimers[v[y]]||!x._paused)&&(c._clearTimer(v[y]),c._endTimers[v[y]]=setTimeout(c._ended.bind(c,x),P)),c._emit("rate",x._id)}}else return x=c._soundById(v),x?x._rate:c._rate;return c},seek:function(){var c=this,f=arguments,m,v;if(f.length===0)c._sounds.length&&(v=c._sounds[0]._id);else if(f.length===1){var _=c._getSoundIds(),T=_.indexOf(f[0]);T>=0?v=parseInt(f[0],10):c._sounds.length&&(v=c._sounds[0]._id,m=parseFloat(f[0]))}else f.length===2&&(m=parseFloat(f[0]),v=parseInt(f[1],10));if(typeof v>"u")return 0;if(typeof m=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,f)}}),c;var x=c._soundById(v);if(x)if(typeof m=="number"&&m>=0){var y=c.playing(v);y&&c.pause(v,!0),x._seek=m,x._ended=!1,c._clearTimer(v),!c._webAudio&&x._node&&!isNaN(x._node.duration)&&(x._node.currentTime=m);var w=function(){y&&c.play(v,!0),c._emit("seek",v)};if(y&&!c._webAudio){var E=function(){c._playLock?setTimeout(E,0):w()};setTimeout(E,0)}else w()}else if(c._webAudio){var P=c.playing(v)?r.ctx.currentTime-x._playStart:0,I=x._rateSeek?x._rateSeek-x._seek:0;return x._seek+(I+P*Math.abs(x._rate))}else return x._node.currentTime;return c},playing:function(c){var f=this;if(typeof c=="number"){var m=f._soundById(c);return m?!m._paused:!1}for(var v=0;v<f._sounds.length;v++)if(!f._sounds[v]._paused)return!0;return!1},duration:function(c){var f=this,m=f._duration,v=f._soundById(c);return v&&(m=f._sprite[v._sprite][1]/1e3),m},state:function(){return this._state},unload:function(){for(var c=this,f=c._sounds,m=0;m<f.length;m++)f[m]._paused||c.stop(f[m]._id),c._webAudio||(c._clearSound(f[m]._node),f[m]._node.removeEventListener("error",f[m]._errorFn,!1),f[m]._node.removeEventListener(r._canPlayEvent,f[m]._loadFn,!1),f[m]._node.removeEventListener("ended",f[m]._endFn,!1),r._releaseHtml5Audio(f[m]._node)),delete f[m]._node,c._clearTimer(f[m]._id);var v=r._howls.indexOf(c);v>=0&&r._howls.splice(v,1);var _=!0;for(m=0;m<r._howls.length;m++)if(r._howls[m]._src===c._src||c._src.indexOf(r._howls[m]._src)>=0){_=!1;break}return s&&_&&delete s[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,f,m,v){var _=this,T=_["_on"+c];return typeof f=="function"&&T.push(v?{id:m,fn:f,once:v}:{id:m,fn:f}),_},off:function(c,f,m){var v=this,_=v["_on"+c],T=0;if(typeof f=="number"&&(m=f,f=null),f||m)for(T=0;T<_.length;T++){var x=m===_[T].id;if(f===_[T].fn&&x||!f&&x){_.splice(T,1);break}}else if(c)v["_on"+c]=[];else{var y=Object.keys(v);for(T=0;T<y.length;T++)y[T].indexOf("_on")===0&&Array.isArray(v[y[T]])&&(v[y[T]]=[])}return v},once:function(c,f,m){var v=this;return v.on(c,f,m,1),v},_emit:function(c,f,m){for(var v=this,_=v["_on"+c],T=_.length-1;T>=0;T--)(!_[T].id||_[T].id===f||c==="load")&&(setTimeout(function(x){x.call(this,f,m)}.bind(v,_[T].fn),0),_[T].once&&v.off(c,_[T].fn,_[T].id));return v._loadQueue(c),v},_loadQueue:function(c){var f=this;if(f._queue.length>0){var m=f._queue[0];m.event===c&&(f._queue.shift(),f._loadQueue()),c||m.action()}return f},_ended:function(c){var f=this,m=c._sprite;if(!f._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(f._ended.bind(f,c),100),f;var v=!!(c._loop||f._sprite[m][2]);if(f._emit("end",c._id),!f._webAudio&&v&&f.stop(c._id,!0).play(c._id),f._webAudio&&v){f._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var _=(c._stop-c._start)*1e3/Math.abs(c._rate);f._endTimers[c._id]=setTimeout(f._ended.bind(f,c),_)}return f._webAudio&&!v&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,f._clearTimer(c._id),f._cleanBuffer(c._node),r._autoSuspend()),!f._webAudio&&!v&&f.stop(c._id,!0),f},_clearTimer:function(c){var f=this;if(f._endTimers[c]){if(typeof f._endTimers[c]!="function")clearTimeout(f._endTimers[c]);else{var m=f._soundById(c);m&&m._node&&m._node.removeEventListener("ended",f._endTimers[c],!1)}delete f._endTimers[c]}return f},_soundById:function(c){for(var f=this,m=0;m<f._sounds.length;m++)if(c===f._sounds[m]._id)return f._sounds[m];return null},_inactiveSound:function(){var c=this;c._drain();for(var f=0;f<c._sounds.length;f++)if(c._sounds[f]._ended)return c._sounds[f].reset();return new i(c)},_drain:function(){var c=this,f=c._pool,m=0,v=0;if(!(c._sounds.length<f)){for(v=0;v<c._sounds.length;v++)c._sounds[v]._ended&&m++;for(v=c._sounds.length-1;v>=0;v--){if(m<=f)return;c._sounds[v]._ended&&(c._webAudio&&c._sounds[v]._node&&c._sounds[v]._node.disconnect(0),c._sounds.splice(v,1),m--)}}},_getSoundIds:function(c){var f=this;if(typeof c>"u"){for(var m=[],v=0;v<f._sounds.length;v++)m.push(f._sounds[v]._id);return m}else return[c]},_refreshBuffer:function(c){var f=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=s[f._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),f},_cleanBuffer:function(c){var f=this,m=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return f;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),m))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,f},_clearSound:function(c){var f=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);f||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,f=c._parent;return c._muted=f._muted,c._loop=f._loop,c._volume=f._volume,c._rate=f._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,f._sounds.push(c),c.create(),c},create:function(){var c=this,f=c._parent,m=r._muted||c._muted||c._parent._muted?0:c._volume;return f._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(m,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=f._src,c._node.preload=f._preload===!0?"auto":f._preload,c._node.volume=m*r.volume(),c._node.load()),c},reset:function(){var c=this,f=c._parent;return c._muted=f._muted,c._loop=f._loop,c._volume=f._volume,c._rate=f._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,f=c._parent;f._duration=Math.ceil(c._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,f=c._parent;f._duration===1/0&&(f._duration=Math.ceil(c._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},o=function(c){var f=c._src;if(s[f]){c._duration=s[f].duration,d(c);return}if(/^data:[^;]+;base64,/.test(f)){for(var m=atob(f.split(",")[1]),v=new Uint8Array(m.length),_=0;_<m.length;++_)v[_]=m.charCodeAt(_);h(v.buffer,c)}else{var T=new XMLHttpRequest;T.open(c._xhr.method,f,!0),T.withCredentials=c._xhr.withCredentials,T.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(x){T.setRequestHeader(x,c._xhr.headers[x])}),T.onload=function(){var x=(T.status+"")[0];if(x!=="0"&&x!=="2"&&x!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+T.status+".");return}h(T.response,c)},T.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[f],c.load())},a(T)}},a=function(c){try{c.send()}catch{c.onerror()}},h=function(c,f){var m=function(){f._emit("loaderror",null,"Decoding audio data failed.")},v=function(_){_&&f._sounds.length>0?(s[f._src]=_,d(f,_)):m()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(v).catch(m):r.ctx.decodeAudioData(c,v,m)},d=function(c,f){f&&!c._duration&&(c._duration=f.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},p=function(){if(!!r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),f=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=f?parseInt(f[1],10):null;if(c&&m&&m<9){var v=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!v&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};e.Howler=r,e.Howl=n,typeof Ne<"u"?(Ne.HowlerGlobal=t,Ne.Howler=r,Ne.Howl=n,Ne.Sound=i):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof r=="number")s._pos=[r,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,n,i,s,o,a){var h=this;if(!h.ctx||!h.ctx.listener)return h;var d=h._orientation;if(n=typeof n!="number"?d[1]:n,i=typeof i!="number"?d[2]:i,s=typeof s!="number"?d[3]:s,o=typeof o!="number"?d[4]:o,a=typeof a!="number"?d[5]:a,typeof r=="number")h._orientation=[r,n,i,s,o,a],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(r,n,i,s,o,a);else return d;return h},Howl.prototype.init=function(r){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(r,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")i._stereo=r,i._pos=[r,0,0];else return i._stereo;for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var h=i._soundById(o[a]);if(h)if(typeof r=="number")h._stereo=r,h._pos=[r,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&t(h,s),s==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(r,0,0):h._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),i._emit("stereo",h._id);else return h._stereo}return i},Howl.prototype.pos=function(r,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof r=="number")o._pos=[r,n,i];else return o._pos;for(var a=o._getSoundIds(s),h=0;h<a.length;h++){var d=o._soundById(a[h]);if(d)if(typeof r=="number")d._pos=[r,n,i],d._node&&((!d._panner||d._panner.pan)&&t(d,"spatial"),typeof d._panner.positionX<"u"?(d._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):d._panner.setPosition(r,n,i)),o._emit("pos",d._id);else return d._pos}return o},Howl.prototype.orientation=function(r,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof r=="number")o._orientation=[r,n,i];else return o._orientation;for(var a=o._getSoundIds(s),h=0;h<a.length;h++){var d=o._soundById(a[h]);if(d)if(typeof r=="number")d._orientation=[r,n,i],d._node&&(d._panner||(d._pos||(d._pos=o._pos||[0,0,-.5]),t(d,"spatial")),typeof d._panner.orientationX<"u"?(d._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),d._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),d._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):d._panner.setOrientation(r,n,i)),o._emit("orientation",d._id);else return d._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,i,s,o;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),r._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(n[0],10)),o?o._pannerAttr:r._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var a=r._getSoundIds(s),h=0;h<a.length;h++)if(o=r._soundById(a[h]),o){var d=o._pannerAttr;d={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:d.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:d.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:d.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:d.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:d.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:d.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:d.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:d.panningModel};var p=o._panner;p||(o._pos||(o._pos=r._pos||[0,0,-.5]),t(o,"spatial"),p=o._panner),p.coneInnerAngle=d.coneInnerAngle,p.coneOuterAngle=d.coneOuterAngle,p.coneOuterGain=d.coneOuterGain,p.distanceModel=d.distanceModel,p.maxDistance=d.maxDistance,p.refDistance=d.refDistance,p.rolloffFactor=d.rolloffFactor,p.panningModel=d.panningModel}return r},Sound.prototype.init=function(r){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,r.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var t=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(mr);const Mv=200,a8=40,d2=80,fm=Mv;new mr.Howl({src:["audio/tap.wav"],preload:!0,volume:.1});function l8(e){const r=V.exports.useRef(0),[n,i]=V.exports.useState(0),[s,o]=V.exports.useState(0);e.hitObjects;let a=e.hitObjects.filter(h=>h.type=="hold"&&h.column==e.i&&h.ticks?.length!=0).sort((h,d)=>h.startTime-d.startTime);return he.exports.useApp().stage,he.exports.useTick(()=>{if(e.game.audio.playing()){const d=e.game.audio.seek()*1e3;if(e.game.mode=="play"){const p=e.hitObjects[r.current],c=d+0;if(p){const{startTime:m}=p,v=Math.abs(m-c);if(e.game.key[e.i-1][0]=="1"&&v<=Mv){let _="";v<=a8&&v<=fm?_="perfect":v<=d2&&v<=fm?_="great":v>=d2&&v<=fm&&(_="miss"),p.type=="hold"?e.game.hit("perfect",m,e.i,m-c):e.game.hit(_,m,e.i,v),e.game.key[e.i-1]="01",r.current++}p&&d>p.startTime+Mv&&(e.game.miss(d,e.i),r.current++)}(async()=>{const m=a[s];if(m){const _=m.ticks[n];d>=_-20&&(e.game.key[e.i-1][1]=="1"?(e.game.hit("perfect",_,e.i+10,0),i(n+1)):d>=_+20&&(e.game.miss(_,e.i+10),i(n+1)),n+1==m.ticks?.length&&(o(s+1),i(0)))}})()}}}),null}function u8(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function c8(e){const t=u8("TOGGLECOLOR");if(e.hitObjects.length==0)return null;var r=e.game.mode=="edit"?ye/4:ye/2;let n=e.i==1?r-$e/2:e.i==2||e.i==3?r:r+$e/2;return A(Me,{children:W(he.exports.Container,{position:[0,0],children:[A(l8,{hitObjects:e.hitObjects,timingPoints:e.timingPoints,game:e.game,i:e.i}),e.hitObjects.map((i,s)=>{if(i.type=="note")return A(o8,{x:n,startTime:i.startTime,keys:e.i,i:s,hitobject:i,visibleend:i.screenEndTime,visiblestart:i.screenStartTime,game:e.game,color:t=="True",cursorx:e.game.beatmap.cursor.filter(o=>o.startTime<=i.startTime)[0]!=null?e.game.beatmap.cursor.filter(o=>o.startTime<=i.startTime).sort((o,a)=>o.startTime-a.startTime).reverse()[0].x:.5},s)}),e.hitObjects.map((i,s)=>{if(i.type=="hold")return A(n8,{x:n,hitobject:i,visibleend:i.screenEndTime,visiblestart:i.screenStartTime,startTime:i.startTime,endTime:i.endTime,timingPoint:e.timingPoints.filter(o=>o.time<=i.startTime).sort((o,a)=>a.time-o.time)[0],keys:e.i,color:t=="True",i:s,game:e.game},s)})]})})}const sa=80;new mr.Howl({src:["audio/normal-hitnormal.wav"],preload:!0,volume:.1});function h8(e){const[t,r]=V.exports.useState(0),[n,i]=V.exports.useState(0),[s,o]=V.exports.useState(0);he.exports.useApp(),V.exports.useState(0),e.game.playStartTime;const a=e.cursors.filter(p=>p.type!="normal"&&p.ticks?.length!=0).sort((p,c)=>p.startTime-c.startTime),h=e.cursors.sort((p,c)=>p.startTime-c.startTime).filter((p,c)=>(e.game.beatmap.cursor[c-1]!=null?e.game.beatmap.cursor[c-1].x:.5)!=p.x),d=V.exports.useMemo(()=>h[n],[n]);return he.exports.useTick(()=>{if(e.game.playStartTime,e.game.isPlaying){const f=e.game.currenttime;if(e.game.mode=="play"){const m=n!=0?h[n-1].x:.5;if(d!=null){if(m==d.x)i(n+1);else if(f>d.startTime+sa){var c=async()=>{i(n+1),m!=d.x&&e.game.miss(d.startTime,5)};c()}if(m>d.x&&e.game.key[4]=="10"||m<d.x&&e.game.key[4]=="01"){const _=f>=d.startTime-sa||f>=d.startTime+sa?d:void 0;_&&Math.abs(_.startTime-f)<=sa&&(e.game.hit("perfect",d.startTime,5,0),i(n+1))}}(async()=>{const _=a[s];if(_){e.game.beatmap.timingPoints.find(y=>_.startTime>=y.time);const x=_.ticks[t];x==null?(o(s+1),r(0)):f>=x-sa&&(m>d.x&&e.game.key[4]=="10"||m<d.x&&e.game.key[4]=="01"?(e.game.hit("perfect",x,7,0),r(t+1)):f>=x+sa&&(e.game.miss(x,7),r(t+1)),t+1==_.ticks?.length&&(o(s+1),r(0)))}})()}}}),null}const d8="/assets/arrowleft.0767edce.png",f8="/assets/arrowright.fdb5316e.png";function p8(e){const t=e.cursorlist.sort((K,xe)=>K.startTime-xe.startTime);let r=t[e.i]?t[e.i].startTime:0,[n,i]=V.exports.useState(t[e.i]!=null?t[e.i].x:.5),[s,o]=V.exports.useState(t[e.i-1]!=null?t[e.i-1].x:.5),a=t[e.i-1]!=null?t[e.i-1].type:"normal",h=t[e.i+1]!=null?t[e.i+1].x:.5;t[e.i].x;let d=t[e.i+1]?t[e.i+1].startTime:e.game.duration,p=V.exports.useRef(Math.round(At(r,d,e.game.beatmap.timingPoints)));const[c,f]=V.exports.useState(-p);let m=0,v=e.curve1,_=e.curve2,T=e.curve3,x=Xt(s,[0,1],[ye/2-Nt/2,ye/2+Nt/2]),y=Xt(t[e.i].x,[0,1],[ye/2-Nt/2,ye/2+Nt/2]);he.exports.useApp(),V.exports.useEffect(()=>{e.game.mode=="edit"&&(v=e.curve1,_=e.curve2,T=e.curve3,Xt(t[e.i].x,[0,1],[ye/2-Nt/2,ye/2+Nt/2]),r=t[e.i]?t[e.i].startTime:0,i(t[e.i]!=null?t[e.i].x:.5),o(t[e.i-1]!=null?t[e.i-1].x:.5),console.log(n,s),a=t[e.i-1]!=null?t[e.i-1].type:"normal",h=t[e.i+1]!=null?t[e.i+1].x:.5,d=t[e.i+1]?t[e.i+1].startTime:e.game.duration,p.current=Math.round(At(r,d,e.game.beatmap.timingPoints)));for(let K=1;K<e.i+1;K++)if(e.beatmap.cursor[e.i-K]!=null){s=t[e.i-K].x;break}},[t]);const w=s>n?ef[0]:ef[1],[E,P]=V.exports.useState(!0),[I,R]=V.exports.useState(!1),[N,D]=V.exports.useState(-1),[k,M]=V.exports.useState(0),[z,F]=V.exports.useState(!1);V.exports.useState(!1);const[U,Y]=V.exports.useState(0),[J,Q]=V.exports.useState(0),[O,L]=V.exports.useState(0),G=V.exports.useRef(0),H=e.i==-1?0:t[e.i].screenStartTime,j=e.i==-1?d:t[e.i].screenEndTime,Z=e.i==-1?[[r,0],[d,-At(100,d,e.game.beatmap.timingPoints)]]:t[e.i].scrollPosList;return Xt(e.x,[0,1],[ye/2-Nt/2,ye/2+Nt/2]),he.exports.useTick(()=>{m=e.game.currenttime;let K=!0;if(e.game.mode=="edit"?(F(m>=H&&m<=j+1e3),P(m<=j+1e3)):(F(m>=H&&m<=j),P(K)),z&&E){e.game.hitlist.length>0&&e.game.hitlist.forEach(Re=>{Re.startsWith(r.toString()+",5")&&!Re.endsWith("miss")&&N==-1&&(R(!0),D(m))}),I&&(M(Xt(m,[N,N+500],[1,0])),Y(To(m,[N,N+1e3],[2,2.5])),Q(Xt(m,[N+100,N+1e3],[.3,0],!0)));let xe=Z[O],fe=Z[O+1]!=null?Z[O+1]:xe;fe!=null&&(m>fe[0]&&Z[O+2]!=null&&(L(O+1),xe=Z[O],fe=Z[O+1]!=null?Z[O+1]:xe),f(ge-De-Xt(m,[xe[0],fe[0]],[xe[1],fe[1]]))),m<xe[0]&&e.game.mode=="edit"&&Z[O-1]!=null&&(L(O-1),xe=Z[O],fe=Z[O+1]!=null?Z[O+1]:xe),G.current=Xt(m,[d,d+e.game.NOTE_TRAVEL_FROM_LINE_TO_BOTTOM_DURATION()],[1,0])}}),A(Me,{children:z&&W(Me,{children:[e.beatmap.cursor[e.i].type=="ein"||t[e.i].type=="eout"||t[e.i].type=="linear"?W(he.exports.Container,{children:[A(he.exports.Sprite,{texture:v,x:h>e.x?y-$e*1.1/2:y+$e*1.1/2,y:c,scale:[h>e.x?-1:1,1],anchor:[(h>e.x,1),1]}),A(he.exports.Sprite,{texture:_,x:h>e.x?y-25:y+25,y:c,scale:[h>e.x?-1:1,1],anchor:[(h>e.x,1),1]}),A(he.exports.Sprite,{texture:T,x:(h>e.x,y-$e*1.1/2),y:c,scale:[h>e.x?-1:1,1],anchor:[(h>e.x,1),1]}),A(he.exports.Sprite,{texture:T,x:(h>e.x,y+$e*1.1/2),y:c,scale:[h>e.x?-1:1,1],anchor:[(h>e.x,1),1]})]}):null,e.beatmap.cursor[e.i].type=="normal"&&W(Me,{children:[A(he.exports.Sprite,{texture:ae.WHITE,x:y,width:$e*1.1+2,height:p.current+2,y:c+1,alpha:1,anchor:[.5,1]}),A(he.exports.Sprite,{texture:ae.WHITE,tint:3151144,x:y,width:$e*1.1,height:p.current,y:c,alpha:1,anchor:[.5,1]}),A(he.exports.Sprite,{texture:ae.WHITE,x:y,width:1,height:p.current,alpha:.5,y:c,anchor:s>n?[.5,1]:[.5,1]})]}),a=="normal"&&W(Me,{children:[s!=n?A(he.exports.Sprite,{image:s>n?d8:f8,x,width:$e*.5,height:100,alpha:1,y:c,anchor:[.5,.5]}):null,A(he.exports.Sprite,{texture:ae.WHITE,x:y,width:Math.abs(s-n)*Nt,tint:w,height:20,alpha:.7,y:c,anchor:s>n?[0,1]:[1,1]}),A(he.exports.Sprite,{texture:ae.WHITE,x:y,width:Math.abs(s-n)*Nt,height:2,alpha:1,y:c,anchor:s>n?[0,1]:[1,1]}),A(he.exports.Sprite,{texture:ae.WHITE,x:y,width:Math.abs(s-n)*Nt,height:2,alpha:1,y:c-20,anchor:s>n?[0,1]:[1,1]})]}),A(he.exports.Sprite,{image:G1,x:y,y:ge-De,blendMode:me.ADD,tint:16735978,anchor:[.5,1],width:$e*1.1,height:Pe*(k*2),alpha:k*.2}),A(he.exports.Sprite,{image:$1,x:y,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:16735978,width:$e*1.1,height:Hi*1.5,alpha:k}),A(he.exports.Sprite,{image:j1,x:y,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:16735978,width:Pe*U,height:Pe*U,alpha:J}),A(he.exports.Sprite,{image:Bf,x:y,y:ge-De,anchor:[.5,.5],blendMode:me.ADD,tint:16735978,width:$e*1.1,alpha:k})]})})}function oC(e){const[t,r]=V.exports.useState(0);return he.exports.useTick(()=>{r(Xt(e.game.audio.seek(),[0,e.game.audio.duration()],[0,ye]))}),A(he.exports.Sprite,{texture:ae.WHITE,height:1,width:t,x:0,tint:"white",alpha:1,anchor:[0,0],y:0})}function m8(e){return V.exports.useState(!1),e.game.audio.on("end",function(){oL(e.user,e.game.beatmap,e.game.score/e.game.maxscore,e.game.hitlist.filter(t=>t.endsWith("perfect")).length,e.game.hitlist.filter(t=>t.endsWith("great")).length,e.game.hitlist.filter(t=>t.endsWith("miss")).length,e.game.hitlist.filter(t=>t.endsWith("misslost")).length,e.game.combo)}),he.exports.useTick(()=>{var t=e.game.audio.seek()*1e3;e.game.currenttime=t,e.game.isPlaying&&(e.game.beatmap.hitObjects.sort((i,s)=>{const o=i.endTime!=null?i.endTime:i.startTime,a=s.endTime!=null?s.endTime:s.startTime;return o-a}).reverse(),e.game.beatmap.cursor.reverse())}),W(he.exports.Container,{children:[A(oC,{game:e.game}),e.beatmap.cursor.map((t,r)=>{const n=r==e.beatmap.cursor.length-1?e.beatmap.cursor[r].x:e.beatmap.cursor[r+1].x;let i=e.beatmap.cursor[r+1]?e.beatmap.cursor[r+1].startTime:e.game.duration;const s=t.x>n?ef[0]:ef[1],o=V.exports.useRef(Math.round(At(t.startTime,i,e.game.beatmap.timingPoints))),a=new Xn;a.lineStyle(0,"white",1),a.beginFill(3151144);const h=0;let d=0;const p=Math.abs(t.x-n)*Nt,c=0,f=t.type=="ein"?"eout":t.type=="eout"?"ein":t.type;let m=0;const v=o.current,_=8;for(let I=0;I<_;I++)a.lineTo(go(d+(p-h)/_,[h,p],[h,p],f),m+(v-c)/_),d+=(p-h)/_,m+=(v-c)/_;d+=(p-h)/_,m+=(v-c)/_,a.lineTo(p,v);for(let I=0;I<_;I++)a.lineTo(go(d-(p-h)/_,[h,p],[h,p],f)+$e*1.1,m-(v-c)/_),d-=(p-h)/_,m-=(v-c)/_;a.lineTo(h+$e*1.1,c);const T=new Xn,x=50;T.lineStyle(1,s,1),T.beginFill(s,.5),d=0,m=0;for(let I=0;I<_;I++)T.lineTo(go(d+(p-h)/_,[h,p],[h,p],f),m+(v-c)/_),d+=(p-h)/_,m+=(v-c)/_;d+=(p-h)/_,m+=(v-c)/_,T.lineTo(p,v);for(let I=0;I<_;I++)T.lineTo(go(d-(p-h)/_,[h,p],[h,p],f)+x,m-(v-c)/_),d-=(p-h)/_,m-=(v-c)/_;T.lineTo(h+x,c);const y=new Xn;y.lineStyle(2,"white",1),d=0,m=0;for(let I=0;I<_;I++)y.lineTo(go(d+(p-h)/_,[h,p],[h,p],f),m+(v-c)/_),d+=(p-h)/_,m+=(v-c)/_;d+=(p-h)/_,m+=(v-c)/_,y.lineTo(p,v);const w=he.exports.useApp().renderer.generateTexture(a),E=he.exports.useApp().renderer.generateTexture(T),P=he.exports.useApp().renderer.generateTexture(y);return A(p8,{x:t.x,beatmap:e.beatmap,cursorlist:e.beatmap.cursor,i:r,curve1:w,curve2:E,curve3:P,type:t.type,game:e.game},r)}),[...Array(4)].map((t,r)=>A(c8,{i:r+1,hitObjects:e.beatmap.hitObjects.filter(n=>n.column==r+1),timingPoints:e.beatmap.timingPoints,game:e.game},r)),A(h8,{game:e.game,cursors:e.beatmap.cursor})]})}function g8(e){const[t,r]=V.exports.useState(0),n=5e3;let i=!1;return t>n&&!i&&(e.game.setVolume(10/100),e.game.isPlaying=!0,e.game.play("play"),i=!i),he.exports.useTick(()=>{t<=n&&r(Date.now()-e.time)}),null}var v8=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,x8=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`,y8=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`;class tf extends Ge{constructor(t=4,r=3,n=!1){super(v8,n?y8:x8),this._kernels=[],this._blur=4,this._quality=3,this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new Fe,this.pixelSize=1,this._clamp=n,Array.isArray(t)?this.kernels=t:(this._blur=t,this.quality=r)}apply(t,r,n,i){const s=this._pixelSize.x/r._frame.width,o=this._pixelSize.y/r._frame.height;let a;if(this._quality===1||this._blur===0)a=this._kernels[0]+.5,this.uniforms.uOffset[0]=a*s,this.uniforms.uOffset[1]=a*o,t.applyFilter(this,r,n,i);else{const h=t.getFilterTexture();let d=r,p=h,c;const f=this._quality-1;for(let m=0;m<f;m++)a=this._kernels[m]+.5,this.uniforms.uOffset[0]=a*s,this.uniforms.uOffset[1]=a*o,t.applyFilter(this,d,p,1),c=d,d=p,p=c;a=this._kernels[f]+.5,this.uniforms.uOffset[0]=a*s,this.uniforms.uOffset[1]=a*o,t.applyFilter(this,d,n,i),t.returnFilterTexture(h)}}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((t,r)=>t+r+.5,0))}_generateKernels(){const t=this._blur,r=this._quality,n=[t];if(t>0){let i=t;const s=t/r;for(let o=1;o<r;o++)i-=s,n.push(i)}this._kernels=n,this._updatePadding()}get kernels(){return this._kernels}set kernels(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max(...t)):(this._kernels=[0],this._quality=1)}get clamp(){return this._clamp}set pixelSize(t){typeof t=="number"?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof Fe?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)}get pixelSize(){return this._pixelSize}get quality(){return this._quality}set quality(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}get blur(){return this._blur}set blur(t){this._blur=t,this._generateKernels()}}var aC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_8=`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`;class b8 extends Ge{constructor(t=.5){super(aC,_8),this.threshold=t}get threshold(){return this.uniforms.threshold}set threshold(t){this.uniforms.threshold=t}}var w8=`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`;const lC=class extends Ge{constructor(e){super(aC,w8),this.bloomScale=1,this.brightness=1,this._resolution=de.FILTER_RESOLUTION,typeof e=="number"&&(e={threshold:e});const t=Object.assign(lC.defaults,e);this.bloomScale=t.bloomScale,this.brightness=t.brightness;const{kernels:r,blur:n,quality:i,pixelSize:s,resolution:o}=t;this._extractFilter=new b8(t.threshold),this._extractFilter.resolution=o,this._blurFilter=r?new tf(r):new tf(n,i),this.pixelSize=s,this.resolution=o}apply(e,t,r,n,i){const s=e.getFilterTexture();this._extractFilter.apply(e,t,s,1,i);const o=e.getFilterTexture();this._blurFilter.apply(e,s,o,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=o,e.applyFilter(this,t,r,n),e.returnFilterTexture(o),e.returnFilterTexture(s)}get resolution(){return this._resolution}set resolution(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)}get threshold(){return this._extractFilter.threshold}set threshold(e){this._extractFilter.threshold=e}get kernels(){return this._blurFilter.kernels}set kernels(e){this._blurFilter.kernels=e}get blur(){return this._blurFilter.blur}set blur(e){this._blurFilter.blur=e}get quality(){return this._blurFilter.quality}set quality(e){this._blurFilter.quality=e}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(e){this._blurFilter.pixelSize=e}};let S8=lC;S8.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:de.FILTER_RESOLUTION};class T8 extends Ge{constructor(t=2,r=4,n=de.FILTER_RESOLUTION,i=5){super();let s,o;typeof t=="number"?(s=t,o=t):t instanceof Fe?(s=t.x,o=t.y):Array.isArray(t)&&(s=t[0],o=t[1]),this.blurXFilter=new zu(!0,s,r,n,i),this.blurYFilter=new zu(!1,o,r,n,i),this.blurYFilter.blendMode=me.SCREEN,this.defaultFilter=new XE}apply(t,r,n,i){const s=t.getFilterTexture();this.defaultFilter.apply(t,r,n,i),this.blurXFilter.apply(t,r,s,1),this.blurYFilter.apply(t,s,n,0),t.returnFilterTexture(s)}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t}}var E8=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,C8=`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`;const uC=class extends Ge{constructor(e){super(E8,C8),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,uC.defaults,e)}apply(e,t,r,n){const{width:i,height:s}=t.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,e.applyFilter(this,t,r,n)}get radius(){return this.uniforms.radius}set radius(e){this.uniforms.radius=e}get strength(){return this.uniforms.strength}set strength(e){this.uniforms.strength=e}get center(){return this.uniforms.center}set center(e){this.uniforms.center=e}};let A8=uC;A8.defaults={center:[.5,.5],radius:100,strength:1};var k8=`const float PI = 3.1415926538;
const float PI_2 = PI*2.;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;
uniform sampler2D uSampler;

const int TYPE_LINEAR = 0;
const int TYPE_RADIAL = 1;
const int TYPE_CONIC = 2;
const int MAX_STOPS = 32;

uniform int uNumStops;
uniform float uAlphas[3*MAX_STOPS];
uniform vec3 uColors[MAX_STOPS];
uniform float uOffsets[MAX_STOPS];
uniform int uType;
uniform float uAngle;
uniform float uAlpha;
uniform int uMaxColors;

struct ColorStop {
    float offset;
    vec3 color;
    float alpha;
};

mat2 rotate2d(float angle){
    return mat2(cos(angle), -sin(angle),
    sin(angle), cos(angle));
}

float projectLinearPosition(vec2 pos, float angle){
    vec2 center = vec2(0.5);
    vec2 result = pos - center;
    result = rotate2d(angle) * result;
    result = result + center;
    return clamp(result.x, 0., 1.);
}

float projectRadialPosition(vec2 pos) {
    float r = distance(vFilterCoord, vec2(0.5));
    return clamp(2.*r, 0., 1.);
}

float projectAnglePosition(vec2 pos, float angle) {
    vec2 center = pos - vec2(0.5);
    float polarAngle=atan(-center.y, center.x);
    return mod(polarAngle + angle, PI_2) / PI_2;
}

float projectPosition(vec2 pos, int type, float angle) {
    if (type == TYPE_LINEAR) {
        return projectLinearPosition(pos, angle);
    } else if (type == TYPE_RADIAL) {
        return projectRadialPosition(pos);
    } else if (type == TYPE_CONIC) {
        return projectAnglePosition(pos, angle);
    }

    return pos.y;
}

void main(void) {
    // current/original color
    vec4 currentColor = texture2D(uSampler, vTextureCoord);

    // skip calculations if gradient alpha is 0
    if (0.0 == uAlpha) {
        gl_FragColor = currentColor;
        return;
    }

    // project position
    float y = projectPosition(vFilterCoord, uType, radians(uAngle));

    // check gradient bounds
    float offsetMin = uOffsets[0];
    float offsetMax = 0.0;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (i == uNumStops-1){ // last index
            offsetMax = uOffsets[i];
        }
    }

    if (y  < offsetMin || y > offsetMax) {
        gl_FragColor = currentColor;
        return;
    }

    // limit colors
    if (uMaxColors > 0) {
        float stepSize = 1./float(uMaxColors);
        float stepNumber = float(floor(y/stepSize));
        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment
    }

    // find color stops
    ColorStop from;
    ColorStop to;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (y >= uOffsets[i]) {
            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);
            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);
        }

        if (i == uNumStops-1){ // last index
            break;
        }
    }

    // mix colors from stops
    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);
    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);

    float segmentHeight = to.offset - from.offset;
    float relativePos = y - from.offset;// position from 0 to [segmentHeight]
    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].

    float gradientAlpha = uAlpha * currentColor.a;
    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;

    // mix resulting color with current color
    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);
}
`,P8=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform vec4 inputSize;
uniform vec4 outputFrame;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;
}
`,Fo=Fo||{};Fo.stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var r=e.visit(t.orientation);return r&&(r+=", "),t.type+"("+r+e.visit(t.colorStops)+")"},visit_shape:function(t){var r=t.value,n=e.visit(t.at),i=e.visit(t.style);return i&&(r+=" "+i),n&&(r+=" at "+n),r},"visit_default-radial":function(t){var r="",n=e.visit(t.at);return n&&(r+=n),r},"visit_extent-keyword":function(t){var r=t.value,n=e.visit(t.at);return n&&(r+=" at "+n),r},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,r){var n=t,i=e.visit(r.length);return i&&(n+=" "+i),n},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var r="",n=t.length;return t.forEach(function(i,s){r+=e.visit(i),s<n-1&&(r+=", ")}),r},visit:function(t){if(!t)return"";var r="";if(t instanceof Array)return e.visit_array(t,r);if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return e.visit(t)}}();var Fo=Fo||{};Fo.parse=function(){var e={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function r(Q){var O=new Error(t+": "+Q);throw O.source=t,O}function n(){var Q=i();return t.length>0&&r("Invalid input not EOF"),Q}function i(){return w(s)}function s(){return o("linear-gradient",e.linearGradient,h)||o("repeating-linear-gradient",e.repeatingLinearGradient,h)||o("radial-gradient",e.radialGradient,c)||o("repeating-radial-gradient",e.repeatingRadialGradient,c)}function o(Q,O,L){return a(O,function(G){var H=L();return H&&(Y(e.comma)||r("Missing comma before color stops")),{type:Q,orientation:H,colorStops:w(E)}})}function a(Q,O){var L=Y(Q);if(L){Y(e.startCall)||r("Missing (");var G=O(L);return Y(e.endCall)||r("Missing )"),G}}function h(){return d()||p()}function d(){return U("directional",e.sideOrCorner,1)}function p(){return U("angular",e.angleValue,1)}function c(){var Q,O=f(),L;return O&&(Q=[],Q.push(O),L=t,Y(e.comma)&&(O=f(),O?Q.push(O):t=L)),Q}function f(){var Q=m()||v();if(Q)Q.at=T();else{var O=_();if(O){Q=O;var L=T();L&&(Q.at=L)}else{var G=x();G&&(Q={type:"default-radial",at:G})}}return Q}function m(){var Q=U("shape",/^(circle)/i,0);return Q&&(Q.style=F()||_()),Q}function v(){var Q=U("shape",/^(ellipse)/i,0);return Q&&(Q.style=M()||_()),Q}function _(){return U("extent-keyword",e.extentKeywords,1)}function T(){if(U("position",/^at/,0)){var Q=x();return Q||r("Missing positioning value"),Q}}function x(){var Q=y();if(Q.x||Q.y)return{type:"position",value:Q}}function y(){return{x:M(),y:M()}}function w(Q){var O=Q(),L=[];if(O)for(L.push(O);Y(e.comma);)O=Q(),O?L.push(O):r("One extra comma");return L}function E(){var Q=P();return Q||r("Expected color definition"),Q.length=M(),Q}function P(){return R()||D()||N()||I()}function I(){return U("literal",e.literalColor,0)}function R(){return U("hex",e.hexColor,1)}function N(){return a(e.rgbColor,function(){return{type:"rgb",value:w(k)}})}function D(){return a(e.rgbaColor,function(){return{type:"rgba",value:w(k)}})}function k(){return Y(e.number)[1]}function M(){return U("%",e.percentageValue,1)||z()||F()}function z(){return U("position-keyword",e.positionKeywords,1)}function F(){return U("px",e.pixelValue,1)||U("em",e.emValue,1)}function U(Q,O,L){var G=Y(O);if(G)return{type:Q,value:G[L]}}function Y(Q){var O,L;return L=/^[\n\r\t\s]+/.exec(t),L&&J(L[0].length),O=Q.exec(t),O&&J(O[0].length),O}function J(Q){t=t.substr(Q)}return function(Q){return t=Q.toString(),n()}}();var I8=Fo.parse;Fo.stringify;var f2={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},p2={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function R8(e){var t,r=[],n=1,i;if(typeof e=="string")if(f2[e])r=f2[e].slice(),i="rgb";else if(e==="transparent")n=0,i="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var s=e.slice(1),o=s.length,a=o<=4;n=1,a?(r=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(n=parseInt(s[3]+s[3],16)/255)):(r=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(n=parseInt(s[6]+s[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),i="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var h=t[1],d=h==="rgb",s=h.replace(/a$/,"");i=s;var o=s==="cmyk"?4:s==="gray"?1:3;r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(f,m){if(/%$/.test(f))return m===o?parseFloat(f)/100:s==="rgb"?parseFloat(f)*255/100:parseFloat(f);if(s[m]==="h"){if(/deg$/.test(f))return parseFloat(f);if(p2[f]!==void 0)return p2[f]}return parseFloat(f)}),h===s&&r.push(1),n=d||r[o]===void 0?1:r[o],r=r.slice(0,o)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),i=e.match(/([a-z])/ig).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],i="rgb",n=e.length===4?e[3]:1):e instanceof Object&&(e.r!=null||e.red!=null||e.R!=null?(i="rgb",r=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(i="hsl",r=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),n=e.a||e.alpha||e.opacity||1,e.opacity!=null&&(n/=100)):(i="rgb",r=[e>>>16,(e&65280)>>>8,e&255]);return{space:i,values:r,alpha:n}}var Nv={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},pm={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,i,s,o,a,h;if(r===0)return h=n*255,[h,h,h];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,a=[0,0,0];for(var d=0;d<3;d++)o=t+1/3*-(d-1),o<0?o++:o>1&&o--,6*o<1?h=i+(s-i)*6*o:2*o<1?h=s:3*o<2?h=i+(s-i)*(2/3-o)*6:h=i,a[d]=h*255;return a}};Nv.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=s-i,a,h,d;return s===i?a=0:t===s?a=(r-n)/o:r===s?a=2+(n-t)/o:n===s&&(a=4+(t-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),d=(i+s)/2,s===i?h=0:d<=.5?h=o/(s+i):h=o/(2-s-i),[a,h*100,d*100]};function M8(e){Array.isArray(e)&&e.raw&&(e=String.raw(...arguments));var t,r=R8(e);if(!r.space)return[];const n=r.space[0]==="h"?pm.min:Nv.min,i=r.space[0]==="h"?pm.max:Nv.max;return t=Array(3),t[0]=Math.min(Math.max(r.values[0],n[0]),i[0]),t[1]=Math.min(Math.max(r.values[1],n[1]),i[1]),t[2]=Math.min(Math.max(r.values[2],n[2]),i[2]),r.space[0]==="h"&&(t=pm.rgb(t)),t.push(Math.min(Math.max(r.alpha,0),1)),t}function cC(e){switch(typeof e){case"string":return N8(e);case"number":return bf(e);default:return e}}function N8(e){const t=M8(e);if(!t)throw new Error(`Unable to parse color "${e}" as RGBA.`);return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function D8(e){const t=I8($8(e));if(t.length===0)throw new Error("Invalid CSS gradient.");if(t.length!==1)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");const r=t[0],n=L8(r.type),i=B8(r.colorStops),s=H8(r.orientation);return{type:n,stops:i,angle:s}}function L8(e){const t={"linear-gradient":0,"radial-gradient":1};if(!(e in t))throw new Error(`Unsupported gradient type "${e}"`);return t[e]}function B8(e){const t=U8(e),r=[];for(let n=0;n<e.length;n++){const i=F8(e[n]);r.push({offset:t[n],color:i.slice(0,3),alpha:i[3]})}return r}function F8(e){return cC(O8(e))}function O8(e){switch(e.type){case"hex":return`#${e.value}`;case"literal":return e.value;default:return`${e.type}(${e.value.join(",")})`}}function U8(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];let o=-1;s.type==="literal"&&s.length&&"type"in s.length&&s.length.type==="%"&&"value"in s.length&&(o=parseFloat(s.length.value)/100),t.push(o)}const r=i=>{for(let s=i;s<t.length;s++)if(t[s]!==-1)return{indexDelta:s-i,offset:t[s]};return{indexDelta:t.length-1-i,offset:1}};let n=0;for(let i=0;i<t.length;i++){const s=t[i];if(s!==-1)n=s;else if(i===0)t[i]=0;else if(i+1===t.length)t[i]=1;else{const o=r(i),a=(o.offset-n)/(1+o.indexDelta);for(let h=0;h<=o.indexDelta;h++)t[i+h]=n+(h+1)*a;i+=o.indexDelta,n=t[i]}}return t.map(z8)}function z8(e){return e.toString().length>6?parseFloat(e.toString().substring(0,6)):e}function H8(e){if(typeof e>"u")return 0;if("type"in e&&"value"in e)switch(e.type){case"angular":return parseFloat(e.value);case"directional":return G8(e.value)}return 0}function G8(e){const t={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(e in t))throw new Error(`Unsupported directional value "${e}"`);return t[e]}function $8(e){let t=e.replace(/\s{2,}/gu," ");return t=t.replace(/;/g,""),t=t.replace(/ ,/g,","),t=t.replace(/\( /g,"("),t=t.replace(/ \)/g,")"),t.trim()}var j8=Object.defineProperty,W8=Object.defineProperties,V8=Object.getOwnPropertyDescriptors,m2=Object.getOwnPropertySymbols,X8=Object.prototype.hasOwnProperty,Y8=Object.prototype.propertyIsEnumerable,g2=(e,t,r)=>t in e?j8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mm=(e,t)=>{for(var r in t||(t={}))X8.call(t,r)&&g2(e,r,t[r]);if(m2)for(var r of m2(t))Y8.call(t,r)&&g2(e,r,t[r]);return e},K8=(e,t)=>W8(e,V8(t));const v2=90;function q8(e){return[...e].sort((t,r)=>t.offset-r.offset)}const W1=class extends Ge{constructor(e){e&&"css"in e&&(e=K8(mm({},D8(e.css||"")),{alpha:e.alpha,maxColors:e.maxColors}));const t=mm(mm({},W1.defaults),e);if(!t.stops||t.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");super(P8,k8),this._stops=[],this.autoFit=!1,Object.assign(this,t)}get stops(){return this._stops}set stops(e){const t=q8(e),r=new Float32Array(t.length*3),n=0,i=1,s=2;for(let o=0;o<t.length;o++){const a=cC(t[o].color),h=o*3;r[h+n]=a[n],r[h+i]=a[i],r[h+s]=a[s]}this.uniforms.uColors=r,this.uniforms.uOffsets=t.map(o=>o.offset),this.uniforms.uAlphas=t.map(o=>o.alpha),this.uniforms.uNumStops=t.length,this._stops=t}set type(e){this.uniforms.uType=e}get type(){return this.uniforms.uType}set angle(e){this.uniforms.uAngle=e-v2}get angle(){return this.uniforms.uAngle+v2}set alpha(e){this.uniforms.uAlpha=e}get alpha(){return this.uniforms.uAlpha}set maxColors(e){this.uniforms.uMaxColors=e}get maxColors(){return this.uniforms.uMaxColors}};let Xh=W1;Xh.LINEAR=0,Xh.RADIAL=1,Xh.CONIC=2,Xh.defaults={type:W1.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0};var Q8=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,Z8=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`;const hC=class extends Ge{constructor(e){super(Q8,Z8),this.time=0,this.seed=0,this.uniforms.dimensions=new Float32Array(2),Object.assign(this,hC.defaults,e)}apply(e,t,r,n){const{width:i,height:s}=t.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)}set curvature(e){this.uniforms.curvature=e}get curvature(){return this.uniforms.curvature}set lineWidth(e){this.uniforms.lineWidth=e}get lineWidth(){return this.uniforms.lineWidth}set lineContrast(e){this.uniforms.lineContrast=e}get lineContrast(){return this.uniforms.lineContrast}set verticalLine(e){this.uniforms.verticalLine=e}get verticalLine(){return this.uniforms.verticalLine}set noise(e){this.uniforms.noise=e}get noise(){return this.uniforms.noise}set noiseSize(e){this.uniforms.noiseSize=e}get noiseSize(){return this.uniforms.noiseSize}set vignetting(e){this.uniforms.vignetting=e}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(e){this.uniforms.vignettingAlpha=e}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(e){this.uniforms.vignettingBlur=e}get vignettingBlur(){return this.uniforms.vignettingBlur}};let J8=hC;J8.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};var eN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,tN=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`,rN=Object.defineProperty,x2=Object.getOwnPropertySymbols,nN=Object.prototype.hasOwnProperty,iN=Object.prototype.propertyIsEnumerable,y2=(e,t,r)=>t in e?rN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_2=(e,t)=>{for(var r in t||(t={}))nN.call(t,r)&&y2(e,r,t[r]);if(x2)for(var r of x2(t))iN.call(t,r)&&y2(e,r,t[r]);return e};const Dv=class extends Ge{constructor(e){super(),this.angle=45,this._distance=5,this._resolution=de.FILTER_RESOLUTION;const t=e?_2(_2({},Dv.defaults),e):Dv.defaults,{kernels:r,blur:n,quality:i,pixelSize:s,resolution:o}=t;this._offset=new xi(this._updatePadding,this),this._tintFilter=new Ge(eN,tN),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=this._offset,this._tintFilter.resolution=o,this._blurFilter=r?new tf(r):new tf(n,i),this.pixelSize=s,this.resolution=o;const{shadowOnly:a,rotation:h,distance:d,offset:p,alpha:c,color:f}=t;this.shadowOnly=a,h!==void 0&&d!==void 0?(this.rotation=h,this.distance=d):this.offset=p,this.alpha=c,this.color=f}apply(e,t,r,n){const i=e.getFilterTexture();this._tintFilter.apply(e,t,i,1),this._blurFilter.apply(e,i,r,n),this.shadowOnly!==!0&&e.applyFilter(this,t,r,0),e.returnFilterTexture(i)}_updatePadding(){const e=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=e+this.blur*2}_updateShift(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}set offset(e){this._offset.copyFrom(e),this._updatePadding()}get offset(){return this._offset}get resolution(){return this._resolution}set resolution(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)}get distance(){return this._distance}set distance(e){ze("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=e,this._updatePadding(),this._updateShift()}get rotation(){return this.angle/Lu}set rotation(e){ze("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=e*Lu,this._updateShift()}get alpha(){return this._tintFilter.uniforms.alpha}set alpha(e){this._tintFilter.uniforms.alpha=e}get color(){return wf(this._tintFilter.uniforms.color)}set color(e){bf(e,this._tintFilter.uniforms.color)}get kernels(){return this._blurFilter.kernels}set kernels(e){this._blurFilter.kernels=e}get blur(){return this._blurFilter.blur}set blur(e){this._blurFilter.blur=e,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(e){this._blurFilter.quality=e}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(e){this._blurFilter.pixelSize=e}};let sN=Dv;sN.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:de.FILTER_RESOLUTION};var oN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,aN=`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`;const Lv=class extends Ge{constructor(e){super(oN,aN),this.offset=100,this.fillMode=Lv.TRANSPARENT,this.average=!1,this.seed=0,this.minSize=8,this.sampleSize=512,this._slices=0,this._offsets=new Float32Array(1),this._sizes=new Float32Array(1),this._direction=-1,this.uniforms.dimensions=new Float32Array(2),this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=ae.from(this._canvas,{scaleMode:vi.NEAREST}),Object.assign(this,Lv.defaults,e)}apply(e,t,r,n){const{width:i,height:s}=t.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/i,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,r,n)}_randomizeSizes(){const e=this._sizes,t=this._slices-1,r=this.sampleSize,n=Math.min(this.minSize/r,.9/this._slices);if(this.average){const i=this._slices;let s=1;for(let o=0;o<t;o++){const a=s/(i-o),h=Math.max(a*(1-Math.random()*.6),n);e[o]=h,s-=h}e[t]=s}else{let i=1;const s=Math.sqrt(1/this._slices);for(let o=0;o<t;o++){const a=Math.max(s*i*Math.random(),n);e[o]=a,i-=a}e[t]=i}this.shuffle()}shuffle(){const e=this._sizes,t=this._slices-1;for(let r=t;r>0;r--){const n=Math.random()*r>>0,i=e[r];e[r]=e[n],e[n]=i}}_randomizeOffsets(){for(let e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const e=this.sampleSize,t=this.texture,r=this._canvas.getContext("2d");r.clearRect(0,0,8,e);let n,i=0;for(let s=0;s<this._slices;s++){n=Math.floor(this._offsets[s]*256);const o=this._sizes[s]*e,a=n>0?n:0,h=n<0?-n:0;r.fillStyle=`rgba(${a}, ${h}, 0, 1)`,r.fillRect(0,i>>0,e,o+1>>0),i+=o}t.baseTexture.update(),this.uniforms.displacementMap=t}set sizes(e){const t=Math.min(this._slices,e.length);for(let r=0;r<t;r++)this._sizes[r]=e[r]}get sizes(){return this._sizes}set offsets(e){const t=Math.min(this._slices,e.length);for(let r=0;r<t;r++)this._offsets[r]=e[r]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())}get direction(){return this._direction}set direction(e){if(this._direction===e)return;this._direction=e;const t=e*Lu;this.uniforms.sinDir=Math.sin(t),this.uniforms.cosDir=Math.cos(t)}get red(){return this.uniforms.red}set red(e){this.uniforms.red=e}get green(){return this.uniforms.green}set green(e){this.uniforms.green=e}get blue(){return this.uniforms.blue}set blue(e){this.uniforms.blue=e}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};let oa=Lv;oa.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},oa.TRANSPARENT=0,oa.ORIGINAL=1,oa.LOOP=2,oa.CLAMP=3,oa.MIRROR=4;var lN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,uN=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;
uniform float alpha;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    if (knockout) {
      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;const dC=class extends Ge{constructor(e){const t=Object.assign({},dC.defaults,e),{outerStrength:r,innerStrength:n,color:i,knockout:s,quality:o,alpha:a}=t,h=Math.round(t.distance);super(lN,uN.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/o/h).toFixed(7)}`).replace(/__DIST__/gi,`${h.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:i,outerStrength:r,innerStrength:n,padding:h,knockout:s,alpha:a})}get color(){return wf(this.uniforms.glowColor)}set color(e){bf(e,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(e){this.uniforms.outerStrength=e}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(e){this.uniforms.innerStrength=e}get knockout(){return this.uniforms.knockout}set knockout(e){this.uniforms.knockout=e}get alpha(){return this.uniforms.alpha}set alpha(e){this.uniforms.alpha=e}};let cN=dC;cN.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};var hN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,dN=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,fN=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`;const fC=class extends Ge{constructor(e){super(hN,fN.replace("${perlin}",dN)),this.parallel=!0,this.time=0,this._angle=0,this.uniforms.dimensions=new Float32Array(2);const t=Object.assign(fC.defaults,e);this._angleLight=new Fe,this.angle=t.angle,this.gain=t.gain,this.lacunarity=t.lacunarity,this.alpha=t.alpha,this.parallel=t.parallel,this.center=t.center,this.time=t.time}apply(e,t,r,n){const{width:i,height:s}=t.filterFrame;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/i,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,r,n)}get angle(){return this._angle}set angle(e){this._angle=e;const t=e*Lu;this._angleLight.x=Math.cos(t),this._angleLight.y=Math.sin(t)}get gain(){return this.uniforms.gain}set gain(e){this.uniforms.gain=e}get lacunarity(){return this.uniforms.lacunarity}set lacunarity(e){this.uniforms.lacunarity=e}get alpha(){return this.uniforms.alpha}set alpha(e){this.uniforms.alpha=e}};let pN=fC;pN.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};var mN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,gN=`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float uHue;
uniform float uAlpha;
uniform bool uColorize;
uniform float uSaturation;
uniform float uLightness;

// https://en.wikipedia.org/wiki/Luma_(video)
const vec3 weight = vec3(0.299, 0.587, 0.114);

float getWeightedAverage(vec3 rgb) {
    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;
}

// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243
const vec3 k = vec3(0.57735, 0.57735, 0.57735);

vec3 hueShift(vec3 color, float angle) {
    float cosAngle = cos(angle);
    return vec3(
    color * cosAngle +
    cross(k, color) * sin(angle) +
    k * dot(k, color) * (1.0 - cosAngle)
    );
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    vec4 result = color;

    // colorize
    if (uColorize) {
        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);
    }

    // hue
    result.rgb = hueShift(result.rgb, uHue);

    // saturation
    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js
    float average = (result.r + result.g + result.b) / 3.0;

    if (uSaturation > 0.) {
        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));
    } else {
        result.rgb -= (average - result.rgb) * uSaturation;
    }

    // lightness
    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));

    // alpha
    gl_FragColor = mix(color, result, uAlpha);
}
`;const pC=class extends Ge{constructor(e){super(mN,gN),this._hue=0;const t=Object.assign({},pC.defaults,e);Object.assign(this,t)}get hue(){return this._hue}set hue(e){this._hue=e,this.uniforms.uHue=this._hue*(Math.PI/180)}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get colorize(){return this.uniforms.uColorize}set colorize(e){this.uniforms.uColorize=e}get lightness(){return this.uniforms.uLightness}set lightness(e){this.uniforms.uLightness=e}get saturation(){return this.uniforms.uSaturation}set saturation(e){this.uniforms.uSaturation=e}};let vN=pC;vN.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1};var xN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,yN=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`;const mC=class extends Ge{constructor(e,t=0){super(xN,yN),this.seed=0,this.uniforms.dimensions=new Float32Array(2),typeof e=="number"?(this.seed=e,e=void 0):this.seed=t,Object.assign(this,mC.defaults,e)}apply(e,t,r,n){var i,s;this.uniforms.dimensions[0]=(i=t.filterFrame)==null?void 0:i.width,this.uniforms.dimensions[1]=(s=t.filterFrame)==null?void 0:s.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,r,n)}set sepia(e){this.uniforms.sepia=e}get sepia(){return this.uniforms.sepia}set noise(e){this.uniforms.noise=e}get noise(){return this.uniforms.noise}set noiseSize(e){this.uniforms.noiseSize=e}get noiseSize(){return this.uniforms.noiseSize}set scratch(e){this.uniforms.scratch=e}get scratch(){return this.uniforms.scratch}set scratchDensity(e){this.uniforms.scratchDensity=e}get scratchDensity(){return this.uniforms.scratchDensity}set scratchWidth(e){this.uniforms.scratchWidth=e}get scratchWidth(){return this.uniforms.scratchWidth}set vignetting(e){this.uniforms.vignetting=e}get vignetting(){return this.uniforms.vignetting}set vignettingAlpha(e){this.uniforms.vignettingAlpha=e}get vignettingAlpha(){return this.uniforms.vignettingAlpha}set vignettingBlur(e){this.uniforms.vignettingBlur=e}get vignettingBlur(){return this.uniforms.vignettingBlur}};let _N=mC;_N.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};var bN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,wN=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterClamp;

uniform float uAlpha;
uniform vec2 uThickness;
uniform vec4 uColor;
uniform bool uKnockout;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${angleStep};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture2D(uSampler, vTextureCoord);
    vec4 contentColor = sourceColor * float(!uKnockout);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    gl_FragColor = contentColor + outlineColor;
}
`;const pd=class extends Ge{constructor(e=1,t=0,r=.1,n=1,i=!1){super(bN,wN.replace(/\$\{angleStep\}/,pd.getAngleStep(r))),this._thickness=1,this._alpha=1,this._knockout=!1,this.uniforms.uThickness=new Float32Array([0,0]),this.uniforms.uColor=new Float32Array([0,0,0,1]),this.uniforms.uAlpha=n,this.uniforms.uKnockout=i,Object.assign(this,{thickness:e,color:t,quality:r,alpha:n,knockout:i})}static getAngleStep(e){const t=Math.max(e*pd.MAX_SAMPLES,pd.MIN_SAMPLES);return(Math.PI*2/t).toFixed(7)}apply(e,t,r,n){this.uniforms.uThickness[0]=this._thickness/t._frame.width,this.uniforms.uThickness[1]=this._thickness/t._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,e.applyFilter(this,t,r,n)}get alpha(){return this._alpha}set alpha(e){this._alpha=e}get color(){return wf(this.uniforms.uColor)}set color(e){bf(e,this.uniforms.uColor)}get knockout(){return this._knockout}set knockout(e){this._knockout=e}get thickness(){return this._thickness}set thickness(e){this._thickness=e,this.padding=e}};let b2=pd;b2.MIN_SAMPLES=1,b2.MAX_SAMPLES=100;var SN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,TN=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`;const gC=class extends Ge{constructor(e){super(SN,TN),this.time=0,this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,gC.defaults,e)}apply(e,t,r,n){var i,s;this.uniforms.dimensions[0]=(i=t.filterFrame)==null?void 0:i.width,this.uniforms.dimensions[1]=(s=t.filterFrame)==null?void 0:s.height,this.uniforms.time=this.time,e.applyFilter(this,t,r,n)}set mirror(e){this.uniforms.mirror=e}get mirror(){return this.uniforms.mirror}set boundary(e){this.uniforms.boundary=e}get boundary(){return this.uniforms.boundary}set amplitude(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]}get amplitude(){return this.uniforms.amplitude}set waveLength(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]}get waveLength(){return this.uniforms.waveLength}set alpha(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]}get alpha(){return this.uniforms.alpha}};let EN=gC;EN.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};var CN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,AN=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`;const vC=class extends Ge{constructor(e=[0,0],t,r=0){super(CN,AN),this.center=e,Object.assign(this,vC.defaults,t),this.time=r}apply(e,t,r,n){this.uniforms.time=this.time,e.applyFilter(this,t,r,n)}get center(){return this.uniforms.center}set center(e){this.uniforms.center=e}get amplitude(){return this.uniforms.amplitude}set amplitude(e){this.uniforms.amplitude=e}get wavelength(){return this.uniforms.wavelength}set wavelength(e){this.uniforms.wavelength=e}get brightness(){return this.uniforms.brightness}set brightness(e){this.uniforms.brightness=e}get speed(){return this.uniforms.speed}set speed(e){this.uniforms.speed=e}get radius(){return this.uniforms.radius}set radius(e){this.uniforms.radius=e}};let kN=vC;kN.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};var PN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,IN=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`;class xC extends Ge{constructor(t){var r,n;super(PN,IN),this.uniforms.blur=t.blur,this.uniforms.gradientBlur=t.gradientBlur,this.uniforms.start=(r=t.start)!=null?r:new Fe(0,window.innerHeight/2),this.uniforms.end=(n=t.end)!=null?n:new Fe(600,window.innerHeight/2),this.uniforms.delta=new Fe(30,30),this.uniforms.texSize=new Fe(window.innerWidth,window.innerHeight),this.updateDelta()}updateDelta(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}get blur(){return this.uniforms.blur}set blur(t){this.uniforms.blur=t}get gradientBlur(){return this.uniforms.gradientBlur}set gradientBlur(t){this.uniforms.gradientBlur=t}get start(){return this.uniforms.start}set start(t){this.uniforms.start=t,this.updateDelta()}get end(){return this.uniforms.end}set end(t){this.uniforms.end=t,this.updateDelta()}}class RN extends xC{updateDelta(){const t=this.uniforms.end.x-this.uniforms.start.x,r=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(t*t+r*r);this.uniforms.delta.x=t/n,this.uniforms.delta.y=r/n}}class MN extends xC{updateDelta(){const t=this.uniforms.end.x-this.uniforms.start.x,r=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(t*t+r*r);this.uniforms.delta.x=-r/n,this.uniforms.delta.y=t/n}}const yC=class extends Ge{constructor(e,t,r,n){super(),typeof e=="number"&&(ze("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),e={blur:e,gradientBlur:t,start:r,end:n}),e=Object.assign({},yC.defaults,e),this.tiltShiftXFilter=new RN(e),this.tiltShiftYFilter=new MN(e)}apply(e,t,r,n){const i=e.getFilterTexture();this.tiltShiftXFilter.apply(e,t,i,1),this.tiltShiftYFilter.apply(e,i,r,n),e.returnFilterTexture(i)}get blur(){return this.tiltShiftXFilter.blur}set blur(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e}get gradientBlur(){return this.tiltShiftXFilter.gradientBlur}set gradientBlur(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e}get start(){return this.tiltShiftXFilter.start}set start(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e}get end(){return this.tiltShiftXFilter.end}set end(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e}};let NN=yC;NN.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};var DN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,LN=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`;const _C=class extends Ge{constructor(e){super(DN,LN),Object.assign(this,_C.defaults,e)}get offset(){return this.uniforms.offset}set offset(e){this.uniforms.offset=e}get radius(){return this.uniforms.radius}set radius(e){this.uniforms.radius=e}get angle(){return this.uniforms.angle}set angle(e){this.uniforms.angle=e}};let BN=_C;BN.defaults={radius:200,angle:4,padding:20,offset:new Fe};var FN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,ON=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,w2=Object.getOwnPropertySymbols,UN=Object.prototype.hasOwnProperty,zN=Object.prototype.propertyIsEnumerable,HN=(e,t)=>{var r={};for(var n in e)UN.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&w2)for(var n of w2(e))t.indexOf(n)<0&&zN.call(e,n)&&(r[n]=e[n]);return r};const bC=class extends Ge{constructor(e){const t=Object.assign(bC.defaults,e),{maxKernelSize:r}=t,n=HN(t,["maxKernelSize"]);super(FN,ON.replace("${maxKernelSize}",r.toFixed(1))),Object.assign(this,n)}get center(){return this.uniforms.uCenter}set center(e){this.uniforms.uCenter=e}get strength(){return this.uniforms.uStrength}set strength(e){this.uniforms.uStrength=e}get innerRadius(){return this.uniforms.uInnerRadius}set innerRadius(e){this.uniforms.uInnerRadius=e}get radius(){return this.uniforms.uRadius}set radius(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e}};let GN=bC;GN.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};function $N(e){const t=he.exports.useApp().stage;if(e.game.anomaly=="together"){document.cookie="BACKGROUND_DIM=0.9",t.filters=[];const r=1e3,n=setInterval(()=>{e.game.currenttime>=r&&(document.cookie=`BACKGROUND_DIM=${Xt(e.game.currenttime,[r,r+2e3],[.9,.5])}`,t.filters=[new T8(Xt(e.game.currenttime,[r,r+2e3],[0,.111]))]),e.game.currenttime>=r+2e3&&clearInterval(n)},50)}return W(Me,{children:[A(he.exports.Sprite,{image:"BG/overlay.png",blendMode:me.ADD,anchor:[.5,0],alpha:1,tint:16721594,width:ye*.2,height:ge*.08,x:0,y:10}),A(he.exports.Sprite,{image:"BG/overlay.png",blendMode:me.ADD,anchor:[.5,1],tint:e.game.beatmap.metadata.difficulttype=="LITE"?4697343:e.game.beatmap.metadata.difficulttype=="NEON"?13322239:e.game.beatmap.metadata.difficulttype=="ENIGMA"?16730050:6553600,alpha:1,width:2*`${e.game.beatmap.metadata.difficulttype}${e.game.beatmap.metadata.difficult}`.length*(ye*.02),height:De,x:ye-30,y:ge}),A(he.exports.Sprite,{image:"BG/overlay.png",blendMode:me.ADD,anchor:[.5,1],tint:"white",alpha:1,width:2*`${e.game.beatmap.metadata.difficulttype}${e.game.beatmap.metadata.difficult}`.length*(ye*.02),height:De,x:ye,y:ge}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,.5],tint:16721594,alpha:1,width:4*(ye*.012)+ye*.02,height:De,blendMode:me.ADD,x:ye/2,y:ge*.05}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,.5],tint:"white",blendMode:me.ADD,alpha:1,width:4*(ye*.012)+ye*.02,height:De,x:ye/2,y:ge*.05}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,0],blendMode:me.ADD,alpha:1,tint:"white",width:ye*.2,height:ge*.08,x:0,y:10}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,0],alpha:1,blendMode:me.ADD,width:ye*.5,tint:16721594,height:ge*.09,x:ye,y:10}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,0],alpha:1,width:ye*.5,blendMode:me.ADD,tint:"white",height:ge*.09,x:ye,y:10}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,0],alpha:0,width:ye*.3,tint:16721594,blendMode:me.ADD,height:ge*.04,x:ye,y:80}),A(he.exports.Sprite,{image:"BG/overlay.png",anchor:[.5,0],alpha:0,blendMode:me.ADD,width:ye*.3,tint:"white",height:ge*.04,x:ye,y:80}),A(he.exports.Text,{text:"SCORE :",x:ye-7,y:ge*.01,anchor:[1,0],style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${ye*.008}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${e.game.beatmap.metadata.title}`,x:10,y:15,anchor:[0,0],style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${ye*.012}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${e.game.beatmap.metadata.artist}`,x:10,y:15+ye*.016,anchor:[0,0],style:new Yt({fill:16721594,fontFamily:"Montserrat",fontWeight:"600",fontSize:`${ye*.01}px`,align:"left"}),alpha:1}),A(he.exports.Text,{text:`${e.game.beatmap.metadata.difficulttype} ${e.game.beatmap.metadata.difficult}`,x:ye-10,anchor:[1,.5],y:ge-De/2,style:new Yt({fill:e.game.beatmap.metadata.difficulttype=="LITE"?4697343:e.game.beatmap.metadata.difficulttype=="NEON"?13322239:e.game.beatmap.metadata.difficulttype=="ENIGMA"?16730050:6553600,fontFamily:"Montserrat",fontWeight:"800",fontSize:`${ye*.012}px`,align:"left"}),alpha:1}),A(he.exports.Sprite,{texture:ae.WHITE,height:10,tint:"white",width:ye,x:ye/2,anchor:[.5,.5],y:ge-De}),A(he.exports.Sprite,{texture:ae.WHITE,height:5,tint:16721594,width:ye,x:ye/2,anchor:[.5,.5],y:ge-De})]})}function jN(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function WN(e){const[t,r]=V.exports.useState(0);return setInterval(()=>{r(parseFloat(jN("BACKGROUND_DIM")))},1e3),W(Me,{children:[A(he.exports.Sprite,{image:`${e.imgpath}`,height:ye>ge*16/9?ye*9/16:ge,width:ye>ge*16/9?ye:ge*16/9,x:ye/2,anchor:[.5,.5],y:ge/2}),A(he.exports.Sprite,{image:"/BG/overlay.png",height:ge,blendMode:me.ADD,width:ye*.5,x:ye/2,tint:"white",alpha:.5,anchor:[.5,.5],y:ge/2}),A(he.exports.Sprite,{texture:ae.WHITE,tint:"black",height:ge,width:ye,x:ye/2,alpha:t,anchor:[.5,.5],y:ge/2})]})}function qe(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function VN(e){const[t,r]=V.exports.useState(e.chart),{audioPath:n}=t;let i=0,s=0;t.hitObjects.forEach(m=>{m.type=="hold"&&(s+=m.ticks.length,i+=100*m.ticks.length),i+=100,s+=1}),t.cursor.sort((m,v)=>m.startTime-v.startTime).forEach((m,v)=>{const _=e.game.beatmap.cursor[v-1]!=null?e.game.beatmap.cursor[v-1].x:.5;m.type!="normal"&&(s+=m.ticks.length,i+=100*m.ticks.length),m.x!=_&&(i+=100,s+=1)});const o=e.game.init(10,10,400,n,i,t,tC,s,e.user);o.setAudioPath(n),o.audiovolume,o.effectvolume;function a(m){return m==qe("COL_1_KEY")||m==qe("COL_2_KEY")||m==qe("COL_3_KEY")||m==qe("COL_4_KEY")||m==qe("COL_1_KEY2")||m==qe("COL_2_KEY2")||m==qe("COL_3_KEY2")||m==qe("COL_4_KEY2")}function h(m){switch(m){case qe("COL_1_KEY"):return 0;case qe("COL_2_KEY"):return 1;case qe("COL_3_KEY"):return 2;case qe("COL_4_KEY"):return 3;case qe("COL_1_KEY2"):return 0;case qe("COL_2_KEY2"):return 1;case qe("COL_3_KEY2"):return 2;case qe("COL_4_KEY2"):return 3;default:return NaN}}function d(m){switch(m){case qe("COL_1_KEY"):return 0;case qe("COL_2_KEY"):return 1;case qe("COL_3_KEY"):return 2;case qe("COL_4_KEY"):return 3;case qe("COL_1_KEY2"):return 4;case qe("COL_2_KEY2"):return 5;case qe("COL_3_KEY2"):return 6;case qe("COL_4_KEY2"):return 7;default:return NaN}}let p=setTimeout(function(){o.key[4]="00"},50);V.exports.useEffect(()=>{const m=[!1,!1,!1,!1,!1,!1,!1,!1],v=y=>{e.game.audio.playing()&&(y.movementX>0&&(o.key[4]="01"),y.movementX<0&&(o.key[4]="10"),Math.abs(y.movementX)>0&&(clearTimeout(p),p=setTimeout(function(){o.key[4]="00"},50)))},_=y=>{e.game.audio.playing()&&(m[d(y.code)]=!1,a(y.code)&&(d(y.code)>=4&&d(y.code)<=7?m[d(y.code)-4]:m[d(y.code)+4])==!1&&(o.key[h(y.code)]="00"),(y.code==qe("CURSOR_LEFT_KEY")||y.code==qe("CURSOR_LEFT_KEY2"))&&(o.key[4]="0"+o.key[4][1]),(y.code==qe("CURSOR_RIGHT_KEY")||y.code==qe("CURSOR_RIGHT_KEY2"))&&(o.key[4]=o.key[4][0]+"0"))},T=y=>{e.game.audio.playing()&&(m[d(y.code)]=!0,y.repeat?o.key[h(y.code)]="01":(o.key[h(y.code)]="11",(y.code==qe("CURSOR_LEFT_KEY")||y.code==qe("CURSOR_LEFT_KEY2"))&&(o.key[4]="1"+o.key[4][1]),(y.code==qe("CURSOR_RIGHT_KEY")||y.code==qe("CURSOR_RIGHT_KEY2"))&&(o.key[4]=o.key[4][0]+"1")))},x=y=>{switch(y.code){case"KeyP":o.retry();break;case"o":o.audio.pause();break}};return document.addEventListener("keyup",_),document.addEventListener("mousemove",v),document.addEventListener("keydown",T),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("keyup",_),document.removeEventListener("keydown",T),document.removeEventListener("keydown",x)}},[]);const c=new zt,f=new zt;return W(Me,{children:[A(he.exports.Stage,{width:ye,height:ge,children:W(he.exports.Container,{filters:[],children:[A(WN,{imgpath:`BG/${t.bgPath}.jpg`}),A(m8,{beatmap:t,game:o,overlay:f,user:e.user},Date.now()),A($N,{game:e.game}),A(s8,{game:e.game}),A(g8,{game:o,time:e.menutime,beatmap:t,container:f,pcontainer:c}),A(oC,{game:e.game})]})}),A("div",{id:"log"})]})}function S2(){return Math.max(document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function T2(){return Math.max(document.documentElement.clientHeight)}var Si={exports:{}};function XN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gm={exports:{}};const YN={},KN=Object.freeze(Object.defineProperty({__proto__:null,default:YN},Symbol.toStringTag,{value:"Module"})),qN=pw(KN);var E2;function Ve(){return E2||(E2=1,function(e,t){(function(r,n){e.exports=n()})(Ne,function(){var r=r||function(n,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Ne<"u"&&Ne.crypto&&(s=Ne.crypto),!s&&typeof XN=="function")try{s=qN}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(w){var E;return y.prototype=w,E=new y,y.prototype=null,E}}(),h={},d=h.lib={},p=d.Base=function(){return{extend:function(y){var w=a(this);return y&&w.mixIn(y),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var w in y)y.hasOwnProperty(w)&&(this[w]=y[w]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=d.WordArray=p.extend({init:function(y,w){y=this.words=y||[],w!=i?this.sigBytes=w:this.sigBytes=y.length*4},toString:function(y){return(y||m).stringify(this)},concat:function(y){var w=this.words,E=y.words,P=this.sigBytes,I=y.sigBytes;if(this.clamp(),P%4)for(var R=0;R<I;R++){var N=E[R>>>2]>>>24-R%4*8&255;w[P+R>>>2]|=N<<24-(P+R)%4*8}else for(var D=0;D<I;D+=4)w[P+D>>>2]=E[D>>>2];return this.sigBytes+=I,this},clamp:function(){var y=this.words,w=this.sigBytes;y[w>>>2]&=4294967295<<32-w%4*8,y.length=n.ceil(w/4)},clone:function(){var y=p.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var w=[],E=0;E<y;E+=4)w.push(o());return new c.init(w,y)}}),f=h.enc={},m=f.Hex={stringify:function(y){for(var w=y.words,E=y.sigBytes,P=[],I=0;I<E;I++){var R=w[I>>>2]>>>24-I%4*8&255;P.push((R>>>4).toString(16)),P.push((R&15).toString(16))}return P.join("")},parse:function(y){for(var w=y.length,E=[],P=0;P<w;P+=2)E[P>>>3]|=parseInt(y.substr(P,2),16)<<24-P%8*4;return new c.init(E,w/2)}},v=f.Latin1={stringify:function(y){for(var w=y.words,E=y.sigBytes,P=[],I=0;I<E;I++){var R=w[I>>>2]>>>24-I%4*8&255;P.push(String.fromCharCode(R))}return P.join("")},parse:function(y){for(var w=y.length,E=[],P=0;P<w;P++)E[P>>>2]|=(y.charCodeAt(P)&255)<<24-P%4*8;return new c.init(E,w)}},_=f.Utf8={stringify:function(y){try{return decodeURIComponent(escape(v.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return v.parse(unescape(encodeURIComponent(y)))}},T=d.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=_.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var w,E=this._data,P=E.words,I=E.sigBytes,R=this.blockSize,N=R*4,D=I/N;y?D=n.ceil(D):D=n.max((D|0)-this._minBufferSize,0);var k=D*R,M=n.min(k*4,I);if(k){for(var z=0;z<k;z+=R)this._doProcessBlock(P,z);w=P.splice(0,k),E.sigBytes-=M}return new c.init(w,M)},clone:function(){var y=p.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});d.Hasher=T.extend({cfg:p.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){T.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(y){return function(w,E){return new y.init(E).finalize(w)}},_createHmacHelper:function(y){return function(w,E){return new x.HMAC.init(y,E).finalize(w)}}});var x=h.algo={};return h}(Math);return r})}(gm)),gm.exports}var vm={exports:{}},C2;function Uf(){return C2||(C2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,h=i.x64={};h.Word=o.extend({init:function(d,p){this.high=d,this.low=p}}),h.WordArray=o.extend({init:function(d,p){d=this.words=d||[],p!=n?this.sigBytes=p:this.sigBytes=d.length*8},toX32:function(){for(var d=this.words,p=d.length,c=[],f=0;f<p;f++){var m=d[f];c.push(m.high),c.push(m.low)}return a.create(c,this.sigBytes)},clone:function(){for(var d=o.clone.call(this),p=d.words=this.words.slice(0),c=p.length,f=0;f<c;f++)p[f]=p[f].clone();return d}})}(),r})}(vm)),vm.exports}var xm={exports:{}},A2;function QN(){return A2||(A2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,i=n.lib,s=i.WordArray,o=s.init,a=s.init=function(h){if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),(h instanceof Int8Array||typeof Uint8ClampedArray<"u"&&h instanceof Uint8ClampedArray||h instanceof Int16Array||h instanceof Uint16Array||h instanceof Int32Array||h instanceof Uint32Array||h instanceof Float32Array||h instanceof Float64Array)&&(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),h instanceof Uint8Array){for(var d=h.byteLength,p=[],c=0;c<d;c++)p[c>>>2]|=h[c]<<24-c%4*8;o.call(this,p,d)}else o.apply(this,arguments)};a.prototype=s}}(),r.lib.WordArray})}(xm)),xm.exports}var ym={exports:{}},k2;function ZN(){return k2||(k2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Utf16=o.Utf16BE={stringify:function(h){for(var d=h.words,p=h.sigBytes,c=[],f=0;f<p;f+=2){var m=d[f>>>2]>>>16-f%4*8&65535;c.push(String.fromCharCode(m))}return c.join("")},parse:function(h){for(var d=h.length,p=[],c=0;c<d;c++)p[c>>>1]|=h.charCodeAt(c)<<16-c%2*16;return s.create(p,d*2)}},o.Utf16LE={stringify:function(h){for(var d=h.words,p=h.sigBytes,c=[],f=0;f<p;f+=2){var m=a(d[f>>>2]>>>16-f%4*8&65535);c.push(String.fromCharCode(m))}return c.join("")},parse:function(h){for(var d=h.length,p=[],c=0;c<d;c++)p[c>>>1]|=a(h.charCodeAt(c)<<16-c%2*16);return s.create(p,d*2)}};function a(h){return h<<8&4278255360|h>>>8&16711935}}(),r.enc.Utf16})}(ym)),ym.exports}var _m={exports:{}},P2;function rl(){return P2||(P2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64={stringify:function(h){var d=h.words,p=h.sigBytes,c=this._map;h.clamp();for(var f=[],m=0;m<p;m+=3)for(var v=d[m>>>2]>>>24-m%4*8&255,_=d[m+1>>>2]>>>24-(m+1)%4*8&255,T=d[m+2>>>2]>>>24-(m+2)%4*8&255,x=v<<16|_<<8|T,y=0;y<4&&m+y*.75<p;y++)f.push(c.charAt(x>>>6*(3-y)&63));var w=c.charAt(64);if(w)for(;f.length%4;)f.push(w);return f.join("")},parse:function(h){var d=h.length,p=this._map,c=this._reverseMap;if(!c){c=this._reverseMap=[];for(var f=0;f<p.length;f++)c[p.charCodeAt(f)]=f}var m=p.charAt(64);if(m){var v=h.indexOf(m);v!==-1&&(d=v)}return a(h,d,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(h,d,p){for(var c=[],f=0,m=0;m<d;m++)if(m%4){var v=p[h.charCodeAt(m-1)]<<m%4*2,_=p[h.charCodeAt(m)]>>>6-m%4*2,T=v|_;c[f>>>2]|=T<<24-f%4*8,f++}return s.create(c,f)}}(),r.enc.Base64})}(_m)),_m.exports}var bm={exports:{}},I2;function JN(){return I2||(I2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.enc;o.Base64url={stringify:function(h,d=!0){var p=h.words,c=h.sigBytes,f=d?this._safe_map:this._map;h.clamp();for(var m=[],v=0;v<c;v+=3)for(var _=p[v>>>2]>>>24-v%4*8&255,T=p[v+1>>>2]>>>24-(v+1)%4*8&255,x=p[v+2>>>2]>>>24-(v+2)%4*8&255,y=_<<16|T<<8|x,w=0;w<4&&v+w*.75<c;w++)m.push(f.charAt(y>>>6*(3-w)&63));var E=f.charAt(64);if(E)for(;m.length%4;)m.push(E);return m.join("")},parse:function(h,d=!0){var p=h.length,c=d?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<c.length;m++)f[c.charCodeAt(m)]=m}var v=c.charAt(64);if(v){var _=h.indexOf(v);_!==-1&&(p=_)}return a(h,p,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(h,d,p){for(var c=[],f=0,m=0;m<d;m++)if(m%4){var v=p[h.charCodeAt(m-1)]<<m%4*2,_=p[h.charCodeAt(m)]>>>6-m%4*2,T=v|_;c[f>>>2]|=T<<24-f%4*8,f++}return s.create(c,f)}}(),r.enc.Base64url})}(bm)),bm.exports}var wm={exports:{}},R2;function nl(){return R2||(R2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.algo,d=[];(function(){for(var _=0;_<64;_++)d[_]=n.abs(n.sin(_+1))*4294967296|0})();var p=h.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(_,T){for(var x=0;x<16;x++){var y=T+x,w=_[y];_[y]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,P=_[T+0],I=_[T+1],R=_[T+2],N=_[T+3],D=_[T+4],k=_[T+5],M=_[T+6],z=_[T+7],F=_[T+8],U=_[T+9],Y=_[T+10],J=_[T+11],Q=_[T+12],O=_[T+13],L=_[T+14],G=_[T+15],H=E[0],j=E[1],Z=E[2],K=E[3];H=c(H,j,Z,K,P,7,d[0]),K=c(K,H,j,Z,I,12,d[1]),Z=c(Z,K,H,j,R,17,d[2]),j=c(j,Z,K,H,N,22,d[3]),H=c(H,j,Z,K,D,7,d[4]),K=c(K,H,j,Z,k,12,d[5]),Z=c(Z,K,H,j,M,17,d[6]),j=c(j,Z,K,H,z,22,d[7]),H=c(H,j,Z,K,F,7,d[8]),K=c(K,H,j,Z,U,12,d[9]),Z=c(Z,K,H,j,Y,17,d[10]),j=c(j,Z,K,H,J,22,d[11]),H=c(H,j,Z,K,Q,7,d[12]),K=c(K,H,j,Z,O,12,d[13]),Z=c(Z,K,H,j,L,17,d[14]),j=c(j,Z,K,H,G,22,d[15]),H=f(H,j,Z,K,I,5,d[16]),K=f(K,H,j,Z,M,9,d[17]),Z=f(Z,K,H,j,J,14,d[18]),j=f(j,Z,K,H,P,20,d[19]),H=f(H,j,Z,K,k,5,d[20]),K=f(K,H,j,Z,Y,9,d[21]),Z=f(Z,K,H,j,G,14,d[22]),j=f(j,Z,K,H,D,20,d[23]),H=f(H,j,Z,K,U,5,d[24]),K=f(K,H,j,Z,L,9,d[25]),Z=f(Z,K,H,j,N,14,d[26]),j=f(j,Z,K,H,F,20,d[27]),H=f(H,j,Z,K,O,5,d[28]),K=f(K,H,j,Z,R,9,d[29]),Z=f(Z,K,H,j,z,14,d[30]),j=f(j,Z,K,H,Q,20,d[31]),H=m(H,j,Z,K,k,4,d[32]),K=m(K,H,j,Z,F,11,d[33]),Z=m(Z,K,H,j,J,16,d[34]),j=m(j,Z,K,H,L,23,d[35]),H=m(H,j,Z,K,I,4,d[36]),K=m(K,H,j,Z,D,11,d[37]),Z=m(Z,K,H,j,z,16,d[38]),j=m(j,Z,K,H,Y,23,d[39]),H=m(H,j,Z,K,O,4,d[40]),K=m(K,H,j,Z,P,11,d[41]),Z=m(Z,K,H,j,N,16,d[42]),j=m(j,Z,K,H,M,23,d[43]),H=m(H,j,Z,K,U,4,d[44]),K=m(K,H,j,Z,Q,11,d[45]),Z=m(Z,K,H,j,G,16,d[46]),j=m(j,Z,K,H,R,23,d[47]),H=v(H,j,Z,K,P,6,d[48]),K=v(K,H,j,Z,z,10,d[49]),Z=v(Z,K,H,j,L,15,d[50]),j=v(j,Z,K,H,k,21,d[51]),H=v(H,j,Z,K,Q,6,d[52]),K=v(K,H,j,Z,N,10,d[53]),Z=v(Z,K,H,j,Y,15,d[54]),j=v(j,Z,K,H,I,21,d[55]),H=v(H,j,Z,K,F,6,d[56]),K=v(K,H,j,Z,G,10,d[57]),Z=v(Z,K,H,j,M,15,d[58]),j=v(j,Z,K,H,O,21,d[59]),H=v(H,j,Z,K,D,6,d[60]),K=v(K,H,j,Z,J,10,d[61]),Z=v(Z,K,H,j,R,15,d[62]),j=v(j,Z,K,H,U,21,d[63]),E[0]=E[0]+H|0,E[1]=E[1]+j|0,E[2]=E[2]+Z|0,E[3]=E[3]+K|0},_doFinalize:function(){var _=this._data,T=_.words,x=this._nDataBytes*8,y=_.sigBytes*8;T[y>>>5]|=128<<24-y%32;var w=n.floor(x/4294967296),E=x;T[(y+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,T[(y+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_.sigBytes=(T.length+1)*4,this._process();for(var P=this._hash,I=P.words,R=0;R<4;R++){var N=I[R];I[R]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return P},clone:function(){var _=a.clone.call(this);return _._hash=this._hash.clone(),_}});function c(_,T,x,y,w,E,P){var I=_+(T&x|~T&y)+w+P;return(I<<E|I>>>32-E)+T}function f(_,T,x,y,w,E,P){var I=_+(T&y|x&~y)+w+P;return(I<<E|I>>>32-E)+T}function m(_,T,x,y,w,E,P){var I=_+(T^x^y)+w+P;return(I<<E|I>>>32-E)+T}function v(_,T,x,y,w,E,P){var I=_+(x^(T|~y))+w+P;return(I<<E|I>>>32-E)+T}i.MD5=a._createHelper(p),i.HmacMD5=a._createHmacHelper(p)}(Math),r.MD5})}(wm)),wm.exports}var Sm={exports:{}},M2;function V1(){return M2||(M2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.Hasher,a=n.algo,h=[],d=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,c){for(var f=this._hash.words,m=f[0],v=f[1],_=f[2],T=f[3],x=f[4],y=0;y<80;y++){if(y<16)h[y]=p[c+y]|0;else{var w=h[y-3]^h[y-8]^h[y-14]^h[y-16];h[y]=w<<1|w>>>31}var E=(m<<5|m>>>27)+x+h[y];y<20?E+=(v&_|~v&T)+1518500249:y<40?E+=(v^_^T)+1859775393:y<60?E+=(v&_|v&T|_&T)-1894007588:E+=(v^_^T)-899497514,x=T,T=_,_=v<<30|v>>>2,v=m,m=E}f[0]=f[0]+m|0,f[1]=f[1]+v|0,f[2]=f[2]+_|0,f[3]=f[3]+T|0,f[4]=f[4]+x|0},_doFinalize:function(){var p=this._data,c=p.words,f=this._nDataBytes*8,m=p.sigBytes*8;return c[m>>>5]|=128<<24-m%32,c[(m+64>>>9<<4)+14]=Math.floor(f/4294967296),c[(m+64>>>9<<4)+15]=f,p.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p}});n.SHA1=o._createHelper(d),n.HmacSHA1=o._createHmacHelper(d)}(),r.SHA1})}(Sm)),Sm.exports}var Tm={exports:{}},N2;function wC(){return N2||(N2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.algo,d=[],p=[];(function(){function m(x){for(var y=n.sqrt(x),w=2;w<=y;w++)if(!(x%w))return!1;return!0}function v(x){return(x-(x|0))*4294967296|0}for(var _=2,T=0;T<64;)m(_)&&(T<8&&(d[T]=v(n.pow(_,1/2))),p[T]=v(n.pow(_,1/3)),T++),_++})();var c=[],f=h.SHA256=a.extend({_doReset:function(){this._hash=new o.init(d.slice(0))},_doProcessBlock:function(m,v){for(var _=this._hash.words,T=_[0],x=_[1],y=_[2],w=_[3],E=_[4],P=_[5],I=_[6],R=_[7],N=0;N<64;N++){if(N<16)c[N]=m[v+N]|0;else{var D=c[N-15],k=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,M=c[N-2],z=(M<<15|M>>>17)^(M<<13|M>>>19)^M>>>10;c[N]=k+c[N-7]+z+c[N-16]}var F=E&P^~E&I,U=T&x^T&y^x&y,Y=(T<<30|T>>>2)^(T<<19|T>>>13)^(T<<10|T>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),Q=R+J+F+p[N]+c[N],O=Y+U;R=I,I=P,P=E,E=w+Q|0,w=y,y=x,x=T,T=Q+O|0}_[0]=_[0]+T|0,_[1]=_[1]+x|0,_[2]=_[2]+y|0,_[3]=_[3]+w|0,_[4]=_[4]+E|0,_[5]=_[5]+P|0,_[6]=_[6]+I|0,_[7]=_[7]+R|0},_doFinalize:function(){var m=this._data,v=m.words,_=this._nDataBytes*8,T=m.sigBytes*8;return v[T>>>5]|=128<<24-T%32,v[(T+64>>>9<<4)+14]=n.floor(_/4294967296),v[(T+64>>>9<<4)+15]=_,m.sigBytes=v.length*4,this._process(),this._hash},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),r.SHA256})}(Tm)),Tm.exports}var Em={exports:{}},D2;function eD(){return D2||(D2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),wC())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=n.algo,a=o.SHA256,h=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var d=a._doFinalize.call(this);return d.sigBytes-=4,d}});n.SHA224=a._createHelper(h),n.HmacSHA224=a._createHmacHelper(h)}(),r.SHA224})}(Em)),Em.exports}var Cm={exports:{}},L2;function SC(){return L2||(L2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),Uf())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.Hasher,o=n.x64,a=o.Word,h=o.WordArray,d=n.algo;function p(){return a.create.apply(a,arguments)}var c=[p(1116352408,3609767458),p(1899447441,602891725),p(3049323471,3964484399),p(3921009573,2173295548),p(961987163,4081628472),p(1508970993,3053834265),p(2453635748,2937671579),p(2870763221,3664609560),p(3624381080,2734883394),p(310598401,1164996542),p(607225278,1323610764),p(1426881987,3590304994),p(1925078388,4068182383),p(2162078206,991336113),p(2614888103,633803317),p(3248222580,3479774868),p(3835390401,2666613458),p(4022224774,944711139),p(264347078,2341262773),p(604807628,2007800933),p(770255983,1495990901),p(1249150122,1856431235),p(1555081692,3175218132),p(1996064986,2198950837),p(2554220882,3999719339),p(2821834349,766784016),p(2952996808,2566594879),p(3210313671,3203337956),p(3336571891,1034457026),p(3584528711,2466948901),p(113926993,3758326383),p(338241895,168717936),p(666307205,1188179964),p(773529912,1546045734),p(1294757372,1522805485),p(1396182291,2643833823),p(1695183700,2343527390),p(1986661051,1014477480),p(2177026350,1206759142),p(2456956037,344077627),p(2730485921,1290863460),p(2820302411,3158454273),p(3259730800,3505952657),p(3345764771,106217008),p(3516065817,3606008344),p(3600352804,1432725776),p(4094571909,1467031594),p(275423344,851169720),p(430227734,3100823752),p(506948616,1363258195),p(659060556,3750685593),p(883997877,3785050280),p(958139571,3318307427),p(1322822218,3812723403),p(1537002063,2003034995),p(1747873779,3602036899),p(1955562222,1575990012),p(2024104815,1125592928),p(2227730452,2716904306),p(2361852424,442776044),p(2428436474,593698344),p(2756734187,3733110249),p(3204031479,2999351573),p(3329325298,3815920427),p(3391569614,3928383900),p(3515267271,566280711),p(3940187606,3454069534),p(4118630271,4000239992),p(116418474,1914138554),p(174292421,2731055270),p(289380356,3203993006),p(460393269,320620315),p(685471733,587496836),p(852142971,1086792851),p(1017036298,365543100),p(1126000580,2618297676),p(1288033470,3409855158),p(1501505948,4234509866),p(1607167915,987167468),p(1816402316,1246189591)],f=[];(function(){for(var v=0;v<80;v++)f[v]=p()})();var m=d.SHA512=s.extend({_doReset:function(){this._hash=new h.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(v,_){for(var T=this._hash.words,x=T[0],y=T[1],w=T[2],E=T[3],P=T[4],I=T[5],R=T[6],N=T[7],D=x.high,k=x.low,M=y.high,z=y.low,F=w.high,U=w.low,Y=E.high,J=E.low,Q=P.high,O=P.low,L=I.high,G=I.low,H=R.high,j=R.low,Z=N.high,K=N.low,xe=D,fe=k,Re=M,Ce=z,gt=F,tt=U,Oe=Y,Qe=J,Le=Q,it=O,qt=L,Fr=G,ts=H,Jr=j,il=Z,yn=K,Or=0;Or<80;Or++){var Tr,Qn,Zn=f[Or];if(Or<16)Qn=Zn.high=v[_+Or*2]|0,Tr=Zn.low=v[_+Or*2+1]|0;else{var ec=f[Or-15],rs=ec.high,Vs=ec.low,Gf=(rs>>>1|Vs<<31)^(rs>>>8|Vs<<24)^rs>>>7,tc=(Vs>>>1|rs<<31)^(Vs>>>8|rs<<24)^(Vs>>>7|rs<<25),rc=f[Or-2],ns=rc.high,Xs=rc.low,$f=(ns>>>19|Xs<<13)^(ns<<3|Xs>>>29)^ns>>>6,nc=(Xs>>>19|ns<<13)^(Xs<<3|ns>>>29)^(Xs>>>6|ns<<26),ic=f[Or-7],jf=ic.high,sc=ic.low,oc=f[Or-16],Wf=oc.high,ac=oc.low;Tr=tc+sc,Qn=Gf+jf+(Tr>>>0<tc>>>0?1:0),Tr=Tr+nc,Qn=Qn+$f+(Tr>>>0<nc>>>0?1:0),Tr=Tr+ac,Qn=Qn+Wf+(Tr>>>0<ac>>>0?1:0),Zn.high=Qn,Zn.low=Tr}var Vf=Le&qt^~Le&ts,lc=it&Fr^~it&Jr,Xf=xe&Re^xe&gt^Re&gt,uc=fe&Ce^fe&tt^Ce&tt,cc=(xe>>>28|fe<<4)^(xe<<30|fe>>>2)^(xe<<25|fe>>>7),hc=(fe>>>28|xe<<4)^(fe<<30|xe>>>2)^(fe<<25|xe>>>7),sl=(Le>>>14|it<<18)^(Le>>>18|it<<14)^(Le<<23|it>>>9),dc=(it>>>14|Le<<18)^(it>>>18|Le<<14)^(it<<23|Le>>>9),ol=c[Or],Yf=ol.high,fc=ol.low,gr=yn+dc,_n=il+sl+(gr>>>0<yn>>>0?1:0),gr=gr+lc,_n=_n+Vf+(gr>>>0<lc>>>0?1:0),gr=gr+fc,_n=_n+Yf+(gr>>>0<fc>>>0?1:0),gr=gr+Tr,_n=_n+Qn+(gr>>>0<Tr>>>0?1:0),Uo=hc+uc,Kf=cc+Xf+(Uo>>>0<hc>>>0?1:0);il=ts,yn=Jr,ts=qt,Jr=Fr,qt=Le,Fr=it,it=Qe+gr|0,Le=Oe+_n+(it>>>0<Qe>>>0?1:0)|0,Oe=gt,Qe=tt,gt=Re,tt=Ce,Re=xe,Ce=fe,fe=gr+Uo|0,xe=_n+Kf+(fe>>>0<gr>>>0?1:0)|0}k=x.low=k+fe,x.high=D+xe+(k>>>0<fe>>>0?1:0),z=y.low=z+Ce,y.high=M+Re+(z>>>0<Ce>>>0?1:0),U=w.low=U+tt,w.high=F+gt+(U>>>0<tt>>>0?1:0),J=E.low=J+Qe,E.high=Y+Oe+(J>>>0<Qe>>>0?1:0),O=P.low=O+it,P.high=Q+Le+(O>>>0<it>>>0?1:0),G=I.low=G+Fr,I.high=L+qt+(G>>>0<Fr>>>0?1:0),j=R.low=j+Jr,R.high=H+ts+(j>>>0<Jr>>>0?1:0),K=N.low=K+yn,N.high=Z+il+(K>>>0<yn>>>0?1:0)},_doFinalize:function(){var v=this._data,_=v.words,T=this._nDataBytes*8,x=v.sigBytes*8;_[x>>>5]|=128<<24-x%32,_[(x+128>>>10<<5)+30]=Math.floor(T/4294967296),_[(x+128>>>10<<5)+31]=T,v.sigBytes=_.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v},blockSize:1024/32});n.SHA512=s._createHelper(m),n.HmacSHA512=s._createHmacHelper(m)}(),r.SHA512})}(Cm)),Cm.exports}var Am={exports:{}},B2;function tD(){return B2||(B2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),Uf(),SC())})(Ne,function(r){return function(){var n=r,i=n.x64,s=i.Word,o=i.WordArray,a=n.algo,h=a.SHA512,d=a.SHA384=h.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var p=h._doFinalize.call(this);return p.sigBytes-=16,p}});n.SHA384=h._createHelper(d),n.HmacSHA384=h._createHmacHelper(d)}(),r.SHA384})}(Am)),Am.exports}var km={exports:{}},F2;function rD(){return F2||(F2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),Uf())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.x64,d=h.Word,p=i.algo,c=[],f=[],m=[];(function(){for(var T=1,x=0,y=0;y<24;y++){c[T+5*x]=(y+1)*(y+2)/2%64;var w=x%5,E=(2*T+3*x)%5;T=w,x=E}for(var T=0;T<5;T++)for(var x=0;x<5;x++)f[T+5*x]=x+(2*T+3*x)%5*5;for(var P=1,I=0;I<24;I++){for(var R=0,N=0,D=0;D<7;D++){if(P&1){var k=(1<<D)-1;k<32?N^=1<<k:R^=1<<k-32}P&128?P=P<<1^113:P<<=1}m[I]=d.create(R,N)}})();var v=[];(function(){for(var T=0;T<25;T++)v[T]=d.create()})();var _=p.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var T=this._state=[],x=0;x<25;x++)T[x]=new d.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(T,x){for(var y=this._state,w=this.blockSize/2,E=0;E<w;E++){var P=T[x+2*E],I=T[x+2*E+1];P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360;var R=y[E];R.high^=I,R.low^=P}for(var N=0;N<24;N++){for(var D=0;D<5;D++){for(var k=0,M=0,z=0;z<5;z++){var R=y[D+5*z];k^=R.high,M^=R.low}var F=v[D];F.high=k,F.low=M}for(var D=0;D<5;D++)for(var U=v[(D+4)%5],Y=v[(D+1)%5],J=Y.high,Q=Y.low,k=U.high^(J<<1|Q>>>31),M=U.low^(Q<<1|J>>>31),z=0;z<5;z++){var R=y[D+5*z];R.high^=k,R.low^=M}for(var O=1;O<25;O++){var k,M,R=y[O],L=R.high,G=R.low,H=c[O];H<32?(k=L<<H|G>>>32-H,M=G<<H|L>>>32-H):(k=G<<H-32|L>>>64-H,M=L<<H-32|G>>>64-H);var j=v[f[O]];j.high=k,j.low=M}var Z=v[0],K=y[0];Z.high=K.high,Z.low=K.low;for(var D=0;D<5;D++)for(var z=0;z<5;z++){var O=D+5*z,R=y[O],xe=v[O],fe=v[(D+1)%5+5*z],Re=v[(D+2)%5+5*z];R.high=xe.high^~fe.high&Re.high,R.low=xe.low^~fe.low&Re.low}var R=y[0],Ce=m[N];R.high^=Ce.high,R.low^=Ce.low}},_doFinalize:function(){var T=this._data,x=T.words;this._nDataBytes*8;var y=T.sigBytes*8,w=this.blockSize*32;x[y>>>5]|=1<<24-y%32,x[(n.ceil((y+1)/w)*w>>>5)-1]|=128,T.sigBytes=x.length*4,this._process();for(var E=this._state,P=this.cfg.outputLength/8,I=P/8,R=[],N=0;N<I;N++){var D=E[N],k=D.high,M=D.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,R.push(M),R.push(k)}return new o.init(R,P)},clone:function(){for(var T=a.clone.call(this),x=T._state=this._state.slice(0),y=0;y<25;y++)x[y]=x[y].clone();return T}});i.SHA3=a._createHelper(_),i.HmacSHA3=a._createHmacHelper(_)}(Math),r.SHA3})}(km)),km.exports}var Pm={exports:{}},O2;function nD(){return O2||(O2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var i=r,s=i.lib,o=s.WordArray,a=s.Hasher,h=i.algo,d=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=o.create([0,1518500249,1859775393,2400959708,2840853838]),v=o.create([1352829926,1548603684,1836072691,2053994217,0]),_=h.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(I,R){for(var N=0;N<16;N++){var D=R+N,k=I[D];I[D]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var M=this._hash.words,z=m.words,F=v.words,U=d.words,Y=p.words,J=c.words,Q=f.words,O,L,G,H,j,Z,K,xe,fe,Re;Z=O=M[0],K=L=M[1],xe=G=M[2],fe=H=M[3],Re=j=M[4];for(var Ce,N=0;N<80;N+=1)Ce=O+I[R+U[N]]|0,N<16?Ce+=T(L,G,H)+z[0]:N<32?Ce+=x(L,G,H)+z[1]:N<48?Ce+=y(L,G,H)+z[2]:N<64?Ce+=w(L,G,H)+z[3]:Ce+=E(L,G,H)+z[4],Ce=Ce|0,Ce=P(Ce,J[N]),Ce=Ce+j|0,O=j,j=H,H=P(G,10),G=L,L=Ce,Ce=Z+I[R+Y[N]]|0,N<16?Ce+=E(K,xe,fe)+F[0]:N<32?Ce+=w(K,xe,fe)+F[1]:N<48?Ce+=y(K,xe,fe)+F[2]:N<64?Ce+=x(K,xe,fe)+F[3]:Ce+=T(K,xe,fe)+F[4],Ce=Ce|0,Ce=P(Ce,Q[N]),Ce=Ce+Re|0,Z=Re,Re=fe,fe=P(xe,10),xe=K,K=Ce;Ce=M[1]+G+fe|0,M[1]=M[2]+H+Re|0,M[2]=M[3]+j+Z|0,M[3]=M[4]+O+K|0,M[4]=M[0]+L+xe|0,M[0]=Ce},_doFinalize:function(){var I=this._data,R=I.words,N=this._nDataBytes*8,D=I.sigBytes*8;R[D>>>5]|=128<<24-D%32,R[(D+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,I.sigBytes=(R.length+1)*4,this._process();for(var k=this._hash,M=k.words,z=0;z<5;z++){var F=M[z];M[z]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return k},clone:function(){var I=a.clone.call(this);return I._hash=this._hash.clone(),I}});function T(I,R,N){return I^R^N}function x(I,R,N){return I&R|~I&N}function y(I,R,N){return(I|~R)^N}function w(I,R,N){return I&N|R&~N}function E(I,R,N){return I^(R|~N)}function P(I,R){return I<<R|I>>>32-R}i.RIPEMD160=a._createHelper(_),i.HmacRIPEMD160=a._createHmacHelper(_)}(),r.RIPEMD160})}(Pm)),Pm.exports}var Im={exports:{}},U2;function X1(){return U2||(U2=1,function(e,t){(function(r,n){e.exports=n(Ve())})(Ne,function(r){(function(){var n=r,i=n.lib,s=i.Base,o=n.enc,a=o.Utf8,h=n.algo;h.HMAC=s.extend({init:function(d,p){d=this._hasher=new d.init,typeof p=="string"&&(p=a.parse(p));var c=d.blockSize,f=c*4;p.sigBytes>f&&(p=d.finalize(p)),p.clamp();for(var m=this._oKey=p.clone(),v=this._iKey=p.clone(),_=m.words,T=v.words,x=0;x<c;x++)_[x]^=1549556828,T[x]^=909522486;m.sigBytes=v.sigBytes=f,this.reset()},reset:function(){var d=this._hasher;d.reset(),d.update(this._iKey)},update:function(d){return this._hasher.update(d),this},finalize:function(d){var p=this._hasher,c=p.finalize(d);p.reset();var f=p.finalize(this._oKey.clone().concat(c));return f}})})()})}(Im)),Im.exports}var Rm={exports:{}},z2;function iD(){return z2||(z2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),V1(),X1())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,h=a.SHA1,d=a.HMAC,p=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var m=this.cfg,v=d.create(m.hasher,c),_=o.create(),T=o.create([1]),x=_.words,y=T.words,w=m.keySize,E=m.iterations;x.length<w;){var P=v.update(f).finalize(T);v.reset();for(var I=P.words,R=I.length,N=P,D=1;D<E;D++){N=v.finalize(N),v.reset();for(var k=N.words,M=0;M<R;M++)I[M]^=k[M]}_.concat(P),y[0]++}return _.sigBytes=w*4,_}});n.PBKDF2=function(c,f,m){return p.create(m).compute(c,f)}}(),r.PBKDF2})}(Rm)),Rm.exports}var Mm={exports:{}},H2;function Oo(){return H2||(H2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),V1(),X1())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.Base,o=i.WordArray,a=n.algo,h=a.MD5,d=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:h,iterations:1}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,c){for(var f,m=this.cfg,v=m.hasher.create(),_=o.create(),T=_.words,x=m.keySize,y=m.iterations;T.length<x;){f&&v.update(f),f=v.update(p).finalize(c),v.reset();for(var w=1;w<y;w++)f=v.finalize(f),v.reset();_.concat(f)}return _.sigBytes=x*4,_}});n.EvpKDF=function(p,c,f){return d.create(f).compute(p,c)}}(),r.EvpKDF})}(Mm)),Mm.exports}var Nm={exports:{}},G2;function ir(){return G2||(G2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),Oo())})(Ne,function(r){r.lib.Cipher||function(n){var i=r,s=i.lib,o=s.Base,a=s.WordArray,h=s.BufferedBlockAlgorithm,d=i.enc;d.Utf8;var p=d.Base64,c=i.algo,f=c.EvpKDF,m=s.Cipher=h.extend({cfg:o.extend(),createEncryptor:function(k,M){return this.create(this._ENC_XFORM_MODE,k,M)},createDecryptor:function(k,M){return this.create(this._DEC_XFORM_MODE,k,M)},init:function(k,M,z){this.cfg=this.cfg.extend(z),this._xformMode=k,this._key=M,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var M=this._doFinalize();return M},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(M){return typeof M=="string"?D:I}return function(M){return{encrypt:function(z,F,U){return k(F).encrypt(M,z,F,U)},decrypt:function(z,F,U){return k(F).decrypt(M,z,F,U)}}}}()});s.StreamCipher=m.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var v=i.mode={},_=s.BlockCipherMode=o.extend({createEncryptor:function(k,M){return this.Encryptor.create(k,M)},createDecryptor:function(k,M){return this.Decryptor.create(k,M)},init:function(k,M){this._cipher=k,this._iv=M}}),T=v.CBC=function(){var k=_.extend();k.Encryptor=k.extend({processBlock:function(z,F){var U=this._cipher,Y=U.blockSize;M.call(this,z,F,Y),U.encryptBlock(z,F),this._prevBlock=z.slice(F,F+Y)}}),k.Decryptor=k.extend({processBlock:function(z,F){var U=this._cipher,Y=U.blockSize,J=z.slice(F,F+Y);U.decryptBlock(z,F),M.call(this,z,F,Y),this._prevBlock=J}});function M(z,F,U){var Y,J=this._iv;J?(Y=J,this._iv=n):Y=this._prevBlock;for(var Q=0;Q<U;Q++)z[F+Q]^=Y[Q]}return k}(),x=i.pad={},y=x.Pkcs7={pad:function(k,M){for(var z=M*4,F=z-k.sigBytes%z,U=F<<24|F<<16|F<<8|F,Y=[],J=0;J<F;J+=4)Y.push(U);var Q=a.create(Y,F);k.concat(Q)},unpad:function(k){var M=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=M}};s.BlockCipher=m.extend({cfg:m.cfg.extend({mode:T,padding:y}),reset:function(){var k;m.reset.call(this);var M=this.cfg,z=M.iv,F=M.mode;this._xformMode==this._ENC_XFORM_MODE?k=F.createEncryptor:(k=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,z&&z.words):(this._mode=k.call(F,this,z&&z.words),this._mode.__creator=k)},_doProcessBlock:function(k,M){this._mode.processBlock(k,M)},_doFinalize:function(){var k,M=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(M.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),M.unpad(k)),k},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),E=i.format={},P=E.OpenSSL={stringify:function(k){var M,z=k.ciphertext,F=k.salt;return F?M=a.create([1398893684,1701076831]).concat(F).concat(z):M=z,M.toString(p)},parse:function(k){var M,z=p.parse(k),F=z.words;return F[0]==1398893684&&F[1]==1701076831&&(M=a.create(F.slice(2,4)),F.splice(0,4),z.sigBytes-=16),w.create({ciphertext:z,salt:M})}},I=s.SerializableCipher=o.extend({cfg:o.extend({format:P}),encrypt:function(k,M,z,F){F=this.cfg.extend(F);var U=k.createEncryptor(z,F),Y=U.finalize(M),J=U.cfg;return w.create({ciphertext:Y,key:z,iv:J.iv,algorithm:k,mode:J.mode,padding:J.padding,blockSize:k.blockSize,formatter:F.format})},decrypt:function(k,M,z,F){F=this.cfg.extend(F),M=this._parse(M,F.format);var U=k.createDecryptor(z,F).finalize(M.ciphertext);return U},_parse:function(k,M){return typeof k=="string"?M.parse(k,this):k}}),R=i.kdf={},N=R.OpenSSL={execute:function(k,M,z,F){F||(F=a.random(64/8));var U=f.create({keySize:M+z}).compute(k,F),Y=a.create(U.words.slice(M),z*4);return U.sigBytes=M*4,w.create({key:U,iv:Y,salt:F})}},D=s.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:N}),encrypt:function(k,M,z,F){F=this.cfg.extend(F);var U=F.kdf.execute(z,k.keySize,k.ivSize);F.iv=U.iv;var Y=I.encrypt.call(this,k,M,U.key,F);return Y.mixIn(U),Y},decrypt:function(k,M,z,F){F=this.cfg.extend(F),M=this._parse(M,F.format);var U=F.kdf.execute(z,k.keySize,k.ivSize,M.salt);F.iv=U.iv;var Y=I.decrypt.call(this,k,M,U.key,F);return Y}})}()})}(Nm)),Nm.exports}var Dm={exports:{}},$2;function sD(){return $2||($2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize;i.call(this,s,o,h,a),this._prevBlock=s.slice(o,o+h)}}),n.Decryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize,d=s.slice(o,o+h);i.call(this,s,o,h,a),this._prevBlock=d}});function i(s,o,a,h){var d,p=this._iv;p?(d=p.slice(0),this._iv=void 0):d=this._prevBlock,h.encryptBlock(d,0);for(var c=0;c<a;c++)s[o+c]^=d[c]}return n}(),r.mode.CFB})}(Dm)),Dm.exports}var Lm={exports:{}},j2;function oD(){return j2||(j2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize,d=this._iv,p=this._counter;d&&(p=this._counter=d.slice(0),this._iv=void 0);var c=p.slice(0);a.encryptBlock(c,0),p[h-1]=p[h-1]+1|0;for(var f=0;f<h;f++)s[o+f]^=c[f]}});return n.Decryptor=i,n}(),r.mode.CTR})}(Lm)),Lm.exports}var Bm={exports:{}},W2;function aD(){return W2||(W2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var h=a>>16&255,d=a>>8&255,p=a&255;h===255?(h=0,d===255?(d=0,p===255?p=0:++p):++d):++h,a=0,a+=h<<16,a+=d<<8,a+=p}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=n.Encryptor=n.extend({processBlock:function(a,h){var d=this._cipher,p=d.blockSize,c=this._iv,f=this._counter;c&&(f=this._counter=c.slice(0),this._iv=void 0),s(f);var m=f.slice(0);d.encryptBlock(m,0);for(var v=0;v<p;v++)a[h+v]^=m[v]}});return n.Decryptor=o,n}(),r.mode.CTRGladman})}(Bm)),Bm.exports}var Fm={exports:{}},V2;function lD(){return V2||(V2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(s,o){var a=this._cipher,h=a.blockSize,d=this._iv,p=this._keystream;d&&(p=this._keystream=d.slice(0),this._iv=void 0),a.encryptBlock(p,0);for(var c=0;c<h;c++)s[o+c]^=p[c]}});return n.Decryptor=i,n}(),r.mode.OFB})}(Fm)),Fm.exports}var Om={exports:{}},X2;function uD(){return X2||(X2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),n.Decryptor=n.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),n}(),r.mode.ECB})}(Om)),Om.exports}var Um={exports:{}},Y2;function cD(){return Y2||(Y2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.pad.AnsiX923={pad:function(n,i){var s=n.sigBytes,o=i*4,a=o-s%o,h=s+a-1;n.clamp(),n.words[h>>>2]|=a<<24-h%4*8,n.sigBytes+=a},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Ansix923})}(Um)),Um.exports}var zm={exports:{}},K2;function hD(){return K2||(K2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.pad.Iso10126={pad:function(n,i){var s=i*4,o=s-n.sigBytes%s;n.concat(r.lib.WordArray.random(o-1)).concat(r.lib.WordArray.create([o<<24],1))},unpad:function(n){var i=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=i}},r.pad.Iso10126})}(zm)),zm.exports}var Hm={exports:{}},q2;function dD(){return q2||(q2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.pad.Iso97971={pad:function(n,i){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,i)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Hm)),Hm.exports}var Gm={exports:{}},Q2;function fD(){return Q2||(Q2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.pad.ZeroPadding={pad:function(n,i){var s=i*4;n.clamp(),n.sigBytes+=s-(n.sigBytes%s||s)},unpad:function(n){for(var i=n.words,s=n.sigBytes-1,s=n.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){n.sigBytes=s+1;break}}},r.pad.ZeroPadding})}(Gm)),Gm.exports}var $m={exports:{}},Z2;function pD(){return Z2||(Z2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}($m)),$m.exports}var jm={exports:{}},J2;function mD(){return J2||(J2=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),ir())})(Ne,function(r){return function(n){var i=r,s=i.lib,o=s.CipherParams,a=i.enc,h=a.Hex,d=i.format;d.Hex={stringify:function(p){return p.ciphertext.toString(h)},parse:function(p){var c=h.parse(p);return o.create({ciphertext:c})}}}(),r.format.Hex})}(jm)),jm.exports}var Wm={exports:{}},ew;function gD(){return ew||(ew=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),rl(),nl(),Oo(),ir())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.BlockCipher,o=n.algo,a=[],h=[],d=[],p=[],c=[],f=[],m=[],v=[],_=[],T=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var P=0,I=0,E=0;E<256;E++){var R=I^I<<1^I<<2^I<<3^I<<4;R=R>>>8^R&255^99,a[P]=R,h[R]=P;var N=w[P],D=w[N],k=w[D],M=w[R]*257^R*16843008;d[P]=M<<24|M>>>8,p[P]=M<<16|M>>>16,c[P]=M<<8|M>>>24,f[P]=M;var M=k*16843009^D*65537^N*257^P*16843008;m[R]=M<<24|M>>>8,v[R]=M<<16|M>>>16,_[R]=M<<8|M>>>24,T[R]=M,P?(P=N^w[w[w[k^N]]],I^=w[w[I]]):P=I=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,P=E.words,I=E.sigBytes/4,R=this._nRounds=I+6,N=(R+1)*4,D=this._keySchedule=[],k=0;k<N;k++)k<I?D[k]=P[k]:(w=D[k-1],k%I?I>6&&k%I==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=x[k/I|0]<<24),D[k]=D[k-I]^w);for(var M=this._invKeySchedule=[],z=0;z<N;z++){var k=N-z;if(z%4)var w=D[k];else var w=D[k-4];z<4||k<=4?M[z]=w:M[z]=m[a[w>>>24]]^v[a[w>>>16&255]]^_[a[w>>>8&255]]^T[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,d,p,c,f,a)},decryptBlock:function(w,E){var P=w[E+1];w[E+1]=w[E+3],w[E+3]=P,this._doCryptBlock(w,E,this._invKeySchedule,m,v,_,T,h);var P=w[E+1];w[E+1]=w[E+3],w[E+3]=P},_doCryptBlock:function(w,E,P,I,R,N,D,k){for(var M=this._nRounds,z=w[E]^P[0],F=w[E+1]^P[1],U=w[E+2]^P[2],Y=w[E+3]^P[3],J=4,Q=1;Q<M;Q++){var O=I[z>>>24]^R[F>>>16&255]^N[U>>>8&255]^D[Y&255]^P[J++],L=I[F>>>24]^R[U>>>16&255]^N[Y>>>8&255]^D[z&255]^P[J++],G=I[U>>>24]^R[Y>>>16&255]^N[z>>>8&255]^D[F&255]^P[J++],H=I[Y>>>24]^R[z>>>16&255]^N[F>>>8&255]^D[U&255]^P[J++];z=O,F=L,U=G,Y=H}var O=(k[z>>>24]<<24|k[F>>>16&255]<<16|k[U>>>8&255]<<8|k[Y&255])^P[J++],L=(k[F>>>24]<<24|k[U>>>16&255]<<16|k[Y>>>8&255]<<8|k[z&255])^P[J++],G=(k[U>>>24]<<24|k[Y>>>16&255]<<16|k[z>>>8&255]<<8|k[F&255])^P[J++],H=(k[Y>>>24]<<24|k[z>>>16&255]<<16|k[F>>>8&255]<<8|k[U&255])^P[J++];w[E]=O,w[E+1]=L,w[E+2]=G,w[E+3]=H},keySize:256/32});n.AES=s._createHelper(y)}(),r.AES})}(Wm)),Wm.exports}var Vm={exports:{}},tw;function vD(){return tw||(tw=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),rl(),nl(),Oo(),ir())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.WordArray,o=i.BlockCipher,a=n.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],d=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],p=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=a.DES=o.extend({_doReset:function(){for(var x=this._key,y=x.words,w=[],E=0;E<56;E++){var P=h[E]-1;w[E]=y[P>>>5]>>>31-P%32&1}for(var I=this._subKeys=[],R=0;R<16;R++){for(var N=I[R]=[],D=p[R],E=0;E<24;E++)N[E/6|0]|=w[(d[E]-1+D)%28]<<31-E%6,N[4+(E/6|0)]|=w[28+(d[E+24]-1+D)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var k=this._invSubKeys=[],E=0;E<16;E++)k[E]=I[15-E]},encryptBlock:function(x,y){this._doCryptBlock(x,y,this._subKeys)},decryptBlock:function(x,y){this._doCryptBlock(x,y,this._invSubKeys)},_doCryptBlock:function(x,y,w){this._lBlock=x[y],this._rBlock=x[y+1],v.call(this,4,252645135),v.call(this,16,65535),_.call(this,2,858993459),_.call(this,8,16711935),v.call(this,1,1431655765);for(var E=0;E<16;E++){for(var P=w[E],I=this._lBlock,R=this._rBlock,N=0,D=0;D<8;D++)N|=c[D][((R^P[D])&f[D])>>>0];this._lBlock=R,this._rBlock=I^N}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,v.call(this,1,1431655765),_.call(this,8,16711935),_.call(this,2,858993459),v.call(this,16,65535),v.call(this,4,252645135),x[y]=this._lBlock,x[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function v(x,y){var w=(this._lBlock>>>x^this._rBlock)&y;this._rBlock^=w,this._lBlock^=w<<x}function _(x,y){var w=(this._rBlock>>>x^this._lBlock)&y;this._lBlock^=w,this._rBlock^=w<<x}n.DES=o._createHelper(m);var T=a.TripleDES=o.extend({_doReset:function(){var x=this._key,y=x.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=y.slice(0,2),E=y.length<4?y.slice(0,2):y.slice(2,4),P=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=m.createEncryptor(s.create(w)),this._des2=m.createEncryptor(s.create(E)),this._des3=m.createEncryptor(s.create(P))},encryptBlock:function(x,y){this._des1.encryptBlock(x,y),this._des2.decryptBlock(x,y),this._des3.encryptBlock(x,y)},decryptBlock:function(x,y){this._des3.decryptBlock(x,y),this._des2.encryptBlock(x,y),this._des1.decryptBlock(x,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=o._createHelper(T)}(),r.TripleDES})}(Vm)),Vm.exports}var Xm={exports:{}},rw;function xD(){return rw||(rw=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),rl(),nl(),Oo(),ir())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=o.RC4=s.extend({_doReset:function(){for(var p=this._key,c=p.words,f=p.sigBytes,m=this._S=[],v=0;v<256;v++)m[v]=v;for(var v=0,_=0;v<256;v++){var T=v%f,x=c[T>>>2]>>>24-T%4*8&255;_=(_+m[v]+x)%256;var y=m[v];m[v]=m[_],m[_]=y}this._i=this._j=0},_doProcessBlock:function(p,c){p[c]^=h.call(this)},keySize:256/32,ivSize:0});function h(){for(var p=this._S,c=this._i,f=this._j,m=0,v=0;v<4;v++){c=(c+1)%256,f=(f+p[c])%256;var _=p[c];p[c]=p[f],p[f]=_,m|=p[(p[c]+p[f])%256]<<24-v*8}return this._i=c,this._j=f,m}n.RC4=s._createHelper(a);var d=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var p=this.cfg.drop;p>0;p--)h.call(this)}});n.RC4Drop=s._createHelper(d)}(),r.RC4})}(Xm)),Xm.exports}var Ym={exports:{}},nw;function yD(){return nw||(nw=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),rl(),nl(),Oo(),ir())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],h=[],d=[],p=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,m=this.cfg.iv,v=0;v<4;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;var _=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],T=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var v=0;v<4;v++)c.call(this);for(var v=0;v<8;v++)T[v]^=_[v+4&7];if(m){var x=m.words,y=x[0],w=x[1],E=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,I=E>>>16|P&4294901760,R=P<<16|E&65535;T[0]^=E,T[1]^=I,T[2]^=P,T[3]^=R,T[4]^=E,T[5]^=I,T[6]^=P,T[7]^=R;for(var v=0;v<4;v++)c.call(this)}},_doProcessBlock:function(f,m){var v=this._X;c.call(this),a[0]=v[0]^v[5]>>>16^v[3]<<16,a[1]=v[2]^v[7]>>>16^v[5]<<16,a[2]=v[4]^v[1]>>>16^v[7]<<16,a[3]=v[6]^v[3]>>>16^v[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,f[m+_]^=a[_]},blockSize:128/32,ivSize:64/32});function c(){for(var f=this._X,m=this._C,v=0;v<8;v++)h[v]=m[v];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<h[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<h[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<h[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<h[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<h[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<h[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<h[6]>>>0?1:0)|0,this._b=m[7]>>>0<h[7]>>>0?1:0;for(var v=0;v<8;v++){var _=f[v]+m[v],T=_&65535,x=_>>>16,y=((T*T>>>17)+T*x>>>15)+x*x,w=((_&4294901760)*_|0)+((_&65535)*_|0);d[v]=y^w}f[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,f[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,f[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,f[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,f[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,f[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,f[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,f[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.Rabbit=s._createHelper(p)}(),r.Rabbit})}(Ym)),Ym.exports}var Km={exports:{}},iw;function _D(){return iw||(iw=1,function(e,t){(function(r,n,i){e.exports=n(Ve(),rl(),nl(),Oo(),ir())})(Ne,function(r){return function(){var n=r,i=n.lib,s=i.StreamCipher,o=n.algo,a=[],h=[],d=[],p=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,m=this.cfg.iv,v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],_=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var T=0;T<4;T++)c.call(this);for(var T=0;T<8;T++)_[T]^=v[T+4&7];if(m){var x=m.words,y=x[0],w=x[1],E=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,P=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,I=E>>>16|P&4294901760,R=P<<16|E&65535;_[0]^=E,_[1]^=I,_[2]^=P,_[3]^=R,_[4]^=E,_[5]^=I,_[6]^=P,_[7]^=R;for(var T=0;T<4;T++)c.call(this)}},_doProcessBlock:function(f,m){var v=this._X;c.call(this),a[0]=v[0]^v[5]>>>16^v[3]<<16,a[1]=v[2]^v[7]>>>16^v[5]<<16,a[2]=v[4]^v[1]>>>16^v[7]<<16,a[3]=v[6]^v[3]>>>16^v[1]<<16;for(var _=0;_<4;_++)a[_]=(a[_]<<8|a[_]>>>24)&16711935|(a[_]<<24|a[_]>>>8)&4278255360,f[m+_]^=a[_]},blockSize:128/32,ivSize:64/32});function c(){for(var f=this._X,m=this._C,v=0;v<8;v++)h[v]=m[v];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<h[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<h[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<h[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<h[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<h[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<h[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<h[6]>>>0?1:0)|0,this._b=m[7]>>>0<h[7]>>>0?1:0;for(var v=0;v<8;v++){var _=f[v]+m[v],T=_&65535,x=_>>>16,y=((T*T>>>17)+T*x>>>15)+x*x,w=((_&4294901760)*_|0)+((_&65535)*_|0);d[v]=y^w}f[0]=d[0]+(d[7]<<16|d[7]>>>16)+(d[6]<<16|d[6]>>>16)|0,f[1]=d[1]+(d[0]<<8|d[0]>>>24)+d[7]|0,f[2]=d[2]+(d[1]<<16|d[1]>>>16)+(d[0]<<16|d[0]>>>16)|0,f[3]=d[3]+(d[2]<<8|d[2]>>>24)+d[1]|0,f[4]=d[4]+(d[3]<<16|d[3]>>>16)+(d[2]<<16|d[2]>>>16)|0,f[5]=d[5]+(d[4]<<8|d[4]>>>24)+d[3]|0,f[6]=d[6]+(d[5]<<16|d[5]>>>16)+(d[4]<<16|d[4]>>>16)|0,f[7]=d[7]+(d[6]<<8|d[6]>>>24)+d[5]|0}n.RabbitLegacy=s._createHelper(p)}(),r.RabbitLegacy})}(Km)),Km.exports}(function(e,t){(function(r,n,i){e.exports=n(Ve(),Uf(),QN(),ZN(),rl(),JN(),nl(),V1(),wC(),eD(),SC(),tD(),rD(),nD(),X1(),iD(),Oo(),ir(),sD(),oD(),aD(),lD(),uD(),cD(),hD(),dD(),fD(),pD(),mD(),gD(),vD(),xD(),yD(),_D())})(Ne,function(r){return r})})(Si);new Audio;function qm(e,t){return Si.exports.SHA256(Si.exports.SHA256(Si.exports.SHA256(e+t**2)))}class zf{name;pass;pfpurl;boughtpack;unlockedsongs;cpu;ram;progression;readstory;partners;partnersexp;selectedpartner;constructor(){this.name="",this.pass="",this.pfpurl="",this.cpu=20,this.ram=200,this.progression=[],this.boughtpack=[],this.unlockedsongs=[],this.readstory=[],this.partners=[],this.partnersexp=["0,5210"],this.selectedpartner=0}save(){this.cpu=this.cpu,this.ram=this.ram,document.cookie="status=saved;",document.cookie=`name=${this.name};`;let t="";this.pass="123456789";let r="",n="",i="",s="";this.boughtpack.forEach(o=>{t+=o+"/"}),this.unlockedsongs.forEach(o=>{n+=o+"/"}),this.readstory.forEach(o=>{r+=o+"/"}),this.partners.forEach(o=>{i+=o+"/"}),this.partnersexp.forEach(o=>{s+=o+"/"}),document.cookie="data="+Si.exports.AES.encrypt(`pfp:${this.pfpurl},cpu:${qm(this.cpu.toString(),parseInt(this.pass))},ram:${qm(this.ram.toString(),parseInt(this.pass))},prog:${this.progression},bought:${t},unlock:${n},readstory:${r},selectedpartner:${qm(this.selectedpartner.toString(),parseInt(this.pass))},partners:${i},partnersexp:${s}`,this.pass).toString()}}const Qm=new Audio;class bD{audiovolume;gauge;audio;audioctx;hitlist;effectvolume;score;hitbonus;maxscore;hitwaitlist;combo;playStartTime;cursor;audiopath;editoractive;mode;isPlaying;key;currenttime;highestcombo;beatmap;maxcombo;notespeed;anomaly;WIDTH;duration;HEIGHT;chartoffset;inputoffset;mousedown;user;alert;constructor(){this.beatmap=null,this.key=["00","00","00","00","00"],this.audio=Qm,this.audiopath="",this.chartoffset=0,this.inputoffset=0,this.audiovolume=NaN,this.effectvolume=NaN,this.gauge=0,this.highestcombo=0,this.hitwaitlist=[],this.maxcombo=NaN,this.score=0,this.hitbonus=0,this.notespeed=0,this.anomaly="",this.maxscore=NaN,this.combo=0,this.user=new zf,this.duration=0,this.playStartTime=-1,this.isPlaying=!1,this.cursor=.5,this.mode="",this.currenttime=0,this.HEIGHT=T2(),this.WIDTH=S2(),this.hitlist=[],this.mousedown="",this.alert=["",0,0],this.editoractive=""}init(t,r,n,i,s,o,a,h,d){return this.audiovolume=t,this.effectvolume=r,this.audiopath=i,this.notespeed=a,this.maxscore=s,this.maxcombo=h,this.beatmap=o,this.user=d,Qm.src=i,this.audio=new mr.Howl({src:[i],preload:!0,volume:.1}),this}NOTE_TRAVEL_DURATION(){return ge/this.notespeed*1e3}NOTE_TRAVEL_FROM_LINE_TO_BOTTOM_DURATION(){return De/this.notespeed*1e3}currentTime(){return this.audio.currentTime}async miss(t,r){this.hitlist.find(n=>n.startsWith(t.toString()+r.toString()))==null&&(this.gauge=Math.round(this.gauge*.8),this.combo=0,this.hitlist.push(t.toString()+","+r.toString()+",misslost"),dm(this.currenttime,"miss",0))}async hit(t,r,n,i){this.hitlist.find(s=>s.startsWith(r.toString()+","+n.toString()))==null&&(t!="miss"?(this.gauge+=5,this.gauge>100&&(this.gauge=100),this.score+=this.idtoscore(t),this.combo+=1,this.combo>this.highestcombo&&(this.highestcombo=this.combo),dm(r,t,i)):(this.gauge=Math.round(this.gauge*.9),this.combo=0,dm(r,"bad",i)),n!=5&&(this.key[n-1]="01"),this.hitlist.push(r.toString()+","+n.toString()+","+t))}getsize(){this.WIDTH=S2(),this.HEIGHT=T2()}play(t){this.score=0,this.combo=0,this.hitlist=[],this.mode=t,this.isPlaying=!0,this.mode=="play"?(this.audio.play(),this.playStartTime=Date.now()):this.playStartTime=Date.now()}retry(){this.isPlaying=!0,this.score=0,this.combo=0,this.playStartTime=Date.now(),this.audio.seek(0),this.hitlist=[],this.audio.stop(),this.audio.off(),Hf(this.user)}quit(){this.isPlaying=!1,this.score=0,this.combo=0,this.playStartTime=0,this.hitlist=[]}idtoscore(t){switch(t){case"perfect":return 100;case"great":return 80;case"good":return 60;case"ok":return 50;default:return 0}}setAudioPath(t){this.audiopath=t}setVolume(t){Qm.volume=t}setEffectVolume(t){this.effectvolume=t}}const wD="/assets/play.605c0571.wav";function oo(e,t){const r=6e4/t;return Math.floor(r/e)}function sw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function hr(e,t){return JSON.parse(e)}function TC(e,t){const r=ge*(parseFloat(sw("SCROLL_SPEED_FACTOR"))/3)/1980,n=parseFloat(sw("OFFSET")),i=JSON.parse(e),{audioPath:s,metadata:o,hitObjects:a,timingPoints:h,cursor:d,speedChanges:p}=i,c=typeof s=="string",f=typeof o.title=="string"&&typeof o.artist=="string"&&typeof o.creator=="string"&&typeof o.difficult=="string",m=Array.isArray(h)&&h.length>0&&h.every(({time:x,bpm:y,meter:w})=>typeof x=="number"&&typeof y=="number"&&typeof w=="number");h.forEach(x=>{x.speed*=r});let v=0;h.forEach((x,y)=>{const w=y==0?v:h[y-1].floorPosition,E=y==0?1:h[y-1].speed,P=y==0?1*0:h[y-1].time;h[y].floorPosition=w+E*(h[y].time-P)});const _=Array.isArray(a)&&a.length>0&&a.every(({type:x,column:y,startTime:w,endTime:E})=>["note","hold"].includes(x)&&typeof y=="number"&&typeof w=="number"&&(E!=null?typeof E=="number":!0));if(!(c&&f&&m&&_))throw new Error("Invalid beatmap");return i.timingPoints.forEach(x=>{x.time=x.time+n}),i.timingPoints=i.timingPoints.sort((x,y)=>x.time-y.time),i.hitObjects.forEach(x=>{if(x.startTime=x.startTime+n,x.endTime&&(x.endTime=x.endTime+n),x.type=="note"){let D=ge,k=0,M=h.filter((z,F)=>x.startTime>=z.time).sort((z,F)=>z.time-F.time).reverse();M.forEach((z,F)=>{if(D>0&&M[F+1]!=null){const U=M[F+1].time,Y=z.time;D-At(U,Y,i.timingPoints)>=0?(k+=Y-U,D-=At(U,Y,i.timingPoints),console.log(D)):(k+=hm(x.startTime-k,M.reverse(),D),D=0)}else D>0&&M[F+1]==null&&(k+=D/z.speed,D=0)}),x.screenStartTime=x.startTime-k,x.screenEndTime=x.startTime}if(x.type=="hold"){const D=i.timingPoints.find(F=>x.startTime>=F.time);x.ticks=[];for(let F=0;F<Math.floor((x.endTime-(x.startTime+oo(4,D?.bpm)))/oo(4,D?.bpm));F++)x.ticks.push(x.startTime+oo(4,D?.bpm)*(F+1));let k=ge+At(x.startTime,x.endTime,i.timingPoints),M=0,z=h.filter((F,U)=>{if(U+1==h.length)return x.startTime>=F.time||x.endTime>=F.time;const Y=h[U+1].time;return x.startTime>=F.time&&x.startTime<=Y||x.endTime>=F.time&&x.endTime<=Y}).sort((F,U)=>F.time-U.time).reverse();z.forEach((F,U)=>{if(k>0&&z[U+1]!=null){const Y=z[U+1].time,J=F.time;k-At(Y,J,i.timingPoints)>=0?(M+=J-Y,k-=At(Y,J,i.timingPoints)):(M+=hm(x.startTime-M,z.reverse(),k),k=0)}else k>0&&z[U+1]==null&&(M+=k/F.speed,k=0)}),x.screenStartTime=x.startTime-M,x.screenEndTime=x.endTime}const y=x.screenStartTime,w=x.screenEndTime;x.scrollPosList=[],x.scrollPosList.find(D=>D[0]==y)==null&&x.scrollPosList?.push([y,At(y,x.startTime,i.timingPoints)]);let E=h.sort((D,k)=>D.time-k.time).filter((D,k)=>y>=D.time||w>=D.time);if(E.length==0||E[0].time>y){const D=E.length==0?y:E[0].time;x.scrollPosList?.push([D,At(D,x.startTime,i.timingPoints)])}E.forEach((D,k)=>{const M=k+1!=E.length&&E[k+1].time<=w?E[k+1].time:w;D.time<y||D.time,x.scrollPosList?.push([M,At(M,x.startTime,i.timingPoints)])}),x.scrollPosList.find(D=>D[0]==w)==null&&x.scrollPosList?.push([w,At(w,x.startTime,i.timingPoints)]),x.scrollPosList?.forEach((D,k)=>{if(x.scrollPosList[k][1]>ge&&x.scrollPosList[k+1]!=null){qa(i.timingPoints.sort((z,F)=>z.time-F.time),x.scrollPosList[k][0]);const M=Xt(ge,[x.scrollPosList[k+1][1],x.scrollPosList[k][1]],[x.scrollPosList[k+1][0],x.scrollPosList[k][0]]);x.scrollPosList[k]=[M,ge],x.screenStartTime=M}});let P=0,I=At(w,x.startTime,i.timingPoints),R=h.filter((D,k)=>w>=D.time).sort((D,k)=>D.time-k.time).reverse();const N=R[0]!=null?R[0].speed:r;P=De/N,x.scrollPosList?.push([w+De/N,I-De]),x.screenEndTime+=P}),i.cursor.forEach(x=>{x.startTime=x.startTime+=n}),i.timingPoints=i.timingPoints.sort((x,y)=>x.time-y.time),i.cursor.sort((x,y)=>x.startTime-y.startTime).forEach((x,y)=>{const w=i.timingPoints.sort((Y,J)=>Y.time-J.time),E=i.cursor.sort((Y,J)=>Y.startTime-J.startTime)[y+1]!=null?i.cursor.sort((Y,J)=>Y.startTime-J.startTime)[y+1].startTime:i.hitObjects.sort((Y,J)=>{const Q=Y.endTime!=null?Y.endTime:Y.startTime,O=J.endTime!=null?J.endTime:J.startTime;return Q-O}).reverse()[0].screenEndTime+1e3,P=i.timingPoints.find(Y=>x.startTime>=Y.time);x.ticks=[];for(let Y=0;Y<Math.floor((E-(x.startTime+oo(4,P?.bpm)))/oo(8,P?.bpm));Y++)x.startTime+oo(4,P?.bpm)*(Y+1)<=E&&x.ticks.push(x.startTime+oo(4,P?.bpm)*(Y+1));x.endTime=E;let I=ge+At(x.startTime,x.endTime,i.timingPoints)+Hi,R=0;R+=hm(x.startTime,i.timingPoints.sort((Y,J)=>Y.time-J.time),I),x.screenStartTime=x.startTime-R,x.screenEndTime=E;const N=x.screenStartTime,D=x.screenEndTime;x.scrollPosList=[],x.scrollPosList.push([N,At(N,x.startTime,i.timingPoints)]);let k=w.sort((Y,J)=>Y.time-J.time).filter((Y,J)=>N>=Y.time||D>=Y.time);(k.length==0||k[0].time>N)&&(k.length==0||k[0].time,x.scrollPosList?.push([0,At(0,x.startTime,i.timingPoints)])),k.forEach((Y,J)=>{const Q=J+1!=k.length&&k[J+1].time<=D?k[J+1].time:D;Y.time<N||Y.time,x.scrollPosList?.push([Q,At(Q,x.startTime,i.timingPoints)])}),x.scrollPosList.find(Y=>Y[0]==D)==null&&x.scrollPosList?.push([D,At(D,x.startTime,i.timingPoints)]),x.scrollPosList?.forEach((Y,J)=>{if(x.scrollPosList[J][1]>ge&&x.scrollPosList[J+1]!=null){qa(i.timingPoints.sort((O,L)=>O.time-L.time),x.scrollPosList[J][0]);const Q=Xt(ge,[x.scrollPosList[J+1][1],x.scrollPosList[J][1]],[x.scrollPosList[J+1][0],x.scrollPosList[J][0]]);x.scrollPosList[J]=[Q,ge],x.screenStartTime=Q}});let M=0,z=At(D,x.startTime,i.timingPoints),F=w.filter((Y,J)=>D>=Y.time).sort((Y,J)=>Y.time-J.time).reverse();const U=F[0]!=null?F[0].speed:r;M=De/U,x.scrollPosList?.push([D+De/U,z-De]),x.screenEndTime+=M}),i.hitObjects.sort((x,y)=>{const w=x.endTime!=null?x.endTime:x.startTime,E=y.endTime!=null?y.endTime:y.startTime;return w-E}),i.cursor=i.cursor.sort((x,y)=>x.startTime-y.startTime),i}async function Bi(e,t,r){const i=await(await fetch(`./songs/${r}/${e}/${e}_${t}.json`)).json(),s=hr(JSON.stringify(i)),a=await(await fetch("./songs/difficulty.json")).json(),d=await(await fetch("./songs/cc.json")).json();return s.metadata.difficult=a[s.id],s.metadata.difficultcc=parseInt(d[s.id]),s}let se={utopia:{name:"HELLO_World!!",chapter:1,description:`One boy\u2019s journey reflects through  the NEODITRONIX.SYS:VER=UTOPIA
..Or perhaps two.`,banner:"banners/utopia.jpg",price:5,pack:{starrydream:{customtitle:!1,unlocktype:"none",charts:{Lite:{chart:await Bi("starrydream","LI","utopia")},Neon:{chart:await Bi("starrydream","NE","utopia")},Enigma:{chart:await Bi("starrydream","EN","utopia")}}},sawasdee:{unlocktype:"none",customtitle:!1,unlock:"10 RAM",charts:{Lite:{chart:await Bi("sawasdee","LI","utopia")},Neon:{chart:await Bi("sawasdee","NE","utopia")},Enigma:{chart:await Bi("sawasdee","EN","utopia")}}}}},eden:{name:"Eden",chapter:0,description:"I\u2019m no longer in control, let that paper guide your own way.",banner:"banners/eden.jpg",price:5,pack:{stellify:{customtitle:!1,unlock:"10 CPU",unlocktype:"none",charts:{Lite:{chart:await Bi("stellify","LI","eden")},Neon:{chart:await Bi("stellify","NE","eden")},Enigma:{chart:await Bi("stellify","EN","eden")}}}}}};var EC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ow=Xr.createContext&&Xr.createContext(EC),Ds=globalThis&&globalThis.__assign||function(){return Ds=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ds.apply(this,arguments)},SD=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function CC(e){return e&&e.map(function(t,r){return Xr.createElement(t.tag,Ds({key:r},t.attr),CC(t.child))})}function xn(e){return function(t){return A(TD,{...Ds({attr:Ds({},e.attr)},t),children:CC(e.child)})}}function TD(e){var t=function(r){var n=e.attr,i=e.size,s=e.title,o=SD(e,["attr","size","title"]),a=i||r.size||"1em",h;return r.className&&(h=r.className),e.className&&(h=(h?h+" ":"")+e.className),W("svg",{...Ds({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:h,style:Ds(Ds({color:e.color||r.color},r.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[s&&A("title",{children:s}),e.children]})};return ow!==void 0?A(ow.Consumer,{children:function(r){return t(r)}}):t(EC)}function ED(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z"}}]})(e)}function CD(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.469 332.802l29.863 29.864L352 256 245.332 149.333l-29.863 29.865 55.469 55.469H64v42.666h205.864l-54.395 55.469zM405.334 64H106.666C83.198 64 64 83.198 64 106.666V192h42.666v-85.333h298.668v298.668H106.666V320H64v85.334C64 428.802 83.198 448 106.666 448h298.668C428.802 448 448 428.802 448 405.334V106.666C448 83.198 428.802 64 405.334 64z"}}]})(e)}class Zm{id;cpurate;ramrate;name;subname;imagesrc;background;skilltype;skilldescription;constructor(){this.cpurate=0,this.ramrate=0,this.name="",this.imagesrc="",this.subname="",this.id="",this.background="",this.skilltype=0,this.skilldescription=""}init(t,r,n,i,s,o,a,h,d){return this.id=t,this.background=d,this.cpurate=r,this.ramrate=n,this.name=i,this.subname=s,this.imagesrc=o,this.skilltype=a,this.skilldescription=h,this}}const rt={data:[new Zm().init("shiro2",1,1,"Shiro","The First","Partners/Shiro.png",1,"Normal Play","utopia_2"),new Zm().init("shiro",1,1.2,"Shiro","Legacy","Partners/Shiro2.png",1,"Normal Play","utopia_space"),new Zm().init("rei",1.2,1,"Rei","STELLIFY","Partners/Rei.png",1,"Normal Play","eden_stellify")]},aw={Shiro:"\u0E0A\u0E34\u0E42\u0E23\u0E30",Rei:"\u0E40\u0E23\u0E22\u0E4C"};function lw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function AD(e){const[t,r]=V.exports.useState(e.user.selectedpartner),[n,i]=V.exports.useState("partner-img partner-img-animation"),[s,o]=V.exports.useState("partner-display partner-display-animation");return e.user,e.user.partnersexp.find((a,h)=>{if(a.startsWith(`${e.user.selectedpartner}`))return!0}),W(Me,{children:[W("div",{className:"optionsmenu-container",children:[A("h1",{children:"Buddy Select!"}),A("div",{className:"optionsmenu-partners-select-list",children:e.user.partners.map((a,h)=>W("div",{className:h==t?"partners-select partners-select-selected":"partners-select",onClick:()=>{i("partner-img"),o("partner-display"),setTimeout(()=>{e.user.selectedpartner=h,document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").src=rt.data[e.user.partners[h]].imagesrc),document.getElementById("storymenu-chapter-banner")!=null&&(document.getElementById("storymenu-chapter-banner").src=`BG/${rt.data[e.user.partners[e.user.selectedpartner]].background}.jpg`),i("partner-img partner-img-animation"),o("partner-display partner-display-animation"),r(h)},10)},children:[A("img",{src:rt.data[a].imagesrc,className:"partners-select-icon"}),A("span",{className:"partners-select-name",children:lw("LANG")=="TH"?aw[rt.data[a].name]:rt.data[a].name})]},h))})]}),A("img",{className:n,src:rt.data[e.user.partners[t]].imagesrc}),W("div",{className:s,children:[rt.data[e.user.partners[t]].subname!=""?A("span",{className:"partner-display-subname",children:rt.data[e.user.partners[t]].subname}):null,A("span",{className:"partner-display-name",children:lw("LANG")=="TH"?aw[rt.data[e.user.partners[t]].name]:rt.data[e.user.partners[t]].name}),A("span",{className:"partner-display-description",children:rt.data[e.user.partners[t]].skilldescription}),A("br",{}),W("span",{className:"partner-display-description2",children:["RAM BONUS : ",W("b",{children:[rt.data[e.user.partners[t]].ramrate,"x"]})]}),W("span",{className:"partner-display-description2",children:["CPU BONUS : ",W("b",{children:[rt.data[e.user.partners[t]].cpurate,"x"]})]}),A("br",{})]})]})}function kD(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm62.63 304L296 374.63 177.37 256 296 137.37 318.63 160l-96 96z"}}]})(e)}new Audio;function un(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function PD(e){e.user;let[t,r]=V.exports.useState(un("COL_1_KEY")),[n,i]=V.exports.useState(un("COL_2_KEY")),[s,o]=V.exports.useState(un("COL_3_KEY")),[a,h]=V.exports.useState(un("COL_4_KEY")),[d,p]=V.exports.useState(un("CURSOR_LEFT_KEY")),[c,f]=V.exports.useState(un("CURSOR_RIGHT_KEY")),[m,v]=V.exports.useState(un("COL_1_KEY2")),[_,T]=V.exports.useState(un("COL_2_KEY2")),[x,y]=V.exports.useState(un("COL_3_KEY2")),[w,E]=V.exports.useState(un("COL_4_KEY2")),[P,I]=V.exports.useState(un("CURSOR_LEFT_KEY2")),[R,N]=V.exports.useState(un("CURSOR_RIGHT_KEY2")),[D,k]=V.exports.useState("");return V.exports.useEffect(()=>{const M=z=>{k(z.code)};return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}}),A(Me,{children:W("div",{className:"optionsmenu-container",children:[A("h1",{children:"Keybind Control"}),W("div",{className:"optionsmenu-keys",children:[W("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"LC Input"}),A("input",{type:"text",value:d,onChange:M=>{p(D),document.cookie=`CURSOR_LEFT_KEY=${D};`}})]}),W("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"RC Input"}),A("input",{type:"text",value:c,onChange:M=>{f(D),document.cookie=`CURSOR_RIGHT_KEY=${D};`}})]})]}),W("div",{className:"optionsmenu-keys",children:[W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:t,onChange:M=>{r(D),document.cookie=`COL_1_KEY=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"1st Lane"})]}),W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:n,onChange:M=>{i(D),document.cookie=`COL_2_KEY=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"2nd Lane"})]}),W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:s,onChange:M=>{o(D),document.cookie=`COL_3_KEY=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"3rd Lane"})]}),W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:a,onChange:M=>{h(D),document.cookie=`COL_4_KEY=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"4th Lane"})]})]}),A("hr",{}),A("h1",{children:"Alternate Keybind Control"}),W("div",{className:"optionsmenu-keys",children:[W("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"LC Input"}),A("input",{type:"text",value:P,onChange:M=>{I(D),document.cookie=`CURSOR_LEFT_KEY2=${D};`}})]}),W("div",{className:"optionsmenu-key",children:[A("span",{className:"optionsmenu-key-text",children:"RC Input"}),A("input",{type:"text",value:R,onChange:M=>{N(D),document.cookie=`CURSOR_RIGHT_KEY2=${D};`}})]})]}),W("div",{className:"optionsmenu-keys",children:[W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:m,onChange:M=>{v(D),document.cookie=`COL_1_KEY2=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"1st Lane"})]}),W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:_,onChange:M=>{T(D),document.cookie=`COL_2_KEY2=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"2nd Lane"})]}),W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:x,onChange:M=>{y(D),document.cookie=`COL_3_KEY2=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"3rd Lane"})]}),W("div",{className:"optionsmenu-key",children:[A("input",{type:"text",value:w,onChange:M=>{E(D),document.cookie=`COL_4_KEY2=${D};`}}),A("span",{className:"optionsmenu-key-text",children:"4th Lane"})]})]}),A("hr",{}),A("div",{className:"optionsmenu-list",children:A("div",{className:"optionsmenu-list-name",children:"Tips"})}),A("div",{className:"optionsmenu-list",children:A("div",{className:"optionsmenu-list-name",children:"It is recommend to use a keybind where all the keys are close together (like the default keybind that I gave you!), every charts is designed to be played with this playstyle!"})})]})})}new Audio;function Hl(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function ID(e){e.user;let[t,r]=V.exports.useState(Hl("SCROLL_SPEED_FACTOR")),[n,i]=V.exports.useState(Hl("OFFSET")),[s,o]=V.exports.useState(Hl("BACKGROUND_DIM"));V.exports.useState(Hl("INPUTOFFSET"));let[a,h]=V.exports.useState(Hl("TOGGLECOLOR"));return A(Me,{children:W("div",{className:"optionsmenu-container",children:[A("h1",{children:"Gameplay Settings"}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Offset"}),A("input",{type:"number",className:"optionsmenu-list-name",value:n,onChange:d=>{i(d.target.value),document.cookie=`OFFSET=${d.target.value};`}})]}),A("div",{className:"optionsmenu-list",children:A("small",{children:" * If you get EARLY judgement, reduce offset according to the number specified in the LATE/EARLY judgements."})}),A("div",{className:"optionsmenu-list",children:A("small",{children:" * If you get LATE judgement, increse offset according to the number specified in the LATE/EARLY judgements."})}),A("hr",{}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Scroll Speed"}),A("input",{type:"number",className:"optionsmenu-list-name",value:t,onChange:d=>{r(d.target.value),document.cookie=`SCROLL_SPEED_FACTOR=${d.target.value};`}})]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Bacckground Brightness"}),A("input",{type:"number",className:"optionsmenu-list-name",value:s,onChange:d=>{o(d.target.value),document.cookie=`BACKGROUND_DIM=${d.target.value};`}})]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Toggle Lane Coloring"}),W("select",{name:"",value:a,onChange:d=>{h(d.target.value),document.cookie=`TOGGLECOLOR=${d.target.value};`},className:"optionsmenu-list-name",children:[A("option",{value:"True",children:"True"}),A("option",{value:"False",children:"False"})]})]})]})})}new Audio;function RD(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function MD(e){e.user;let[t,r]=V.exports.useState(e.user.name),[n,i]=V.exports.useState(RD("TOGGLEDOWNLOAD"));return V.exports.useState(""),A(Me,{children:W("div",{className:"optionsmenu-container",children:[A("h1",{children:"User Settings"}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Username"}),A("input",{type:"text",className:"optionsmenu-list-name",value:t,onChange:s=>{e.user.name=s.target.value,r(e.user.name)}})]}),A("div",{className:"optionsmenu-list"}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Download all audios when launching the game"}),A("small",{children:"(Loading time will take longer, but the song select page will be smoother)"}),W("select",{name:"",value:n,onChange:s=>{i(s.target.value),document.cookie=`TOGGLECOLOR=${s.target.value};`},className:"optionsmenu-list-name",children:[A("option",{value:"True",children:"True"}),A("option",{value:"",children:"False"})]})]})]})})}new Audio;function ND(e){return A(Me,{children:W("div",{className:"optionsmenu-container",children:[A("h1",{children:"Credits"}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"A game by"})," log() / ohm002"]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Additional Music"}),"encX, Vizunave"]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Programming Help"})," Smug Nanachi, 0thElement"]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Programming Help"})," Marvin (minetoblend)"]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Music Scouting"}),"blazin"]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Additional Graphic Design"})," 0ppInOsu"]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Testplayer"})," You!"]}),A("h1",{children:"Socials"}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Discord Server"}),"  ",A("a",{href:"https://discord.gg/PB7JNFEUhq",children:"Discord Invite Link"})]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Twitter"})," ",A("a",{href:"https://twitter.com/neuroditronix",children:"Twitter Link"})]}),W("div",{className:"optionsmenu-list",children:[A("b",{children:"Sound Effects"})," ",A("a",{href:"https://freesound.org/people/THe_TooTHPaSTe_VaMPiReS/sounds/511493/",children:"Ambient Space Noise 1 (30bpm 6m 24s) by THe_TooTHPaSTe_VaMPiReS from freesound.org"})]})]})})}new Audio;function Ju(e){const[t,r]=V.exports.useState("none"),[n,i]=V.exports.useState("0"),[s,o]=V.exports.useState("buddy"),[a,h]=V.exports.useState(0);V.exports.useState(e.user.selectedpartner),document.documentElement.style.filter="invert(0)";let d=e.user;const p=()=>{d.save()};s=="buddy"&&n=="1"?document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").style.opacity=0):document.getElementById("partner-img-menu")!=null&&(document.getElementById("partner-img-menu").style.opacity=1);const c=()=>{t=="none"&&(r("auto"),i("1")),t=="auto"&&(r("none"),i("0"))};let f=0;return e.user.progression.sort((m,v)=>parseInt(m.split("-")[1])-parseInt(v.split("-")[1])).map((m,v)=>{v<30&&(f+=se[m.split("-")[0].split(".")[0]].pack[m.split("-")[0].split(".")[1]].charts[m.split("-")[0].split(".")[2]].chart.metadata.difficultcc*(parseFloat(m.split("-")[1])/100))}),f=Math.round(f/30*100)/100,W(Me,{children:[A("img",{src:`BG/${rt.data[e.user.partners[e.user.selectedpartner]].background}.jpg`,alt:"",className:"storymenu-chapter-banner",id:"storymenu-chapter-banner"}),W("div",{className:"navbar",children:[W("div",{className:"usercard",onClick:p,children:[A("img",{src:rt.data[e.user.partners[e.user.selectedpartner]].imagesrc,style:{objectFit:"cover"},className:"usercard-pfp"}),W("div",{className:"usercard-2ndcol",children:[W("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"USER"}),A("div",{className:"usercard-username",children:d.name})]}),W("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"RAM"}),A("div",{className:"usercard-username",children:d.ram})]}),W("div",{className:"usercard-usernamecard",children:[A("div",{className:"usercard-user",children:"CPU"}),A("div",{className:"usercard-username",children:d.cpu})]}),A("div",{className:"usercard-gradingcontainer",children:W("div",{className:"usercard-grading",children:[A("div",{className:"usercard-gradingtext",children:"GRADING"}),A("div",{className:"usercard-gradingval",children:f})]})}),A("div",{className:"usercard-usernamecard",children:W("div",{className:"navbar-button",onClick:c,children:[A(ED,{})," Options"]})})]})]}),A("div",{className:"navbarheader",children:e.display})]}),W("div",{className:"optionsmenu",style:{pointerEvents:t,opacity:n,transitionDuration:"0.1s"},children:[s=="buddy"?A(AD,{user:e.user}):s=="gameplay"?A(ID,{user:e.user}):s=="user"?A(MD,{user:e.user}):s=="credits"?A(ND,{user:e.user}):s=="key"?A(PD,{user:e.user}):null,W("div",{className:"navbar-back",onClick:c,children:[A(kD,{})," Back"]}),W("div",{className:"optionsmenu-navbar",children:[A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{o("buddy"),h(Math.round(Math.random()*100))},style:{opacity:s=="buddy"?1:.5,transitionDuration:"0.5s"},children:"Buddy Select!"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("key")},style:{opacity:s=="key"?1:.5,transitionDuration:"0.5s"},children:"Keybind Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("gameplay")},style:{opacity:s=="gameplay"?1:.5,transitionDuration:"0.5s"},children:"Gameplay Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("user")},style:{opacity:s=="user"?1:.5,transitionDuration:"0.5s"},children:"Profile Setting"}),A("div",{className:"optionsmenu-navbar-nav",onClick:()=>{h(Math.round(Math.random()*100)),o("credits")},style:{opacity:s=="credits"?1:.5,transitionDuration:"0.5s"},children:"Credits & Socials"})]})]})]})}function tu(e){return xn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304z"}},{tag:"path",attr:{d:"M232 840h560V536H232v304zm280-226a48.01 48.01 0 0 1 28 87v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 0 1 28-87z"}},{tag:"path",attr:{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 1 0-56 0z"}}]})(e)}const uw=[{type:"Partner",item:1,probability:30},{type:"Partner",item:2,probability:30},{type:"CPU",item:10,probability:10},{type:"CPU",item:12,probability:10},{type:"CPU",item:15,probability:10},{type:"CPU",item:5,probability:10}];function DD(e){const[t,r]=V.exports.useState(e.toggle),[n,i]=V.exports.useState(!1),[s,o]=V.exports.useState(0),a=V.exports.useRef(-1),[h,d]=V.exports.useState(""),p=()=>{let c=0;uw.forEach(v=>{c+=v.probability});let f=Math.random()*c,m;for(const v of uw.sort((_,T)=>_.probability-T.probability).reverse())if(f<v.probability){m=v;break}else f-=v.probability;setTimeout(()=>{d(m?.type),o(m?.item),m?.type=="Partner"&&(console.log(e.user.partners.find(v=>v==m?.item)),e.user.partners.find(v=>v==m?.item)!=null?(d("CPU"),o(0)):e.user.partners.push(m?.item),console.log(e.user.partners)),m?.type=="CPU"&&(e.user.cpu+=m?.item),i(!0)},500)};return V.exports.useEffect(()=>{document.addEventListener("keypress",c=>{c.key=="Enter"&&(i(!1),a.current!=-1&&a.current<=10&&(p(),a.current=a.current+1))})},[]),W(Me,{children:[W("div",{className:"gacha-container",style:{opacity:t?1:0,transitionDuration:"1s",pointerEvents:t?"inherit":"none",animation:t?"fadein 0.2s":"fadeout 0.2s"},children:[A("link",{rel:"stylesheet",href:"./chaptercss/BU/gacha.css"}),A("div",{className:"navbar-button",onClick:()=>{r(!1)},children:" Quit"}),A("br",{}),W("div",{children:[A("img",{src:"Gacha/1.jpeg",className:"gacha-event-banner",alt:""}),A("div",{className:"gacha-buys",children:W("div",{className:"gacha-buybutton",style:{opacity:e.user.ram>=100?1:.5,pointerEvents:e.user.ram>=100&&t?"auto":"none"},onClick:()=>{e.user.ram>=100&&(e.user.ram-=100),p()},children:[W("span",{className:"gacha-buydisplay",children:[A(tu,{})," Recover Data"]}),A("span",{children:"100 RAM"}),e.user.ram>=100?null:A("small",{children:"Inefficient Balance"})]})})]})]}),W("div",{className:`gacha-reward-container ${n?"gacha-reward-animation":""}`,onClick:()=>{i(!1),a.current!=-1&&a.current<=10&&(p(),a.current=a.current+1)},style:{pointerEvents:n?"inherit":"none",backgroundImage:"url(BG/utopia_space.jpg)"},children:[A("div",{className:"gacha-reward-container-eff"}),h=="CPU"?W(Me,{children:[A("h1",{children:"DATA RECOVERED"}),W("div",{className:"gacha-reward-cpu",children:[s," CPU"]})]}):null,h=="Partner"?W(Me,{children:[A("h1",{children:"New Buddy!"}),A("img",{src:rt.data[s].imagesrc,className:"gacha-reward-partner-img"}),W("div",{className:"gacha-reward-partner",children:[rt.data[s].subname!=""?A("span",{className:"partner-display-subname",children:rt.data[s].subname}):null,A("span",{className:"partner-display-name",children:rt.data[s].name}),A("span",{className:"partner-display-description",children:rt.data[s].skilldescription}),A("br",{}),W("span",{className:"partner-display-description2",children:["TEMPORARY DATA : ",W("b",{children:[rt.data[s].ramrate,"x"]})]}),W("span",{className:"partner-display-description2",children:["PROCESSING POWER : ",W("b",{children:[rt.data[s].cpurate,"x"]})]})]})]}):null]})]})}const Gl=new mr.Howl({src:["/BGM/2.ogg"],preload:!0,volume:.2,loop:!0});function LD(e){const[t,r]=V.exports.useState(!1),[n,i]=V.exports.useState(0),[s,o]=V.exports.useState(0);V.exports.useState("transition-off"),document.getElementById("transition").className="transition-off";const a=e.user,h=()=>{Gl.stop(),Hf(a)},d=()=>{Gl.stop(),sL(a)},p=()=>{Gl.stop(),nL(a)};return V.exports.useEffect(()=>{Gl.seek(0),Gl.play()},[]),W(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/BU/bu.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/gacha.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("div",{className:"currentlyplaying currentlyplaying-animation",children:"log() - NEODITRONIX.SYS:VER=UTOPIA"}),A(Ju,{user:a,display:"CHAPTER SELECT"}),W("div",{className:"display",id:"display",children:[A("img",{src:rt.data[e.user.partners[e.user.selectedpartner]].imagesrc,id:"partner-img-menu",className:"partner-img"}),W("div",{className:"mainmenubuttons",children:[W("div",{className:"mainmenubuttonscol animate__fadeInLeft animate__animated ",children:[A("img",{src:"./mainmenu/PLAY.jpg",onClick:h,className:"mainmenubuttons-play"}),A("img",{src:"./mainmenu/STORE.png",onClick:d,className:"mainmenubuttons-store"}),A("img",{src:"./mainmenu/GACHA.jpg",onClick:()=>{r(!0),i(Math.random())},className:"mainmenubuttons-settings"})]}),A("div",{className:"mainmenubuttonscol animate__fadeIn animate__animated ",children:A("img",{src:"./mainmenu/QUEST.jpg",onClick:p,className:"mainmenubuttons-quest"})})]})]}),A("div",{onClick:()=>{o(Math.random())},children:A(DD,{user:e.user,toggle:t},n)})]})}const BD="/assets/select.3effe8e5.wav",FD="/assets/selectdiff.e898ab90.wav";function OD(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8"}}]})(e)}function UD(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6,12.4 L18,12.4 M12.6,7 L18,12.4 L12.6,17.8",transform:"matrix(-1 0 0 1 24 0)"}}]})(e)}function Yh(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3,22.0000002 L21,12 L3,2 L3,22.0000002 Z M5,19 L17.5999998,11.9999999 L5,5 L5,19 Z M7,16 L14.1999999,12 L7,8 L7,16 Z M9,13 L10.8,12 L9,11 L9,13 Z"}}]})(e)}function zD(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15 12 5-4-5-4v2.999H2v2h13zm7 3H9v-3l-5 4 5 4v-3h13z"}}]})(e)}const HD=new mr.Howl({src:BD,preload:!0,volume:.3});new mr.Howl({src:FD,preload:!0,volume:.3});HD.volume=.05;let Pn=new mr.Howl({preload:!0,volume:.1,loop:!0});function $l(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function GD(e){const[t,r]=V.exports.useState(""),[n,i]=V.exports.useState(""),[s,o]=V.exports.useState(""),[a,h]=V.exports.useState("utopia"),[d,p]=V.exports.useState(""),[c,f]=V.exports.useState(""),[m,v]=V.exports.useState("");V.exports.useState("");const[_,T]=V.exports.useState("Lite"),[x,y]=V.exports.useState("hide"),[w,E]=V.exports.useState(!1),[P,I]=V.exports.useState("songjacketbgcolor-trigger"),[R,N]=V.exports.useState("songpreview-songmetadata-trigger"),[D,k]=V.exports.useState(!0);V.exports.useState(!1);const M=e.user;V.exports.useEffect(()=>{if(e.song!=null){console.log(e.song);let L=e.song.split(".")[0];r(L),h(L.split("/")[0]);const G=Object.keys(se[L].pack).filter(xe=>!(se[L].pack[xe].charts[_]==null||se[L].pack[xe].unlocktype=="quest"&&e.user.unlockedsongs.find(fe=>fe.startsWith(`${t}.${fe}`))==null))[0];G!=null?z(L+"/"+G):(i(""),o("")),L=e.song.split(".")[0]+"/"+e.song.split(".")[1],k(!1);try{Pn.stop()}catch{}h(L.split("/")[0]),y(""),p(L.split("/")[1]),console.log(d);const H=se[L.split("/")[0]].pack[L.split("/")[1]].charts[_].chart;se[L.split("/")[0]].pack[L.split("/")[1]].customtitle&&(H.metadata.title=$l(`${L.split("/")[0]}.${L.split("/")[1]}`),H.metadata.artist=e.user.name),I(""),N(""),setTimeout(()=>{I("songjacketbgcolor-trigger"),N("songpreview-songmetadata-trigger")},10),setTimeout(()=>{o(JSON.stringify(H)),i(L.split("/")[1])},100),se[L.split("/")[0]].pack[L.split("/")[1]].charts["EX-Enigma"]!=null?E(!0):E(!1);const j=H,Z=j.preview,K=6e4/qa(j.timingPoints,Z*1e3).bpm*16*4;Pn=new mr.Howl({src:[j.audioPath],sprite:{preview:[Z*1e3,K,!0]},preload:!0,volume:.1}),Pn.play("preview"),L!=null&&setTimeout(()=>{f(j.jacketPath)},10)}},[]);const z=L=>{try{Pn.stop()}catch{}h(L.split("/")[0]),y(""),p(L.split("/")[1]),console.log(d);const G=se[L.split("/")[0]].pack[L.split("/")[1]].charts[_].chart;se[L.split("/")[0]].pack[L.split("/")[1]].customtitle&&(G.metadata.title=$l(`${L.split("/")[0]}.${L.split("/")[1]}`),G.metadata.artist=e.user.name),I(""),N(""),setTimeout(()=>{I("songjacketbgcolor-trigger"),N("songpreview-songmetadata-trigger")},10),setTimeout(()=>{o(JSON.stringify(G)),i(L.split("/")[1])},100),se[L.split("/")[0]].pack[L.split("/")[1]].charts["EX-Enigma"]!=null?E(!0):E(!1);const H=G,j=H.preview,Z=6e4/qa(H.timingPoints,j*1e3).bpm*16*4;Pn=new mr.Howl({src:[H.audioPath],sprite:{preview:[j*1e3,Z,!0]},preload:!0,volume:.1}),Pn.play("preview"),L!=null&&setTimeout(()=>{f(H.jacketPath)},10)},F=L=>{Pn.volume=0;try{Pn.stop()}catch{}kC(TC(s,Pn.duration),M,"")},U=L=>{T(L);const G=se[a].pack[d].charts[L].chart;se[a].pack[d].customtitle&&(G.metadata.title=$l(`${a}.${d}`),G.metadata.artist=e.user.name),o(JSON.stringify(G)),f(se[a].pack[d].charts[L].chart.jacketPath)},Y=()=>{Pn.volume=0;try{Pn.stop()}catch{}Qa(e.user)},J=L=>{r(L),h(L.split("/")[0]);const G=Object.keys(se[L].pack).filter(H=>!(se[L].pack[H].charts[_]==null||se[L].pack[H].unlocktype=="quest"&&e.user.unlockedsongs.find(j=>j.startsWith(`${t}.${j}`))==null))[0];G!=null?z(L+"/"+G):(i(""),o("")),k(!1)},Q=L=>L<=50?"F":L<=80?"D":L<=90?"C":L<=92?"B":L<=94?"A":L<=96?"S":L<=98?"SS":L<=100?"SSS":"",O=L=>L<=50?"#d65e5e":L<=80?"#e665b0":L<=90?"#dd65e6":L<=92?"#9265e6":L<=94?"#6583e6":L<=96?"#65d7e6":L<=98?"#65e6b7":L<=100?"#dbe665":"";return W(Me,{children:[A("img",{src:"BG/overlay.png",className:"backgroundanim"}),A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:Y}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A(Ju,{user:M,display:"SONG SELECT"}),W("div",{className:"display animate__animated animate__fadeIn",style:{transitionDuration:"1s"},children:[W("div",{className:"difficulty-selector",children:[A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:"LI"}),A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:"NE"}),A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:"EN"})]}),A("div",{className:"songs "+m,children:A("div",{className:"songpack",children:W("div",{className:"songscontainer",children:[W("div",{className:"changepack",onClick:()=>{k(!0)},children:["Change Chapter",A(zD,{})]}),t!=""?A("div",{className:"current-chapter",children:A("img",{src:se[t].banner,className:"current-chapter-banner"})}):null,t=="sound"?W("div",{className:"songsubmission",children:[A("b",{children:"Sound Collection"}),` will be automatically unlocked for you to play for free. This is a pack where the songs are not related to the main story at all, which means this pack is not "My song only" exclusive. If you'd like to have your songs here, please enter this form!`,A("br",{}),A("br",{}),A("a",{href:"https://forms.gle/Pms7K9VACvteixQ5A",children:"Link to the form"})]}):t!=""?W("div",{className:"songsubmission",children:[A("b",{children:se[t].name})," ",A("br",{}),se[t].description]}):null,t!=""?Object.keys(se[t].pack).sort((L,G)=>{try{return se[t].pack[L].charts[_].chart.metadata.difficultcc-se[t].pack[G].charts[_].chart.metadata.difficultcc}catch{}}).map(L=>{if((se[t].pack[L].unlocktype!="quest"||se[t].pack[L].unlocktype=="quest"&&e.user.unlockedsongs.find(G=>G.startsWith(`${t}.${L}`))!=null)&&se[t].pack[L].charts[_]!=null)return W("div",{className:"song",onClick:()=>z(t+"/"+L),style:{border:n==L&&t==a?"rgb(255, 88, 191) 1px solid":"rgba(255, 88, 191, 0.5) 1px solid",filter:n==L&&t==a?"drop-shadow(rgb(255, 88, 191) 0 0 1svw)":"drop-shadow(0 0 0.5svw rgba(255, 26, 198, 0.5)",opacity:se[t].pack[L].unlocktype=="play"&&se[t].pack[L].unlock!=null&&e.user.progression.find(G=>G.startsWith(a+"."+se[t].pack[L].unlock))==null?.5:1},children:[A("img",{src:se[t].pack[L].charts[_].chart.jacketPath,className:"songdiffimg"}),se[t].pack[L].customtitle?$l(`${t}.${L}`):se[t].pack[L].charts[_].chart.metadata.title,A("br",{}),A("small",{className:"songdiffs",children:se[t].pack[L].customtitle?e.user.name:se[t].pack[L].charts[_].chart.metadata.artist}),A("div",{className:"songdiffdiffdisplay",id:_,children:se[t].pack[L].charts[_].chart.metadata.difficult}),A("div",{className:"songdiff-rank",style:{color:O(parseFloat(e.user.progression.find(G=>G.startsWith(se[t].pack[L].charts[_].chart.id.toString()))?.split("-")[1]))},children:A("span",{children:Q(parseFloat(e.user.progression.find(G=>G.startsWith(se[t].pack[L].charts[_].chart.id.toString()))?.split("-")[1]))})})]},L)}):null]})})}),A("div",{className:"songpreview split right "+R,children:s!=""?W(Me,{children:[" ",W("div",{children:[s!=""?A("img",{src:c,className:"songjacketbg",style:{opacity:e.user.boughtpack.find(L=>L==a)!=null?1:.6}}):null,e.user.boughtpack.find(L=>L==a)==null?A("span",{className:"songjacketbg-locked",children:"Not Purchased"}):null,s!=""?A("div",{className:"songjacketbgcolor "+P}):null]}),W("div",{className:"songpreview-songmetadata",children:[A("h1",{children:se[a].pack[d].customtitle?$l(`${a}.${d}`):s!=""?hr(s).metadata.title:null}),A("span",{children:se[a].pack[d].customtitle?e.user.name:s!=""?hr(s).metadata.artist:null}),W("span",{className:"songpreview-songmetadata-smaller",id:"illustrator",children:[A("p",{children:"Illustrator"}),A("p",{children:hr(s).metadata.illustrator})]}),e.user.progression.find(L=>L.startsWith(hr(s).id.toString()))!=null?A(Me,{children:W("span",{className:"songpreview-songmetadata-smaller",id:"highscore",children:[A("p",{children:"Highscore"}),W("p",{children:[e.user.progression.find(L=>L.startsWith(hr(s).id.toString()))?.split("-")[1],"%"]})]})}):null,A("div",{className:"songpreview-rank",style:{color:O(hr(s).id)},children:A("span",{children:Q(parseFloat(e.user.progression.find(L=>L.startsWith(hr(s).id.toString()))?.split("-")[1]))})})]}),A("div",{className:"diffselect",children:A("div",{className:"diffselects",style:{filter:_=="Lite"?"drop-shadow(rgba(170, 204, 255, 1) 0 0 1svw)":_=="Neon"?"drop-shadow(rgba(255, 170, 237, 1) 0 0 1svw)":_=="Enigma"?"drop-shadow(rgba(255, 170, 213, 1) 0 0 1svw)":"drop-shadow(rgba(255, 170, 170, 1) 0 0 1svw)"},children:e.user.boughtpack.find(L=>L==a)!=null?se[a].pack[d].unlocktype=="play"?se[a].pack[d].unlock!=null&&e.user.progression.find(L=>L.startsWith(a+"."+se[a].pack[d].unlock))!=null||se[a].pack[d].unlock==null?W(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),W("div",{onClick:F,className:"songtitlediff",children:[" ",A(Yh,{})]})]}):W(Me,{children:[" ",W("div",{className:"songlock",children:[A(tu,{})," Play"," ",se[a].pack[se[a].pack[d].unlock].charts.Lite.chart.metadata.title," ","to unlock."]})," "]}):se[a].pack[d].unlocktype=="quest"?A(Me,{children:e.user.unlockedsongs.find(L=>L.startsWith(`${hr(s).id.toString().split(".")[0]}.${hr(s).id.toString().split(".")[1]}`))!=null?W(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),W("div",{onClick:F,className:"songtitlediff",children:[" ",A(Yh,{})]})]}):W("div",{className:"songlock",children:[A(tu,{})," Unlocked in Quest Mode"]})}):se[a].pack[d].unlocktype=="pay"?A(Me,{children:e.user.unlockedsongs.find(L=>L.startsWith(`${hr(s).id.toString().split(".")[0]}.${hr(s).id.toString().split(".")[1]}`))!=null?W(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),W("div",{onClick:F,className:"songtitlediff",children:[" ",A(Yh,{})]})]}):A("div",{className:"songlock",children:W("div",{className:"buybutton",onClick:()=>{se[a].pack[d].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(se[a].pack[d].unlock?.split(" ")[0])&&(e.user.cpu-=parseInt(se[a].pack[d].unlock?.split(" ")[0]),e.user.unlockedsongs.push(`${hr(s).id.toString().split(".")[0]}.${hr(s).id.toString().split(".")[1]}`),z(t+"/"+d)),se[a].pack[d].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(se[a].pack[d].unlock?.split(" ")[0])&&(e.user.ram-=parseInt(se[a].pack[d].unlock?.split(" ")[0]),e.user.unlockedsongs.push(`${hr(s).id.toString().split(".")[0]}.${hr(s).id.toString().split(".")[1]}`),z(t+"/"+d)),e.user.save()},children:[W("span",{className:"buydisplay",style:{opacity:se[a].pack[d].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(se[a].pack[d].unlock?.split(" ")[0])||se[a].pack[d].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(se[a].pack[d].unlock?.split(" ")[0])?1:.5},children:[A(tu,{})," Purchase"]}),A("span",{children:se[a].pack[d].unlock}),se[a].pack[d].unlock?.endsWith("CPU")&&e.user.cpu>=parseInt(se[a].pack[d].unlock?.split(" ")[0])||se[a].pack[d].unlock?.endsWith("RAM")&&e.user.ram>=parseInt(se[a].pack[d].unlock?.split(" ")[0])?null:A("small",{children:"Inefficient Balance"})]})})}):W(Me,{children:[se[a].pack[d].charts.Lite==null?null:A("div",{style:{opacity:_=="Lite"?"1":"0.5"},id:"Lite",className:"songtitlediff",onClick:()=>U("Lite"),children:s!=""?se[a].pack[d].charts.Lite.chart.metadata.difficult:null}),se[a].pack[d].charts.Neon==null?null:A("div",{style:{opacity:_=="Neon"?"1":"0.5"},id:"Neon",className:"songtitlediff",onClick:()=>U("Neon"),children:s!=""?se[a].pack[d].charts.Neon.chart.metadata.difficult:null}),se[a].pack[d].charts.Enigma==null?null:A("div",{style:{opacity:_=="Enigma"?"1":"0.5"},id:"Enigma",className:"songtitlediff",onClick:()=>U("Enigma"),children:s!=""?se[a].pack[d].charts.Enigma.chart.metadata.difficult:null}),W("div",{onClick:F,className:"songtitlediff",children:[" ",A(Yh,{})]})]}):W("div",{className:"songlock",children:[A(tu,{})," Unlocked in Store"]})})})," "]}):null}),W("div",{className:"chapter-select",style:{opacity:D?"1":"0",transitionDuration:"1s",pointerEvents:D?"inherit":"none"},children:[A("div",{className:"chapter-select-header",children:"Chapter Select"}),A("div",{className:"chapter-select-list",children:Object.keys(se).map(L=>W("div",{className:"chapter-select-list-elements",style:{opacity:e.user.boughtpack.find(G=>G==L)!=null?1:.5},onClick:()=>J(L),children:[A("img",{src:se[L].banner,className:"chapter-select-list-elements-banner"}),se[L].name,W("small",{children:["Chapter ",se[L].chapter]})]},L))})]})]})]})}function AC(e){return xn({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 18V5l12-2v13"}},{tag:"circle",attr:{cx:"6",cy:"18",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"16",r:"3"}}]})(e)}let Bv,md;function $D(){Bv.state==="running"&&Bv.suspend().then(()=>{md&&(md.stop(),md.disconnect())})}function jD(e){let[t,r]=V.exports.useState(0);V.exports.useEffect(()=>{let s=new AudioContext,o="./BGM/store.wav",a,h,d;const p=c=>{a||(a=c),h=s.createBufferSource(),h.buffer=c,h.connect(d),h.loop=!0,h.start(0),d.gain.setValueAtTime(.1,s.currentTime)};Bv=s,fetch(o,{mode:"cors"}).then(function(c){return c.arrayBuffer()}).then(c=>{s.decodeAudioData(c,p),md=h,d=s.createGain(),d.connect(s.destination),p(a)})},[]),document.documentElement.style.filter="invert(0)",new zf;const n=()=>{$D(),Qa(e.user)},i=s=>{const o=s;e.user.boughtpack.find(a=>a==o)==null&&e.user.cpu>=se[o].price&&(e.user.boughtpack.push(o),console.log(e.user.boughtpack),e.user.cpu-=se[o].price,r(Math.random()),console.log(t)),e.user.save()};return W(Me,{children:[A("img",{src:"./mainmenu/store/right.png",className:"rightbanner",onClick:n}),A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:n}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/store.css"}),A(Ju,{user:e.user,display:"MUSIC STORE"}),W("div",{className:"display",children:[W("div",{className:"page-description",children:[A("span",{className:"page-description-header",children:"STORE"}),A("span",{className:"page-description-text",children:"Buy song packs here!"})]}),A("div",{className:"storecontainer animate__animated animate__fadeIn centered",children:A("div",{className:"store",children:A("div",{className:"packlist",children:Object.keys(se).map((s,o)=>se[s].price!=-1?W("div",{className:"storepack",style:{transitionDuration:"2s",transitionTimingFunction:"cubic-bezier(0.08,0.82,0.17,1)"},children:[A("img",{src:se[s].banner,className:"storepackheader",id:s}),W("div",{className:"storedescription",children:[A("div",{className:"storedescription-header",children:A("b",{children:se[s].name})}),W("div",{className:"buybutton",onClick:()=>i(s),style:{pointerEvents:e.user.boughtpack.find(a=>a==s)!=null?"none":"inherit",opacity:e.user.boughtpack.find(a=>a==s)!=null?"0.5":"1"},children:[W("span",{className:"buydisplay",children:[A(AC,{})," ",e.user.boughtpack.find(a=>a==s)!=null?"Purchased":"Purchase"]}),W("span",{children:[se[s].price," CPU"]})]})]}),A("div",{className:"storedescription-songlist"})]},o):null)})})})]})]})}const Jm=new mr.Howl({src:["/BGM/mainmenu.wav"],preload:!0,volume:.1,loop:!0});function WD(){const e=()=>{Jm.stop(),iL()};return V.exports.useEffect(()=>{Jm.seek(0),Jm.play()},[]),W(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"game-menu",children:A("img",{src:"logo/1.png",alt:"",className:"game-logo",onClick:e})})]})}new Audio;function VD(e){document.documentElement.style.filter="invert(0)";const t=e.user,r=()=>{Hf(t,e.beatmap.id)};let n=-1;e.user.progression.find((p,c)=>{p.startsWith(`${e.beatmap.id}`)&&(n=c)}),n!=-1?parseInt(e.user.progression[n].split("-")[1])<Math.round(e.score*100*10)/10&&(e.user.progression[n]=`${e.beatmap.id}-${Math.round(e.score*100*10)/10}`):e.user.progression.push(`${e.beatmap.id}-${Math.round(e.score*100*10)/10}`);const i=Math.round(e.score*10/e.beatmap.metadata.difficultcc*(.5+e.beatmap.metadata.difficultcc/40))*rt.data[e.user.partners[e.user.selectedpartner]].cpurate,s=Math.round(e.score*10/e.beatmap.metadata.difficultcc*(.5+e.beatmap.metadata.difficultcc/40)*50)*rt.data[e.user.partners[e.user.selectedpartner]].ramrate;e.user.cpu=Math.round(e.user.cpu+Math.round(i)),e.user.ram=Math.round(e.user.ram+Math.round(s));let o=-1;const a=e.user.partnersexp.find((p,c)=>{if(p.startsWith(`${e.user.selectedpartner}`))return o=c,!0});a!=null&&o!=-1?e.user.partnersexp[o]=`${a.split(",")[0]},${parseInt(a.split(",")[1])+500}`:e.user.partnersexp.push(`${e.user.selectedpartner},500`),e.user.save();const h=p=>p<=50?"F":p<=80?"D":p<=90?"C":p<=92?"B":p<=94?"A":p<=96?"S":p<=98?"SS":p<=100?"SSS":"",d=p=>p<=50?"#d65e5e":p<=80?"#e665b0":p<=90?"#dd65e6":p<=92?"#9265e6":p<=94?"#6583e6":p<=96?"#65d7e6":p<=98?"#65e6b7":p<=100?"#dbe665":"";return W(Me,{children:[A("img",{src:"https://cdn.discordapp.com/attachments/1143769032605057136/1159760620414042133/Untitled_Artwork.png?ex=6532323f&is=651fbd3f&hm=5de979cb8866ee997176bdc485703d33f33fd1fbb8b77a01161a10464b052cb7&",className:"backgroundanim"}),A("img",{src:"./result/left.png",className:"leftoverlay",alt:""}),A("img",{src:"/mainmenu/back.png",className:"backbutton",onClick:r}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A(Ju,{user:t,display:"PLAY RESULT"}),W("div",{className:"display animate__animated animate__fadeIn",children:[A("div",{className:"result-mapdisplay",children:A("img",{src:e.beatmap.jacketPath,className:"result-mapdisplay-bg"})}),W("div",{className:"rewardscreen",children:[W("div",{className:"rewardscreen-cpu",children:[A("div",{className:"rewardscreen-cpu-display",children:"CPU"})," ",Math.round(i*rt.data[e.user.partners[e.user.selectedpartner]].cpurate)," (x",rt.data[e.user.partners[e.user.selectedpartner]].cpurate," BONUS)"]}),W("div",{className:"rewardscreen-cpu",children:[A("div",{className:"rewardscreen-cpu-display",children:"RAM"})," ",Math.round(s*rt.data[e.user.partners[e.user.selectedpartner]].ramrate),"  (x",rt.data[e.user.partners[e.user.selectedpartner]].ramrate," BONUS)"]})]}),W("div",{className:"resultscreen",children:[A("div",{className:"result-mapdisplay-header",children:e.bad==0&&e.miss==0&&e.great==0?"ABSOLUTE PERFECT!":e.bad==0&&e.miss==0?"FULL CONNECTION!":Math.round(e.score*100*10)/10>=70?"CLEAR!":"Failed..."}),A("img",{className:"result-mapdisplay-jacket",src:e.beatmap.jacketPath}),W("div",{className:"resultscreen-1strow",children:[A("span",{className:"result-mapdisplay-title",children:e.beatmap.metadata.title}),A("span",{className:"result-mapdisplay-artist",children:e.beatmap.metadata.artist}),W("span",{className:"result-mapdisplay-diffname",id:e.beatmap.metadata.difficulttype,children:[e.beatmap.metadata.difficulttype," ",e.beatmap.metadata.difficult]})]}),W("div",{className:"resultscreen-2ndrow",children:[W("div",{className:"resultscreenscore",children:[W("div",{className:"resultscreendetail-maxcombo",children:[A("div",{className:"resultscreendetail-display",children:"MAX COMBO"})," ",e.combo]}),Math.round(e.score*100*10)/10," %"]}),W("div",{className:"resultscreendetail",children:[W("div",{className:"resultscreendetail-hit",children:[A("div",{className:"resultscreendetail-display",children:"X-PHASED"})," ",e.hit]}),W("div",{className:"resultscreendetail-hit",children:[A("div",{className:"resultscreendetail-display",children:"PHASED"})," ",e.great]}),W("div",{className:"resultscreendetail-miss",children:[A("div",{className:"resultscreendetail-display",children:"MIS-PHASED"})," ",e.bad]}),W("div",{className:"resultscreendetail-bad",children:[A("div",{className:"resultscreendetail-display",children:"ERROR"})," ",e.miss]})]})]})]}),W("div",{className:"rank",style:{color:d(Math.round(e.score*100*10)/10)},children:[" ",h(Math.round(e.score*100*10)/10)]})]})]})}function Kh(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}function XD(e,t){return Si.exports.SHA256(Si.exports.SHA256(Si.exports.SHA256(e+t**2)))}function eg(e,t){let r=0;for(;XD(r.toString(),t).toString()!=e;)r++;return r}let Ua=0;Object.keys(se).map(e=>{Object.keys(se[e].pack).forEach(t=>{Ua=Ua+Object.keys(se[e].pack[t].charts).length,console.log(Ua)})});new Audio;function YD(){const e=Kh("name"),t="123456789",r=new zf,n=Si.exports.AES.decrypt(Kh("data"),t).toString(Si.exports.enc.Utf8).split(",");r.pass=t,r.name=e,r.pfpurl=Kh("pfpurl"),r.cpu=eg(n.find(s=>s.startsWith("cpu"))?.split(":")[1],parseInt(t)),r.progression=[],r.ram=eg(n.find(s=>s.startsWith("ram"))?.split(":")[1],parseInt(t)),r.selectedpartner=eg(n.find(s=>s.startsWith("selectedpartner"))?.split(":")[1],parseInt(t)),r.unlockedsongs=[],r.boughtpack=["sound"],r.readstory=[],n.find(s=>s.startsWith("partners"))?.split(":")[1].split("/").forEach(s=>{s!=""&&r.partners.push(parseInt(s))}),n.find(s=>s.startsWith("partnersexp"))?.split(":")[1].split("/").forEach(s=>{s!=""&&r.partnersexp.push(s)}),n.find(s=>s.startsWith("bought"))?.split(":")[1].split("/").forEach(s=>{s!=""&&r.boughtpack.push(s)}),n.find(s=>s.startsWith("unlock"))?.split(":")[1].split("/").forEach(s=>{s!=""&&r.unlockedsongs.push(s)}),n.find(s=>s.startsWith("prog"))?.split(":")[1].split("/").forEach(s=>{s!=""&&r.progression.push(s)}),n.find(s=>s.startsWith("readstory"))?.split(":")[1].split("/").forEach(s=>{s!=""&&r.readstory.push(s)});let i=V.exports.useRef(0);return V.exports.useState(0),V.exports.useEffect(()=>{Kh("TOGGLEDOWNLOAD")=="True"?Object.keys(se).map(s=>{Object.keys(se[s].pack).forEach(o=>{Object.keys(se[s].pack[o].charts).map(a=>{new Howl({src:[se[s].pack[o].charts[a].chart.audioPath],preload:!0,volume:.1,onload:()=>{i.current=i.current+1,console.log(i.current,Ua),document.getElementById("loadedaudio").innerHTML=i.current,i.current==Ua&&i.current!=0&&setTimeout(()=>{Qa(r)},500)}})})})}):Qa(r)},[]),W(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),W("div",{className:"Loading",children:["Loading neccessary resources...",A("span",{id:"loadedaudio",children:"0"})," / ",Ua]},i.current)]})}function KD(){const[e,t]=V.exports.useState("");return V.exports.useState(""),W(Me,{children:[A("link",{rel:"stylesheet",href:"./chaptercss/MAINMENU/mmbg.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("video",{className:"storymenu-chapter-banner",loop:!0,autoPlay:!0,controls:!1,disablePictureInPicture:!0,preload:"auto",children:A("source",{src:"Partners/1.mp4",type:"video/mp4"})}),A("div",{className:"game-menu2",children:W("div",{className:"centered",children:[A("h1",{className:"animate__animated animate__fadeInUp",children:" NEODITRONIX"}),W("div",{className:"animate__animated animate__fadeInUp",children:["First off, Let's start with creating a user profile",A("br",{}),"This world is vast, and very infinite.",A("br",{}),"It is required to have a unique ID in order to distinguish one from another",A("br",{}),A("br",{}),"What's your name?",A("br",{}),A("br",{}),A("input",{id:"username",type:"text",value:e,placeholder:"USERNAME",onChange:i=>{t(i.target.value)}}),A("br",{}),A("input",{type:"submit",value:"That's my name",onClick:()=>{const i=new zf;i.name=e,i.partners=[0],i.pass="123456789",i.boughtpack=["sound"],document.cookie="COL_1_KEY=q;",document.cookie="COL_2_KEY=w;",document.cookie="COL_3_KEY=e;",document.cookie="COL_4_KEY=r;",document.cookie="COL_1_KEY2=7;",document.cookie="COL_2_KEY2=8;",document.cookie="COL_3_KEY2=9;",document.cookie="COL_4_KEY2=+;",document.cookie="CURSOR_LEFT_KEY=1;",document.cookie="CURSOR_RIGHT_KEY=2;",document.cookie="CURSOR_LEFT_KEY2=*;",document.cookie="CURSOR_RIGHT_KEY2=-;",document.cookie="OFFSET=0;",document.cookie="SCROLL_SPEED_FACTOR=5;",document.cookie="TOGGLECOLOR=True;",Qa(i)}})]})]})})]})}async function cw(e){const r=await(await fetch(`./VN/script/${e}.txt`)).text();let n="",i="",s=!1,o="",a="",h="",d="",p="";const c=r.split(`
`).map(m=>{if(m.startsWith("$IMG"))n=m.split("=")[1];else if(m.startsWith("$SFX"))h=m.split("=")[1];else if(m.startsWith("$CHAR"))d=m.split("=")[1];else if(m.startsWith("$ICON"))p=m.split("=")[1];else if(m.startsWith("$PLAY"))o=m.split("=")[1];else if(m.startsWith("$AUDIO"))a=m.split("=")[1];else if(m.startsWith("$UNLOCK")){var v=m.split("=")[1];return{icon:p.replace("\r",""),img:n,audio:a.replace("\r",""),isPlayingAudio:"",isForm:!1,Formtype:"",FormAnswer:"",sfx:"",isSongUnlock:v.replace("\r",""),char:d.replace("\r",""),story:""}}else if(m.startsWith("$FORM")){s=!0,i=m.split("=")[1].split("|")[0];let _=h,T=o;return h="",o="",{icon:p.replace("\r",""),img:n,audio:a.replace("\r",""),isPlayingAudio:T.replace("\r",""),isForm:s,Formtype:i.replace("\r",""),FormAnswer:m.split("=")[1].split("|")[2].replace("\r",""),sfx:_.replace("\r",""),char:d.replace("\r",""),story:m.split("=")[1].split("|")[1].replace("\r","")}}else{let _=h,T=o;return h="",o="",{icon:p,img:n,audio:a.replace("\r",""),isPlayingAudio:T.replace("\r",""),isForm:!1,FormAnswer:"",Formtype:"",char:d,sfx:_.replace("\r",""),story:m.replace("\r","")}}}),f=[];for(let m in c)c[m]!==void 0&&f.push(c[m]);return f}const Ee={data:{0:{name:"Spaceship",img:"BG/utopia_2.jpg",icon:"1",stories:[]},1:{name:"Developer Log",img:"BG/utopia_3.jpg",icon:"1",stories:[{pos:[5,5],title:"Dev Log #1",story:"HELLO_WORLD!",unlocktype:"none",unlock:"200",rewardtype:"story",reward:"",rewardstory:await cw("T1")},{pos:[7,5],title:"Dev Log #2",story:"HELLO_WORLD!",unlocktype:"none",unlock:"200",rewardtype:"story",reward:"",rewardstory:await cw("T2")}]},2:{name:"Eden",img:"BG/eden_light.jpg",icon:"1",stories:[]}}};function qD(e){return xn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"}}]})(e)}function QD(e){return xn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function ZD(e){return xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z"}}]})(e)}var JD=new mr.Howl({src:["/VN/SFX/shiro.wav"],preload:!0,volume:.1}),yr=new mr.Howl({src:["/BGM/1.mp3"],preload:!0,volume:1,loop:!0});function eL(e){const[t,r]=V.exports.useState(!0),n=V.exports.useRef(0),[i,s]=V.exports.useState(!1),[o,a]=V.exports.useState(!1),h=V.exports.useRef(!0),d=V.exports.useRef(""),p=V.exports.useRef(""),[c,f]=V.exports.useState(0);let m=0;Ee.data[e.content[0]].name=="???"&&(document.documentElement.style.filter="saturate(0)");const[v,_]=V.exports.useState(!1),T=()=>{const E=Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current];if(E.sfx.startsWith(".")){var P=new mr.Howl({src:[E.sfx],preload:!0,volume:.2});P.play(),console.log(P)}E.isPlayingAudio.startsWith("TRUE")?(yr.pause(),yr=new mr.Howl({src:[E.audio],preload:!0,volume:.1,loop:!0}),yr.play()):E.isPlayingAudio.startsWith("FALSE")&&(yr.pause(),yr.volume=0)},x=(E,P)=>{var I=0,R=30;let N=setTimeout(()=>{D()},R);const D=()=>{I<E.length&&n.current==P&&t?(a(!1),p.current=`${p.current}${E.charAt(I)}`,JD.play(),f(Math.random()),I++,clearTimeout(N),N=setTimeout(()=>{D()},R)):I==E.length&&(clearTimeout(N),a(!0))};D()},y=E=>{const P=Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.split("=");yr.pause(),yr.volume=0,r(!1),s(!1),h.current=!1,n.current=0,dw();const I=TC(JSON.stringify(se[P[1]].pack[P[2]].charts[E].chart));P[2]=="together"&&(I.metadata.artist="???",I.metadata.title="???",I.metadata.difficult="???",I.metadata.creator="???",I.jacketPath="BG/utopia_explode.jpg"),yr.pause(),yr.volume=0,e.user.unlockedsongs.push(`${P[1]}.${P[2]}`),kC(I,e.user,P[2])},w=()=>{if(!Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.startsWith("$ANOMALY")){if(t&&n.current+1==Object.keys(Ee.data[e.content[0]].stories[e.content[1]].rewardstory).length)r(!1),s(!1),h.current=!1,n.current=0,yr.pause(),yr.volume=0,f(Math.random()),hw();else if(t){n.current+=1,p.current="";const P=Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story;P.startsWith("$ENTERSONGSELECT")?(yr.pause(),yr.volume=0,r(!1),s(!1),h.current=!1,console.log("play"),n.current=0,dw(),Hf(e.user,P.split("=")[1]),f(Math.random())):(Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.startsWith("$ANOMALY")?s(!1):x(Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story,n.current),T(),f(Math.random()))}}};return V.exports.useEffect(()=>{T(),n.current=0,x(Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story,n.current);const E=setInterval(()=>{if(t&&i&&Date.now()>=m&&!Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm&&n.current+1!=Object.keys(Ee.data[e.content[0]].stories[e.content[1]].rewardstory).length&&t){w();const R=Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*50+500;m=Date.now()+R}t||(r(!1),s(!1),clearInterval(E))},1e3),P=I=>{t&&(I.key=="Enter"&&(h.current?Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?(Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="ANSWER"&&d.current==Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer&&(s(!1),console.log(d.current),d.current="",w()),Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="SONG"&&d.current!=""&&(document.cookie=`${Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer}=${d.current};`,s(!1),clearInterval(E),console.log(d.current),d.current="",w())):(s(!1),d.current="",w()):h.current=!0),f(Math.random()))};return document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P),clearInterval(E)}},[i]),W("div",{className:`vn-box-container ${t?"notification-new-song-animation":""}`,style:{opacity:t?1:0,backgroundImage:Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].img!=""?`url(${Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].img}) `:"",pointerEvents:t?"inherit":"none",animation:t?"fadein 0.2s":"fadeout 0.2s"},children:[A("div",{className:"vn-box-log",onClick:()=>{_(!1)},style:{transitionDuration:"0.5s",opacity:v?"1":"0",left:v?"0":"-10svw",pointerEvents:v?"inherit":"none"},children:Ee.data[e.content[0]].stories[e.content[1]].rewardstory.map((E,P)=>P<=n.current?W("div",{children:[A("div",{className:"vn-text-display-char",children:E.char}),A("div",{className:"vn-text-display-dialogue",children:E.story})]},P):null)}),W(Me,{children:[A("div",{className:"vn-header",children:A("span",{children:Ee.data[e.content[0]].stories[e.content[1]].title})}),h.current?W("div",{className:`vn-box ${t?"notification-new-song-animation":""}`,children:[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].icon!=""&&A("img",{src:`./VN/icons/${Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].icon}.png`,className:"vn-icon"}),W("div",{className:"vn-text-display",onClick:()=>{Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?(Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="ANSWER"&&d.current==Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer&&(s(!1),console.log(d.current),d.current="",w()),Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].Formtype=="SONG"&&d.current!=""&&(document.cookie=`${Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].FormAnswer}=${d.current};`,s(!1),console.log(d.current),d.current="",w())):(s(!1),console.log(d.current),d.current="",w())},children:[A("div",{className:"vn-text-display-char",children:Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char.startsWith("$s")?"":Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char}),W("div",{className:`vn-text-display-dialogue ${Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.startsWith("$ANOMALY")||Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].char.startsWith("$s")||Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock!=null?"vn-text-display-dialogue-special":""}`,children:[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.startsWith("$ANOMALY")?A(Me,{children:W("div",{className:"difficulty-selector2",children:[A("div",{id:"Lite",className:"songtitlediff",onClick:()=>{y("Lite")},children:"LI"}),A("div",{id:"Neon",className:"songtitlediff",onClick:()=>{y("Neon")},children:"NE"}),A("div",{id:"Enigma",className:"songtitlediff",onClick:()=>{y("Enigma")},children:"EN"})]})}):W(Me,{children:[p.current," ",o?A(qD,{}):null]}),Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isForm?A("input",{type:"text",onChange:E=>{d.current=E.target.value,console.log(d.current)}}):null,Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock!=null?W(Me,{children:[A("h3",{children:"New Song Unlocked"}),W("p",{children:[se[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[0]].pack[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[1]].charts.Lite.chart.metadata.artist," ","-"," ",se[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[0]].pack[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[1]].charts.Lite.chart.metadata.title]}),A("img",{style:{width:"40svw"},src:se[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[0]].pack[Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].isSongUnlock.split(".")[1]].charts.Lite.chart.jacketPath,alt:""})]}):null]})]}),W("div",{className:"vn-box-tools",children:[W("div",{className:"vn-box-tools-bt",onClick:()=>{s(!i);const E=Ee.data[e.content[0]].stories[e.content[1]].rewardstory[n.current].story.length*80+1e3;m=Date.now()+E},style:{opacity:i?"0.5":"1"},children:[A(QD,{})," Autoplay"]}),W("div",{className:"vn-box-tools-bt",onClick:()=>{_(!v)},style:{opacity:v?"0.5":"1"},children:[A(ZD,{})," Log"]}),W("div",{className:"vn-box-tools-bt",onClick:()=>{yr.pause(),yr.volume(0),r(!1),s(!1),h.current=!1,hw()},children:[A(CD,{})," Quit"]})]})]}):null]})]})}function tL(e){return A("div",{className:`storymenu-chapter-description-${e.completed?"uncomplete":"complete"}`,style:{left:`${e.story.pos[0]*6}svw`,top:`${e.story.pos[1]*6}svh`},children:e.story.title})}const Pr=new mr.Howl({src:["/BGM/1.mp3"],preload:!0,volume:1,loop:!0});let fi=!1;function hw(){Pr.fade(0,1,1e3),setTimeout(()=>{fi=!1},500)}function dw(){setTimeout(()=>{fi=!1},500)}function rL(e){V.exports.useEffect(()=>{Pr.seek(0),Pr.volume(1),Pr.play()},[]),V.exports.useState(0);const[t,r]=V.exports.useState("");V.exports.useState(0);const[n,i]=V.exports.useState(0),[s,o]=V.exports.useState("");V.exports.useRef(!1);const[a,h]=V.exports.useState("storymenu-animation"),d=V.exports.useRef(!1);V.exports.useRef(!1);const[p,c]=V.exports.useState(A(Me,{})),[f,m]=V.exports.useState(0),[v,_]=V.exports.useState([n,0]),T=()=>{Pr.stop(),Qa(e.user)},x=(I,R)=>{I=="song"&&(o(""),o("notification-new-song-animation"),e.user.unlockedsongs.push(R),r(JSON.stringify(se[R.split(".")[0]].pack[R.split(".")[1]].charts.Lite.chart)),m(Math.round(Math.random()*1e3)),fi=!0),I=="story"&&(m(Math.round(Math.random()*1e3)),fi=!0),e.user.save()},y=(I,R)=>{const N=Ee.data[R].stories[I].unlocktype,D=Ee.data[R].stories[I].rewardtype,k=Ee.data[R].stories[I].reward,M=Ee.data[R].stories[I].unlock;e.user.unlockedsongs.find(U=>U.startsWith(k))!=null;const z=e.user.progression.find(U=>U.startsWith(M))!=null,F=e.user.readstory.find(U=>U.startsWith(`${R}.${I}`))!=null;N=="play"?(z&&!F&&(e.user.readstory.push(`${R}.${I}`),_([R,I]),Pr.fade(1,0,1e3),fi=!0,e.user.readstory.find(U=>U==`${R}.${I})`)==null&&e.user.readstory.push(`${R}.${I}`),x(D,k)),F&&(Pr.fade(1,0,2e3),_([R,I]),fi=!0,m(Math.round(Math.random()*1e3))),!F&&!z&&(d.current=!0,c(A(Me,{children:Ee.data[R].stories[I].story})),Pr.fade(1,.5,1e3),m(Math.round(Math.random()*1e3)))):N=="none"?F?(Pr.fade(1,0,2e3),_([R,I]),fi=!0,m(Math.round(Math.random()*1e3))):(_([R,I]),e.user.readstory.find(U=>U==`${R}.${I})`)==null&&e.user.readstory.push(`${R}.${I}`),Pr.fade(1,0,1e3),x(D,k)):N=="pay"&&(F?(_([R,I]),fi=!0,Pr.fade(1,0,2e3)):(d.current=!0,Pr.fade(1,.5,1e3),c(W(Me,{children:[W("span",{children:[M," RAM"]})," ",A("div",{onClick:()=>{e.user.ram>=parseInt(M)&&(e.user.readstory.find(U=>U==`${R}.${I})`)==null&&e.user.readstory.push(`${R}.${I}`),e.user.ram-=parseInt(M),Pr.fade(.5,0,1e3),_([R,I]),x(D,k)),e.user.save()},children:W("span",{className:"buydisplay",children:[A(AC,{}),"Purchase"]})})]})),m(Math.round(Math.random()*1e3)))),e.user.save()};Ee.data[n].name=="???"?document.documentElement.style.filter="saturate(0)":document.documentElement.style.filter="saturate(1)";const w=e.user,E=V.exports.useRef(48),P=V.exports.useRef(21);return V.exports.useRef(E),V.exports.useRef(P),V.exports.useRef(E),V.exports.useRef(P),V.exports.useRef(Date.now()),V.exports.useRef("front"),V.exports.useState(!1),V.exports.useRef(!1),V.exports.useRef(""),W(Me,{children:[A("img",{src:"./mainmenu/back.png",className:"backbutton",onClick:T}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bu.css"}),A("link",{rel:"stylesheet",href:"./chaptercss/BU/bubg.css"}),A("div",{className:"darkscreen"}),A(Ju,{user:w,display:"CHAPTER SELECT"}),Ee.data[n-1]!=null?W("span",{className:"prevchapter",onClick:()=>{h(""),setTimeout(()=>{h("storymenu-animation")},10),i(n-1)},children:[A("img",{src:Ee.data[n-1].img,className:"prevnextimg"}),A("span",{children:A(UD,{})}),"Previous Chapter : ",Ee.data[n-1].name," "]}):null,Ee.data[n+1]!=null?W("span",{className:"nextchapter",onClick:()=>{h(""),setTimeout(()=>{h("storymenu-animation")},10),i(n+1)},children:[A("img",{src:Ee.data[n+1].img,className:"prevnextimg"}),"Next Chapter : ",Ee.data[n+1].name,A("span",{children:A(OD,{})})]}):null,A("div",{className:"display",id:"display",children:W("div",{className:`storymenu ${a}`,children:[" ",W(Me,{children:[A("img",{src:Ee.data[n].img,className:"storymenu-chapter-banner"}),A("div",{className:"storymenu-chapter-banner-overlay"}),A("div",{className:"storymenu-chapter-header",children:Ee.data[n].name}),A("div",{className:"storymenu-chapter",children:Ee.data[n].stories.map((I,R)=>{if(e.user.readstory.find(N=>N.startsWith(`${n}.${R-1}`))!=null||R==0)return A("div",{onClick:()=>{y(R,n)},children:A(tL,{story:I,completed:e.user.readstory.find(N=>N.startsWith(`${n}.${R}`))==null})},R)})})]})]})}),W("div",{className:`notification-new-song ${d.current?s:""}`,style:{backgroundImage:"url(./mainmenu/grid.jpeg)",opacity:d.current?"1":"0",transitionDuration:"0.5s",pointerEvents:d.current?"inherit":"none"},children:[A(Me,{children:p}),A("div",{onClick:()=>{d.current=!1,m(Math.round(Math.random()*1e3)),Pr.fade(.5,1,1e3)},children:A("span",{className:"buydisplay",children:"Quit"})})]}),fi?A(eL,{user:e.user,content:v,toggle:fi},f):null]})}new zt;const Hs=["Tips : cpu is used to unlock songs!","Tips : log(), DJ PARKAPRAO GAI KAIDAO, ohm002... they're all the same person. after all.. this entire game is made by one person only (if you excludes all the helpers at the start tho!)","Tips : occasionaly you might need to use ram once in a while to enter some special event!","Tips : the main inspiration for me to develop this game is sta! his tone sphere game really inspires me to do the same too","Tips : it is very very unlikely that this game will ever be featured by other artist except myself, until i'm absolutely sure about quality control for my game.","Tips : making a rhythm game is fun!","Tips : this game is made with reactjs and react-pixi"],Ai=TT(document.getElementById("root"));function kC(e,t,r){Ai.render(null);const{audioPath:n}=e;let i=0,s=0;e.hitObjects.forEach(h=>{h.type=="hold"&&(s+=h.ticks.length,i+=100*h.ticks.length),i+=100,s+=1}),e.cursor.sort((h,d)=>h.startTime-d.startTime).forEach((h,d)=>{const p=e.cursor[d-1]!=null?e.cursor[d-1].x:.5;h.type!="normal"&&(s+=h.ticks.length,i+=100*h.ticks.length),h.x!=p&&(i+=100,s+=1)});const o=new bD;console.log(r),o.init(10,10,400,n,i,e,tC,s,t),o.beatmap=e,o.anomaly=r,o.mode="play";const a=new Audio(wD);a.volume=.5,a.play(),document.getElementById("transitiontext").innerHTML=`
      <div class="play-songintro">
        <div class="play-songintro-artist">${e.metadata.artist}</div>
        <div class="play-songintro-title">${e.metadata.title} </div>
        <img class="play-songintro-jacket" src="${e.jacketPath}">
        <div class="play-songintro-diff">${e.metadata.difficulttype} ${e.metadata.difficult} </div>
        <div class="play-songintro-charter">Charted by ${e.metadata.creator} </div>
        </div>
      `,document.getElementById("transition").className="transition-on",setTimeout(()=>{var h=!1;setInterval(()=>{!isNaN(o.audio.duration())&&!h&&(o.duration=o.audio.duration()*1e3,Ai.render(A(Xr.StrictMode,{children:A(VN,{game:o,chart:e,menutime:Date.now(),user:t},Math.random())})),h=!0)},10)},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},4e3)}const ki=new Audio("./VN/SFX/eff.wav");ki.volume=.2;ki.preload="auto";function Hf(e,t){ki.currentTime=0,ki.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",Ai.render(A(GD,{user:e,song:t}))},1e3)}function nL(e){ki.currentTime=0,ki.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{Ai.render(A(rL,{user:e}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2500)}function Qa(e){ki.currentTime=0,ki.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{Ai.render(A(LD,{user:e}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2500)}function iL(){fw("status")==""?Ai.render(A(KD,{})):fw("status")!=""&&Ai.render(A(YD,{}))}function sL(e){ki.currentTime=0,ki.play(),document.getElementById("transitiontext").innerHTML=Hs[Math.round(Math.random()*(Hs.length-1))],document.getElementById("transition").className="transition-on",setTimeout(()=>{document.getElementById("transition").className="transition-off",Ai.render(A(jD,{user:e}))},1e3)}function oL(e,t,r,n,i,s,o,a){document.getElementById("transitiontext").innerHTML="",document.getElementById("transition").className="transition-on",setTimeout(()=>{Ai.render(A(VD,{user:e,beatmap:t,score:r,hit:n,great:i,bad:s,miss:o,combo:a}))},1e3),setTimeout(()=>{document.getElementById("transition").className="transition-off"},2e3)}function fw(e){let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}Ai.render(A(WD,{}));
